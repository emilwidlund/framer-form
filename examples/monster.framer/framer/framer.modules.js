require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"form/GA":[function(require,module,exports){
var s;

s = document.createElement('script');

s.setAttribute('src', 'https://www.googletagmanager.com/gtag/js?id=UA-75056533-3');

s.setAttribute('async', '');

document.head.appendChild(s);

window.dataLayer = window.dataLayer || [];

window.gtag = function() {
  return dataLayer.push(arguments);
};

window.gtag('js', new Date());

window.gtag('config', 'UA-75056533-3');

if (window.location.href.includes('framer.cloud')) {
  window.gtag('event', 'Cloud', {
    'event_category': 'Visitors'
  });
} else {
  window.gtag('event', 'Non-Cloud', {
    'event_category': 'Visitors'
  });
}


},{}],"form/Light":[function(require,module,exports){
var Animation, BaseClass, States, _,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

_ = Framer._;

BaseClass = require('./_BaseClass.coffee').BaseClass;

Animation = require('./_Animation.coffee').Animation;

States = require('./_States.coffee').States;

exports.Light = (function(superClass) {
  extend(Light, superClass);

  function Light(properties) {
    Light.__super__.constructor.call(this);
    if (!properties.type) {
      throw Error('Please specify a light type!');
    }
    this.properties = _.defaults(properties, {
      castShadow: true
    });
    this.setupLight();
  }

  Light.prototype.setupLight = function() {
    switch (this.properties.type) {
      case 'point':
        this.light = new THREE.PointLight(new THREE.Color(this.properties.color, this.properties.intensity, this.properties.distance, this.properties.decay));
        break;
      case 'directional':
        this.light = new THREE.DirectionalLight(new THREE.Color(this.properties.color, this.properties.intensity));
        break;
      case 'ambient':
        this.light = new THREE.AmbientLight(new THREE.Color(this.properties.color, this.properties.intensity));
        break;
      case 'hemisphere':
        this.light = new THREE.HemisphereLight(new THREE.Color(this.properties.skyColor, new THREE.Color(this.properties.groundColor, this.properties.intensity)));
        break;
      case 'rectarea':
        this.light = new THREE.RectAreaLight(new THREE.Color(this.properties.color, this.properties.intensity, this.properties.width, this.properties.height));
        break;
      case 'spot':
        this.light = new THREE.SpotLight(new THREE.Color(this.properties.color, this.properties.intensity, this.properties.distance, this.properties.angle, this.properties.penumbra, this.properties.decay));
    }
    this.addToRenderingInstance(this.properties.parent);
    this.applyProperties();
    this.saveInitialProperties();
    return this._states = new States(this);
  };

  Light.prototype.addToRenderingInstance = function(parent) {
    if (parent.scene) {
      return parent.scene.add(this.light);
    } else {
      return parent.add(this.light);
    }
  };

  Light.prototype.applyProperties = function(properties) {
    return Object.keys(this.properties).map((function(_this) {
      return function(k) {
        return _this[k] = _this.properties[k];
      };
    })(this));
  };

  Light.prototype.saveInitialProperties = function() {
    return this.initialProperties = this;
  };

  Light.prototype.on = function(eventName, cb) {
    var callback;
    if (eventName.includes('change')) {
      callback = function(e) {
        return cb(e.value);
      };
      this.light.addEventListener(eventName, callback);
      return Framer.CurrentContext.on('reset', (function(_this) {
        return function() {
          return _this.light.removeEventListener(eventName, callback);
        };
      })(this));
    }
  };

  Light.prototype.animate = function(properties) {
    return new Animation(this, properties);
  };

  Light.prototype.lookAt = function(a, b, c) {
    if (arguments.length === 1) {
      return this.light.lookAt(a);
    } else if (arguments.length === 3) {
      return this.light.lookAt(a, b, c);
    }
  };

  Light.prototype.stateSwitch = function(state) {
    return Object.keys(this.states).map((function(_this) {
      return function(k) {
        if (k === state) {
          _this.states.current = _this.states[k];
          return Object.keys(_this.states.current).map(function(pk) {
            return _this[pk] = _this.states.current[pk];
          });
        }
      };
    })(this));
  };

  Light.prototype.stateCycle = function(stateA, stateB) {
    if (this.states.current === this.states[stateA] || this.states.current === this.states[stateB]) {
      if (this.states.current === this.states[stateA]) {
        return this.animate(stateB);
      } else if (this.states.current === this.states[stateB]) {
        return this.animate(stateA);
      }
    } else {
      return this.animate(stateA);
    }
  };

  Light.define('position', {
    get: function() {
      return this.light.position;
    }
  });

  Light.define('x', {
    get: function() {
      return this.light.position.x;
    },
    set: function(x) {
      this.light.position.x = x;
      return this.light.dispatchEvent({
        type: 'change:x',
        value: this.x
      });
    }
  });

  Light.define('y', {
    get: function() {
      return this.light.position.y;
    },
    set: function(y) {
      this.light.position.y = y;
      return this.light.dispatchEvent({
        type: 'change:y',
        value: this.y
      });
    }
  });

  Light.define('z', {
    get: function() {
      return this.light.position.z;
    },
    set: function(z) {
      this.light.position.z = z;
      return this.light.dispatchEvent({
        type: 'change:z',
        value: this.z
      });
    }
  });

  Light.define('rotation', {
    get: function() {
      return this.light.rotation;
    }
  });

  Light.define('rotationX', {
    get: function() {
      return THREE.Math.radToDeg(this.light.rotation.x);
    },
    set: function(x) {
      this.light.rotation.x = THREE.Math.degToRad(x);
      return this.light.dispatchEvent({
        type: 'change:rotationX',
        value: this.rotationX
      });
    }
  });

  Light.define('rotationY', {
    get: function() {
      return THREE.Math.radToDeg(this.light.rotation.y);
    },
    set: function(y) {
      this.light.rotation.y = THREE.Math.degToRad(y);
      return this.light.dispatchEvent({
        type: 'change:rotationY',
        value: this.rotationY
      });
    }
  });

  Light.define('rotationZ', {
    get: function() {
      return THREE.Math.radToDeg(this.light.rotation.z);
    },
    set: function(z) {
      this.light.rotation.z = THREE.Math.degToRad(z);
      return this.light.dispatchEvent({
        type: 'change:rotationZ',
        value: this.rotationZ
      });
    }
  });

  Light.define('visible', {
    get: function() {
      return this.light.visible;
    },
    set: function(bool) {
      this.light.visible = bool;
      return this.light.dispatchEvent({
        type: 'change:visible',
        value: this.visible
      });
    }
  });

  Light.define('states', {
    get: function() {
      return this._states.states;
    },
    set: function(states) {
      return _.extend(this.states, states);
    }
  });

  Light.define('color', {
    get: function() {
      return this.light.color;
    },
    set: function(color) {
      this.light.color = new THREE.Color(color);
      return this.light.dispatchEvent({
        type: 'change:color',
        value: this.color
      });
    }
  });

  Light.define('intensity', {
    get: function() {
      return this.light.intensity;
    },
    set: function(intensity) {
      this.light.intensity = intensity;
      return this.light.dispatchEvent({
        type: 'change:intensity',
        value: this.intensity
      });
    }
  });

  Light.define('angle', {
    get: function() {
      return this.light.angle;
    },
    set: function(angle) {
      this.light.angle = angle;
      return this.light.dispatchEvent({
        type: 'change:angle',
        value: this.angle
      });
    }
  });

  Light.define('castShadow', {
    get: function() {
      return this.light.castShadow;
    },
    set: function(bool) {
      this.light.castShadow = bool;
      return this.light.dispatchEvent({
        type: 'change:castShadow',
        value: this.castShadow
      });
    }
  });

  Light.define('decay', {
    get: function() {
      return this.light.decay;
    },
    set: function(decay) {
      this.light.decay = decay;
      return this.light.dispatchEvent({
        type: 'change:decay',
        value: this.decay
      });
    }
  });

  Light.define('distance', {
    get: function() {
      return this.light.distance;
    },
    set: function(distance) {
      this.light.distance = distance;
      return this.light.dispatchEvent({
        type: 'change:distance',
        value: this.distance
      });
    }
  });

  Light.define('penumbra', {
    get: function() {
      return this.light.penumbra;
    },
    set: function(penumbra) {
      this.light.penumbra = penumbra;
      return this.light.dispatchEvent({
        type: 'change:penumbra',
        value: this.penumbra
      });
    }
  });

  Light.define('power', {
    get: function() {
      return this.light.power;
    },
    set: function(power) {
      this.light.power = power;
      return this.light.dispatchEvent({
        type: 'change:power',
        value: this.power
      });
    }
  });

  Light.define('shadow', {
    get: function() {
      return this.light.shadow;
    },
    set: function(shadow) {
      return this.light.shadow = shadow;
    }
  });

  Light.define('target', {
    get: function() {
      return this.light.target;
    },
    set: function(target) {
      this.light.target = target;
      return this.light.dispatchEvent({
        type: 'change:target',
        value: this.target
      });
    }
  });

  Light.define('width', {
    get: function() {
      return this.light.width;
    },
    set: function(width) {
      this.light.width = width;
      return this.light.dispatchEvent({
        type: 'change:width',
        value: this.width
      });
    }
  });

  Light.define('height', {
    get: function() {
      return this.light.height;
    },
    set: function(height) {
      this.light.height = height;
      return this.light.dispatchEvent({
        type: 'change:height',
        value: this.height
      });
    }
  });

  Light.define('groundColor', {
    get: function() {
      return this.light.groundColor;
    },
    set: function(groundColor) {
      this.light.groundColor = new THREE.Color(groundColor);
      return this.light.dispatchEvent({
        type: 'change:groundColor',
        value: this.groundColor
      });
    }
  });

  Light.define('skyColor', {
    get: function() {
      return this.light.skyColor;
    },
    set: function(skyColor) {
      this.light.skyColor = new THREE.Color(skyColor);
      return this.light.dispatchEvent({
        type: 'change:skyColor',
        value: this.skyColor
      });
    }
  });

  return Light;

})(BaseClass);


},{"./_Animation.coffee":"form/_Animation","./_BaseClass.coffee":"form/_BaseClass","./_States.coffee":"form/_States"}],"form/Mesh":[function(require,module,exports){
var _,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

_ = Framer._;

exports.Mesh = (function(superClass) {
  extend(Mesh, superClass);

  Mesh.define = function(propertyName, descriptor) {
    if (descriptor.readonly) {
      descriptor.set = function(value) {
        throw Error(this.constructor.name + "." + propertyName + " is readonly");
      };
    }
    return Object.defineProperty(this.prototype, propertyName, descriptor);
  };

  function Mesh(properties) {
    if (properties == null) {
      properties = {};
    }
    Mesh.__super__.constructor.call(this, properties.geometry, properties.material);
    _.defaults(properties, {
      castShadow: true,
      receiveShadow: true
    });
    this.setupShadowSettings(properties);
    if (properties.parent) {
      this.addToRenderingInstance(properties.parent);
    }
    this.setScale(properties.scale, properties.scaleX, properties.scaleY, properties.scaleZ);
    this.setPosition([properties.x, properties.y, properties.z]);
    this.setRotation([properties.rotationX, properties.rotationY, properties.rotationZ]);
  }

  Mesh.prototype.setupShadowSettings = function(properties) {
    this.castShadow = properties.castShadow;
    return this.receiveShadow = properties.receiveShadow;
  };

  Mesh.prototype.addToRenderingInstance = function(parent) {
    if (parent.scene) {
      return parent.scene.add(this);
    } else {
      return parent.add(this);
    }
  };

  Mesh.prototype.setScale = function(uniformScale, scaleX, scaleY, scaleZ) {
    if (uniformScale) {
      return this.scale = uniformScale || 1;
    } else {
      this.scaleX = scaleX || 1;
      this.scaleY = scaleY || 1;
      return this.scaleZ = scaleZ || 1;
    }
  };

  Mesh.prototype.setPosition = function(position) {
    this.x = position[0] || 0;
    this.y = position[1] || 0;
    return this.z = position[2] || 0;
  };

  Mesh.prototype.setRotation = function(rotation) {
    this.rotationX = rotation[0] || 0;
    this.rotationY = rotation[1] || 0;
    return this.rotationZ = rotation[2] || 0;
  };

  Mesh.define('scale', {
    get: function() {
      return this.scale.x;
    },
    set: function(scale) {
      return this.scale.set(scale, scale, scale);
    }
  });

  Mesh.define('scaleX', {
    get: function() {
      return this.scale.x;
    },
    set: function(scale) {
      return this.scale.set(scale, this.scale.y, this.scale.z);
    }
  });

  Mesh.define('scaleY', {
    get: function() {
      return this.scale.y;
    },
    set: function(scale) {
      return this.scale.set(this.scale.x, scale, this.scale.z);
    }
  });

  Mesh.define('scaleZ', {
    get: function() {
      return this.scale.z;
    },
    set: function(scale) {
      return this.scale.set(this.scale.x, this.scale.y, scale);
    }
  });

  Mesh.define('x', {
    get: function() {
      return this.position.x;
    },
    set: function(x) {
      return this.position.x = x;
    }
  });

  Mesh.define('y', {
    get: function() {
      return this.position.y;
    },
    set: function(y) {
      return this.position.y = y;
    }
  });

  Mesh.define('z', {
    get: function() {
      return this.position.z;
    },
    set: function(z) {
      return this.position.z = z;
    }
  });

  Mesh.define('rotationX', {
    get: function() {
      return THREE.Math.radToDeg(this.rotation.x);
    },
    set: function(x) {
      return this.rotation.x = THREE.Math.degToRad(x);
    }
  });

  Mesh.define('rotationY', {
    get: function() {
      return THREE.Math.radToDeg(this.rotation.y);
    },
    set: function(y) {
      return this.rotation.y = THREE.Math.degToRad(y);
    }
  });

  Mesh.define('rotationZ', {
    get: function() {
      return THREE.Math.radToDeg(this.rotation.z);
    },
    set: function(z) {
      return this.rotation.z = THREE.Math.degToRad(z);
    }
  });

  return Mesh;

})(THREE.Mesh);


},{}],"form/Model":[function(require,module,exports){
var Animation, BaseClass, Collada, FBX, GLTF, JSONObject, OBJ, States, _,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

_ = Framer._;

BaseClass = require('./_BaseClass.coffee').BaseClass;

Animation = require('./_Animation.coffee').Animation;

States = require('./_States.coffee').States;

OBJ = require('./loaders/OBJ.coffee').OBJ;

FBX = require('./loaders/FBX.coffee').FBX;

GLTF = require('./loaders/GLTF.coffee').GLTF;

Collada = require('./loaders/Collada.coffee').Collada;

JSONObject = require('./loaders/JSONObject.coffee').JSONObject;

exports.Model = (function(superClass) {
  extend(Model, superClass);

  function Model(properties) {
    if (properties == null) {
      properties = {};
    }
    this.updateMixer = bind(this.updateMixer, this);
    Model.__super__.constructor.call(this);
    _.defaults(properties, {
      animate: true,
      castShadow: true,
      receiveShadow: true,
      reposition: true
    });
    switch (this.getExtension(properties.path)) {
      case 'obj':
        new OBJ(properties, (function(_this) {
          return function(model) {
            _this.mesh = model;
            return _this.setupModel(properties);
          };
        })(this));
        break;
      case 'fbx':
        new FBX(properties, (function(_this) {
          return function(model) {
            _this.mesh = model;
            return _this.setupModel(properties);
          };
        })(this));
        break;
      case 'gltf' || 'glb':
        new GLTF(properties, (function(_this) {
          return function(model) {
            _this.mesh = model;
            return _this.setupModel(properties);
          };
        })(this));
        break;
      case 'dae':
        new Collada(properties, (function(_this) {
          return function(model) {
            _this.mesh = model;
            return _this.setupModel(properties);
          };
        })(this));
        break;
      case 'json':
        new JSONObject(properties, (function(_this) {
          return function(model) {
            _this.mesh = model;
            return _this.setupModel(properties);
          };
        })(this));
    }
  }

  Model.prototype.getExtension = function(path) {
    return path.split('.').pop();
  };

  Model.prototype.setupModel = function(properties) {
    if (properties.reposition) {
      this.repositionMesh();
    }
    this.pivot = new THREE.Group;
    this.pivot.add(this.mesh);
    this.saveInitialProperties();
    if (properties.material) {
      this.applyMaterial(properties.material);
    }
    this.setupShadowSettings(properties);
    if (properties.smoothShading) {
      this.mesh.traverse(function(c) {
        if (c instanceof THREE.Mesh) {
          return c.material.shading = THREE.SmoothShading;
        }
      });
    }
    if (properties.animate && this.mesh.animations && this.mesh.animations[0]) {
      this.handleAnimations(properties);
    }
    if (properties.parent) {
      this.addToRenderingInstance(properties.parent);
    }
    this.setScale(properties.scale, properties.scaleX, properties.scaleY, properties.scaleZ);
    this.setPosition([properties.x, properties.y, properties.z]);
    this.setRotation([properties.rotationX, properties.rotationY, properties.rotationZ]);
    this.setMid({
      midX: properties.midX,
      midY: properties.midY,
      midZ: properties.midZ
    });
    if (properties.visible) {
      this.visible = properties.visible;
    }
    this._states = new States(this);
    if (properties.onLoad) {
      return properties.onLoad(this);
    }
  };

  Model.prototype.repositionMesh = function() {
    this.boundingBox = new THREE.Box3().setFromObject(this.mesh);
    this.offset = this.boundingBox.getCenter(this.mesh.position);
    return this.mesh.position.multiplyScalar(-1);
  };

  Model.prototype.saveInitialProperties = function() {
    return this.initialProperties = this;
  };

  Model.prototype.applyMaterial = function(material) {
    return this.mesh.traverse(function(c) {
      if (c instanceof THREE.Mesh) {
        return c.material = material;
      }
    });
  };

  Model.prototype.setupShadowSettings = function(properties) {
    return this.mesh.traverse(function(c) {
      if (c instanceof THREE.Mesh) {
        c.castShadow = properties.castShadow;
        return c.receiveShadow = properties.receiveShadow;
      }
    });
  };

  Model.prototype.addToRenderingInstance = function(parent) {
    if (parent.scene) {
      return parent.scene.add(this.pivot);
    } else {
      return parent.add(this.pivot);
    }
  };

  Model.prototype.handleAnimations = function(properties) {
    if (_.isNumber(properties.animationClip)) {
      this.animationIndex = properties.animationClip - 1;
    } else {
      this.animationIndex = 0;
    }
    this.clock = new THREE.Clock;
    this.mesh.mixer = new THREE.AnimationMixer(this.mesh);
    this.action = this.mesh.mixer.clipAction(this.mesh.animations[this.animationIndex]);
    this.action.play();
    this.updateMixer();
    return Framer.CurrentContext.on('reset', (function(_this) {
      return function() {
        return cancelAnimationFrame(_this.mixerRequestId);
      };
    })(this));
  };

  Model.prototype.updateMixer = function() {
    this.mixerRequestId = requestAnimationFrame(this.updateMixer);
    return this.mesh.mixer.update(this.clock.getDelta());
  };

  Model.prototype.on = function(eventName, cb) {
    var callback;
    if (eventName.includes('change')) {
      callback = function(e) {
        return cb(e.value);
      };
      this.pivot.addEventListener(eventName, callback);
      return Framer.CurrentContext.on('reset', (function(_this) {
        return function() {
          return _this.pivot.removeEventListener(eventName, callback);
        };
      })(this));
    } else {
      return this.mesh.traverse(function(c) {
        if (c instanceof THREE.Mesh) {
          callback = function() {
            return cb();
          };
          c.addEventListener(eventName, callback);
          return Framer.CurrentContext.on('reset', (function(_this) {
            return function() {
              return c.removeEventListener(eventName, callback);
            };
          })(this));
        }
      });
    }
  };

  Model.prototype.setScale = function(uniformScale, scaleX, scaleY, scaleZ) {
    if (uniformScale) {
      return this.scale = uniformScale || 1;
    } else {
      this.scaleX = scaleX || 1;
      this.scaleY = scaleY || 1;
      return this.scaleZ = scaleZ || 1;
    }
  };

  Model.prototype.setPosition = function(position) {
    this.x = position[0] || 0;
    this.y = position[1] || 0;
    return this.z = position[2] || 0;
  };

  Model.prototype.setRotation = function(rotation) {
    this.rotationX = rotation[0] || 0;
    this.rotationY = rotation[1] || 0;
    return this.rotationZ = rotation[2] || 0;
  };

  Model.prototype.setMid = function(mid) {
    return Object.keys(mid).map((function(_this) {
      return function(k) {
        if (mid[k]) {
          return _this[k] = mid[k];
        }
      };
    })(this));
  };

  Model.prototype.animate = function(properties) {
    return new Animation(this, properties);
  };

  Model.prototype.lookAt = function(a, b, c) {
    if (arguments.length === 1) {
      return this.pivot.lookAt(a);
    } else if (arguments.length === 3) {
      return this.pivot.lookAt(a, b, c);
    }
  };

  Model.prototype.stateSwitch = function(state) {
    return Object.keys(this.states).map((function(_this) {
      return function(k) {
        if (k === state) {
          _this.states.current = _this.states[k];
          return Object.keys(_this.states.current).map(function(pk) {
            return _this[pk] = _this.states.current[pk];
          });
        }
      };
    })(this));
  };

  Model.prototype.stateCycle = function(stateA, stateB) {
    if (this.states.current === this.states[stateA] || this.states.current === this.states[stateB]) {
      if (this.states.current === this.states[stateA]) {
        return this.animate(stateB);
      } else if (this.states.current === this.states[stateB]) {
        return this.animate(stateA);
      }
    } else {
      return this.animate(stateA);
    }
  };

  Model.define('scale', {
    get: function() {
      return this.pivot.scale.x;
    },
    set: function(scale) {
      this.pivot.scale.set(scale, scale, scale);
      return this.pivot.dispatchEvent({
        type: 'change:scale',
        value: this.scale
      });
    }
  });

  Model.define('scaleX', {
    get: function() {
      return this.pivot.scale.x;
    },
    set: function(scale) {
      this.pivot.scale.set(scale, this.pivot.scale.y, this.pivot.scale.z);
      return this.pivot.dispatchEvent({
        type: 'change:scaleX',
        value: this.scaleX
      });
    }
  });

  Model.define('scaleY', {
    get: function() {
      return this.pivot.scale.y;
    },
    set: function(scale) {
      this.pivot.scale.set(this.pivot.scale.x, scale, this.pivot.scale.z);
      return this.pivot.dispatchEvent({
        type: 'change:scaleY',
        value: this.scaleY
      });
    }
  });

  Model.define('scaleZ', {
    get: function() {
      return this.pivot.scale.z;
    },
    set: function(scale) {
      this.pivot.scale.set(this.pivot.scale.x, this.pivot.scale.y, scale);
      return this.pivot.dispatchEvent({
        type: 'change:scaleZ',
        value: this.scaleZ
      });
    }
  });

  Model.define('position', {
    get: function() {
      return this.pivot.position;
    }
  });

  Model.define('x', {
    get: function() {
      return this.pivot.position.x;
    },
    set: function(x) {
      this.pivot.position.x = x;
      return this.pivot.dispatchEvent({
        type: 'change:x',
        value: this.x
      });
    }
  });

  Model.define('y', {
    get: function() {
      return this.pivot.position.y;
    },
    set: function(y) {
      this.pivot.position.y = y;
      return this.pivot.dispatchEvent({
        type: 'change:y',
        value: this.y
      });
    }
  });

  Model.define('z', {
    get: function() {
      return this.pivot.position.z;
    },
    set: function(z) {
      this.pivot.position.z = z;
      return this.pivot.dispatchEvent({
        type: 'change:z',
        value: this.z
      });
    }
  });

  Model.define('rotation', {
    get: function() {
      return this.pivot.rotation;
    }
  });

  Model.define('rotationX', {
    get: function() {
      return THREE.Math.radToDeg(this.pivot.rotation.x);
    },
    set: function(x) {
      this.pivot.rotation.x = THREE.Math.degToRad(x);
      return this.pivot.dispatchEvent({
        type: 'change:rotationX',
        value: this.rotationX
      });
    }
  });

  Model.define('rotationY', {
    get: function() {
      return THREE.Math.radToDeg(this.pivot.rotation.y);
    },
    set: function(y) {
      this.pivot.rotation.y = THREE.Math.degToRad(y);
      return this.pivot.dispatchEvent({
        type: 'change:rotationY',
        value: this.rotationY
      });
    }
  });

  Model.define('rotationZ', {
    get: function() {
      return THREE.Math.radToDeg(this.pivot.rotation.z);
    },
    set: function(z) {
      this.pivot.rotation.z = THREE.Math.degToRad(z);
      return this.pivot.dispatchEvent({
        type: 'change:rotationZ',
        value: this.rotationZ
      });
    }
  });

  Model.define('midX', {
    set: function(midX) {
      return this.mesh.position.x = -midX;
    }
  });

  Model.define('midY', {
    set: function(midY) {
      return this.mesh.position.y = -midY;
    }
  });

  Model.define('midZ', {
    set: function(midZ) {
      return this.mesh.position.z = -midZ;
    }
  });

  Model.define('parent', {
    get: function() {
      return this.pivot.parent;
    },
    set: function(parent) {
      this.pivot.parent = parent;
      return this.pivot.dispatchEvent({
        type: 'change:parent',
        value: this.parent
      });
    }
  });

  Model.define('visible', {
    get: function() {
      return this.pivot.visible;
    },
    set: function(bool) {
      this.pivot.visible = bool;
      return this.pivot.dispatchEvent({
        type: 'change:visible',
        value: this.visible
      });
    }
  });

  Model.define('children', {
    get: function() {
      return this.pivot.children;
    }
  });

  Model.define('size', {
    get: function() {
      return {
        height: this.boundingBox.max.y - this.boundingBox.min.y,
        width: this.boundingBox.max.x - this.boundingBox.min.x,
        depth: this.boundingBox.max.z - this.boundingBox.min.z
      };
    }
  });

  Model.define('states', {
    get: function() {
      return this._states.states;
    },
    set: function(states) {
      return _.extend(this.states, states);
    }
  });

  Model.define('animationClip', {
    get: function() {
      return this.animationIndex + 1;
    },
    set: function(animation) {
      if (this.mesh.animations[animation - 1]) {
        this.animationIndex = animation - 1;
        this.action = this.mesh.mixer.clipAction(this.mesh.animations[this.animationIndex]);
        return this.action.play();
      }
    }
  });

  return Model;

})(BaseClass);


},{"./_Animation.coffee":"form/_Animation","./_BaseClass.coffee":"form/_BaseClass","./_States.coffee":"form/_States","./loaders/Collada.coffee":"form/loaders/Collada","./loaders/FBX.coffee":"form/loaders/FBX","./loaders/GLTF.coffee":"form/loaders/GLTF","./loaders/JSONObject.coffee":"form/loaders/JSONObject","./loaders/OBJ.coffee":"form/loaders/OBJ"}],"form/Scene":[function(require,module,exports){
var Camera, _,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

_ = Framer._;

Camera = require('./_Camera.coffee').Camera;

exports.Scene = (function(superClass) {
  extend(Scene, superClass);

  function Scene(properties) {
    var cameraProps;
    if (properties == null) {
      properties = {};
    }
    this.onWindowResize = bind(this.onWindowResize, this);
    this.handleRaycaster = bind(this.handleRaycaster, this);
    this.loop = bind(this.loop, this);
    Scene.__super__.constructor.call(this, _.defaults(properties, {
      backgroundColor: '#000'
    }));
    this.renderer = new THREE.WebGLRenderer({
      antialias: true,
      alpha: true
    });
    this._element.appendChild(this.renderer.domElement);
    this.renderer.setSize(this.width, this.height);
    this.renderer.setPixelRatio(window.devicePixelRatio);
    this.renderer.domElement.style.width = '100%';
    this.renderer.domElement.style.height = '100%';
    this.renderer.shadowMap.enabled = true;
    this.renderer.shadowMap.type = THREE.PCFSoftShadowMap;
    this.scene = new THREE.Scene;
    cameraProps = _.defaults(properties.camera, {
      aspect: this.width / this.height
    });
    this.camera = new Camera(cameraProps, this._element);
    Canvas.onResize(this.onWindowResize);
    this.raycaster = new THREE.Raycaster;
    this.mouse = new THREE.Vector2;
    this.intersected = null;
    this.intersectedEventEmitted = false;
    this.mousedown = false;
    this.on('mousemove', (function(_this) {
      return function(e) {
        _this.mouse.x = (e.clientX / _this.width) * 2 - 1;
        return _this.mouse.y = -(e.clientY / _this.height) * 2 + 1;
      };
    })(this));
    this.on('mousedown', (function(_this) {
      return function(e) {
        _this.mousedown = true;
        if (_this.intersected) {
          _this.intersected.object.dispatchEvent({
            type: 'mousedown'
          });
          _this.intersected.object.dispatchEvent({
            type: 'onmousedown'
          });
          _this.intersected.object.dispatchEvent({
            type: 'click'
          });
          return _this.intersected.object.dispatchEvent({
            type: 'onclick'
          });
        }
      };
    })(this));
    this.on('mouseup', (function(_this) {
      return function(e) {
        _this.mousedown = false;
        if (_this.intersected) {
          _this.intersected.object.dispatchEvent({
            type: 'mouseup'
          });
          return _this.intersected.object.dispatchEvent({
            type: 'onmouseup'
          });
        }
      };
    })(this));
    this.loop();
    Framer.CurrentContext.on('reset', (function(_this) {
      return function() {
        return cancelAnimationFrame(_this.animationLoopRequestId);
      };
    })(this));
  }

  Scene.prototype.loop = function() {
    this.animationLoopRequestId = requestAnimationFrame(this.loop);
    if (this.animationLoop) {
      this.animationLoop();
    }
    if (this.camera.controls) {
      this.camera.controls.update();
    }
    this.handleRaycaster();
    return this.renderer.render(this.scene, this.camera.nativeCamera);
  };

  Scene.prototype.handleRaycaster = function() {
    var intersects;
    this.raycaster.setFromCamera(this.mouse, this.camera.nativeCamera);
    intersects = this.raycaster.intersectObjects(this.scene.children, true);
    if (intersects.length && this.intersected !== intersects[0]) {
      this.intersected = intersects[0];
    }
    if (this.intersected && !intersects.length) {
      this.intersected.object.dispatchEvent({
        type: 'mouseout'
      });
      this.intersected.object.dispatchEvent({
        type: 'onmouseout'
      });
    }
    if (!intersects.length) {
      this.intersected = null;
      this.intersectedEventEmitted = false;
    }
    if (!this.intersectedEventEmitted && this.intersected) {
      this.intersected.object.dispatchEvent({
        type: 'mouseover'
      });
      this.intersected.object.dispatchEvent({
        type: 'onmouseover'
      });
      return this.intersectedEventEmitted = true;
    }
  };

  Scene.prototype.onWindowResize = function(e) {
    this.camera.aspect = this.width / this.height;
    this.camera.nativeCamera.updateProjectionMatrix();
    return this.renderer.setSize(this.width, this.height);
  };

  return Scene;

})(Layer);


},{"./_Camera.coffee":"form/_Camera"}],"form/Studio":[function(require,module,exports){
var Scene, _,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

_ = Framer._;

Scene = require('./Scene.coffee').Scene;

exports.Studio = (function(superClass) {
  extend(Studio, superClass);

  function Studio(properties) {
    if (properties == null) {
      properties = {};
    }
    _.defaults(properties, {
      camera: {
        y: 220,
        rotationX: -15
      }
    });
    Studio.__super__.constructor.call(this, properties);
    this.scene.background = new THREE.Color(0x9181a0);
    this.scene.fog = new THREE.Fog(0x9181a0, 400, 1000);
    this.hlight = new THREE.HemisphereLight(0xffffff, 0x444444);
    this.hlight.position.y = 200;
    this.scene.add(this.hlight);
    this.light = new THREE.PointLight(0xffffff, .1);
    this.light.position.set(0, 800, 0);
    this.light.castShadow = true;
    this.light.shadow.camera.near = 100;
    this.light.shadow.camera.far = 1000;
    this.light.shadow.bias = .0001;
    this.light.shadow.radius = 5;
    this.light.shadow.mapSize.width = 1024;
    this.light.shadow.mapSize.height = 1024;
    this.scene.add(this.light);
    this.light2 = new THREE.DirectionalLight(0xff9999, .3);
    this.light2.position.set(-100, 200, -300);
    this.scene.add(this.light2);
    this.light3 = new THREE.DirectionalLight(0x6666ff, .2);
    this.light3.position.set(100, 200, -300);
    this.scene.add(this.light3);
    this.light4 = new THREE.DirectionalLight(0xff9999, .3);
    this.light4.position.set(-100, 200, 300);
    this.scene.add(this.light4);
    this.light5 = new THREE.DirectionalLight(0x6666ff, .2);
    this.light5.position.set(100, 200, 300);
    this.scene.add(this.light5);
    this.floorGeo = new THREE.CircleGeometry(800, 100);
    this.floorMat = new THREE.MeshStandardMaterial({
      roughness: .6,
      color: 0xaaaaaa,
      metalness: 0.2,
      bumpScale: 0.0005
    });
    this.floor = new THREE.Mesh(this.floorGeo, this.floorMat);
    this.floor.rotation.x = -Math.PI / 2;
    this.floor.receiveShadow = true;
    this.scene.add(this.floor);

    /*
    @grid = new THREE.GridHelper 2000, 20, 0x000000, 0x000000
    @grid.material.opacity = .2
    @grid.material.transparent = true
    @scene.add @grid
     */
  }

  return Studio;

})(Scene);


},{"./Scene.coffee":"form/Scene"}],"form/_Animation":[function(require,module,exports){
var Model, _,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

_ = Framer._;

Model = require('./Model.coffee').Model;

exports.Animation = (function(superClass) {
  extend(Animation, superClass);

  function Animation(model, properties) {
    var stateName;
    if (properties == null) {
      properties = {};
    }
    this.animationLoop = bind(this.animationLoop, this);
    Animation.__super__.constructor.call(this);
    if (!properties) {
      throw Error('Please specify properties or a state to animate!');
    }
    if (_.isString(properties)) {
      stateName = properties;
      Object.keys(model.states).map((function(_this) {
        return function(k) {
          if (k === stateName) {
            model.states.current = model.states[k];
            return properties = model.states[stateName];
          }
        };
      })(this));
    }
    this.properties = this.filterProperties(properties);
    this.options = _.defaults(properties.options, {
      time: 1,
      delay: 0,
      curve: 'linear'
    });
    Utils.delay(this.options.delay, (function(_this) {
      return function() {
        _this.model = model;
        _this.mesh = model.mesh || model.light || model.nativeCamera;
        _this.fps = 60;
        _this.time = _this.options.time;
        _this.renderedFrames = 0;
        _this.totalFrames = _this.time * _this.fps;
        _this.modelPropertyInitialValues = {};
        _this.deltas = _this.calculateDeltas();
        if (_this.deltas.length) {
          _this.intervalDisposer = setInterval(function() {
            if (_this.renderedFrames >= _this.totalFrames) {
              return _this.disposeInterval;
            }
            requestAnimationFrame(_this.animationLoop);
            return _this.renderedFrames++;
          }, 1000 / _this.fps);
        }
        return Framer.CurrentContext.on('reset', function() {
          if (_this.intervalDisposer) {
            return clearInterval(_this.intervalDisposer);
          }
        });
      };
    })(this));
  }

  Animation.prototype.filterProperties = function(properties) {
    var props;
    props = Object.assign({}, properties);
    delete props.options;
    return props;
  };

  Animation.prototype.calculateDeltas = function() {
    var deltas;
    deltas = Object.keys(this.properties).map((function(_this) {
      return function(k) {
        var newObj;
        _this.modelPropertyInitialValues[k] = _this.model[k];
        newObj = {};
        if (_this.model[k] > _this.properties[k]) {
          newObj[k] = -Math.abs(_this.model[k] - _this.properties[k]);
        } else if (_this.model[k] < _this.properties[k]) {
          newObj[k] = Math.abs(_this.model[k] - _this.properties[k]);
        } else {
          null;
        }
        return newObj;
      };
    })(this));
    return deltas.filter(function(d) {
      return d;
    });
  };

  Animation.prototype.applyEasing = function(t, b, c, d) {
    if (this.options.curve.includes('ease')) {
      return this[this.options.curve](t, b, c, d);
    } else {
      return this.linear(t, b, c, d);
    }
  };

  Animation.prototype.animationLoop = function() {
    var delta, deltaValue, easedValue, i, j, len, prop, ref, results;
    ref = this.deltas;
    results = [];
    for (i = j = 0, len = ref.length; j < len; i = ++j) {
      delta = ref[i];
      prop = Object.keys(delta)[0];
      deltaValue = Object.values(delta)[0];
      easedValue = this.applyEasing(this.renderedFrames, this.modelPropertyInitialValues[prop], deltaValue, this.totalFrames);
      results.push(this.model[prop] = easedValue);
    }
    return results;
  };

  Animation.prototype.disposeInterval = function() {
    return clearInterval(this.intervalDisposer);
  };

  Animation.prototype.linear = function(t, b, c, d) {
    return c * t / d + b;
  };

  Animation.prototype.easeInQuad = function(t, b, c, d) {
    return c * (t /= d) * t + b;
  };

  Animation.prototype.easeOutQuad = function(t, b, c, d) {
    return -c * (t /= d) * (t - 2) + b;
  };

  Animation.prototype.easeInOutQuad = function(t, b, c, d) {
    if ((t /= d / 2) < 1) {
      return c / 2 * t * t + b;
    } else {
      return -c / 2 * ((--t) * (t - 2) - 1) + b;
    }
  };

  Animation.prototype.easeInCubic = function(t, b, c, d) {
    return c * (t /= d) * t * t + b;
  };

  Animation.prototype.easeOutCubic = function(t, b, c, d) {
    return c * ((t = t / d - 1) * t * t + 1) + b;
  };

  Animation.prototype.easeInOutCubic = function(t, b, c, d) {
    if ((t /= d / 2) < 1) {
      return c / 2 * t * t * t + b;
    } else {
      return c / 2 * ((t -= 2) * t * t + 2) + b;
    }
  };

  Animation.prototype.easeInQuart = function(t, b, c, d) {
    return c * (t /= d) * t * t * t + b;
  };

  Animation.prototype.easeOutQuart = function(t, b, c, d) {
    return -c * ((t = t / d - 1) * t * t * t - 1) + b;
  };

  Animation.prototype.easeInOutQuart = function(t, b, c, d) {
    if ((t /= d / 2) < 1) {
      return c / 2 * t * t * t * t + b;
    } else {
      return -c / 2 * ((t -= 2) * t * t * t - 2) + b;
    }
  };

  Animation.prototype.easeInQuint = function(t, b, c, d) {
    return c * (t /= d) * t * t * t * t + b;
  };

  Animation.prototype.easeOutQuint = function(t, b, c, d) {
    return c * ((t = t / d - 1) * t * t * t * t + 1) + b;
  };

  Animation.prototype.easeInOutQuint = function(t, b, c, d) {
    if ((t /= d / 2) < 1) {
      return c / 2 * t * t * t * t * t + b;
    } else {
      return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;
    }
  };

  Animation.prototype.easeInSine = function(t, b, c, d) {
    return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;
  };

  Animation.prototype.easeOutSine = function(t, b, c, d) {
    return c * Math.sin(t / d * (Math.PI / 2)) + b;
  };

  Animation.prototype.easeInOutSine = function(t, b, c, d) {
    return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;
  };

  Animation.prototype.easeInExpo = function(t, b, c, d) {
    var ref;
    return (ref = t === 0) != null ? ref : {
      b: c * Math.pow(2, 10 * (t / d - 1)) + b
    };
  };

  Animation.prototype.easeOutExpo = function(t, b, c, d) {
    var ref;
    return (ref = t === d) != null ? ref : b + {
      c: c * (-Math.pow(2, -10 * t / d) + 1) + b
    };
  };

  Animation.prototype.easeInOutExpo = function(t, b, c, d) {
    if (t === 0) {
      b;
    }
    if (t === d) {
      b + c;
    }
    if ((t /= d / 2) < 1) {
      return c / 2 * Math.pow(2, 10 * (t - 1)) + b;
    } else {
      return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;
    }
  };

  Animation.prototype.easeInCirc = function(t, b, c, d) {
    return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;
  };

  Animation.prototype.easeOutCirc = function(t, b, c, d) {
    return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;
  };

  Animation.prototype.easeInOutCirc = function(t, b, c, d) {
    if ((t /= d / 2) < 1) {
      return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;
    } else {
      return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;
    }
  };

  Animation.prototype.easeInElastic = function(t, b, c, d) {
    var a, p, s;
    s = 1.70158;
    p = 0;
    a = c;
    if (t === 0) {
      b;
    }
    if ((t /= d) === 1) {
      b + c;
    }
    if (!p) {
      p = d * .3;
    }
    if (a < Math.abs(c)) {
      a = c;
      s = p / 4;
    } else {
      s = p / (2 * Math.PI) * Math.asin(c / a);
    }
    return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;
  };

  Animation.prototype.easeOutElastic = function(t, b, c, d) {
    var a, p, s;
    s = 1.70158;
    p = 0;
    a = c;
    if (t === 0) {
      b;
    }
    if ((t /= d) === 1) {
      b + c;
    }
    if (!p) {
      p = d * .3;
    }
    if (a < Math.abs(c)) {
      a = c;
      s = p / 4;
    } else {
      s = p / (2 * Math.PI) * Math.asin(c / a);
    }
    return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;
  };

  Animation.prototype.easeInOutElastic = function(t, b, c, d) {
    var a, p, s;
    s = 1.70158;
    p = 0;
    a = c;
    if (t === 0) {
      b;
    }
    if ((t /= d / 2) === 2) {
      b + c;
    }
    if (!p) {
      p = d * (.3 * 1.5);
    }
    if (a < Math.abs(c)) {
      a = c;
      s = p / 4;
    } else {
      s = p / (2 * Math.PI) * Math.asin(c / a);
    }
    if (t < 1) {
      -.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;
    }
    return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * .5 + c + b;
  };

  return Animation;

})(Framer.EventEmitter);


},{"./Model.coffee":"form/Model"}],"form/_BaseClass":[function(require,module,exports){
exports.BaseClass = (function() {
  function BaseClass() {}

  BaseClass.define = function(propertyName, descriptor) {
    if (descriptor.readonly) {
      descriptor.set = function(value) {
        throw Error(this.constructor.name + "." + propertyName + " is readonly");
      };
    }
    return Object.defineProperty(this.prototype, propertyName, descriptor);
  };

  return BaseClass;

})();


},{}],"form/_Camera":[function(require,module,exports){
var Animation, BaseClass, States, _,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

_ = Framer._;

require('./lib/OrbitControls');

BaseClass = require('./_BaseClass.coffee').BaseClass;

Animation = require('./_Animation.coffee').Animation;

States = require('./_States.coffee').States;

exports.Camera = (function(superClass) {
  extend(Camera, superClass);

  function Camera(properties, sceneDOM) {
    if (properties == null) {
      properties = {};
    }
    Camera.__super__.constructor.call(this);
    this.sceneDOM = sceneDOM;
    _.defaults(properties, {
      x: 0,
      y: 0,
      z: 500,
      rotationX: 0,
      rotationY: 0,
      rotationZ: 0,
      fov: 35,
      near: 0.1,
      far: 10000,
      enablePan: false,
      enableZoom: false,
      enableRotate: false,
      autoRotate: false,
      autoRotateSpeed: 10,
      target: new THREE.Vector3(0, 0, 0)
    });
    this.nativeCamera = new THREE.PerspectiveCamera(properties.fov, properties.aspect, properties.near, properties.far);
    if (properties.orbitControls) {
      this.setupOrbitControls(properties);
    }
    this.setPosition([properties.x, properties.y, properties.z]);
    this.setRotation([properties.rotationX, properties.rotationY, properties.rotationZ]);
    this.saveInitialProperties();
    this._states = new States(this);
  }

  Camera.prototype.setupOrbitControls = function(properties) {
    this.controls = new THREE.OrbitControls(this.nativeCamera, this.sceneDOM);
    this.enablePan = properties.enablePan;
    this.enableZoom = properties.enableZoom;
    this.enableRotate = properties.enableRotate;
    this.autoRotate = properties.autoRotate;
    this.autoRotateSpeed = properties.autoRotateSpeed;
    return this.target = properties.target;
  };

  Camera.prototype.saveInitialProperties = function() {
    return this.initialProperties = this;
  };

  Camera.prototype.on = function(eventName, cb) {
    var callback;
    if (eventName.includes('change')) {
      callback = function(e) {
        return cb(e.value);
      };
      this.nativeCamera.addEventListener(eventName, callback);
      return Framer.CurrentContext.on('reset', (function(_this) {
        return function() {
          return _this.nativeCamera.removeEventListener(eventName, callback);
        };
      })(this));
    }
  };

  Camera.prototype.setPosition = function(positions) {
    this.x = positions[0];
    this.y = positions[1];
    return this.z = positions[2];
  };

  Camera.prototype.setRotation = function(rotations) {
    this.rotationX = rotations[0];
    this.rotationY = rotations[1];
    return this.rotationZ = rotations[2];
  };

  Camera.prototype.animate = function(properties) {
    return new Animation(this, properties);
  };

  Camera.prototype.lookAt = function(a, b, c) {
    if (arguments.length === 1) {
      return this.nativeCamera.lookAt(a);
    } else if (arguments.length === 3) {
      return this.nativeCamera.lookAt(a, b, c);
    }
  };

  Camera.prototype.stateSwitch = function(state) {
    return Object.keys(this.states).map((function(_this) {
      return function(k) {
        if (k === state) {
          _this.states.current = _this.states[k];
          return Object.keys(_this.states.current).map(function(pk) {
            return _this[pk] = _this.states.current[pk];
          });
        }
      };
    })(this));
  };

  Camera.prototype.stateCycle = function(stateA, stateB) {
    if (this.states.current === this.states[stateA] || this.states.current === this.states[stateB]) {
      if (this.states.current === this.states[stateA]) {
        return this.animate(stateB);
      } else if (this.states.current === this.states[stateB]) {
        return this.animate(stateA);
      }
    } else {
      return this.animate(stateA);
    }
  };

  Camera.define('position', {
    get: function() {
      return this.nativeCamera.position;
    }
  });

  Camera.define('x', {
    get: function() {
      return this.nativeCamera.position.x;
    },
    set: function(x) {
      this.nativeCamera.position.x = x;
      if (this.controls) {
        this.controls.update();
      }
      return this.nativeCamera.dispatchEvent({
        type: 'change:x',
        value: this.x
      });
    }
  });

  Camera.define('y', {
    get: function() {
      return this.nativeCamera.position.y;
    },
    set: function(y) {
      this.nativeCamera.position.y = y;
      if (this.controls) {
        this.controls.update();
      }
      return this.nativeCamera.dispatchEvent({
        type: 'change:y',
        value: this.y
      });
    }
  });

  Camera.define('z', {
    get: function() {
      return this.nativeCamera.position.z;
    },
    set: function(z) {
      this.nativeCamera.position.z = z;
      if (this.controls) {
        this.controls.update();
      }
      return this.nativeCamera.dispatchEvent({
        type: 'change:z',
        value: this.z
      });
    }
  });

  Camera.define('rotation', {
    get: function() {
      return this.nativeCamera.rotation;
    }
  });

  Camera.define('rotationX', {
    get: function() {
      return THREE.Math.radToDeg(this.nativeCamera.rotation.x);
    },
    set: function(x) {
      this.nativeCamera.rotation.x = THREE.Math.degToRad(x);
      if (this.controls) {
        this.controls.update();
      }
      return this.nativeCamera.dispatchEvent({
        type: 'change:rotationX',
        value: this.rotationX
      });
    }
  });

  Camera.define('rotationY', {
    get: function() {
      return THREE.Math.radToDeg(this.nativeCamera.rotation.y);
    },
    set: function(y) {
      this.nativeCamera.rotation.y = THREE.Math.degToRad(y);
      if (this.controls) {
        this.controls.update();
      }
      return this.nativeCamera.dispatchEvent({
        type: 'change:rotationY',
        value: this.rotationY
      });
    }
  });

  Camera.define('rotationZ', {
    get: function() {
      return THREE.Math.radToDeg(this.nativeCamera.rotation.z);
    },
    set: function(z) {
      this.nativeCamera.rotation.z = THREE.Math.degToRad(z);
      if (this.controls) {
        this.controls.update();
      }
      return this.nativeCamera.dispatchEvent({
        type: 'change:rotationZ',
        value: this.rotationZ
      });
    }
  });

  Camera.define('fov', {
    get: function() {
      return this.nativeCamera.fov;
    },
    set: function(fov) {
      this.nativeCamera.fov = fov;
      return this.nativeCamera.dispatchEvent({
        type: 'change:fov',
        value: this.fov
      });
    }
  });

  Camera.define('zoom', {
    get: function() {
      return this.nativeCamera.zoom;
    },
    set: function(factor) {
      this.nativeCamera.zoom = factor;
      return this.nativeCamera.dispatchEvent({
        type: 'change:zoom',
        value: this.zoom
      });
    }
  });

  Camera.define('near', {
    get: function() {
      return this.nativeCamera.near;
    },
    set: function(near) {
      this.nativeCamera.near = near;
      return this.nativeCamera.dispatchEvent({
        type: 'change:near',
        value: this.near
      });
    }
  });

  Camera.define('far', {
    get: function() {
      return this.nativeCamera.far;
    },
    set: function(far) {
      this.nativeCamera.far = far;
      return this.nativeCamera.dispatchEvent({
        type: 'change:far',
        value: this.far
      });
    }
  });

  Camera.define('aspect', {
    get: function() {
      return this.nativeCamera.aspect;
    },
    set: function(aspect) {
      this.nativeCamera.aspect = aspect;
      return this.nativeCamera.dispatchEvent({
        type: 'change:aspect',
        value: this.aspect
      });
    }
  });

  Camera.define('states', {
    get: function() {
      return this._states.states;
    },
    set: function(states) {
      return _.extend(this.states, states);
    }
  });

  Camera.define('enablePan', {
    get: function() {
      return this.controls.enablePan;
    },
    set: function(bool) {
      this.controls.enablePan = bool;
      return this.nativeCamera.dispatchEvent({
        type: 'change:enablePan',
        value: this.enablePan
      });
    }
  });

  Camera.define('enableZoom', {
    get: function() {
      return this.controls.enableZoom;
    },
    set: function(bool) {
      this.controls.enableZoom = bool;
      return this.nativeCamera.dispatchEvent({
        type: 'change:enableZoom',
        value: this.enableZoom
      });
    }
  });

  Camera.define('enableRotate', {
    get: function() {
      return this.controls.enableRotate;
    },
    set: function(bool) {
      this.controls.enableRotate = bool;
      return this.nativeCamera.dispatchEvent({
        type: 'change:enableRotate',
        value: this.enableRotate
      });
    }
  });

  Camera.define('autoRotate', {
    get: function() {
      return this.controls.autoRotate;
    },
    set: function(bool) {
      this.controls.autoRotate = bool;
      return this.nativeCamera.dispatchEvent({
        type: 'change:autoRotate',
        value: this.autoRotate
      });
    }
  });

  Camera.define('autoRotateSpeed', {
    get: function() {
      return this.controls.autoRotateSpeed;
    },
    set: function(speed) {
      this.controls.autoRotateSpeed = speed;
      return this.nativeCamera.dispatchEvent({
        type: 'change:autoRotateSpeed',
        value: this.autoRotateSpeed
      });
    }
  });

  Camera.define('target', {
    get: function() {
      return this.controls.target;
    },
    set: function(vector3) {
      this.controls.target = vector3;
      return this.nativeCamera.dispatchEvent({
        type: 'change:target',
        value: this.target
      });
    }
  });

  return Camera;

})(BaseClass);


},{"./_Animation.coffee":"form/_Animation","./_BaseClass.coffee":"form/_BaseClass","./_States.coffee":"form/_States","./lib/OrbitControls":"form/lib/OrbitControls"}],"form/_States":[function(require,module,exports){
var BaseClass, acceptedModelProperties, reservedStateError,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

BaseClass = require('./_BaseClass.coffee').BaseClass;

acceptedModelProperties = ['x', 'y', 'z', 'rotationX', 'rotationY', 'rotationZ', 'scale', 'scaleX', 'scaleY', 'scaleZ', 'options'];

reservedStateError = function(name) {
  throw Error("The state '" + name + "' is a reserved name.");
};

exports.States = (function(superClass) {
  extend(States, superClass);

  function States(model) {
    States.__super__.constructor.call(this);
    this.model = model;
    this.initialModelProperties = Object.getOwnPropertyNames(Object.getPrototypeOf(this.model.initialProperties));
    this.states = {
      "default": this.filterProperties(this.initialModelProperties),
      current: this.filterProperties(this.initialModelProperties)
    };
  }

  States.prototype.filterProperties = function(propeties) {
    var newPropertyObj;
    newPropertyObj = {};
    propeties.map((function(_this) {
      return function(k) {
        if (acceptedModelProperties.includes(k)) {
          return newPropertyObj[k] = _this.model[k];
        }
      };
    })(this));
    return newPropertyObj;
  };

  States.define('current', {
    get: function() {
      return this.states.current;
    },
    set: function(state) {
      this.states.previous = this.states.current;
      return this.states.current = state;
    }
  });

  States.define('previous', {
    get: function() {
      return this.states.previous;
    }
  });

  return States;

})(BaseClass);


},{"./_BaseClass.coffee":"form/_BaseClass"}],"form/lib/ColladaLoader":[function(require,module,exports){
/**
 * @author mrdoob / http://mrdoob.com/
 * @author Mugen87 / https://github.com/Mugen87
 */

THREE.ColladaLoader = function ( manager ) {
    
        this.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;
    
    };
    
    THREE.ColladaLoader.prototype = {
    
        constructor: THREE.ColladaLoader,
    
        crossOrigin: 'Anonymous',
    
        load: function ( url, onLoad, onProgress, onError ) {
    
            var scope = this;
    
            var path = scope.path === undefined ? THREE.LoaderUtils.extractUrlBase( url ) : scope.path;
    
            var loader = new THREE.FileLoader( scope.manager );
            loader.load( url, function ( text ) {
    
                onLoad( scope.parse( text, path ) );
    
            }, onProgress, onError );
    
        },
    
        setPath: function ( value ) {
    
            this.path = value;
    
        },
    
        options: {
    
            set convertUpAxis( value ) {
    
                console.warn( 'THREE.ColladaLoader: options.convertUpAxis() has been removed. Up axis is converted automatically.' );
    
            }
    
        },
    
        setCrossOrigin: function ( value ) {
    
            this.crossOrigin = value;
    
        },
    
        parse: function ( text, path ) {
    
            function getElementsByTagName( xml, name ) {
    
                // Non recursive xml.getElementsByTagName() ...
    
                var array = [];
                var childNodes = xml.childNodes;
    
                for ( var i = 0, l = childNodes.length; i < l; i ++ ) {
    
                    var child = childNodes[ i ];
    
                    if ( child.nodeName === name ) {
    
                        array.push( child );
    
                    }
    
                }
    
                return array;
    
            }
    
            function parseStrings( text ) {
    
                if ( text.length === 0 ) return [];
    
                var parts = text.trim().split( /\s+/ );
                var array = new Array( parts.length );
    
                for ( var i = 0, l = parts.length; i < l; i ++ ) {
    
                    array[ i ] = parts[ i ];
    
                }
    
                return array;
    
            }
    
            function parseFloats( text ) {
    
                if ( text.length === 0 ) return [];
    
                var parts = text.trim().split( /\s+/ );
                var array = new Array( parts.length );
    
                for ( var i = 0, l = parts.length; i < l; i ++ ) {
    
                    array[ i ] = parseFloat( parts[ i ] );
    
                }
    
                return array;
    
            }
    
            function parseInts( text ) {
    
                if ( text.length === 0 ) return [];
    
                var parts = text.trim().split( /\s+/ );
                var array = new Array( parts.length );
    
                for ( var i = 0, l = parts.length; i < l; i ++ ) {
    
                    array[ i ] = parseInt( parts[ i ] );
    
                }
    
                return array;
    
            }
    
            function parseId( text ) {
    
                return text.substring( 1 );
    
            }
    
            function generateId() {
    
                return 'three_default_' + ( count ++ );
    
            }
    
            function isEmpty( object ) {
    
                return Object.keys( object ).length === 0;
    
            }
    
            // asset
    
            function parseAsset( xml ) {
    
                return {
                    unit: parseAssetUnit( getElementsByTagName( xml, 'unit' )[ 0 ] ),
                    upAxis: parseAssetUpAxis( getElementsByTagName( xml, 'up_axis' )[ 0 ] )
                };
    
            }
    
            function parseAssetUnit( xml ) {
    
                return xml !== undefined ? parseFloat( xml.getAttribute( 'meter' ) ) : 1;
    
            }
    
            function parseAssetUpAxis( xml ) {
    
                return xml !== undefined ? xml.textContent : 'Y_UP';
    
            }
    
            // library
    
            function parseLibrary( xml, libraryName, nodeName, parser ) {
    
                var library = getElementsByTagName( xml, libraryName )[ 0 ];
    
                if ( library !== undefined ) {
    
                    var elements = getElementsByTagName( library, nodeName );
    
                    for ( var i = 0; i < elements.length; i ++ ) {
    
                        parser( elements[ i ] );
    
                    }
    
                }
    
            }
    
            function buildLibrary( data, builder ) {
    
                for ( var name in data ) {
    
                    var object = data[ name ];
                    object.build = builder( data[ name ] );
    
                }
    
            }
    
            // get
    
            function getBuild( data, builder ) {
    
                if ( data.build !== undefined ) return data.build;
    
                data.build = builder( data );
    
                return data.build;
    
            }
    
            // animation
    
            function parseAnimation( xml ) {
    
                var data = {
                    sources: {},
                    samplers: {},
                    channels: {}
                };
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    var id;
    
                    switch ( child.nodeName ) {
    
                        case 'source':
                            id = child.getAttribute( 'id' );
                            data.sources[ id ] = parseSource( child );
                            break;
    
                        case 'sampler':
                            id = child.getAttribute( 'id' );
                            data.samplers[ id ] = parseAnimationSampler( child );
                            break;
    
                        case 'channel':
                            id = child.getAttribute( 'target' );
                            data.channels[ id ] = parseAnimationChannel( child );
                            break;
    
                        default:
                            console.log( child );
    
                    }
    
                }
    
                library.animations[ xml.getAttribute( 'id' ) ] = data;
    
            }
    
            function parseAnimationSampler( xml ) {
    
                var data = {
                    inputs: {},
                };
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'input':
                            var id = parseId( child.getAttribute( 'source' ) );
                            var semantic = child.getAttribute( 'semantic' );
                            data.inputs[ semantic ] = id;
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseAnimationChannel( xml ) {
    
                var data = {};
    
                var target = xml.getAttribute( 'target' );
    
                // parsing SID Addressing Syntax
    
                var parts = target.split( '/' );
    
                var id = parts.shift();
                var sid = parts.shift();
    
                // check selection syntax
    
                var arraySyntax = ( sid.indexOf( '(' ) !== - 1 );
                var memberSyntax = ( sid.indexOf( '.' ) !== - 1 );
    
                if ( memberSyntax ) {
    
                    //  member selection access
    
                    parts = sid.split( '.' );
                    sid = parts.shift();
                    data.member = parts.shift();
    
                } else if ( arraySyntax ) {
    
                    // array-access syntax. can be used to express fields in one-dimensional vectors or two-dimensional matrices.
    
                    var indices = sid.split( '(' );
                    sid = indices.shift();
    
                    for ( var i = 0; i < indices.length; i ++ ) {
    
                        indices[ i ] = parseInt( indices[ i ].replace( /\)/, '' ) );
    
                    }
    
                    data.indices = indices;
    
                }
    
                data.id = id;
                data.sid = sid;
    
                data.arraySyntax = arraySyntax;
                data.memberSyntax = memberSyntax;
    
                data.sampler = parseId( xml.getAttribute( 'source' ) );
    
                return data;
    
            }
    
            function buildAnimation( data ) {
    
                var tracks = [];
    
                var channels = data.channels;
                var samplers = data.samplers;
                var sources = data.sources;
    
                for ( var target in channels ) {
    
                    if ( channels.hasOwnProperty( target ) ) {
    
                        var channel = channels[ target ];
                        var sampler = samplers[ channel.sampler ];
    
                        var inputId = sampler.inputs.INPUT;
                        var outputId = sampler.inputs.OUTPUT;
    
                        var inputSource = sources[ inputId ];
                        var outputSource = sources[ outputId ];
    
                        var animation = buildAnimationChannel( channel, inputSource, outputSource );
    
                        createKeyframeTracks( animation, tracks );
    
                    }
    
                }
    
                return tracks;
    
            }
    
            function getAnimation( id ) {
    
                return getBuild( library.animations[ id ], buildAnimation );
    
            }
    
            function buildAnimationChannel( channel, inputSource, outputSource ) {
    
                var node = library.nodes[ channel.id ];
                var object3D = getNode( node.id );
    
                var transform = node.transforms[ channel.sid ];
                var defaultMatrix = node.matrix.clone().transpose();
    
                var time, stride;
                var i, il, j, jl;
    
                var data = {};
    
                // the collada spec allows the animation of data in various ways.
                // depending on the transform type (matrix, translate, rotate, scale), we execute different logic
    
                switch ( transform ) {
    
                    case 'matrix':
    
                        for ( i = 0, il = inputSource.array.length; i < il; i ++ ) {
    
                            time = inputSource.array[ i ];
                            stride = i * outputSource.stride;
    
                            if ( data[ time ] === undefined ) data[ time ] = {};
    
                            if ( channel.arraySyntax === true ) {
    
                                var value = outputSource.array[ stride ];
                                var index = channel.indices[ 0 ] + 4 * channel.indices[ 1 ];
    
                                data[ time ][ index ] = value;
    
                            } else {
    
                                for ( j = 0, jl = outputSource.stride; j < jl; j ++ ) {
    
                                    data[ time ][ j ] = outputSource.array[ stride + j ];
    
                                }
    
                            }
    
                        }
    
                        break;
    
                    case 'translate':
                        console.warn( 'THREE.ColladaLoader: Animation transform type "%s" not yet implemented.', transform );
                        break;
    
                    case 'rotate':
                        console.warn( 'THREE.ColladaLoader: Animation transform type "%s" not yet implemented.', transform );
                        break;
    
                    case 'scale':
                        console.warn( 'THREE.ColladaLoader: Animation transform type "%s" not yet implemented.', transform );
                        break;
    
                }
    
                var keyframes = prepareAnimationData( data, defaultMatrix );
    
                var animation = {
                    name: object3D.uuid,
                    keyframes: keyframes
                };
    
                return animation;
    
            }
    
            function prepareAnimationData( data, defaultMatrix ) {
    
                var keyframes = [];
    
                // transfer data into a sortable array
    
                for ( var time in data ) {
    
                    keyframes.push( { time: parseFloat( time ), value: data[ time ] } );
    
                }
    
                // ensure keyframes are sorted by time
    
                keyframes.sort( ascending );
    
                // now we clean up all animation data, so we can use them for keyframe tracks
    
                for ( var i = 0; i < 16; i ++ ) {
    
                    transformAnimationData( keyframes, i, defaultMatrix.elements[ i ] );
    
                }
    
                return keyframes;
    
                // array sort function
    
                function ascending( a, b ) {
    
                    return a.time - b.time;
    
                }
    
            }
    
            var position = new THREE.Vector3();
            var scale = new THREE.Vector3();
            var quaternion = new THREE.Quaternion();
    
            function createKeyframeTracks( animation, tracks ) {
    
                var keyframes = animation.keyframes;
                var name = animation.name;
    
                var times = [];
                var positionData = [];
                var quaternionData = [];
                var scaleData = [];
    
                for ( var i = 0, l = keyframes.length; i < l; i ++ ) {
    
                    var keyframe = keyframes[ i ];
    
                    var time = keyframe.time;
                    var value = keyframe.value;
    
                    matrix.fromArray( value ).transpose();
                    matrix.decompose( position, quaternion, scale );
    
                    times.push( time );
                    positionData.push( position.x, position.y, position.z );
                    quaternionData.push( quaternion.x, quaternion.y, quaternion.z, quaternion.w );
                    scaleData.push( scale.x, scale.y, scale.z );
    
                }
    
                if ( positionData.length > 0 ) tracks.push( new THREE.VectorKeyframeTrack( name + '.position', times, positionData ) );
                if ( quaternionData.length > 0 ) tracks.push( new THREE.QuaternionKeyframeTrack( name + '.quaternion', times, quaternionData ) );
                if ( scaleData.length > 0 ) tracks.push( new THREE.VectorKeyframeTrack( name + '.scale', times, scaleData ) );
    
                return tracks;
    
            }
    
            function transformAnimationData( keyframes, property, defaultValue ) {
    
                var keyframe;
    
                var empty = true;
                var i, l;
    
                // check, if values of a property are missing in our keyframes
    
                for ( i = 0, l = keyframes.length; i < l; i ++ ) {
    
                    keyframe = keyframes[ i ];
    
                    if ( keyframe.value[ property ] === undefined ) {
    
                        keyframe.value[ property ] = null; // mark as missing
    
                    } else {
    
                        empty = false;
    
                    }
    
                }
    
                if ( empty === true ) {
    
                    // no values at all, so we set a default value
    
                    for ( i = 0, l = keyframes.length; i < l; i ++ ) {
    
                        keyframe = keyframes[ i ];
    
                        keyframe.value[ property ] = defaultValue;
    
                    }
    
                } else {
    
                    // filling gaps
    
                    createMissingKeyframes( keyframes, property );
    
                }
    
            }
    
            function createMissingKeyframes( keyframes, property ) {
    
                var prev, next;
    
                for ( var i = 0, l = keyframes.length; i < l; i ++ ) {
    
                    var keyframe = keyframes[ i ];
    
                    if ( keyframe.value[ property ] === null ) {
    
                        prev = getPrev( keyframes, i, property );
                        next = getNext( keyframes, i, property );
    
                        if ( prev === null ) {
    
                            keyframe.value[ property ] = next.value[ property ];
                            continue;
    
                        }
    
                        if ( next === null ) {
    
                            keyframe.value[ property ] = prev.value[ property ];
                            continue;
    
                        }
    
                        interpolate( keyframe, prev, next, property );
    
                    }
    
                }
    
            }
    
            function getPrev( keyframes, i, property ) {
    
                while ( i >= 0 ) {
    
                    var keyframe = keyframes[ i ];
    
                    if ( keyframe.value[ property ] !== null ) return keyframe;
    
                    i --;
    
                }
    
                return null;
    
            }
    
            function getNext( keyframes, i, property ) {
    
                while ( i < keyframes.length ) {
    
                    var keyframe = keyframes[ i ];
    
                    if ( keyframe.value[ property ] !== null ) return keyframe;
    
                    i ++;
    
                }
    
                return null;
    
            }
    
            function interpolate( key, prev, next, property ) {
    
                if ( ( next.time - prev.time ) === 0 ) {
    
                    key.value[ property ] = prev.value[ property ];
                    return;
    
                }
    
                key.value[ property ] = ( ( key.time - prev.time ) * ( next.value[ property ] - prev.value[ property ] ) / ( next.time - prev.time ) ) + prev.value[ property ];
    
            }
    
            // animation clips
    
            function parseAnimationClip( xml ) {
    
                var data = {
                    name: xml.getAttribute( 'id' ) || 'default',
                    start: parseFloat( xml.getAttribute( 'start' ) || 0 ),
                    end: parseFloat( xml.getAttribute( 'end' ) || 0 ),
                    animations: []
                };
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'instance_animation':
                            data.animations.push( parseId( child.getAttribute( 'url' ) ) );
                            break;
    
                    }
    
                }
    
                library.clips[ xml.getAttribute( 'id' ) ] = data;
    
            }
    
            function buildAnimationClip( data ) {
    
                var tracks = [];
    
                var name = data.name;
                var duration = ( data.end - data.start ) || - 1;
                var animations = data.animations;
    
                for ( var i = 0, il = animations.length; i < il; i ++ ) {
    
                    var animationTracks = getAnimation( animations[ i ] );
    
                    for ( var j = 0, jl = animationTracks.length; j < jl; j ++ ) {
    
                        tracks.push( animationTracks[ j ] );
    
                    }
    
                }
    
                return new THREE.AnimationClip( name, duration, tracks );
    
            }
    
            function getAnimationClip( id ) {
    
                return getBuild( library.clips[ id ], buildAnimationClip );
    
            }
    
            // controller
    
            function parseController( xml ) {
    
                var data = {};
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'skin':
                            // there is exactly one skin per controller
                            data.id = parseId( child.getAttribute( 'source' ) );
                            data.skin = parseSkin( child );
                            break;
    
                        case 'morph':
                            data.id = parseId( child.getAttribute( 'source' ) );
                            console.warn( 'THREE.ColladaLoader: Morph target animation not supported yet.' );
                            break;
    
                    }
    
                }
    
                library.controllers[ xml.getAttribute( 'id' ) ] = data;
    
            }
    
            function parseSkin( xml ) {
    
                var data = {
                    sources: {}
                };
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'bind_shape_matrix':
                            data.bindShapeMatrix = parseFloats( child.textContent );
                            break;
    
                        case 'source':
                            var id = child.getAttribute( 'id' );
                            data.sources[ id ] = parseSource( child );
                            break;
    
                        case 'joints':
                            data.joints = parseJoints( child );
                            break;
    
                        case 'vertex_weights':
                            data.vertexWeights = parseVertexWeights( child );
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseJoints( xml ) {
    
                var data = {
                    inputs: {}
                };
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'input':
                            var semantic = child.getAttribute( 'semantic' );
                            var id = parseId( child.getAttribute( 'source' ) );
                            data.inputs[ semantic ] = id;
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseVertexWeights( xml ) {
    
                var data = {
                    inputs: {}
                };
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'input':
                            var semantic = child.getAttribute( 'semantic' );
                            var id = parseId( child.getAttribute( 'source' ) );
                            var offset = parseInt( child.getAttribute( 'offset' ) );
                            data.inputs[ semantic ] = { id: id, offset: offset };
                            break;
    
                        case 'vcount':
                            data.vcount = parseInts( child.textContent );
                            break;
    
                        case 'v':
                            data.v = parseInts( child.textContent );
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function buildController( data ) {
    
                var build = {
                    id: data.id
                };
    
                var geometry = library.geometries[ build.id ];
    
                if ( data.skin !== undefined ) {
    
                    build.skin = buildSkin( data.skin );
    
                    // we enhance the 'sources' property of the corresponding geometry with our skin data
    
                    geometry.sources.skinIndices = build.skin.indices;
                    geometry.sources.skinWeights = build.skin.weights;
    
                }
    
                return build;
    
            }
    
            function buildSkin( data ) {
    
                var BONE_LIMIT = 4;
    
                var build = {
                    joints: [], // this must be an array to preserve the joint order
                    indices: {
                        array: [],
                        stride: BONE_LIMIT
                    },
                    weights: {
                        array: [],
                        stride: BONE_LIMIT
                    }
                };
    
                var sources = data.sources;
                var vertexWeights = data.vertexWeights;
    
                var vcount = vertexWeights.vcount;
                var v = vertexWeights.v;
                var jointOffset = vertexWeights.inputs.JOINT.offset;
                var weightOffset = vertexWeights.inputs.WEIGHT.offset;
    
                var jointSource = data.sources[ data.joints.inputs.JOINT ];
                var inverseSource = data.sources[ data.joints.inputs.INV_BIND_MATRIX ];
    
                var weights = sources[ vertexWeights.inputs.WEIGHT.id ].array;
                var stride = 0;
    
                var i, j, l;
    
                // procces skin data for each vertex
    
                for ( i = 0, l = vcount.length; i < l; i ++ ) {
    
                    var jointCount = vcount[ i ]; // this is the amount of joints that affect a single vertex
                    var vertexSkinData = [];
    
                    for ( j = 0; j < jointCount; j ++ ) {
    
                        var skinIndex = v[ stride + jointOffset ];
                        var weightId = v[ stride + weightOffset ];
                        var skinWeight = weights[ weightId ];
    
                        vertexSkinData.push( { index: skinIndex, weight: skinWeight } );
    
                        stride += 2;
    
                    }
    
                    // we sort the joints in descending order based on the weights.
                    // this ensures, we only procced the most important joints of the vertex
    
                    vertexSkinData.sort( descending );
    
                    // now we provide for each vertex a set of four index and weight values.
                    // the order of the skin data matches the order of vertices
    
                    for ( j = 0; j < BONE_LIMIT; j ++ ) {
    
                        var d = vertexSkinData[ j ];
    
                        if ( d !== undefined ) {
    
                            build.indices.array.push( d.index );
                            build.weights.array.push( d.weight );
    
                        } else {
    
                            build.indices.array.push( 0 );
                            build.weights.array.push( 0 );
    
                        }
    
                    }
    
                }
    
                // setup bind matrix
    
                build.bindMatrix = new THREE.Matrix4().fromArray( data.bindShapeMatrix ).transpose();
    
                // process bones and inverse bind matrix data
    
                for ( i = 0, l = jointSource.array.length; i < l; i ++ ) {
    
                    var name = jointSource.array[ i ];
                    var boneInverse = new THREE.Matrix4().fromArray( inverseSource.array, i * inverseSource.stride ).transpose();
    
                    build.joints.push( { name: name, boneInverse: boneInverse } );
    
                }
    
                return build;
    
                // array sort function
    
                function descending( a, b ) {
    
                    return b.weight - a.weight;
    
                }
    
            }
    
            function getController( id ) {
    
                return getBuild( library.controllers[ id ], buildController );
    
            }
    
            // image
    
            function parseImage( xml ) {
    
                var data = {
                    init_from: getElementsByTagName( xml, 'init_from' )[ 0 ].textContent
                };
    
                library.images[ xml.getAttribute( 'id' ) ] = data;
    
            }
    
            function buildImage( data ) {
    
                if ( data.build !== undefined ) return data.build;
    
                return data.init_from;
    
            }
    
            function getImage( id ) {
    
                return getBuild( library.images[ id ], buildImage );
    
            }
    
            // effect
    
            function parseEffect( xml ) {
    
                var data = {};
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'profile_COMMON':
                            data.profile = parseEffectProfileCOMMON( child );
                            break;
    
                    }
    
                }
    
                library.effects[ xml.getAttribute( 'id' ) ] = data;
    
            }
    
            function parseEffectProfileCOMMON( xml ) {
    
                var data = {
                    surfaces: {},
                    samplers: {}
                };
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'newparam':
                            parseEffectNewparam( child, data );
                            break;
    
                        case 'technique':
                            data.technique = parseEffectTechnique( child );
                            break;
    
                        case 'extra':
                            data.extra = parseEffectExtra( child );
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseEffectNewparam( xml, data ) {
    
                var sid = xml.getAttribute( 'sid' );
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'surface':
                            data.surfaces[ sid ] = parseEffectSurface( child );
                            break;
    
                        case 'sampler2D':
                            data.samplers[ sid ] = parseEffectSampler( child );
                            break;
    
                    }
    
                }
    
            }
    
            function parseEffectSurface( xml ) {
    
                var data = {};
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'init_from':
                            data.init_from = child.textContent;
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseEffectSampler( xml ) {
    
                var data = {};
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'source':
                            data.source = child.textContent;
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseEffectTechnique( xml ) {
    
                var data = {};
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'constant':
                        case 'lambert':
                        case 'blinn':
                        case 'phong':
                            data.type = child.nodeName;
                            data.parameters = parseEffectParameters( child );
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseEffectParameters( xml ) {
    
                var data = {};
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'emission':
                        case 'diffuse':
                        case 'specular':
                        case 'shininess':
                        case 'transparency':
                            data[ child.nodeName ] = parseEffectParameter( child );
                            break;
                        case 'transparent':
                            data[ child.nodeName ] = {
                                opaque: child.getAttribute( 'opaque' ),
                                data: parseEffectParameter( child )
                            };
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseEffectParameter( xml ) {
    
                var data = {};
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'color':
                            data[ child.nodeName ] = parseFloats( child.textContent );
                            break;
    
                        case 'float':
                            data[ child.nodeName ] = parseFloat( child.textContent );
                            break;
    
                        case 'texture':
                            data[ child.nodeName ] = { id: child.getAttribute( 'texture' ), extra: parseEffectParameterTexture( child ) };
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseEffectParameterTexture( xml ) {
    
                var data = {
                    technique: {}
                };
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'extra':
                            parseEffectParameterTextureExtra( child, data );
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseEffectParameterTextureExtra( xml, data ) {
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'technique':
                            parseEffectParameterTextureExtraTechnique( child, data );
                            break;
    
                    }
    
                }
    
            }
    
            function parseEffectParameterTextureExtraTechnique( xml, data ) {
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'repeatU':
                        case 'repeatV':
                        case 'offsetU':
                        case 'offsetV':
                            data.technique[ child.nodeName ] = parseFloat( child.textContent );
                            break;
    
                        case 'wrapU':
                        case 'wrapV':
    
                            // some files have values for wrapU/wrapV which become NaN via parseInt
    
                            if ( child.textContent.toUpperCase() === 'TRUE' ) {
    
                                data.technique[ child.nodeName ] = 1;
    
                            } else if ( child.textContent.toUpperCase() === 'FALSE' ) {
    
                                data.technique[ child.nodeName ] = 0;
    
                            } else {
    
                                data.technique[ child.nodeName ] = parseInt( child.textContent );
    
                            }
    
                            break;
    
                    }
    
                }
    
            }
    
            function parseEffectExtra( xml ) {
    
                var data = {};
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'technique':
                            data.technique = parseEffectExtraTechnique( child );
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseEffectExtraTechnique( xml ) {
    
                var data = {};
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'double_sided':
                            data[ child.nodeName ] = parseInt( child.textContent );
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function buildEffect( data ) {
    
                return data;
    
            }
    
            function getEffect( id ) {
    
                return getBuild( library.effects[ id ], buildEffect );
    
            }
    
            // material
    
            function parseMaterial( xml ) {
    
                var data = {
                    name: xml.getAttribute( 'name' )
                };
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'instance_effect':
                            data.url = parseId( child.getAttribute( 'url' ) );
                            break;
    
                    }
    
                }
    
                library.materials[ xml.getAttribute( 'id' ) ] = data;
    
            }
    
            function buildMaterial( data ) {
    
                var effect = getEffect( data.url );
                var technique = effect.profile.technique;
                var extra = effect.profile.extra;
    
                var material;
    
                switch ( technique.type ) {
    
                    case 'phong':
                    case 'blinn':
                        material = new THREE.MeshPhongMaterial();
                        break;
    
                    case 'lambert':
                        material = new THREE.MeshLambertMaterial();
                        break;
    
                    default:
                        material = new THREE.MeshBasicMaterial();
                        break;
    
                }
    
                material.name = data.name;
    
                function getTexture( textureObject ) {
    
                    var sampler = effect.profile.samplers[ textureObject.id ];
                    var image;
    
                    // get image
    
                    if ( sampler !== undefined ) {
    
                        var surface = effect.profile.surfaces[ sampler.source ];
                        image = getImage( surface.init_from );
    
                    } else {
    
                        console.warn( 'THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530).' );
                        image = getImage( textureObject.id );
    
                    }
    
                    // create texture if image is avaiable
    
                    if ( image !== undefined ) {
    
                        var texture = textureLoader.load( image );
    
                        var extra = textureObject.extra;
    
                        if ( extra !== undefined && extra.technique !== undefined && isEmpty( extra.technique ) === false ) {
    
                            var technique = extra.technique;
    
                            texture.wrapS = technique.wrapU ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;
                            texture.wrapT = technique.wrapV ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;
    
                            texture.offset.set( technique.offsetU || 0, technique.offsetV || 0 );
                            texture.repeat.set( technique.repeatU || 1, technique.repeatV || 1 );
    
                        } else {
    
                            texture.wrapS = THREE.RepeatWrapping;
                            texture.wrapT = THREE.RepeatWrapping;
    
                        }
    
                        return texture;
    
                    } else {
    
                        console.error( 'THREE.ColladaLoader: Unable to load texture with ID:', textureObject.id );
    
                        return null;
    
                    }
    
                }
    
                var parameters = technique.parameters;
    
                for ( var key in parameters ) {
    
                    var parameter = parameters[ key ];
    
                    switch ( key ) {
    
                        case 'diffuse':
                            if ( parameter.color ) material.color.fromArray( parameter.color );
                            if ( parameter.texture ) material.map = getTexture( parameter.texture );
                            break;
                        case 'specular':
                            if ( parameter.color && material.specular ) material.specular.fromArray( parameter.color );
                            if ( parameter.texture ) material.specularMap = getTexture( parameter.texture );
                            break;
                        case 'shininess':
                            if ( parameter.float && material.shininess )
                                material.shininess = parameter.float;
                            break;
                        case 'emission':
                            if ( parameter.color && material.emissive )
                                material.emissive.fromArray( parameter.color );
                            break;
    
                    }
    
                }
    
                //
    
                var transparent = parameters[ 'transparent' ];
                var transparency = parameters[ 'transparency' ];
    
                // <transparency> does not exist but <transparent>
    
                if ( transparency === undefined && transparent ) {
    
                    transparency = {
                        float: 1
                    };
    
                }
    
                // <transparent> does not exist but <transparency>
    
                if ( transparent === undefined && transparency ) {
    
                    transparent = {
                        opaque: 'A_ONE',
                        data: {
                            color: [ 1, 1, 1, 1 ]
                        } };
    
                }
    
                if ( transparent && transparency ) {
    
                    // handle case if a texture exists but no color
    
                    if ( transparent.data.texture ) {
    
                        material.alphaMap = getTexture( transparent.data.texture );
                        material.transparent = true;
    
                    } else {
    
                        var color = transparent.data.color;
    
                        switch ( transparent.opaque ) {
    
                            case 'A_ONE':
                                material.opacity = color[ 3 ] * transparency.float;
                                break;
                            case 'RGB_ZERO':
                                material.opacity = 1 - ( color[ 0 ] * transparency.float );
                                break;
                            case 'A_ZERO':
                                material.opacity = 1 - ( color[ 3 ] * transparency.float );
                                break;
                            case 'RGB_ONE':
                                material.opacity = color[ 0 ] * transparency.float;
                                break;
                            default:
                                console.warn( 'THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.', transparent.opaque );
    
                        }
    
                        if ( material.opacity < 1 ) material.transparent = true;
    
                    }
    
                }
    
                //
    
                if ( extra !== undefined && extra.technique !== undefined && extra.technique.double_sided === 1 ) {
    
                    material.side = THREE.DoubleSide;
    
                }
    
                return material;
    
            }
    
            function getMaterial( id ) {
    
                return getBuild( library.materials[ id ], buildMaterial );
    
            }
    
            // camera
    
            function parseCamera( xml ) {
    
                var data = {
                    name: xml.getAttribute( 'name' )
                };
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'optics':
                            data.optics = parseCameraOptics( child );
                            break;
    
                    }
    
                }
    
                library.cameras[ xml.getAttribute( 'id' ) ] = data;
    
            }
    
            function parseCameraOptics( xml ) {
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    switch ( child.nodeName ) {
    
                        case 'technique_common':
                            return parseCameraTechnique( child );
    
                    }
    
                }
    
                return {};
    
            }
    
            function parseCameraTechnique( xml ) {
    
                var data = {};
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    switch ( child.nodeName ) {
    
                        case 'perspective':
                        case 'orthographic':
    
                            data.technique = child.nodeName;
                            data.parameters = parseCameraParameters( child );
    
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseCameraParameters( xml ) {
    
                var data = {};
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    switch ( child.nodeName ) {
    
                        case 'xfov':
                        case 'yfov':
                        case 'xmag':
                        case 'ymag':
                        case 'znear':
                        case 'zfar':
                        case 'aspect_ratio':
                            data[ child.nodeName ] = parseFloat( child.textContent );
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function buildCamera( data ) {
    
                var camera;
    
                switch ( data.optics.technique ) {
    
                    case 'perspective':
                        camera = new THREE.PerspectiveCamera(
                            data.optics.parameters.yfov,
                            data.optics.parameters.aspect_ratio,
                            data.optics.parameters.znear,
                            data.optics.parameters.zfar
                        );
                        break;
    
                    case 'orthographic':
                        var ymag = data.optics.parameters.ymag;
                        var xmag = data.optics.parameters.xmag;
                        var aspectRatio = data.optics.parameters.aspect_ratio;
    
                        xmag = ( xmag === undefined ) ? ( ymag * aspectRatio ) : xmag;
                        ymag = ( ymag === undefined ) ? ( xmag / aspectRatio ) : ymag;
    
                        xmag *= 0.5;
                        ymag *= 0.5;
    
                        camera = new THREE.OrthographicCamera(
                            - xmag, xmag, ymag, - ymag, // left, right, top, bottom
                            data.optics.parameters.znear,
                            data.optics.parameters.zfar
                        );
                        break;
    
                    default:
                        camera = new THREE.PerspectiveCamera();
                        break;
    
                }
    
                camera.name = data.name;
    
                return camera;
    
            }
    
            function getCamera( id ) {
    
                var data = library.cameras[ id ];
    
                if ( data !== undefined ) {
    
                    return getBuild( data, buildCamera );
    
                }
    
                console.warn( 'THREE.ColladaLoader: Couldn\'t find camera with ID:', id );
    
                return null;
    
            }
    
            // light
    
            function parseLight( xml ) {
    
                var data = {};
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'technique_common':
                            data = parseLightTechnique( child );
                            break;
    
                    }
    
                }
    
                library.lights[ xml.getAttribute( 'id' ) ] = data;
    
            }
    
            function parseLightTechnique( xml ) {
    
                var data = {};
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'directional':
                        case 'point':
                        case 'spot':
                        case 'ambient':
    
                            data.technique = child.nodeName;
                            data.parameters = parseLightParameters( child );
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseLightParameters( xml ) {
    
                var data = {};
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'color':
                            var array = parseFloats( child.textContent );
                            data.color = new THREE.Color().fromArray( array );
                            break;
    
                        case 'falloff_angle':
                            data.falloffAngle = parseFloat( child.textContent );
                            break;
    
                        case 'quadratic_attenuation':
                            var f = parseFloat( child.textContent );
                            data.distance = f ? Math.sqrt( 1 / f ) : 0;
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function buildLight( data ) {
    
                var light;
    
                switch ( data.technique ) {
    
                    case 'directional':
                        light = new THREE.DirectionalLight();
                        break;
    
                    case 'point':
                        light = new THREE.PointLight();
                        break;
    
                    case 'spot':
                        light = new THREE.SpotLight();
                        break;
    
                    case 'ambient':
                        light = new THREE.AmbientLight();
                        break;
    
                }
    
                if ( data.parameters.color ) light.color.copy( data.parameters.color );
                if ( data.parameters.distance ) light.distance = data.parameters.distance;
    
                return light;
    
            }
    
            function getLight( id ) {
    
                var data = library.lights[ id ];
    
                if ( data !== undefined ) {
    
                    return getBuild( data, buildLight );
    
                }
    
                console.warn( 'THREE.ColladaLoader: Couldn\'t find light with ID:', id );
    
                return null;
    
            }
    
            // geometry
    
            function parseGeometry( xml ) {
    
                var data = {
                    name: xml.getAttribute( 'name' ),
                    sources: {},
                    vertices: {},
                    primitives: []
                };
    
                var mesh = getElementsByTagName( xml, 'mesh' )[ 0 ];
    
                // the following tags inside geometry are not supported yet (see https://github.com/mrdoob/three.js/pull/12606): convex_mesh, spline, brep
                if ( mesh === undefined ) return;
    
                for ( var i = 0; i < mesh.childNodes.length; i ++ ) {
    
                    var child = mesh.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    var id = child.getAttribute( 'id' );
    
                    switch ( child.nodeName ) {
    
                        case 'source':
                            data.sources[ id ] = parseSource( child );
                            break;
    
                        case 'vertices':
                            // data.sources[ id ] = data.sources[ parseId( getElementsByTagName( child, 'input' )[ 0 ].getAttribute( 'source' ) ) ];
                            data.vertices = parseGeometryVertices( child );
                            break;
    
                        case 'polygons':
                            console.warn( 'THREE.ColladaLoader: Unsupported primitive type: ', child.nodeName );
                            break;
    
                        case 'lines':
                        case 'linestrips':
                        case 'polylist':
                        case 'triangles':
                            data.primitives.push( parseGeometryPrimitive( child ) );
                            break;
    
                        default:
                            console.log( child );
    
                    }
    
                }
    
                library.geometries[ xml.getAttribute( 'id' ) ] = data;
    
            }
    
            function parseSource( xml ) {
    
                var data = {
                    array: [],
                    stride: 3
                };
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'float_array':
                            data.array = parseFloats( child.textContent );
                            break;
    
                        case 'Name_array':
                            data.array = parseStrings( child.textContent );
                            break;
    
                        case 'technique_common':
                            var accessor = getElementsByTagName( child, 'accessor' )[ 0 ];
    
                            if ( accessor !== undefined ) {
    
                                data.stride = parseInt( accessor.getAttribute( 'stride' ) );
    
                            }
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseGeometryVertices( xml ) {
    
                var data = {};
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    data[ child.getAttribute( 'semantic' ) ] = parseId( child.getAttribute( 'source' ) );
    
                }
    
                return data;
    
            }
    
            function parseGeometryPrimitive( xml ) {
    
                var primitive = {
                    type: xml.nodeName,
                    material: xml.getAttribute( 'material' ),
                    count: parseInt( xml.getAttribute( 'count' ) ),
                    inputs: {},
                    stride: 0
                };
    
                for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'input':
                            var id = parseId( child.getAttribute( 'source' ) );
                            var semantic = child.getAttribute( 'semantic' );
                            var offset = parseInt( child.getAttribute( 'offset' ) );
                            primitive.inputs[ semantic ] = { id: id, offset: offset };
                            primitive.stride = Math.max( primitive.stride, offset + 1 );
                            break;
    
                        case 'vcount':
                            primitive.vcount = parseInts( child.textContent );
                            break;
    
                        case 'p':
                            primitive.p = parseInts( child.textContent );
                            break;
    
                    }
    
                }
    
                return primitive;
    
            }
    
            function groupPrimitives( primitives ) {
    
                var build = {};
    
                for ( var i = 0; i < primitives.length; i ++ ) {
    
                    var primitive = primitives[ i ];
    
                    if ( build[ primitive.type ] === undefined ) build[ primitive.type ] = [];
    
                    build[ primitive.type ].push( primitive );
    
                }
    
                return build;
    
            }
    
            function buildGeometry( data ) {
    
                var build = {};
    
                var sources = data.sources;
                var vertices = data.vertices;
                var primitives = data.primitives;
    
                if ( primitives.length === 0 ) return {};
    
                // our goal is to create one buffer geoemtry for a single type of primitives
                // first, we group all primitives by their type
    
                var groupedPrimitives = groupPrimitives( primitives );
    
                for ( var type in groupedPrimitives ) {
    
                    // second, we create for each type of primitives (polylist,triangles or lines) a buffer geometry
    
                    build[ type ] = buildGeometryType( groupedPrimitives[ type ], sources, vertices );
    
                }
    
                return build;
    
            }
    
            function buildGeometryType( primitives, sources, vertices ) {
    
                var build = {};
    
                var position = { array: [], stride: 0 };
                var normal = { array: [], stride: 0 };
                var uv = { array: [], stride: 0 };
                var color = { array: [], stride: 0 };
    
                var skinIndex = { array: [], stride: 4 };
                var skinWeight = { array: [], stride: 4 };
    
                var geometry = new THREE.BufferGeometry();
    
                var materialKeys = [];
    
                var start = 0, count = 0;
    
                for ( var p = 0; p < primitives.length; p ++ ) {
    
                    var primitive = primitives[ p ];
                    var inputs = primitive.inputs;
                    var triangleCount = 1;
    
                    if ( primitive.vcount && primitive.vcount[ 0 ] === 4 ) {
    
                        triangleCount = 2; // one quad -> two triangles
    
                    }
    
                    // groups
    
                    if ( primitive.type === 'lines' || primitive.type === 'linestrips' ) {
    
                        count = primitive.count * 2;
    
                    } else {
    
                        count = primitive.count * 3 * triangleCount;
    
                    }
    
                    geometry.addGroup( start, count, p );
                    start += count;
    
                    // material
    
                    if ( primitive.material ) {
    
                        materialKeys.push( primitive.material );
    
                    }
    
                    // geometry data
    
                    for ( var name in inputs ) {
    
                        var input = inputs[ name ];
    
                        switch ( name )	{
    
                            case 'VERTEX':
                                for ( var key in vertices ) {
    
                                    var id = vertices[ key ];
    
                                    switch ( key ) {
    
                                        case 'POSITION':
                                            buildGeometryData( primitive, sources[ id ], input.offset, position.array );
                                            position.stride = sources[ id ].stride;
    
                                            if ( sources.skinWeights && sources.skinIndices ) {
    
                                                buildGeometryData( primitive, sources.skinIndices, input.offset, skinIndex.array );
                                                buildGeometryData( primitive, sources.skinWeights, input.offset, skinWeight.array );
    
                                            }
                                            break;
    
                                        case 'NORMAL':
                                            buildGeometryData( primitive, sources[ id ], input.offset, normal.array );
                                            normal.stride = sources[ id ].stride;
                                            break;
    
                                        case 'COLOR':
                                            buildGeometryData( primitive, sources[ id ], input.offset, color.array );
                                            color.stride = sources[ id ].stride;
                                            break;
    
                                        case 'TEXCOORD':
                                            buildGeometryData( primitive, sources[ id ], input.offset, uv.array );
                                            uv.stride = sources[ id ].stride;
                                            break;
    
                                        default:
                                            console.warn( 'THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.', key );
    
                                    }
    
                                }
                                break;
    
                            case 'NORMAL':
                                buildGeometryData( primitive, sources[ input.id ], input.offset, normal.array );
                                normal.stride = sources[ input.id ].stride;
                                break;
    
                            case 'COLOR':
                                buildGeometryData( primitive, sources[ input.id ], input.offset, color.array );
                                color.stride = sources[ input.id ].stride;
                                break;
    
                            case 'TEXCOORD':
                                buildGeometryData( primitive, sources[ input.id ], input.offset, uv.array );
                                uv.stride = sources[ input.id ].stride;
                                break;
    
                        }
    
                    }
    
                }
    
                // build geometry
    
                if ( position.array.length > 0 ) geometry.addAttribute( 'position', new THREE.Float32BufferAttribute( position.array, position.stride ) );
                if ( normal.array.length > 0 ) geometry.addAttribute( 'normal', new THREE.Float32BufferAttribute( normal.array, normal.stride ) );
                if ( color.array.length > 0 ) geometry.addAttribute( 'color', new THREE.Float32BufferAttribute( color.array, color.stride ) );
                if ( uv.array.length > 0 ) geometry.addAttribute( 'uv', new THREE.Float32BufferAttribute( uv.array, uv.stride ) );
    
                if ( skinIndex.array.length > 0 ) geometry.addAttribute( 'skinIndex', new THREE.Float32BufferAttribute( skinIndex.array, skinIndex.stride ) );
                if ( skinWeight.array.length > 0 ) geometry.addAttribute( 'skinWeight', new THREE.Float32BufferAttribute( skinWeight.array, skinWeight.stride ) );
    
                build.data = geometry;
                build.type = primitives[ 0 ].type;
                build.materialKeys = materialKeys;
    
                return build;
    
            }
    
            function buildGeometryData( primitive, source, offset, array ) {
    
                var indices = primitive.p;
                var stride = primitive.stride;
                var vcount = primitive.vcount;
    
                function pushVector( i ) {
    
                    var index = indices[ i + offset ] * sourceStride;
                    var length = index + sourceStride;
    
                    for ( ; index < length; index ++ ) {
    
                        array.push( sourceArray[ index ] );
    
                    }
    
                }
    
                var maxcount = 0;
    
                var sourceArray = source.array;
                var sourceStride = source.stride;
    
                if ( primitive.vcount !== undefined ) {
    
                    var index = 0;
    
                    for ( var i = 0, l = vcount.length; i < l; i ++ ) {
    
                        var count = vcount[ i ];
    
                        if ( count === 4 ) {
    
                            var a = index + stride * 0;
                            var b = index + stride * 1;
                            var c = index + stride * 2;
                            var d = index + stride * 3;
    
                            pushVector( a ); pushVector( b ); pushVector( d );
                            pushVector( b ); pushVector( c ); pushVector( d );
    
                        } else if ( count === 3 ) {
    
                            var a = index + stride * 0;
                            var b = index + stride * 1;
                            var c = index + stride * 2;
    
                            pushVector( a ); pushVector( b ); pushVector( c );
    
                        } else {
    
                            maxcount = Math.max( maxcount, count );
    
                        }
    
                        index += stride * count;
    
                    }
    
                    if ( maxcount > 0 ) {
    
                        console.log( 'THREE.ColladaLoader: Geometry has faces with more than 4 vertices.' );
    
                    }
    
                } else {
    
                    for ( var i = 0, l = indices.length; i < l; i += stride ) {
    
                        pushVector( i );
    
                    }
    
                }
    
            }
    
            function getGeometry( id ) {
    
                return getBuild( library.geometries[ id ], buildGeometry );
    
            }
    
            // kinematics
    
            function parseKinematicsModel( xml ) {
    
                var data = {
                    name: xml.getAttribute( 'name' ) || '',
                    joints: {},
                    links: []
                };
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'technique_common':
                            parseKinematicsTechniqueCommon( child, data );
                            break;
    
                    }
    
                }
    
                library.kinematicsModels[ xml.getAttribute( 'id' ) ] = data;
    
            }
    
            function buildKinematicsModel( data ) {
    
                if ( data.build !== undefined ) return data.build;
    
                return data;
    
            }
    
            function getKinematicsModel( id ) {
    
                return getBuild( library.kinematicsModels[ id ], buildKinematicsModel );
    
            }
    
            function parseKinematicsTechniqueCommon( xml, data ) {
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'joint':
                            data.joints[ child.getAttribute( 'sid' ) ] = parseKinematicsJoint( child );
                            break;
    
                        case 'link':
                            data.links.push( parseKinematicsLink( child ) );
                            break;
    
                    }
    
                }
    
            }
    
            function parseKinematicsJoint( xml ) {
    
                var data;
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'prismatic':
                        case 'revolute':
                            data = parseKinematicsJointParameter( child );
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseKinematicsJointParameter( xml, data ) {
    
                var data = {
                    sid: xml.getAttribute( 'sid' ),
                    name: xml.getAttribute( 'name' ) || '',
                    axis: new THREE.Vector3(),
                    limits: {
                        min: 0,
                        max: 0
                    },
                    type: xml.nodeName,
                    static: false,
                    zeroPosition: 0,
                    middlePosition: 0
                };
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'axis':
                            var array = parseFloats( child.textContent );
                            data.axis.fromArray( array );
                            break;
                        case 'limits':
                            var max = child.getElementsByTagName( 'max' )[ 0 ];
                            var min = child.getElementsByTagName( 'min' )[ 0 ];
    
                            data.limits.max = parseFloat( max.textContent );
                            data.limits.min = parseFloat( min.textContent );
                            break;
    
                    }
    
                }
    
                // if min is equal to or greater than max, consider the joint static
    
                if ( data.limits.min >= data.limits.max ) {
    
                    data.static = true;
    
                }
    
                // calculate middle position
    
                data.middlePosition = ( data.limits.min + data.limits.max ) / 2.0;
    
                return data;
    
            }
    
            function parseKinematicsLink( xml ) {
    
                var data = {
                    sid: xml.getAttribute( 'sid' ),
                    name: xml.getAttribute( 'name' ) || '',
                    attachments: [],
                    transforms: []
                };
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'attachment_full':
                            data.attachments.push( parseKinematicsAttachment( child ) );
                            break;
    
                        case 'matrix':
                        case 'translate':
                        case 'rotate':
                            data.transforms.push( parseKinematicsTransform( child ) );
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseKinematicsAttachment( xml ) {
    
                var data = {
                    joint: xml.getAttribute( 'joint' ).split( '/' ).pop(),
                    transforms: [],
                    links: []
                };
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'link':
                            data.links.push( parseKinematicsLink( child ) );
                            break;
    
                        case 'matrix':
                        case 'translate':
                        case 'rotate':
                            data.transforms.push( parseKinematicsTransform( child ) );
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function parseKinematicsTransform( xml ) {
    
                var data = {
                    type: xml.nodeName
                };
    
                var array = parseFloats( xml.textContent );
    
                switch ( data.type ) {
    
                    case 'matrix':
                        data.obj = new THREE.Matrix4();
                        data.obj.fromArray( array ).transpose();
                        break;
    
                    case 'translate':
                        data.obj = new THREE.Vector3();
                        data.obj.fromArray( array );
                        break;
    
                    case 'rotate':
                        data.obj = new THREE.Vector3();
                        data.obj.fromArray( array );
                        data.angle = THREE.Math.degToRad( array[ 3 ] );
                        break;
    
                }
    
                return data;
    
            }
    
            function parseKinematicsScene( xml ) {
    
                var data = {
                    bindJointAxis: []
                };
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'bind_joint_axis':
                            data.bindJointAxis.push( parseKinematicsBindJointAxis( child ) );
                            break;
    
                    }
    
                }
    
                library.kinematicsScenes[ parseId( xml.getAttribute( 'url' ) ) ] = data;
    
            }
    
            function parseKinematicsBindJointAxis( xml ) {
    
                var data = {
                    target: xml.getAttribute( 'target' ).split( '/' ).pop()
                };
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'axis':
                            var param = child.getElementsByTagName( 'param' )[ 0 ];
                            data.axis = param.textContent;
                            var tmpJointIndex = data.axis.split( 'inst_' ).pop().split( 'axis' )[ 0 ];
                            data.jointIndex = tmpJointIndex.substr( 0, tmpJointIndex.length - 1 );
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function buildKinematicsScene( data ) {
    
                if ( data.build !== undefined ) return data.build;
    
                return data;
    
            }
    
            function getKinematicsScene( id ) {
    
                return getBuild( library.kinematicsScenes[ id ], buildKinematicsScene );
    
            }
    
            function setupKinematics() {
    
                var kinematicsModelId = Object.keys( library.kinematicsModels )[ 0 ];
                var kinematicsSceneId = Object.keys( library.kinematicsScenes )[ 0 ];
                var visualSceneId = Object.keys( library.visualScenes )[ 0 ];
    
                if ( kinematicsModelId === undefined || kinematicsSceneId === undefined ) return;
    
                var kinematicsModel = getKinematicsModel( kinematicsModelId );
                var kinematicsScene = getKinematicsScene( kinematicsSceneId );
                var visualScene = getVisualScene( visualSceneId );
    
                var bindJointAxis = kinematicsScene.bindJointAxis;
                var jointMap = {};
    
                for ( var i = 0, l = bindJointAxis.length; i < l; i ++ ) {
    
                    var axis = bindJointAxis[ i ];
    
                    // the result of the following query is an element of type 'translate', 'rotate','scale' or 'matrix'
    
                    var targetElement = collada.querySelector( '[sid="' + axis.target + '"]' );
    
                    if ( targetElement ) {
    
                        // get the parent of the transfrom element
    
                        var parentVisualElement = targetElement.parentElement;
    
                        // connect the joint of the kinematics model with the element in the visual scene
    
                        connect( axis.jointIndex, parentVisualElement );
    
                    }
    
                }
    
                function connect( jointIndex, visualElement ) {
    
                    var visualElementName = visualElement.getAttribute( 'name' );
                    var joint = kinematicsModel.joints[ jointIndex ];
    
                    visualScene.traverse( function ( object ) {
    
                        if ( object.name === visualElementName ) {
    
                            jointMap[ jointIndex ] = {
                                object: object,
                                transforms: buildTransformList( visualElement ),
                                joint: joint,
                                position: joint.zeroPosition
                            };
    
                        }
    
                    } );
    
                }
    
                var m0 = new THREE.Matrix4();
    
                kinematics = {
    
                    joints: kinematicsModel && kinematicsModel.joints,
    
                    getJointValue: function ( jointIndex ) {
    
                        var jointData = jointMap[ jointIndex ];
    
                        if ( jointData ) {
    
                            return jointData.position;
    
                        } else {
    
                            console.warn( 'THREE.ColladaLoader: Joint ' + jointIndex + ' doesn\'t exist.' );
    
                        }
    
                    },
    
                    setJointValue: function ( jointIndex, value ) {
    
                        var jointData = jointMap[ jointIndex ];
    
                        if ( jointData ) {
    
                            var joint = jointData.joint;
    
                            if ( value > joint.limits.max || value < joint.limits.min ) {
    
                                console.warn( 'THREE.ColladaLoader: Joint ' + jointIndex + ' value ' + value + ' outside of limits (min: ' + joint.limits.min + ', max: ' + joint.limits.max + ').' );
    
                            } else if ( joint.static ) {
    
                                console.warn( 'THREE.ColladaLoader: Joint ' + jointIndex + ' is static.' );
    
                            } else {
    
                                var object = jointData.object;
                                var axis = joint.axis;
                                var transforms = jointData.transforms;
    
                                matrix.identity();
    
                                // each update, we have to apply all transforms in the correct order
    
                                for ( var i = 0; i < transforms.length; i ++ ) {
    
                                    var transform = transforms[ i ];
    
                                    // if there is a connection of the transform node with a joint, apply the joint value
    
                                    if ( transform.sid && transform.sid.indexOf( jointIndex ) !== - 1 ) {
    
                                        switch ( joint.type ) {
    
                                            case 'revolute':
                                                matrix.multiply( m0.makeRotationAxis( axis, THREE.Math.degToRad( value ) ) );
                                                break;
    
                                            case 'prismatic':
                                                matrix.multiply( m0.makeTranslation( axis.x * value, axis.y * value, axis.z * value ) );
                                                break;
    
                                            default:
                                                console.warn( 'THREE.ColladaLoader: Unknown joint type: ' + joint.type );
                                                break;
    
                                        }
    
                                    } else {
    
                                        switch ( transform.type ) {
    
                                            case 'matrix':
                                                matrix.multiply( transform.obj );
                                                break;
    
                                            case 'translate':
                                                matrix.multiply( m0.makeTranslation( transform.obj.x, transform.obj.y, transform.obj.z ) );
                                                break;
    
                                            case 'scale':
                                                matrix.scale( transform.obj );
                                                break;
    
                                            case 'rotate':
                                                matrix.multiply( m0.makeRotationAxis( transform.obj, transform.angle ) );
                                                break;
    
                                        }
    
                                    }
    
                                }
    
                                object.matrix.copy( matrix );
                                object.matrix.decompose( object.position, object.quaternion, object.scale );
    
                                jointMap[ jointIndex ].position = value;
    
                            }
    
                        } else {
    
                            console.log( 'THREE.ColladaLoader: ' + jointIndex + ' does not exist.' );
    
                        }
    
                    }
    
                };
    
            }
    
            function buildTransformList( node ) {
    
                var transforms = [];
    
                var xml = collada.querySelector( '[id="' + node.id + '"]' );
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'matrix':
                            var array = parseFloats( child.textContent );
                            var matrix = new THREE.Matrix4().fromArray( array ).transpose();
                            transforms.push( {
                                sid: child.getAttribute( 'sid' ),
                                type: child.nodeName,
                                obj: matrix
                            } );
                            break;
    
                        case 'translate':
                        case 'scale':
                            var array = parseFloats( child.textContent );
                            var vector = new THREE.Vector3().fromArray( array );
                            transforms.push( {
                                sid: child.getAttribute( 'sid' ),
                                type: child.nodeName,
                                obj: vector
                            } );
                            break;
    
                        case 'rotate':
                            var array = parseFloats( child.textContent );
                            var vector = new THREE.Vector3().fromArray( array );
                            var angle = THREE.Math.degToRad( array[ 3 ] );
                            transforms.push( {
                                sid: child.getAttribute( 'sid' ),
                                type: child.nodeName,
                                obj: vector,
                                angle: angle
                            } );
                            break;
    
                    }
    
                }
    
                return transforms;
    
            }
    
            // nodes
    
            function prepareNodes( xml ) {
    
                var elements = xml.getElementsByTagName( 'node' );
    
                // ensure all node elements have id attributes
    
                for ( var i = 0; i < elements.length; i ++ ) {
    
                    var element = elements[ i ];
    
                    if ( element.hasAttribute( 'id' ) === false ) {
    
                        element.setAttribute( 'id', generateId() );
    
                    }
    
                }
    
            }
    
            var matrix = new THREE.Matrix4();
            var vector = new THREE.Vector3();
    
            function parseNode( xml ) {
    
                var data = {
                    name: xml.getAttribute( 'name' ) || '',
                    type: xml.getAttribute( 'type' ),
                    id: xml.getAttribute( 'id' ),
                    sid: xml.getAttribute( 'sid' ),
                    matrix: new THREE.Matrix4(),
                    nodes: [],
                    instanceCameras: [],
                    instanceControllers: [],
                    instanceLights: [],
                    instanceGeometries: [],
                    instanceNodes: [],
                    transforms: {}
                };
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    if ( child.nodeType !== 1 ) continue;
    
                    switch ( child.nodeName ) {
    
                        case 'node':
                            data.nodes.push( child.getAttribute( 'id' ) );
                            parseNode( child );
                            break;
    
                        case 'instance_camera':
                            data.instanceCameras.push( parseId( child.getAttribute( 'url' ) ) );
                            break;
    
                        case 'instance_controller':
                            data.instanceControllers.push( parseNodeInstance( child ) );
                            break;
    
                        case 'instance_light':
                            data.instanceLights.push( parseId( child.getAttribute( 'url' ) ) );
                            break;
    
                        case 'instance_geometry':
                            data.instanceGeometries.push( parseNodeInstance( child ) );
                            break;
    
                        case 'instance_node':
                            data.instanceNodes.push( parseId( child.getAttribute( 'url' ) ) );
                            break;
    
                        case 'matrix':
                            var array = parseFloats( child.textContent );
                            data.matrix.multiply( matrix.fromArray( array ).transpose() );
                            data.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;
                            break;
    
                        case 'translate':
                            var array = parseFloats( child.textContent );
                            vector.fromArray( array );
                            data.matrix.multiply( matrix.makeTranslation( vector.x, vector.y, vector.z ) );
                            data.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;
                            break;
    
                        case 'rotate':
                            var array = parseFloats( child.textContent );
                            var angle = THREE.Math.degToRad( array[ 3 ] );
                            data.matrix.multiply( matrix.makeRotationAxis( vector.fromArray( array ), angle ) );
                            data.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;
                            break;
    
                        case 'scale':
                            var array = parseFloats( child.textContent );
                            data.matrix.scale( vector.fromArray( array ) );
                            data.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;
                            break;
    
                        case 'extra':
                            break;
    
                        default:
                            console.log( child );
    
                    }
    
                }
    
                library.nodes[ data.id ] = data;
    
                return data;
    
            }
    
            function parseNodeInstance( xml ) {
    
                var data = {
                    id: parseId( xml.getAttribute( 'url' ) ),
                    materials: {},
                    skeletons: []
                };
    
                for ( var i = 0; i < xml.childNodes.length; i ++ ) {
    
                    var child = xml.childNodes[ i ];
    
                    switch ( child.nodeName ) {
    
                        case 'bind_material':
                            var instances = child.getElementsByTagName( 'instance_material' );
    
                            for ( var j = 0; j < instances.length; j ++ ) {
    
                                var instance = instances[ j ];
                                var symbol = instance.getAttribute( 'symbol' );
                                var target = instance.getAttribute( 'target' );
    
                                data.materials[ symbol ] = parseId( target );
    
                            }
    
                            break;
    
                        case 'skeleton':
                            data.skeletons.push( parseId( child.textContent ) );
                            break;
    
                        default:
                            break;
    
                    }
    
                }
    
                return data;
    
            }
    
            function buildSkeleton( skeletons, joints ) {
    
                var boneData = [];
                var sortedBoneData = [];
    
                var i, j, data;
    
                // a skeleton can have multiple root bones. collada expresses this
                // situtation with multiple "skeleton" tags per controller instance
    
                for ( i = 0; i < skeletons.length; i ++ ) {
    
                    var skeleton = skeletons[ i ];
                    var root = getNode( skeleton );
    
                    // setup bone data for a single bone hierarchy
    
                    buildBoneHierarchy( root, joints, boneData );
    
                }
    
                // sort bone data (the order is defined in the corresponding controller)
    
                for ( i = 0; i < joints.length; i ++ ) {
    
                    for ( j = 0; j < boneData.length; j ++ ) {
    
                        data = boneData[ j ];
    
                        if ( data.bone.name === joints[ i ].name ) {
    
                            sortedBoneData[ i ] = data;
                            data.processed = true;
                            break;
    
                        }
    
                    }
    
                }
    
                // add unprocessed bone data at the end of the list
    
                for ( i = 0; i < boneData.length; i ++ ) {
    
                    data = boneData[ i ];
    
                    if ( data.processed === false ) {
    
                        sortedBoneData.push( data );
                        data.processed = true;
    
                    }
    
                }
    
                // setup arrays for skeleton creation
    
                var bones = [];
                var boneInverses = [];
    
                for ( i = 0; i < sortedBoneData.length; i ++ ) {
    
                    data = sortedBoneData[ i ];
    
                    bones.push( data.bone );
                    boneInverses.push( data.boneInverse );
    
                }
    
                return new THREE.Skeleton( bones, boneInverses );
    
            }
    
            function buildBoneHierarchy( root, joints, boneData ) {
    
                // setup bone data from visual scene
    
                root.traverse( function ( object ) {
    
                    if ( object.isBone === true ) {
    
                        var boneInverse;
    
                        // retrieve the boneInverse from the controller data
    
                        for ( var i = 0; i < joints.length; i ++ ) {
    
                            var joint = joints[ i ];
    
                            if ( joint.name === object.name ) {
    
                                boneInverse = joint.boneInverse;
                                break;
    
                            }
    
                        }
    
                        if ( boneInverse === undefined ) {
    
                            // Unfortunately, there can be joints in the visual scene that are not part of the
                            // corresponding controller. In this case, we have to create a dummy boneInverse matrix
                            // for the respective bone. This bone won't affect any vertices, because there are no skin indices
                            // and weights defined for it. But we still have to add the bone to the sorted bone list in order to
                            // ensure a correct animation of the model.
    
                             boneInverse = new THREE.Matrix4();
    
                        }
    
                        boneData.push( { bone: object, boneInverse: boneInverse, processed: false } );
    
                    }
    
                } );
    
            }
    
            function buildNode( data ) {
    
                var objects = [];
    
                var matrix = data.matrix;
                var nodes = data.nodes;
                var type = data.type;
                var instanceCameras = data.instanceCameras;
                var instanceControllers = data.instanceControllers;
                var instanceLights = data.instanceLights;
                var instanceGeometries = data.instanceGeometries;
                var instanceNodes = data.instanceNodes;
    
                // nodes
    
                for ( var i = 0, l = nodes.length; i < l; i ++ ) {
    
                    objects.push( getNode( nodes[ i ] ) );
    
                }
    
                // instance cameras
    
                for ( var i = 0, l = instanceCameras.length; i < l; i ++ ) {
    
                    var instanceCamera = getCamera( instanceCameras[ i ] );
    
                    if ( instanceCamera !== null ) {
    
                        objects.push( instanceCamera.clone() );
    
                    }
    
                }
    
                // instance controllers
    
                for ( var i = 0, l = instanceControllers.length; i < l; i ++ ) {
    
                    var instance = instanceControllers[ i ];
                    var controller = getController( instance.id );
                    var geometries = getGeometry( controller.id );
                    var newObjects = buildObjects( geometries, instance.materials );
    
                    var skeletons = instance.skeletons;
                    var joints = controller.skin.joints;
    
                    var skeleton = buildSkeleton( skeletons, joints );
    
                    for ( var j = 0, jl = newObjects.length; j < jl; j ++ ) {
    
                        var object = newObjects[ j ];
    
                        if ( object.isSkinnedMesh ) {
    
                            object.bind( skeleton, controller.skin.bindMatrix );
                            object.normalizeSkinWeights();
    
                        }
    
                        objects.push( object );
    
                    }
    
                }
    
                // instance lights
    
                for ( var i = 0, l = instanceLights.length; i < l; i ++ ) {
    
                    var instanceLight = getLight( instanceLights[ i ] );
    
                    if ( instanceLight !== null ) {
    
                        objects.push( instanceLight.clone() );
    
                    }
    
                }
    
                // instance geometries
    
                for ( var i = 0, l = instanceGeometries.length; i < l; i ++ ) {
    
                    var instance = instanceGeometries[ i ];
    
                    // a single geometry instance in collada can lead to multiple object3Ds.
                    // this is the case when primitives are combined like triangles and lines
    
                    var geometries = getGeometry( instance.id );
                    var newObjects = buildObjects( geometries, instance.materials );
    
                    for ( var j = 0, jl = newObjects.length; j < jl; j ++ ) {
    
                        objects.push( newObjects[ j ] );
    
                    }
    
                }
    
                // instance nodes
    
                for ( var i = 0, l = instanceNodes.length; i < l; i ++ ) {
    
                    objects.push( getNode( instanceNodes[ i ] ).clone() );
    
                }
    
                var object;
    
                if ( nodes.length === 0 && objects.length === 1 ) {
    
                    object = objects[ 0 ];
    
                } else {
    
                    object = ( type === 'JOINT' ) ? new THREE.Bone() : new THREE.Group();
    
                    for ( var i = 0; i < objects.length; i ++ ) {
    
                        object.add( objects[ i ] );
    
                    }
    
                }
    
                object.name = ( type === 'JOINT' ) ? data.sid : data.name;
                object.matrix.copy( matrix );
                object.matrix.decompose( object.position, object.quaternion, object.scale );
    
                return object;
    
            }
    
            function resolveMaterialBinding( keys, instanceMaterials ) {
    
                var materials = [];
    
                for ( var i = 0, l = keys.length; i < l; i ++ ) {
    
                    var id = instanceMaterials[ keys[ i ] ];
                    materials.push( getMaterial( id ) );
    
                }
    
                return materials;
    
            }
    
            function buildObjects( geometries, instanceMaterials ) {
    
                var objects = [];
    
                for ( var type in geometries ) {
    
                    var geometry = geometries[ type ];
    
                    var materials = resolveMaterialBinding( geometry.materialKeys, instanceMaterials );
    
                    // handle case if no materials are defined
    
                    if ( materials.length === 0 ) {
    
                        if ( type === 'lines' || type === 'linestrips' ) {
    
                            materials.push( new THREE.LineBasicMaterial() );
    
                        } else {
    
                            materials.push( new THREE.MeshPhongMaterial() );
    
                        }
    
                    }
    
                    // regard skinning
    
                    var skinning = ( geometry.data.attributes.skinIndex !== undefined );
    
                    if ( skinning ) {
    
                        for ( var i = 0, l = materials.length; i < l; i ++ ) {
    
                            materials[ i ].skinning = true;
    
                        }
    
                    }
    
                    // choose between a single or multi materials (material array)
    
                    var material = ( materials.length === 1 ) ? materials[ 0 ] : materials;
    
                    // now create a specific 3D object
    
                    var object;
    
                    switch ( type ) {
    
                        case 'lines':
                            object = new THREE.LineSegments( geometry.data, material );
                            break;
    
                        case 'linestrips':
                            object = new THREE.Line( geometry.data, material );
                            break;
    
                        case 'triangles':
                        case 'polylist':
                            if ( skinning ) {
    
                                object = new THREE.SkinnedMesh( geometry.data, material );
    
                            } else {
    
                                object = new THREE.Mesh( geometry.data, material );
    
                            }
                            break;
    
                    }
    
                    objects.push( object );
    
                }
    
                return objects;
    
            }
    
            function getNode( id ) {
    
                return getBuild( library.nodes[ id ], buildNode );
    
            }
    
            // visual scenes
    
            function parseVisualScene( xml ) {
    
                var data = {
                    name: xml.getAttribute( 'name' ),
                    children: []
                };
    
                prepareNodes( xml );
    
                var elements = getElementsByTagName( xml, 'node' );
    
                for ( var i = 0; i < elements.length; i ++ ) {
    
                    data.children.push( parseNode( elements[ i ] ) );
    
                }
    
                library.visualScenes[ xml.getAttribute( 'id' ) ] = data;
    
            }
    
            function buildVisualScene( data ) {
    
                var group = new THREE.Group();
                group.name = data.name;
    
                var children = data.children;
    
                for ( var i = 0; i < children.length; i ++ ) {
    
                    var child = children[ i ];
    
                    if ( child.id === null ) {
    
                        group.add( buildNode( child ) );
    
                    } else {
    
                        // if there is an ID, let's try to get the finished build (e.g. joints are already build)
    
                        group.add( getNode( child.id ) );
    
                    }
    
                }
    
                return group;
    
            }
    
            function getVisualScene( id ) {
    
                return getBuild( library.visualScenes[ id ], buildVisualScene );
    
            }
    
            // scenes
    
            function parseScene( xml ) {
    
                var instance = getElementsByTagName( xml, 'instance_visual_scene' )[ 0 ];
                return getVisualScene( parseId( instance.getAttribute( 'url' ) ) );
    
            }
    
            function setupAnimations() {
    
                var clips = library.clips;
    
                if ( isEmpty( clips ) === true ) {
    
                    if ( isEmpty( library.animations ) === false ) {
    
                        // if there are animations but no clips, we create a default clip for playback
    
                        var tracks = [];
    
                        for ( var id in library.animations ) {
    
                            var animationTracks = getAnimation( id );
    
                            for ( var i = 0, l = animationTracks.length; i < l; i ++ ) {
    
                                tracks.push( animationTracks[ i ] );
    
                            }
    
                        }
    
                        animations.push( new THREE.AnimationClip( 'default', - 1, tracks ) );
    
                    }
    
                } else {
    
                    for ( var id in clips ) {
    
                        animations.push( getAnimationClip( id ) );
    
                    }
    
                }
    
            }
    
            console.time( 'THREE.ColladaLoader' );
    
            if ( text.length === 0 ) {
    
                return { scene: new THREE.Scene() };
    
            }
    
            console.time( 'THREE.ColladaLoader: DOMParser' );
    
            var xml = new DOMParser().parseFromString( text, 'application/xml' );
    
            console.timeEnd( 'THREE.ColladaLoader: DOMParser' );
    
            var collada = getElementsByTagName( xml, 'COLLADA' )[ 0 ];
    
            // metadata
    
            var version = collada.getAttribute( 'version' );
            console.log( 'THREE.ColladaLoader: File version', version );
    
            var asset = parseAsset( getElementsByTagName( collada, 'asset' )[ 0 ] );
            var textureLoader = new THREE.TextureLoader( this.manager );
            textureLoader.setPath( path ).setCrossOrigin( this.crossOrigin );
    
            //
    
            var animations = [];
            var kinematics = {};
            var count = 0;
    
            //
    
            var library = {
                animations: {},
                clips: {},
                controllers: {},
                images: {},
                effects: {},
                materials: {},
                cameras: {},
                lights: {},
                geometries: {},
                nodes: {},
                visualScenes: {},
                kinematicsModels: {},
                kinematicsScenes: {}
            };
    
            console.time( 'THREE.ColladaLoader: Parse' );
    
            parseLibrary( collada, 'library_animations', 'animation', parseAnimation );
            parseLibrary( collada, 'library_animation_clips', 'animation_clip', parseAnimationClip );
            parseLibrary( collada, 'library_controllers', 'controller', parseController );
            parseLibrary( collada, 'library_images', 'image', parseImage );
            parseLibrary( collada, 'library_effects', 'effect', parseEffect );
            parseLibrary( collada, 'library_materials', 'material', parseMaterial );
            parseLibrary( collada, 'library_cameras', 'camera', parseCamera );
            parseLibrary( collada, 'library_lights', 'light', parseLight );
            parseLibrary( collada, 'library_geometries', 'geometry', parseGeometry );
            parseLibrary( collada, 'library_nodes', 'node', parseNode );
            parseLibrary( collada, 'library_visual_scenes', 'visual_scene', parseVisualScene );
            parseLibrary( collada, 'library_kinematics_models', 'kinematics_model', parseKinematicsModel );
            parseLibrary( collada, 'scene', 'instance_kinematics_scene', parseKinematicsScene );
    
            console.timeEnd( 'THREE.ColladaLoader: Parse' );
    
            console.time( 'THREE.ColladaLoader: Build' );
    
            buildLibrary( library.animations, buildAnimation );
            buildLibrary( library.clips, buildAnimationClip );
            buildLibrary( library.controllers, buildController );
            buildLibrary( library.images, buildImage );
            buildLibrary( library.effects, buildEffect );
            buildLibrary( library.materials, buildMaterial );
            buildLibrary( library.cameras, buildCamera );
            buildLibrary( library.lights, buildLight );
            buildLibrary( library.geometries, buildGeometry );
            buildLibrary( library.visualScenes, buildVisualScene );
    
            console.timeEnd( 'THREE.ColladaLoader: Build' );
    
            setupAnimations();
            setupKinematics();
    
            var scene = parseScene( getElementsByTagName( collada, 'scene' )[ 0 ] );
    
            if ( asset.upAxis === 'Z_UP' ) {
    
                scene.rotation.x = - Math.PI / 2;
    
            }
    
            scene.scale.multiplyScalar( asset.unit );
    
            console.timeEnd( 'THREE.ColladaLoader' );
    
            return {
                animations: animations,
                kinematics: kinematics,
                library: library,
                scene: scene
            };
    
        }
    
    };
},{}],"form/lib/FBXLoader":[function(require,module,exports){
/**
 * @author Kyle-Larson https://github.com/Kyle-Larson
 * @author Takahiro https://github.com/takahirox
 * @author Lewy Blue https://github.com/looeee
 *
 * Loader loads FBX file and generates Group representing FBX scene.
 * Requires FBX file to be >= 7.0 and in ASCII or to be any version in Binary format.
 *
 * Supports:
 * 	Mesh Generation (Positional Data)
 * 	Normal Data (Per Vertex Drawing Instance)
 *	UV Data (Per Vertex Drawing Instance)
 *	Skinning
 *	Animation
 * 	- Separated Animations based on stacks.
 * 	- Skeletal & Non-Skeletal Animations
 *	NURBS (Open, Closed and Periodic forms)
 *
 * Needs Support:
 *	Euler rotation order
 *
 *
 * FBX format references:
 * 	https://wiki.blender.org/index.php/User:Mont29/Foundation/FBX_File_Structure
 *
 * 	Binary format specification:
 *		https://code.blender.org/2013/08/fbx-binary-file-format-specification/
 *		https://wiki.rogiken.org/specifications/file-format/fbx/ (more detail but Japanese)
 */

( function () {
    
        THREE.FBXLoader = function ( manager ) {
    
            this.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;
    
        };
    
        Object.assign( THREE.FBXLoader.prototype, {
    
            load: function ( url, onLoad, onProgress, onError ) {
    
                var self = this;
    
                var resourceDirectory = THREE.LoaderUtils.extractUrlBase( url );
    
                var loader = new THREE.FileLoader( this.manager );
                loader.setResponseType( 'arraybuffer' );
                loader.load( url, function ( buffer ) {
    
                    try {
    
                        var scene = self.parse( buffer, resourceDirectory );
                        onLoad( scene );
    
                    } catch ( error ) {
    
                        window.setTimeout( function () {
    
                            if ( onError ) onError( error );
    
                            self.manager.itemError( url );
    
                        }, 0 );
    
                    }
    
                }, onProgress, onError );
    
            },
    
            parse: function ( FBXBuffer, resourceDirectory ) {
    
                var FBXTree;
    
                if ( isFbxFormatBinary( FBXBuffer ) ) {
    
                    FBXTree = new BinaryParser().parse( FBXBuffer );
    
                } else {
    
                    var FBXText = convertArrayBufferToString( FBXBuffer );
    
                    if ( ! isFbxFormatASCII( FBXText ) ) {
    
                        throw new Error( 'THREE.FBXLoader: Unknown format.' );
    
                    }
    
                    if ( getFbxVersion( FBXText ) < 7000 ) {
    
                        throw new Error( 'THREE.FBXLoader: FBX version not supported, FileVersion: ' + getFbxVersion( FBXText ) );
    
                    }
    
                    FBXTree = new TextParser().parse( FBXText );
    
                }
    
                // console.log( FBXTree );
    
                var connections = parseConnections( FBXTree );
                var images = parseImages( FBXTree );
                var textures = parseTextures( FBXTree, new THREE.TextureLoader( this.manager ).setPath( resourceDirectory ), images, connections );
                var materials = parseMaterials( FBXTree, textures, connections );
                var skeletons = parseDeformers( FBXTree, connections );
                var geometryMap = parseGeometries( FBXTree, connections, skeletons );
                var sceneGraph = parseScene( FBXTree, connections, skeletons, geometryMap, materials );
    
                return sceneGraph;
    
            }
    
        } );
    
        // Parses FBXTree.Connections which holds parent-child connections between objects (e.g. material -> texture, model->geometry )
        // and details the connection type
        function parseConnections( FBXTree ) {
    
            var connectionMap = new Map();
    
            if ( 'Connections' in FBXTree ) {
    
                var rawConnections = FBXTree.Connections.connections;
    
                rawConnections.forEach( function ( rawConnection ) {
    
                    var fromID = rawConnection[ 0 ];
                    var toID = rawConnection[ 1 ];
                    var relationship = rawConnection[ 2 ];
    
                    if ( ! connectionMap.has( fromID ) ) {
    
                        connectionMap.set( fromID, {
                            parents: [],
                            children: []
                        } );
    
                    }
    
                    var parentRelationship = { ID: toID, relationship: relationship };
                    connectionMap.get( fromID ).parents.push( parentRelationship );
    
                    if ( ! connectionMap.has( toID ) ) {
    
                        connectionMap.set( toID, {
                            parents: [],
                            children: []
                        } );
    
                    }
    
                    var childRelationship = { ID: fromID, relationship: relationship };
                    connectionMap.get( toID ).children.push( childRelationship );
    
                } );
    
            }
    
            return connectionMap;
    
        }
    
        // Parse FBXTree.Objects.Video for embedded image data
        // These images are connected to textures in FBXTree.Objects.Textures
        // via FBXTree.Connections.
        function parseImages( FBXTree ) {
    
            var images = {};
            var blobs = {};
    
            if ( 'Video' in FBXTree.Objects ) {
    
                var videoNodes = FBXTree.Objects.Video;
    
                for ( var nodeID in videoNodes ) {
    
                    var videoNode = videoNodes[ nodeID ];
    
                    var id = parseInt( nodeID );
    
                    images[ id ] = videoNode.Filename;
    
                    // raw image data is in videoNode.Content
                    if ( 'Content' in videoNode ) {
    
                        var arrayBufferContent = ( videoNode.Content instanceof ArrayBuffer ) && ( videoNode.Content.byteLength > 0 );
                        var base64Content = ( typeof videoNode.Content === 'string' ) && ( videoNode.Content !== '' );
    
                        if ( arrayBufferContent || base64Content ) {
    
                            var image = parseImage( videoNodes[ nodeID ] );
    
                            blobs[ videoNode.Filename ] = image;
    
                        }
    
                    }
    
                }
    
            }
    
            for ( var id in images ) {
    
                var filename = images[ id ];
    
                if ( blobs[ filename ] !== undefined ) images[ id ] = blobs[ filename ];
                else images[ id ] = images[ id ].split( '\\' ).pop();
    
            }
    
            return images;
    
        }
    
        // Parse embedded image data in FBXTree.Video.Content
        function parseImage( videoNode ) {
    
            var content = videoNode.Content;
            var fileName = videoNode.RelativeFilename || videoNode.Filename;
            var extension = fileName.slice( fileName.lastIndexOf( '.' ) + 1 ).toLowerCase();
    
            var type;
    
            switch ( extension ) {
    
                case 'bmp':
    
                    type = 'image/bmp';
                    break;
    
                case 'jpg':
                case 'jpeg':
    
                    type = 'image/jpeg';
                    break;
    
                case 'png':
    
                    type = 'image/png';
                    break;
    
                case 'tif':
    
                    type = 'image/tiff';
                    break;
    
                default:
    
                    console.warn( 'FBXLoader: Image type "' + extension + '" is not supported.' );
                    return;
    
            }
    
            if ( typeof content === 'string' ) { // ASCII format
    
                return 'data:' + type + ';base64,' + content;
    
            } else { // Binary Format
    
                var array = new Uint8Array( content );
                return window.URL.createObjectURL( new Blob( [ array ], { type: type } ) );
    
            }
    
        }
    
        // Parse nodes in FBXTree.Objects.Texture
        // These contain details such as UV scaling, cropping, rotation etc and are connected
        // to images in FBXTree.Objects.Video
        function parseTextures( FBXTree, loader, images, connections ) {
    
            var textureMap = new Map();
    
            if ( 'Texture' in FBXTree.Objects ) {
    
                var textureNodes = FBXTree.Objects.Texture;
                for ( var nodeID in textureNodes ) {
    
                    var texture = parseTexture( textureNodes[ nodeID ], loader, images, connections );
                    textureMap.set( parseInt( nodeID ), texture );
    
                }
    
            }
    
            return textureMap;
    
        }
    
        // Parse individual node in FBXTree.Objects.Texture
        function parseTexture( textureNode, loader, images, connections ) {
    
            var texture = loadTexture( textureNode, loader, images, connections );
    
            texture.ID = textureNode.id;
    
            texture.name = textureNode.attrName;
    
            var wrapModeU = textureNode.WrapModeU;
            var wrapModeV = textureNode.WrapModeV;
    
            var valueU = wrapModeU !== undefined ? wrapModeU.value : 0;
            var valueV = wrapModeV !== undefined ? wrapModeV.value : 0;
    
            // http://download.autodesk.com/us/fbx/SDKdocs/FBX_SDK_Help/files/fbxsdkref/class_k_fbx_texture.html#889640e63e2e681259ea81061b85143a
            // 0: repeat(default), 1: clamp
    
            texture.wrapS = valueU === 0 ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;
            texture.wrapT = valueV === 0 ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;
    
            if ( 'Scaling' in textureNode ) {
    
                var values = textureNode.Scaling.value;
    
                texture.repeat.x = values[ 0 ];
                texture.repeat.y = values[ 1 ];
    
            }
    
            return texture;
    
        }
    
        // load a texture specified as a blob or data URI, or via an external URL using THREE.TextureLoader
        function loadTexture( textureNode, loader, images, connections ) {
    
            var fileName;
    
            var currentPath = loader.path;
    
            var children = connections.get( textureNode.id ).children;
    
            if ( children !== undefined && children.length > 0 && images[ children[ 0 ].ID ] !== undefined ) {
    
                fileName = images[ children[ 0 ].ID ];
    
                if ( fileName.indexOf( 'blob:' ) === 0 || fileName.indexOf( 'data:' ) === 0 ) {
    
                    loader.setPath( undefined );
    
                }
    
            }
    
            var texture = loader.load( fileName );
    
            loader.setPath( currentPath );
    
            return texture;
    
        }
    
        // Parse nodes in FBXTree.Objects.Material
        function parseMaterials( FBXTree, textureMap, connections ) {
    
            var materialMap = new Map();
    
            if ( 'Material' in FBXTree.Objects ) {
    
                var materialNodes = FBXTree.Objects.Material;
    
                for ( var nodeID in materialNodes ) {
    
                    var material = parseMaterial( FBXTree, materialNodes[ nodeID ], textureMap, connections );
    
                    if ( material !== null ) materialMap.set( parseInt( nodeID ), material );
    
                }
    
            }
    
            return materialMap;
    
        }
    
        // Parse single node in FBXTree.Objects.Material
        // Materials are connected to texture maps in FBXTree.Objects.Textures
        // FBX format currently only supports Lambert and Phong shading models
        function parseMaterial( FBXTree, materialNode, textureMap, connections ) {
    
            var ID = materialNode.id;
            var name = materialNode.attrName;
            var type = materialNode.ShadingModel;
    
            //Case where FBX wraps shading model in property object.
            if ( typeof type === 'object' ) {
    
                type = type.value;
    
            }
    
            // Ignore unused materials which don't have any connections.
            if ( ! connections.has( ID ) ) return null;
    
            var parameters = parseParameters( FBXTree, materialNode, textureMap, ID, connections );
    
            var material;
    
            switch ( type.toLowerCase() ) {
    
                case 'phong':
                    material = new THREE.MeshPhongMaterial();
                    break;
                case 'lambert':
                    material = new THREE.MeshLambertMaterial();
                    break;
                default:
                    console.warn( 'THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.', type );
                    material = new THREE.MeshPhongMaterial( { color: 0x3300ff } );
                    break;
    
            }
    
            material.setValues( parameters );
            material.name = name;
    
            return material;
    
        }
    
        // Parse FBX material and return parameters suitable for a three.js material
        // Also parse the texture map and return any textures associated with the material
        function parseParameters( FBXTree, properties, textureMap, ID, connections ) {
    
            var parameters = {};
    
            if ( properties.BumpFactor ) {
    
                parameters.bumpScale = properties.BumpFactor.value;
    
            }
            if ( properties.Diffuse ) {
    
                parameters.color = new THREE.Color().fromArray( properties.Diffuse.value );
    
            }
            if ( properties.DisplacementFactor ) {
    
                parameters.displacementScale = properties.DisplacementFactor.value;
    
            }
            if ( properties.ReflectionFactor ) {
    
                parameters.reflectivity = properties.ReflectionFactor.value;
    
            }
            if ( properties.Specular ) {
    
                parameters.specular = new THREE.Color().fromArray( properties.Specular.value );
    
            }
            if ( properties.Shininess ) {
    
                parameters.shininess = properties.Shininess.value;
    
            }
            if ( properties.Emissive ) {
    
                parameters.emissive = new THREE.Color().fromArray( properties.Emissive.value );
    
            }
            if ( properties.EmissiveFactor ) {
    
                parameters.emissiveIntensity = parseFloat( properties.EmissiveFactor.value );
    
            }
            if ( properties.Opacity ) {
    
                parameters.opacity = parseFloat( properties.Opacity.value );
    
            }
            if ( parameters.opacity < 1.0 ) {
    
                parameters.transparent = true;
    
            }
    
            connections.get( ID ).children.forEach( function ( child ) {
    
                var type = child.relationship;
    
                switch ( type ) {
    
                    case 'Bump':
                        parameters.bumpMap = textureMap.get( child.ID );
                        break;
    
                    case 'DiffuseColor':
                        parameters.map = getTexture( FBXTree, textureMap, child.ID, connections );
                        break;
    
                    case 'DisplacementColor':
                        parameters.displacementMap = getTexture( FBXTree, textureMap, child.ID, connections );
                        break;
    
    
                    case 'EmissiveColor':
                        parameters.emissiveMap = getTexture( FBXTree, textureMap, child.ID, connections );
                        break;
    
                    case 'NormalMap':
                        parameters.normalMap = getTexture( FBXTree, textureMap, child.ID, connections );
                        break;
    
                    case 'ReflectionColor':
                        parameters.envMap = getTexture( FBXTree, textureMap, child.ID, connections );
                        parameters.envMap.mapping = THREE.EquirectangularReflectionMapping;
                        break;
    
                    case 'SpecularColor':
                        parameters.specularMap = getTexture( FBXTree, textureMap, child.ID, connections );
                        break;
    
                    case 'TransparentColor':
                        parameters.alphaMap = getTexture( FBXTree, textureMap, child.ID, connections );
                        parameters.transparent = true;
                        break;
    
                    case 'AmbientColor':
                    case 'ShininessExponent': // AKA glossiness map
                    case 'SpecularFactor': // AKA specularLevel
                    case 'VectorDisplacementColor': // NOTE: Seems to be a copy of DisplacementColor
                    default:
                        console.warn( 'THREE.FBXLoader: %s map is not supported in three.js, skipping texture.', type );
                        break;
    
                }
    
            } );
    
            return parameters;
    
        }
    
        // get a texture from the textureMap for use by a material.
        function getTexture( FBXTree, textureMap, id, connections ) {
    
            // if the texture is a layered texture, just use the first layer and issue a warning
            if ( 'LayeredTexture' in FBXTree.Objects && id in FBXTree.Objects.LayeredTexture ) {
    
                console.warn( 'THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer.' );
                id = connections.get( id ).children[ 0 ].ID;
    
            }
    
            return textureMap.get( id );
    
        }
    
        // Parse nodes in FBXTree.Objects.Deformer
        // Deformer node can contain skinning or Vertex Cache animation data, however only skinning is supported here
        // Generates map of Skeleton-like objects for use later when generating and binding skeletons.
        function parseDeformers( FBXTree, connections ) {
    
            var skeletons = {};
    
            if ( 'Deformer' in FBXTree.Objects ) {
    
                var DeformerNodes = FBXTree.Objects.Deformer;
    
                for ( var nodeID in DeformerNodes ) {
    
                    var deformerNode = DeformerNodes[ nodeID ];
    
                    if ( deformerNode.attrType === 'Skin' ) {
    
                        var relationships = connections.get( parseInt( nodeID ) );
    
                        var skeleton = parseSkeleton( relationships, DeformerNodes );
                        skeleton.ID = nodeID;
    
                        if ( relationships.parents.length > 1 ) console.warn( 'THREE.FBXLoader: skeleton attached to more than one geometry is not supported.' );
                        skeleton.geometryID = relationships.parents[ 0 ].ID;
    
                        skeletons[ nodeID ] = skeleton;
    
                    }
    
                }
    
            }
    
            return skeletons;
    
        }
    
        // Parse single nodes in FBXTree.Objects.Deformer
        // The top level deformer nodes have type 'Skin' and subDeformer nodes have type 'Cluster'
        // Each skin node represents a skeleton and each cluster node represents a bone
        function parseSkeleton( connections, deformerNodes ) {
    
            var rawBones = [];
    
            connections.children.forEach( function ( child ) {
    
                var subDeformerNode = deformerNodes[ child.ID ];
    
                if ( subDeformerNode.attrType !== 'Cluster' ) return;
    
                var rawBone = {
    
                    ID: child.ID,
                    indices: [],
                    weights: [],
                    transform: new THREE.Matrix4().fromArray( subDeformerNode.Transform.a ),
                    transformLink: new THREE.Matrix4().fromArray( subDeformerNode.TransformLink.a ),
                    linkMode: subDeformerNode.Mode,
    
                };
    
                if ( 'Indexes' in subDeformerNode ) {
    
                    rawBone.indices = subDeformerNode.Indexes.a;
                    rawBone.weights = subDeformerNode.Weights.a;
    
                }
    
                rawBones.push( rawBone );
    
            } );
    
            return {
    
                rawBones: rawBones,
                bones: []
    
            };
    
        }
    
        // Parse nodes in FBXTree.Objects.Geometry
        function parseGeometries( FBXTree, connections, skeletons ) {
    
            var geometryMap = new Map();
    
            if ( 'Geometry' in FBXTree.Objects ) {
    
                var geometryNodes = FBXTree.Objects.Geometry;
    
    
    
                for ( var nodeID in geometryNodes ) {
    
                    var relationships = connections.get( parseInt( nodeID ) );
                    var geo = parseGeometry( FBXTree, relationships, geometryNodes[ nodeID ], skeletons );
    
                    geometryMap.set( parseInt( nodeID ), geo );
    
                }
    
            }
    
            return geometryMap;
    
        }
    
        // Parse single node in FBXTree.Objects.Geometry
        function parseGeometry( FBXTree, relationships, geometryNode, skeletons ) {
    
            switch ( geometryNode.attrType ) {
    
                case 'Mesh':
                    return parseMeshGeometry( FBXTree, relationships, geometryNode, skeletons );
                    break;
    
                case 'NurbsCurve':
                    return parseNurbsGeometry( geometryNode );
                    break;
    
            }
    
        }
    
    
        // Parse single node mesh geometry in FBXTree.Objects.Geometry
        function parseMeshGeometry( FBXTree, relationships, geometryNode, skeletons ) {
    
            var modelNodes = relationships.parents.map( function ( parent ) {
    
                return FBXTree.Objects.Model[ parent.ID ];
    
            } );
    
            // don't create geometry if it is not associated with any models
            if ( modelNodes.length === 0 ) return;
    
            var skeleton = relationships.children.reduce( function ( skeleton, child ) {
    
                if ( skeletons[ child.ID ] !== undefined ) skeleton = skeletons[ child.ID ];
    
                return skeleton;
    
            }, null );
    
            var preTransform = new THREE.Matrix4();
    
            // TODO: if there is more than one model associated with the geometry, AND the models have
            // different geometric transforms, then this will cause problems
            // if ( modelNodes.length > 1 ) { }
    
            // For now just assume one model and get the preRotations from that
            var modelNode = modelNodes[ 0 ];
    
            if ( 'GeometricRotation' in modelNode ) {
    
                var array = modelNode.GeometricRotation.value.map( THREE.Math.degToRad );
                array[ 3 ] = 'ZYX';
    
                preTransform.makeRotationFromEuler( new THREE.Euler().fromArray( array ) );
    
            }
    
            if ( 'GeometricTranslation' in modelNode ) {
    
                preTransform.setPosition( new THREE.Vector3().fromArray( modelNode.GeometricTranslation.value ) );
    
            }
    
            return genGeometry( FBXTree, relationships, geometryNode, skeleton, preTransform );
    
        }
    
        // Generate a THREE.BufferGeometry from a node in FBXTree.Objects.Geometry
        function genGeometry( FBXTree, relationships, geometryNode, skeleton, preTransform ) {
    
            var vertexPositions = geometryNode.Vertices.a;
            var vertexIndices = geometryNode.PolygonVertexIndex.a;
    
            // create arrays to hold the final data used to build the buffergeometry
            var vertexBuffer = [];
            var normalBuffer = [];
            var colorsBuffer = [];
            var uvsBuffer = [];
            var materialIndexBuffer = [];
            var vertexWeightsBuffer = [];
            var weightsIndicesBuffer = [];
    
            if ( geometryNode.LayerElementColor ) {
    
                var colorInfo = getColors( geometryNode.LayerElementColor[ 0 ] );
    
            }
    
            if ( geometryNode.LayerElementMaterial ) {
    
                var materialInfo = getMaterials( geometryNode.LayerElementMaterial[ 0 ] );
    
            }
    
            if ( geometryNode.LayerElementNormal ) {
    
                var normalInfo = getNormals( geometryNode.LayerElementNormal[ 0 ] );
    
            }
    
            if ( geometryNode.LayerElementUV ) {
    
                var uvInfo = [];
                var i = 0;
                while ( geometryNode.LayerElementUV[ i ] ) {
    
                    uvInfo.push( getUVs( geometryNode.LayerElementUV[ i ] ) );
                    i ++;
    
                }
    
            }
    
            var weightTable = {};
    
            if ( skeleton !== null ) {
    
                skeleton.rawBones.forEach( function ( rawBone, i ) {
    
                    // loop over the bone's vertex indices and weights
                    rawBone.indices.forEach( function ( index, j ) {
    
                        if ( weightTable[ index ] === undefined ) weightTable[ index ] = [];
    
                        weightTable[ index ].push( {
    
                            id: i,
                            weight: rawBone.weights[ j ],
    
                        } );
    
                    } );
    
                } );
    
            }
    
            var polygonIndex = 0;
            var faceLength = 0;
            var displayedWeightsWarning = false;
    
            // these will hold data for a single face
            var vertexPositionIndexes = [];
            var faceNormals = [];
            var faceColors = [];
            var faceUVs = [];
            var faceWeights = [];
            var faceWeightIndices = [];
    
            vertexIndices.forEach( function ( vertexIndex, polygonVertexIndex ) {
    
                var endOfFace = false;
    
                // Face index and vertex index arrays are combined in a single array
                // A cube with quad faces looks like this:
                // PolygonVertexIndex: *24 {
                //  a: 0, 1, 3, -3, 2, 3, 5, -5, 4, 5, 7, -7, 6, 7, 1, -1, 1, 7, 5, -4, 6, 0, 2, -5
                //  }
                // Negative numbers mark the end of a face - first face here is 0, 1, 3, -3
                // to find index of last vertex multiply by -1 and subtract 1: -3 * - 1 - 1 = 2
                if ( vertexIndex < 0 ) {
    
                    vertexIndex = vertexIndex ^ - 1; // equivalent to ( x * -1 ) - 1
                    vertexIndices[ polygonVertexIndex ] = vertexIndex;
                    endOfFace = true;
    
                }
    
                var weightIndices = [];
                var weights = [];
    
                vertexPositionIndexes.push( vertexIndex * 3, vertexIndex * 3 + 1, vertexIndex * 3 + 2 );
    
                if ( colorInfo ) {
    
                    var data = getData( polygonVertexIndex, polygonIndex, vertexIndex, colorInfo );
    
                    faceColors.push( data[ 0 ], data[ 1 ], data[ 2 ] );
    
                }
    
                if ( skeleton ) {
    
                    if ( weightTable[ vertexIndex ] !== undefined ) {
    
                        weightTable[ vertexIndex ].forEach( function ( wt ) {
    
                            weights.push( wt.weight );
                            weightIndices.push( wt.id );
    
                        } );
    
    
                    }
    
                    if ( weights.length > 4 ) {
    
                        if ( ! displayedWeightsWarning ) {
    
                            console.warn( 'THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights.' );
                            displayedWeightsWarning = true;
    
                        }
    
                        var wIndex = [ 0, 0, 0, 0 ];
                        var Weight = [ 0, 0, 0, 0 ];
    
                        weights.forEach( function ( weight, weightIndex ) {
    
                            var currentWeight = weight;
                            var currentIndex = weightIndices[ weightIndex ];
    
                            Weight.forEach( function ( comparedWeight, comparedWeightIndex, comparedWeightArray ) {
    
                                if ( currentWeight > comparedWeight ) {
    
                                    comparedWeightArray[ comparedWeightIndex ] = currentWeight;
                                    currentWeight = comparedWeight;
    
                                    var tmp = wIndex[ comparedWeightIndex ];
                                    wIndex[ comparedWeightIndex ] = currentIndex;
                                    currentIndex = tmp;
    
                                }
    
                            } );
    
                        } );
    
                        weightIndices = wIndex;
                        weights = Weight;
    
                    }
    
                    // if the weight array is shorter than 4 pad with 0s
                    while ( weights.length < 4 ) {
    
                        weights.push( 0 );
                        weightIndices.push( 0 );
    
                    }
    
                    for ( var i = 0; i < 4; ++ i ) {
    
                        faceWeights.push( weights[ i ] );
                        faceWeightIndices.push( weightIndices[ i ] );
    
                    }
    
                }
    
                if ( normalInfo ) {
    
                    var data = getData( polygonVertexIndex, polygonIndex, vertexIndex, normalInfo );
    
                    faceNormals.push( data[ 0 ], data[ 1 ], data[ 2 ] );
    
                }
    
                if ( materialInfo && materialInfo.mappingType !== 'AllSame' ) {
    
                    var materialIndex = getData( polygonVertexIndex, polygonIndex, vertexIndex, materialInfo )[ 0 ];
    
                }
    
                if ( uvInfo ) {
    
                    uvInfo.forEach( function ( uv, i ) {
    
                        var data = getData( polygonVertexIndex, polygonIndex, vertexIndex, uv );
    
                        if ( faceUVs[ i ] === undefined ) {
    
                            faceUVs[ i ] = [];
    
                        }
    
                        faceUVs[ i ].push( data[ 0 ] );
                        faceUVs[ i ].push( data[ 1 ] );
    
                    } );
    
                }
    
                faceLength ++;
    
                // we have reached the end of a face - it may have 4 sides though
                // in which case the data is split to represent two 3 sided faces
                if ( endOfFace ) {
    
                    for ( var i = 2; i < faceLength; i ++ ) {
    
                        vertexBuffer.push( vertexPositions[ vertexPositionIndexes[ 0 ] ] );
                        vertexBuffer.push( vertexPositions[ vertexPositionIndexes[ 1 ] ] );
                        vertexBuffer.push( vertexPositions[ vertexPositionIndexes[ 2 ] ] );
    
                        vertexBuffer.push( vertexPositions[ vertexPositionIndexes[ ( i - 1 ) * 3 ] ] );
                        vertexBuffer.push( vertexPositions[ vertexPositionIndexes[ ( i - 1 ) * 3 + 1 ] ] );
                        vertexBuffer.push( vertexPositions[ vertexPositionIndexes[ ( i - 1 ) * 3 + 2 ] ] );
    
                        vertexBuffer.push( vertexPositions[ vertexPositionIndexes[ i * 3 ] ] );
                        vertexBuffer.push( vertexPositions[ vertexPositionIndexes[ i * 3 + 1 ] ] );
                        vertexBuffer.push( vertexPositions[ vertexPositionIndexes[ i * 3 + 2 ] ] );
    
                        if ( skeleton ) {
    
                            vertexWeightsBuffer.push( faceWeights[ 0 ] );
                            vertexWeightsBuffer.push( faceWeights[ 1 ] );
                            vertexWeightsBuffer.push( faceWeights[ 2 ] );
                            vertexWeightsBuffer.push( faceWeights[ 3 ] );
    
                            vertexWeightsBuffer.push( faceWeights[ ( i - 1 ) * 4 ] );
                            vertexWeightsBuffer.push( faceWeights[ ( i - 1 ) * 4 + 1 ] );
                            vertexWeightsBuffer.push( faceWeights[ ( i - 1 ) * 4 + 2 ] );
                            vertexWeightsBuffer.push( faceWeights[ ( i - 1 ) * 4 + 3 ] );
    
                            vertexWeightsBuffer.push( faceWeights[ i * 4 ] );
                            vertexWeightsBuffer.push( faceWeights[ i * 4 + 1 ] );
                            vertexWeightsBuffer.push( faceWeights[ i * 4 + 2 ] );
                            vertexWeightsBuffer.push( faceWeights[ i * 4 + 3 ] );
    
                            weightsIndicesBuffer.push( faceWeightIndices[ 0 ] );
                            weightsIndicesBuffer.push( faceWeightIndices[ 1 ] );
                            weightsIndicesBuffer.push( faceWeightIndices[ 2 ] );
                            weightsIndicesBuffer.push( faceWeightIndices[ 3 ] );
    
                            weightsIndicesBuffer.push( faceWeightIndices[ ( i - 1 ) * 4 ] );
                            weightsIndicesBuffer.push( faceWeightIndices[ ( i - 1 ) * 4 + 1 ] );
                            weightsIndicesBuffer.push( faceWeightIndices[ ( i - 1 ) * 4 + 2 ] );
                            weightsIndicesBuffer.push( faceWeightIndices[ ( i - 1 ) * 4 + 3 ] );
    
                            weightsIndicesBuffer.push( faceWeightIndices[ i * 4 ] );
                            weightsIndicesBuffer.push( faceWeightIndices[ i * 4 + 1 ] );
                            weightsIndicesBuffer.push( faceWeightIndices[ i * 4 + 2 ] );
                            weightsIndicesBuffer.push( faceWeightIndices[ i * 4 + 3 ] );
    
                        }
    
                        if ( colorInfo ) {
    
                            colorsBuffer.push( faceColors[ 0 ] );
                            colorsBuffer.push( faceColors[ 1 ] );
                            colorsBuffer.push( faceColors[ 2 ] );
    
                            colorsBuffer.push( faceColors[ ( i - 1 ) * 3 ] );
                            colorsBuffer.push( faceColors[ ( i - 1 ) * 3 + 1 ] );
                            colorsBuffer.push( faceColors[ ( i - 1 ) * 3 + 2 ] );
    
                            colorsBuffer.push( faceColors[ i * 3 ] );
                            colorsBuffer.push( faceColors[ i * 3 + 1 ] );
                            colorsBuffer.push( faceColors[ i * 3 + 2 ] );
    
                        }
    
                        if ( materialInfo && materialInfo.mappingType !== 'AllSame' ) {
    
                            materialIndexBuffer.push( materialIndex );
                            materialIndexBuffer.push( materialIndex );
                            materialIndexBuffer.push( materialIndex );
    
                        }
    
                        if ( normalInfo ) {
    
                            normalBuffer.push( faceNormals[ 0 ] );
                            normalBuffer.push( faceNormals[ 1 ] );
                            normalBuffer.push( faceNormals[ 2 ] );
    
                            normalBuffer.push( faceNormals[ ( i - 1 ) * 3 ] );
                            normalBuffer.push( faceNormals[ ( i - 1 ) * 3 + 1 ] );
                            normalBuffer.push( faceNormals[ ( i - 1 ) * 3 + 2 ] );
    
                            normalBuffer.push( faceNormals[ i * 3 ] );
                            normalBuffer.push( faceNormals[ i * 3 + 1 ] );
                            normalBuffer.push( faceNormals[ i * 3 + 2 ] );
    
                        }
    
                        if ( uvInfo ) {
    
                            uvInfo.forEach( function ( uv, j ) {
    
                                if ( uvsBuffer[ j ] === undefined ) uvsBuffer[ j ] = [];
    
                                uvsBuffer[ j ].push( faceUVs[ j ][ 0 ] );
                                uvsBuffer[ j ].push( faceUVs[ j ][ 1 ] );
    
                                uvsBuffer[ j ].push( faceUVs[ j ][ ( i - 1 ) * 2 ] );
                                uvsBuffer[ j ].push( faceUVs[ j ][ ( i - 1 ) * 2 + 1 ] );
    
                                uvsBuffer[ j ].push( faceUVs[ j ][ i * 2 ] );
                                uvsBuffer[ j ].push( faceUVs[ j ][ i * 2 + 1 ] );
    
                            } );
    
                        }
    
                    }
    
                    polygonIndex ++;
                    faceLength = 0;
    
                    // reset arrays for the next face
                    vertexPositionIndexes = [];
                    faceNormals = [];
                    faceColors = [];
                    faceUVs = [];
                    faceWeights = [];
                    faceWeightIndices = [];
    
                }
    
            } );
    
            var geo = new THREE.BufferGeometry();
            geo.name = geometryNode.name;
    
            var positionAttribute = new THREE.Float32BufferAttribute( vertexBuffer, 3 );
    
            preTransform.applyToBufferAttribute( positionAttribute );
    
            geo.addAttribute( 'position', positionAttribute );
    
            if ( colorsBuffer.length > 0 ) {
    
                geo.addAttribute( 'color', new THREE.Float32BufferAttribute( colorsBuffer, 3 ) );
    
            }
    
            if ( skeleton ) {
    
                geo.addAttribute( 'skinIndex', new THREE.Float32BufferAttribute( weightsIndicesBuffer, 4 ) );
    
                geo.addAttribute( 'skinWeight', new THREE.Float32BufferAttribute( vertexWeightsBuffer, 4 ) );
    
                // used later to bind the skeleton to the model
                geo.FBX_Deformer = skeleton;
    
            }
    
            if ( normalBuffer.length > 0 ) {
    
                var normalAttribute = new THREE.Float32BufferAttribute( normalBuffer, 3 );
    
                var normalMatrix = new THREE.Matrix3().getNormalMatrix( preTransform );
                normalMatrix.applyToBufferAttribute( normalAttribute );
    
                geo.addAttribute( 'normal', normalAttribute );
    
            }
    
            uvsBuffer.forEach( function ( uvBuffer, i ) {
    
                // subsequent uv buffers are called 'uv1', 'uv2', ...
                var name = 'uv' + ( i + 1 ).toString();
    
                // the first uv buffer is just called 'uv'
                if ( i === 0 ) {
    
                    name = 'uv';
    
                }
    
                geo.addAttribute( name, new THREE.Float32BufferAttribute( uvsBuffer[ i ], 2 ) );
    
            } );
    
            if ( materialInfo && materialInfo.mappingType !== 'AllSame' ) {
    
                // Convert the material indices of each vertex into rendering groups on the geometry.
                var prevMaterialIndex = materialIndexBuffer[ 0 ];
                var startIndex = 0;
    
                materialIndexBuffer.forEach( function ( currentIndex, i ) {
    
                    if ( currentIndex !== prevMaterialIndex ) {
    
                        geo.addGroup( startIndex, i - startIndex, prevMaterialIndex );
    
                        prevMaterialIndex = currentIndex;
                        startIndex = i;
    
                    }
    
                } );
    
                // the loop above doesn't add the last group, do that here.
                if ( geo.groups.length > 0 ) {
    
                    var lastGroup = geo.groups[ geo.groups.length - 1 ];
                    var lastIndex = lastGroup.start + lastGroup.count;
    
                    if ( lastIndex !== materialIndexBuffer.length ) {
    
                        geo.addGroup( lastIndex, materialIndexBuffer.length - lastIndex, prevMaterialIndex );
    
                    }
    
                }
    
                // case where there are multiple materials but the whole geometry is only
                // using one of them
                if ( geo.groups.length === 0 ) {
    
                    geo.addGroup( 0, materialIndexBuffer.length, materialIndexBuffer[ 0 ] );
    
                }
    
            }
    
            return geo;
    
        }
    
    
        // Parse normal from FBXTree.Objects.Geometry.LayerElementNormal if it exists
        function getNormals( NormalNode ) {
    
            var mappingType = NormalNode.MappingInformationType;
            var referenceType = NormalNode.ReferenceInformationType;
            var buffer = NormalNode.Normals.a;
            var indexBuffer = [];
            if ( referenceType === 'IndexToDirect' ) {
    
                if ( 'NormalIndex' in NormalNode ) {
    
                    indexBuffer = NormalNode.NormalIndex.a;
    
                } else if ( 'NormalsIndex' in NormalNode ) {
    
                    indexBuffer = NormalNode.NormalsIndex.a;
    
                }
    
            }
    
            return {
                dataSize: 3,
                buffer: buffer,
                indices: indexBuffer,
                mappingType: mappingType,
                referenceType: referenceType
            };
    
        }
    
        // Parse UVs from FBXTree.Objects.Geometry.LayerElementUV if it exists
        function getUVs( UVNode ) {
    
            var mappingType = UVNode.MappingInformationType;
            var referenceType = UVNode.ReferenceInformationType;
            var buffer = UVNode.UV.a;
            var indexBuffer = [];
            if ( referenceType === 'IndexToDirect' ) {
    
                indexBuffer = UVNode.UVIndex.a;
    
            }
    
            return {
                dataSize: 2,
                buffer: buffer,
                indices: indexBuffer,
                mappingType: mappingType,
                referenceType: referenceType
            };
    
        }
    
        // Parse Vertex Colors from FBXTree.Objects.Geometry.LayerElementColor if it exists
        function getColors( ColorNode ) {
    
            var mappingType = ColorNode.MappingInformationType;
            var referenceType = ColorNode.ReferenceInformationType;
            var buffer = ColorNode.Colors.a;
            var indexBuffer = [];
            if ( referenceType === 'IndexToDirect' ) {
    
                indexBuffer = ColorNode.ColorIndex.a;
    
            }
    
            return {
                dataSize: 4,
                buffer: buffer,
                indices: indexBuffer,
                mappingType: mappingType,
                referenceType: referenceType
            };
    
        }
    
        // Parse mapping and material data in FBXTree.Objects.Geometry.LayerElementMaterial if it exists
        function getMaterials( MaterialNode ) {
    
            var mappingType = MaterialNode.MappingInformationType;
            var referenceType = MaterialNode.ReferenceInformationType;
    
            if ( mappingType === 'NoMappingInformation' ) {
    
                return {
                    dataSize: 1,
                    buffer: [ 0 ],
                    indices: [ 0 ],
                    mappingType: 'AllSame',
                    referenceType: referenceType
                };
    
            }
    
            var materialIndexBuffer = MaterialNode.Materials.a;
    
            // Since materials are stored as indices, there's a bit of a mismatch between FBX and what
            // we expect.So we create an intermediate buffer that points to the index in the buffer,
            // for conforming with the other functions we've written for other data.
            var materialIndices = [];
    
            for ( var i = 0; i < materialIndexBuffer.length; ++ i ) {
    
                materialIndices.push( i );
    
            }
    
            return {
                dataSize: 1,
                buffer: materialIndexBuffer,
                indices: materialIndices,
                mappingType: mappingType,
                referenceType: referenceType
            };
    
        }
    
        // Functions use the infoObject and given indices to return value array of geometry.
        // Parameters:
        // 	- polygonVertexIndex - Index of vertex in draw order (which index of the index buffer refers to this vertex).
        // 	- polygonIndex - Index of polygon in geometry.
        // 	- vertexIndex - Index of vertex inside vertex buffer (used because some data refers to old index buffer that we don't use anymore).
        // 	- infoObject: can be materialInfo, normalInfo, UVInfo or colorInfo
        // Index type:
        //	- Direct: index is same as polygonVertexIndex
        //	- IndexToDirect: infoObject has it's own set of indices
        var dataArray = [];
    
        var GetData = {
    
            ByPolygonVertex: {
    
                Direct: function ( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {
    
                    var from = ( polygonVertexIndex * infoObject.dataSize );
                    var to = ( polygonVertexIndex * infoObject.dataSize ) + infoObject.dataSize;
    
                    return slice( dataArray, infoObject.buffer, from, to );
    
                },
    
                IndexToDirect: function ( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {
    
                    var index = infoObject.indices[ polygonVertexIndex ];
                    var from = ( index * infoObject.dataSize );
                    var to = ( index * infoObject.dataSize ) + infoObject.dataSize;
    
                    return slice( dataArray, infoObject.buffer, from, to );
    
                }
    
            },
    
            ByPolygon: {
    
                Direct: function ( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {
    
                    var from = polygonIndex * infoObject.dataSize;
                    var to = polygonIndex * infoObject.dataSize + infoObject.dataSize;
    
                    return slice( dataArray, infoObject.buffer, from, to );
    
                },
    
                IndexToDirect: function ( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {
    
                    var index = infoObject.indices[ polygonIndex ];
                    var from = index * infoObject.dataSize;
                    var to = index * infoObject.dataSize + infoObject.dataSize;
    
                    return slice( dataArray, infoObject.buffer, from, to );
    
                }
    
            },
    
            ByVertice: {
    
                Direct: function ( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {
    
                    var from = ( vertexIndex * infoObject.dataSize );
                    var to = ( vertexIndex * infoObject.dataSize ) + infoObject.dataSize;
    
                    return slice( dataArray, infoObject.buffer, from, to );
    
                }
    
            },
    
            AllSame: {
    
                IndexToDirect: function ( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {
    
                    var from = infoObject.indices[ 0 ] * infoObject.dataSize;
                    var to = infoObject.indices[ 0 ] * infoObject.dataSize + infoObject.dataSize;
    
                    return slice( dataArray, infoObject.buffer, from, to );
    
                }
    
            }
    
        };
    
        function getData( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {
    
            return GetData[ infoObject.mappingType ][ infoObject.referenceType ]( polygonVertexIndex, polygonIndex, vertexIndex, infoObject );
    
        }
    
        // Generate a NurbGeometry from a node in FBXTree.Objects.Geometry
        function parseNurbsGeometry( geometryNode ) {
    
            if ( THREE.NURBSCurve === undefined ) {
    
                console.error( 'THREE.FBXLoader: The loader relies on THREE.NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry.' );
                return new THREE.BufferGeometry();
    
            }
    
            var order = parseInt( geometryNode.Order );
    
            if ( isNaN( order ) ) {
    
                console.error( 'THREE.FBXLoader: Invalid Order %s given for geometry ID: %s', geometryNode.Order, geometryNode.id );
                return new THREE.BufferGeometry();
    
            }
    
            var degree = order - 1;
    
            var knots = geometryNode.KnotVector.a;
            var controlPoints = [];
            var pointsValues = geometryNode.Points.a;
    
            for ( var i = 0, l = pointsValues.length; i < l; i += 4 ) {
    
                controlPoints.push( new THREE.Vector4().fromArray( pointsValues, i ) );
    
            }
    
            var startKnot, endKnot;
    
            if ( geometryNode.Form === 'Closed' ) {
    
                controlPoints.push( controlPoints[ 0 ] );
    
            } else if ( geometryNode.Form === 'Periodic' ) {
    
                startKnot = degree;
                endKnot = knots.length - 1 - startKnot;
    
                for ( var i = 0; i < degree; ++ i ) {
    
                    controlPoints.push( controlPoints[ i ] );
    
                }
    
            }
    
            var curve = new THREE.NURBSCurve( degree, knots, controlPoints, startKnot, endKnot );
            var vertices = curve.getPoints( controlPoints.length * 7 );
    
            var positions = new Float32Array( vertices.length * 3 );
    
            vertices.forEach( function ( vertex, i ) {
    
                vertex.toArray( positions, i * 3 );
    
            } );
    
            var geometry = new THREE.BufferGeometry();
            geometry.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );
    
            return geometry;
    
        }
    
        // create the main THREE.Group() to be returned by the loader
        function parseScene( FBXTree, connections, skeletons, geometryMap, materialMap ) {
    
            var sceneGraph = new THREE.Group();
    
            var modelMap = parseModels( FBXTree, skeletons, geometryMap, materialMap, connections );
    
            var modelNodes = FBXTree.Objects.Model;
    
            modelMap.forEach( function ( model ) {
    
                var modelNode = modelNodes[ model.ID ];
                setLookAtProperties( FBXTree, model, modelNode, connections, sceneGraph );
    
                var parentConnections = connections.get( model.ID ).parents;
    
                parentConnections.forEach( function ( connection ) {
    
                    var parent = modelMap.get( connection.ID );
                    if ( parent !== undefined ) parent.add( model );
    
                } );
    
                if ( model.parent === null ) {
    
                    sceneGraph.add( model );
    
                }
    
    
            } );
    
            bindSkeleton( FBXTree, skeletons, geometryMap, modelMap, connections );
    
            addAnimations( FBXTree, connections, sceneGraph );
    
            createAmbientLight( FBXTree, sceneGraph );
    
            return sceneGraph;
    
        }
    
        // parse nodes in FBXTree.Objects.Model
        function parseModels( FBXTree, skeletons, geometryMap, materialMap, connections ) {
    
            var modelMap = new Map();
            var modelNodes = FBXTree.Objects.Model;
    
            for ( var nodeID in modelNodes ) {
    
                var id = parseInt( nodeID );
                var node = modelNodes[ nodeID ];
                var relationships = connections.get( id );
    
                var model = buildSkeleton( relationships, skeletons, id, node.attrName );
    
                if ( ! model ) {
    
                    switch ( node.attrType ) {
    
                        case 'Camera':
                            model = createCamera( FBXTree, relationships );
                            break;
                        case 'Light':
                            model = createLight( FBXTree, relationships );
                            break;
                        case 'Mesh':
                            model = createMesh( FBXTree, relationships, geometryMap, materialMap );
                            break;
                        case 'NurbsCurve':
                            model = createCurve( relationships, geometryMap );
                            break;
                        case 'LimbNode': // usually associated with a Bone, however if a Bone was not created we'll make a Group instead
                        case 'Null':
                        default:
                            model = new THREE.Group();
                            break;
    
                    }
    
                    model.name = THREE.PropertyBinding.sanitizeNodeName( node.attrName );
                    model.ID = id;
    
                }
    
                setModelTransforms( FBXTree, model, node );
                modelMap.set( id, model );
    
            }
    
            return modelMap;
    
        }
    
        function buildSkeleton( relationships, skeletons, id, name ) {
    
            var bone = null;
    
            relationships.parents.forEach( function ( parent ) {
    
                for ( var ID in skeletons ) {
    
                    var skeleton = skeletons[ ID ];
    
                    skeleton.rawBones.forEach( function ( rawBone, i ) {
    
                        if ( rawBone.ID === parent.ID ) {
    
                            var subBone = bone;
                            bone = new THREE.Bone();
                            bone.matrixWorld.copy( rawBone.transformLink );
    
                            // set name and id here - otherwise in cases where "subBone" is created it will not have a name / id
                            bone.name = THREE.PropertyBinding.sanitizeNodeName( name );
                            bone.ID = id;
    
                            skeleton.bones[ i ] = bone;
    
                            // In cases where a bone is shared between multiple meshes
                            // duplicate the bone here and and it as a child of the first bone
                            if ( subBone !== null ) {
    
                                bone.add( subBone );
    
                            }
    
                        }
    
                    } );
    
                }
    
            } );
    
            return bone;
    
        }
    
        // create a THREE.PerspectiveCamera or THREE.OrthographicCamera
        function createCamera( FBXTree, relationships ) {
    
            var model;
            var cameraAttribute;
    
            relationships.children.forEach( function ( child ) {
    
                var attr = FBXTree.Objects.NodeAttribute[ child.ID ];
    
                if ( attr !== undefined ) {
    
                    cameraAttribute = attr;
    
                }
    
            } );
    
            if ( cameraAttribute === undefined ) {
    
                model = new THREE.Object3D();
    
            } else {
    
                var type = 0;
                if ( cameraAttribute.CameraProjectionType !== undefined && cameraAttribute.CameraProjectionType.value === 1 ) {
    
                    type = 1;
    
                }
    
                var nearClippingPlane = 1;
                if ( cameraAttribute.NearPlane !== undefined ) {
    
                    nearClippingPlane = cameraAttribute.NearPlane.value / 1000;
    
                }
    
                var farClippingPlane = 1000;
                if ( cameraAttribute.FarPlane !== undefined ) {
    
                    farClippingPlane = cameraAttribute.FarPlane.value / 1000;
    
                }
    
    
                var width = window.innerWidth;
                var height = window.innerHeight;
    
                if ( cameraAttribute.AspectWidth !== undefined && cameraAttribute.AspectHeight !== undefined ) {
    
                    width = cameraAttribute.AspectWidth.value;
                    height = cameraAttribute.AspectHeight.value;
    
                }
    
                var aspect = width / height;
    
                var fov = 45;
                if ( cameraAttribute.FieldOfView !== undefined ) {
    
                    fov = cameraAttribute.FieldOfView.value;
    
                }
    
                var focalLength = cameraAttribute.FocalLength ? cameraAttribute.FocalLength.value : null;
    
                switch ( type ) {
    
                    case 0: // Perspective
                        model = new THREE.PerspectiveCamera( fov, aspect, nearClippingPlane, farClippingPlane );
                        if ( focalLength !== null ) model.setFocalLength( focalLength );
                        break;
    
                    case 1: // Orthographic
                        model = new THREE.OrthographicCamera( - width / 2, width / 2, height / 2, - height / 2, nearClippingPlane, farClippingPlane );
                        break;
    
                    default:
                        console.warn( 'THREE.FBXLoader: Unknown camera type ' + type + '.' );
                        model = new THREE.Object3D();
                        break;
    
                }
    
            }
    
            return model;
    
        }
    
        // Create a THREE.DirectionalLight, THREE.PointLight or THREE.SpotLight
        function createLight( FBXTree, relationships ) {
    
            var model;
            var lightAttribute;
    
            relationships.children.forEach( function ( child ) {
    
                var attr = FBXTree.Objects.NodeAttribute[ child.ID ];
    
                if ( attr !== undefined ) {
    
                    lightAttribute = attr;
    
                }
    
            } );
    
            if ( lightAttribute === undefined ) {
    
                model = new THREE.Object3D();
    
            } else {
    
                var type;
    
                // LightType can be undefined for Point lights
                if ( lightAttribute.LightType === undefined ) {
    
                    type = 0;
    
                } else {
    
                    type = lightAttribute.LightType.value;
    
                }
    
                var color = 0xffffff;
    
                if ( lightAttribute.Color !== undefined ) {
    
                    color = new THREE.Color().fromArray( lightAttribute.Color.value );
    
                }
    
                var intensity = ( lightAttribute.Intensity === undefined ) ? 1 : lightAttribute.Intensity.value / 100;
    
                // light disabled
                if ( lightAttribute.CastLightOnObject !== undefined && lightAttribute.CastLightOnObject.value === 0 ) {
    
                    intensity = 0;
    
                }
    
                var distance = 0;
                if ( lightAttribute.FarAttenuationEnd !== undefined ) {
    
                    if ( lightAttribute.EnableFarAttenuation !== undefined && lightAttribute.EnableFarAttenuation.value === 0 ) {
    
                        distance = 0;
    
                    } else {
    
                        distance = lightAttribute.FarAttenuationEnd.value / 1000;
    
                    }
    
                }
    
                // TODO: could this be calculated linearly from FarAttenuationStart to FarAttenuationEnd?
                var decay = 1;
    
                switch ( type ) {
    
                    case 0: // Point
                        model = new THREE.PointLight( color, intensity, distance, decay );
                        break;
    
                    case 1: // Directional
                        model = new THREE.DirectionalLight( color, intensity );
                        break;
    
                    case 2: // Spot
                        var angle = Math.PI / 3;
    
                        if ( lightAttribute.InnerAngle !== undefined ) {
    
                            angle = THREE.Math.degToRad( lightAttribute.InnerAngle.value );
    
                        }
    
                        var penumbra = 0;
                        if ( lightAttribute.OuterAngle !== undefined ) {
    
                            // TODO: this is not correct - FBX calculates outer and inner angle in degrees
                            // with OuterAngle > InnerAngle && OuterAngle <= Math.PI
                            // while three.js uses a penumbra between (0, 1) to attenuate the inner angle
                            penumbra = THREE.Math.degToRad( lightAttribute.OuterAngle.value );
                            penumbra = Math.max( penumbra, 1 );
    
                        }
    
                        model = new THREE.SpotLight( color, intensity, distance, angle, penumbra, decay );
                        break;
    
                    default:
                        console.warn( 'THREE.FBXLoader: Unknown light type ' + lightAttribute.LightType.value + ', defaulting to a THREE.PointLight.' );
                        model = new THREE.PointLight( color, intensity );
                        break;
    
                }
    
                if ( lightAttribute.CastShadows !== undefined && lightAttribute.CastShadows.value === 1 ) {
    
                    model.castShadow = true;
    
                }
    
            }
    
            return model;
    
        }
    
        function createMesh( FBXTree, relationships, geometryMap, materialMap ) {
    
            var model;
            var geometry = null;
            var material = null;
            var materials = [];
    
            // get geometry and materials(s) from connections
            relationships.children.forEach( function ( child ) {
    
                if ( geometryMap.has( child.ID ) ) {
    
                    geometry = geometryMap.get( child.ID );
    
                }
    
                if ( materialMap.has( child.ID ) ) {
    
                    materials.push( materialMap.get( child.ID ) );
    
                }
    
            } );
    
            if ( materials.length > 1 ) {
    
                material = materials;
    
            } else if ( materials.length > 0 ) {
    
                material = materials[ 0 ];
    
            } else {
    
                material = new THREE.MeshPhongMaterial( { color: 0xcccccc } );
                materials.push( material );
    
            }
    
            if ( 'color' in geometry.attributes ) {
    
                materials.forEach( function ( material ) {
    
                    material.vertexColors = THREE.VertexColors;
    
                } );
    
            }
    
            if ( geometry.FBX_Deformer ) {
    
                materials.forEach( function ( material ) {
    
                    material.skinning = true;
    
                } );
    
                model = new THREE.SkinnedMesh( geometry, material );
    
            } else {
    
                model = new THREE.Mesh( geometry, material );
    
            }
    
            return model;
    
        }
    
        function createCurve( relationships, geometryMap ) {
    
            var geometry = relationships.children.reduce( function ( geo, child ) {
    
                if ( geometryMap.has( child.ID ) ) geo = geometryMap.get( child.ID );
    
                return geo;
    
            }, null );
    
            // FBX does not list materials for Nurbs lines, so we'll just put our own in here.
            var material = new THREE.LineBasicMaterial( { color: 0x3300ff, linewidth: 1 } );
            return new THREE.Line( geometry, material );
    
        }
    
        // Parse ambient color in FBXTree.GlobalSettings - if it's not set to black (default), create an ambient light
        function createAmbientLight( FBXTree, sceneGraph ) {
    
            if ( 'GlobalSettings' in FBXTree && 'AmbientColor' in FBXTree.GlobalSettings ) {
    
                var ambientColor = FBXTree.GlobalSettings.AmbientColor.value;
                var r = ambientColor[ 0 ];
                var g = ambientColor[ 1 ];
                var b = ambientColor[ 2 ];
    
                if ( r !== 0 || g !== 0 || b !== 0 ) {
    
                    var color = new THREE.Color( r, g, b );
                    sceneGraph.add( new THREE.AmbientLight( color, 1 ) );
    
                }
    
            }
    
        }
    
        function setLookAtProperties( FBXTree, model, modelNode, connections, sceneGraph ) {
    
            if ( 'LookAtProperty' in modelNode ) {
    
                var children = connections.get( model.ID ).children;
    
                children.forEach( function ( child ) {
    
                    if ( child.relationship === 'LookAtProperty' ) {
    
                        var lookAtTarget = FBXTree.Objects.Model[ child.ID ];
    
                        if ( 'Lcl_Translation' in lookAtTarget ) {
    
                            var pos = lookAtTarget.Lcl_Translation.value;
    
                            // DirectionalLight, SpotLight
                            if ( model.target !== undefined ) {
    
                                model.target.position.fromArray( pos );
                                sceneGraph.add( model.target );
    
                            } else { // Cameras and other Object3Ds
    
                                model.lookAt( new THREE.Vector3().fromArray( pos ) );
    
                            }
    
                        }
    
                    }
    
                } );
    
            }
    
        }
    
        // parse the model node for transform details and apply them to the model
        function setModelTransforms( FBXTree, model, modelNode ) {
    
            // http://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_class_fbx_euler_html
            if ( 'RotationOrder' in modelNode ) {
    
                var enums = [
                    'XYZ', // default
                    'XZY',
                    'YZX',
                    'ZXY',
                    'YXZ',
                    'ZYX',
                    'SphericXYZ',
                ];
    
                var value = parseInt( modelNode.RotationOrder.value, 10 );
    
                if ( value > 0 && value < 6 ) {
    
                    // model.rotation.order = enums[ value ];
    
                    // Note: Euler order other than XYZ is currently not supported, so just display a warning for now
                    console.warn( 'THREE.FBXLoader: unsupported Euler Order: %s. Currently only XYZ order is supported. Animations and rotations may be incorrect.', enums[ value ] );
    
                } else if ( value === 6 ) {
    
                    console.warn( 'THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect.' );
    
                }
    
            }
    
            if ( 'Lcl_Translation' in modelNode ) {
    
                model.position.fromArray( modelNode.Lcl_Translation.value );
    
            }
    
            if ( 'Lcl_Rotation' in modelNode ) {
    
                var rotation = modelNode.Lcl_Rotation.value.map( THREE.Math.degToRad );
                rotation.push( 'ZYX' );
                model.rotation.fromArray( rotation );
    
            }
    
            if ( 'Lcl_Scaling' in modelNode ) {
    
                model.scale.fromArray( modelNode.Lcl_Scaling.value );
    
            }
    
            if ( 'PreRotation' in modelNode ) {
    
                var array = modelNode.PreRotation.value.map( THREE.Math.degToRad );
                array[ 3 ] = 'ZYX';
    
                var preRotations = new THREE.Euler().fromArray( array );
    
                preRotations = new THREE.Quaternion().setFromEuler( preRotations );
                var currentRotation = new THREE.Quaternion().setFromEuler( model.rotation );
                preRotations.multiply( currentRotation );
                model.rotation.setFromQuaternion( preRotations, 'ZYX' );
    
            }
    
        }
    
        function bindSkeleton( FBXTree, skeletons, geometryMap, modelMap, connections ) {
    
            var bindMatrices = parsePoseNodes( FBXTree );
    
            for ( var ID in skeletons ) {
    
                var skeleton = skeletons[ ID ];
    
                var parents = connections.get( parseInt( skeleton.ID ) ).parents;
    
                parents.forEach( function ( parent ) {
    
                    if ( geometryMap.has( parent.ID ) ) {
    
                        var geoID = parent.ID;
                        var geoRelationships = connections.get( geoID );
    
                        geoRelationships.parents.forEach( function ( geoConnParent ) {
    
                            if ( modelMap.has( geoConnParent.ID ) ) {
    
                                var model = modelMap.get( geoConnParent.ID );
    
                                model.bind( new THREE.Skeleton( skeleton.bones ), bindMatrices[ geoConnParent.ID ] );
    
                            }
    
                        } );
    
                    }
    
                } );
    
            }
    
        }
    
        function parsePoseNodes( FBXTree ) {
    
            var bindMatrices = {};
    
            if ( 'Pose' in FBXTree.Objects ) {
    
                var BindPoseNode = FBXTree.Objects.Pose;
    
                for ( var nodeID in BindPoseNode ) {
    
                    if ( BindPoseNode[ nodeID ].attrType === 'BindPose' ) {
    
                        var poseNodes = BindPoseNode[ nodeID ].PoseNode;
    
                        if ( Array.isArray( poseNodes ) ) {
    
                            poseNodes.forEach( function ( poseNode ) {
    
                                bindMatrices[ poseNode.Node ] = new THREE.Matrix4().fromArray( poseNode.Matrix.a );
    
                            } );
    
                        } else {
    
                            bindMatrices[ poseNodes.Node ] = new THREE.Matrix4().fromArray( poseNodes.Matrix.a );
    
                        }
    
                    }
    
                }
    
            }
    
            return bindMatrices;
    
        }
    
        function parseAnimations( FBXTree, connections ) {
    
            // since the actual transformation data is stored in FBXTree.Objects.AnimationCurve,
            // if this is undefined we can safely assume there are no animations
            if ( FBXTree.Objects.AnimationCurve === undefined ) return undefined;
    
            var curveNodesMap = parseAnimationCurveNodes( FBXTree );
    
            parseAnimationCurves( FBXTree, connections, curveNodesMap );
    
            var layersMap = parseAnimationLayers( FBXTree, connections, curveNodesMap );
            var rawClips = parseAnimStacks( FBXTree, connections, layersMap );
    
            return rawClips;
    
        }
    
        // parse nodes in FBXTree.Objects.AnimationCurveNode
        // each AnimationCurveNode holds data for an animation transform for a model (e.g. left arm rotation )
        // and is referenced by an AnimationLayer
        function parseAnimationCurveNodes( FBXTree ) {
    
            var rawCurveNodes = FBXTree.Objects.AnimationCurveNode;
    
            var curveNodesMap = new Map();
    
            for ( var nodeID in rawCurveNodes ) {
    
                var rawCurveNode = rawCurveNodes[ nodeID ];
    
                if ( rawCurveNode.attrName.match( /S|R|T/ ) !== null ) {
    
                    var curveNode = {
    
                        id: rawCurveNode.id,
                        attr: rawCurveNode.attrName,
                        curves: {},
    
                    };
    
                    curveNodesMap.set( curveNode.id, curveNode );
    
                }
    
            }
    
            return curveNodesMap;
    
        }
    
        // parse nodes in FBXTree.Objects.AnimationCurve and connect them up to
        // previously parsed AnimationCurveNodes. Each AnimationCurve holds data for a single animated
        // axis ( e.g. times and values of x rotation)
        function parseAnimationCurves( FBXTree, connections, curveNodesMap ) {
    
            var rawCurves = FBXTree.Objects.AnimationCurve;
    
            for ( var nodeID in rawCurves ) {
    
                var animationCurve = {
    
                    id: rawCurves[ nodeID ].id,
                    times: rawCurves[ nodeID ].KeyTime.a.map( convertFBXTimeToSeconds ),
                    values: rawCurves[ nodeID ].KeyValueFloat.a,
    
                };
    
                var relationships = connections.get( animationCurve.id );
    
                if ( relationships !== undefined ) {
    
                    var animationCurveID = relationships.parents[ 0 ].ID;
                    var animationCurveRelationship = relationships.parents[ 0 ].relationship;
                    var axis = '';
    
                    if ( animationCurveRelationship.match( /X/ ) ) {
    
                        axis = 'x';
    
                    } else if ( animationCurveRelationship.match( /Y/ ) ) {
    
                        axis = 'y';
    
                    } else if ( animationCurveRelationship.match( /Z/ ) ) {
    
                        axis = 'z';
    
                    } else {
    
                        continue;
    
                    }
    
                    curveNodesMap.get( animationCurveID ).curves[ axis ] = animationCurve;
    
                }
    
            }
    
        }
    
        // parse nodes in FBXTree.Objects.AnimationLayer. Each layers holds references
        // to various AnimationCurveNodes and is referenced by an AnimationStack node
        // note: theoretically a stack can multiple layers, however in practice there always seems to be one per stack
        function parseAnimationLayers( FBXTree, connections, curveNodesMap ) {
    
            var rawLayers = FBXTree.Objects.AnimationLayer;
    
            var layersMap = new Map();
    
            for ( var nodeID in rawLayers ) {
    
                var layerCurveNodes = [];
    
                var connection = connections.get( parseInt( nodeID ) );
    
                if ( connection !== undefined ) {
    
                    // all the animationCurveNodes used in the layer
                    var children = connection.children;
    
                    children.forEach( function ( child, i ) {
    
                        if ( curveNodesMap.has( child.ID ) ) {
    
                            var curveNode = curveNodesMap.get( child.ID );
    
                            // check that the curves are defined for at least one axis, otherwise ignore the curveNode
                            if ( curveNode.curves.x !== undefined || curveNode.curves.y !== undefined || curveNode.curves.z !== undefined ) {
    
                                if ( layerCurveNodes[ i ] === undefined ) {
    
                                    var modelID;
    
                                    connections.get( child.ID ).parents.forEach( function ( parent ) {
    
                                        if ( parent.relationship !== undefined ) modelID = parent.ID;
    
                                    } );
    
                                    var rawModel = FBXTree.Objects.Model[ modelID.toString() ];
    
                                    var node = {
    
                                        modelName: THREE.PropertyBinding.sanitizeNodeName( rawModel.attrName ),
                                        initialPosition: [ 0, 0, 0 ],
                                        initialRotation: [ 0, 0, 0 ],
                                        initialScale: [ 1, 1, 1 ],
    
                                    };
    
                                    if ( 'Lcl_Translation' in rawModel ) node.initialPosition = rawModel.Lcl_Translation.value;
    
                                    if ( 'Lcl_Rotation' in rawModel ) node.initialRotation = rawModel.Lcl_Rotation.value;
    
                                    if ( 'Lcl_Scaling' in rawModel ) node.initialScale = rawModel.Lcl_Scaling.value;
    
                                    // if the animated model is pre rotated, we'll have to apply the pre rotations to every
                                    // animation value as well
                                    if ( 'PreRotation' in rawModel ) node.preRotations = rawModel.PreRotation.value;
    
                                    layerCurveNodes[ i ] = node;
    
                                }
    
                                layerCurveNodes[ i ][ curveNode.attr ] = curveNode;
    
                            }
    
    
    
                        }
    
                    } );
    
                    layersMap.set( parseInt( nodeID ), layerCurveNodes );
    
                }
    
            }
    
            return layersMap;
    
        }
    
        // parse nodes in FBXTree.Objects.AnimationStack. These are the top level node in the animation
        // hierarchy. Each Stack node will be used to create a THREE.AnimationClip
        function parseAnimStacks( FBXTree, connections, layersMap ) {
    
            var rawStacks = FBXTree.Objects.AnimationStack;
    
            // connect the stacks (clips) up to the layers
            var rawClips = {};
    
            for ( var nodeID in rawStacks ) {
    
                var children = connections.get( parseInt( nodeID ) ).children;
    
                if ( children.length > 1 ) {
    
                    // it seems like stacks will always be associated with a single layer. But just in case there are files
                    // where there are multiple layers per stack, we'll display a warning
                    console.warn( 'THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.' );
    
                }
    
                var layer = layersMap.get( children[ 0 ].ID );
    
                rawClips[ nodeID ] = {
    
                    name: rawStacks[ nodeID ].attrName,
                    layer: layer,
    
                };
    
            }
    
            return rawClips;
    
        }
    
        // take raw animation data from parseAnimations and connect it up to the loaded models
        function addAnimations( FBXTree, connections, sceneGraph ) {
    
            sceneGraph.animations = [];
    
            var rawClips = parseAnimations( FBXTree, connections );
    
            if ( rawClips === undefined ) return;
    
    
            for ( var key in rawClips ) {
    
                var rawClip = rawClips[ key ];
    
                var clip = addClip( rawClip );
    
                sceneGraph.animations.push( clip );
    
            }
    
        }
    
        function addClip( rawClip ) {
    
            var tracks = [];
    
            rawClip.layer.forEach( function ( rawTracks ) {
    
                tracks = tracks.concat( generateTracks( rawTracks ) );
    
            } );
    
            return new THREE.AnimationClip( rawClip.name, - 1, tracks );
    
        }
    
        function generateTracks( rawTracks ) {
    
            var tracks = [];
    
            if ( rawTracks.T !== undefined && Object.keys( rawTracks.T.curves ).length > 0 ) {
    
                var positionTrack = generateVectorTrack( rawTracks.modelName, rawTracks.T.curves, rawTracks.initialPosition, 'position' );
                if ( positionTrack !== undefined ) tracks.push( positionTrack );
    
            }
    
            if ( rawTracks.R !== undefined && Object.keys( rawTracks.R.curves ).length > 0 ) {
    
                var rotationTrack = generateRotationTrack( rawTracks.modelName, rawTracks.R.curves, rawTracks.initialRotation, rawTracks.preRotations );
                if ( rotationTrack !== undefined ) tracks.push( rotationTrack );
    
            }
    
            if ( rawTracks.S !== undefined && Object.keys( rawTracks.S.curves ).length > 0 ) {
    
                var scaleTrack = generateVectorTrack( rawTracks.modelName, rawTracks.S.curves, rawTracks.initialScale, 'scale' );
                if ( scaleTrack !== undefined ) tracks.push( scaleTrack );
    
            }
    
            return tracks;
    
        }
    
        function generateVectorTrack( modelName, curves, initialValue, type ) {
    
            var times = getTimesForAllAxes( curves );
            var values = getKeyframeTrackValues( times, curves, initialValue );
    
            return new THREE.VectorKeyframeTrack( modelName + '.' + type, times, values );
    
        }
    
        function generateRotationTrack( modelName, curves, initialValue, preRotations ) {
    
            if ( curves.x !== undefined ) curves.x.values = curves.x.values.map( THREE.Math.degToRad );
            if ( curves.y !== undefined ) curves.y.values = curves.y.values.map( THREE.Math.degToRad );
            if ( curves.z !== undefined ) curves.z.values = curves.z.values.map( THREE.Math.degToRad );
    
            var times = getTimesForAllAxes( curves );
            var values = getKeyframeTrackValues( times, curves, initialValue );
    
            if ( preRotations !== undefined ) {
    
                preRotations = preRotations.map( THREE.Math.degToRad );
                preRotations.push( 'ZYX' );
    
                preRotations = new THREE.Euler().fromArray( preRotations );
                preRotations = new THREE.Quaternion().setFromEuler( preRotations );
    
            }
    
            var quaternion = new THREE.Quaternion();
            var euler = new THREE.Euler();
    
            var quaternionValues = [];
    
            for ( var i = 0; i < values.length; i += 3 ) {
    
                euler.set( values[ i ], values[ i + 1 ], values[ i + 2 ], 'ZYX' );
    
                quaternion.setFromEuler( euler );
    
                if ( preRotations !== undefined )quaternion.premultiply( preRotations );
    
                quaternion.toArray( quaternionValues, ( i / 3 ) * 4 );
    
            }
    
            return new THREE.QuaternionKeyframeTrack( modelName + '.quaternion', times, quaternionValues );
    
        }
    
        function getKeyframeTrackValues( times, curves, initialValue ) {
    
            var prevValue = initialValue;
    
            var values = [];
    
            var xIndex = - 1;
            var yIndex = - 1;
            var zIndex = - 1;
    
            times.forEach( function ( time ) {
    
                if ( curves.x ) xIndex = curves.x.times.indexOf( time );
                if ( curves.y ) yIndex = curves.y.times.indexOf( time );
                if ( curves.z ) zIndex = curves.z.times.indexOf( time );
    
                // if there is an x value defined for this frame, use that
                if ( xIndex !== - 1 ) {
    
                    var xValue = curves.x.values[ xIndex ];
                    values.push( xValue );
                    prevValue[ 0 ] = xValue;
    
                } else {
    
                    // otherwise use the x value from the previous frame
                    values.push( prevValue[ 0 ] );
    
                }
    
                if ( yIndex !== - 1 ) {
    
                    var yValue = curves.y.values[ yIndex ];
                    values.push( yValue );
                    prevValue[ 1 ] = yValue;
    
                } else {
    
                    values.push( prevValue[ 1 ] );
    
                }
    
                if ( zIndex !== - 1 ) {
    
                    var zValue = curves.z.values[ zIndex ];
                    values.push( zValue );
                    prevValue[ 2 ] = zValue;
    
                } else {
    
                    values.push( prevValue[ 2 ] );
    
                }
    
            } );
    
            return values;
    
        }
    
        // For all animated objects, times are defined separately for each axis
        // Here we'll combine the times into one sorted array without duplicates
        function getTimesForAllAxes( curves ) {
    
            var times = [];
    
            // first join together the times for each axis, if defined
            if ( curves.x !== undefined ) times = times.concat( curves.x.times );
            if ( curves.y !== undefined ) times = times.concat( curves.y.times );
            if ( curves.z !== undefined ) times = times.concat( curves.z.times );
    
            // then sort them and remove duplicates
            times = times.sort( function ( a, b ) {
    
                return a - b;
    
            } ).filter( function ( elem, index, array ) {
    
                return array.indexOf( elem ) == index;
    
            } );
    
            return times;
    
        }
    
        // parse an FBX file in ASCII format
        function TextParser() {}
    
        Object.assign( TextParser.prototype, {
    
            getPrevNode: function () {
    
                return this.nodeStack[ this.currentIndent - 2 ];
    
            },
    
            getCurrentNode: function () {
    
                return this.nodeStack[ this.currentIndent - 1 ];
    
            },
    
            getCurrentProp: function () {
    
                return this.currentProp;
    
            },
    
            pushStack: function ( node ) {
    
                this.nodeStack.push( node );
                this.currentIndent += 1;
    
            },
    
            popStack: function () {
    
                this.nodeStack.pop();
                this.currentIndent -= 1;
    
            },
    
            setCurrentProp: function ( val, name ) {
    
                this.currentProp = val;
                this.currentPropName = name;
    
            },
    
            parse: function ( text ) {
    
                this.currentIndent = 0;
                this.allNodes = new FBXTree();
                this.nodeStack = [];
                this.currentProp = [];
                this.currentPropName = '';
    
                var self = this;
    
                var split = text.split( '\n' );
    
                split.forEach( function ( line, i ) {
    
                    var matchComment = line.match( /^[\s\t]*;/ );
                    var matchEmpty = line.match( /^[\s\t]*$/ );
    
                    if ( matchComment || matchEmpty ) return;
    
                    var matchBeginning = line.match( '^\\t{' + self.currentIndent + '}(\\w+):(.*){', '' );
                    var matchProperty = line.match( '^\\t{' + ( self.currentIndent ) + '}(\\w+):[\\s\\t\\r\\n](.*)' );
                    var matchEnd = line.match( '^\\t{' + ( self.currentIndent - 1 ) + '}}' );
    
                    if ( matchBeginning ) {
    
                        self.parseNodeBegin( line, matchBeginning );
    
                    } else if ( matchProperty ) {
    
                        self.parseNodeProperty( line, matchProperty, split[ ++ i ] );
    
                    } else if ( matchEnd ) {
    
                        self.popStack();
    
                    } else if ( line.match( /^[^\s\t}]/ ) ) {
    
                        // large arrays are split over multiple lines terminated with a ',' character
                        // if this is encountered the line needs to be joined to the previous line
                        self.parseNodePropertyContinued( line );
    
                    }
    
                } );
    
                return this.allNodes;
    
            },
    
            parseNodeBegin: function ( line, property ) {
    
                var nodeName = property[ 1 ].trim().replace( /^"/, '' ).replace( /"$/, '' );
    
                var nodeAttrs = property[ 2 ].split( ',' ).map( function ( attr ) {
    
                    return attr.trim().replace( /^"/, '' ).replace( /"$/, '' );
    
                } );
    
                var node = { name: nodeName };
                var attrs = this.parseNodeAttr( nodeAttrs );
    
                var currentNode = this.getCurrentNode();
    
                // a top node
                if ( this.currentIndent === 0 ) {
    
                    this.allNodes.add( nodeName, node );
    
                } else { // a subnode
    
                    // if the subnode already exists, append it
                    if ( nodeName in currentNode ) {
    
                    // special case Pose needs PoseNodes as an array
                        if ( nodeName === 'PoseNode' ) {
    
                            currentNode.PoseNode.push( node );
    
                        } else if ( currentNode[ nodeName ].id !== undefined ) {
    
                            currentNode[ nodeName ] = {};
                            currentNode[ nodeName ][ currentNode[ nodeName ].id ] = currentNode[ nodeName ];
    
                        }
    
                        if ( attrs.id !== '' ) currentNode[ nodeName ][ attrs.id ] = node;
    
                    } else if ( typeof attrs.id === 'number' ) {
    
                        currentNode[ nodeName ] = {};
                        currentNode[ nodeName ][ attrs.id ] = node;
    
                    } else if ( nodeName !== 'Properties70' ) {
    
                        if ( nodeName === 'PoseNode' )	currentNode[ nodeName ] = [ node ];
                        else currentNode[ nodeName ] = node;
    
                    }
    
                }
    
                if ( typeof attrs.id === 'number' ) node.id = attrs.id;
                if ( attrs.name !== '' ) node.attrName = attrs.name;
                if ( attrs.type !== '' ) node.attrType = attrs.type;
    
                this.pushStack( node );
    
            },
    
            parseNodeAttr: function ( attrs ) {
    
                var id = attrs[ 0 ];
    
                if ( attrs[ 0 ] !== '' ) {
    
                    id = parseInt( attrs[ 0 ] );
    
                    if ( isNaN( id ) ) {
    
                        id = attrs[ 0 ];
    
                    }
    
                }
    
                var name = '', type = '';
    
                if ( attrs.length > 1 ) {
    
                    name = attrs[ 1 ].replace( /^(\w+)::/, '' );
                    type = attrs[ 2 ];
    
                }
    
                return { id: id, name: name, type: type };
    
            },
    
            parseNodeProperty: function ( line, property, contentLine ) {
    
                var propName = property[ 1 ].replace( /^"/, '' ).replace( /"$/, '' ).trim();
                var propValue = property[ 2 ].replace( /^"/, '' ).replace( /"$/, '' ).trim();
    
                // for special case: base64 image data follows "Content: ," line
                //	Content: ,
                //	 "/9j/4RDaRXhpZgAATU0A..."
                if ( propName === 'Content' && propValue === ',' ) {
    
                    propValue = contentLine.replace( /"/g, '' ).replace( /,$/, '' ).trim();
    
                }
    
                var currentNode = this.getCurrentNode();
                var parentName = currentNode.name;
    
                if ( parentName === 'Properties70' ) {
    
                    this.parseNodeSpecialProperty( line, propName, propValue );
                    return;
    
                }
    
                // Connections
                if ( propName === 'C' ) {
    
                    var connProps = propValue.split( ',' ).slice( 1 );
                    var from = parseInt( connProps[ 0 ] );
                    var to = parseInt( connProps[ 1 ] );
    
                    var rest = propValue.split( ',' ).slice( 3 );
    
                    rest = rest.map( function ( elem ) {
    
                        return elem.trim().replace( /^"/, '' );
    
                    } );
    
                    propName = 'connections';
                    propValue = [ from, to ];
                    append( propValue, rest );
    
                    if ( currentNode[ propName ] === undefined ) {
    
                        currentNode[ propName ] = [];
    
                    }
    
                }
    
                // Node
                if ( propName === 'Node' ) currentNode.id = propValue;
    
                // connections
                if ( propName in currentNode && Array.isArray( currentNode[ propName ] ) ) {
    
                    currentNode[ propName ].push( propValue );
    
                } else {
    
                    if ( propName !== 'a' ) currentNode[ propName ] = propValue;
                    else currentNode.a = propValue;
    
                }
    
                this.setCurrentProp( currentNode, propName );
    
                // convert string to array, unless it ends in ',' in which case more will be added to it
                if ( propName === 'a' && propValue.slice( - 1 ) !== ',' ) {
    
                    currentNode.a = parseNumberArray( propValue );
    
                }
    
            },
    
            parseNodePropertyContinued: function ( line ) {
    
                var currentNode = this.getCurrentNode();
    
                currentNode.a += line;
    
                // if the line doesn't end in ',' we have reached the end of the property value
                // so convert the string to an array
                if ( line.slice( - 1 ) !== ',' ) {
    
                    currentNode.a = parseNumberArray( currentNode.a );
    
                }
    
            },
    
            // parse "Property70"
            parseNodeSpecialProperty: function ( line, propName, propValue ) {
    
                // split this
                // P: "Lcl Scaling", "Lcl Scaling", "", "A",1,1,1
                // into array like below
                // ["Lcl Scaling", "Lcl Scaling", "", "A", "1,1,1" ]
                var props = propValue.split( '",' ).map( function ( prop ) {
    
                    return prop.trim().replace( /^\"/, '' ).replace( /\s/, '_' );
    
                } );
    
                var innerPropName = props[ 0 ];
                var innerPropType1 = props[ 1 ];
                var innerPropType2 = props[ 2 ];
                var innerPropFlag = props[ 3 ];
                var innerPropValue = props[ 4 ];
    
                // cast values where needed, otherwise leave as strings
                switch ( innerPropType1 ) {
    
                    case 'int':
                    case 'enum':
                    case 'bool':
                    case 'ULongLong':
                    case 'double':
                    case 'Number':
                    case 'FieldOfView':
                        innerPropValue = parseFloat( innerPropValue );
                        break;
    
                    case 'Color':
                    case 'ColorRGB':
                    case 'Vector3D':
                    case 'Lcl_Translation':
                    case 'Lcl_Rotation':
                    case 'Lcl_Scaling':
                        innerPropValue = parseNumberArray( innerPropValue );
                        break;
    
                }
    
                // CAUTION: these props must append to parent's parent
                this.getPrevNode()[ innerPropName ] = {
    
                    'type': innerPropType1,
                    'type2': innerPropType2,
                    'flag': innerPropFlag,
                    'value': innerPropValue
    
                };
    
                this.setCurrentProp( this.getPrevNode(), innerPropName );
    
            },
    
        } );
    
        // Parse an FBX file in Binary format
        function BinaryParser() {}
    
        Object.assign( BinaryParser.prototype, {
    
            parse: function ( buffer ) {
    
                var reader = new BinaryReader( buffer );
                reader.skip( 23 ); // skip magic 23 bytes
    
                var version = reader.getUint32();
    
                console.log( 'THREE.FBXLoader: FBX binary version: ' + version );
    
                var allNodes = new FBXTree();
    
                while ( ! this.endOfContent( reader ) ) {
    
                    var node = this.parseNode( reader, version );
                    if ( node !== null ) allNodes.add( node.name, node );
    
                }
    
                return allNodes;
    
            },
    
            // Check if reader has reached the end of content.
            endOfContent: function ( reader ) {
    
                // footer size: 160bytes + 16-byte alignment padding
                // - 16bytes: magic
                // - padding til 16-byte alignment (at least 1byte?)
                //	(seems like some exporters embed fixed 15 or 16bytes?)
                // - 4bytes: magic
                // - 4bytes: version
                // - 120bytes: zero
                // - 16bytes: magic
                if ( reader.size() % 16 === 0 ) {
    
                    return ( ( reader.getOffset() + 160 + 16 ) & ~ 0xf ) >= reader.size();
    
                } else {
    
                    return reader.getOffset() + 160 + 16 >= reader.size();
    
                }
    
            },
    
            // recursively parse nodes until the end of the file is reached
            parseNode: function ( reader, version ) {
    
                var node = {};
    
                // The first three data sizes depends on version.
                var endOffset = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();
                var numProperties = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();
    
                // note: do not remove this even if you get a linter warning as it moves the buffer forward
                var propertyListLen = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();
    
                var nameLen = reader.getUint8();
                var name = reader.getString( nameLen );
    
                // Regards this node as NULL-record if endOffset is zero
                if ( endOffset === 0 ) return null;
    
                var propertyList = [];
    
                for ( var i = 0; i < numProperties; i ++ ) {
    
                    propertyList.push( this.parseProperty( reader ) );
    
                }
    
                // Regards the first three elements in propertyList as id, attrName, and attrType
                var id = propertyList.length > 0 ? propertyList[ 0 ] : '';
                var attrName = propertyList.length > 1 ? propertyList[ 1 ] : '';
                var attrType = propertyList.length > 2 ? propertyList[ 2 ] : '';
    
                // check if this node represents just a single property
                // like (name, 0) set or (name2, [0, 1, 2]) set of {name: 0, name2: [0, 1, 2]}
                node.singleProperty = ( numProperties === 1 && reader.getOffset() === endOffset ) ? true : false;
    
                while ( endOffset > reader.getOffset() ) {
    
                    var subNode = this.parseNode( reader, version );
    
                    if ( subNode !== null ) this.parseSubNode( name, node, subNode );
    
                }
    
                node.propertyList = propertyList; // raw property list used by parent
    
                if ( typeof id === 'number' ) node.id = id;
                if ( attrName !== '' ) node.attrName = attrName;
                if ( attrType !== '' ) node.attrType = attrType;
                if ( name !== '' ) node.name = name;
    
                return node;
    
            },
    
            parseSubNode: function ( name, node, subNode ) {
    
                // special case: child node is single property
                if ( subNode.singleProperty === true ) {
    
                    var value = subNode.propertyList[ 0 ];
    
                    if ( Array.isArray( value ) ) {
    
                        node[ subNode.name ] = subNode;
    
                        subNode.a = value;
    
                    } else {
    
                        node[ subNode.name ] = value;
    
                    }
    
                } else if ( name === 'Connections' && subNode.name === 'C' ) {
    
                    var array = [];
    
                    subNode.propertyList.forEach( function ( property, i ) {
    
                        // first Connection is FBX type (OO, OP, etc.). We'll discard these
                        if ( i !== 0 ) array.push( property );
    
                    } );
    
                    if ( node.connections === undefined ) {
    
                        node.connections = [];
    
                    }
    
                    node.connections.push( array );
    
                } else if ( subNode.name === 'Properties70' ) {
    
                    var keys = Object.keys( subNode );
    
                    keys.forEach( function ( key ) {
    
                        node[ key ] = subNode[ key ];
    
                    } );
    
                } else if ( name === 'Properties70' && subNode.name === 'P' ) {
    
                    var innerPropName = subNode.propertyList[ 0 ];
                    var innerPropType1 = subNode.propertyList[ 1 ];
                    var innerPropType2 = subNode.propertyList[ 2 ];
                    var innerPropFlag = subNode.propertyList[ 3 ];
                    var innerPropValue;
    
                    if ( innerPropName.indexOf( 'Lcl ' ) === 0 ) innerPropName = innerPropName.replace( 'Lcl ', 'Lcl_' );
                    if ( innerPropType1.indexOf( 'Lcl ' ) === 0 ) innerPropType1 = innerPropType1.replace( 'Lcl ', 'Lcl_' );
    
                    if ( innerPropType1 === 'Color' || innerPropType1 === 'ColorRGB' || innerPropType1 === 'Vector' || innerPropType1 === 'Vector3D' || innerPropType1.indexOf( 'Lcl_' ) === 0 ) {
    
                        innerPropValue = [
                            subNode.propertyList[ 4 ],
                            subNode.propertyList[ 5 ],
                            subNode.propertyList[ 6 ]
                        ];
    
                    } else {
    
                        innerPropValue = subNode.propertyList[ 4 ];
    
                    }
    
                    // this will be copied to parent, see above
                    node[ innerPropName ] = {
    
                        'type': innerPropType1,
                        'type2': innerPropType2,
                        'flag': innerPropFlag,
                        'value': innerPropValue
    
                    };
    
                } else if ( node[ subNode.name ] === undefined ) {
    
                    if ( typeof subNode.id === 'number' ) {
    
                        node[ subNode.name ] = {};
                        node[ subNode.name ][ subNode.id ] = subNode;
    
                    } else {
    
                        node[ subNode.name ] = subNode;
    
                    }
    
                } else {
    
                    if ( subNode.name === 'PoseNode' ) {
    
                        if ( ! Array.isArray( node[ subNode.name ] ) ) {
    
                            node[ subNode.name ] = [ node[ subNode.name ] ];
    
                        }
    
                        node[ subNode.name ].push( subNode );
    
                    } else if ( node[ subNode.name ][ subNode.id ] === undefined ) {
    
                        node[ subNode.name ][ subNode.id ] = subNode;
    
                    }
    
                }
    
            },
    
            parseProperty: function ( reader ) {
    
                var type = reader.getString( 1 );
    
                switch ( type ) {
    
                    case 'C':
                        return reader.getBoolean();
    
                    case 'D':
                        return reader.getFloat64();
    
                    case 'F':
                        return reader.getFloat32();
    
                    case 'I':
                        return reader.getInt32();
    
                    case 'L':
                        return reader.getInt64();
    
                    case 'R':
                        var length = reader.getUint32();
                        return reader.getArrayBuffer( length );
    
                    case 'S':
                        var length = reader.getUint32();
                        return reader.getString( length );
    
                    case 'Y':
                        return reader.getInt16();
    
                    case 'b':
                    case 'c':
                    case 'd':
                    case 'f':
                    case 'i':
                    case 'l':
    
                        var arrayLength = reader.getUint32();
                        var encoding = reader.getUint32(); // 0: non-compressed, 1: compressed
                        var compressedLength = reader.getUint32();
    
                        if ( encoding === 0 ) {
    
                            switch ( type ) {
    
                                case 'b':
                                case 'c':
                                    return reader.getBooleanArray( arrayLength );
    
                                case 'd':
                                    return reader.getFloat64Array( arrayLength );
    
                                case 'f':
                                    return reader.getFloat32Array( arrayLength );
    
                                case 'i':
                                    return reader.getInt32Array( arrayLength );
    
                                case 'l':
                                    return reader.getInt64Array( arrayLength );
    
                            }
    
                        }
    
                        if ( window.Zlib === undefined ) {
    
                            console.error( 'THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js' );
    
                        }
    
                        var inflate = new Zlib.Inflate( new Uint8Array( reader.getArrayBuffer( compressedLength ) ) ); // eslint-disable-line no-undef
                        var reader2 = new BinaryReader( inflate.decompress().buffer );
    
                        switch ( type ) {
    
                            case 'b':
                            case 'c':
                                return reader2.getBooleanArray( arrayLength );
    
                            case 'd':
                                return reader2.getFloat64Array( arrayLength );
    
                            case 'f':
                                return reader2.getFloat32Array( arrayLength );
    
                            case 'i':
                                return reader2.getInt32Array( arrayLength );
    
                            case 'l':
                                return reader2.getInt64Array( arrayLength );
    
                        }
    
                    default:
                        throw new Error( 'THREE.FBXLoader: Unknown property type ' + type );
    
                }
    
            }
    
        } );
    
    
        function BinaryReader( buffer, littleEndian ) {
    
            this.dv = new DataView( buffer );
            this.offset = 0;
            this.littleEndian = ( littleEndian !== undefined ) ? littleEndian : true;
    
        }
    
        Object.assign( BinaryReader.prototype, {
    
            getOffset: function () {
    
                return this.offset;
    
            },
    
            size: function () {
    
                return this.dv.buffer.byteLength;
    
            },
    
            skip: function ( length ) {
    
                this.offset += length;
    
            },
    
            // seems like true/false representation depends on exporter.
            // true: 1 or 'Y'(=0x59), false: 0 or 'T'(=0x54)
            // then sees LSB.
            getBoolean: function () {
    
                return ( this.getUint8() & 1 ) === 1;
    
            },
    
            getBooleanArray: function ( size ) {
    
                var a = [];
    
                for ( var i = 0; i < size; i ++ ) {
    
                    a.push( this.getBoolean() );
    
                }
    
                return a;
    
            },
    
            getUint8: function () {
    
                var value = this.dv.getUint8( this.offset );
                this.offset += 1;
                return value;
    
            },
    
            getInt16: function () {
    
                var value = this.dv.getInt16( this.offset, this.littleEndian );
                this.offset += 2;
                return value;
    
            },
    
            getInt32: function () {
    
                var value = this.dv.getInt32( this.offset, this.littleEndian );
                this.offset += 4;
                return value;
    
            },
    
            getInt32Array: function ( size ) {
    
                var a = [];
    
                for ( var i = 0; i < size; i ++ ) {
    
                    a.push( this.getInt32() );
    
                }
    
                return a;
    
            },
    
            getUint32: function () {
    
                var value = this.dv.getUint32( this.offset, this.littleEndian );
                this.offset += 4;
                return value;
    
            },
    
            // JavaScript doesn't support 64-bit integer so calculate this here
            // 1 << 32 will return 1 so using multiply operation instead here.
            // There's a possibility that this method returns wrong value if the value
            // is out of the range between Number.MAX_SAFE_INTEGER and Number.MIN_SAFE_INTEGER.
            // TODO: safely handle 64-bit integer
            getInt64: function () {
    
                var low, high;
    
                if ( this.littleEndian ) {
    
                    low = this.getUint32();
                    high = this.getUint32();
    
                } else {
    
                    high = this.getUint32();
                    low = this.getUint32();
    
                }
    
                // calculate negative value
                if ( high & 0x80000000 ) {
    
                    high = ~ high & 0xFFFFFFFF;
                    low = ~ low & 0xFFFFFFFF;
    
                    if ( low === 0xFFFFFFFF ) high = ( high + 1 ) & 0xFFFFFFFF;
    
                    low = ( low + 1 ) & 0xFFFFFFFF;
    
                    return - ( high * 0x100000000 + low );
    
                }
    
                return high * 0x100000000 + low;
    
            },
    
            getInt64Array: function ( size ) {
    
                var a = [];
    
                for ( var i = 0; i < size; i ++ ) {
    
                    a.push( this.getInt64() );
    
                }
    
                return a;
    
            },
    
            // Note: see getInt64() comment
            getUint64: function () {
    
                var low, high;
    
                if ( this.littleEndian ) {
    
                    low = this.getUint32();
                    high = this.getUint32();
    
                } else {
    
                    high = this.getUint32();
                    low = this.getUint32();
    
                }
    
                return high * 0x100000000 + low;
    
            },
    
            getFloat32: function () {
    
                var value = this.dv.getFloat32( this.offset, this.littleEndian );
                this.offset += 4;
                return value;
    
            },
    
            getFloat32Array: function ( size ) {
    
                var a = [];
    
                for ( var i = 0; i < size; i ++ ) {
    
                    a.push( this.getFloat32() );
    
                }
    
                return a;
    
            },
    
            getFloat64: function () {
    
                var value = this.dv.getFloat64( this.offset, this.littleEndian );
                this.offset += 8;
                return value;
    
            },
    
            getFloat64Array: function ( size ) {
    
                var a = [];
    
                for ( var i = 0; i < size; i ++ ) {
    
                    a.push( this.getFloat64() );
    
                }
    
                return a;
    
            },
    
            getArrayBuffer: function ( size ) {
    
                var value = this.dv.buffer.slice( this.offset, this.offset + size );
                this.offset += size;
                return value;
    
            },
    
            getString: function ( size ) {
    
                var a = new Uint8Array( size );
    
                for ( var i = 0; i < size; i ++ ) {
    
                    a[ i ] = this.getUint8();
    
                }
    
                var nullByte = a.indexOf( 0 );
                if ( nullByte >= 0 ) a = a.slice( 0, nullByte );
    
                return THREE.LoaderUtils.decodeText( a );
    
            }
    
        } );
    
        // FBXTree holds a representation of the FBX data, returned by the TextParser ( FBX ASCII format)
        // and BinaryParser( FBX Binary format)
        function FBXTree() {}
    
        Object.assign( FBXTree.prototype, {
    
            add: function ( key, val ) {
    
                this[ key ] = val;
    
            },
    
        } );
    
        function isFbxFormatBinary( buffer ) {
    
            var CORRECT = 'Kaydara FBX Binary  \0';
    
            return buffer.byteLength >= CORRECT.length && CORRECT === convertArrayBufferToString( buffer, 0, CORRECT.length );
    
        }
    
        function isFbxFormatASCII( text ) {
    
            var CORRECT = [ 'K', 'a', 'y', 'd', 'a', 'r', 'a', '\\', 'F', 'B', 'X', '\\', 'B', 'i', 'n', 'a', 'r', 'y', '\\', '\\' ];
    
            var cursor = 0;
    
            function read( offset ) {
    
                var result = text[ offset - 1 ];
                text = text.slice( cursor + offset );
                cursor ++;
                return result;
    
            }
    
            for ( var i = 0; i < CORRECT.length; ++ i ) {
    
                var num = read( 1 );
                if ( num === CORRECT[ i ] ) {
    
                    return false;
    
                }
    
            }
    
            return true;
    
        }
    
        function getFbxVersion( text ) {
    
            var versionRegExp = /FBXVersion: (\d+)/;
            var match = text.match( versionRegExp );
            if ( match ) {
    
                var version = parseInt( match[ 1 ] );
                return version;
    
            }
            throw new Error( 'THREE.FBXLoader: Cannot find the version number for the file given.' );
    
        }
    
        // Converts FBX ticks into real time seconds.
        function convertFBXTimeToSeconds( time ) {
    
            return time / 46186158000;
    
        }
    
    
        // Parses comma separated list of numbers and returns them an array.
        // Used internally by the TextParser
        function parseNumberArray( value ) {
    
            var array = value.split( ',' ).map( function ( val ) {
    
                return parseFloat( val );
    
            } );
    
            return array;
    
        }
    
        function convertArrayBufferToString( buffer, from, to ) {
    
            if ( from === undefined ) from = 0;
            if ( to === undefined ) to = buffer.byteLength;
    
            return THREE.LoaderUtils.decodeText( new Uint8Array( buffer, from, to ) );
    
        }
    
        function append( a, b ) {
    
            for ( var i = 0, j = a.length, l = b.length; i < l; i ++, j ++ ) {
    
                a[ j ] = b[ i ];
    
            }
    
        }
    
        function slice( a, b, from, to ) {
    
            for ( var i = from, j = 0; i < to; i ++, j ++ ) {
    
                a[ j ] = b[ i ];
    
            }
    
            return a;
    
        }
    
    } )();
},{}],"form/lib/GLTFLoader":[function(require,module,exports){
/**
 * @author Rich Tibbett / https://github.com/richtr
 * @author mrdoob / http://mrdoob.com/
 * @author Tony Parisi / http://www.tonyparisi.com/
 * @author Takahiro / https://github.com/takahirox
 * @author Don McCurdy / https://www.donmccurdy.com
 */

THREE.GLTFLoader = ( function () {
    
        function GLTFLoader( manager ) {
    
            this.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;
    
        }
    
        GLTFLoader.prototype = {
    
            constructor: GLTFLoader,
    
            crossOrigin: 'Anonymous',
    
            load: function ( url, onLoad, onProgress, onError ) {
    
                var scope = this;
    
                var path = this.path !== undefined ? this.path : THREE.LoaderUtils.extractUrlBase( url );
    
                var loader = new THREE.FileLoader( scope.manager );
    
                loader.setResponseType( 'arraybuffer' );
    
                loader.load( url, function ( data ) {
    
                    try {
    
                        scope.parse( data, path, onLoad, onError );
    
                    } catch ( e ) {
    
                        if ( onError !== undefined ) {
    
                            onError( e );
    
                        } else {
    
                            throw e;
    
                        }
    
                    }
    
                }, onProgress, onError );
    
            },
    
            setCrossOrigin: function ( value ) {
    
                this.crossOrigin = value;
                return this;
    
            },
    
            setPath: function ( value ) {
    
                this.path = value;
                return this;
    
            },
    
            parse: function ( data, path, onLoad, onError ) {
    
                var content;
                var extensions = {};
    
                if ( typeof data === 'string' ) {
    
                    content = data;
    
                } else {
    
                    var magic = THREE.LoaderUtils.decodeText( new Uint8Array( data, 0, 4 ) );
    
                    if ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {
    
                        try {
    
                            extensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );
    
                        } catch ( error ) {
    
                            if ( onError ) onError( error );
                            return;
    
                        }
    
                        content = extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content;
    
                    } else {
    
                        content = THREE.LoaderUtils.decodeText( new Uint8Array( data ) );
    
                    }
    
                }
    
                var json = JSON.parse( content );
    
                if ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {
    
                    if ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead.' ) );
                    return;
    
                }
    
                if ( json.extensionsUsed ) {
    
                    if ( json.extensionsUsed.indexOf( EXTENSIONS.KHR_LIGHTS ) >= 0 ) {
    
                        extensions[ EXTENSIONS.KHR_LIGHTS ] = new GLTFLightsExtension( json );
    
                    }
    
                    if ( json.extensionsUsed.indexOf( EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ) >= 0 ) {
    
                        extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ] = new GLTFMaterialsPbrSpecularGlossinessExtension();
    
                    }
    
                }
    
                console.time( 'GLTFLoader' );
    
                var parser = new GLTFParser( json, extensions, {
    
                    path: path || this.path || '',
                    crossOrigin: this.crossOrigin,
                    manager: this.manager
    
                } );
    
                parser.parse( function ( scene, scenes, cameras, animations, asset ) {
    
                    console.timeEnd( 'GLTFLoader' );
    
                    var glTF = {
                        scene: scene,
                        scenes: scenes,
                        cameras: cameras,
                        animations: animations,
                        asset: asset
                    };
    
                    onLoad( glTF );
    
                }, onError );
    
            }
    
        };
    
        /* GLTFREGISTRY */
    
        function GLTFRegistry() {
    
            var objects = {};
    
            return	{
    
                get: function ( key ) {
    
                    return objects[ key ];
    
                },
    
                add: function ( key, object ) {
    
                    objects[ key ] = object;
    
                },
    
                remove: function ( key ) {
    
                    delete objects[ key ];
    
                },
    
                removeAll: function () {
    
                    objects = {};
    
                }
    
            };
    
        }
    
        /*********************************/
        /********** EXTENSIONS ***********/
        /*********************************/
    
        var EXTENSIONS = {
            KHR_BINARY_GLTF: 'KHR_binary_glTF',
            KHR_LIGHTS: 'KHR_lights',
            KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness'
        };
    
        /**
         * Lights Extension
         *
         * Specification: PENDING
         */
        function GLTFLightsExtension( json ) {
    
            this.name = EXTENSIONS.KHR_LIGHTS;
    
            this.lights = {};
    
            var extension = ( json.extensions && json.extensions[ EXTENSIONS.KHR_LIGHTS ] ) || {};
            var lights = extension.lights || {};
    
            for ( var lightId in lights ) {
    
                var light = lights[ lightId ];
                var lightNode;
    
                var color = new THREE.Color().fromArray( light.color );
    
                switch ( light.type ) {
    
                    case 'directional':
                        lightNode = new THREE.DirectionalLight( color );
                        lightNode.position.set( 0, 0, 1 );
                        break;
    
                    case 'point':
                        lightNode = new THREE.PointLight( color );
                        break;
    
                    case 'spot':
                        lightNode = new THREE.SpotLight( color );
                        lightNode.position.set( 0, 0, 1 );
                        break;
    
                    case 'ambient':
                        lightNode = new THREE.AmbientLight( color );
                        break;
    
                }
    
                if ( lightNode ) {
    
                    if ( light.constantAttenuation !== undefined ) {
    
                        lightNode.intensity = light.constantAttenuation;
    
                    }
    
                    if ( light.linearAttenuation !== undefined ) {
    
                        lightNode.distance = 1 / light.linearAttenuation;
    
                    }
    
                    if ( light.quadraticAttenuation !== undefined ) {
    
                        lightNode.decay = light.quadraticAttenuation;
    
                    }
    
                    if ( light.fallOffAngle !== undefined ) {
    
                        lightNode.angle = light.fallOffAngle;
    
                    }
    
                    if ( light.fallOffExponent !== undefined ) {
    
                        console.warn( 'THREE.GLTFLoader:: light.fallOffExponent not currently supported.' );
    
                    }
    
                    lightNode.name = light.name || ( 'light_' + lightId );
                    this.lights[ lightId ] = lightNode;
    
                }
    
            }
    
        }
    
        /* BINARY EXTENSION */
    
        var BINARY_EXTENSION_BUFFER_NAME = 'binary_glTF';
        var BINARY_EXTENSION_HEADER_MAGIC = 'glTF';
        var BINARY_EXTENSION_HEADER_LENGTH = 12;
        var BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };
    
        function GLTFBinaryExtension( data ) {
    
            this.name = EXTENSIONS.KHR_BINARY_GLTF;
            this.content = null;
            this.body = null;
    
            var headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );
    
            this.header = {
                magic: THREE.LoaderUtils.decodeText( new Uint8Array( data.slice( 0, 4 ) ) ),
                version: headerView.getUint32( 4, true ),
                length: headerView.getUint32( 8, true )
            };
    
            if ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {
    
                throw new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );
    
            } else if ( this.header.version < 2.0 ) {
    
                throw new Error( 'THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.' );
    
            }
    
            var chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );
            var chunkIndex = 0;
    
            while ( chunkIndex < chunkView.byteLength ) {
    
                var chunkLength = chunkView.getUint32( chunkIndex, true );
                chunkIndex += 4;
    
                var chunkType = chunkView.getUint32( chunkIndex, true );
                chunkIndex += 4;
    
                if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {
    
                    var contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );
                    this.content = THREE.LoaderUtils.decodeText( contentArray );
    
                } else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {
    
                    var byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;
                    this.body = data.slice( byteOffset, byteOffset + chunkLength );
    
                }
    
                // Clients must ignore chunks with unknown types.
    
                chunkIndex += chunkLength;
    
            }
    
            if ( this.content === null ) {
    
                throw new Error( 'THREE.GLTFLoader: JSON content not found.' );
    
            }
    
        }
    
        /**
         * Specular-Glossiness Extension
         *
         * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness
         */
        function GLTFMaterialsPbrSpecularGlossinessExtension() {
    
            return {
    
                name: EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,
    
                specularGlossinessParams: [
                    'color',
                    'map',
                    'lightMap',
                    'lightMapIntensity',
                    'aoMap',
                    'aoMapIntensity',
                    'emissive',
                    'emissiveIntensity',
                    'emissiveMap',
                    'bumpMap',
                    'bumpScale',
                    'normalMap',
                    'displacementMap',
                    'displacementScale',
                    'displacementBias',
                    'specularMap',
                    'specular',
                    'glossinessMap',
                    'glossiness',
                    'alphaMap',
                    'envMap',
                    'envMapIntensity',
                    'refractionRatio',
                ],
    
                getMaterialType: function () {
    
                    return THREE.ShaderMaterial;
    
                },
    
                extendParams: function ( params, material, parser ) {
    
                    var pbrSpecularGlossiness = material.extensions[ this.name ];
    
                    var shader = THREE.ShaderLib[ 'standard' ];
    
                    var uniforms = THREE.UniformsUtils.clone( shader.uniforms );
    
                    var specularMapParsFragmentChunk = [
                        '#ifdef USE_SPECULARMAP',
                        '	uniform sampler2D specularMap;',
                        '#endif'
                    ].join( '\n' );
    
                    var glossinessMapParsFragmentChunk = [
                        '#ifdef USE_GLOSSINESSMAP',
                        '	uniform sampler2D glossinessMap;',
                        '#endif'
                    ].join( '\n' );
    
                    var specularMapFragmentChunk = [
                        'vec3 specularFactor = specular;',
                        '#ifdef USE_SPECULARMAP',
                        '	vec4 texelSpecular = texture2D( specularMap, vUv );',
                        '	texelSpecular = sRGBToLinear( texelSpecular );',
                        '	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',
                        '	specularFactor *= texelSpecular.rgb;',
                        '#endif'
                    ].join( '\n' );
    
                    var glossinessMapFragmentChunk = [
                        'float glossinessFactor = glossiness;',
                        '#ifdef USE_GLOSSINESSMAP',
                        '	vec4 texelGlossiness = texture2D( glossinessMap, vUv );',
                        '	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',
                        '	glossinessFactor *= texelGlossiness.a;',
                        '#endif'
                    ].join( '\n' );
    
                    var lightPhysicalFragmentChunk = [
                        'PhysicalMaterial material;',
                        'material.diffuseColor = diffuseColor.rgb;',
                        'material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );',
                        'material.specularColor = specularFactor.rgb;',
                    ].join( '\n' );
    
                    var fragmentShader = shader.fragmentShader
                        .replace( '#include <specularmap_fragment>', '' )
                        .replace( 'uniform float roughness;', 'uniform vec3 specular;' )
                        .replace( 'uniform float metalness;', 'uniform float glossiness;' )
                        .replace( '#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk )
                        .replace( '#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk )
                        .replace( '#include <roughnessmap_fragment>', specularMapFragmentChunk )
                        .replace( '#include <metalnessmap_fragment>', glossinessMapFragmentChunk )
                        .replace( '#include <lights_physical_fragment>', lightPhysicalFragmentChunk );
    
                    delete uniforms.roughness;
                    delete uniforms.metalness;
                    delete uniforms.roughnessMap;
                    delete uniforms.metalnessMap;
    
                    uniforms.specular = { value: new THREE.Color().setHex( 0x111111 ) };
                    uniforms.glossiness = { value: 0.5 };
                    uniforms.specularMap = { value: null };
                    uniforms.glossinessMap = { value: null };
    
                    params.vertexShader = shader.vertexShader;
                    params.fragmentShader = fragmentShader;
                    params.uniforms = uniforms;
                    params.defines = { 'STANDARD': '' };
    
                    params.color = new THREE.Color( 1.0, 1.0, 1.0 );
                    params.opacity = 1.0;
    
                    var pending = [];
    
                    if ( Array.isArray( pbrSpecularGlossiness.diffuseFactor ) ) {
    
                        var array = pbrSpecularGlossiness.diffuseFactor;
    
                        params.color.fromArray( array );
                        params.opacity = array[ 3 ];
    
                    }
    
                    if ( pbrSpecularGlossiness.diffuseTexture !== undefined ) {
    
                        pending.push( parser.assignTexture( params, 'map', pbrSpecularGlossiness.diffuseTexture.index ) );
    
                    }
    
                    params.emissive = new THREE.Color( 0.0, 0.0, 0.0 );
                    params.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;
                    params.specular = new THREE.Color( 1.0, 1.0, 1.0 );
    
                    if ( Array.isArray( pbrSpecularGlossiness.specularFactor ) ) {
    
                        params.specular.fromArray( pbrSpecularGlossiness.specularFactor );
    
                    }
    
                    if ( pbrSpecularGlossiness.specularGlossinessTexture !== undefined ) {
    
                        var specGlossIndex = pbrSpecularGlossiness.specularGlossinessTexture.index;
                        pending.push( parser.assignTexture( params, 'glossinessMap', specGlossIndex ) );
                        pending.push( parser.assignTexture( params, 'specularMap', specGlossIndex ) );
    
                    }
    
                    return Promise.all( pending );
    
                },
    
                createMaterial: function ( params ) {
    
                    // setup material properties based on MeshStandardMaterial for Specular-Glossiness
    
                    var material = new THREE.ShaderMaterial( {
                        defines: params.defines,
                        vertexShader: params.vertexShader,
                        fragmentShader: params.fragmentShader,
                        uniforms: params.uniforms,
                        fog: true,
                        lights: true,
                        opacity: params.opacity,
                        transparent: params.transparent
                    } );
    
                    material.isGLTFSpecularGlossinessMaterial = true;
    
                    material.color = params.color;
    
                    material.map = params.map === undefined ? null : params.map;
    
                    material.lightMap = null;
                    material.lightMapIntensity = 1.0;
    
                    material.aoMap = params.aoMap === undefined ? null : params.aoMap;
                    material.aoMapIntensity = 1.0;
    
                    material.emissive = params.emissive;
                    material.emissiveIntensity = 1.0;
                    material.emissiveMap = params.emissiveMap === undefined ? null : params.emissiveMap;
    
                    material.bumpMap = params.bumpMap === undefined ? null : params.bumpMap;
                    material.bumpScale = 1;
    
                    material.normalMap = params.normalMap === undefined ? null : params.normalMap;
                    if ( params.normalScale ) material.normalScale = params.normalScale;
    
                    material.displacementMap = null;
                    material.displacementScale = 1;
                    material.displacementBias = 0;
    
                    material.specularMap = params.specularMap === undefined ? null : params.specularMap;
                    material.specular = params.specular;
    
                    material.glossinessMap = params.glossinessMap === undefined ? null : params.glossinessMap;
                    material.glossiness = params.glossiness;
    
                    material.alphaMap = null;
    
                    material.envMap = params.envMap === undefined ? null : params.envMap;
                    material.envMapIntensity = 1.0;
    
                    material.refractionRatio = 0.98;
    
                    material.extensions.derivatives = true;
    
                    return material;
    
                },
    
                /**
                 * Clones a GLTFSpecularGlossinessMaterial instance. The ShaderMaterial.copy() method can
                 * copy only properties it knows about or inherits, and misses many properties that would
                 * normally be defined by MeshStandardMaterial.
                 *
                 * This method allows GLTFSpecularGlossinessMaterials to be cloned in the process of
                 * loading a glTF model, but cloning later (e.g. by the user) would require these changes
                 * AND also updating `.onBeforeRender` on the parent mesh.
                 *
                 * @param  {THREE.ShaderMaterial} source
                 * @return {THREE.ShaderMaterial}
                 */
                cloneMaterial: function ( source ) {
    
                    var target = source.clone();
    
                    target.isGLTFSpecularGlossinessMaterial = true;
    
                    var params = this.specularGlossinessParams;
    
                    for ( var i = 0, il = params.length; i < il; i ++ ) {
    
                        target[ params[ i ] ] = source[ params[ i ] ];
    
                    }
    
                    return target;
    
                },
    
                // Here's based on refreshUniformsCommon() and refreshUniformsStandard() in WebGLRenderer.
                refreshUniforms: function ( renderer, scene, camera, geometry, material, group ) {
    
                    if ( material.isGLTFSpecularGlossinessMaterial !== true ) {
    
                        return;
    
                    }
    
                    var uniforms = material.uniforms;
                    var defines = material.defines;
    
                    uniforms.opacity.value = material.opacity;
    
                    uniforms.diffuse.value.copy( material.color );
                    uniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );
    
                    uniforms.map.value = material.map;
                    uniforms.specularMap.value = material.specularMap;
                    uniforms.alphaMap.value = material.alphaMap;
    
                    uniforms.lightMap.value = material.lightMap;
                    uniforms.lightMapIntensity.value = material.lightMapIntensity;
    
                    uniforms.aoMap.value = material.aoMap;
                    uniforms.aoMapIntensity.value = material.aoMapIntensity;
    
                    // uv repeat and offset setting priorities
                    // 1. color map
                    // 2. specular map
                    // 3. normal map
                    // 4. bump map
                    // 5. alpha map
                    // 6. emissive map
    
                    var uvScaleMap;
    
                    if ( material.map ) {
    
                        uvScaleMap = material.map;
    
                    } else if ( material.specularMap ) {
    
                        uvScaleMap = material.specularMap;
    
                    } else if ( material.displacementMap ) {
    
                        uvScaleMap = material.displacementMap;
    
                    } else if ( material.normalMap ) {
    
                        uvScaleMap = material.normalMap;
    
                    } else if ( material.bumpMap ) {
    
                        uvScaleMap = material.bumpMap;
    
                    } else if ( material.glossinessMap ) {
    
                        uvScaleMap = material.glossinessMap;
    
                    } else if ( material.alphaMap ) {
    
                        uvScaleMap = material.alphaMap;
    
                    } else if ( material.emissiveMap ) {
    
                        uvScaleMap = material.emissiveMap;
    
                    }
    
                    if ( uvScaleMap !== undefined ) {
    
                        // backwards compatibility
                        if ( uvScaleMap.isWebGLRenderTarget ) {
    
                            uvScaleMap = uvScaleMap.texture;
    
                        }
    
                        var offset;
                        var repeat;
    
                        if ( uvScaleMap.matrix !== undefined ) {
    
                            // > r88.
    
                            if ( uvScaleMap.matrixAutoUpdate === true ) {
    
                                offset = uvScaleMap.offset;
                                repeat = uvScaleMap.repeat;
                                var rotation = uvScaleMap.rotation;
                                var center = uvScaleMap.center;
    
                                uvScaleMap.matrix.setUvTransform( offset.x, offset.y, repeat.x, repeat.y, rotation, center.x, center.y );
    
                            }
    
                            uniforms.uvTransform.value.copy( uvScaleMap.matrix );
    
                        } else {
    
                            // <= r87. Remove when reasonable.
    
                            offset = uvScaleMap.offset;
                            repeat = uvScaleMap.repeat;
    
                            uniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );
    
                        }
    
                    }
    
                    uniforms.envMap.value = material.envMap;
                    uniforms.envMapIntensity.value = material.envMapIntensity;
                    uniforms.flipEnvMap.value = ( material.envMap && material.envMap.isCubeTexture ) ? - 1 : 1;
    
                    uniforms.refractionRatio.value = material.refractionRatio;
    
                    uniforms.specular.value.copy( material.specular );
                    uniforms.glossiness.value = material.glossiness;
    
                    uniforms.glossinessMap.value = material.glossinessMap;
    
                    uniforms.emissiveMap.value = material.emissiveMap;
                    uniforms.bumpMap.value = material.bumpMap;
                    uniforms.normalMap.value = material.normalMap;
    
                    uniforms.displacementMap.value = material.displacementMap;
                    uniforms.displacementScale.value = material.displacementScale;
                    uniforms.displacementBias.value = material.displacementBias;
    
                    if ( uniforms.glossinessMap.value !== null && defines.USE_GLOSSINESSMAP === undefined ) {
    
                        defines.USE_GLOSSINESSMAP = '';
                        // set USE_ROUGHNESSMAP to enable vUv
                        defines.USE_ROUGHNESSMAP = '';
    
                    }
    
                    if ( uniforms.glossinessMap.value === null && defines.USE_GLOSSINESSMAP !== undefined ) {
    
                        delete defines.USE_GLOSSINESSMAP;
                        delete defines.USE_ROUGHNESSMAP;
    
                    }
    
                }
    
            };
    
        }
    
        /*********************************/
        /********** INTERPOLATION ********/
        /*********************************/
    
        // Spline Interpolation
        // Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation
        function GLTFCubicSplineInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {
    
            THREE.Interpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );
    
        };
    
        GLTFCubicSplineInterpolant.prototype = Object.create( THREE.Interpolant.prototype );
        GLTFCubicSplineInterpolant.prototype.constructor = GLTFCubicSplineInterpolant;
    
        GLTFCubicSplineInterpolant.prototype.interpolate_ = function ( i1, t0, t, t1 ) {
    
            var result = this.resultBuffer;
            var values = this.sampleValues;
            var stride = this.valueSize;
    
            var stride2 = stride * 2;
            var stride3 = stride * 3;
    
            var td = t1 - t0;
    
            var p = ( t - t0 ) / td;
            var pp = p * p;
            var ppp = pp * p;
    
            var offset1 = i1 * stride3;
            var offset0 = offset1 - stride3;
    
            var s0 = 2 * ppp - 3 * pp + 1;
            var s1 = ppp - 2 * pp + p;
            var s2 = - 2 * ppp + 3 * pp;
            var s3 = ppp - pp;
    
            // Layout of keyframe output values for CUBICSPLINE animations:
            //   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]
            for ( var i = 0; i !== stride; i ++ ) {
    
                var p0 = values[ offset0 + i + stride ];        // splineVertex_k
                var m0 = values[ offset0 + i + stride2 ] * td;  // outTangent_k * (t_k+1 - t_k)
                var p1 = values[ offset1 + i + stride ];        // splineVertex_k+1
                var m1 = values[ offset1 + i ] * td;            // inTangent_k+1 * (t_k+1 - t_k)
    
                result[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;
    
            }
    
            return result;
    
        };
    
        /*********************************/
        /********** INTERNALS ************/
        /*********************************/
    
        /* CONSTANTS */
    
        var WEBGL_CONSTANTS = {
            FLOAT: 5126,
            //FLOAT_MAT2: 35674,
            FLOAT_MAT3: 35675,
            FLOAT_MAT4: 35676,
            FLOAT_VEC2: 35664,
            FLOAT_VEC3: 35665,
            FLOAT_VEC4: 35666,
            LINEAR: 9729,
            REPEAT: 10497,
            SAMPLER_2D: 35678,
            POINTS: 0,
            LINES: 1,
            LINE_LOOP: 2,
            LINE_STRIP: 3,
            TRIANGLES: 4,
            TRIANGLE_STRIP: 5,
            TRIANGLE_FAN: 6,
            UNSIGNED_BYTE: 5121,
            UNSIGNED_SHORT: 5123
        };
    
        var WEBGL_TYPE = {
            5126: Number,
            //35674: THREE.Matrix2,
            35675: THREE.Matrix3,
            35676: THREE.Matrix4,
            35664: THREE.Vector2,
            35665: THREE.Vector3,
            35666: THREE.Vector4,
            35678: THREE.Texture
        };
    
        var WEBGL_COMPONENT_TYPES = {
            5120: Int8Array,
            5121: Uint8Array,
            5122: Int16Array,
            5123: Uint16Array,
            5125: Uint32Array,
            5126: Float32Array
        };
    
        var WEBGL_FILTERS = {
            9728: THREE.NearestFilter,
            9729: THREE.LinearFilter,
            9984: THREE.NearestMipMapNearestFilter,
            9985: THREE.LinearMipMapNearestFilter,
            9986: THREE.NearestMipMapLinearFilter,
            9987: THREE.LinearMipMapLinearFilter
        };
    
        var WEBGL_WRAPPINGS = {
            33071: THREE.ClampToEdgeWrapping,
            33648: THREE.MirroredRepeatWrapping,
            10497: THREE.RepeatWrapping
        };
    
        var WEBGL_TEXTURE_FORMATS = {
            6406: THREE.AlphaFormat,
            6407: THREE.RGBFormat,
            6408: THREE.RGBAFormat,
            6409: THREE.LuminanceFormat,
            6410: THREE.LuminanceAlphaFormat
        };
    
        var WEBGL_TEXTURE_DATATYPES = {
            5121: THREE.UnsignedByteType,
            32819: THREE.UnsignedShort4444Type,
            32820: THREE.UnsignedShort5551Type,
            33635: THREE.UnsignedShort565Type
        };
    
        var WEBGL_SIDES = {
            1028: THREE.BackSide, // Culling front
            1029: THREE.FrontSide // Culling back
            //1032: THREE.NoSide   // Culling front and back, what to do?
        };
    
        var WEBGL_DEPTH_FUNCS = {
            512: THREE.NeverDepth,
            513: THREE.LessDepth,
            514: THREE.EqualDepth,
            515: THREE.LessEqualDepth,
            516: THREE.GreaterEqualDepth,
            517: THREE.NotEqualDepth,
            518: THREE.GreaterEqualDepth,
            519: THREE.AlwaysDepth
        };
    
        var WEBGL_BLEND_EQUATIONS = {
            32774: THREE.AddEquation,
            32778: THREE.SubtractEquation,
            32779: THREE.ReverseSubtractEquation
        };
    
        var WEBGL_BLEND_FUNCS = {
            0: THREE.ZeroFactor,
            1: THREE.OneFactor,
            768: THREE.SrcColorFactor,
            769: THREE.OneMinusSrcColorFactor,
            770: THREE.SrcAlphaFactor,
            771: THREE.OneMinusSrcAlphaFactor,
            772: THREE.DstAlphaFactor,
            773: THREE.OneMinusDstAlphaFactor,
            774: THREE.DstColorFactor,
            775: THREE.OneMinusDstColorFactor,
            776: THREE.SrcAlphaSaturateFactor
            // The followings are not supported by Three.js yet
            //32769: CONSTANT_COLOR,
            //32770: ONE_MINUS_CONSTANT_COLOR,
            //32771: CONSTANT_ALPHA,
            //32772: ONE_MINUS_CONSTANT_COLOR
        };
    
        var WEBGL_TYPE_SIZES = {
            'SCALAR': 1,
            'VEC2': 2,
            'VEC3': 3,
            'VEC4': 4,
            'MAT2': 4,
            'MAT3': 9,
            'MAT4': 16
        };
    
        var PATH_PROPERTIES = {
            scale: 'scale',
            translation: 'position',
            rotation: 'quaternion',
            weights: 'morphTargetInfluences'
        };
    
        var INTERPOLATION = {
            CUBICSPLINE: THREE.InterpolateSmooth, // We use custom interpolation GLTFCubicSplineInterpolation for CUBICSPLINE.
                                                  // KeyframeTrack.optimize() can't handle glTF Cubic Spline output values layout,
                                                  // using THREE.InterpolateSmooth for KeyframeTrack instantiation to prevent optimization.
                                                  // See KeyframeTrack.optimize() for the detail.
            LINEAR: THREE.InterpolateLinear,
            STEP: THREE.InterpolateDiscrete
        };
    
        var STATES_ENABLES = {
            2884: 'CULL_FACE',
            2929: 'DEPTH_TEST',
            3042: 'BLEND',
            3089: 'SCISSOR_TEST',
            32823: 'POLYGON_OFFSET_FILL',
            32926: 'SAMPLE_ALPHA_TO_COVERAGE'
        };
    
        var ALPHA_MODES = {
            OPAQUE: 'OPAQUE',
            MASK: 'MASK',
            BLEND: 'BLEND'
        };
    
        /* UTILITY FUNCTIONS */
    
        function resolveURL( url, path ) {
    
            // Invalid URL
            if ( typeof url !== 'string' || url === '' ) return '';
    
            // Absolute URL http://,https://,//
            if ( /^(https?:)?\/\//i.test( url ) ) return url;
    
            // Data URI
            if ( /^data:.*,.*$/i.test( url ) ) return url;
    
            // Blob URL
            if ( /^blob:.*$/i.test( url ) ) return url;
    
            // Relative URL
            return path + url;
    
        }
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material
         */
        function createDefaultMaterial() {
    
            return new THREE.MeshStandardMaterial( {
                color: 0xFFFFFF,
                emissive: 0x000000,
                metalness: 1,
                roughness: 1,
                transparent: false,
                depthTest: true,
                side: THREE.FrontSide
            } );
    
        }
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets
         *
         * TODO: Implement support for morph targets on TANGENT attribute.
         *
         * @param {THREE.Mesh} mesh
         * @param {GLTF.Mesh} meshDef
         * @param {GLTF.Primitive} primitiveDef
         * @param {Array<THREE.BufferAttribute>} accessors
         */
        function addMorphTargets( mesh, meshDef, primitiveDef, accessors ) {
    
            var geometry = mesh.geometry;
            var material = mesh.material;
    
            var targets = primitiveDef.targets;
            var morphAttributes = geometry.morphAttributes;
    
            morphAttributes.position = [];
            morphAttributes.normal = [];
    
            material.morphTargets = true;
    
            for ( var i = 0, il = targets.length; i < il; i ++ ) {
    
                var target = targets[ i ];
                var attributeName = 'morphTarget' + i;
    
                var positionAttribute, normalAttribute;
    
                if ( target.POSITION !== undefined ) {
    
                    // Three.js morph formula is
                    //   position
                    //     + weight0 * ( morphTarget0 - position )
                    //     + weight1 * ( morphTarget1 - position )
                    //     ...
                    // while the glTF one is
                    //   position
                    //     + weight0 * morphTarget0
                    //     + weight1 * morphTarget1
                    //     ...
                    // then adding position to morphTarget.
                    // So morphTarget value will depend on mesh's position, then cloning attribute
                    // for the case if attribute is shared among two or more meshes.
    
                    positionAttribute = cloneBufferAttribute( accessors[ target.POSITION ] );
                    var position = geometry.attributes.position;
    
                    for ( var j = 0, jl = positionAttribute.count; j < jl; j ++ ) {
    
                        positionAttribute.setXYZ(
                            j,
                            positionAttribute.getX( j ) + position.getX( j ),
                            positionAttribute.getY( j ) + position.getY( j ),
                            positionAttribute.getZ( j ) + position.getZ( j )
                        );
    
                    }
    
                } else if ( geometry.attributes.position ) {
    
                    // Copying the original position not to affect the final position.
                    // See the formula above.
                    positionAttribute = cloneBufferAttribute( geometry.attributes.position );
    
                }
    
                if ( positionAttribute !== undefined ) {
    
                    positionAttribute.name = attributeName;
                    morphAttributes.position.push( positionAttribute );
    
                }
    
                if ( target.NORMAL !== undefined ) {
    
                    material.morphNormals = true;
    
                    // see target.POSITION's comment
    
                    normalAttribute = cloneBufferAttribute( accessors[ target.NORMAL ] );
                    var normal = geometry.attributes.normal;
    
                    for ( var j = 0, jl = normalAttribute.count; j < jl; j ++ ) {
    
                        normalAttribute.setXYZ(
                            j,
                            normalAttribute.getX( j ) + normal.getX( j ),
                            normalAttribute.getY( j ) + normal.getY( j ),
                            normalAttribute.getZ( j ) + normal.getZ( j )
                        );
    
                    }
    
                } else if ( geometry.attributes.normal !== undefined ) {
    
                    normalAttribute = cloneBufferAttribute( geometry.attributes.normal );
    
                }
    
                if ( normalAttribute !== undefined ) {
    
                    normalAttribute.name = attributeName;
                    morphAttributes.normal.push( normalAttribute );
    
                }
    
            }
    
            mesh.updateMorphTargets();
    
            if ( meshDef.weights !== undefined ) {
    
                for ( var i = 0, il = meshDef.weights.length; i < il; i ++ ) {
    
                    mesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];
    
                }
    
            }
    
        }
    
        function isPrimitiveEqual( a, b ) {
    
            if ( a.indices !== b.indices ) {
    
                return false;
    
            }
    
            var attribA = a.attributes || {};
            var attribB = b.attributes || {};
            var keysA = Object.keys( attribA );
            var keysB = Object.keys( attribB );
    
            if ( keysA.length !== keysB.length ) {
    
                return false;
    
            }
    
            for ( var i = 0, il = keysA.length; i < il; i ++ ) {
    
                var key = keysA[ i ];
    
                if ( attribA[ key ] !== attribB[ key ] ) {
    
                    return false;
    
                }
    
            }
    
            return true;
    
        }
    
        function getCachedGeometry( cache, newPrimitive ) {
    
            for ( var i = 0, il = cache.length; i < il; i ++ ) {
    
                var cached = cache[ i ];
    
                if ( isPrimitiveEqual( cached.primitive, newPrimitive ) ) {
    
                    return cached.geometry;
    
                }
    
            }
    
            return null;
    
        }
    
        function cloneBufferAttribute( attribute ) {
    
            if ( attribute.isInterleavedBufferAttribute ) {
    
                var count = attribute.count;
                var itemSize = attribute.itemSize;
                var array = attribute.array.slice( 0, count * itemSize );
    
                for ( var i = 0; i < count; ++ i ) {
    
                    array[ i ] = attribute.getX( i );
                    if ( itemSize >= 2 ) array[ i + 1 ] = attribute.getY( i );
                    if ( itemSize >= 3 ) array[ i + 2 ] = attribute.getZ( i );
                    if ( itemSize >= 4 ) array[ i + 3 ] = attribute.getW( i );
    
                }
    
                return new THREE.BufferAttribute( array, itemSize, attribute.normalized );
    
            }
    
            return attribute.clone();
    
        }
    
        /* GLTF PARSER */
    
        function GLTFParser( json, extensions, options ) {
    
            this.json = json || {};
            this.extensions = extensions || {};
            this.options = options || {};
    
            // loader object cache
            this.cache = new GLTFRegistry();
    
            // BufferGeometry caching
            this.primitiveCache = [];
    
            this.textureLoader = new THREE.TextureLoader( this.options.manager );
            this.textureLoader.setCrossOrigin( this.options.crossOrigin );
    
            this.fileLoader = new THREE.FileLoader( this.options.manager );
            this.fileLoader.setResponseType( 'arraybuffer' );
    
        }
    
        GLTFParser.prototype.parse = function ( onLoad, onError ) {
    
            var json = this.json;
    
            // Clear the loader cache
            this.cache.removeAll();
    
            // Mark the special nodes/meshes in json for efficient parse
            this.markDefs();
    
            // Fire the callback on complete
            this.getMultiDependencies( [
    
                'scene',
                'animation',
                'camera'
    
            ] ).then( function ( dependencies ) {
    
                var scenes = dependencies.scenes || [];
                var scene = scenes[ json.scene || 0 ];
                var animations = dependencies.animations || [];
                var asset = json.asset;
                var cameras = dependencies.cameras || [];
    
                onLoad( scene, scenes, cameras, animations, asset );
    
            } ).catch( onError );
    
        };
    
        /**
         * Marks the special nodes/meshes in json for efficient parse.
         */
        GLTFParser.prototype.markDefs = function () {
    
            var nodeDefs = this.json.nodes || [];
            var skinDefs = this.json.skins || [];
            var meshDefs = this.json.meshes || [];
    
            var meshReferences = {};
            var meshUses = {};
    
            // Nothing in the node definition indicates whether it is a Bone or an
            // Object3D. Use the skins' joint references to mark bones.
            for ( var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {
    
                var joints = skinDefs[ skinIndex ].joints;
    
                for ( var i = 0, il = joints.length; i < il; i ++ ) {
    
                    nodeDefs[ joints[ i ] ].isBone = true;
    
                }
    
            }
    
            // Meshes can (and should) be reused by multiple nodes in a glTF asset. To
            // avoid having more than one THREE.Mesh with the same name, count
            // references and rename instances below.
            //
            // Example: CesiumMilkTruck sample model reuses "Wheel" meshes.
            for ( var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {
    
                var nodeDef = nodeDefs[ nodeIndex ];
    
                if ( nodeDef.mesh !== undefined ) {
    
                    if ( meshReferences[ nodeDef.mesh ] === undefined ) {
    
                        meshReferences[ nodeDef.mesh ] = meshUses[ nodeDef.mesh ] = 0;
    
                    }
    
                    meshReferences[ nodeDef.mesh ] ++;
    
                    // Nothing in the mesh definition indicates whether it is
                    // a SkinnedMesh or Mesh. Use the node's mesh reference
                    // to mark SkinnedMesh if node has skin.
                    if ( nodeDef.skin !== undefined ) {
    
                        meshDefs[ nodeDef.mesh ].isSkinnedMesh = true;
    
                    }
    
                }
    
            }
    
            this.json.meshReferences = meshReferences;
            this.json.meshUses = meshUses;
    
        };
    
        /**
         * Requests the specified dependency asynchronously, with caching.
         * @param {string} type
         * @param {number} index
         * @return {Promise<Object>}
         */
        GLTFParser.prototype.getDependency = function ( type, index ) {
    
            var cacheKey = type + ':' + index;
            var dependency = this.cache.get( cacheKey );
    
            if ( ! dependency ) {
    
                var fnName = 'load' + type.charAt( 0 ).toUpperCase() + type.slice( 1 );
                dependency = this[ fnName ]( index );
                this.cache.add( cacheKey, dependency );
    
            }
    
            return dependency;
    
        };
    
        /**
         * Requests all dependencies of the specified type asynchronously, with caching.
         * @param {string} type
         * @return {Promise<Array<Object>>}
         */
        GLTFParser.prototype.getDependencies = function ( type ) {
    
            var dependencies = this.cache.get( type );
    
            if ( ! dependencies ) {
    
                var parser = this;
                var defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];
    
                dependencies = Promise.all( defs.map( function ( def, index ) {
    
                    return parser.getDependency( type, index );
    
                } ) );
    
                this.cache.add( type, dependencies );
    
            }
    
            return dependencies;
    
        };
    
        /**
         * Requests all multiple dependencies of the specified types asynchronously, with caching.
         * @param {Array<string>} types
         * @return {Promise<Object<Array<Object>>>}
         */
        GLTFParser.prototype.getMultiDependencies = function ( types ) {
    
            var results = {};
            var pendings = [];
    
            for ( var i = 0, il = types.length; i < il; i ++ ) {
    
                var type = types[ i ];
                var value = this.getDependencies( type );
    
                value = value.then( function ( key, value ) {
    
                    results[ key ] = value;
    
                }.bind( this, type + ( type === 'mesh' ? 'es' : 's' ) ) );
    
                pendings.push( value );
    
            }
    
            return Promise.all( pendings ).then( function () {
    
                return results;
    
            } );
    
        };
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views
         * @param {number} bufferIndex
         * @return {Promise<ArrayBuffer>}
         */
        GLTFParser.prototype.loadBuffer = function ( bufferIndex ) {
    
            var bufferDef = this.json.buffers[ bufferIndex ];
            var loader = this.fileLoader;
    
            if ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {
    
                throw new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );
    
            }
    
            // If present, GLB container is required to be the first buffer.
            if ( bufferDef.uri === undefined && bufferIndex === 0 ) {
    
                return Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );
    
            }
    
            var options = this.options;
    
            return new Promise( function ( resolve, reject ) {
    
                loader.load( resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {
    
                    reject( new Error( 'THREE.GLTFLoader: Failed to load buffer "' + bufferDef.uri + '".' ) );
    
                } );
    
            } );
    
        };
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views
         * @param {number} bufferViewIndex
         * @return {Promise<ArrayBuffer>}
         */
        GLTFParser.prototype.loadBufferView = function ( bufferViewIndex ) {
    
            var bufferViewDef = this.json.bufferViews[ bufferViewIndex ];
    
            return this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {
    
                var byteLength = bufferViewDef.byteLength || 0;
                var byteOffset = bufferViewDef.byteOffset || 0;
                return buffer.slice( byteOffset, byteOffset + byteLength );
    
            } );
    
        };
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors
         * @param {number} accessorIndex
         * @return {Promise<THREE.BufferAttribute|THREE.InterleavedBufferAttribute>}
         */
        GLTFParser.prototype.loadAccessor = function ( accessorIndex ) {
    
            var parser = this;
            var json = this.json;
    
            var accessorDef = this.json.accessors[ accessorIndex ];
    
            var pendingBufferViews = [];
    
            if ( accessorDef.bufferView !== undefined ) {
    
                pendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );
    
            } else {
    
                pendingBufferViews.push( null );
    
            }
    
            if ( accessorDef.sparse !== undefined ) {
    
                pendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );
                pendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );
    
            }
    
            return Promise.all( pendingBufferViews ).then( function ( bufferViews ) {
    
                var bufferView = bufferViews[ 0 ];
    
                var itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];
                var TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];
    
                // For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.
                var elementBytes = TypedArray.BYTES_PER_ELEMENT;
                var itemBytes = elementBytes * itemSize;
                var byteOffset = accessorDef.byteOffset || 0;
                var byteStride = json.bufferViews[ accessorDef.bufferView ].byteStride;
                var normalized = accessorDef.normalized === true;
                var array, bufferAttribute;
    
                // The buffer is not interleaved if the stride is the item size in bytes.
                if ( byteStride && byteStride !== itemBytes ) {
    
                    var ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType;
                    var ib = parser.cache.get( ibCacheKey );
    
                    if ( ! ib ) {
    
                        // Use the full buffer if it's interleaved.
                        array = new TypedArray( bufferView );
    
                        // Integer parameters to IB/IBA are in array elements, not bytes.
                        ib = new THREE.InterleavedBuffer( array, byteStride / elementBytes );
    
                        parser.cache.add( ibCacheKey, ib );
    
                    }
    
                    bufferAttribute = new THREE.InterleavedBufferAttribute( ib, itemSize, byteOffset / elementBytes, normalized );
    
                } else {
    
                    if ( bufferView === null ) {
    
                        array = new TypedArray( accessorDef.count * itemSize );
    
                    } else {
    
                        array = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );
    
                    }
    
                    bufferAttribute = new THREE.BufferAttribute( array, itemSize, normalized );
    
                }
    
                // https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors
                if ( accessorDef.sparse !== undefined ) {
    
                    var itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;
                    var TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];
    
                    var byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;
                    var byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;
    
                    var sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );
                    var sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );
    
                    if ( bufferView !== null ) {
    
                        // Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.
                        bufferAttribute.setArray( bufferAttribute.array.slice() );
    
                    }
    
                    for ( var i = 0, il = sparseIndices.length; i < il; i ++ ) {
    
                        var index = sparseIndices[ i ];
    
                        bufferAttribute.setX( index, sparseValues[ i * itemSize ] );
                        if ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );
                        if ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );
                        if ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );
                        if ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );
    
                    }
    
                }
    
                return bufferAttribute;
    
            } );
    
        };
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures
         * @param {number} textureIndex
         * @return {Promise<THREE.Texture>}
         */
        GLTFParser.prototype.loadTexture = function ( textureIndex ) {
    
            var parser = this;
            var json = this.json;
            var options = this.options;
            var textureLoader = this.textureLoader;
    
            var URL = window.URL || window.webkitURL;
    
            var textureDef = json.textures[ textureIndex ];
            var source = json.images[ textureDef.source ];
            var sourceURI = source.uri;
            var isObjectURL = false;
    
            if ( source.bufferView !== undefined ) {
    
                // Load binary image data from bufferView, if provided.
    
                sourceURI = parser.getDependency( 'bufferView', source.bufferView ).then( function ( bufferView ) {
    
                    isObjectURL = true;
                    var blob = new Blob( [ bufferView ], { type: source.mimeType } );
                    sourceURI = URL.createObjectURL( blob );
                    return sourceURI;
    
                } );
    
            }
    
            return Promise.resolve( sourceURI ).then( function ( sourceURI ) {
    
                // Load Texture resource.
    
                var loader = THREE.Loader.Handlers.get( sourceURI ) || textureLoader;
    
                return new Promise( function ( resolve, reject ) {
    
                    loader.load( resolveURL( sourceURI, options.path ), resolve, undefined, reject );
    
                } );
    
            } ).then( function ( texture ) {
    
                // Clean up resources and configure Texture.
    
                if ( isObjectURL === true ) {
    
                    URL.revokeObjectURL( sourceURI );
    
                }
    
                texture.flipY = false;
    
                if ( textureDef.name !== undefined ) texture.name = textureDef.name;
    
                texture.format = textureDef.format !== undefined ? WEBGL_TEXTURE_FORMATS[ textureDef.format ] : THREE.RGBAFormat;
    
                if ( textureDef.internalFormat !== undefined && texture.format !== WEBGL_TEXTURE_FORMATS[ textureDef.internalFormat ] ) {
    
                    console.warn( 'THREE.GLTFLoader: Three.js does not support texture internalFormat which is different from texture format. ' +
                                                'internalFormat will be forced to be the same value as format.' );
    
                }
    
                texture.type = textureDef.type !== undefined ? WEBGL_TEXTURE_DATATYPES[ textureDef.type ] : THREE.UnsignedByteType;
    
                var samplers = json.samplers || {};
                var sampler = samplers[ textureDef.sampler ] || {};
    
                texture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || THREE.LinearFilter;
                texture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || THREE.LinearMipMapLinearFilter;
                texture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || THREE.RepeatWrapping;
                texture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || THREE.RepeatWrapping;
    
                return texture;
    
            } );
    
        };
    
        /**
         * Asynchronously assigns a texture to the given material parameters.
         * @param {Object} materialParams
         * @param {string} textureName
         * @param {number} textureIndex
         * @return {Promise}
         */
        GLTFParser.prototype.assignTexture = function ( materialParams, textureName, textureIndex ) {
    
            return this.getDependency( 'texture', textureIndex ).then( function ( texture ) {
    
                materialParams[ textureName ] = texture;
    
            } );
    
        };
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials
         * @param {number} materialIndex
         * @return {Promise<THREE.Material>}
         */
        GLTFParser.prototype.loadMaterial = function ( materialIndex ) {
    
            var parser = this;
            var json = this.json;
            var extensions = this.extensions;
            var materialDef = this.json.materials[ materialIndex ];
    
            var materialType;
            var materialParams = {};
            var materialExtensions = materialDef.extensions || {};
    
            var pending = [];
    
            if ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ] ) {
    
                var sgExtension = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ];
                materialType = sgExtension.getMaterialType( materialDef );
                pending.push( sgExtension.extendParams( materialParams, materialDef, parser ) );
    
            } else if ( materialDef.pbrMetallicRoughness !== undefined ) {
    
                // Specification:
                // https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material
    
                materialType = THREE.MeshStandardMaterial;
    
                var metallicRoughness = materialDef.pbrMetallicRoughness;
    
                materialParams.color = new THREE.Color( 1.0, 1.0, 1.0 );
                materialParams.opacity = 1.0;
    
                if ( Array.isArray( metallicRoughness.baseColorFactor ) ) {
    
                    var array = metallicRoughness.baseColorFactor;
    
                    materialParams.color.fromArray( array );
                    materialParams.opacity = array[ 3 ];
    
                }
    
                if ( metallicRoughness.baseColorTexture !== undefined ) {
    
                    pending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture.index ) );
    
                }
    
                materialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;
                materialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;
    
                if ( metallicRoughness.metallicRoughnessTexture !== undefined ) {
    
                    var textureIndex = metallicRoughness.metallicRoughnessTexture.index;
                    pending.push( parser.assignTexture( materialParams, 'metalnessMap', textureIndex ) );
                    pending.push( parser.assignTexture( materialParams, 'roughnessMap', textureIndex ) );
    
                }
    
            } else {
    
                materialType = THREE.MeshPhongMaterial;
    
            }
    
            if ( materialDef.doubleSided === true ) {
    
                materialParams.side = THREE.DoubleSide;
    
            }
    
            var alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;
    
            if ( alphaMode === ALPHA_MODES.BLEND ) {
    
                materialParams.transparent = true;
    
            } else {
    
                materialParams.transparent = false;
    
                if ( alphaMode === ALPHA_MODES.MASK ) {
    
                    materialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;
    
                }
    
            }
    
            if ( materialDef.normalTexture !== undefined ) {
    
                pending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture.index ) );
    
                materialParams.normalScale = new THREE.Vector2( 1, 1 );
    
                if ( materialDef.normalTexture.scale !== undefined ) {
    
                    materialParams.normalScale.set( materialDef.normalTexture.scale, materialDef.normalTexture.scale );
    
                }
    
            }
    
            if ( materialDef.occlusionTexture !== undefined ) {
    
                pending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture.index ) );
    
                if ( materialDef.occlusionTexture.strength !== undefined ) {
    
                    materialParams.aoMapIntensity = materialDef.occlusionTexture.strength;
    
                }
    
            }
    
            if ( materialDef.emissiveFactor !== undefined ) {
    
                if ( materialType === THREE.MeshBasicMaterial ) {
    
                    materialParams.color = new THREE.Color().fromArray( materialDef.emissiveFactor );
    
                } else {
    
                    materialParams.emissive = new THREE.Color().fromArray( materialDef.emissiveFactor );
    
                }
    
            }
    
            if ( materialDef.emissiveTexture !== undefined ) {
    
                if ( materialType === THREE.MeshBasicMaterial ) {
    
                    pending.push( parser.assignTexture( materialParams, 'map', materialDef.emissiveTexture.index ) );
    
                } else {
    
                    pending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture.index ) );
    
                }
    
            }
    
            return Promise.all( pending ).then( function () {
    
                var material;
    
                if ( materialType === THREE.ShaderMaterial ) {
    
                    material = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].createMaterial( materialParams );
    
                } else {
    
                    material = new materialType( materialParams );
    
                }
    
                if ( materialDef.name !== undefined ) material.name = materialDef.name;
    
                // Normal map textures use OpenGL conventions:
                // https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#materialnormaltexture
                if ( material.normalScale ) {
    
                    material.normalScale.x = - material.normalScale.x;
    
                }
    
                // emissiveTexture and baseColorTexture use sRGB encoding.
                if ( material.map ) material.map.encoding = THREE.sRGBEncoding;
                if ( material.emissiveMap ) material.emissiveMap.encoding = THREE.sRGBEncoding;
    
                if ( materialDef.extras ) material.userData = materialDef.extras;
    
                return material;
    
            } );
    
        };
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry
         * @param {Array<Object>} primitives
         * @return {Promise<Array<THREE.BufferGeometry>>}
         */
        GLTFParser.prototype.loadGeometries = function ( primitives ) {
    
            var cache = this.primitiveCache;
    
            return this.getDependencies( 'accessor' ).then( function ( accessors ) {
    
                var geometries = [];
    
                for ( var i = 0, il = primitives.length; i < il; i ++ ) {
    
                    var primitive = primitives[ i ];
    
                    // See if we've already created this geometry
                    var cached = getCachedGeometry( cache, primitive );
    
                    if ( cached ) {
    
                        // Use the cached geometry if it exists
                        geometries.push( cached );
    
                    } else {
    
                        // Otherwise create a new geometry
                        var geometry = new THREE.BufferGeometry();
    
                        var attributes = primitive.attributes;
    
                        for ( var attributeId in attributes ) {
    
                            var attributeEntry = attributes[ attributeId ];
    
                            var bufferAttribute = accessors[ attributeEntry ];
    
                            switch ( attributeId ) {
    
                                case 'POSITION':
    
                                    geometry.addAttribute( 'position', bufferAttribute );
                                    break;
    
                                case 'NORMAL':
    
                                    geometry.addAttribute( 'normal', bufferAttribute );
                                    break;
    
                                case 'TEXCOORD_0':
                                case 'TEXCOORD0':
                                case 'TEXCOORD':
    
                                    geometry.addAttribute( 'uv', bufferAttribute );
                                    break;
    
                                case 'TEXCOORD_1':
    
                                    geometry.addAttribute( 'uv2', bufferAttribute );
                                    break;
    
                                case 'COLOR_0':
                                case 'COLOR0':
                                case 'COLOR':
    
                                    geometry.addAttribute( 'color', bufferAttribute );
                                    break;
    
                                case 'WEIGHTS_0':
                                case 'WEIGHT': // WEIGHT semantic deprecated.
    
                                    geometry.addAttribute( 'skinWeight', bufferAttribute );
                                    break;
    
                                case 'JOINTS_0':
                                case 'JOINT': // JOINT semantic deprecated.
    
                                    geometry.addAttribute( 'skinIndex', bufferAttribute );
                                    break;
    
                            }
    
                        }
    
                        if ( primitive.indices !== undefined ) {
    
                            geometry.setIndex( accessors[ primitive.indices ] );
    
                        }
    
                        // Cache this geometry
                        cache.push( {
    
                            primitive: primitive,
                            geometry: geometry
    
                        } );
    
                        geometries.push( geometry );
    
                    }
    
                }
    
                return geometries;
    
            } );
    
        };
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes
         * @param {number} meshIndex
         * @return {Promise<THREE.Group|THREE.Mesh|THREE.SkinnedMesh>}
         */
        GLTFParser.prototype.loadMesh = function ( meshIndex ) {
    
            var scope = this;
            var json = this.json;
            var extensions = this.extensions;
    
            var meshDef = this.json.meshes[ meshIndex ];
    
            return this.getMultiDependencies( [
    
                'accessor',
                'material'
    
            ] ).then( function ( dependencies ) {
    
                var group = new THREE.Group();
    
                var primitives = meshDef.primitives;
    
                return scope.loadGeometries( primitives ).then( function ( geometries ) {
    
                    for ( var i = 0, il = primitives.length; i < il; i ++ ) {
    
                        var primitive = primitives[ i ];
                        var geometry = geometries[ i ];
    
                        var material = primitive.material === undefined
                            ? createDefaultMaterial()
                            : dependencies.materials[ primitive.material ];
    
                        if ( material.aoMap
                                && geometry.attributes.uv2 === undefined
                                && geometry.attributes.uv !== undefined ) {
    
                            console.log( 'THREE.GLTFLoader: Duplicating UVs to support aoMap.' );
                            geometry.addAttribute( 'uv2', new THREE.BufferAttribute( geometry.attributes.uv.array, 2 ) );
    
                        }
    
                        // If the material will be modified later on, clone it now.
                        var useVertexColors = geometry.attributes.color !== undefined;
                        var useFlatShading = geometry.attributes.normal === undefined;
                        var useSkinning = meshDef.isSkinnedMesh === true;
                        var useMorphTargets = primitive.targets !== undefined;
    
                        if ( useVertexColors || useFlatShading || useSkinning || useMorphTargets ) {
    
                            if ( material.isGLTFSpecularGlossinessMaterial ) {
    
                                var specGlossExtension = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ];
                                material = specGlossExtension.cloneMaterial( material );
    
                            } else {
    
                                material = material.clone();
    
                            }
    
                        }
    
                        if ( useVertexColors ) {
    
                            material.vertexColors = THREE.VertexColors;
                            material.needsUpdate = true;
    
                        }
    
                        if ( useFlatShading ) {
    
                            material.flatShading = true;
    
                        }
    
                        var mesh;
    
                        if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||
                            primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||
                            primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||
                            primitive.mode === undefined ) {
    
                            if ( useSkinning ) {
    
                                mesh = new THREE.SkinnedMesh( geometry, material );
                                material.skinning = true;
    
                            } else {
    
                                mesh = new THREE.Mesh( geometry, material );
    
                            }
    
                            if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {
    
                                mesh.drawMode = THREE.TriangleStripDrawMode;
    
                            } else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {
    
                                mesh.drawMode = THREE.TriangleFanDrawMode;
    
                            }
    
                        } else if ( primitive.mode === WEBGL_CONSTANTS.LINES ||
                            primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ||
                            primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {
    
                            var cacheKey = 'LineBasicMaterial:' + material.uuid;
    
                            var lineMaterial = scope.cache.get( cacheKey );
    
                            if ( ! lineMaterial ) {
    
                                lineMaterial = new THREE.LineBasicMaterial();
                                THREE.Material.prototype.copy.call( lineMaterial, material );
                                lineMaterial.color.copy( material.color );
                                lineMaterial.lights = false;  // LineBasicMaterial doesn't support lights yet
    
                                scope.cache.add( cacheKey, lineMaterial );
    
                            }
    
                            material = lineMaterial;
    
                            if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {
    
                                mesh = new THREE.LineSegments( geometry, material );
    
                            } else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {
    
                                mesh = new THREE.Line( geometry, material );
    
                            } else {
    
                                mesh = new THREE.LineLoop( geometry, material );
    
                            }
    
                        } else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {
    
                            var cacheKey = 'PointsMaterial:' + material.uuid;
    
                            var pointsMaterial = scope.cache.get( cacheKey );
    
                            if ( ! pointsMaterial ) {
    
                                pointsMaterial = new THREE.PointsMaterial();
                                THREE.Material.prototype.copy.call( pointsMaterial, material );
                                pointsMaterial.color.copy( material.color );
                                pointsMaterial.map = material.map;
                                pointsMaterial.lights = false;  // PointsMaterial doesn't support lights yet
    
                                scope.cache.add( cacheKey, pointsMaterial );
    
                            }
    
                            material = pointsMaterial;
    
                            mesh = new THREE.Points( geometry, material );
    
                        } else {
    
                            throw new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );
    
                        }
    
                        mesh.name = meshDef.name || ( 'mesh_' + meshIndex );
    
                        if ( useMorphTargets ) {
    
                            addMorphTargets( mesh, meshDef, primitive, dependencies.accessors );
    
                        }
    
                        if ( meshDef.extras !== undefined ) mesh.userData = meshDef.extras;
                        if ( primitive.extras !== undefined ) mesh.geometry.userData = primitive.extras;
    
                        // for Specular-Glossiness.
                        if ( material.isGLTFSpecularGlossinessMaterial === true ) {
    
                            mesh.onBeforeRender = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].refreshUniforms;
    
                        }
    
                        if ( primitives.length > 1 ) {
    
                            mesh.name += '_' + i;
    
                            group.add( mesh );
    
                        } else {
    
                            return mesh;
    
                        }
    
                    }
    
                    return group;
    
                } );
    
            } );
    
        };
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras
         * @param {number} cameraIndex
         * @return {Promise<THREE.Camera>}
         */
        GLTFParser.prototype.loadCamera = function ( cameraIndex ) {
    
            var camera;
            var cameraDef = this.json.cameras[ cameraIndex ];
            var params = cameraDef[ cameraDef.type ];
    
            if ( ! params ) {
    
                console.warn( 'THREE.GLTFLoader: Missing camera parameters.' );
                return;
    
            }
    
            if ( cameraDef.type === 'perspective' ) {
    
                var aspectRatio = params.aspectRatio || 1;
                var xfov = params.yfov * aspectRatio;
    
                camera = new THREE.PerspectiveCamera( THREE.Math.radToDeg( xfov ), aspectRatio, params.znear || 1, params.zfar || 2e6 );
    
            } else if ( cameraDef.type === 'orthographic' ) {
    
                camera = new THREE.OrthographicCamera( params.xmag / - 2, params.xmag / 2, params.ymag / 2, params.ymag / - 2, params.znear, params.zfar );
    
            }
    
            if ( cameraDef.name !== undefined ) camera.name = cameraDef.name;
            if ( cameraDef.extras ) camera.userData = cameraDef.extras;
    
            return Promise.resolve( camera );
    
        };
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins
         * @param {number} skinIndex
         * @return {Promise<Object>}
         */
        GLTFParser.prototype.loadSkin = function ( skinIndex ) {
    
            var skinDef = this.json.skins[ skinIndex ];
    
            var skinEntry = { joints: skinDef.joints };
    
            if ( skinDef.inverseBindMatrices === undefined ) {
    
                return Promise.resolve( skinEntry );
    
            }
    
            return this.getDependency( 'accessor', skinDef.inverseBindMatrices ).then( function ( accessor ) {
    
                skinEntry.inverseBindMatrices = accessor;
    
                return skinEntry;
    
            } );
    
        };
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations
         * @param {number} animationIndex
         * @return {Promise<THREE.AnimationClip>}
         */
        GLTFParser.prototype.loadAnimation = function ( animationIndex ) {
    
            var json = this.json;
    
            var animationDef = this.json.animations[ animationIndex ];
    
            return this.getMultiDependencies( [
    
                'accessor',
                'node'
    
            ] ).then( function ( dependencies ) {
    
                var tracks = [];
    
                for ( var i = 0, il = animationDef.channels.length; i < il; i ++ ) {
    
                    var channel = animationDef.channels[ i ];
                    var sampler = animationDef.samplers[ channel.sampler ];
    
                    if ( sampler ) {
    
                        var target = channel.target;
                        var name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.
                        var input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;
                        var output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;
    
                        var inputAccessor = dependencies.accessors[ input ];
                        var outputAccessor = dependencies.accessors[ output ];
    
                        var node = dependencies.nodes[ name ];
    
                        if ( node ) {
    
                            node.updateMatrix();
                            node.matrixAutoUpdate = true;
    
                            var TypedKeyframeTrack;
    
                            switch ( PATH_PROPERTIES[ target.path ] ) {
    
                                case PATH_PROPERTIES.weights:
    
                                    TypedKeyframeTrack = THREE.NumberKeyframeTrack;
                                    break;
    
                                case PATH_PROPERTIES.rotation:
    
                                    TypedKeyframeTrack = THREE.QuaternionKeyframeTrack;
                                    break;
    
                                case PATH_PROPERTIES.position:
                                case PATH_PROPERTIES.scale:
                                default:
    
                                    TypedKeyframeTrack = THREE.VectorKeyframeTrack;
                                    break;
    
                            }
    
                            var targetName = node.name ? node.name : node.uuid;
    
                            var interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : THREE.InterpolateLinear;
    
                            var targetNames = [];
    
                            if ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {
    
                                // node should be THREE.Group here but
                                // PATH_PROPERTIES.weights(morphTargetInfluences) should be
                                // the property of a mesh object under node.
                                // So finding targets here.
    
                                node.traverse( function ( object ) {
    
                                    if ( object.isMesh === true && object.material.morphTargets === true ) {
    
                                        targetNames.push( object.name ? object.name : object.uuid );
    
                                    }
    
                                } );
    
                            } else {
    
                                targetNames.push( targetName );
    
                            }
    
                            // KeyframeTrack.optimize() will modify given 'times' and 'values'
                            // buffers before creating a truncated copy to keep. Because buffers may
                            // be reused by other tracks, make copies here.
                            for ( var j = 0, jl = targetNames.length; j < jl; j ++ ) {
    
                                var track = new TypedKeyframeTrack(
                                    targetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],
                                    THREE.AnimationUtils.arraySlice( inputAccessor.array, 0 ),
                                    THREE.AnimationUtils.arraySlice( outputAccessor.array, 0 ),
                                    interpolation
                                );
    
                                // Here is the trick to enable custom interpolation.
                                // Overrides .createInterpolant in a factory method which creates custom interpolation.
                                if ( sampler.interpolation === 'CUBICSPLINE' ) {
    
                                    track.createInterpolant = function ( result ) {
    
                                        // A CUBICSPLINE keyframe in glTF has three output values for each input value,
                                        // representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()
                                        // must be divided by three to get the interpolant's sampleSize argument.
    
                                        return new GLTFCubicSplineInterpolant( this.times, this.values, this.getValueSize() / 3, result );
    
                                    };
    
                                }
    
                                tracks.push( track );
    
                            }
    
                        }
    
                    }
    
                }
    
                var name = animationDef.name !== undefined ? animationDef.name : 'animation_' + animationIndex;
    
                return new THREE.AnimationClip( name, undefined, tracks );
    
            } );
    
        };
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy
         * @param {number} nodeIndex
         * @return {Promise<THREE.Object3D>}
         */
        GLTFParser.prototype.loadNode = function ( nodeIndex ) {
    
            var json = this.json;
            var extensions = this.extensions;
    
            var meshReferences = this.json.meshReferences;
            var meshUses = this.json.meshUses;
    
            var nodeDef = this.json.nodes[ nodeIndex ];
    
            return this.getMultiDependencies( [
    
                'mesh',
                'skin',
                'camera'
    
            ] ).then( function ( dependencies ) {
    
                var node;
    
                if ( nodeDef.isBone === true ) {
    
                    node = new THREE.Bone();
    
                } else if ( nodeDef.mesh !== undefined ) {
    
                    var mesh = dependencies.meshes[ nodeDef.mesh ];
    
                    node = mesh.clone();
    
                    // for Specular-Glossiness
                    if ( mesh.isGroup === true ) {
    
                        for ( var i = 0, il = mesh.children.length; i < il; i ++ ) {
    
                            var child = mesh.children[ i ];
    
                            if ( child.material && child.material.isGLTFSpecularGlossinessMaterial === true ) {
    
                                node.children[ i ].onBeforeRender = child.onBeforeRender;
    
                            }
    
                        }
    
                    } else {
    
                        if ( mesh.material && mesh.material.isGLTFSpecularGlossinessMaterial === true ) {
    
                            node.onBeforeRender = mesh.onBeforeRender;
    
                        }
    
                    }
    
                    if ( meshReferences[ nodeDef.mesh ] > 1 ) {
    
                        node.name += '_instance_' + meshUses[ nodeDef.mesh ] ++;
    
                    }
    
                } else if ( nodeDef.camera !== undefined ) {
    
                    node = dependencies.cameras[ nodeDef.camera ];
    
                } else if ( nodeDef.extensions
                         && nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS ]
                         && nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS ].light !== undefined ) {
    
                    var lights = extensions[ EXTENSIONS.KHR_LIGHTS ].lights;
                    node = lights[ nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS ].light ];
    
                } else {
    
                    node = new THREE.Object3D();
    
                }
    
                if ( nodeDef.name !== undefined ) {
    
                    node.name = THREE.PropertyBinding.sanitizeNodeName( nodeDef.name );
    
                }
    
                if ( nodeDef.extras ) node.userData = nodeDef.extras;
    
                if ( nodeDef.matrix !== undefined ) {
    
                    var matrix = new THREE.Matrix4();
                    matrix.fromArray( nodeDef.matrix );
                    node.applyMatrix( matrix );
    
                } else {
    
                    if ( nodeDef.translation !== undefined ) {
    
                        node.position.fromArray( nodeDef.translation );
    
                    }
    
                    if ( nodeDef.rotation !== undefined ) {
    
                        node.quaternion.fromArray( nodeDef.rotation );
    
                    }
    
                    if ( nodeDef.scale !== undefined ) {
    
                        node.scale.fromArray( nodeDef.scale );
    
                    }
    
                }
    
                return node;
    
            } );
    
        };
    
        /**
         * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes
         * @param {number} sceneIndex
         * @return {Promise<THREE.Scene>}
         */
        GLTFParser.prototype.loadScene = function () {
    
            // scene node hierachy builder
    
            function buildNodeHierachy( nodeId, parentObject, json, allNodes, skins ) {
    
                var node = allNodes[ nodeId ];
                var nodeDef = json.nodes[ nodeId ];
    
                // build skeleton here as well
    
                if ( nodeDef.skin !== undefined ) {
    
                    var meshes = node.isGroup === true ? node.children : [ node ];
    
                    for ( var i = 0, il = meshes.length; i < il; i ++ ) {
    
                        var mesh = meshes[ i ];
                        var skinEntry = skins[ nodeDef.skin ];
    
                        var bones = [];
                        var boneInverses = [];
    
                        for ( var j = 0, jl = skinEntry.joints.length; j < jl; j ++ ) {
    
                            var jointId = skinEntry.joints[ j ];
                            var jointNode = allNodes[ jointId ];
    
                            if ( jointNode ) {
    
                                bones.push( jointNode );
    
                                var mat = new THREE.Matrix4();
    
                                if ( skinEntry.inverseBindMatrices !== undefined ) {
    
                                    mat.fromArray( skinEntry.inverseBindMatrices.array, j * 16 );
    
                                }
    
                                boneInverses.push( mat );
    
                            } else {
    
                                console.warn( 'THREE.GLTFLoader: Joint "%s" could not be found.', jointId );
    
                            }
    
                        }
    
                        mesh.bind( new THREE.Skeleton( bones, boneInverses ), mesh.matrixWorld );
    
                    }
    
                }
    
                // build node hierachy
    
                parentObject.add( node );
    
                if ( nodeDef.children ) {
    
                    var children = nodeDef.children;
    
                    for ( var i = 0, il = children.length; i < il; i ++ ) {
    
                        var child = children[ i ];
                        buildNodeHierachy( child, node, json, allNodes, skins );
    
                    }
    
                }
    
            }
    
            return function loadScene( sceneIndex ) {
    
                var json = this.json;
                var extensions = this.extensions;
                var sceneDef = this.json.scenes[ sceneIndex ];
    
                return this.getMultiDependencies( [
    
                    'node',
                    'skin'
    
                ] ).then( function ( dependencies ) {
    
                    var scene = new THREE.Scene();
                    if ( sceneDef.name !== undefined ) scene.name = sceneDef.name;
    
                    if ( sceneDef.extras ) scene.userData = sceneDef.extras;
    
                    var nodeIds = sceneDef.nodes || [];
    
                    for ( var i = 0, il = nodeIds.length; i < il; i ++ ) {
    
                        buildNodeHierachy( nodeIds[ i ], scene, json, dependencies.nodes, dependencies.skins );
    
                    }
    
                    // Ambient lighting, if present, is always attached to the scene root.
                    if ( sceneDef.extensions
                             && sceneDef.extensions[ EXTENSIONS.KHR_LIGHTS ]
                             && sceneDef.extensions[ EXTENSIONS.KHR_LIGHTS ].light !== undefined ) {
    
                        var lights = extensions[ EXTENSIONS.KHR_LIGHTS ].lights;
                        scene.add( lights[ sceneDef.extensions[ EXTENSIONS.KHR_LIGHTS ].light ] );
    
                    }
    
                    return scene;
    
                } );
    
            };
    
        }();
    
        return GLTFLoader;
    
    } )();
},{}],"form/lib/MTLLoader":[function(require,module,exports){
/**
 * Loads a Wavefront .mtl file specifying materials
 *
 * @author angelxuanchang
 */

THREE.MTLLoader = function ( manager ) {

	this.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;

};

THREE.MTLLoader.prototype = {

	constructor: THREE.MTLLoader,

	/**
	 * Loads and parses a MTL asset from a URL.
	 *
	 * @param {String} url - URL to the MTL file.
	 * @param {Function} [onLoad] - Callback invoked with the loaded object.
	 * @param {Function} [onProgress] - Callback for download progress.
	 * @param {Function} [onError] - Callback for download errors.
	 *
	 * @see setPath setTexturePath
	 *
	 * @note In order for relative texture references to resolve correctly
	 * you must call setPath and/or setTexturePath explicitly prior to load.
	 */
	load: function ( url, onLoad, onProgress, onError ) {

		var scope = this;

		var loader = new THREE.FileLoader( this.manager );
		loader.setPath( this.path );
		loader.load( url, function ( text ) {

			onLoad( scope.parse( text ) );

		}, onProgress, onError );

	},

	/**
	 * Set base path for resolving references.
	 * If set this path will be prepended to each loaded and found reference.
	 *
	 * @see setTexturePath
	 * @param {String} path
	 *
	 * @example
	 *     mtlLoader.setPath( 'assets/obj/' );
	 *     mtlLoader.load( 'my.mtl', ... );
	 */
	setPath: function ( path ) {

		this.path = path;

	},

	/**
	 * Set base path for resolving texture references.
	 * If set this path will be prepended found texture reference.
	 * If not set and setPath is, it will be used as texture base path.
	 *
	 * @see setPath
	 * @param {String} path
	 *
	 * @example
	 *     mtlLoader.setPath( 'assets/obj/' );
	 *     mtlLoader.setTexturePath( 'assets/textures/' );
	 *     mtlLoader.load( 'my.mtl', ... );
	 */
	setTexturePath: function ( path ) {

		this.texturePath = path;

	},

	setBaseUrl: function ( path ) {

		console.warn( 'THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead.' );

		this.setTexturePath( path );

	},

	setCrossOrigin: function ( value ) {

		this.crossOrigin = value;

	},

	setMaterialOptions: function ( value ) {

		this.materialOptions = value;

	},

	/**
	 * Parses a MTL file.
	 *
	 * @param {String} text - Content of MTL file
	 * @return {THREE.MTLLoader.MaterialCreator}
	 *
	 * @see setPath setTexturePath
	 *
	 * @note In order for relative texture references to resolve correctly
	 * you must call setPath and/or setTexturePath explicitly prior to parse.
	 */
	parse: function ( text ) {

		var lines = text.split( '\n' );
		var info = {};
		var delimiter_pattern = /\s+/;
		var materialsInfo = {};

		for ( var i = 0; i < lines.length; i ++ ) {

			var line = lines[ i ];
			line = line.trim();

			if ( line.length === 0 || line.charAt( 0 ) === '#' ) {

				// Blank line or comment ignore
				continue;

			}

			var pos = line.indexOf( ' ' );

			var key = ( pos >= 0 ) ? line.substring( 0, pos ) : line;
			key = key.toLowerCase();

			var value = ( pos >= 0 ) ? line.substring( pos + 1 ) : '';
			value = value.trim();

			if ( key === 'newmtl' ) {

				// New material

				info = { name: value };
				materialsInfo[ value ] = info;

			} else if ( info ) {

				if ( key === 'ka' || key === 'kd' || key === 'ks' ) {

					var ss = value.split( delimiter_pattern, 3 );
					info[ key ] = [ parseFloat( ss[ 0 ] ), parseFloat( ss[ 1 ] ), parseFloat( ss[ 2 ] ) ];

				} else {

					info[ key ] = value;

				}

			}

		}

		var materialCreator = new THREE.MTLLoader.MaterialCreator( this.texturePath || this.path, this.materialOptions );
		materialCreator.setCrossOrigin( this.crossOrigin );
		materialCreator.setManager( this.manager );
		materialCreator.setMaterials( materialsInfo );
		return materialCreator;

	}

};

/**
 * Create a new THREE-MTLLoader.MaterialCreator
 * @param baseUrl - Url relative to which textures are loaded
 * @param options - Set of options on how to construct the materials
 *                  side: Which side to apply the material
 *                        THREE.FrontSide (default), THREE.BackSide, THREE.DoubleSide
 *                  wrap: What type of wrapping to apply for textures
 *                        THREE.RepeatWrapping (default), THREE.ClampToEdgeWrapping, THREE.MirroredRepeatWrapping
 *                  normalizeRGB: RGBs need to be normalized to 0-1 from 0-255
 *                                Default: false, assumed to be already normalized
 *                  ignoreZeroRGBs: Ignore values of RGBs (Ka,Kd,Ks) that are all 0's
 *                                  Default: false
 * @constructor
 */

THREE.MTLLoader.MaterialCreator = function ( baseUrl, options ) {

	this.baseUrl = baseUrl || '';
	this.options = options;
	this.materialsInfo = {};
	this.materials = {};
	this.materialsArray = [];
	this.nameLookup = {};

	this.side = ( this.options && this.options.side ) ? this.options.side : THREE.FrontSide;
	this.wrap = ( this.options && this.options.wrap ) ? this.options.wrap : THREE.RepeatWrapping;

};

THREE.MTLLoader.MaterialCreator.prototype = {

	constructor: THREE.MTLLoader.MaterialCreator,

	crossOrigin: 'Anonymous',

	setCrossOrigin: function ( value ) {

		this.crossOrigin = value;

	},

	setManager: function ( value ) {

		this.manager = value;

	},

	setMaterials: function ( materialsInfo ) {

		this.materialsInfo = this.convert( materialsInfo );
		this.materials = {};
		this.materialsArray = [];
		this.nameLookup = {};

	},

	convert: function ( materialsInfo ) {

		if ( ! this.options ) return materialsInfo;

		var converted = {};

		for ( var mn in materialsInfo ) {

			// Convert materials info into normalized form based on options

			var mat = materialsInfo[ mn ];

			var covmat = {};

			converted[ mn ] = covmat;

			for ( var prop in mat ) {

				var save = true;
				var value = mat[ prop ];
				var lprop = prop.toLowerCase();

				switch ( lprop ) {

					case 'kd':
					case 'ka':
					case 'ks':

						// Diffuse color (color under white light) using RGB values

						if ( this.options && this.options.normalizeRGB ) {

							value = [ value[ 0 ] / 255, value[ 1 ] / 255, value[ 2 ] / 255 ];

						}

						if ( this.options && this.options.ignoreZeroRGBs ) {

							if ( value[ 0 ] === 0 && value[ 1 ] === 0 && value[ 2 ] === 0 ) {

								// ignore

								save = false;

							}

						}

						break;

					default:

						break;

				}

				if ( save ) {

					covmat[ lprop ] = value;

				}

			}

		}

		return converted;

	},

	preload: function () {

		for ( var mn in this.materialsInfo ) {

			this.create( mn );

		}

	},

	getIndex: function ( materialName ) {

		return this.nameLookup[ materialName ];

	},

	getAsArray: function () {

		var index = 0;

		for ( var mn in this.materialsInfo ) {

			this.materialsArray[ index ] = this.create( mn );
			this.nameLookup[ mn ] = index;
			index ++;

		}

		return this.materialsArray;

	},

	create: function ( materialName ) {

		if ( this.materials[ materialName ] === undefined ) {

			this.createMaterial_( materialName );

		}

		return this.materials[ materialName ];

	},

	createMaterial_: function ( materialName ) {

		// Create material

		var scope = this;
		var mat = this.materialsInfo[ materialName ];
		var params = {

			name: materialName,
			side: this.side

		};

		function resolveURL( baseUrl, url ) {

			if ( typeof url !== 'string' || url === '' )
				return '';

			// Absolute URL
			if ( /^https?:\/\//i.test( url ) ) return url;

			return baseUrl + url;

		}

		function setMapForType( mapType, value ) {

			if ( params[ mapType ] ) return; // Keep the first encountered texture

			var texParams = scope.getTextureParams( value, params );
			var map = scope.loadTexture( resolveURL( scope.baseUrl, texParams.url ) );

			map.repeat.copy( texParams.scale );
			map.offset.copy( texParams.offset );

			map.wrapS = scope.wrap;
			map.wrapT = scope.wrap;

			params[ mapType ] = map;

		}

		for ( var prop in mat ) {

			var value = mat[ prop ];
			var n;

			if ( value === '' ) continue;

			switch ( prop.toLowerCase() ) {

				// Ns is material specular exponent

				case 'kd':

					// Diffuse color (color under white light) using RGB values

					params.color = new THREE.Color().fromArray( value );

					break;

				case 'ks':

					// Specular color (color when light is reflected from shiny surface) using RGB values
					params.specular = new THREE.Color().fromArray( value );

					break;

				case 'map_kd':

					// Diffuse texture map

					setMapForType( "map", value );

					break;

				case 'map_ks':

					// Specular map

					setMapForType( "specularMap", value );

					break;

				case 'norm':

					setMapForType( "normalMap", value );

					break;

				case 'map_bump':
				case 'bump':

					// Bump texture map

					setMapForType( "bumpMap", value );

					break;

				case 'ns':

					// The specular exponent (defines the focus of the specular highlight)
					// A high exponent results in a tight, concentrated highlight. Ns values normally range from 0 to 1000.

					params.shininess = parseFloat( value );

					break;

				case 'd':
					n = parseFloat( value );

					if ( n < 1 ) {

						params.opacity = n;
						params.transparent = true;

					}

					break;

				case 'tr':
					n = parseFloat( value );

					if ( this.options && this.options.invertTrProperty ) n = 1 - n;

					if ( n < 1 ) {

						params.opacity = n;
						params.transparent = true;

					}

					break;

				default:
					break;

			}

		}

		this.materials[ materialName ] = new THREE.MeshPhongMaterial( params );
		return this.materials[ materialName ];

	},

	getTextureParams: function ( value, matParams ) {

		var texParams = {

			scale: new THREE.Vector2( 1, 1 ),
			offset: new THREE.Vector2( 0, 0 )

		 };

		var items = value.split( /\s+/ );
		var pos;

		pos = items.indexOf( '-bm' );

		if ( pos >= 0 ) {

			matParams.bumpScale = parseFloat( items[ pos + 1 ] );
			items.splice( pos, 2 );

		}

		pos = items.indexOf( '-s' );

		if ( pos >= 0 ) {

			texParams.scale.set( parseFloat( items[ pos + 1 ] ), parseFloat( items[ pos + 2 ] ) );
			items.splice( pos, 4 ); // we expect 3 parameters here!

		}

		pos = items.indexOf( '-o' );

		if ( pos >= 0 ) {

			texParams.offset.set( parseFloat( items[ pos + 1 ] ), parseFloat( items[ pos + 2 ] ) );
			items.splice( pos, 4 ); // we expect 3 parameters here!

		}

		texParams.url = items.join( ' ' ).trim();
		return texParams;

	},

	loadTexture: function ( url, mapping, onLoad, onProgress, onError ) {

		var texture;
		var loader = THREE.Loader.Handlers.get( url );
		var manager = ( this.manager !== undefined ) ? this.manager : THREE.DefaultLoadingManager;

		if ( loader === null ) {

			loader = new THREE.TextureLoader( manager );

		}

		if ( loader.setCrossOrigin ) loader.setCrossOrigin( this.crossOrigin );
		texture = loader.load( url, onLoad, onProgress, onError );

		if ( mapping !== undefined ) texture.mapping = mapping;

		return texture;

	}

};

},{}],"form/lib/OBJLoader":[function(require,module,exports){
/**
 * @author mrdoob / http://mrdoob.com/
 */

THREE.OBJLoader = function ( manager ) {
    
        this.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;
    
        this.materials = null;
    
        this.regexp = {
            // v float float float
            vertex_pattern           : /^v\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,
            // vn float float float
            normal_pattern           : /^vn\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,
            // vt float float
            uv_pattern               : /^vt\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,
            // f vertex vertex vertex
            face_vertex              : /^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,
            // f vertex/uv vertex/uv vertex/uv
            face_vertex_uv           : /^f\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+))?/,
            // f vertex/uv/normal vertex/uv/normal vertex/uv/normal
            face_vertex_uv_normal    : /^f\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+)\/(-?\d+))?/,
            // f vertex//normal vertex//normal vertex//normal
            face_vertex_normal       : /^f\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)(?:\s+(-?\d+)\/\/(-?\d+))?/,
            // o object_name | g group_name
            object_pattern           : /^[og]\s*(.+)?/,
            // s boolean
            smoothing_pattern        : /^s\s+(\d+|on|off)/,
            // mtllib file_reference
            material_library_pattern : /^mtllib /,
            // usemtl material_name
            material_use_pattern     : /^usemtl /
        };
    
    };
    
    THREE.OBJLoader.prototype = {
    
        constructor: THREE.OBJLoader,
    
        load: function ( url, onLoad, onProgress, onError ) {
    
            var scope = this;
    
            var loader = new THREE.FileLoader( scope.manager );
            loader.setPath( this.path );
            loader.load( url, function ( text ) {
    
                onLoad( scope.parse( text ) );
    
            }, onProgress, onError );
    
        },
    
        setPath: function ( value ) {
    
            this.path = value;
    
        },
    
        setMaterials: function ( materials ) {
    
            this.materials = materials;
    
        },
    
        _createParserState : function () {
    
            var state = {
                objects  : [],
                object   : {},
    
                vertices : [],
                normals  : [],
                uvs      : [],
    
                materialLibraries : [],
    
                startObject: function ( name, fromDeclaration ) {
    
                    // If the current object (initial from reset) is not from a g/o declaration in the parsed
                    // file. We need to use it for the first parsed g/o to keep things in sync.
                    if ( this.object && this.object.fromDeclaration === false ) {
    
                        this.object.name = name;
                        this.object.fromDeclaration = ( fromDeclaration !== false );
                        return;
    
                    }
    
                    var previousMaterial = ( this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined );
    
                    if ( this.object && typeof this.object._finalize === 'function' ) {
    
                        this.object._finalize( true );
    
                    }
    
                    this.object = {
                        name : name || '',
                        fromDeclaration : ( fromDeclaration !== false ),
    
                        geometry : {
                            vertices : [],
                            normals  : [],
                            uvs      : []
                        },
                        materials : [],
                        smooth : true,
    
                        startMaterial : function( name, libraries ) {
    
                            var previous = this._finalize( false );
    
                            // New usemtl declaration overwrites an inherited material, except if faces were declared
                            // after the material, then it must be preserved for proper MultiMaterial continuation.
                            if ( previous && ( previous.inherited || previous.groupCount <= 0 ) ) {
    
                                this.materials.splice( previous.index, 1 );
    
                            }
    
                            var material = {
                                index      : this.materials.length,
                                name       : name || '',
                                mtllib     : ( Array.isArray( libraries ) && libraries.length > 0 ? libraries[ libraries.length - 1 ] : '' ),
                                smooth     : ( previous !== undefined ? previous.smooth : this.smooth ),
                                groupStart : ( previous !== undefined ? previous.groupEnd : 0 ),
                                groupEnd   : -1,
                                groupCount : -1,
                                inherited  : false,
    
                                clone : function( index ) {
                                    var cloned = {
                                        index      : ( typeof index === 'number' ? index : this.index ),
                                        name       : this.name,
                                        mtllib     : this.mtllib,
                                        smooth     : this.smooth,
                                        groupStart : 0,
                                        groupEnd   : -1,
                                        groupCount : -1,
                                        inherited  : false
                                    };
                                    cloned.clone = this.clone.bind(cloned);
                                    return cloned;
                                }
                            };
    
                            this.materials.push( material );
    
                            return material;
    
                        },
    
                        currentMaterial : function() {
    
                            if ( this.materials.length > 0 ) {
                                return this.materials[ this.materials.length - 1 ];
                            }
    
                            return undefined;
    
                        },
    
                        _finalize : function( end ) {
    
                            var lastMultiMaterial = this.currentMaterial();
                            if ( lastMultiMaterial && lastMultiMaterial.groupEnd === -1 ) {
    
                                lastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;
                                lastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;
                                lastMultiMaterial.inherited = false;
    
                            }
    
                            // Ignore objects tail materials if no face declarations followed them before a new o/g started.
                            if ( end && this.materials.length > 1 ) {
    
                                for ( var mi = this.materials.length - 1; mi >= 0; mi-- ) {
                                    if ( this.materials[mi].groupCount <= 0 ) {
                                        this.materials.splice( mi, 1 );
                                    }
                                }
    
                            }
    
                            // Guarantee at least one empty material, this makes the creation later more straight forward.
                            if ( end && this.materials.length === 0 ) {
    
                                this.materials.push({
                                    name   : '',
                                    smooth : this.smooth
                                });
    
                            }
    
                            return lastMultiMaterial;
    
                        }
                    };
    
                    // Inherit previous objects material.
                    // Spec tells us that a declared material must be set to all objects until a new material is declared.
                    // If a usemtl declaration is encountered while this new object is being parsed, it will
                    // overwrite the inherited material. Exception being that there was already face declarations
                    // to the inherited material, then it will be preserved for proper MultiMaterial continuation.
    
                    if ( previousMaterial && previousMaterial.name && typeof previousMaterial.clone === "function" ) {
    
                        var declared = previousMaterial.clone( 0 );
                        declared.inherited = true;
                        this.object.materials.push( declared );
    
                    }
    
                    this.objects.push( this.object );
    
                },
    
                finalize : function() {
    
                    if ( this.object && typeof this.object._finalize === 'function' ) {
    
                        this.object._finalize( true );
    
                    }
    
                },
    
                parseVertexIndex: function ( value, len ) {
    
                    var index = parseInt( value, 10 );
                    return ( index >= 0 ? index - 1 : index + len / 3 ) * 3;
    
                },
    
                parseNormalIndex: function ( value, len ) {
    
                    var index = parseInt( value, 10 );
                    return ( index >= 0 ? index - 1 : index + len / 3 ) * 3;
    
                },
    
                parseUVIndex: function ( value, len ) {
    
                    var index = parseInt( value, 10 );
                    return ( index >= 0 ? index - 1 : index + len / 2 ) * 2;
    
                },
    
                addVertex: function ( a, b, c ) {
    
                    var src = this.vertices;
                    var dst = this.object.geometry.vertices;
    
                    dst.push( src[ a + 0 ] );
                    dst.push( src[ a + 1 ] );
                    dst.push( src[ a + 2 ] );
                    dst.push( src[ b + 0 ] );
                    dst.push( src[ b + 1 ] );
                    dst.push( src[ b + 2 ] );
                    dst.push( src[ c + 0 ] );
                    dst.push( src[ c + 1 ] );
                    dst.push( src[ c + 2 ] );
    
                },
    
                addVertexLine: function ( a ) {
    
                    var src = this.vertices;
                    var dst = this.object.geometry.vertices;
    
                    dst.push( src[ a + 0 ] );
                    dst.push( src[ a + 1 ] );
                    dst.push( src[ a + 2 ] );
    
                },
    
                addNormal : function ( a, b, c ) {
    
                    var src = this.normals;
                    var dst = this.object.geometry.normals;
    
                    dst.push( src[ a + 0 ] );
                    dst.push( src[ a + 1 ] );
                    dst.push( src[ a + 2 ] );
                    dst.push( src[ b + 0 ] );
                    dst.push( src[ b + 1 ] );
                    dst.push( src[ b + 2 ] );
                    dst.push( src[ c + 0 ] );
                    dst.push( src[ c + 1 ] );
                    dst.push( src[ c + 2 ] );
    
                },
    
                addUV: function ( a, b, c ) {
    
                    var src = this.uvs;
                    var dst = this.object.geometry.uvs;
    
                    dst.push( src[ a + 0 ] );
                    dst.push( src[ a + 1 ] );
                    dst.push( src[ b + 0 ] );
                    dst.push( src[ b + 1 ] );
                    dst.push( src[ c + 0 ] );
                    dst.push( src[ c + 1 ] );
    
                },
    
                addUVLine: function ( a ) {
    
                    var src = this.uvs;
                    var dst = this.object.geometry.uvs;
    
                    dst.push( src[ a + 0 ] );
                    dst.push( src[ a + 1 ] );
    
                },
    
                addFace: function ( a, b, c, d, ua, ub, uc, ud, na, nb, nc, nd ) {
    
                    var vLen = this.vertices.length;
    
                    var ia = this.parseVertexIndex( a, vLen );
                    var ib = this.parseVertexIndex( b, vLen );
                    var ic = this.parseVertexIndex( c, vLen );
                    var id;
    
                    if ( d === undefined ) {
    
                        this.addVertex( ia, ib, ic );
    
                    } else {
    
                        id = this.parseVertexIndex( d, vLen );
    
                        this.addVertex( ia, ib, id );
                        this.addVertex( ib, ic, id );
    
                    }
    
                    if ( ua !== undefined ) {
    
                        var uvLen = this.uvs.length;
    
                        ia = this.parseUVIndex( ua, uvLen );
                        ib = this.parseUVIndex( ub, uvLen );
                        ic = this.parseUVIndex( uc, uvLen );
    
                        if ( d === undefined ) {
    
                            this.addUV( ia, ib, ic );
    
                        } else {
    
                            id = this.parseUVIndex( ud, uvLen );
    
                            this.addUV( ia, ib, id );
                            this.addUV( ib, ic, id );
    
                        }
    
                    }
    
                    if ( na !== undefined ) {
    
                        // Normals are many times the same. If so, skip function call and parseInt.
                        var nLen = this.normals.length;
                        ia = this.parseNormalIndex( na, nLen );
    
                        ib = na === nb ? ia : this.parseNormalIndex( nb, nLen );
                        ic = na === nc ? ia : this.parseNormalIndex( nc, nLen );
    
                        if ( d === undefined ) {
    
                            this.addNormal( ia, ib, ic );
    
                        } else {
    
                            id = this.parseNormalIndex( nd, nLen );
    
                            this.addNormal( ia, ib, id );
                            this.addNormal( ib, ic, id );
    
                        }
    
                    }
    
                },
    
                addLineGeometry: function ( vertices, uvs ) {
    
                    this.object.geometry.type = 'Line';
    
                    var vLen = this.vertices.length;
                    var uvLen = this.uvs.length;
    
                    for ( var vi = 0, l = vertices.length; vi < l; vi ++ ) {
    
                        this.addVertexLine( this.parseVertexIndex( vertices[ vi ], vLen ) );
    
                    }
    
                    for ( var uvi = 0, l = uvs.length; uvi < l; uvi ++ ) {
    
                        this.addUVLine( this.parseUVIndex( uvs[ uvi ], uvLen ) );
    
                    }
    
                }
    
            };
    
            state.startObject( '', false );
    
            return state;
    
        },
    
        parse: function ( text ) {
    
            console.time( 'OBJLoader' );
    
            var state = this._createParserState();
    
            if ( text.indexOf( '\r\n' ) !== - 1 ) {
    
                // This is faster than String.split with regex that splits on both
                text = text.replace( /\r\n/g, '\n' );
    
            }
    
            if ( text.indexOf( '\\\n' ) !== - 1) {
    
                // join lines separated by a line continuation character (\)
                text = text.replace( /\\\n/g, '' );
    
            }
    
            var lines = text.split( '\n' );
            var line = '', lineFirstChar = '', lineSecondChar = '';
            var lineLength = 0;
            var result = [];
    
            // Faster to just trim left side of the line. Use if available.
            var trimLeft = ( typeof ''.trimLeft === 'function' );
    
            for ( var i = 0, l = lines.length; i < l; i ++ ) {
    
                line = lines[ i ];
    
                line = trimLeft ? line.trimLeft() : line.trim();
    
                lineLength = line.length;
    
                if ( lineLength === 0 ) continue;
    
                lineFirstChar = line.charAt( 0 );
    
                // @todo invoke passed in handler if any
                if ( lineFirstChar === '#' ) continue;
    
                if ( lineFirstChar === 'v' ) {
    
                    lineSecondChar = line.charAt( 1 );
    
                    if ( lineSecondChar === ' ' && ( result = this.regexp.vertex_pattern.exec( line ) ) !== null ) {
    
                        // 0                  1      2      3
                        // ["v 1.0 2.0 3.0", "1.0", "2.0", "3.0"]
    
                        state.vertices.push(
                            parseFloat( result[ 1 ] ),
                            parseFloat( result[ 2 ] ),
                            parseFloat( result[ 3 ] )
                        );
    
                    } else if ( lineSecondChar === 'n' && ( result = this.regexp.normal_pattern.exec( line ) ) !== null ) {
    
                        // 0                   1      2      3
                        // ["vn 1.0 2.0 3.0", "1.0", "2.0", "3.0"]
    
                        state.normals.push(
                            parseFloat( result[ 1 ] ),
                            parseFloat( result[ 2 ] ),
                            parseFloat( result[ 3 ] )
                        );
    
                    } else if ( lineSecondChar === 't' && ( result = this.regexp.uv_pattern.exec( line ) ) !== null ) {
    
                        // 0               1      2
                        // ["vt 0.1 0.2", "0.1", "0.2"]
    
                        state.uvs.push(
                            parseFloat( result[ 1 ] ),
                            parseFloat( result[ 2 ] )
                        );
    
                    } else {
    
                        throw new Error( "Unexpected vertex/normal/uv line: '" + line  + "'" );
    
                    }
    
                } else if ( lineFirstChar === "f" ) {
    
                    if ( ( result = this.regexp.face_vertex_uv_normal.exec( line ) ) !== null ) {
    
                        // f vertex/uv/normal vertex/uv/normal vertex/uv/normal
                        // 0                        1    2    3    4    5    6    7    8    9   10         11         12
                        // ["f 1/1/1 2/2/2 3/3/3", "1", "1", "1", "2", "2", "2", "3", "3", "3", undefined, undefined, undefined]
    
                        state.addFace(
                            result[ 1 ], result[ 4 ], result[ 7 ], result[ 10 ],
                            result[ 2 ], result[ 5 ], result[ 8 ], result[ 11 ],
                            result[ 3 ], result[ 6 ], result[ 9 ], result[ 12 ]
                        );
    
                    } else if ( ( result = this.regexp.face_vertex_uv.exec( line ) ) !== null ) {
    
                        // f vertex/uv vertex/uv vertex/uv
                        // 0                  1    2    3    4    5    6   7          8
                        // ["f 1/1 2/2 3/3", "1", "1", "2", "2", "3", "3", undefined, undefined]
    
                        state.addFace(
                            result[ 1 ], result[ 3 ], result[ 5 ], result[ 7 ],
                            result[ 2 ], result[ 4 ], result[ 6 ], result[ 8 ]
                        );
    
                    } else if ( ( result = this.regexp.face_vertex_normal.exec( line ) ) !== null ) {
    
                        // f vertex//normal vertex//normal vertex//normal
                        // 0                     1    2    3    4    5    6   7          8
                        // ["f 1//1 2//2 3//3", "1", "1", "2", "2", "3", "3", undefined, undefined]
    
                        state.addFace(
                            result[ 1 ], result[ 3 ], result[ 5 ], result[ 7 ],
                            undefined, undefined, undefined, undefined,
                            result[ 2 ], result[ 4 ], result[ 6 ], result[ 8 ]
                        );
    
                    } else if ( ( result = this.regexp.face_vertex.exec( line ) ) !== null ) {
    
                        // f vertex vertex vertex
                        // 0            1    2    3   4
                        // ["f 1 2 3", "1", "2", "3", undefined]
    
                        state.addFace(
                            result[ 1 ], result[ 2 ], result[ 3 ], result[ 4 ]
                        );
    
                    } else {
    
                        throw new Error( "Unexpected face line: '" + line  + "'" );
    
                    }
    
                } else if ( lineFirstChar === "l" ) {
    
                    var lineParts = line.substring( 1 ).trim().split( " " );
                    var lineVertices = [], lineUVs = [];
    
                    if ( line.indexOf( "/" ) === - 1 ) {
    
                        lineVertices = lineParts;
    
                    } else {
    
                        for ( var li = 0, llen = lineParts.length; li < llen; li ++ ) {
    
                            var parts = lineParts[ li ].split( "/" );
    
                            if ( parts[ 0 ] !== "" ) lineVertices.push( parts[ 0 ] );
                            if ( parts[ 1 ] !== "" ) lineUVs.push( parts[ 1 ] );
    
                        }
    
                    }
                    state.addLineGeometry( lineVertices, lineUVs );
    
                } else if ( ( result = this.regexp.object_pattern.exec( line ) ) !== null ) {
    
                    // o object_name
                    // or
                    // g group_name
    
                    // WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869
                    // var name = result[ 0 ].substr( 1 ).trim();
                    var name = ( " " + result[ 0 ].substr( 1 ).trim() ).substr( 1 );
    
                    state.startObject( name );
    
                } else if ( this.regexp.material_use_pattern.test( line ) ) {
    
                    // material
    
                    state.object.startMaterial( line.substring( 7 ).trim(), state.materialLibraries );
    
                } else if ( this.regexp.material_library_pattern.test( line ) ) {
    
                    // mtl file
    
                    state.materialLibraries.push( line.substring( 7 ).trim() );
    
                } else if ( ( result = this.regexp.smoothing_pattern.exec( line ) ) !== null ) {
    
                    // smooth shading
    
                    // @todo Handle files that have varying smooth values for a set of faces inside one geometry,
                    // but does not define a usemtl for each face set.
                    // This should be detected and a dummy material created (later MultiMaterial and geometry groups).
                    // This requires some care to not create extra material on each smooth value for "normal" obj files.
                    // where explicit usemtl defines geometry groups.
                    // Example asset: examples/models/obj/cerberus/Cerberus.obj
    
                    var value = result[ 1 ].trim().toLowerCase();
                    state.object.smooth = ( value === '1' || value === 'on' );
    
                    var material = state.object.currentMaterial();
                    if ( material ) {
    
                        material.smooth = state.object.smooth;
    
                    }
    
                } else {
    
                    // Handle null terminated files without exception
                    if ( line === '\0' ) continue;
    
                    throw new Error( "Unexpected line: '" + line  + "'" );
    
                }
    
            }
    
            state.finalize();
    
            var container = new THREE.Group();
            container.materialLibraries = [].concat( state.materialLibraries );
    
            for ( var i = 0, l = state.objects.length; i < l; i ++ ) {
    
                var object = state.objects[ i ];
                var geometry = object.geometry;
                var materials = object.materials;
                var isLine = ( geometry.type === 'Line' );
    
                // Skip o/g line declarations that did not follow with any faces
                if ( geometry.vertices.length === 0 ) continue;
    
                var buffergeometry = new THREE.BufferGeometry();
    
                buffergeometry.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( geometry.vertices ), 3 ) );
    
                if ( geometry.normals.length > 0 ) {
    
                    buffergeometry.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( geometry.normals ), 3 ) );
    
                } else {
    
                    buffergeometry.computeVertexNormals();
    
                }
    
                if ( geometry.uvs.length > 0 ) {
    
                    buffergeometry.addAttribute( 'uv', new THREE.BufferAttribute( new Float32Array( geometry.uvs ), 2 ) );
    
                }
    
                // Create materials
    
                var createdMaterials = [];
    
                for ( var mi = 0, miLen = materials.length; mi < miLen ; mi++ ) {
    
                    var sourceMaterial = materials[mi];
                    var material = undefined;
    
                    if ( this.materials !== null ) {
    
                        material = this.materials.create( sourceMaterial.name );
    
                        // mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.
                        if ( isLine && material && ! ( material instanceof THREE.LineBasicMaterial ) ) {
    
                            var materialLine = new THREE.LineBasicMaterial();
                            materialLine.copy( material );
                            material = materialLine;
    
                        }
    
                    }
    
                    if ( ! material ) {
    
                        material = ( ! isLine ? new THREE.MeshPhongMaterial() : new THREE.LineBasicMaterial() );
                        material.name = sourceMaterial.name;
    
                    }
    
                    material.shading = sourceMaterial.smooth ? THREE.SmoothShading : THREE.FlatShading;
    
                    createdMaterials.push(material);
    
                }
    
                // Create mesh
    
                var mesh;
    
                if ( createdMaterials.length > 1 ) {
    
                    for ( var mi = 0, miLen = materials.length; mi < miLen ; mi++ ) {
    
                        var sourceMaterial = materials[mi];
                        buffergeometry.addGroup( sourceMaterial.groupStart, sourceMaterial.groupCount, mi );
    
                    }
    
                    mesh = ( ! isLine ? new THREE.Mesh( buffergeometry, createdMaterials ) : new THREE.LineSegments( buffergeometry, createdMaterials ) );
    
                } else {
    
                    mesh = ( ! isLine ? new THREE.Mesh( buffergeometry, createdMaterials[ 0 ] ) : new THREE.LineSegments( buffergeometry, createdMaterials[ 0 ] ) );
                }
    
                mesh.name = object.name;
    
                container.add( mesh );
    
            }
    
            console.timeEnd( 'OBJLoader' );
    
            return container;
    
        }
    
    };    
},{}],"form/lib/OrbitControls":[function(require,module,exports){
/**
 * @author qiao / https://github.com/qiao
 * @author mrdoob / http://mrdoob.com
 * @author alteredq / http://alteredqualia.com/
 * @author WestLangley / http://github.com/WestLangley
 * @author erich666 / http://erichaines.com
 */

// This set of controls performs orbiting, dollying (zooming), and panning.
// Unlike TrackballControls, it maintains the "up" direction object.up (+Y by default).
//
//    Orbit - left mouse / touch: one finger move
//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish
//    Pan - right mouse, or arrow keys / touch: three finger swipe

THREE.OrbitControls = function ( object, domElement ) {

	this.object = object;

	this.domElement = ( domElement !== undefined ) ? domElement : document;

	// Set to false to disable this control
	this.enabled = true;

	// "target" sets the location of focus, where the object orbits around
	this.target = new THREE.Vector3();

	// How far you can dolly in and out ( PerspectiveCamera only )
	this.minDistance = 0;
	this.maxDistance = Infinity;

	// How far you can zoom in and out ( OrthographicCamera only )
	this.minZoom = 0;
	this.maxZoom = Infinity;

	// How far you can orbit vertically, upper and lower limits.
	// Range is 0 to Math.PI radians.
	this.minPolarAngle = 0; // radians
	this.maxPolarAngle = Math.PI; // radians

	// How far you can orbit horizontally, upper and lower limits.
	// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].
	this.minAzimuthAngle = - Infinity; // radians
	this.maxAzimuthAngle = Infinity; // radians

	// Set to true to enable damping (inertia)
	// If damping is enabled, you must call controls.update() in your animation loop
	this.enableDamping = false;
	this.dampingFactor = 0.25;

	// This option actually enables dollying in and out; left as "zoom" for backwards compatibility.
	// Set to false to disable zooming
	this.enableZoom = true;
	this.zoomSpeed = 1.0;

	// Set to false to disable rotating
	this.enableRotate = true;
	this.rotateSpeed = 1.0;

	// Set to false to disable panning
	this.enablePan = true;
	this.keyPanSpeed = 7.0;	// pixels moved per arrow key push

	// Set to true to automatically rotate around the target
	// If auto-rotate is enabled, you must call controls.update() in your animation loop
	this.autoRotate = false;
	this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60

	// Set to false to disable use of the keys
	this.enableKeys = true;

	// The four arrow keys
	this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };

	// Mouse buttons
	this.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };

	// for reset
	this.target0 = this.target.clone();
	this.position0 = this.object.position.clone();
	this.zoom0 = this.object.zoom;

	//
	// public methods
	//

	this.getPolarAngle = function () {

		return spherical.phi;

	};

	this.getAzimuthalAngle = function () {

		return spherical.theta;

	};

	this.saveState = function () {

		scope.target0.copy( scope.target );
		scope.position0.copy( scope.object.position );
		scope.zoom0 = scope.object.zoom;

	};

	this.reset = function () {

		scope.target.copy( scope.target0 );
		scope.object.position.copy( scope.position0 );
		scope.object.zoom = scope.zoom0;

		scope.object.updateProjectionMatrix();
		scope.dispatchEvent( changeEvent );

		scope.update();

		state = STATE.NONE;

	};

	// this method is exposed, but perhaps it would be better if we can make it private...
	this.update = function () {

		var offset = new THREE.Vector3();

		// so camera.up is the orbit axis
		var quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );
		var quatInverse = quat.clone().inverse();

		var lastPosition = new THREE.Vector3();
		var lastQuaternion = new THREE.Quaternion();

		return function update() {

			var position = scope.object.position;

			offset.copy( position ).sub( scope.target );

			// rotate offset to "y-axis-is-up" space
			offset.applyQuaternion( quat );

			// angle from z-axis around y-axis
			spherical.setFromVector3( offset );

			if ( scope.autoRotate && state === STATE.NONE ) {

				rotateLeft( getAutoRotationAngle() );

			}

			spherical.theta += sphericalDelta.theta;
			spherical.phi += sphericalDelta.phi;

			// restrict theta to be between desired limits
			spherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );

			// restrict phi to be between desired limits
			spherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );

			spherical.makeSafe();


			spherical.radius *= scale;

			// restrict radius to be between desired limits
			spherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );

			// move target to panned location
			scope.target.add( panOffset );

			offset.setFromSpherical( spherical );

			// rotate offset back to "camera-up-vector-is-up" space
			offset.applyQuaternion( quatInverse );

			position.copy( scope.target ).add( offset );

			scope.object.lookAt( scope.target );

			if ( scope.enableDamping === true ) {

				sphericalDelta.theta *= ( 1 - scope.dampingFactor );
				sphericalDelta.phi *= ( 1 - scope.dampingFactor );

			} else {

				sphericalDelta.set( 0, 0, 0 );

			}

			scale = 1;
			panOffset.set( 0, 0, 0 );

			// update condition is:
			// min(camera displacement, camera rotation in radians)^2 > EPS
			// using small-angle approximation cos(x/2) = 1 - x^2 / 8

			if ( zoomChanged ||
				lastPosition.distanceToSquared( scope.object.position ) > EPS ||
				8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {

				scope.dispatchEvent( changeEvent );

				lastPosition.copy( scope.object.position );
				lastQuaternion.copy( scope.object.quaternion );
				zoomChanged = false;

				return true;

			}

			return false;

		};

	}();

	this.dispose = function () {

		scope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );
		scope.domElement.removeEventListener( 'mousedown', onMouseDown, false );
		scope.domElement.removeEventListener( 'wheel', onMouseWheel, false );

		scope.domElement.removeEventListener( 'touchstart', onTouchStart, false );
		scope.domElement.removeEventListener( 'touchend', onTouchEnd, false );
		scope.domElement.removeEventListener( 'touchmove', onTouchMove, false );

		document.removeEventListener( 'mousemove', onMouseMove, false );
		document.removeEventListener( 'mouseup', onMouseUp, false );

		window.removeEventListener( 'keydown', onKeyDown, false );

		//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?

	};

	//
	// internals
	//

	var scope = this;

	var changeEvent = { type: 'change' };
	var startEvent = { type: 'start' };
	var endEvent = { type: 'end' };

	var STATE = { NONE: - 1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 };

	var state = STATE.NONE;

	var EPS = 0.000001;

	// current position in spherical coordinates
	var spherical = new THREE.Spherical();
	var sphericalDelta = new THREE.Spherical();

	var scale = 1;
	var panOffset = new THREE.Vector3();
	var zoomChanged = false;

	var rotateStart = new THREE.Vector2();
	var rotateEnd = new THREE.Vector2();
	var rotateDelta = new THREE.Vector2();

	var panStart = new THREE.Vector2();
	var panEnd = new THREE.Vector2();
	var panDelta = new THREE.Vector2();

	var dollyStart = new THREE.Vector2();
	var dollyEnd = new THREE.Vector2();
	var dollyDelta = new THREE.Vector2();

	function getAutoRotationAngle() {

		return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;

	}

	function getZoomScale() {

		return Math.pow( 0.95, scope.zoomSpeed );

	}

	function rotateLeft( angle ) {

		sphericalDelta.theta -= angle;

	}

	function rotateUp( angle ) {

		sphericalDelta.phi -= angle;

	}

	var panLeft = function () {

		var v = new THREE.Vector3();

		return function panLeft( distance, objectMatrix ) {

			v.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix
			v.multiplyScalar( - distance );

			panOffset.add( v );

		};

	}();

	var panUp = function () {

		var v = new THREE.Vector3();

		return function panUp( distance, objectMatrix ) {

			v.setFromMatrixColumn( objectMatrix, 1 ); // get Y column of objectMatrix
			v.multiplyScalar( distance );

			panOffset.add( v );

		};

	}();

	// deltaX and deltaY are in pixels; right and down are positive
	var pan = function () {

		var offset = new THREE.Vector3();

		return function pan( deltaX, deltaY ) {

			var element = scope.domElement === document ? scope.domElement.body : scope.domElement;

			if ( scope.object.isPerspectiveCamera ) {

				// perspective
				var position = scope.object.position;
				offset.copy( position ).sub( scope.target );
				var targetDistance = offset.length();

				// half of the fov is center to top of screen
				targetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );

				// we actually don't use screenWidth, since perspective camera is fixed to screen height
				panLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );
				panUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );

			} else if ( scope.object.isOrthographicCamera ) {

				// orthographic
				panLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );
				panUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );

			} else {

				// camera neither orthographic nor perspective
				console.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );
				scope.enablePan = false;

			}

		};

	}();

	function dollyIn( dollyScale ) {

		if ( scope.object.isPerspectiveCamera ) {

			scale /= dollyScale;

		} else if ( scope.object.isOrthographicCamera ) {

			scope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );
			scope.object.updateProjectionMatrix();
			zoomChanged = true;

		} else {

			console.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );
			scope.enableZoom = false;

		}

	}

	function dollyOut( dollyScale ) {

		if ( scope.object.isPerspectiveCamera ) {

			scale *= dollyScale;

		} else if ( scope.object.isOrthographicCamera ) {

			scope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );
			scope.object.updateProjectionMatrix();
			zoomChanged = true;

		} else {

			console.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );
			scope.enableZoom = false;

		}

	}

	//
	// event callbacks - update the object state
	//

	function handleMouseDownRotate( event ) {

		//console.log( 'handleMouseDownRotate' );

		rotateStart.set( event.clientX, event.clientY );

	}

	function handleMouseDownDolly( event ) {

		//console.log( 'handleMouseDownDolly' );

		dollyStart.set( event.clientX, event.clientY );

	}

	function handleMouseDownPan( event ) {

		//console.log( 'handleMouseDownPan' );

		panStart.set( event.clientX, event.clientY );

	}

	function handleMouseMoveRotate( event ) {

		//console.log( 'handleMouseMoveRotate' );

		rotateEnd.set( event.clientX, event.clientY );
		rotateDelta.subVectors( rotateEnd, rotateStart );

		var element = scope.domElement === document ? scope.domElement.body : scope.domElement;

		// rotating across whole screen goes 360 degrees around
		rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );

		// rotating up and down along whole screen attempts to go 360, but limited to 180
		rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );

		rotateStart.copy( rotateEnd );

		scope.update();

	}

	function handleMouseMoveDolly( event ) {

		//console.log( 'handleMouseMoveDolly' );

		dollyEnd.set( event.clientX, event.clientY );

		dollyDelta.subVectors( dollyEnd, dollyStart );

		if ( dollyDelta.y > 0 ) {

			dollyIn( getZoomScale() );

		} else if ( dollyDelta.y < 0 ) {

			dollyOut( getZoomScale() );

		}

		dollyStart.copy( dollyEnd );

		scope.update();

	}

	function handleMouseMovePan( event ) {

		//console.log( 'handleMouseMovePan' );

		panEnd.set( event.clientX, event.clientY );

		panDelta.subVectors( panEnd, panStart );

		pan( panDelta.x, panDelta.y );

		panStart.copy( panEnd );

		scope.update();

	}

	function handleMouseUp( event ) {

		// console.log( 'handleMouseUp' );

	}

	function handleMouseWheel( event ) {

		// console.log( 'handleMouseWheel' );

		if ( event.deltaY < 0 ) {

			dollyOut( getZoomScale() );

		} else if ( event.deltaY > 0 ) {

			dollyIn( getZoomScale() );

		}

		scope.update();

	}

	function handleKeyDown( event ) {

		//console.log( 'handleKeyDown' );

		switch ( event.keyCode ) {

			case scope.keys.UP:
				pan( 0, scope.keyPanSpeed );
				scope.update();
				break;

			case scope.keys.BOTTOM:
				pan( 0, - scope.keyPanSpeed );
				scope.update();
				break;

			case scope.keys.LEFT:
				pan( scope.keyPanSpeed, 0 );
				scope.update();
				break;

			case scope.keys.RIGHT:
				pan( - scope.keyPanSpeed, 0 );
				scope.update();
				break;

		}

	}

	function handleTouchStartRotate( event ) {

		//console.log( 'handleTouchStartRotate' );

		rotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );

	}

	function handleTouchStartDolly( event ) {

		//console.log( 'handleTouchStartDolly' );

		var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;
		var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;

		var distance = Math.sqrt( dx * dx + dy * dy );

		dollyStart.set( 0, distance );

	}

	function handleTouchStartPan( event ) {

		//console.log( 'handleTouchStartPan' );

		panStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );

	}

	function handleTouchMoveRotate( event ) {

		//console.log( 'handleTouchMoveRotate' );

		rotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );
		rotateDelta.subVectors( rotateEnd, rotateStart );

		var element = scope.domElement === document ? scope.domElement.body : scope.domElement;

		// rotating across whole screen goes 360 degrees around
		rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );

		// rotating up and down along whole screen attempts to go 360, but limited to 180
		rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );

		rotateStart.copy( rotateEnd );

		scope.update();

	}

	function handleTouchMoveDolly( event ) {

		//console.log( 'handleTouchMoveDolly' );

		var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;
		var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;

		var distance = Math.sqrt( dx * dx + dy * dy );

		dollyEnd.set( 0, distance );

		dollyDelta.subVectors( dollyEnd, dollyStart );

		if ( dollyDelta.y > 0 ) {

			dollyOut( getZoomScale() );

		} else if ( dollyDelta.y < 0 ) {

			dollyIn( getZoomScale() );

		}

		dollyStart.copy( dollyEnd );

		scope.update();

	}

	function handleTouchMovePan( event ) {

		//console.log( 'handleTouchMovePan' );

		panEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );

		panDelta.subVectors( panEnd, panStart );

		pan( panDelta.x, panDelta.y );

		panStart.copy( panEnd );

		scope.update();

	}

	function handleTouchEnd( event ) {

		//console.log( 'handleTouchEnd' );

	}

	//
	// event handlers - FSM: listen for events and reset state
	//

	function onMouseDown( event ) {

		if ( scope.enabled === false ) return;

		event.preventDefault();

		switch ( event.button ) {

			case scope.mouseButtons.ORBIT:

				if ( scope.enableRotate === false ) return;

				handleMouseDownRotate( event );

				state = STATE.ROTATE;

				break;

			case scope.mouseButtons.ZOOM:

				if ( scope.enableZoom === false ) return;

				handleMouseDownDolly( event );

				state = STATE.DOLLY;

				break;

			case scope.mouseButtons.PAN:

				if ( scope.enablePan === false ) return;

				handleMouseDownPan( event );

				state = STATE.PAN;

				break;

		}

		if ( state !== STATE.NONE ) {

			document.addEventListener( 'mousemove', onMouseMove, false );
			document.addEventListener( 'mouseup', onMouseUp, false );

			scope.dispatchEvent( startEvent );

		}

	}

	function onMouseMove( event ) {

		if ( scope.enabled === false ) return;

		event.preventDefault();

		switch ( state ) {

			case STATE.ROTATE:

				if ( scope.enableRotate === false ) return;

				handleMouseMoveRotate( event );

				break;

			case STATE.DOLLY:

				if ( scope.enableZoom === false ) return;

				handleMouseMoveDolly( event );

				break;

			case STATE.PAN:

				if ( scope.enablePan === false ) return;

				handleMouseMovePan( event );

				break;

		}

	}

	function onMouseUp( event ) {

		if ( scope.enabled === false ) return;

		handleMouseUp( event );

		document.removeEventListener( 'mousemove', onMouseMove, false );
		document.removeEventListener( 'mouseup', onMouseUp, false );

		scope.dispatchEvent( endEvent );

		state = STATE.NONE;

	}

	function onMouseWheel( event ) {

		if ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;

		event.preventDefault();

		scope.dispatchEvent( startEvent );

		handleMouseWheel( event );

		scope.dispatchEvent( endEvent );

	}

	function onKeyDown( event ) {

		if ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;

		handleKeyDown( event );

	}

	function onTouchStart( event ) {

		if ( scope.enabled === false ) return;

		switch ( event.touches.length ) {

			case 1:	// one-fingered touch: rotate

				if ( scope.enableRotate === false ) return;

				handleTouchStartRotate( event );

				state = STATE.TOUCH_ROTATE;

				break;

			case 2:	// two-fingered touch: dolly

				if ( scope.enableZoom === false ) return;

				handleTouchStartDolly( event );

				state = STATE.TOUCH_DOLLY;

				break;

			case 3: // three-fingered touch: pan

				if ( scope.enablePan === false ) return;

				handleTouchStartPan( event );

				state = STATE.TOUCH_PAN;

				break;

			default:

				state = STATE.NONE;

		}

		if ( state !== STATE.NONE ) {

			scope.dispatchEvent( startEvent );

		}

	}

	function onTouchMove( event ) {

		if ( scope.enabled === false ) return;

		event.preventDefault();

		switch ( event.touches.length ) {

			case 1: // one-fingered touch: rotate

				if ( scope.enableRotate === false ) return;
				if ( state !== STATE.TOUCH_ROTATE ) return; // is this needed?...

				handleTouchMoveRotate( event );

				break;

			case 2: // two-fingered touch: dolly

				if ( scope.enableZoom === false ) return;
				if ( state !== STATE.TOUCH_DOLLY ) return; // is this needed?...

				handleTouchMoveDolly( event );

				break;

			case 3: // three-fingered touch: pan

				if ( scope.enablePan === false ) return;
				if ( state !== STATE.TOUCH_PAN ) return; // is this needed?...

				handleTouchMovePan( event );

				break;

			default:

				state = STATE.NONE;

		}

	}

	function onTouchEnd( event ) {

		if ( scope.enabled === false ) return;

		handleTouchEnd( event );

		scope.dispatchEvent( endEvent );

		state = STATE.NONE;

	}

	function onContextMenu( event ) {

		if ( scope.enabled === false ) return;

		event.preventDefault();

	}

	//

	scope.domElement.addEventListener( 'contextmenu', onContextMenu, false );

	scope.domElement.addEventListener( 'mousedown', onMouseDown, false );
	scope.domElement.addEventListener( 'wheel', onMouseWheel, false );

	scope.domElement.addEventListener( 'touchstart', onTouchStart, false );
	scope.domElement.addEventListener( 'touchend', onTouchEnd, false );
	scope.domElement.addEventListener( 'touchmove', onTouchMove, false );

	window.addEventListener( 'keydown', onKeyDown, false );

	// force an update at start

	this.update();

};

THREE.OrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );
THREE.OrbitControls.prototype.constructor = THREE.OrbitControls;

Object.defineProperties( THREE.OrbitControls.prototype, {

	center: {

		get: function () {

			console.warn( 'THREE.OrbitControls: .center has been renamed to .target' );
			return this.target;

		}

	},

	// backward compatibility

	noZoom: {

		get: function () {

			console.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );
			return ! this.enableZoom;

		},

		set: function ( value ) {

			console.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );
			this.enableZoom = ! value;

		}

	},

	noRotate: {

		get: function () {

			console.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );
			return ! this.enableRotate;

		},

		set: function ( value ) {

			console.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );
			this.enableRotate = ! value;

		}

	},

	noPan: {

		get: function () {

			console.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );
			return ! this.enablePan;

		},

		set: function ( value ) {

			console.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );
			this.enablePan = ! value;

		}

	},

	noKeys: {

		get: function () {

			console.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );
			return ! this.enableKeys;

		},

		set: function ( value ) {

			console.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );
			this.enableKeys = ! value;

		}

	},

	staticMoving: {

		get: function () {

			console.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );
			return ! this.enableDamping;

		},

		set: function ( value ) {

			console.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );
			this.enableDamping = ! value;

		}

	},

	dynamicDampingFactor: {

		get: function () {

			console.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );
			return this.dampingFactor;

		},

		set: function ( value ) {

			console.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );
			this.dampingFactor = value;

		}

	}

} );

},{}],"form/lib/inflate-min":[function(require,module,exports){
/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */(function() {'use strict';var l=void 0,aa=this;function r(c,d){var a=c.split("."),b=aa;!(a[0]in b)&&b.execScript&&b.execScript("var "+a[0]);for(var e;a.length&&(e=a.shift());)!a.length&&d!==l?b[e]=d:b=b[e]?b[e]:b[e]={}};var t="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Uint32Array&&"undefined"!==typeof DataView;function v(c){var d=c.length,a=0,b=Number.POSITIVE_INFINITY,e,f,g,h,k,m,n,p,s,x;for(p=0;p<d;++p)c[p]>a&&(a=c[p]),c[p]<b&&(b=c[p]);e=1<<a;f=new (t?Uint32Array:Array)(e);g=1;h=0;for(k=2;g<=a;){for(p=0;p<d;++p)if(c[p]===g){m=0;n=h;for(s=0;s<g;++s)m=m<<1|n&1,n>>=1;x=g<<16|p;for(s=m;s<e;s+=k)f[s]=x;++h}++g;h<<=1;k<<=1}return[f,a,b]};function w(c,d){this.g=[];this.h=32768;this.d=this.f=this.a=this.l=0;this.input=t?new Uint8Array(c):c;this.m=!1;this.i=y;this.r=!1;if(d||!(d={}))d.index&&(this.a=d.index),d.bufferSize&&(this.h=d.bufferSize),d.bufferType&&(this.i=d.bufferType),d.resize&&(this.r=d.resize);switch(this.i){case A:this.b=32768;this.c=new (t?Uint8Array:Array)(32768+this.h+258);break;case y:this.b=0;this.c=new (t?Uint8Array:Array)(this.h);this.e=this.z;this.n=this.v;this.j=this.w;break;default:throw Error("invalid inflate mode");
}}var A=0,y=1,B={t:A,s:y};
w.prototype.k=function(){for(;!this.m;){var c=C(this,3);c&1&&(this.m=!0);c>>>=1;switch(c){case 0:var d=this.input,a=this.a,b=this.c,e=this.b,f=d.length,g=l,h=l,k=b.length,m=l;this.d=this.f=0;if(a+1>=f)throw Error("invalid uncompressed block header: LEN");g=d[a++]|d[a++]<<8;if(a+1>=f)throw Error("invalid uncompressed block header: NLEN");h=d[a++]|d[a++]<<8;if(g===~h)throw Error("invalid uncompressed block header: length verify");if(a+g>d.length)throw Error("input buffer is broken");switch(this.i){case A:for(;e+
g>b.length;){m=k-e;g-=m;if(t)b.set(d.subarray(a,a+m),e),e+=m,a+=m;else for(;m--;)b[e++]=d[a++];this.b=e;b=this.e();e=this.b}break;case y:for(;e+g>b.length;)b=this.e({p:2});break;default:throw Error("invalid inflate mode");}if(t)b.set(d.subarray(a,a+g),e),e+=g,a+=g;else for(;g--;)b[e++]=d[a++];this.a=a;this.b=e;this.c=b;break;case 1:this.j(ba,ca);break;case 2:for(var n=C(this,5)+257,p=C(this,5)+1,s=C(this,4)+4,x=new (t?Uint8Array:Array)(D.length),S=l,T=l,U=l,u=l,M=l,F=l,z=l,q=l,V=l,q=0;q<s;++q)x[D[q]]=
C(this,3);if(!t){q=s;for(s=x.length;q<s;++q)x[D[q]]=0}S=v(x);u=new (t?Uint8Array:Array)(n+p);q=0;for(V=n+p;q<V;)switch(M=E(this,S),M){case 16:for(z=3+C(this,2);z--;)u[q++]=F;break;case 17:for(z=3+C(this,3);z--;)u[q++]=0;F=0;break;case 18:for(z=11+C(this,7);z--;)u[q++]=0;F=0;break;default:F=u[q++]=M}T=t?v(u.subarray(0,n)):v(u.slice(0,n));U=t?v(u.subarray(n)):v(u.slice(n));this.j(T,U);break;default:throw Error("unknown BTYPE: "+c);}}return this.n()};
var G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],D=t?new Uint16Array(G):G,H=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],I=t?new Uint16Array(H):H,J=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],K=t?new Uint8Array(J):J,L=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],da=t?new Uint16Array(L):L,ea=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,
13,13],N=t?new Uint8Array(ea):ea,O=new (t?Uint8Array:Array)(288),P,fa;P=0;for(fa=O.length;P<fa;++P)O[P]=143>=P?8:255>=P?9:279>=P?7:8;var ba=v(O),Q=new (t?Uint8Array:Array)(30),R,ga;R=0;for(ga=Q.length;R<ga;++R)Q[R]=5;var ca=v(Q);function C(c,d){for(var a=c.f,b=c.d,e=c.input,f=c.a,g=e.length,h;b<d;){if(f>=g)throw Error("input buffer is broken");a|=e[f++]<<b;b+=8}h=a&(1<<d)-1;c.f=a>>>d;c.d=b-d;c.a=f;return h}
function E(c,d){for(var a=c.f,b=c.d,e=c.input,f=c.a,g=e.length,h=d[0],k=d[1],m,n;b<k&&!(f>=g);)a|=e[f++]<<b,b+=8;m=h[a&(1<<k)-1];n=m>>>16;if(n>b)throw Error("invalid code length: "+n);c.f=a>>n;c.d=b-n;c.a=f;return m&65535}
w.prototype.j=function(c,d){var a=this.c,b=this.b;this.o=c;for(var e=a.length-258,f,g,h,k;256!==(f=E(this,c));)if(256>f)b>=e&&(this.b=b,a=this.e(),b=this.b),a[b++]=f;else{g=f-257;k=I[g];0<K[g]&&(k+=C(this,K[g]));f=E(this,d);h=da[f];0<N[f]&&(h+=C(this,N[f]));b>=e&&(this.b=b,a=this.e(),b=this.b);for(;k--;)a[b]=a[b++-h]}for(;8<=this.d;)this.d-=8,this.a--;this.b=b};
w.prototype.w=function(c,d){var a=this.c,b=this.b;this.o=c;for(var e=a.length,f,g,h,k;256!==(f=E(this,c));)if(256>f)b>=e&&(a=this.e(),e=a.length),a[b++]=f;else{g=f-257;k=I[g];0<K[g]&&(k+=C(this,K[g]));f=E(this,d);h=da[f];0<N[f]&&(h+=C(this,N[f]));b+k>e&&(a=this.e(),e=a.length);for(;k--;)a[b]=a[b++-h]}for(;8<=this.d;)this.d-=8,this.a--;this.b=b};
w.prototype.e=function(){var c=new (t?Uint8Array:Array)(this.b-32768),d=this.b-32768,a,b,e=this.c;if(t)c.set(e.subarray(32768,c.length));else{a=0;for(b=c.length;a<b;++a)c[a]=e[a+32768]}this.g.push(c);this.l+=c.length;if(t)e.set(e.subarray(d,d+32768));else for(a=0;32768>a;++a)e[a]=e[d+a];this.b=32768;return e};
w.prototype.z=function(c){var d,a=this.input.length/this.a+1|0,b,e,f,g=this.input,h=this.c;c&&("number"===typeof c.p&&(a=c.p),"number"===typeof c.u&&(a+=c.u));2>a?(b=(g.length-this.a)/this.o[2],f=258*(b/2)|0,e=f<h.length?h.length+f:h.length<<1):e=h.length*a;t?(d=new Uint8Array(e),d.set(h)):d=h;return this.c=d};
w.prototype.n=function(){var c=0,d=this.c,a=this.g,b,e=new (t?Uint8Array:Array)(this.l+(this.b-32768)),f,g,h,k;if(0===a.length)return t?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);f=0;for(g=a.length;f<g;++f){b=a[f];h=0;for(k=b.length;h<k;++h)e[c++]=b[h]}f=32768;for(g=this.b;f<g;++f)e[c++]=d[f];this.g=[];return this.buffer=e};
w.prototype.v=function(){var c,d=this.b;t?this.r?(c=new Uint8Array(d),c.set(this.c.subarray(0,d))):c=this.c.subarray(0,d):(this.c.length>d&&(this.c.length=d),c=this.c);return this.buffer=c};function W(c,d){var a,b;this.input=c;this.a=0;if(d||!(d={}))d.index&&(this.a=d.index),d.verify&&(this.A=d.verify);a=c[this.a++];b=c[this.a++];switch(a&15){case ha:this.method=ha;break;default:throw Error("unsupported compression method");}if(0!==((a<<8)+b)%31)throw Error("invalid fcheck flag:"+((a<<8)+b)%31);if(b&32)throw Error("fdict flag is not supported");this.q=new w(c,{index:this.a,bufferSize:d.bufferSize,bufferType:d.bufferType,resize:d.resize})}
W.prototype.k=function(){var c=this.input,d,a;d=this.q.k();this.a=this.q.a;if(this.A){a=(c[this.a++]<<24|c[this.a++]<<16|c[this.a++]<<8|c[this.a++])>>>0;var b=d;if("string"===typeof b){var e=b.split(""),f,g;f=0;for(g=e.length;f<g;f++)e[f]=(e[f].charCodeAt(0)&255)>>>0;b=e}for(var h=1,k=0,m=b.length,n,p=0;0<m;){n=1024<m?1024:m;m-=n;do h+=b[p++],k+=h;while(--n);h%=65521;k%=65521}if(a!==(k<<16|h)>>>0)throw Error("invalid adler-32 checksum");}return d};var ha=8;r("Zlib.Inflate",W);r("Zlib.Inflate.prototype.decompress",W.prototype.k);var X={ADAPTIVE:B.s,BLOCK:B.t},Y,Z,$,ia;if(Object.keys)Y=Object.keys(X);else for(Z in Y=[],$=0,X)Y[$++]=Z;$=0;for(ia=Y.length;$<ia;++$)Z=Y[$],r("Zlib.Inflate.BufferType."+Z,X[Z]);}).call(this);
},{}],"form/lib/three-min":[function(require,module,exports){
// threejs.org/license
(function(l,za){"object"===typeof exports&&"undefined"!==typeof module?za(exports):"function"===typeof define&&define.amd?define(["exports"],za):za(l.THREE={})})(this,function(l){function za(){}function D(a,b){this.x=a||0;this.y=b||0}function O(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function ha(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1}function p(a,
    b,c){this.x=a||0;this.y=b||0;this.z=c||0}function ma(){this.elements=[1,0,0,0,1,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function U(a,b,c,d,e,f,g,h,k,m){Object.defineProperty(this,"id",{value:Af++});this.uuid=Q.generateUUID();this.name="";this.image=void 0!==a?a:U.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==b?b:U.DEFAULT_MAPPING;this.wrapS=void 0!==c?c:1001;this.wrapT=void 0!==d?d:1001;this.magFilter=void 0!==
    e?e:1006;this.minFilter=void 0!==f?f:1008;this.anisotropy=void 0!==k?k:1;this.format=void 0!==g?g:1023;this.type=void 0!==h?h:1009;this.offset=new D(0,0);this.repeat=new D(1,1);this.center=new D(0,0);this.rotation=0;this.matrixAutoUpdate=!0;this.matrix=new ma;this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=void 0!==m?m:3E3;this.version=0;this.onUpdate=null}function aa(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1}function kb(a,
    b,c){this.uuid=Q.generateUUID();this.width=a;this.height=b;this.scissor=new aa(0,0,a,b);this.scissorTest=!1;this.viewport=new aa(0,0,a,b);c=c||{};void 0===c.minFilter&&(c.minFilter=1006);this.texture=new U(void 0,void 0,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.encoding);this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0;this.depthTexture=void 0!==c.depthTexture?c.depthTexture:null}function Jb(a,b,c){kb.call(this,
    a,b,c);this.activeMipMapLevel=this.activeCubeFace=0}function lb(a,b,c,d,e,f,g,h,k,m,q,n){U.call(this,null,f,g,h,k,m,d,e,q,n);this.image={data:a,width:b,height:c};this.magFilter=void 0!==k?k:1003;this.minFilter=void 0!==m?m:1003;this.flipY=this.generateMipmaps=!1;this.unpackAlignment=1}function db(a,b,c,d,e,f,g,h,k,m){a=void 0!==a?a:[];U.call(this,a,void 0!==b?b:301,c,d,e,f,g,h,k,m);this.flipY=!1}function Kb(a,b,c){var d=a[0];if(0>=d||0<d)return a;var e=b*c,f=Ie[e];void 0===f&&(f=new Float32Array(e),
    Ie[e]=f);if(0!==b)for(d.toArray(f,0),d=1,e=0;d!==b;++d)e+=c,a[d].toArray(f,e);return f}function Je(a,b){var c=Ke[b];void 0===c&&(c=new Int32Array(b),Ke[b]=c);for(var d=0;d!==b;++d)c[d]=a.allocTextureUnit();return c}function Bf(a,b){a.uniform1f(this.addr,b)}function Cf(a,b){a.uniform1i(this.addr,b)}function Df(a,b){void 0===b.x?a.uniform2fv(this.addr,b):a.uniform2f(this.addr,b.x,b.y)}function Ef(a,b){void 0!==b.x?a.uniform3f(this.addr,b.x,b.y,b.z):void 0!==b.r?a.uniform3f(this.addr,b.r,b.g,b.b):a.uniform3fv(this.addr,
    b)}function Ff(a,b){void 0===b.x?a.uniform4fv(this.addr,b):a.uniform4f(this.addr,b.x,b.y,b.z,b.w)}function Gf(a,b){a.uniformMatrix2fv(this.addr,!1,b.elements||b)}function Hf(a,b){void 0===b.elements?a.uniformMatrix3fv(this.addr,!1,b):(Le.set(b.elements),a.uniformMatrix3fv(this.addr,!1,Le))}function If(a,b){void 0===b.elements?a.uniformMatrix4fv(this.addr,!1,b):(Me.set(b.elements),a.uniformMatrix4fv(this.addr,!1,Me))}function Jf(a,b,c){var d=c.allocTextureUnit();a.uniform1i(this.addr,d);c.setTexture2D(b||
    Ne,d)}function Kf(a,b,c){var d=c.allocTextureUnit();a.uniform1i(this.addr,d);c.setTextureCube(b||Oe,d)}function Pe(a,b){a.uniform2iv(this.addr,b)}function Qe(a,b){a.uniform3iv(this.addr,b)}function Re(a,b){a.uniform4iv(this.addr,b)}function Lf(a){switch(a){case 5126:return Bf;case 35664:return Df;case 35665:return Ef;case 35666:return Ff;case 35674:return Gf;case 35675:return Hf;case 35676:return If;case 35678:case 36198:return Jf;case 35680:return Kf;case 5124:case 35670:return Cf;case 35667:case 35671:return Pe;
    case 35668:case 35672:return Qe;case 35669:case 35673:return Re}}function Mf(a,b){a.uniform1fv(this.addr,b)}function Nf(a,b){a.uniform1iv(this.addr,b)}function Of(a,b){a.uniform2fv(this.addr,Kb(b,this.size,2))}function Pf(a,b){a.uniform3fv(this.addr,Kb(b,this.size,3))}function Qf(a,b){a.uniform4fv(this.addr,Kb(b,this.size,4))}function Rf(a,b){a.uniformMatrix2fv(this.addr,!1,Kb(b,this.size,4))}function Sf(a,b){a.uniformMatrix3fv(this.addr,!1,Kb(b,this.size,9))}function Tf(a,b){a.uniformMatrix4fv(this.addr,
    !1,Kb(b,this.size,16))}function Uf(a,b,c){var d=b.length,e=Je(c,d);a.uniform1iv(this.addr,e);for(a=0;a!==d;++a)c.setTexture2D(b[a]||Ne,e[a])}function Vf(a,b,c){var d=b.length,e=Je(c,d);a.uniform1iv(this.addr,e);for(a=0;a!==d;++a)c.setTextureCube(b[a]||Oe,e[a])}function Wf(a){switch(a){case 5126:return Mf;case 35664:return Of;case 35665:return Pf;case 35666:return Qf;case 35674:return Rf;case 35675:return Sf;case 35676:return Tf;case 35678:return Uf;case 35680:return Vf;case 5124:case 35670:return Nf;
    case 35667:case 35671:return Pe;case 35668:case 35672:return Qe;case 35669:case 35673:return Re}}function Xf(a,b,c){this.id=a;this.addr=c;this.setValue=Lf(b.type)}function Yf(a,b,c){this.id=a;this.addr=c;this.size=b.size;this.setValue=Wf(b.type)}function Se(a){this.id=a;this.seq=[];this.map={}}function mb(a,b,c){this.seq=[];this.map={};this.renderer=c;c=a.getProgramParameter(b,a.ACTIVE_UNIFORMS);for(var d=0;d<c;++d){var e=a.getActiveUniform(b,d),f=a.getUniformLocation(b,e.name),g=this,h=e.name,k=
    h.length;for(Vd.lastIndex=0;;){var m=Vd.exec(h),q=Vd.lastIndex,n=m[1],u=m[3];"]"===m[2]&&(n|=0);if(void 0===u||"["===u&&q+2===k){h=g;e=void 0===u?new Xf(n,e,f):new Yf(n,e,f);h.seq.push(e);h.map[e.id]=e;break}else u=g.map[n],void 0===u&&(u=new Se(n),n=g,g=u,n.seq.push(g),n.map[g.id]=g),g=u}}}function H(a,b,c){return void 0===b&&void 0===c?this.set(a):this.setRGB(a,b,c)}function od(a,b){this.min=void 0!==a?a:new D(Infinity,Infinity);this.max=void 0!==b?b:new D(-Infinity,-Infinity)}function Zf(a,b,c,
    d,e){var f,g,h,k,m,q,n,u,r,t,l,w,z,y,I,A;this.render=function(a,v,Da,na){if(0!==a.length){v=new p;var J=na.w/na.z,Ha=.5*na.z,pd=.5*na.w,la=16/na.w,S=new D(la*J,la),va=new p(1,1,0),N=new D(1,1),B=new od;B.min.set(na.x,na.y);B.max.set(na.x+(na.z-16),na.y+(na.w-16));if(void 0===y){var la=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),x=new Uint16Array([0,1,2,0,2,3]);l=b.createBuffer();w=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,l);b.bufferData(b.ARRAY_BUFFER,la,b.STATIC_DRAW);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,
    w);b.bufferData(b.ELEMENT_ARRAY_BUFFER,x,b.STATIC_DRAW);I=b.createTexture();A=b.createTexture();c.bindTexture(b.TEXTURE_2D,I);b.texImage2D(b.TEXTURE_2D,0,b.RGB,16,16,0,b.RGB,b.UNSIGNED_BYTE,null);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);c.bindTexture(b.TEXTURE_2D,A);b.texImage2D(b.TEXTURE_2D,0,
    b.RGBA,16,16,0,b.RGBA,b.UNSIGNED_BYTE,null);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);var la=z={vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\n\tvUV = uv;\n\tvec2 pos = position;\n\tif ( renderType == 2 ) {\n\t\tvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\n\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\n\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\n\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\n\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\n\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\n\t\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\n\t\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\n\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\n\t\tvVisibility =        visibility.r / 9.0;\n\t\tvVisibility *= 1.0 - visibility.g / 9.0;\n\t\tvVisibility *=       visibility.b / 9.0;\n\t\tvVisibility *= 1.0 - visibility.a / 9.0;\n\t\tpos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\n\t\tpos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n\t}\n\tgl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
    fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\n\tif ( renderType == 0 ) {\n\t\tgl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n\t} else if ( renderType == 1 ) {\n\t\tgl_FragColor = texture2D( map, vUV );\n\t} else {\n\t\tvec4 texture = texture2D( map, vUV );\n\t\ttexture.a *= opacity * vVisibility;\n\t\tgl_FragColor = texture;\n\t\tgl_FragColor.rgb *= color;\n\t}\n}"},x=b.createProgram(),
    E=b.createShader(b.FRAGMENT_SHADER),V=b.createShader(b.VERTEX_SHADER),H="precision "+e.precision+" float;\n";b.shaderSource(E,H+la.fragmentShader);b.shaderSource(V,H+la.vertexShader);b.compileShader(E);b.compileShader(V);b.attachShader(x,E);b.attachShader(x,V);b.linkProgram(x);y=x;r=b.getAttribLocation(y,"position");t=b.getAttribLocation(y,"uv");f=b.getUniformLocation(y,"renderType");g=b.getUniformLocation(y,"map");h=b.getUniformLocation(y,"occlusionMap");k=b.getUniformLocation(y,"opacity");m=b.getUniformLocation(y,
    "color");q=b.getUniformLocation(y,"scale");n=b.getUniformLocation(y,"rotation");u=b.getUniformLocation(y,"screenPosition")}c.useProgram(y);c.initAttributes();c.enableAttribute(r);c.enableAttribute(t);c.disableUnusedAttributes();b.uniform1i(h,0);b.uniform1i(g,1);b.bindBuffer(b.ARRAY_BUFFER,l);b.vertexAttribPointer(r,2,b.FLOAT,!1,16,0);b.vertexAttribPointer(t,2,b.FLOAT,!1,16,8);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,w);c.disable(b.CULL_FACE);c.buffers.depth.setMask(!1);x=0;for(E=a.length;x<E;x++)if(la=
    16/na.w,S.set(la*J,la),V=a[x],v.set(V.matrixWorld.elements[12],V.matrixWorld.elements[13],V.matrixWorld.elements[14]),v.applyMatrix4(Da.matrixWorldInverse),v.applyMatrix4(Da.projectionMatrix),va.copy(v),N.x=na.x+va.x*Ha+Ha-8,N.y=na.y+va.y*pd+pd-8,!0===B.containsPoint(N)){c.activeTexture(b.TEXTURE0);c.bindTexture(b.TEXTURE_2D,null);c.activeTexture(b.TEXTURE1);c.bindTexture(b.TEXTURE_2D,I);b.copyTexImage2D(b.TEXTURE_2D,0,b.RGB,N.x,N.y,16,16,0);b.uniform1i(f,0);b.uniform2f(q,S.x,S.y);b.uniform3f(u,va.x,
    va.y,va.z);c.disable(b.BLEND);c.enable(b.DEPTH_TEST);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0);c.activeTexture(b.TEXTURE0);c.bindTexture(b.TEXTURE_2D,A);b.copyTexImage2D(b.TEXTURE_2D,0,b.RGBA,N.x,N.y,16,16,0);b.uniform1i(f,1);c.disable(b.DEPTH_TEST);c.activeTexture(b.TEXTURE1);c.bindTexture(b.TEXTURE_2D,I);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0);V.positionScreen.copy(va);V.customUpdateCallback?V.customUpdateCallback(V):V.updateLensFlares();b.uniform1i(f,2);c.enable(b.BLEND);for(var H=
    0,K=V.lensFlares.length;H<K;H++){var C=V.lensFlares[H];.001<C.opacity&&.001<C.scale&&(va.x=C.x,va.y=C.y,va.z=C.z,la=C.size*C.scale/na.w,S.x=la*J,S.y=la,b.uniform3f(u,va.x,va.y,va.z),b.uniform2f(q,S.x,S.y),b.uniform1f(n,C.rotation),b.uniform1f(k,C.opacity),b.uniform3f(m,C.color.r,C.color.g,C.color.b),c.setBlending(C.blending,C.blendEquation,C.blendSrc,C.blendDst),d.setTexture2D(C.texture,1),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0))}}c.enable(b.CULL_FACE);c.enable(b.DEPTH_TEST);c.buffers.depth.setMask(!0);
    c.reset()}}}function tc(a,b,c,d,e,f,g,h,k){U.call(this,a,b,c,d,e,f,g,h,k);this.needsUpdate=!0}function $f(a,b,c,d,e){var f,g,h,k,m,q,n,u,r,t,l,w,z,y,I,A,J;function Ha(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:b.id-a.id}var Da,na,oa,Te,pd=new p,la=new ha,S=new p;this.render=function(v,p,D){if(0!==v.length){if(void 0===oa){var x=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),N=new Uint16Array([0,1,2,0,2,3]);Da=b.createBuffer();na=b.createBuffer();
    b.bindBuffer(b.ARRAY_BUFFER,Da);b.bufferData(b.ARRAY_BUFFER,x,b.STATIC_DRAW);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,na);b.bufferData(b.ELEMENT_ARRAY_BUFFER,N,b.STATIC_DRAW);x=b.createProgram();N=b.createShader(b.VERTEX_SHADER);var B=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(N,["precision "+e.precision+" float;","#define SHADER_NAME SpriteMaterial\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float fogDepth;\nvoid main() {\n\tvUV = uvOffset + uv * uvScale;\n\tvec2 alignedPosition = position * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tvec4 mvPosition;\n\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\tfogDepth = - mvPosition.z;\n}"].join("\n"));
    b.shaderSource(B,["precision "+e.precision+" float;","#define SHADER_NAME SpriteMaterial\nuniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvarying float fogDepth;\nvoid main() {\n\tvec4 texture = texture2D( map, vUV );\n\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\n\tif ( gl_FragColor.a < alphaTest ) discard;\n\tif ( fogType > 0 ) {\n\t\tfloat fogFactor = 0.0;\n\t\tif ( fogType == 1 ) {\n\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t\t} else {\n\t\t\tconst float LOG2 = 1.442695;\n\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );\n\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\t\t}\n\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\t}\n}"].join("\n"));
    b.compileShader(N);b.compileShader(B);b.attachShader(x,N);b.attachShader(x,B);b.linkProgram(x);oa=x;A=b.getAttribLocation(oa,"position");J=b.getAttribLocation(oa,"uv");f=b.getUniformLocation(oa,"uvOffset");g=b.getUniformLocation(oa,"uvScale");h=b.getUniformLocation(oa,"rotation");k=b.getUniformLocation(oa,"scale");m=b.getUniformLocation(oa,"color");q=b.getUniformLocation(oa,"map");n=b.getUniformLocation(oa,"opacity");u=b.getUniformLocation(oa,"modelViewMatrix");r=b.getUniformLocation(oa,"projectionMatrix");
    t=b.getUniformLocation(oa,"fogType");l=b.getUniformLocation(oa,"fogDensity");w=b.getUniformLocation(oa,"fogNear");z=b.getUniformLocation(oa,"fogFar");y=b.getUniformLocation(oa,"fogColor");b.getUniformLocation(oa,"fogDepth");I=b.getUniformLocation(oa,"alphaTest");x=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");x.width=8;x.height=8;N=x.getContext("2d");N.fillStyle="white";N.fillRect(0,0,8,8);Te=new tc(x)}c.useProgram(oa);c.initAttributes();c.enableAttribute(A);c.enableAttribute(J);
    c.disableUnusedAttributes();c.disable(b.CULL_FACE);c.enable(b.BLEND);b.bindBuffer(b.ARRAY_BUFFER,Da);b.vertexAttribPointer(A,2,b.FLOAT,!1,16,0);b.vertexAttribPointer(J,2,b.FLOAT,!1,16,8);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,na);b.uniformMatrix4fv(r,!1,D.projectionMatrix.elements);c.activeTexture(b.TEXTURE0);b.uniform1i(q,0);N=x=0;(B=p.fog)?(b.uniform3f(y,B.color.r,B.color.g,B.color.b),B.isFog?(b.uniform1f(w,B.near),b.uniform1f(z,B.far),b.uniform1i(t,1),N=x=1):B.isFogExp2&&(b.uniform1f(l,B.density),
    b.uniform1i(t,2),N=x=2)):(b.uniform1i(t,0),N=x=0);for(var C=0,E=v.length;C<E;C++)B=v[C],B.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,B.matrixWorld),B.z=-B.modelViewMatrix.elements[14];v.sort(Ha);for(var va=[],C=0,E=v.length;C<E;C++){B=v[C];var G=B.material;if(!1!==G.visible){B.onBeforeRender(a,p,D,void 0,G,void 0);b.uniform1f(I,G.alphaTest);b.uniformMatrix4fv(u,!1,B.modelViewMatrix.elements);B.matrixWorld.decompose(pd,la,S);va[0]=S.x;va[1]=S.y;var qd=0;p.fog&&G.fog&&(qd=N);x!==qd&&(b.uniform1i(t,
    qd),x=qd);null!==G.map?(b.uniform2f(f,G.map.offset.x,G.map.offset.y),b.uniform2f(g,G.map.repeat.x,G.map.repeat.y)):(b.uniform2f(f,0,0),b.uniform2f(g,1,1));b.uniform1f(n,G.opacity);b.uniform3f(m,G.color.r,G.color.g,G.color.b);b.uniform1f(h,G.rotation);b.uniform2fv(k,va);c.setBlending(G.blending,G.blendEquation,G.blendSrc,G.blendDst,G.blendEquationAlpha,G.blendSrcAlpha,G.blendDstAlpha,G.premultipliedAlpha);c.buffers.depth.setTest(G.depthTest);c.buffers.depth.setMask(G.depthWrite);c.buffers.color.setMask(G.colorWrite);
    d.setTexture2D(G.map||Te,0);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0);B.onAfterRender(a,p,D,void 0,G,void 0)}}c.enable(b.CULL_FACE);c.reset()}}}function P(){Object.defineProperty(this,"id",{value:ag++});this.uuid=Q.generateUUID();this.name="";this.type="Material";this.lights=this.fog=!0;this.blending=1;this.side=0;this.flatShading=!1;this.vertexColors=0;this.opacity=1;this.transparent=!1;this.blendSrc=204;this.blendDst=205;this.blendEquation=100;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=
    null;this.depthFunc=3;this.depthWrite=this.depthTest=!0;this.clippingPlanes=null;this.clipShadows=this.clipIntersection=!1;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.dithering=!1;this.alphaTest=0;this.premultipliedAlpha=!1;this.overdraw=0;this.visible=!0;this.userData={};this.needsUpdate=!0}function eb(a){P.call(this);this.type="MeshDepthMaterial";this.depthPacking=3200;this.morphTargets=this.skinning=!1;this.displacementMap=
    this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.setValues(a)}function fb(a){P.call(this);this.type="MeshDistanceMaterial";this.referencePosition=new p;this.nearDistance=1;this.farDistance=1E3;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.lights=this.fog=!1;this.setValues(a)}function Xa(a,b){this.min=void 0!==
    a?a:new p(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new p(-Infinity,-Infinity,-Infinity)}function Ia(a,b){this.center=void 0!==a?a:new p;this.radius=void 0!==b?b:0}function Ea(a,b){this.normal=void 0!==a?a:new p(1,0,0);this.constant=void 0!==b?b:0}function rd(a,b,c,d,e,f){this.planes=[void 0!==a?a:new Ea,void 0!==b?b:new Ea,void 0!==c?c:new Ea,void 0!==d?d:new Ea,void 0!==e?e:new Ea,void 0!==f?f:new Ea]}function Ue(a,b,c){function d(b,c,d,e,f,g){var h=b.geometry;var k=n;var m=b.customDepthMaterial;
    d&&(k=u,m=b.customDistanceMaterial);m?k=m:(m=!1,c.morphTargets&&(h&&h.isBufferGeometry?m=h.morphAttributes&&h.morphAttributes.position&&0<h.morphAttributes.position.length:h&&h.isGeometry&&(m=h.morphTargets&&0<h.morphTargets.length)),b.isSkinnedMesh&&!1===c.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",b),b=b.isSkinnedMesh&&c.skinning,h=0,m&&(h|=1),b&&(h|=2),k=k[h]);a.localClippingEnabled&&!0===c.clipShadows&&0!==c.clippingPlanes.length&&(h=
    k.uuid,m=c.uuid,b=r[h],void 0===b&&(b={},r[h]=b),h=b[m],void 0===h&&(h=k.clone(),b[m]=h),k=h);k.visible=c.visible;k.wireframe=c.wireframe;m=c.side;A.renderSingleSided&&2==m&&(m=0);A.renderReverseSided&&(0===m?m=1:1===m&&(m=0));k.side=m;k.clipShadows=c.clipShadows;k.clippingPlanes=c.clippingPlanes;k.clipIntersection=c.clipIntersection;k.wireframeLinewidth=c.wireframeLinewidth;k.linewidth=c.linewidth;d&&k.isMeshDistanceMaterial&&(k.referencePosition.copy(e),k.nearDistance=f,k.farDistance=g);return k}
    function e(c,h,g,k){var m;if(!1!==c.visible){if(c.layers.test(h.layers)&&(c.isMesh||c.isLine||c.isPoints)&&c.castShadow&&(!c.frustumCulled||f.intersectsObject(c))){c.modelViewMatrix.multiplyMatrices(g.matrixWorldInverse,c.matrixWorld);var n=b.update(c),u=c.material;if(Array.isArray(u))for(var r=n.groups,t=0,l=r.length;t<l;t++){var I=r[t];(m=u[I.materialIndex])&&m.visible&&(m=d(c,m,k,q,g.near,g.far),a.renderBufferDirect(g,null,n,m,c,I))}else u.visible&&(m=d(c,u,k,q,g.near,g.far),a.renderBufferDirect(g,
    null,n,m,c,null))}c=c.children;n=0;for(u=c.length;n<u;n++)e(c[n],h,g,k)}}var f=new rd,g=new O,h=new D,k=new D(c,c),m=new p,q=new p,n=Array(4),u=Array(4),r={},t=[new p(1,0,0),new p(-1,0,0),new p(0,0,1),new p(0,0,-1),new p(0,1,0),new p(0,-1,0)],l=[new p(0,1,0),new p(0,1,0),new p(0,1,0),new p(0,1,0),new p(0,0,1),new p(0,0,-1)],w=[new aa,new aa,new aa,new aa,new aa,new aa];for(c=0;4!==c;++c){var z=0!==(c&1),y=0!==(c&2),I=new eb({depthPacking:3201,morphTargets:z,skinning:y});n[c]=I;z=new fb({morphTargets:z,
    skinning:y});u[c]=z}var A=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=1;this.renderSingleSided=this.renderReverseSided=!0;this.render=function(b,c,d){if(!1!==A.enabled&&(!1!==A.autoUpdate||!1!==A.needsUpdate)&&0!==b.length){var n=a.state;n.disable(a.context.BLEND);n.buffers.color.setClear(1,1,1,1);n.buffers.depth.setTest(!0);n.setScissorTest(!1);for(var u,r=0,I=b.length;r<I;r++){var v=b[r];u=v.shadow;var p=v&&v.isPointLight;if(void 0===u)console.warn("THREE.WebGLShadowMap:",
    v,"has no shadow.");else{var z=u.camera;h.copy(u.mapSize);h.min(k);if(p){var y=h.x,J=h.y;w[0].set(2*y,J,y,J);w[1].set(0,J,y,J);w[2].set(3*y,J,y,J);w[3].set(y,J,y,J);w[4].set(3*y,0,y,J);w[5].set(y,0,y,J);h.x*=4;h.y*=2}null===u.map&&(u.map=new kb(h.x,h.y,{minFilter:1003,magFilter:1003,format:1023}),u.map.texture.name=v.name+".shadowMap",z.updateProjectionMatrix());u.isSpotLightShadow&&u.update(v);y=u.map;J=u.matrix;q.setFromMatrixPosition(v.matrixWorld);z.position.copy(q);p?(u=6,J.makeTranslation(-q.x,
    -q.y,-q.z)):(u=1,m.setFromMatrixPosition(v.target.matrixWorld),z.lookAt(m),z.updateMatrixWorld(),J.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),J.multiply(z.projectionMatrix),J.multiply(z.matrixWorldInverse));a.setRenderTarget(y);a.clear();for(v=0;v<u;v++)p&&(m.copy(z.position),m.add(t[v]),z.up.copy(l[v]),z.lookAt(m),z.updateMatrixWorld(),n.viewport(w[v])),g.multiplyMatrices(z.projectionMatrix,z.matrixWorldInverse),f.setFromMatrix(g),e(c,d,z,p)}}A.needsUpdate=!1}}}function bg(a){var b={};return{get:function(a){a.isInterleavedBufferAttribute&&
    (a=a.data);return b[a.uuid]},remove:function(c){c.isInterleavedBufferAttribute&&(c=c.data);var d=b[c.uuid];d&&(a.deleteBuffer(d.buffer),delete b[c.uuid])},update:function(c,d){c.isInterleavedBufferAttribute&&(c=c.data);var e=b[c.uuid];if(void 0===e){var e=c.uuid,f=c.array,g=c.dynamic?a.DYNAMIC_DRAW:a.STATIC_DRAW,h=a.createBuffer();a.bindBuffer(d,h);a.bufferData(d,f,g);c.onUploadCallback();d=a.FLOAT;f instanceof Float32Array?d=a.FLOAT:f instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):
    f instanceof Uint16Array?d=a.UNSIGNED_SHORT:f instanceof Int16Array?d=a.SHORT:f instanceof Uint32Array?d=a.UNSIGNED_INT:f instanceof Int32Array?d=a.INT:f instanceof Int8Array?d=a.BYTE:f instanceof Uint8Array&&(d=a.UNSIGNED_BYTE);b[e]={buffer:h,type:d,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version}}else e.version<c.version&&(f=c,h=f.array,g=f.updateRange,a.bindBuffer(d,e.buffer),!1===f.dynamic?a.bufferData(d,h,a.STATIC_DRAW):-1===g.count?a.bufferSubData(d,0,h):0===g.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):
    (a.bufferSubData(d,g.offset*h.BYTES_PER_ELEMENT,h.subarray(g.offset,g.offset+g.count)),g.count=-1),e.version=c.version)}}}function gb(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._order=d||gb.DefaultOrder}function Wd(){this.mask=1}function x(){Object.defineProperty(this,"id",{value:cg++});this.uuid=Q.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=x.DefaultUp.clone();var a=new p,b=new gb,c=new ha,d=new p(1,1,1);b.onChange(function(){c.setFromEuler(b,
    !1)});c.onChange(function(){b.setFromQuaternion(c,void 0,!1)});Object.defineProperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,value:b},quaternion:{enumerable:!0,value:c},scale:{enumerable:!0,value:d},modelViewMatrix:{value:new O},normalMatrix:{value:new ma}});this.matrix=new O;this.matrixWorld=new O;this.matrixAutoUpdate=x.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.layers=new Wd;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=
    0;this.userData={}}function Ta(){x.call(this);this.type="Camera";this.matrixWorldInverse=new O;this.projectionMatrix=new O}function Lb(a,b,c,d,e,f){Ta.call(this);this.type="OrthographicCamera";this.zoom=1;this.view=null;this.left=a;this.right=b;this.top=c;this.bottom=d;this.near=void 0!==e?e:.1;this.far=void 0!==f?f:2E3;this.updateProjectionMatrix()}function Ya(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.normal=d&&d.isVector3?d:new p;this.vertexNormals=Array.isArray(d)?d:[];this.color=e&&e.isColor?
    e:new H;this.vertexColors=Array.isArray(e)?e:[];this.materialIndex=void 0!==f?f:0}function L(){Object.defineProperty(this,"id",{value:dg+=2});this.uuid=Q.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=
    this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function M(a,b,c){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=Q.generateUUID();this.name="";this.array=a;this.itemSize=b;this.count=void 0!==a?a.length/b:0;this.normalized=!0===c;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.onUploadCallback=function(){};this.version=0}function uc(a,b,c){M.call(this,new Int8Array(a),b,c)}function vc(a,b,c){M.call(this,new Uint8Array(a),
    b,c)}function wc(a,b,c){M.call(this,new Uint8ClampedArray(a),b,c)}function xc(a,b,c){M.call(this,new Int16Array(a),b,c)}function ob(a,b,c){M.call(this,new Uint16Array(a),b,c)}function yc(a,b,c){M.call(this,new Int32Array(a),b,c)}function pb(a,b,c){M.call(this,new Uint32Array(a),b,c)}function B(a,b,c){M.call(this,new Float32Array(a),b,c)}function zc(a,b,c){M.call(this,new Float64Array(a),b,c)}function Ve(){this.indices=[];this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=
    [];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function Xd(a){if(0===a.length)return-Infinity;for(var b=a[0],c=1,d=a.length;c<d;++c)a[c]>b&&(b=a[c]);return b}function E(){Object.defineProperty(this,"id",{value:eg+=2});this.uuid=Q.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes=
    {};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity}}function Mb(a,b,c,d,e,f){L.call(this);this.type="BoxGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};this.fromBufferGeometry(new qb(a,b,c,d,e,f));this.mergeVertices()}function qb(a,b,c,d,e,f){function g(a,b,c,d,e,f,g,l,Ha,Da,na){var t=f/Ha,v=g/Da,I=f/2,A=g/2,w=l/2;g=Ha+1;var z=Da+1,y=f=0,J,x,B=new p;for(x=0;x<z;x++){var D=x*v-A;for(J=0;J<g;J++)B[a]=
    (J*t-I)*d,B[b]=D*e,B[c]=w,m.push(B.x,B.y,B.z),B[a]=0,B[b]=0,B[c]=0<l?1:-1,q.push(B.x,B.y,B.z),n.push(J/Ha),n.push(1-x/Da),f+=1}for(x=0;x<Da;x++)for(J=0;J<Ha;J++)a=u+J+g*(x+1),b=u+(J+1)+g*(x+1),c=u+(J+1)+g*x,k.push(u+J+g*x,a,c),k.push(a,b,c),y+=6;h.addGroup(r,y,na);r+=y;u+=f}E.call(this);this.type="BoxBufferGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};var h=this;a=a||1;b=b||1;c=c||1;d=Math.floor(d)||1;e=Math.floor(e)||1;f=Math.floor(f)||1;var k=
    [],m=[],q=[],n=[],u=0,r=0;g("z","y","x",-1,-1,c,b,a,f,e,0);g("z","y","x",1,-1,c,b,-a,f,e,1);g("x","z","y",1,1,a,c,b,d,f,2);g("x","z","y",1,-1,a,c,-b,d,f,3);g("x","y","z",1,-1,a,b,c,d,e,4);g("x","y","z",-1,-1,a,b,-c,d,e,5);this.setIndex(k);this.addAttribute("position",new B(m,3));this.addAttribute("normal",new B(q,3));this.addAttribute("uv",new B(n,2))}function Ac(a,b,c,d){L.call(this);this.type="PlaneGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};this.fromBufferGeometry(new rb(a,
    b,c,d));this.mergeVertices()}function rb(a,b,c,d){E.call(this);this.type="PlaneBufferGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};a=a||1;b=b||1;var e=a/2,f=b/2;c=Math.floor(c)||1;d=Math.floor(d)||1;var g=c+1,h=d+1,k=a/c,m=b/d,q=[],n=[],u=[],r=[];for(a=0;a<h;a++){var t=a*m-f;for(b=0;b<g;b++)n.push(b*k-e,-t,0),u.push(0,0,1),r.push(b/c),r.push(1-a/d)}for(a=0;a<d;a++)for(b=0;b<c;b++)e=b+g*(a+1),f=b+1+g*(a+1),h=b+1+g*a,q.push(b+g*a,e,h),q.push(e,f,h);this.setIndex(q);this.addAttribute("position",
    new B(n,3));this.addAttribute("normal",new B(u,3));this.addAttribute("uv",new B(r,2))}function Aa(a){P.call(this);this.type="MeshBasicMaterial";this.color=new H(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.lights=this.morphTargets=this.skinning=
    !1;this.setValues(a)}function Fa(a){P.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1;this.extensions={derivatives:!1,fragDepth:!1,
    drawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;void 0!==a&&(void 0!==a.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(a))}function sb(a,b){this.origin=void 0!==a?a:new p;this.direction=void 0!==b?b:new p}function Nb(a,b){this.start=void 0!==a?a:new p;this.end=void 0!==b?b:new p}function Za(a,b,c){this.a=void 0!==a?a:new p;this.b=void 0!==
    b?b:new p;this.c=void 0!==c?c:new p}function ra(a,b){x.call(this);this.type="Mesh";this.geometry=void 0!==a?a:new E;this.material=void 0!==b?b:new Aa({color:16777215*Math.random()});this.drawMode=0;this.updateMorphTargets()}function fg(a,b,c,d){function e(a,c){b.buffers.color.setClear(a.r,a.g,a.b,c,d)}var f=new H(0),g=0,h,k,m;return{getClearColor:function(){return f},setClearColor:function(a,b){f.set(a);g=void 0!==b?b:1;e(f,g)},getClearAlpha:function(){return g},setClearAlpha:function(a){g=a;e(f,
    g)},render:function(b,d,u,r){d=d.background;null===d?e(f,g):d&&d.isColor&&(e(d,1),r=!0);(a.autoClear||r)&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil);d&&d.isCubeTexture?(void 0===m&&(m=new ra(new qb(1,1,1),new Fa({uniforms:tb.cube.uniforms,vertexShader:tb.cube.vertexShader,fragmentShader:tb.cube.fragmentShader,side:1,depthTest:!0,depthWrite:!1,fog:!1})),m.geometry.removeAttribute("normal"),m.geometry.removeAttribute("uv"),m.onBeforeRender=function(a,b,c){this.matrixWorld.copyPosition(c.matrixWorld)},
    c.update(m.geometry)),m.material.uniforms.tCube.value=d,b.push(m,m.geometry,m.material,0,null)):d&&d.isTexture&&(void 0===h&&(h=new Lb(-1,1,1,-1,0,1),k=new ra(new rb(2,2),new Aa({depthTest:!1,depthWrite:!1,fog:!1})),c.update(k.geometry)),k.material.map=d,a.renderBufferDirect(h,null,k.geometry,k.material,k,null))}}}function gg(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.program&&b.program&&a.program!==b.program?a.program.id-b.program.id:a.material.id!==b.material.id?a.material.id-
    b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function hg(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function ig(){var a=[],b=0,c=[],d=[];return{opaque:c,transparent:d,init:function(){b=0;c.length=0;d.length=0},push:function(e,f,g,h,k){var m=a[b];void 0===m?(m={id:e.id,object:e,geometry:f,material:g,program:g.program,renderOrder:e.renderOrder,z:h,group:k},a[b]=m):(m.id=e.id,m.object=e,m.geometry=f,m.material=g,m.program=g.program,m.renderOrder=e.renderOrder,
    m.z=h,m.group=k);(!0===g.transparent?d:c).push(m);b++},sort:function(){1<c.length&&c.sort(gg);1<d.length&&d.sort(hg)}}}function jg(){var a={};return{get:function(b,c){b=b.id+","+c.id;c=a[b];void 0===c&&(c=new ig,a[b]=c);return c},dispose:function(){a={}}}}function kg(a,b){return Math.abs(b[1])-Math.abs(a[1])}function lg(a){var b={},c=new Float32Array(8);return{update:function(d,e,f,g){var h=d.morphTargetInfluences,k=h.length;d=b[e.id];if(void 0===d){d=[];for(var m=0;m<k;m++)d[m]=[m,0];b[e.id]=d}var q=
    f.morphTargets&&e.morphAttributes.position;f=f.morphNormals&&e.morphAttributes.normal;for(m=0;m<k;m++){var n=d[m];0!==n[1]&&(q&&e.removeAttribute("morphTarget"+m),f&&e.removeAttribute("morphNormal"+m))}for(m=0;m<k;m++)n=d[m],n[0]=m,n[1]=h[m];d.sort(kg);for(m=0;8>m;m++){if(n=d[m])if(h=n[0],n=n[1]){q&&e.addAttribute("morphTarget"+m,q[h]);f&&e.addAttribute("morphNormal"+m,f[h]);c[m]=n;continue}c[m]=0}g.getUniforms().setValue(a,"morphTargetInfluences",c)}}}function mg(a,b,c){var d,e,f;this.setMode=function(a){d=
    a};this.setIndex=function(a){e=a.type;f=a.bytesPerElement};this.render=function(b,h){a.drawElements(d,h,e,b*f);c.calls++;c.vertices+=h;d===a.TRIANGLES?c.faces+=h/3:d===a.POINTS&&(c.points+=h)};this.renderInstances=function(g,h,k){var m=b.get("ANGLE_instanced_arrays");null===m?console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(m.drawElementsInstancedANGLE(d,k,e,h*f,g.maxInstancedCount),c.calls++,c.vertices+=
    k*g.maxInstancedCount,d===a.TRIANGLES?c.faces+=g.maxInstancedCount*k/3:d===a.POINTS&&(c.points+=g.maxInstancedCount*k))}}function ng(a,b,c){var d;this.setMode=function(a){d=a};this.render=function(b,f){a.drawArrays(d,b,f);c.calls++;c.vertices+=f;d===a.TRIANGLES?c.faces+=f/3:d===a.POINTS&&(c.points+=f)};this.renderInstances=function(e,f,g){var h=b.get("ANGLE_instanced_arrays");if(null===h)console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
    else{var k=e.attributes.position;k.isInterleavedBufferAttribute?(g=k.data.count,h.drawArraysInstancedANGLE(d,0,g,e.maxInstancedCount)):h.drawArraysInstancedANGLE(d,f,g,e.maxInstancedCount);c.calls++;c.vertices+=g*e.maxInstancedCount;d===a.TRIANGLES?c.faces+=e.maxInstancedCount*g/3:d===a.POINTS&&(c.points+=e.maxInstancedCount*g)}}}function og(a,b,c){function d(a){a=a.target;var h=e[a.id];null!==h.index&&b.remove(h.index);for(var g in h.attributes)b.remove(h.attributes[g]);a.removeEventListener("dispose",
    d);delete e[a.id];if(g=f[a.id])b.remove(g),delete f[a.id];if(g=f[h.id])b.remove(g),delete f[h.id];c.geometries--}var e={},f={};return{get:function(a,b){var f=e[b.id];if(f)return f;b.addEventListener("dispose",d);b.isBufferGeometry?f=b:b.isGeometry&&(void 0===b._bufferGeometry&&(b._bufferGeometry=(new E).setFromObject(a)),f=b._bufferGeometry);e[b.id]=f;c.geometries++;return f},update:function(c){var d=c.index,e=c.attributes;null!==d&&b.update(d,a.ELEMENT_ARRAY_BUFFER);for(var f in e)b.update(e[f],
    a.ARRAY_BUFFER);c=c.morphAttributes;for(f in c)for(var d=c[f],e=0,g=d.length;e<g;e++)b.update(d[e],a.ARRAY_BUFFER)},getWireframeAttribute:function(c){var d=f[c.id];if(d)return d;d=[];var e=c.index;var g=c.attributes;if(null!==e){var q=e.array;for(var n=0,u=q.length;n<u;n+=3){var r=q[n+0];g=q[n+1];e=q[n+2];d.push(r,g,g,e,e,r)}}else for(q=g.position.array,n=0,u=q.length/3-1;n<u;n+=3)r=n+0,g=n+1,e=n+2,d.push(r,g,g,e,e,r);d=new (65535<Xd(d)?pb:ob)(d,1);b.update(d,a.ELEMENT_ARRAY_BUFFER);return f[c.id]=
    d}}}function pg(){var a={};return{get:function(b){if(void 0!==a[b.id])return a[b.id];switch(b.type){case "DirectionalLight":var c={direction:new p,color:new H,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new D};break;case "SpotLight":c={position:new p,direction:new p,color:new H,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new D};break;case "PointLight":c={position:new p,color:new H,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new D,
    shadowCameraNear:1,shadowCameraFar:1E3};break;case "HemisphereLight":c={direction:new p,skyColor:new H,groundColor:new H};break;case "RectAreaLight":c={color:new H,position:new p,halfWidth:new p,halfHeight:new p}}return a[b.id]=c}}}function qg(){var a=new pg,b={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},c=new p,d=new O,e=new O;return{setup:function(f,
    g,h){for(var k,m=0,q=0,n=0,u=0,r=0,t=0,l=0,w=0,p=h.matrixWorldInverse,y=0,I=f.length;y<I;y++){var A=f[y];k=A.color;var J=A.intensity,Ha=A.distance,Da=A.shadow&&A.shadow.map?A.shadow.map.texture:null;if(A.isAmbientLight)m+=k.r*J,q+=k.g*J,n+=k.b*J;else if(A.isDirectionalLight){h=a.get(A);h.color.copy(A.color).multiplyScalar(A.intensity);h.direction.setFromMatrixPosition(A.matrixWorld);c.setFromMatrixPosition(A.target.matrixWorld);h.direction.sub(c);h.direction.transformDirection(p);if(h.shadow=A.castShadow)k=
    A.shadow,h.shadowBias=k.bias,h.shadowRadius=k.radius,h.shadowMapSize=k.mapSize;b.directionalShadowMap[u]=Da;b.directionalShadowMatrix[u]=A.shadow.matrix;b.directional[u]=h;u++}else if(A.isSpotLight){h=a.get(A);h.position.setFromMatrixPosition(A.matrixWorld);h.position.applyMatrix4(p);h.color.copy(k).multiplyScalar(J);h.distance=Ha;h.direction.setFromMatrixPosition(A.matrixWorld);c.setFromMatrixPosition(A.target.matrixWorld);h.direction.sub(c);h.direction.transformDirection(p);h.coneCos=Math.cos(A.angle);
    h.penumbraCos=Math.cos(A.angle*(1-A.penumbra));h.decay=0===A.distance?0:A.decay;if(h.shadow=A.castShadow)k=A.shadow,h.shadowBias=k.bias,h.shadowRadius=k.radius,h.shadowMapSize=k.mapSize;b.spotShadowMap[t]=Da;b.spotShadowMatrix[t]=A.shadow.matrix;b.spot[t]=h;t++}else if(A.isRectAreaLight)h=a.get(A),h.color.copy(k).multiplyScalar(J/(A.width*A.height)),h.position.setFromMatrixPosition(A.matrixWorld),h.position.applyMatrix4(p),e.identity(),d.copy(A.matrixWorld),d.premultiply(p),e.extractRotation(d),h.halfWidth.set(.5*
    A.width,0,0),h.halfHeight.set(0,.5*A.height,0),h.halfWidth.applyMatrix4(e),h.halfHeight.applyMatrix4(e),b.rectArea[l]=h,l++;else if(A.isPointLight){h=a.get(A);h.position.setFromMatrixPosition(A.matrixWorld);h.position.applyMatrix4(p);h.color.copy(A.color).multiplyScalar(A.intensity);h.distance=A.distance;h.decay=0===A.distance?0:A.decay;if(h.shadow=A.castShadow)k=A.shadow,h.shadowBias=k.bias,h.shadowRadius=k.radius,h.shadowMapSize=k.mapSize,h.shadowCameraNear=k.camera.near,h.shadowCameraFar=k.camera.far;
    b.pointShadowMap[r]=Da;b.pointShadowMatrix[r]=A.shadow.matrix;b.point[r]=h;r++}else A.isHemisphereLight&&(h=a.get(A),h.direction.setFromMatrixPosition(A.matrixWorld),h.direction.transformDirection(p),h.direction.normalize(),h.skyColor.copy(A.color).multiplyScalar(J),h.groundColor.copy(A.groundColor).multiplyScalar(J),b.hemi[w]=h,w++)}b.ambient[0]=m;b.ambient[1]=q;b.ambient[2]=n;b.directional.length=u;b.spot.length=t;b.rectArea.length=l;b.point.length=r;b.hemi.length=w;b.hash=u+","+r+","+t+","+l+","+
    w+","+g.length},state:b}}function rg(a,b){var c={};return{update:function(d){var e=b.frame,f=d.geometry,g=a.get(d,f);c[g.id]!==e&&(f.isGeometry&&g.updateFromObject(d),a.update(g),c[g.id]=e);return g},clear:function(){c={}}}}function sg(a){a=a.split("\n");for(var b=0;b<a.length;b++)a[b]=b+1+": "+a[b];return a.join("\n")}function We(a,b,c){var d=a.createShader(b);a.shaderSource(d,c);a.compileShader(d);!1===a.getShaderParameter(d,a.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile.");
    ""!==a.getShaderInfoLog(d)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",b===a.VERTEX_SHADER?"vertex":"fragment",a.getShaderInfoLog(d),sg(c));return d}function Xe(a){switch(a){case 3E3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+
    a);}}function Yd(a,b){b=Xe(b);return"vec4 "+a+"( vec4 value ) { return "+b[0]+"ToLinear"+b[1]+"; }"}function tg(a,b){b=Xe(b);return"vec4 "+a+"( vec4 value ) { return LinearTo"+b[0]+b[1]+"; }"}function ug(a,b){switch(b){case 1:b="Linear";break;case 2:b="Reinhard";break;case 3:b="Uncharted2";break;case 4:b="OptimizedCineon";break;default:throw Error("unsupported toneMapping: "+b);}return"vec3 "+a+"( vec3 color ) { return "+b+"ToneMapping( color ); }"}function vg(a,b,c){a=a||{};return[a.derivatives||
    b.envMapCubeUV||b.bumpMap||b.normalMap||b.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(a.fragDepth||b.logarithmicDepthBuffer)&&c.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",a.drawBuffers&&c.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(a.shaderTextureLOD||b.envMap)&&c.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Bc).join("\n")}function wg(a){var b=[],c;for(c in a){var d=a[c];!1!==d&&b.push("#define "+
    c+" "+d)}return b.join("\n")}function Bc(a){return""!==a}function Ye(a,b){return a.replace(/NUM_DIR_LIGHTS/g,b.numDirLights).replace(/NUM_SPOT_LIGHTS/g,b.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,b.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,b.numPointLights).replace(/NUM_HEMI_LIGHTS/g,b.numHemiLights)}function Zd(a){return a.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,function(a,c){a=R[c];if(void 0===a)throw Error("Can not resolve #include <"+c+">");return Zd(a)})}function Ze(a){return a.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,
    function(a,c,d,e){a="";for(c=parseInt(c);c<parseInt(d);c++)a+=e.replace(/\[ i \]/g,"[ "+c+" ]");return a})}function xg(a,b,c,d,e,f){var g=a.context,h=d.defines,k=e.vertexShader,m=e.fragmentShader,q="SHADOWMAP_TYPE_BASIC";1===f.shadowMapType?q="SHADOWMAP_TYPE_PCF":2===f.shadowMapType&&(q="SHADOWMAP_TYPE_PCF_SOFT");var n="ENVMAP_TYPE_CUBE",u="ENVMAP_MODE_REFLECTION",r="ENVMAP_BLENDING_MULTIPLY";if(f.envMap){switch(d.envMap.mapping){case 301:case 302:n="ENVMAP_TYPE_CUBE";break;case 306:case 307:n="ENVMAP_TYPE_CUBE_UV";
    break;case 303:case 304:n="ENVMAP_TYPE_EQUIREC";break;case 305:n="ENVMAP_TYPE_SPHERE"}switch(d.envMap.mapping){case 302:case 304:u="ENVMAP_MODE_REFRACTION"}switch(d.combine){case 0:r="ENVMAP_BLENDING_MULTIPLY";break;case 1:r="ENVMAP_BLENDING_MIX";break;case 2:r="ENVMAP_BLENDING_ADD"}}var t=0<a.gammaFactor?a.gammaFactor:1,l=vg(d.extensions,f,b),p=wg(h),z=g.createProgram();d.isRawShaderMaterial?(h=[p].filter(Bc).join("\n"),0<h.length&&(h+="\n"),b=[l,p].filter(Bc).join("\n"),0<b.length&&(b+="\n")):(h=
    ["precision "+f.precision+" float;","precision "+f.precision+" int;","#define SHADER_NAME "+e.name,p,f.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+t,"#define MAX_BONES "+f.maxBones,f.useFog&&f.fog?"#define USE_FOG":"",f.useFog&&f.fogExp?"#define FOG_EXP2":"",f.map?"#define USE_MAP":"",f.envMap?"#define USE_ENVMAP":"",f.envMap?"#define "+u:"",f.lightMap?"#define USE_LIGHTMAP":"",f.aoMap?"#define USE_AOMAP":"",f.emissiveMap?"#define USE_EMISSIVEMAP":"",f.bumpMap?"#define USE_BUMPMAP":
    "",f.normalMap?"#define USE_NORMALMAP":"",f.displacementMap&&f.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",f.specularMap?"#define USE_SPECULARMAP":"",f.roughnessMap?"#define USE_ROUGHNESSMAP":"",f.metalnessMap?"#define USE_METALNESSMAP":"",f.alphaMap?"#define USE_ALPHAMAP":"",f.vertexColors?"#define USE_COLOR":"",f.flatShading?"#define FLAT_SHADED":"",f.skinning?"#define USE_SKINNING":"",f.useVertexTexture?"#define BONE_TEXTURE":"",f.morphTargets?"#define USE_MORPHTARGETS":"",f.morphNormals&&
    !1===f.flatShading?"#define USE_MORPHNORMALS":"",f.doubleSided?"#define DOUBLE_SIDED":"",f.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+f.numClippingPlanes,f.shadowMapEnabled?"#define USE_SHADOWMAP":"",f.shadowMapEnabled?"#define "+q:"",f.sizeAttenuation?"#define USE_SIZEATTENUATION":"",f.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",f.logarithmicDepthBuffer&&b.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;",
    "uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;",
    "\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Bc).join("\n"),b=[l,"precision "+f.precision+" float;","precision "+f.precision+" int;","#define SHADER_NAME "+e.name,p,f.alphaTest?"#define ALPHATEST "+f.alphaTest:
    "","#define GAMMA_FACTOR "+t,f.useFog&&f.fog?"#define USE_FOG":"",f.useFog&&f.fogExp?"#define FOG_EXP2":"",f.map?"#define USE_MAP":"",f.envMap?"#define USE_ENVMAP":"",f.envMap?"#define "+n:"",f.envMap?"#define "+u:"",f.envMap?"#define "+r:"",f.lightMap?"#define USE_LIGHTMAP":"",f.aoMap?"#define USE_AOMAP":"",f.emissiveMap?"#define USE_EMISSIVEMAP":"",f.bumpMap?"#define USE_BUMPMAP":"",f.normalMap?"#define USE_NORMALMAP":"",f.specularMap?"#define USE_SPECULARMAP":"",f.roughnessMap?"#define USE_ROUGHNESSMAP":
    "",f.metalnessMap?"#define USE_METALNESSMAP":"",f.alphaMap?"#define USE_ALPHAMAP":"",f.vertexColors?"#define USE_COLOR":"",f.gradientMap?"#define USE_GRADIENTMAP":"",f.flatShading?"#define FLAT_SHADED":"",f.doubleSided?"#define DOUBLE_SIDED":"",f.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+f.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(f.numClippingPlanes-f.numClipIntersection),f.shadowMapEnabled?"#define USE_SHADOWMAP":"",f.shadowMapEnabled?"#define "+q:"",f.premultipliedAlpha?
    "#define PREMULTIPLIED_ALPHA":"",f.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",f.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",f.logarithmicDepthBuffer&&b.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",f.envMap&&b.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==f.toneMapping?"#define TONE_MAPPING":"",0!==f.toneMapping?R.tonemapping_pars_fragment:"",0!==f.toneMapping?ug("toneMapping",f.toneMapping):
    "",f.dithering?"#define DITHERING":"",f.outputEncoding||f.mapEncoding||f.envMapEncoding||f.emissiveMapEncoding?R.encodings_pars_fragment:"",f.mapEncoding?Yd("mapTexelToLinear",f.mapEncoding):"",f.envMapEncoding?Yd("envMapTexelToLinear",f.envMapEncoding):"",f.emissiveMapEncoding?Yd("emissiveMapTexelToLinear",f.emissiveMapEncoding):"",f.outputEncoding?tg("linearToOutputTexel",f.outputEncoding):"",f.depthPacking?"#define DEPTH_PACKING "+d.depthPacking:"","\n"].filter(Bc).join("\n"));k=Zd(k);k=Ye(k,f);
    m=Zd(m);m=Ye(m,f);d.isShaderMaterial||(k=Ze(k),m=Ze(m));m=b+m;k=We(g,g.VERTEX_SHADER,h+k);m=We(g,g.FRAGMENT_SHADER,m);g.attachShader(z,k);g.attachShader(z,m);void 0!==d.index0AttributeName?g.bindAttribLocation(z,0,d.index0AttributeName):!0===f.morphTargets&&g.bindAttribLocation(z,0,"position");g.linkProgram(z);f=g.getProgramInfoLog(z);e=g.getShaderInfoLog(k);q=g.getShaderInfoLog(m);u=n=!0;if(!1===g.getProgramParameter(z,g.LINK_STATUS))n=!1,console.error("THREE.WebGLProgram: shader error: ",g.getError(),
    "gl.VALIDATE_STATUS",g.getProgramParameter(z,g.VALIDATE_STATUS),"gl.getProgramInfoLog",f,e,q);else if(""!==f)console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",f);else if(""===e||""===q)u=!1;u&&(this.diagnostics={runnable:n,material:d,programLog:f,vertexShader:{log:e,prefix:h},fragmentShader:{log:q,prefix:b}});g.deleteShader(k);g.deleteShader(m);var y;this.getUniforms=function(){void 0===y&&(y=new mb(g,z,a));return y};var I;this.getAttributes=function(){if(void 0===I){for(var a={},b=g.getProgramParameter(z,
    g.ACTIVE_ATTRIBUTES),c=0;c<b;c++){var d=g.getActiveAttrib(z,c).name;a[d]=g.getAttribLocation(z,d)}I=a}return I};this.destroy=function(){g.deleteProgram(z);this.program=void 0};Object.defineProperties(this,{uniforms:{get:function(){console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms().");return this.getUniforms()}},attributes:{get:function(){console.warn("THREE.WebGLProgram: .attributes is now .getAttributes().");return this.getAttributes()}}});this.id=yg++;this.code=c;this.usedTimes=1;
    this.program=z;this.vertexShader=k;this.fragmentShader=m;return this}function zg(a,b,c){function d(a,b){if(a)a.isTexture?c=a.encoding:a.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),c=a.texture.encoding);else var c=3E3;3E3===c&&b&&(c=3007);return c}var e=[],f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",
    MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},g="precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering".split(" ");
    this.getParameters=function(b,e,g,q,n,u,r){var h=f[b.type];if(r.isSkinnedMesh){var k=r.skeleton.bones;if(c.floatVertexTextures)k=1024;else{var m=Math.min(Math.floor((c.maxVertexUniforms-20)/4),k.length);m<k.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+k.length+" bones. This GPU supports "+m+"."),k=0):k=m}}else k=0;m=c.precision;null!==b.precision&&(m=c.getMaxPrecision(b.precision),m!==b.precision&&console.warn("THREE.WebGLProgram.getParameters:",b.precision,"not supported, using",m,"instead."));
    var l=a.getRenderTarget();return{shaderID:h,precision:m,supportsVertexTextures:c.vertexTextures,outputEncoding:d(l?l.texture:null,a.gammaOutput),map:!!b.map,mapEncoding:d(b.map,a.gammaInput),envMap:!!b.envMap,envMapMode:b.envMap&&b.envMap.mapping,envMapEncoding:d(b.envMap,a.gammaInput),envMapCubeUV:!!b.envMap&&(306===b.envMap.mapping||307===b.envMap.mapping),lightMap:!!b.lightMap,aoMap:!!b.aoMap,emissiveMap:!!b.emissiveMap,emissiveMapEncoding:d(b.emissiveMap,a.gammaInput),bumpMap:!!b.bumpMap,normalMap:!!b.normalMap,
    displacementMap:!!b.displacementMap,roughnessMap:!!b.roughnessMap,metalnessMap:!!b.metalnessMap,specularMap:!!b.specularMap,alphaMap:!!b.alphaMap,gradientMap:!!b.gradientMap,combine:b.combine,vertexColors:b.vertexColors,fog:!!q,useFog:b.fog,fogExp:q&&q.isFogExp2,flatShading:b.flatShading,sizeAttenuation:b.sizeAttenuation,logarithmicDepthBuffer:c.logarithmicDepthBuffer,skinning:b.skinning&&0<k,maxBones:k,useVertexTexture:c.floatVertexTextures,morphTargets:b.morphTargets,morphNormals:b.morphNormals,
    maxMorphTargets:a.maxMorphTargets,maxMorphNormals:a.maxMorphNormals,numDirLights:e.directional.length,numPointLights:e.point.length,numSpotLights:e.spot.length,numRectAreaLights:e.rectArea.length,numHemiLights:e.hemi.length,numClippingPlanes:n,numClipIntersection:u,dithering:b.dithering,shadowMapEnabled:a.shadowMap.enabled&&r.receiveShadow&&0<g.length,shadowMapType:a.shadowMap.type,toneMapping:a.toneMapping,physicallyCorrectLights:a.physicallyCorrectLights,premultipliedAlpha:b.premultipliedAlpha,
    alphaTest:b.alphaTest,doubleSided:2===b.side,flipSided:1===b.side,depthPacking:void 0!==b.depthPacking?b.depthPacking:!1}};this.getProgramCode=function(b,c){var d=[];c.shaderID?d.push(c.shaderID):(d.push(b.fragmentShader),d.push(b.vertexShader));if(void 0!==b.defines)for(var e in b.defines)d.push(e),d.push(b.defines[e]);for(e=0;e<g.length;e++)d.push(c[g[e]]);d.push(b.onBeforeCompile.toString());d.push(a.gammaOutput);return d.join()};this.acquireProgram=function(c,d,f,g){for(var h,k=0,m=e.length;k<
    m;k++){var q=e[k];if(q.code===g){h=q;++h.usedTimes;break}}void 0===h&&(h=new xg(a,b,g,c,d,f),e.push(h));return h};this.releaseProgram=function(a){if(0===--a.usedTimes){var b=e.indexOf(a);e[b]=e[e.length-1];e.pop();a.destroy()}};this.programs=e}function Ag(a,b,c,d,e,f,g){function h(a,b){if(a.width>b||a.height>b){b/=Math.max(a.width,a.height);var c=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");c.width=Math.floor(a.width*b);c.height=Math.floor(a.height*b);c.getContext("2d").drawImage(a,
    0,0,a.width,a.height,0,0,c.width,c.height);console.warn("THREE.WebGLRenderer: image is too big ("+a.width+"x"+a.height+"). Resized to "+c.width+"x"+c.height,a);return c}return a}function k(a){return Q.isPowerOfTwo(a.width)&&Q.isPowerOfTwo(a.height)}function m(a,b){return a.generateMipmaps&&b&&1003!==a.minFilter&&1006!==a.minFilter}function q(b){return 1003===b||1004===b||1005===b?a.NEAREST:a.LINEAR}function n(b){b=b.target;b.removeEventListener("dispose",n);a:{var c=d.get(b);if(b.image&&c.__image__webglTextureCube)a.deleteTexture(c.__image__webglTextureCube);
    else{if(void 0===c.__webglInit)break a;a.deleteTexture(c.__webglTexture)}d.remove(b)}b.isVideoTexture&&delete y[b.id];g.textures--}function u(b){b=b.target;b.removeEventListener("dispose",u);var c=d.get(b),e=d.get(b.texture);if(b){void 0!==e.__webglTexture&&a.deleteTexture(e.__webglTexture);b.depthTexture&&b.depthTexture.dispose();if(b.isWebGLRenderTargetCube)for(e=0;6>e;e++)a.deleteFramebuffer(c.__webglFramebuffer[e]),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer[e]);else a.deleteFramebuffer(c.__webglFramebuffer),
    c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer);d.remove(b.texture);d.remove(b)}g.textures--}function r(b,q){var u=d.get(b);if(0<b.version&&u.__version!==b.version){var r=b.image;if(void 0===r)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",b);else if(!1===r.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",b);else{void 0===u.__webglInit&&(u.__webglInit=!0,b.addEventListener("dispose",n),u.__webglTexture=
    a.createTexture(),b.isVideoTexture&&(y[b.id]=b),g.textures++);c.activeTexture(a.TEXTURE0+q);c.bindTexture(a.TEXTURE_2D,u.__webglTexture);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b.flipY);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b.premultiplyAlpha);a.pixelStorei(a.UNPACK_ALIGNMENT,b.unpackAlignment);var l=h(b.image,e.maxTextureSize);(1001!==b.wrapS||1001!==b.wrapT||1003!==b.minFilter&&1006!==b.minFilter)&&!1===k(l)&&(q=l,q instanceof HTMLImageElement||q instanceof HTMLCanvasElement||q instanceof ImageBitmap?
    (r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),r.width=Q.floorPowerOfTwo(q.width),r.height=Q.floorPowerOfTwo(q.height),r.getContext("2d").drawImage(q,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+q.width+"x"+q.height+"). Resized to "+r.width+"x"+r.height,q),l=r):l=q);q=k(l);var r=f.convert(b.format),v=f.convert(b.type);t(a.TEXTURE_2D,b,q);var p=b.mipmaps;if(b.isDepthTexture){p=a.DEPTH_COMPONENT;if(1015===b.type){if(!z)throw Error("Float Depth Texture only supported in WebGL2.0");
    p=a.DEPTH_COMPONENT32F}else z&&(p=a.DEPTH_COMPONENT16);1026===b.format&&p===a.DEPTH_COMPONENT&&1012!==b.type&&1014!==b.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),b.type=1012,v=f.convert(b.type));1027===b.format&&(p=a.DEPTH_STENCIL,1020!==b.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),b.type=1020,v=f.convert(b.type)));c.texImage2D(a.TEXTURE_2D,0,p,l.width,l.height,0,r,
    v,null)}else if(b.isDataTexture)if(0<p.length&&q){for(var A=0,w=p.length;A<w;A++)l=p[A],c.texImage2D(a.TEXTURE_2D,A,r,l.width,l.height,0,r,v,l.data);b.generateMipmaps=!1}else c.texImage2D(a.TEXTURE_2D,0,r,l.width,l.height,0,r,v,l.data);else if(b.isCompressedTexture)for(A=0,w=p.length;A<w;A++)l=p[A],1023!==b.format&&1022!==b.format?-1<c.getCompressedTextureFormats().indexOf(r)?c.compressedTexImage2D(a.TEXTURE_2D,A,r,l.width,l.height,0,l.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):
    c.texImage2D(a.TEXTURE_2D,A,r,l.width,l.height,0,r,v,l.data);else if(0<p.length&&q){A=0;for(w=p.length;A<w;A++)l=p[A],c.texImage2D(a.TEXTURE_2D,A,r,r,v,l);b.generateMipmaps=!1}else c.texImage2D(a.TEXTURE_2D,0,r,r,v,l);m(b,q)&&a.generateMipmap(a.TEXTURE_2D);u.__version=b.version;if(b.onUpdate)b.onUpdate(b);return}}c.activeTexture(a.TEXTURE0+q);c.bindTexture(a.TEXTURE_2D,u.__webglTexture)}function t(c,g,h){h?(a.texParameteri(c,a.TEXTURE_WRAP_S,f.convert(g.wrapS)),a.texParameteri(c,a.TEXTURE_WRAP_T,
    f.convert(g.wrapT)),a.texParameteri(c,a.TEXTURE_MAG_FILTER,f.convert(g.magFilter)),a.texParameteri(c,a.TEXTURE_MIN_FILTER,f.convert(g.minFilter))):(a.texParameteri(c,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(c,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),1001===g.wrapS&&1001===g.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",g),a.texParameteri(c,a.TEXTURE_MAG_FILTER,q(g.magFilter)),a.texParameteri(c,
    a.TEXTURE_MIN_FILTER,q(g.minFilter)),1003!==g.minFilter&&1006!==g.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",g));!(h=b.get("EXT_texture_filter_anisotropic"))||1015===g.type&&null===b.get("OES_texture_float_linear")||1016===g.type&&null===b.get("OES_texture_half_float_linear")||!(1<g.anisotropy||d.get(g).__currentAnisotropy)||(a.texParameterf(c,h.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(g.anisotropy,
    e.getMaxAnisotropy())),d.get(g).__currentAnisotropy=g.anisotropy)}function l(b,e,g,h){var k=f.convert(e.texture.format),m=f.convert(e.texture.type);c.texImage2D(h,0,k,e.width,e.height,0,k,m,null);a.bindFramebuffer(a.FRAMEBUFFER,b);a.framebufferTexture2D(a.FRAMEBUFFER,g,h,d.get(e.texture).__webglTexture,0);a.bindFramebuffer(a.FRAMEBUFFER,null)}function p(b,c){a.bindRenderbuffer(a.RENDERBUFFER,b);c.depthBuffer&&!c.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,c.width,c.height),
    a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,b)):c.depthBuffer&&c.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,c.width,c.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,b)):a.renderbufferStorage(a.RENDERBUFFER,a.RGBA4,c.width,c.height);a.bindRenderbuffer(a.RENDERBUFFER,null)}var z="undefined"!==typeof WebGL2RenderingContext&&a instanceof window.WebGL2RenderingContext,y={};this.setTexture2D=r;this.setTextureCube=
    function(b,q){var u=d.get(b);if(6===b.image.length)if(0<b.version&&u.__version!==b.version){u.__image__webglTextureCube||(b.addEventListener("dispose",n),u.__image__webglTextureCube=a.createTexture(),g.textures++);c.activeTexture(a.TEXTURE0+q);c.bindTexture(a.TEXTURE_CUBE_MAP,u.__image__webglTextureCube);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b.flipY);q=b&&b.isCompressedTexture;for(var r=b.image[0]&&b.image[0].isDataTexture,l=[],v=0;6>v;v++)l[v]=q||r?r?b.image[v].image:b.image[v]:h(b.image[v],e.maxCubemapSize);
    var p=k(l[0]),w=f.convert(b.format),A=f.convert(b.type);t(a.TEXTURE_CUBE_MAP,b,p);for(v=0;6>v;v++)if(q)for(var y,I=l[v].mipmaps,z=0,x=I.length;z<x;z++)y=I[z],1023!==b.format&&1022!==b.format?-1<c.getCompressedTextureFormats().indexOf(w)?c.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+v,z,w,y.width,y.height,0,y.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+v,z,w,y.width,y.height,
    0,w,A,y.data);else r?c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,w,l[v].width,l[v].height,0,w,A,l[v].data):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,w,w,A,l[v]);m(b,p)&&a.generateMipmap(a.TEXTURE_CUBE_MAP);u.__version=b.version;if(b.onUpdate)b.onUpdate(b)}else c.activeTexture(a.TEXTURE0+q),c.bindTexture(a.TEXTURE_CUBE_MAP,u.__image__webglTextureCube)};this.setTextureCubeDynamic=function(b,e){c.activeTexture(a.TEXTURE0+e);c.bindTexture(a.TEXTURE_CUBE_MAP,d.get(b).__webglTexture)};this.setupRenderTarget=
    function(b){var e=d.get(b),f=d.get(b.texture);b.addEventListener("dispose",u);f.__webglTexture=a.createTexture();g.textures++;var h=!0===b.isWebGLRenderTargetCube,n=k(b);if(h){e.__webglFramebuffer=[];for(var q=0;6>q;q++)e.__webglFramebuffer[q]=a.createFramebuffer()}else e.__webglFramebuffer=a.createFramebuffer();if(h){c.bindTexture(a.TEXTURE_CUBE_MAP,f.__webglTexture);t(a.TEXTURE_CUBE_MAP,b.texture,n);for(q=0;6>q;q++)l(e.__webglFramebuffer[q],b,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+q);
    m(b.texture,n)&&a.generateMipmap(a.TEXTURE_CUBE_MAP);c.bindTexture(a.TEXTURE_CUBE_MAP,null)}else c.bindTexture(a.TEXTURE_2D,f.__webglTexture),t(a.TEXTURE_2D,b.texture,n),l(e.__webglFramebuffer,b,a.COLOR_ATTACHMENT0,a.TEXTURE_2D),m(b.texture,n)&&a.generateMipmap(a.TEXTURE_2D),c.bindTexture(a.TEXTURE_2D,null);if(b.depthBuffer){e=d.get(b);f=!0===b.isWebGLRenderTargetCube;if(b.depthTexture){if(f)throw Error("target.depthTexture not supported in Cube render targets");if(b&&b.isWebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported");
    a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer);if(!b.depthTexture||!b.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");d.get(b.depthTexture).__webglTexture&&b.depthTexture.image.width===b.width&&b.depthTexture.image.height===b.height||(b.depthTexture.image.width=b.width,b.depthTexture.image.height=b.height,b.depthTexture.needsUpdate=!0);r(b.depthTexture,0);e=d.get(b.depthTexture).__webglTexture;if(1026===b.depthTexture.format)a.framebufferTexture2D(a.FRAMEBUFFER,
    a.DEPTH_ATTACHMENT,a.TEXTURE_2D,e,0);else if(1027===b.depthTexture.format)a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,e,0);else throw Error("Unknown depthTexture format");}else if(f)for(e.__webglDepthbuffer=[],f=0;6>f;f++)a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer[f]),e.__webglDepthbuffer[f]=a.createRenderbuffer(),p(e.__webglDepthbuffer[f],b);else a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer),e.__webglDepthbuffer=a.createRenderbuffer(),p(e.__webglDepthbuffer,
    b);a.bindFramebuffer(a.FRAMEBUFFER,null)}};this.updateRenderTargetMipmap=function(b){var e=b.texture,f=k(b);m(e,f)&&(b=b.isWebGLRenderTargetCube?a.TEXTURE_CUBE_MAP:a.TEXTURE_2D,e=d.get(e).__webglTexture,c.bindTexture(b,e),a.generateMipmap(b),c.bindTexture(b,null))};this.updateVideoTextures=function(){for(var a in y)y[a].update()}}function Bg(){var a={};return{get:function(b){b=b.uuid;var c=a[b];void 0===c&&(c={},a[b]=c);return c},remove:function(b){delete a[b.uuid]},clear:function(){a={}}}}function Cg(a,
    b,c){function d(b,c,d){var e=new Uint8Array(4),f=a.createTexture();a.bindTexture(b,f);a.texParameteri(b,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(b,a.TEXTURE_MAG_FILTER,a.NEAREST);for(b=0;b<d;b++)a.texImage2D(c+b,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,e);return f}function e(b){!0!==y[b]&&(a.enable(b),y[b]=!0)}function f(b){!1!==y[b]&&(a.disable(b),y[b]=!1)}function g(b,d,g,h,k,m,q,n){0!==b?e(a.BLEND):f(a.BLEND);if(5!==b){if(b!==J||n!==la)switch(b){case 2:n?(a.blendEquationSeparate(a.FUNC_ADD,
    a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE,a.ONE,a.ONE)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.SRC_ALPHA,a.ONE));break;case 3:n?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.ONE_MINUS_SRC_COLOR));break;case 4:n?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.SRC_COLOR,a.ZERO,a.SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,
    a.SRC_COLOR));break;default:n?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA))}H=E=C=D=B=x=null}else{k=k||d;m=m||g;q=q||h;if(d!==x||k!==C)a.blendEquationSeparate(c.convert(d),c.convert(k)),x=d,C=k;if(g!==B||h!==D||m!==E||q!==H)a.blendFuncSeparate(c.convert(g),c.convert(h),c.convert(m),c.convert(q)),
    B=g,D=h,E=m,H=q}J=b;la=n}function h(b){S!==b&&(b?a.frontFace(a.CW):a.frontFace(a.CCW),S=b)}function k(b){0!==b?(e(a.CULL_FACE),b!==K&&(1===b?a.cullFace(a.BACK):2===b?a.cullFace(a.FRONT):a.cullFace(a.FRONT_AND_BACK))):f(a.CULL_FACE);K=b}function m(b,c,d){if(b){if(e(a.POLYGON_OFFSET_FILL),L!==c||O!==d)a.polygonOffset(c,d),L=c,O=d}else f(a.POLYGON_OFFSET_FILL)}function q(b){void 0===b&&(b=a.TEXTURE0+Q-1);M!==b&&(a.activeTexture(b),M=b)}var n=new function(){var b=!1,c=new aa,d=null,e=new aa(0,0,0,0);
    return{setMask:function(c){d===c||b||(a.colorMask(c,c,c,c),d=c)},setLocked:function(a){b=a},setClear:function(b,d,f,g,h){!0===h&&(b*=g,d*=g,f*=g);c.set(b,d,f,g);!1===e.equals(c)&&(a.clearColor(b,d,f,g),e.copy(c))},reset:function(){b=!1;d=null;e.set(-1,0,0,0)}}},u=new function(){var b=!1,c=null,d=null,g=null;return{setTest:function(b){b?e(a.DEPTH_TEST):f(a.DEPTH_TEST)},setMask:function(d){c===d||b||(a.depthMask(d),c=d)},setFunc:function(b){if(d!==b){if(b)switch(b){case 0:a.depthFunc(a.NEVER);break;
    case 1:a.depthFunc(a.ALWAYS);break;case 2:a.depthFunc(a.LESS);break;case 3:a.depthFunc(a.LEQUAL);break;case 4:a.depthFunc(a.EQUAL);break;case 5:a.depthFunc(a.GEQUAL);break;case 6:a.depthFunc(a.GREATER);break;case 7:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}else a.depthFunc(a.LEQUAL);d=b}},setLocked:function(a){b=a},setClear:function(b){g!==b&&(a.clearDepth(b),g=b)},reset:function(){b=!1;g=d=c=null}}},r=new function(){var b=!1,c=null,d=null,g=null,h=null,k=null,m=null,n=null,q=null;
    return{setTest:function(b){b?e(a.STENCIL_TEST):f(a.STENCIL_TEST)},setMask:function(d){c===d||b||(a.stencilMask(d),c=d)},setFunc:function(b,c,e){if(d!==b||g!==c||h!==e)a.stencilFunc(b,c,e),d=b,g=c,h=e},setOp:function(b,c,d){if(k!==b||m!==c||n!==d)a.stencilOp(b,c,d),k=b,m=c,n=d},setLocked:function(a){b=a},setClear:function(b){q!==b&&(a.clearStencil(b),q=b)},reset:function(){b=!1;q=n=m=k=h=g=d=c=null}}},l=a.getParameter(a.MAX_VERTEX_ATTRIBS),v=new Uint8Array(l),p=new Uint8Array(l),z=new Uint8Array(l),
    y={},I=null,A=null,J=null,x=null,B=null,D=null,C=null,E=null,H=null,la=!1,S=null,K=null,N=null,L=null,O=null,Q=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS),l=parseFloat(/^WebGL\ ([0-9])/.exec(a.getParameter(a.VERSION))[1]),V=1<=parseFloat(l),M=null,P={},R=new aa,G=new aa,Y={};Y[a.TEXTURE_2D]=d(a.TEXTURE_2D,a.TEXTURE_2D,1);Y[a.TEXTURE_CUBE_MAP]=d(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6);n.setClear(0,0,0,1);u.setClear(1);r.setClear(0);e(a.DEPTH_TEST);u.setFunc(3);h(!1);k(1);e(a.CULL_FACE);
    e(a.BLEND);g(1);return{buffers:{color:n,depth:u,stencil:r},initAttributes:function(){for(var a=0,b=v.length;a<b;a++)v[a]=0},enableAttribute:function(c){v[c]=1;0===p[c]&&(a.enableVertexAttribArray(c),p[c]=1);0!==z[c]&&(b.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(c,0),z[c]=0)},enableAttributeAndDivisor:function(c,d){v[c]=1;0===p[c]&&(a.enableVertexAttribArray(c),p[c]=1);z[c]!==d&&(b.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(c,d),z[c]=d)},disableUnusedAttributes:function(){for(var b=
    0,c=p.length;b!==c;++b)p[b]!==v[b]&&(a.disableVertexAttribArray(b),p[b]=0)},enable:e,disable:f,getCompressedTextureFormats:function(){if(null===I&&(I=[],b.get("WEBGL_compressed_texture_pvrtc")||b.get("WEBGL_compressed_texture_s3tc")||b.get("WEBGL_compressed_texture_etc1")))for(var c=a.getParameter(a.COMPRESSED_TEXTURE_FORMATS),d=0;d<c.length;d++)I.push(c[d]);return I},useProgram:function(b){return A!==b?(a.useProgram(b),A=b,!0):!1},setBlending:g,setMaterial:function(b,c){2===b.side?f(a.CULL_FACE):
    e(a.CULL_FACE);var d=1===b.side;c&&(d=!d);h(d);!0===b.transparent?g(b.blending,b.blendEquation,b.blendSrc,b.blendDst,b.blendEquationAlpha,b.blendSrcAlpha,b.blendDstAlpha,b.premultipliedAlpha):g(0);u.setFunc(b.depthFunc);u.setTest(b.depthTest);u.setMask(b.depthWrite);n.setMask(b.colorWrite);m(b.polygonOffset,b.polygonOffsetFactor,b.polygonOffsetUnits)},setFlipSided:h,setCullFace:k,setLineWidth:function(b){b!==N&&(V&&a.lineWidth(b),N=b)},setPolygonOffset:m,setScissorTest:function(b){b?e(a.SCISSOR_TEST):
    f(a.SCISSOR_TEST)},activeTexture:q,bindTexture:function(b,c){null===M&&q();var d=P[M];void 0===d&&(d={type:void 0,texture:void 0},P[M]=d);if(d.type!==b||d.texture!==c)a.bindTexture(b,c||Y[b]),d.type=b,d.texture=c},compressedTexImage2D:function(){try{a.compressedTexImage2D.apply(a,arguments)}catch(ea){console.error("THREE.WebGLState:",ea)}},texImage2D:function(){try{a.texImage2D.apply(a,arguments)}catch(ea){console.error("THREE.WebGLState:",ea)}},scissor:function(b){!1===R.equals(b)&&(a.scissor(b.x,
    b.y,b.z,b.w),R.copy(b))},viewport:function(b){!1===G.equals(b)&&(a.viewport(b.x,b.y,b.z,b.w),G.copy(b))},reset:function(){for(var b=0;b<p.length;b++)1===p[b]&&(a.disableVertexAttribArray(b),p[b]=0);y={};M=I=null;P={};K=S=J=A=null;n.reset();u.reset();r.reset()}}}function Dg(a,b,c){function d(b){if("highp"===b){if(0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision)return"highp";b="mediump"}return"mediump"===b&&
    0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision?"mediump":"lowp"}var e,f=void 0!==c.precision?c.precision:"highp",g=d(f);g!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",g,"instead."),f=g);c=!0===c.logarithmicDepthBuffer;var g=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),h=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),k=a.getParameter(a.MAX_TEXTURE_SIZE),m=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),
    q=a.getParameter(a.MAX_VERTEX_ATTRIBS),n=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),u=a.getParameter(a.MAX_VARYING_VECTORS),r=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS),l=0<h,v=!!b.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==e)return e;var c=b.get("EXT_texture_filter_anisotropic");return e=null!==c?a.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:d,precision:f,logarithmicDepthBuffer:c,maxTextures:g,maxVertexTextures:h,maxTextureSize:k,maxCubemapSize:m,
    maxAttributes:q,maxVertexUniforms:n,maxVaryings:u,maxFragmentUniforms:r,vertexTextures:l,floatFragmentTextures:v,floatVertexTextures:l&&v}}function ba(a,b,c,d){Ta.call(this);this.type="PerspectiveCamera";this.fov=void 0!==a?a:50;this.zoom=1;this.near=void 0!==c?c:.1;this.far=void 0!==d?d:2E3;this.focus=10;this.aspect=void 0!==b?b:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}function ud(a){ba.call(this);this.cameras=a||[]}function be(a){function b(){if(null!==
    d&&d.isPresenting){var b=d.getEyeParameters("left"),e=b.renderWidth,b=b.renderHeight;n=a.getPixelRatio();q=a.getSize();a.setDrawingBufferSize(2*e,b,1)}else c.enabled&&a.setDrawingBufferSize(q.width,q.height,n)}var c=this,d=null,e=null,f=null;"undefined"!==typeof window&&"VRFrameData"in window&&(e=new window.VRFrameData);var g=new O,h=new ba;h.bounds=new aa(0,0,.5,1);h.layers.enable(1);var k=new ba;k.bounds=new aa(.5,0,.5,1);k.layers.enable(2);var m=new ud([h,k]);m.layers.enable(1);m.layers.enable(2);
    var q,n;"undefined"!==typeof window&&window.addEventListener("vrdisplaypresentchange",b,!1);this.enabled=!1;this.getDevice=function(){return d};this.setDevice=function(a){void 0!==a&&(d=a)};this.setPoseTarget=function(a){void 0!==a&&(f=a)};this.getCamera=function(a){if(null===d)return a;d.depthNear=a.near;d.depthFar=a.far;d.getFrameData(e);var b=e.pose,c=null!==f?f:a;null!==b.position?c.position.fromArray(b.position):c.position.set(0,0,0);null!==b.orientation&&c.quaternion.fromArray(b.orientation);
    c.updateMatrixWorld();if(!1===d.isPresenting)return a;h.near=a.near;k.near=a.near;h.far=a.far;k.far=a.far;m.matrixWorld.copy(a.matrixWorld);m.matrixWorldInverse.copy(a.matrixWorldInverse);h.matrixWorldInverse.fromArray(e.leftViewMatrix);k.matrixWorldInverse.fromArray(e.rightViewMatrix);a=c.parent;null!==a&&(g.getInverse(a.matrixWorld),h.matrixWorldInverse.multiply(g),k.matrixWorldInverse.multiply(g));h.matrixWorld.getInverse(h.matrixWorldInverse);k.matrixWorld.getInverse(k.matrixWorldInverse);h.projectionMatrix.fromArray(e.leftProjectionMatrix);
    k.projectionMatrix.fromArray(e.rightProjectionMatrix);m.projectionMatrix.copy(h.projectionMatrix);a=d.getLayers();a.length&&(a=a[0],null!==a.leftBounds&&4===a.leftBounds.length&&h.bounds.fromArray(a.leftBounds),null!==a.rightBounds&&4===a.rightBounds.length&&k.bounds.fromArray(a.rightBounds));return m};this.submitFrame=function(){d&&d.isPresenting&&d.submitFrame()};this.dispose=function(){"undefined"!==typeof window&&window.removeEventListener("vrdisplaypresentchange",b)}}function Eg(a){var b={};
    return{get:function(c){if(void 0!==b[c])return b[c];switch(c){case "WEBGL_depth_texture":var d=a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");break;case "EXT_texture_filter_anisotropic":d=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case "WEBGL_compressed_texture_s3tc":d=a.getExtension("WEBGL_compressed_texture_s3tc")||
    a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case "WEBGL_compressed_texture_pvrtc":d=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case "WEBGL_compressed_texture_etc1":d=a.getExtension("WEBGL_compressed_texture_etc1");break;default:d=a.getExtension(c)}null===d&&console.warn("THREE.WebGLRenderer: "+c+" extension not supported.");return b[c]=d}}}function Fg(){function a(){m.value!==
    d&&(m.value=d,m.needsUpdate=0<e);c.numPlanes=e;c.numIntersection=0}function b(a,b,d,e){var f=null!==a?a.length:0,g=null;if(0!==f){g=m.value;if(!0!==e||null===g){e=d+4*f;b=b.matrixWorldInverse;k.getNormalMatrix(b);if(null===g||g.length<e)g=new Float32Array(e);for(e=0;e!==f;++e,d+=4)h.copy(a[e]).applyMatrix4(b,k),h.normal.toArray(g,d),g[d+3]=h.constant}m.value=g;m.needsUpdate=!0}c.numPlanes=f;return g}var c=this,d=null,e=0,f=!1,g=!1,h=new Ea,k=new ma,m={value:null,needsUpdate:!1};this.uniform=m;this.numIntersection=
    this.numPlanes=0;this.init=function(a,c,g){var h=0!==a.length||c||0!==e||f;f=c;d=b(a,g,0);e=a.length;return h};this.beginShadows=function(){g=!0;b(null)};this.endShadows=function(){g=!1;a()};this.setState=function(c,h,k,l,t,v){if(!f||null===c||0===c.length||g&&!k)g?b(null):a();else{k=g?0:e;var n=4*k,q=t.clippingState||null;m.value=q;q=b(c,l,n,v);for(c=0;c!==n;++c)q[c]=d[c];t.clippingState=q;this.numIntersection=h?this.numPlanes:0;this.numPlanes+=k}}}function af(a,b){return{convert:function(c){if(1E3===
    c)return a.REPEAT;if(1001===c)return a.CLAMP_TO_EDGE;if(1002===c)return a.MIRRORED_REPEAT;if(1003===c)return a.NEAREST;if(1004===c)return a.NEAREST_MIPMAP_NEAREST;if(1005===c)return a.NEAREST_MIPMAP_LINEAR;if(1006===c)return a.LINEAR;if(1007===c)return a.LINEAR_MIPMAP_NEAREST;if(1008===c)return a.LINEAR_MIPMAP_LINEAR;if(1009===c)return a.UNSIGNED_BYTE;if(1017===c)return a.UNSIGNED_SHORT_4_4_4_4;if(1018===c)return a.UNSIGNED_SHORT_5_5_5_1;if(1019===c)return a.UNSIGNED_SHORT_5_6_5;if(1010===c)return a.BYTE;
    if(1011===c)return a.SHORT;if(1012===c)return a.UNSIGNED_SHORT;if(1013===c)return a.INT;if(1014===c)return a.UNSIGNED_INT;if(1015===c)return a.FLOAT;if(1016===c){var d=b.get("OES_texture_half_float");if(null!==d)return d.HALF_FLOAT_OES}if(1021===c)return a.ALPHA;if(1022===c)return a.RGB;if(1023===c)return a.RGBA;if(1024===c)return a.LUMINANCE;if(1025===c)return a.LUMINANCE_ALPHA;if(1026===c)return a.DEPTH_COMPONENT;if(1027===c)return a.DEPTH_STENCIL;if(100===c)return a.FUNC_ADD;if(101===c)return a.FUNC_SUBTRACT;
    if(102===c)return a.FUNC_REVERSE_SUBTRACT;if(200===c)return a.ZERO;if(201===c)return a.ONE;if(202===c)return a.SRC_COLOR;if(203===c)return a.ONE_MINUS_SRC_COLOR;if(204===c)return a.SRC_ALPHA;if(205===c)return a.ONE_MINUS_SRC_ALPHA;if(206===c)return a.DST_ALPHA;if(207===c)return a.ONE_MINUS_DST_ALPHA;if(208===c)return a.DST_COLOR;if(209===c)return a.ONE_MINUS_DST_COLOR;if(210===c)return a.SRC_ALPHA_SATURATE;if(2001===c||2002===c||2003===c||2004===c)if(d=b.get("WEBGL_compressed_texture_s3tc"),null!==
    d){if(2001===c)return d.COMPRESSED_RGB_S3TC_DXT1_EXT;if(2002===c)return d.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(2003===c)return d.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(2004===c)return d.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(2100===c||2101===c||2102===c||2103===c)if(d=b.get("WEBGL_compressed_texture_pvrtc"),null!==d){if(2100===c)return d.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(2101===c)return d.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(2102===c)return d.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(2103===c)return d.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(2151===
    c&&(d=b.get("WEBGL_compressed_texture_etc1"),null!==d))return d.COMPRESSED_RGB_ETC1_WEBGL;if(103===c||104===c)if(d=b.get("EXT_blend_minmax"),null!==d){if(103===c)return d.MIN_EXT;if(104===c)return d.MAX_EXT}return 1020===c&&(d=b.get("WEBGL_depth_texture"),null!==d)?d.UNSIGNED_INT_24_8_WEBGL:0}}}function ce(a){function b(){ia=new Eg(F);ia.get("WEBGL_depth_texture");ia.get("OES_texture_float");ia.get("OES_texture_float_linear");ia.get("OES_texture_half_float");ia.get("OES_texture_half_float_linear");
    ia.get("OES_standard_derivatives");ia.get("OES_element_index_uint");ia.get("ANGLE_instanced_arrays");pa=new af(F,ia);T=new Dg(F,ia,a);Z=new Cg(F,ia,pa);Z.scissor(X.copy(fa).multiplyScalar(wa));Z.viewport(nb.copy(da).multiplyScalar(wa));ca=new Bg;ga=new Ag(F,ia,Z,ca,T,pa,ha);qa=new bg(F);ra=new og(F,qa,ha);ta=new rg(ra,ba);xa=new lg(F);ma=new zg(S,ia,T);ua=new qg;sa=new jg;ja=new fg(S,Z,ra,J);ya=new ng(F,ia,ba);za=new mg(F,ia,ba);Aa=new Zf(S,F,Z,ga,T);Ba=new $f(S,F,Z,ga,T);S.info.programs=ma.programs;
    S.context=F;S.capabilities=T;S.extensions=ia;S.properties=ca;S.renderLists=sa;S.state=Z}function c(a){a.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");L=!0}function d(){console.log("THREE.WebGLRenderer: Context Restored.");L=!1;b()}function e(a){a=a.target;a.removeEventListener("dispose",e);f(a);ca.remove(a)}function f(a){var b=ca.get(a).program;a.program=void 0;void 0!==b&&ma.releaseProgram(b)}function g(a,b,c){a.render(function(a){S.renderBufferImmediate(a,b,c)})}function h(a){null!==
    Ca&&Ca(a);(a=ka.getDevice())&&a.isPresenting?a.requestAnimationFrame(h):window.requestAnimationFrame(h)}function k(a,b,c){if(!1!==a.visible){if(a.layers.test(b.layers))if(a.isLight)D.push(a),a.castShadow&&C.push(a);else if(a.isSprite)a.frustumCulled&&!$d.intersectsSprite(a)||H.push(a);else if(a.isLensFlare)la.push(a);else if(a.isImmediateRenderObject)c&&Ob.setFromMatrixPosition(a.matrixWorld).applyMatrix4(td),E.push(a,null,a.material,Ob.z,null);else if(a.isMesh||a.isLine||a.isPoints)if(a.isSkinnedMesh&&
    a.skeleton.update(),!a.frustumCulled||$d.intersectsObject(a)){c&&Ob.setFromMatrixPosition(a.matrixWorld).applyMatrix4(td);var d=ta.update(a),e=a.material;if(Array.isArray(e))for(var f=d.groups,g=0,h=f.length;g<h;g++){var m=f[g],n=e[m.materialIndex];n&&n.visible&&E.push(a,d,n,Ob.z,m)}else e.visible&&E.push(a,d,e,Ob.z,null)}a=a.children;g=0;for(h=a.length;g<h;g++)k(a[g],b,c)}}function m(a,b,c,d){for(var e=0,f=a.length;e<f;e++){var g=a[e],h=g.object,k=g.geometry,m=void 0===d?g.material:d,g=g.group;if(c.isArrayCamera){W=
    c;for(var n=c.cameras,u=0,l=n.length;u<l;u++){var r=n[u];if(h.layers.test(r.layers)){var t=r.bounds;Z.viewport(nb.set(t.x*ea,t.y*U,t.z*ea,t.w*U).multiplyScalar(wa));q(h,b,r,k,m,g)}}}else W=null,q(h,b,c,k,m,g)}}function q(a,b,c,d,e,f){a.onBeforeRender(S,b,c,d,e,f);a.modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,a.matrixWorld);a.normalMatrix.getNormalMatrix(a.modelViewMatrix);if(a.isImmediateRenderObject){var h=a.isMesh&&0>a.matrixWorld.determinant();Z.setMaterial(e,h);h=u(c,b.fog,e,a);R="";
    g(a,h,e)}else S.renderBufferDirect(c,b.fog,d,e,a,f);a.onAfterRender(S,b,c,d,e,f)}function n(a,b,c){var d=ca.get(a);c=ma.getParameters(a,ua.state,C,b,Ja.numPlanes,Ja.numIntersection,c);var g=ma.getProgramCode(a,c),h=d.program,k=!0;if(void 0===h)a.addEventListener("dispose",e);else if(h.code!==g)f(a);else{if(void 0!==c.shaderID)return;k=!1}k&&(c.shaderID?(h=tb[c.shaderID],d.shader={name:a.type,uniforms:Ga.clone(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}):d.shader={name:a.type,
    uniforms:a.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader},a.onBeforeCompile(d.shader),h=ma.acquireProgram(a,d.shader,c,g),d.program=h,a.program=h);c=h.getAttributes();if(a.morphTargets)for(g=a.numSupportedMorphTargets=0;g<S.maxMorphTargets;g++)0<=c["morphTarget"+g]&&a.numSupportedMorphTargets++;if(a.morphNormals)for(g=a.numSupportedMorphNormals=0;g<S.maxMorphNormals;g++)0<=c["morphNormal"+g]&&a.numSupportedMorphNormals++;c=d.shader.uniforms;if(!a.isShaderMaterial&&!a.isRawShaderMaterial||
    !0===a.clipping)d.numClippingPlanes=Ja.numPlanes,d.numIntersection=Ja.numIntersection,c.clippingPlanes=Ja.uniform;d.fog=b;d.lightsHash=ua.state.hash;a.lights&&(c.ambientLightColor.value=ua.state.ambient,c.directionalLights.value=ua.state.directional,c.spotLights.value=ua.state.spot,c.rectAreaLights.value=ua.state.rectArea,c.pointLights.value=ua.state.point,c.hemisphereLights.value=ua.state.hemi,c.directionalShadowMap.value=ua.state.directionalShadowMap,c.directionalShadowMatrix.value=ua.state.directionalShadowMatrix,
    c.spotShadowMap.value=ua.state.spotShadowMap,c.spotShadowMatrix.value=ua.state.spotShadowMatrix,c.pointShadowMap.value=ua.state.pointShadowMap,c.pointShadowMatrix.value=ua.state.pointShadowMatrix);a=d.program.getUniforms();a=mb.seqWithValue(a.seq,c);d.uniformsList=a}function u(a,b,c,d){Y=0;var e=ca.get(c);sd&&(ae||a!==V)&&Ja.setState(c.clippingPlanes,c.clipIntersection,c.clipShadows,a,e,a===V&&c.id===P);!1===c.needsUpdate&&(void 0===e.program?c.needsUpdate=!0:c.fog&&e.fog!==b?c.needsUpdate=!0:c.lights&&
    e.lightsHash!==ua.state.hash?c.needsUpdate=!0:void 0===e.numClippingPlanes||e.numClippingPlanes===Ja.numPlanes&&e.numIntersection===Ja.numIntersection||(c.needsUpdate=!0));c.needsUpdate&&(n(c,b,d),c.needsUpdate=!1);var f=!1,g=!1,h=!1,k=e.program,m=k.getUniforms(),q=e.shader.uniforms;Z.useProgram(k.program)&&(h=g=f=!0);c.id!==P&&(P=c.id,g=!0);if(f||a!==V){m.setValue(F,"projectionMatrix",a.projectionMatrix);T.logarithmicDepthBuffer&&m.setValue(F,"logDepthBufFC",2/(Math.log(a.far+1)/Math.LN2));V!==(W||
    a)&&(V=W||a,h=g=!0);if(c.isShaderMaterial||c.isMeshPhongMaterial||c.isMeshStandardMaterial||c.envMap)f=m.map.cameraPosition,void 0!==f&&f.setValue(F,Ob.setFromMatrixPosition(a.matrixWorld));(c.isMeshPhongMaterial||c.isMeshLambertMaterial||c.isMeshBasicMaterial||c.isMeshStandardMaterial||c.isShaderMaterial||c.skinning)&&m.setValue(F,"viewMatrix",a.matrixWorldInverse)}if(c.skinning&&(m.setOptional(F,d,"bindMatrix"),m.setOptional(F,d,"bindMatrixInverse"),a=d.skeleton))if(f=a.bones,T.floatVertexTextures){if(void 0===
    a.boneTexture){var f=Math.sqrt(4*f.length),f=Q.ceilPowerOfTwo(f),f=Math.max(f,4),u=new Float32Array(f*f*4);u.set(a.boneMatrices);var r=new lb(u,f,f,1023,1015);a.boneMatrices=u;a.boneTexture=r;a.boneTextureSize=f}m.setValue(F,"boneTexture",a.boneTexture);m.setValue(F,"boneTextureSize",a.boneTextureSize)}else m.setOptional(F,a,"boneMatrices");g&&(m.setValue(F,"toneMappingExposure",S.toneMappingExposure),m.setValue(F,"toneMappingWhitePoint",S.toneMappingWhitePoint),c.lights&&(g=h,q.ambientLightColor.needsUpdate=
    g,q.directionalLights.needsUpdate=g,q.pointLights.needsUpdate=g,q.spotLights.needsUpdate=g,q.rectAreaLights.needsUpdate=g,q.hemisphereLights.needsUpdate=g),b&&c.fog&&(q.fogColor.value=b.color,b.isFog?(q.fogNear.value=b.near,q.fogFar.value=b.far):b.isFogExp2&&(q.fogDensity.value=b.density)),c.isMeshBasicMaterial?l(q,c):c.isMeshLambertMaterial?(l(q,c),c.emissiveMap&&(q.emissiveMap.value=c.emissiveMap)):c.isMeshPhongMaterial?(l(q,c),c.isMeshToonMaterial?(t(q,c),c.gradientMap&&(q.gradientMap.value=c.gradientMap)):
    t(q,c)):c.isMeshStandardMaterial?(l(q,c),c.isMeshPhysicalMaterial&&(q.clearCoat.value=c.clearCoat,q.clearCoatRoughness.value=c.clearCoatRoughness),q.roughness.value=c.roughness,q.metalness.value=c.metalness,c.roughnessMap&&(q.roughnessMap.value=c.roughnessMap),c.metalnessMap&&(q.metalnessMap.value=c.metalnessMap),c.emissiveMap&&(q.emissiveMap.value=c.emissiveMap),c.bumpMap&&(q.bumpMap.value=c.bumpMap,q.bumpScale.value=c.bumpScale),c.normalMap&&(q.normalMap.value=c.normalMap,q.normalScale.value.copy(c.normalScale)),
    c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale,q.displacementBias.value=c.displacementBias),c.envMap&&(q.envMapIntensity.value=c.envMapIntensity)):c.isMeshDepthMaterial?(l(q,c),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale,q.displacementBias.value=c.displacementBias)):c.isMeshDistanceMaterial?(l(q,c),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=
    c.displacementScale,q.displacementBias.value=c.displacementBias),q.referencePosition.value.copy(c.referencePosition),q.nearDistance.value=c.nearDistance,q.farDistance.value=c.farDistance):c.isMeshNormalMaterial?(l(q,c),c.bumpMap&&(q.bumpMap.value=c.bumpMap,q.bumpScale.value=c.bumpScale),c.normalMap&&(q.normalMap.value=c.normalMap,q.normalScale.value.copy(c.normalScale)),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale,q.displacementBias.value=
    c.displacementBias)):c.isLineBasicMaterial?(q.diffuse.value=c.color,q.opacity.value=c.opacity,c.isLineDashedMaterial&&(q.dashSize.value=c.dashSize,q.totalSize.value=c.dashSize+c.gapSize,q.scale.value=c.scale)):c.isPointsMaterial?(q.diffuse.value=c.color,q.opacity.value=c.opacity,q.size.value=c.size*wa,q.scale.value=.5*U,q.map.value=c.map,null!==c.map&&(!0===c.map.matrixAutoUpdate&&(b=c.map.offset,g=c.map.repeat,h=c.map.center,c.map.matrix.setUvTransform(b.x,b.y,g.x,g.y,c.map.rotation,h.x,h.y)),q.uvTransform.value.copy(c.map.matrix))):
    c.isShadowMaterial&&(q.color.value=c.color,q.opacity.value=c.opacity),void 0!==q.ltcMat&&(q.ltcMat.value=K.LTC_MAT_TEXTURE),void 0!==q.ltcMag&&(q.ltcMag.value=K.LTC_MAG_TEXTURE),mb.upload(F,e.uniformsList,q,S));m.setValue(F,"modelViewMatrix",d.modelViewMatrix);m.setValue(F,"normalMatrix",d.normalMatrix);m.setValue(F,"modelMatrix",d.matrixWorld);return k}function l(a,b){a.opacity.value=b.opacity;b.color&&(a.diffuse.value=b.color);b.emissive&&a.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity);
    b.map&&(a.map.value=b.map);b.alphaMap&&(a.alphaMap.value=b.alphaMap);b.specularMap&&(a.specularMap.value=b.specularMap);b.envMap&&(a.envMap.value=b.envMap,a.flipEnvMap.value=b.envMap&&b.envMap.isCubeTexture?-1:1,a.reflectivity.value=b.reflectivity,a.refractionRatio.value=b.refractionRatio);b.lightMap&&(a.lightMap.value=b.lightMap,a.lightMapIntensity.value=b.lightMapIntensity);b.aoMap&&(a.aoMap.value=b.aoMap,a.aoMapIntensity.value=b.aoMapIntensity);if(b.map)var c=b.map;else b.specularMap?c=b.specularMap:
    b.displacementMap?c=b.displacementMap:b.normalMap?c=b.normalMap:b.bumpMap?c=b.bumpMap:b.roughnessMap?c=b.roughnessMap:b.metalnessMap?c=b.metalnessMap:b.alphaMap?c=b.alphaMap:b.emissiveMap&&(c=b.emissiveMap);if(void 0!==c){c.isWebGLRenderTarget&&(c=c.texture);if(!0===c.matrixAutoUpdate){b=c.offset;var d=c.repeat,e=c.center;c.matrix.setUvTransform(b.x,b.y,d.x,d.y,c.rotation,e.x,e.y)}a.uvTransform.value.copy(c.matrix)}}function t(a,b){a.specular.value=b.specular;a.shininess.value=Math.max(b.shininess,
    1E-4);b.emissiveMap&&(a.emissiveMap.value=b.emissiveMap);b.bumpMap&&(a.bumpMap.value=b.bumpMap,a.bumpScale.value=b.bumpScale);b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale));b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias)}console.log("THREE.WebGLRenderer","89");a=a||{};var v=void 0!==a.canvas?a.canvas:document.createElementNS("http://www.w3.org/1999/xhtml",
    "canvas"),w=void 0!==a.context?a.context:null,z=void 0!==a.alpha?a.alpha:!1,y=void 0!==a.depth?a.depth:!0,I=void 0!==a.stencil?a.stencil:!0,A=void 0!==a.antialias?a.antialias:!1,J=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,x=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,B=void 0!==a.powerPreference?a.powerPreference:"default",D=[],C=[],E=null,H=[],la=[];this.domElement=v;this.context=null;this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=
    !0;this.clippingPlanes=[];this.localClippingEnabled=!1;this.gammaFactor=2;this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1;this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1;this.maxMorphTargets=8;this.maxMorphNormals=4;var S=this,L=!1,N=null,M=null,P=-1,R="",V=null,W=null,nb=new aa,X=new aa,G=null,Y=0,ea=v.width,U=v.height,wa=1,da=new aa(0,0,ea,U),fa=new aa(0,0,ea,U),$e=!1,$d=new rd,Ja=new Fg,sd=!1,ae=!1,td=new O,Ob=new p,ha={geometries:0,textures:0},ba={frame:0,
    calls:0,vertices:0,faces:0,points:0};this.info={render:ba,memory:ha,programs:null};try{z={alpha:z,depth:y,stencil:I,antialias:A,premultipliedAlpha:J,preserveDrawingBuffer:x,powerPreference:B};v.addEventListener("webglcontextlost",c,!1);v.addEventListener("webglcontextrestored",d,!1);var F=w||v.getContext("webgl",z)||v.getContext("experimental-webgl",z);if(null===F){if(null!==v.getContext("webgl"))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.");
    }void 0===F.getShaderPrecisionFormat&&(F.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Gg){console.error("THREE.WebGLRenderer: "+Gg.message)}var ia,T,Z,ca,ga,qa,ra,ta,ua,ma,sa,ja,xa,ya,za,Aa,Ba,pa;b();var ka=new be(S);this.vr=ka;var Ea=new Ue(S,ta,T.maxTextureSize);this.shadowMap=Ea;this.getContext=function(){return F};this.getContextAttributes=function(){return F.getContextAttributes()};this.forceContextLoss=function(){var a=ia.get("WEBGL_lose_context");a&&
    a.loseContext()};this.forceContextRestore=function(){var a=ia.get("WEBGL_lose_context");a&&a.restoreContext()};this.getPixelRatio=function(){return wa};this.setPixelRatio=function(a){void 0!==a&&(wa=a,this.setSize(ea,U,!1))};this.getSize=function(){return{width:ea,height:U}};this.setSize=function(a,b,c){var d=ka.getDevice();d&&d.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(ea=a,U=b,v.width=a*wa,v.height=b*wa,!1!==c&&(v.style.width=a+"px",v.style.height=
    b+"px"),this.setViewport(0,0,a,b))};this.getDrawingBufferSize=function(){return{width:ea*wa,height:U*wa}};this.setDrawingBufferSize=function(a,b,c){ea=a;U=b;wa=c;v.width=a*c;v.height=b*c;this.setViewport(0,0,a,b)};this.setViewport=function(a,b,c,d){da.set(a,U-b-d,c,d);Z.viewport(nb.copy(da).multiplyScalar(wa))};this.setScissor=function(a,b,c,d){fa.set(a,U-b-d,c,d);Z.scissor(X.copy(fa).multiplyScalar(wa))};this.setScissorTest=function(a){Z.setScissorTest($e=a)};this.getClearColor=function(){return ja.getClearColor()};
    this.setClearColor=function(){ja.setClearColor.apply(ja,arguments)};this.getClearAlpha=function(){return ja.getClearAlpha()};this.setClearAlpha=function(){ja.setClearAlpha.apply(ja,arguments)};this.clear=function(a,b,c){var d=0;if(void 0===a||a)d|=F.COLOR_BUFFER_BIT;if(void 0===b||b)d|=F.DEPTH_BUFFER_BIT;if(void 0===c||c)d|=F.STENCIL_BUFFER_BIT;F.clear(d)};this.clearColor=function(){this.clear(!0,!1,!1)};this.clearDepth=function(){this.clear(!1,!0,!1)};this.clearStencil=function(){this.clear(!1,!1,
    !0)};this.clearTarget=function(a,b,c,d){this.setRenderTarget(a);this.clear(b,c,d)};this.dispose=function(){v.removeEventListener("webglcontextlost",c,!1);v.removeEventListener("webglcontextrestored",d,!1);sa.dispose();ka.dispose()};this.renderBufferImmediate=function(a,b,c){Z.initAttributes();var d=ca.get(a);a.hasPositions&&!d.position&&(d.position=F.createBuffer());a.hasNormals&&!d.normal&&(d.normal=F.createBuffer());a.hasUvs&&!d.uv&&(d.uv=F.createBuffer());a.hasColors&&!d.color&&(d.color=F.createBuffer());
    b=b.getAttributes();a.hasPositions&&(F.bindBuffer(F.ARRAY_BUFFER,d.position),F.bufferData(F.ARRAY_BUFFER,a.positionArray,F.DYNAMIC_DRAW),Z.enableAttribute(b.position),F.vertexAttribPointer(b.position,3,F.FLOAT,!1,0,0));if(a.hasNormals){F.bindBuffer(F.ARRAY_BUFFER,d.normal);if(!c.isMeshPhongMaterial&&!c.isMeshStandardMaterial&&!c.isMeshNormalMaterial&&!0===c.flatShading)for(var e=0,f=3*a.count;e<f;e+=9){var g=a.normalArray,h=(g[e+0]+g[e+3]+g[e+6])/3,k=(g[e+1]+g[e+4]+g[e+7])/3,m=(g[e+2]+g[e+5]+g[e+
    8])/3;g[e+0]=h;g[e+1]=k;g[e+2]=m;g[e+3]=h;g[e+4]=k;g[e+5]=m;g[e+6]=h;g[e+7]=k;g[e+8]=m}F.bufferData(F.ARRAY_BUFFER,a.normalArray,F.DYNAMIC_DRAW);Z.enableAttribute(b.normal);F.vertexAttribPointer(b.normal,3,F.FLOAT,!1,0,0)}a.hasUvs&&c.map&&(F.bindBuffer(F.ARRAY_BUFFER,d.uv),F.bufferData(F.ARRAY_BUFFER,a.uvArray,F.DYNAMIC_DRAW),Z.enableAttribute(b.uv),F.vertexAttribPointer(b.uv,2,F.FLOAT,!1,0,0));a.hasColors&&0!==c.vertexColors&&(F.bindBuffer(F.ARRAY_BUFFER,d.color),F.bufferData(F.ARRAY_BUFFER,a.colorArray,
    F.DYNAMIC_DRAW),Z.enableAttribute(b.color),F.vertexAttribPointer(b.color,3,F.FLOAT,!1,0,0));Z.disableUnusedAttributes();F.drawArrays(F.TRIANGLES,0,a.count);a.count=0};this.renderBufferDirect=function(a,b,c,d,e,f){var g=e.isMesh&&0>e.matrixWorld.determinant();Z.setMaterial(d,g);var h=u(a,b,d,e);a=c.id+"_"+h.id+"_"+(!0===d.wireframe);var k=!1;a!==R&&(R=a,k=!0);e.morphTargetInfluences&&(xa.update(e,c,d,h),k=!0);var g=c.index,m=c.attributes.position;b=1;!0===d.wireframe&&(g=ra.getWireframeAttribute(c),
    b=2);a=ya;if(null!==g){var q=qa.get(g);a=za;a.setIndex(q)}if(k){k=void 0;if(c&&c.isInstancedBufferGeometry&&null===ia.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{void 0===k&&(k=0);Z.initAttributes();var n=c.attributes,h=h.getAttributes(),l=d.defaultAttributeValues;for(J in h){var r=h[J];if(0<=r){var t=n[J];if(void 0!==t){var v=t.normalized,p=t.itemSize,
    w=qa.get(t);if(void 0!==w){var A=w.buffer,y=w.type,w=w.bytesPerElement;if(t.isInterleavedBufferAttribute){var z=t.data,I=z.stride,t=t.offset;z&&z.isInstancedInterleavedBuffer?(Z.enableAttributeAndDivisor(r,z.meshPerAttribute),void 0===c.maxInstancedCount&&(c.maxInstancedCount=z.meshPerAttribute*z.count)):Z.enableAttribute(r);F.bindBuffer(F.ARRAY_BUFFER,A);F.vertexAttribPointer(r,p,y,v,I*w,(k*I+t)*w)}else t.isInstancedBufferAttribute?(Z.enableAttributeAndDivisor(r,t.meshPerAttribute),void 0===c.maxInstancedCount&&
    (c.maxInstancedCount=t.meshPerAttribute*t.count)):Z.enableAttribute(r),F.bindBuffer(F.ARRAY_BUFFER,A),F.vertexAttribPointer(r,p,y,v,0,k*p*w)}}else if(void 0!==l&&(v=l[J],void 0!==v))switch(v.length){case 2:F.vertexAttrib2fv(r,v);break;case 3:F.vertexAttrib3fv(r,v);break;case 4:F.vertexAttrib4fv(r,v);break;default:F.vertexAttrib1fv(r,v)}}}Z.disableUnusedAttributes()}null!==g&&F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,q.buffer)}q=0;null!==g?q=g.count:void 0!==m&&(q=m.count);g=c.drawRange.start*b;m=null!==
    f?f.start*b:0;var J=Math.max(g,m);f=Math.max(0,Math.min(q,g+c.drawRange.count*b,m+(null!==f?f.count*b:Infinity))-1-J+1);if(0!==f){if(e.isMesh)if(!0===d.wireframe)Z.setLineWidth(d.wireframeLinewidth*(null===N?wa:1)),a.setMode(F.LINES);else switch(e.drawMode){case 0:a.setMode(F.TRIANGLES);break;case 1:a.setMode(F.TRIANGLE_STRIP);break;case 2:a.setMode(F.TRIANGLE_FAN)}else e.isLine?(d=d.linewidth,void 0===d&&(d=1),Z.setLineWidth(d*(null===N?wa:1)),e.isLineSegments?a.setMode(F.LINES):e.isLineLoop?a.setMode(F.LINE_LOOP):
    a.setMode(F.LINE_STRIP)):e.isPoints&&a.setMode(F.POINTS);c&&c.isInstancedBufferGeometry?0<c.maxInstancedCount&&a.renderInstances(c,J,f):a.render(J,f)}};this.compile=function(a,b){D.length=0;C.length=0;a.traverse(function(a){a.isLight&&(D.push(a),a.castShadow&&C.push(a))});ua.setup(D,C,b);a.traverse(function(b){if(b.material)if(Array.isArray(b.material))for(var c=0;c<b.material.length;c++)n(b.material[c],a.fog,b);else n(b.material,a.fog,b)})};var Fa=!1,Ca=null;this.animate=function(a){Ca=a;Fa||((a=
    ka.getDevice())&&a.isPresenting?a.requestAnimationFrame(h):window.requestAnimationFrame(h),Fa=!0)};this.render=function(a,b,c,d){if(!b||!b.isCamera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else if(!L){R="";P=-1;V=null;!0===a.autoUpdate&&a.updateMatrixWorld();null===b.parent&&b.updateMatrixWorld();ka.enabled&&(b=ka.getCamera(b));td.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);$d.setFromMatrix(td);D.length=0;C.length=0;H.length=0;la.length=
    0;ae=this.localClippingEnabled;sd=Ja.init(this.clippingPlanes,ae,b);E=sa.get(a,b);E.init();k(a,b,S.sortObjects);!0===S.sortObjects&&E.sort();ga.updateVideoTextures();sd&&Ja.beginShadows();Ea.render(C,a,b);ua.setup(D,C,b);sd&&Ja.endShadows();ba.frame++;ba.calls=0;ba.vertices=0;ba.faces=0;ba.points=0;void 0===c&&(c=null);this.setRenderTarget(c);ja.render(E,a,b,d);d=E.opaque;var e=E.transparent;if(a.overrideMaterial){var f=a.overrideMaterial;d.length&&m(d,a,b,f);e.length&&m(e,a,b,f)}else d.length&&m(d,
    a,b),e.length&&m(e,a,b);Ba.render(H,a,b);Aa.render(la,a,b,nb);c&&ga.updateRenderTargetMipmap(c);Z.buffers.depth.setTest(!0);Z.buffers.depth.setMask(!0);Z.buffers.color.setMask(!0);Z.setPolygonOffset(!1);ka.enabled&&ka.submitFrame()}};this.setFaceCulling=function(a,b){Z.setCullFace(a);Z.setFlipSided(0===b)};this.allocTextureUnit=function(){var a=Y;a>=T.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+a+" texture units while this GPU supports only "+T.maxTextures);Y+=1;return a};this.setTexture2D=
    function(){var a=!1;return function(b,c){b&&b.isWebGLRenderTarget&&(a||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),a=!0),b=b.texture);ga.setTexture2D(b,c)}}();this.setTexture=function(){var a=!1;return function(b,c){a||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),a=!0);ga.setTexture2D(b,c)}}();this.setTextureCube=function(){var a=!1;return function(b,c){b&&b.isWebGLRenderTargetCube&&
    (a||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),a=!0),b=b.texture);b&&b.isCubeTexture||Array.isArray(b.image)&&6===b.image.length?ga.setTextureCube(b,c):ga.setTextureCubeDynamic(b,c)}}();this.getRenderTarget=function(){return N};this.setRenderTarget=function(a){(N=a)&&void 0===ca.get(a).__webglFramebuffer&&ga.setupRenderTarget(a);var b=null,c=!1;a?(b=ca.get(a).__webglFramebuffer,a.isWebGLRenderTargetCube&&(b=
    b[a.activeCubeFace],c=!0),nb.copy(a.viewport),X.copy(a.scissor),G=a.scissorTest):(nb.copy(da).multiplyScalar(wa),X.copy(fa).multiplyScalar(wa),G=$e);M!==b&&(F.bindFramebuffer(F.FRAMEBUFFER,b),M=b);Z.viewport(nb);Z.scissor(X);Z.setScissorTest(G);c&&(c=ca.get(a.texture),F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_CUBE_MAP_POSITIVE_X+a.activeCubeFace,c.__webglTexture,a.activeMipMapLevel))};this.readRenderTargetPixels=function(a,b,c,d,e,f){if(a&&a.isWebGLRenderTarget){var g=ca.get(a).__webglFramebuffer;
    if(g){var h=!1;g!==M&&(F.bindFramebuffer(F.FRAMEBUFFER,g),h=!0);try{var k=a.texture,m=k.format,q=k.type;1023!==m&&pa.convert(m)!==F.getParameter(F.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===q||pa.convert(q)===F.getParameter(F.IMPLEMENTATION_COLOR_READ_TYPE)||1015===q&&(ia.get("OES_texture_float")||ia.get("WEBGL_color_buffer_float"))||1016===q&&ia.get("EXT_color_buffer_half_float")?
    F.checkFramebufferStatus(F.FRAMEBUFFER)===F.FRAMEBUFFER_COMPLETE?0<=b&&b<=a.width-d&&0<=c&&c<=a.height-e&&F.readPixels(b,c,d,e,pa.convert(m),pa.convert(q),f):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{h&&F.bindFramebuffer(F.FRAMEBUFFER,M)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")}}
    function Pb(a,b){this.name="";this.color=new H(a);this.density=void 0!==b?b:2.5E-4}function Qb(a,b,c){this.name="";this.color=new H(a);this.near=void 0!==b?b:1;this.far=void 0!==c?c:1E3}function vd(){x.call(this);this.type="Scene";this.overrideMaterial=this.fog=this.background=null;this.autoUpdate=!0}function de(a,b,c,d,e){x.call(this);this.lensFlares=[];this.positionScreen=new p;this.customUpdateCallback=void 0;void 0!==a&&this.add(a,b,c,d,e)}function hb(a){P.call(this);this.type="SpriteMaterial";
    this.color=new H(16777215);this.map=null;this.rotation=0;this.lights=this.fog=!1;this.setValues(a)}function Cc(a){x.call(this);this.type="Sprite";this.material=void 0!==a?a:new hb}function Dc(){x.call(this);this.type="LOD";Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Ec(a,b){a=a||[];this.bones=a.slice(0);this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===b)this.calculateInverses();else if(this.bones.length===b.length)this.boneInverses=b.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),
    this.boneInverses=[],a=0,b=this.bones.length;a<b;a++)this.boneInverses.push(new O)}function wd(){x.call(this);this.type="Bone"}function xd(a,b){ra.call(this,a,b);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new O;this.bindMatrixInverse=new O;a=this.initBones();a=new Ec(a);this.bind(a,this.matrixWorld);this.normalizeSkinWeights()}function W(a){P.call(this);this.type="LineBasicMaterial";this.color=new H(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.lights=!1;
    this.setValues(a)}function sa(a,b,c){if(1===c)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new X(a,b);x.call(this);this.type="Line";this.geometry=void 0!==a?a:new E;this.material=void 0!==b?b:new W({color:16777215*Math.random()})}function X(a,b){sa.call(this,a,b);this.type="LineSegments"}function yd(a,b){sa.call(this,a,b);this.type="LineLoop"}function Ka(a){P.call(this);this.type="PointsMaterial";this.color=new H(16777215);
    this.map=null;this.size=1;this.sizeAttenuation=!0;this.lights=!1;this.setValues(a)}function Rb(a,b){x.call(this);this.type="Points";this.geometry=void 0!==a?a:new E;this.material=void 0!==b?b:new Ka({color:16777215*Math.random()})}function Fc(){x.call(this);this.type="Group"}function ee(a,b,c,d,e,f,g,h,k){function m(){a.removeEventListener("loadeddata",m,!1);q.needsUpdate=!0}U.call(this,a,b,c,d,e,f,g,h,k);this.generateMipmaps=!1;var q=this;a.addEventListener("loadeddata",m,!1)}function Sb(a,b,c,d,
    e,f,g,h,k,m,q,n){U.call(this,null,f,g,h,k,m,d,e,q,n);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=this.flipY=!1}function Gc(a,b,c,d,e,f,g,h,k,m){m=void 0!==m?m:1026;if(1026!==m&&1027!==m)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===c&&1026===m&&(c=1012);void 0===c&&1027===m&&(c=1020);U.call(this,null,d,e,f,g,h,m,c,k);this.image={width:a,height:b};this.magFilter=void 0!==g?g:1003;this.minFilter=void 0!==h?h:1003;this.generateMipmaps=
    this.flipY=!1}function Tb(a){E.call(this);this.type="WireframeGeometry";var b=[],c,d,e,f=[0,0],g={},h=["a","b","c"];if(a&&a.isGeometry){var k=a.faces;var m=0;for(d=k.length;m<d;m++){var q=k[m];for(c=0;3>c;c++){var n=q[h[c]];var u=q[h[(c+1)%3]];f[0]=Math.min(n,u);f[1]=Math.max(n,u);n=f[0]+","+f[1];void 0===g[n]&&(g[n]={index1:f[0],index2:f[1]})}}for(n in g)m=g[n],h=a.vertices[m.index1],b.push(h.x,h.y,h.z),h=a.vertices[m.index2],b.push(h.x,h.y,h.z)}else if(a&&a.isBufferGeometry){var h=new p;if(null!==
    a.index){k=a.attributes.position;q=a.index;var l=a.groups;0===l.length&&(l=[{start:0,count:q.count,materialIndex:0}]);a=0;for(e=l.length;a<e;++a)for(m=l[a],c=m.start,d=m.count,m=c,d=c+d;m<d;m+=3)for(c=0;3>c;c++)n=q.getX(m+c),u=q.getX(m+(c+1)%3),f[0]=Math.min(n,u),f[1]=Math.max(n,u),n=f[0]+","+f[1],void 0===g[n]&&(g[n]={index1:f[0],index2:f[1]});for(n in g)m=g[n],h.fromBufferAttribute(k,m.index1),b.push(h.x,h.y,h.z),h.fromBufferAttribute(k,m.index2),b.push(h.x,h.y,h.z)}else for(k=a.attributes.position,
    m=0,d=k.count/3;m<d;m++)for(c=0;3>c;c++)g=3*m+c,h.fromBufferAttribute(k,g),b.push(h.x,h.y,h.z),g=3*m+(c+1)%3,h.fromBufferAttribute(k,g),b.push(h.x,h.y,h.z)}this.addAttribute("position",new B(b,3))}function Hc(a,b,c){L.call(this);this.type="ParametricGeometry";this.parameters={func:a,slices:b,stacks:c};this.fromBufferGeometry(new Ub(a,b,c));this.mergeVertices()}function Ub(a,b,c){E.call(this);this.type="ParametricBufferGeometry";this.parameters={func:a,slices:b,stacks:c};var d=[],e=[],f=[],g=[],h=
    new p,k=new p,m=new p,q=new p,n=new p,u,l,t=b+1;for(u=0;u<=c;u++){var v=u/c;for(l=0;l<=b;l++){var w=l/b,k=a(w,v,k);e.push(k.x,k.y,k.z);0<=w-1E-5?(m=a(w-1E-5,v,m),q.subVectors(k,m)):(m=a(w+1E-5,v,m),q.subVectors(m,k));0<=v-1E-5?(m=a(w,v-1E-5,m),n.subVectors(k,m)):(m=a(w,v+1E-5,m),n.subVectors(m,k));h.crossVectors(q,n).normalize();f.push(h.x,h.y,h.z);g.push(w,v)}}for(u=0;u<c;u++)for(l=0;l<b;l++)a=u*t+l+1,h=(u+1)*t+l+1,k=(u+1)*t+l,d.push(u*t+l,a,k),d.push(a,h,k);this.setIndex(d);this.addAttribute("position",
    new B(e,3));this.addAttribute("normal",new B(f,3));this.addAttribute("uv",new B(g,2))}function Ic(a,b,c,d){L.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:a,indices:b,radius:c,detail:d};this.fromBufferGeometry(new ja(a,b,c,d));this.mergeVertices()}function ja(a,b,c,d){function e(a){h.push(a.x,a.y,a.z)}function f(b,c){b*=3;c.x=a[b+0];c.y=a[b+1];c.z=a[b+2]}function g(a,b,c,d){0>d&&1===a.x&&(k[b]=a.x-1);0===c.x&&0===c.z&&(k[b]=d/2/Math.PI+.5)}E.call(this);this.type="PolyhedronBufferGeometry";
    this.parameters={vertices:a,indices:b,radius:c,detail:d};c=c||1;d=d||0;var h=[],k=[];(function(a){for(var c=new p,d=new p,g=new p,h=0;h<b.length;h+=3){f(b[h+0],c);f(b[h+1],d);f(b[h+2],g);var k,m,l=c,z=d,y=g,I=Math.pow(2,a),A=[];for(m=0;m<=I;m++){A[m]=[];var J=l.clone().lerp(y,m/I),x=z.clone().lerp(y,m/I),B=I-m;for(k=0;k<=B;k++)A[m][k]=0===k&&m===I?J:J.clone().lerp(x,k/B)}for(m=0;m<I;m++)for(k=0;k<2*(I-m)-1;k++)l=Math.floor(k/2),0===k%2?(e(A[m][l+1]),e(A[m+1][l]),e(A[m][l])):(e(A[m][l+1]),e(A[m+1][l+
    1]),e(A[m+1][l]))}})(d);(function(a){for(var b=new p,c=0;c<h.length;c+=3)b.x=h[c+0],b.y=h[c+1],b.z=h[c+2],b.normalize().multiplyScalar(a),h[c+0]=b.x,h[c+1]=b.y,h[c+2]=b.z})(c);(function(){for(var a=new p,b=0;b<h.length;b+=3)a.x=h[b+0],a.y=h[b+1],a.z=h[b+2],k.push(Math.atan2(a.z,-a.x)/2/Math.PI+.5,1-(Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5));for(var a=new p,b=new p,c=new p,d=new p,e=new D,f=new D,l=new D,w=0,z=0;w<h.length;w+=9,z+=6){a.set(h[w+0],h[w+1],h[w+2]);b.set(h[w+3],h[w+4],h[w+
    5]);c.set(h[w+6],h[w+7],h[w+8]);e.set(k[z+0],k[z+1]);f.set(k[z+2],k[z+3]);l.set(k[z+4],k[z+5]);d.copy(a).add(b).add(c).divideScalar(3);var y=Math.atan2(d.z,-d.x);g(e,z+0,a,y);g(f,z+2,b,y);g(l,z+4,c,y)}for(a=0;a<k.length;a+=6)b=k[a+0],c=k[a+2],d=k[a+4],e=Math.min(b,c,d),.9<Math.max(b,c,d)&&.1>e&&(.2>b&&(k[a+0]+=1),.2>c&&(k[a+2]+=1),.2>d&&(k[a+4]+=1))})();this.addAttribute("position",new B(h,3));this.addAttribute("normal",new B(h.slice(),3));this.addAttribute("uv",new B(k,2));0===d?this.computeVertexNormals():
    this.normalizeNormals()}function Jc(a,b){L.call(this);this.type="TetrahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Vb(a,b));this.mergeVertices()}function Vb(a,b){ja.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b);this.type="TetrahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Kc(a,b){L.call(this);this.type="OctahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new ub(a,b));this.mergeVertices()}
    function ub(a,b){ja.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b);this.type="OctahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Lc(a,b){L.call(this);this.type="IcosahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Wb(a,b));this.mergeVertices()}function Wb(a,b){var c=(1+Math.sqrt(5))/2;ja.call(this,[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,
    5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b);this.type="IcosahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Mc(a,b){L.call(this);this.type="DodecahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Xb(a,b));this.mergeVertices()}function Xb(a,b){var c=(1+Math.sqrt(5))/2,d=1/c;ja.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-c,0,-d,c,0,
    d,-c,0,d,c,-d,-c,0,-d,c,0,d,-c,0,d,c,0,-c,0,-d,c,0,-d,-c,0,d,c,0,d],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,b);this.type="DodecahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Nc(a,b,c,d,e,f){L.call(this);this.type="TubeGeometry";this.parameters={path:a,
    tubularSegments:b,radius:c,radialSegments:d,closed:e};void 0!==f&&console.warn("THREE.TubeGeometry: taper has been removed.");a=new Yb(a,b,c,d,e);this.tangents=a.tangents;this.normals=a.normals;this.binormals=a.binormals;this.fromBufferGeometry(a);this.mergeVertices()}function Yb(a,b,c,d,e){function f(e){q=a.getPointAt(e/b,q);var f=g.normals[e];e=g.binormals[e];for(l=0;l<=d;l++){var m=l/d*Math.PI*2,n=Math.sin(m),m=-Math.cos(m);k.x=m*f.x+n*e.x;k.y=m*f.y+n*e.y;k.z=m*f.z+n*e.z;k.normalize();t.push(k.x,
    k.y,k.z);h.x=q.x+c*k.x;h.y=q.y+c*k.y;h.z=q.z+c*k.z;r.push(h.x,h.y,h.z)}}E.call(this);this.type="TubeBufferGeometry";this.parameters={path:a,tubularSegments:b,radius:c,radialSegments:d,closed:e};b=b||64;c=c||1;d=d||8;e=e||!1;var g=a.computeFrenetFrames(b,e);this.tangents=g.tangents;this.normals=g.normals;this.binormals=g.binormals;var h=new p,k=new p,m=new D,q=new p,n,l,r=[],t=[],v=[],w=[];for(n=0;n<b;n++)f(n);f(!1===e?b:0);for(n=0;n<=b;n++)for(l=0;l<=d;l++)m.x=n/b,m.y=l/d,v.push(m.x,m.y);(function(){for(l=
    1;l<=b;l++)for(n=1;n<=d;n++){var a=(d+1)*l+(n-1),c=(d+1)*l+n,e=(d+1)*(l-1)+n;w.push((d+1)*(l-1)+(n-1),a,e);w.push(a,c,e)}})();this.setIndex(w);this.addAttribute("position",new B(r,3));this.addAttribute("normal",new B(t,3));this.addAttribute("uv",new B(v,2))}function Oc(a,b,c,d,e,f,g){L.call(this);this.type="TorusKnotGeometry";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};void 0!==g&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");
    this.fromBufferGeometry(new Zb(a,b,c,d,e,f));this.mergeVertices()}function Zb(a,b,c,d,e,f){function g(a,b,c,d,e){var f=Math.sin(a);b=c/b*a;c=Math.cos(b);e.x=d*(2+c)*.5*Math.cos(a);e.y=d*(2+c)*f*.5;e.z=d*Math.sin(b)*.5}E.call(this);this.type="TorusKnotBufferGeometry";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};a=a||1;b=b||.4;c=Math.floor(c)||64;d=Math.floor(d)||8;e=e||2;f=f||3;var h=[],k=[],m=[],q=[],n,l=new p,r=new p,t=new p,v=new p,w=new p,z=new p,y=new p;for(n=0;n<=
    c;++n){var I=n/c*e*Math.PI*2;g(I,e,f,a,t);g(I+.01,e,f,a,v);z.subVectors(v,t);y.addVectors(v,t);w.crossVectors(z,y);y.crossVectors(w,z);w.normalize();y.normalize();for(I=0;I<=d;++I){var A=I/d*Math.PI*2,J=-b*Math.cos(A),A=b*Math.sin(A);l.x=t.x+(J*y.x+A*w.x);l.y=t.y+(J*y.y+A*w.y);l.z=t.z+(J*y.z+A*w.z);k.push(l.x,l.y,l.z);r.subVectors(l,t).normalize();m.push(r.x,r.y,r.z);q.push(n/c);q.push(I/d)}}for(I=1;I<=c;I++)for(n=1;n<=d;n++)a=(d+1)*I+(n-1),b=(d+1)*I+n,e=(d+1)*(I-1)+n,h.push((d+1)*(I-1)+(n-1),a,e),
    h.push(a,b,e);this.setIndex(h);this.addAttribute("position",new B(k,3));this.addAttribute("normal",new B(m,3));this.addAttribute("uv",new B(q,2))}function Pc(a,b,c,d,e){L.call(this);this.type="TorusGeometry";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};this.fromBufferGeometry(new $b(a,b,c,d,e));this.mergeVertices()}function $b(a,b,c,d,e){E.call(this);this.type="TorusBufferGeometry";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};a=a||1;b=b||
    .4;c=Math.floor(c)||8;d=Math.floor(d)||6;e=e||2*Math.PI;var f=[],g=[],h=[],k=[],m=new p,q=new p,n=new p,l,r;for(l=0;l<=c;l++)for(r=0;r<=d;r++){var t=r/d*e,v=l/c*Math.PI*2;q.x=(a+b*Math.cos(v))*Math.cos(t);q.y=(a+b*Math.cos(v))*Math.sin(t);q.z=b*Math.sin(v);g.push(q.x,q.y,q.z);m.x=a*Math.cos(t);m.y=a*Math.sin(t);n.subVectors(q,m).normalize();h.push(n.x,n.y,n.z);k.push(r/d);k.push(l/c)}for(l=1;l<=c;l++)for(r=1;r<=d;r++)a=(d+1)*(l-1)+r-1,b=(d+1)*(l-1)+r,e=(d+1)*l+r,f.push((d+1)*l+r-1,a,e),f.push(a,b,
    e);this.setIndex(f);this.addAttribute("position",new B(g,3));this.addAttribute("normal",new B(h,3));this.addAttribute("uv",new B(k,2))}function bf(a,b,c,d,e){for(var f,g=0,h=b,k=c-d;h<c;h+=d)g+=(a[k]-a[h])*(a[h+1]+a[k+1]),k=h;if(e===0<g)for(e=b;e<c;e+=d)f=cf(e,a[e],a[e+1],f);else for(e=c-d;e>=b;e-=d)f=cf(e,a[e],a[e+1],f);f&&vb(f,f.next)&&(Qc(f),f=f.next);return f}function Rc(a,b){if(!a)return a;b||(b=a);do{var c=!1;if(a.steiner||!vb(a,a.next)&&0!==ta(a.prev,a,a.next))a=a.next;else{Qc(a);a=b=a.prev;
    if(a===a.next)break;c=!0}}while(c||a!==b);return b}function Sc(a,b,c,d,e,f,g){if(a){if(!g&&f){var h=a,k=h;do null===k.z&&(k.z=fe(k.x,k.y,d,e,f)),k.prevZ=k.prev,k=k.nextZ=k.next;while(k!==h);k.prevZ.nextZ=null;k.prevZ=null;var h=k,m,q,n,l,r=1;do{k=h;var t=h=null;for(q=0;k;){q++;var p=k;for(m=n=0;m<r&&(n++,p=p.nextZ,p);m++);for(l=r;0<n||0<l&&p;)0!==n&&(0===l||!p||k.z<=p.z)?(m=k,k=k.nextZ,n--):(m=p,p=p.nextZ,l--),t?t.nextZ=m:h=m,m.prevZ=t,t=m;k=p}t.nextZ=null;r*=2}while(1<q)}for(h=a;a.prev!==a.next;){k=
    a.prev;p=a.next;if(f)a:{t=a;l=d;var w=e,z=f;q=t.prev;n=t;r=t.next;if(0<=ta(q,n,r))t=!1;else{var y=q.x>n.x?q.x>r.x?q.x:r.x:n.x>r.x?n.x:r.x,I=q.y>n.y?q.y>r.y?q.y:r.y:n.y>r.y?n.y:r.y;m=fe(q.x<n.x?q.x<r.x?q.x:r.x:n.x<r.x?n.x:r.x,q.y<n.y?q.y<r.y?q.y:r.y:n.y<r.y?n.y:r.y,l,w,z);l=fe(y,I,l,w,z);for(w=t.nextZ;w&&w.z<=l;){if(w!==t.prev&&w!==t.next&&zd(q.x,q.y,n.x,n.y,r.x,r.y,w.x,w.y)&&0<=ta(w.prev,w,w.next)){t=!1;break a}w=w.nextZ}for(w=t.prevZ;w&&w.z>=m;){if(w!==t.prev&&w!==t.next&&zd(q.x,q.y,n.x,n.y,r.x,
    r.y,w.x,w.y)&&0<=ta(w.prev,w,w.next)){t=!1;break a}w=w.prevZ}t=!0}}else a:if(t=a,q=t.prev,n=t,r=t.next,0<=ta(q,n,r))t=!1;else{for(m=t.next.next;m!==t.prev;){if(zd(q.x,q.y,n.x,n.y,r.x,r.y,m.x,m.y)&&0<=ta(m.prev,m,m.next)){t=!1;break a}m=m.next}t=!0}if(t)b.push(k.i/c),b.push(a.i/c),b.push(p.i/c),Qc(a),h=a=p.next;else if(a=p,a===h){if(!g)Sc(Rc(a),b,c,d,e,f,1);else if(1===g){g=b;h=c;k=a;do p=k.prev,t=k.next.next,!vb(p,t)&&df(p,k,k.next,t)&&Tc(p,t)&&Tc(t,p)&&(g.push(p.i/h),g.push(k.i/h),g.push(t.i/h),
    Qc(k),Qc(k.next),k=a=t),k=k.next;while(k!==a);a=k;Sc(a,b,c,d,e,f,2)}else if(2===g)a:{g=a;do{for(h=g.next.next;h!==g.prev;){if(k=g.i!==h.i){k=g;p=h;if(t=k.next.i!==p.i&&k.prev.i!==p.i){b:{t=k;do{if(t.i!==k.i&&t.next.i!==k.i&&t.i!==p.i&&t.next.i!==p.i&&df(t,t.next,k,p)){t=!0;break b}t=t.next}while(t!==k);t=!1}t=!t}if(t=t&&Tc(k,p)&&Tc(p,k)){t=k;q=!1;n=(k.x+p.x)/2;p=(k.y+p.y)/2;do t.y>p!==t.next.y>p&&t.next.y!==t.y&&n<(t.next.x-t.x)*(p-t.y)/(t.next.y-t.y)+t.x&&(q=!q),t=t.next;while(t!==k);t=q}k=t}if(k){a=
    ef(g,h);g=Rc(g,g.next);a=Rc(a,a.next);Sc(g,b,c,d,e,f);Sc(a,b,c,d,e,f);break a}h=h.next}g=g.next}while(g!==a)}break}}}}function Hg(a,b){return a.x-b.x}function Ig(a,b){var c=b,d=a.x,e=a.y,f=-Infinity;do{if(e<=c.y&&e>=c.next.y&&c.next.y!==c.y){var g=c.x+(e-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(g<=d&&g>f){f=g;if(g===d){if(e===c.y)return c;if(e===c.next.y)return c.next}var h=c.x<c.next.x?c:c.next}}c=c.next}while(c!==b);if(!h)return null;if(d===f)return h.prev;b=h;for(var g=h.x,k=h.y,m=Infinity,q,c=h.next;c!==
    b;)d>=c.x&&c.x>=g&&d!==c.x&&zd(e<k?d:f,e,g,k,e<k?f:d,e,c.x,c.y)&&(q=Math.abs(e-c.y)/(d-c.x),(q<m||q===m&&c.x>h.x)&&Tc(c,a)&&(h=c,m=q)),c=c.next;return h}function fe(a,b,c,d,e){a=32767*(a-c)*e;b=32767*(b-d)*e;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function Jg(a){var b=a,c=a;do b.x<c.x&&(c=b),b=b.next;while(b!==a);return c}function zd(a,b,c,d,e,f,g,h){return 0<=(e-
    g)*(b-h)-(a-g)*(f-h)&&0<=(a-g)*(d-h)-(c-g)*(b-h)&&0<=(c-g)*(f-h)-(e-g)*(d-h)}function ta(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function vb(a,b){return a.x===b.x&&a.y===b.y}function df(a,b,c,d){return vb(a,b)&&vb(c,d)||vb(a,d)&&vb(c,b)?!0:0<ta(a,b,c)!==0<ta(a,b,d)&&0<ta(c,d,a)!==0<ta(c,d,b)}function Tc(a,b){return 0>ta(a.prev,a,a.next)?0<=ta(a,b,a.next)&&0<=ta(a,a.prev,b):0>ta(a,b,a.prev)||0>ta(a,a.next,b)}function ef(a,b){var c=new ge(a.i,a.x,a.y),d=new ge(b.i,b.x,b.y),e=a.next,f=b.prev;
    a.next=b;b.prev=a;c.next=e;e.prev=c;d.next=c;c.prev=d;f.next=d;d.prev=f;return d}function cf(a,b,c,d){a=new ge(a,b,c);d?(a.next=d.next,a.prev=d,d.next.prev=a,d.next=a):(a.prev=a,a.next=a);return a}function Qc(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function ge(a,b,c){this.i=a;this.x=b;this.y=c;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function ib(a,b){L.call(this);this.type="ExtrudeGeometry";this.parameters=
    {shapes:a,options:b};this.fromBufferGeometry(new La(a,b));this.mergeVertices()}function La(a,b){"undefined"!==typeof a&&(E.call(this),this.type="ExtrudeBufferGeometry",a=Array.isArray(a)?a:[a],this.addShapeList(a,b),this.computeVertexNormals())}function Uc(a,b){L.call(this);this.type="TextGeometry";this.parameters={text:a,parameters:b};this.fromBufferGeometry(new ac(a,b));this.mergeVertices()}function ac(a,b){b=b||{};var c=b.font;if(!c||!c.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),
    new L;a=c.generateShapes(a,b.size,b.curveSegments);b.amount=void 0!==b.height?b.height:50;void 0===b.bevelThickness&&(b.bevelThickness=10);void 0===b.bevelSize&&(b.bevelSize=8);void 0===b.bevelEnabled&&(b.bevelEnabled=!1);La.call(this,a,b);this.type="TextBufferGeometry"}function Vc(a,b,c,d,e,f,g){L.call(this);this.type="SphereGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g};this.fromBufferGeometry(new wb(a,b,c,d,e,f,g));this.mergeVertices()}
    function wb(a,b,c,d,e,f,g){E.call(this);this.type="SphereBufferGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g};a=a||1;b=Math.max(3,Math.floor(b)||8);c=Math.max(2,Math.floor(c)||6);d=void 0!==d?d:0;e=void 0!==e?e:2*Math.PI;f=void 0!==f?f:0;g=void 0!==g?g:Math.PI;var h=f+g,k,m,q=0,n=[],l=new p,r=new p,t=[],v=[],w=[],z=[];for(m=0;m<=c;m++){var y=[],I=m/c;for(k=0;k<=b;k++){var A=k/b;l.x=-a*Math.cos(d+A*e)*Math.sin(f+I*g);l.y=a*Math.cos(f+
    I*g);l.z=a*Math.sin(d+A*e)*Math.sin(f+I*g);v.push(l.x,l.y,l.z);r.set(l.x,l.y,l.z).normalize();w.push(r.x,r.y,r.z);z.push(A,1-I);y.push(q++)}n.push(y)}for(m=0;m<c;m++)for(k=0;k<b;k++)a=n[m][k+1],d=n[m][k],e=n[m+1][k],g=n[m+1][k+1],(0!==m||0<f)&&t.push(a,d,g),(m!==c-1||h<Math.PI)&&t.push(d,e,g);this.setIndex(t);this.addAttribute("position",new B(v,3));this.addAttribute("normal",new B(w,3));this.addAttribute("uv",new B(z,2))}function Wc(a,b,c,d,e,f){L.call(this);this.type="RingGeometry";this.parameters=
    {innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:f};this.fromBufferGeometry(new bc(a,b,c,d,e,f));this.mergeVertices()}function bc(a,b,c,d,e,f){E.call(this);this.type="RingBufferGeometry";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:f};a=a||.5;b=b||1;e=void 0!==e?e:0;f=void 0!==f?f:2*Math.PI;c=void 0!==c?Math.max(3,c):8;d=void 0!==d?Math.max(1,d):1;var g=[],h=[],k=[],m=[],q=a,n=(b-a)/d,l=new p,r=new D,t,v;for(t=
    0;t<=d;t++){for(v=0;v<=c;v++)a=e+v/c*f,l.x=q*Math.cos(a),l.y=q*Math.sin(a),h.push(l.x,l.y,l.z),k.push(0,0,1),r.x=(l.x/b+1)/2,r.y=(l.y/b+1)/2,m.push(r.x,r.y);q+=n}for(t=0;t<d;t++)for(b=t*(c+1),v=0;v<c;v++)a=v+b,e=a+c+1,f=a+c+2,q=a+1,g.push(a,e,q),g.push(e,f,q);this.setIndex(g);this.addAttribute("position",new B(h,3));this.addAttribute("normal",new B(k,3));this.addAttribute("uv",new B(m,2))}function Xc(a,b,c,d){L.call(this);this.type="LatheGeometry";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};
    this.fromBufferGeometry(new cc(a,b,c,d));this.mergeVertices()}function cc(a,b,c,d){E.call(this);this.type="LatheBufferGeometry";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};b=Math.floor(b)||12;c=c||0;d=d||2*Math.PI;d=Q.clamp(d,0,2*Math.PI);var e=[],f=[],g=[],h=1/b,k=new p,m=new D,q;for(q=0;q<=b;q++){var n=c+q*h*d;var l=Math.sin(n),r=Math.cos(n);for(n=0;n<=a.length-1;n++)k.x=a[n].x*l,k.y=a[n].y,k.z=a[n].x*r,f.push(k.x,k.y,k.z),m.x=q/b,m.y=n/(a.length-1),g.push(m.x,m.y)}for(q=0;q<b;q++)for(n=
    0;n<a.length-1;n++)c=n+q*a.length,h=c+a.length,k=c+a.length+1,m=c+1,e.push(c,h,m),e.push(h,k,m);this.setIndex(e);this.addAttribute("position",new B(f,3));this.addAttribute("uv",new B(g,2));this.computeVertexNormals();if(d===2*Math.PI)for(d=this.attributes.normal.array,e=new p,f=new p,g=new p,c=b*a.length*3,n=q=0;q<a.length;q++,n+=3)e.x=d[n+0],e.y=d[n+1],e.z=d[n+2],f.x=d[c+n+0],f.y=d[c+n+1],f.z=d[c+n+2],g.addVectors(e,f).normalize(),d[n+0]=d[c+n+0]=g.x,d[n+1]=d[c+n+1]=g.y,d[n+2]=d[c+n+2]=g.z}function xb(a,
    b){L.call(this);this.type="ShapeGeometry";"object"===typeof b&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),b=b.curveSegments);this.parameters={shapes:a,curveSegments:b};this.fromBufferGeometry(new yb(a,b));this.mergeVertices()}function yb(a,b){function c(a){var c,h=e.length/3;a=a.extractPoints(b);var m=a.shape,q=a.holes;if(!1===$a.isClockWise(m))for(m=m.reverse(),a=0,c=q.length;a<c;a++){var l=q[a];!0===$a.isClockWise(l)&&(q[a]=l.reverse())}var p=$a.triangulateShape(m,
    q);a=0;for(c=q.length;a<c;a++)l=q[a],m=m.concat(l);a=0;for(c=m.length;a<c;a++)l=m[a],e.push(l.x,l.y,0),f.push(0,0,1),g.push(l.x,l.y);a=0;for(c=p.length;a<c;a++)m=p[a],d.push(m[0]+h,m[1]+h,m[2]+h),k+=3}E.call(this);this.type="ShapeBufferGeometry";this.parameters={shapes:a,curveSegments:b};b=b||12;var d=[],e=[],f=[],g=[],h=0,k=0;if(!1===Array.isArray(a))c(a);else for(var m=0;m<a.length;m++)c(a[m]),this.addGroup(h,k,m),h+=k,k=0;this.setIndex(d);this.addAttribute("position",new B(e,3));this.addAttribute("normal",
    new B(f,3));this.addAttribute("uv",new B(g,2))}function ff(a,b){b.shapes=[];if(Array.isArray(a))for(var c=0,d=a.length;c<d;c++)b.shapes.push(a[c].uuid);else b.shapes.push(a.uuid);return b}function dc(a,b){E.call(this);this.type="EdgesGeometry";this.parameters={thresholdAngle:b};var c=[];b=Math.cos(Q.DEG2RAD*(void 0!==b?b:1));var d=[0,0],e={},f=["a","b","c"];if(a.isBufferGeometry){var g=new L;g.fromBufferGeometry(a)}else g=a.clone();g.mergeVertices();g.computeFaceNormals();a=g.vertices;g=g.faces;for(var h=
    0,k=g.length;h<k;h++)for(var m=g[h],q=0;3>q;q++){var n=m[f[q]];var l=m[f[(q+1)%3]];d[0]=Math.min(n,l);d[1]=Math.max(n,l);n=d[0]+","+d[1];void 0===e[n]?e[n]={index1:d[0],index2:d[1],face1:h,face2:void 0}:e[n].face2=h}for(n in e)if(d=e[n],void 0===d.face2||g[d.face1].normal.dot(g[d.face2].normal)<=b)f=a[d.index1],c.push(f.x,f.y,f.z),f=a[d.index2],c.push(f.x,f.y,f.z);this.addAttribute("position",new B(c,3))}function zb(a,b,c,d,e,f,g,h){L.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:a,
    radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};this.fromBufferGeometry(new ab(a,b,c,d,e,f,g,h));this.mergeVertices()}function ab(a,b,c,d,e,f,g,h){function k(c){var e,f=new D,k=new p,u=0,v=!0===c?a:b,y=!0===c?1:-1;var x=t;for(e=1;e<=d;e++)n.push(0,w*y,0),l.push(0,y,0),r.push(.5,.5),t++;var B=t;for(e=0;e<=d;e++){var C=e/d*h+g,E=Math.cos(C),C=Math.sin(C);k.x=v*C;k.y=w*y;k.z=v*E;n.push(k.x,k.y,k.z);l.push(0,y,0);f.x=.5*E+.5;f.y=.5*C*y+.5;r.push(f.x,f.y);
    t++}for(e=0;e<d;e++)f=x+e,k=B+e,!0===c?q.push(k,k+1,f):q.push(k+1,k,f),u+=3;m.addGroup(z,u,!0===c?1:2);z+=u}E.call(this);this.type="CylinderBufferGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};var m=this;a=void 0!==a?a:1;b=void 0!==b?b:1;c=c||1;d=Math.floor(d)||8;e=Math.floor(e)||1;f=void 0!==f?f:!1;g=void 0!==g?g:0;h=void 0!==h?h:2*Math.PI;var q=[],n=[],l=[],r=[],t=0,v=[],w=c/2,z=0;(function(){var f,k,u=new p,
    J=new p,x=0,B=(b-a)/c;for(k=0;k<=e;k++){var D=[],C=k/e,E=C*(b-a)+a;for(f=0;f<=d;f++){var H=f/d,K=H*h+g,S=Math.sin(K),K=Math.cos(K);J.x=E*S;J.y=-C*c+w;J.z=E*K;n.push(J.x,J.y,J.z);u.set(S,B,K).normalize();l.push(u.x,u.y,u.z);r.push(H,1-C);D.push(t++)}v.push(D)}for(f=0;f<d;f++)for(k=0;k<e;k++)u=v[k+1][f],J=v[k+1][f+1],B=v[k][f+1],q.push(v[k][f],u,B),q.push(u,J,B),x+=6;m.addGroup(z,x,0);z+=x})();!1===f&&(0<a&&k(!0),0<b&&k(!1));this.setIndex(q);this.addAttribute("position",new B(n,3));this.addAttribute("normal",
    new B(l,3));this.addAttribute("uv",new B(r,2))}function Yc(a,b,c,d,e,f,g){zb.call(this,0,a,b,c,d,e,f,g);this.type="ConeGeometry";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,openEnded:e,thetaStart:f,thetaLength:g}}function Zc(a,b,c,d,e,f,g){ab.call(this,0,a,b,c,d,e,f,g);this.type="ConeBufferGeometry";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,openEnded:e,thetaStart:f,thetaLength:g}}function $c(a,b,c,d){L.call(this);this.type="CircleGeometry";this.parameters=
    {radius:a,segments:b,thetaStart:c,thetaLength:d};this.fromBufferGeometry(new ec(a,b,c,d));this.mergeVertices()}function ec(a,b,c,d){E.call(this);this.type="CircleBufferGeometry";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};a=a||1;b=void 0!==b?Math.max(3,b):8;c=void 0!==c?c:0;d=void 0!==d?d:2*Math.PI;var e=[],f=[],g=[],h=[],k,m=new p,q=new D;f.push(0,0,0);g.push(0,0,1);h.push(.5,.5);var n=0;for(k=3;n<=b;n++,k+=3){var l=c+n/b*d;m.x=a*Math.cos(l);m.y=a*Math.sin(l);f.push(m.x,m.y,
    m.z);g.push(0,0,1);q.x=(f[k]/a+1)/2;q.y=(f[k+1]/a+1)/2;h.push(q.x,q.y)}for(k=1;k<=b;k++)e.push(k,k+1,0);this.setIndex(e);this.addAttribute("position",new B(f,3));this.addAttribute("normal",new B(g,3));this.addAttribute("uv",new B(h,2))}function fc(a){P.call(this);this.type="ShadowMaterial";this.color=new H(0);this.opacity=1;this.transparent=this.lights=!0;this.setValues(a)}function gc(a){Fa.call(this,a);this.type="RawShaderMaterial"}function Ua(a){P.call(this);this.defines={STANDARD:""};this.type=
    "MeshStandardMaterial";this.color=new H(16777215);this.metalness=this.roughness=.5;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new H(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new D(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.refractionRatio=
    .98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)}function Ab(a){Ua.call(this);this.defines={PHYSICAL:""};this.type="MeshPhysicalMaterial";this.reflectivity=.5;this.clearCoatRoughness=this.clearCoat=0;this.setValues(a)}function Ma(a){P.call(this);this.type="MeshPhongMaterial";this.color=new H(16777215);this.specular=new H(1118481);this.shininess=30;this.lightMap=this.map=null;
    this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new H(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new D(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=
    this.morphTargets=this.skinning=!1;this.setValues(a)}function Bb(a){Ma.call(this);this.defines={TOON:""};this.type="MeshToonMaterial";this.gradientMap=null;this.setValues(a)}function Cb(a){P.call(this);this.type="MeshNormalMaterial";this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new D(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=
    !1;this.setValues(a)}function Db(a){P.call(this);this.type="MeshLambertMaterial";this.color=new H(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new H(0);this.emissiveIntensity=1;this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=
    this.skinning=!1;this.setValues(a)}function Eb(a){W.call(this);this.type="LineDashedMaterial";this.scale=1;this.dashSize=3;this.gapSize=1;this.setValues(a)}function he(a,b,c){var d=this,e=!1,f=0,g=0,h=void 0;this.onStart=void 0;this.onLoad=a;this.onProgress=b;this.onError=c;this.itemStart=function(a){g++;if(!1===e&&void 0!==d.onStart)d.onStart(a,f,g);e=!0};this.itemEnd=function(a){f++;if(void 0!==d.onProgress)d.onProgress(a,f,g);if(f===g&&(e=!1,void 0!==d.onLoad))d.onLoad()};this.itemError=function(a){if(void 0!==
    d.onError)d.onError(a)};this.resolveURL=function(a){return h?h(a):a};this.setURLModifier=function(a){h=a;return this}}function Na(a){this.manager=void 0!==a?a:xa}function gf(a){this.manager=void 0!==a?a:xa;this._parser=null}function ie(a){this.manager=void 0!==a?a:xa;this._parser=null}function ad(a){this.manager=void 0!==a?a:xa}function je(a){this.manager=void 0!==a?a:xa}function Ad(a){this.manager=void 0!==a?a:xa}function C(){this.type="Curve";this.arcLengthDivisions=200}function Ba(a,b,c,d,e,f,
    g,h){C.call(this);this.type="EllipseCurve";this.aX=a||0;this.aY=b||0;this.xRadius=c||1;this.yRadius=d||1;this.aStartAngle=e||0;this.aEndAngle=f||2*Math.PI;this.aClockwise=g||!1;this.aRotation=h||0}function hc(a,b,c,d,e,f){Ba.call(this,a,b,c,c,d,e,f);this.type="ArcCurve"}function ke(){var a=0,b=0,c=0,d=0;return{initCatmullRom:function(e,f,g,h,k){e=k*(g-e);h=k*(h-f);a=f;b=e;c=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},initNonuniformCatmullRom:function(e,f,g,h,k,m,q){e=((f-e)/k-(g-e)/(k+m)+(g-f)/m)*m;h=((g-f)/m-
    (h-f)/(m+q)+(h-g)/q)*m;a=f;b=e;c=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},calc:function(e){var f=e*e;return a+b*e+c*f+d*f*e}}}function ca(a,b,c,d){C.call(this);this.type="CatmullRomCurve3";this.points=a||[];this.closed=b||!1;this.curveType=c||"centripetal";this.tension=d||.5}function hf(a,b,c,d,e){b=.5*(d-b);e=.5*(e-c);var f=a*a;return(2*c-2*d+b+e)*a*f+(-3*c+3*d-2*b-e)*f+b*a+c}function bd(a,b,c,d){var e=1-a;return e*e*b+2*(1-a)*a*c+a*a*d}function cd(a,b,c,d,e){var f=1-a,g=1-a;return f*f*f*b+3*g*g*a*c+3*(1-a)*
    a*a*d+a*a*a*e}function Oa(a,b,c,d){C.call(this);this.type="CubicBezierCurve";this.v0=a||new D;this.v1=b||new D;this.v2=c||new D;this.v3=d||new D}function Va(a,b,c,d){C.call(this);this.type="CubicBezierCurve3";this.v0=a||new p;this.v1=b||new p;this.v2=c||new p;this.v3=d||new p}function ya(a,b){C.call(this);this.type="LineCurve";this.v1=a||new D;this.v2=b||new D}function Pa(a,b){C.call(this);this.type="LineCurve3";this.v1=a||new p;this.v2=b||new p}function Qa(a,b,c){C.call(this);this.type="QuadraticBezierCurve";
    this.v0=a||new D;this.v1=b||new D;this.v2=c||new D}function Wa(a,b,c){C.call(this);this.type="QuadraticBezierCurve3";this.v0=a||new p;this.v1=b||new p;this.v2=c||new p}function Ra(a){C.call(this);this.type="SplineCurve";this.points=a||[]}function bb(){C.call(this);this.type="CurvePath";this.curves=[];this.autoClose=!1}function Sa(a){bb.call(this);this.type="Path";this.currentPoint=new D;a&&this.setFromPoints(a)}function jb(a){Sa.call(this,a);this.uuid=Q.generateUUID();this.type="Shape";this.holes=
    []}function da(a,b){x.call(this);this.type="Light";this.color=new H(a);this.intensity=void 0!==b?b:1;this.receiveShadow=void 0}function Bd(a,b,c){da.call(this,a,c);this.type="HemisphereLight";this.castShadow=void 0;this.position.copy(x.DefaultUp);this.updateMatrix();this.groundColor=new H(b)}function Fb(a){this.camera=a;this.bias=0;this.radius=1;this.mapSize=new D(512,512);this.map=null;this.matrix=new O}function Cd(){Fb.call(this,new ba(50,1,.5,500))}function Dd(a,b,c,d,e,f){da.call(this,a,b);this.type=
    "SpotLight";this.position.copy(x.DefaultUp);this.updateMatrix();this.target=new x;Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(a){this.intensity=a/Math.PI}});this.distance=void 0!==c?c:0;this.angle=void 0!==d?d:Math.PI/3;this.penumbra=void 0!==e?e:0;this.decay=void 0!==f?f:1;this.shadow=new Cd}function Ed(a,b,c,d){da.call(this,a,b);this.type="PointLight";Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(a){this.intensity=
    a/(4*Math.PI)}});this.distance=void 0!==c?c:0;this.decay=void 0!==d?d:1;this.shadow=new Fb(new ba(90,1,.5,500))}function Fd(){Fb.call(this,new Lb(-5,5,5,-5,.5,500))}function Gd(a,b){da.call(this,a,b);this.type="DirectionalLight";this.position.copy(x.DefaultUp);this.updateMatrix();this.target=new x;this.shadow=new Fd}function Hd(a,b){da.call(this,a,b);this.type="AmbientLight";this.castShadow=void 0}function Id(a,b,c,d){da.call(this,a,b);this.type="RectAreaLight";this.position.set(0,1,0);this.updateMatrix();
    this.width=void 0!==c?c:10;this.height=void 0!==d?d:10}function Jd(a,b,c,d){T.call(this,a,b,c,d)}function Kd(a,b,c){T.call(this,a,b,c)}function pa(a,b,c,d){this.parameterPositions=a;this._cachedIndex=0;this.resultBuffer=void 0!==d?d:new b.constructor(c);this.sampleValues=b;this.valueSize=c}function Ld(a,b,c,d){pa.call(this,a,b,c,d)}function dd(a,b,c,d){T.call(this,a,b,c,d)}function Md(a,b,c,d){T.call(this,a,b,c,d)}function ic(a,b,c,d){T.call(this,a,b,c,d)}function Nd(a,b,c,d){pa.call(this,a,b,c,d);
    this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function ed(a,b,c,d){pa.call(this,a,b,c,d)}function Od(a,b,c,d){pa.call(this,a,b,c,d)}function T(a,b,c,d){if(void 0===a)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===b||0===b.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+a);this.name=a;this.times=ga.convertArray(b,this.TimeBufferType);this.values=ga.convertArray(c,this.ValueBufferType);this.setInterpolation(d||this.DefaultInterpolation);
    this.validate();this.optimize()}function jc(a,b,c,d){T.call(this,a,b,c,d)}function Ca(a,b,c){this.name=a;this.tracks=c;this.duration=void 0!==b?b:-1;this.uuid=Q.generateUUID();0>this.duration&&this.resetDuration();this.optimize()}function Pd(a){this.manager=void 0!==a?a:xa;this.textures={}}function le(a){this.manager=void 0!==a?a:xa}function kc(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}}function me(a){"boolean"===typeof a&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),
    a=void 0);this.manager=void 0!==a?a:xa;this.withCredentials=!1}function jf(a){this.manager=void 0!==a?a:xa;this.texturePath=""}function ne(a){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported.");this.manager=void 0!==a?a:xa;this.options=void 0}function oe(){this.type="ShapePath";this.subPaths=[];this.currentPath=null}function pe(a){this.type="Font";
    this.data=a}function kf(a){this.manager=void 0!==a?a:xa}function qe(a){this.manager=void 0!==a?a:xa}function lf(){this.type="StereoCamera";this.aspect=1;this.eyeSep=.064;this.cameraL=new ba;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=new ba;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1}function fd(a,b,c){x.call(this);this.type="CubeCamera";var d=new ba(90,1,a,b);d.up.set(0,-1,0);d.lookAt(new p(1,0,0));this.add(d);var e=new ba(90,1,a,b);e.up.set(0,-1,
    0);e.lookAt(new p(-1,0,0));this.add(e);var f=new ba(90,1,a,b);f.up.set(0,0,1);f.lookAt(new p(0,1,0));this.add(f);var g=new ba(90,1,a,b);g.up.set(0,0,-1);g.lookAt(new p(0,-1,0));this.add(g);var h=new ba(90,1,a,b);h.up.set(0,-1,0);h.lookAt(new p(0,0,1));this.add(h);var k=new ba(90,1,a,b);k.up.set(0,-1,0);k.lookAt(new p(0,0,-1));this.add(k);this.renderTarget=new Jb(c,c,{format:1022,magFilter:1006,minFilter:1006});this.renderTarget.texture.name="CubeCamera";this.update=function(a,b){null===this.parent&&
    this.updateMatrixWorld();var c=this.renderTarget,m=c.texture.generateMipmaps;c.texture.generateMipmaps=!1;c.activeCubeFace=0;a.render(b,d,c);c.activeCubeFace=1;a.render(b,e,c);c.activeCubeFace=2;a.render(b,f,c);c.activeCubeFace=3;a.render(b,g,c);c.activeCubeFace=4;a.render(b,h,c);c.texture.generateMipmaps=m;c.activeCubeFace=5;a.render(b,k,c);a.setRenderTarget(null)};this.clear=function(a,b,c,d){for(var e=this.renderTarget,f=0;6>f;f++)e.activeCubeFace=f,a.setRenderTarget(e),a.clear(b,c,d);a.setRenderTarget(null)}}
    function re(){x.call(this);this.type="AudioListener";this.context=se.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null}function lc(a){x.call(this);this.type="Audio";this.context=a.context;this.gain=this.context.createGain();this.gain.connect(a.getInput());this.autoplay=!1;this.buffer=null;this.loop=!1;this.offset=this.startTime=0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.sourceType="empty";this.filters=[]}function te(a){lc.call(this,
    a);this.panner=this.context.createPanner();this.panner.connect(this.gain)}function ue(a,b){this.analyser=a.context.createAnalyser();this.analyser.fftSize=void 0!==b?b:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);a.getOutput().connect(this.analyser)}function ve(a,b,c){this.binding=a;this.valueSize=c;a=Float64Array;switch(b){case "quaternion":b=this._slerp;break;case "string":case "bool":a=Array;b=this._select;break;default:b=this._lerp}this.buffer=new a(4*c);this._mixBufferRegion=
    b;this.referenceCount=this.useCount=this.cumulativeWeight=0}function mf(a,b,c){c=c||qa.parseTrackName(b);this._targetGroup=a;this._bindings=a.subscribe_(b,c)}function qa(a,b,c){this.path=b;this.parsedPath=c||qa.parseTrackName(b);this.node=qa.findNode(a,this.parsedPath.nodeName)||a;this.rootNode=a}function nf(){this.uuid=Q.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var a={};this._indicesByUUID=a;for(var b=0,c=arguments.length;b!==c;++b)a[arguments[b].uuid]=
    b;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var d=this;this.stats={objects:{get total(){return d._objects.length},get inUse(){return this.total-d.nCachedObjects_}},get bindingsPerObject(){return d._bindings.length}}}function of(a,b,c){this._mixer=a;this._clip=b;this._localRoot=c||null;a=b.tracks;b=a.length;c=Array(b);for(var d={endingStart:2400,endingEnd:2400},e=0;e!==b;++e){var f=a[e].createInterpolant(null);c[e]=f;f.settings=d}this._interpolantSettings=
    d;this._interpolants=c;this._propertyBindings=Array(b);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null;this.loop=2201;this._loopCount=-1;this._startTime=null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1;this.repetitions=Infinity;this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function we(a){this._root=a;this._initMemoryManager();this.time=this._accuIndex=
    0;this.timeScale=1}function Qd(a,b){"string"===typeof a&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),a=b);this.value=a}function xe(){E.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=void 0}function ye(a,b,c,d){this.uuid=Q.generateUUID();this.data=a;this.itemSize=b;this.offset=c;this.normalized=!0===d}function mc(a,b){this.uuid=Q.generateUUID();this.array=a;this.stride=b;this.count=void 0!==a?a.length/b:0;this.dynamic=!1;this.updateRange={offset:0,count:-1};
    this.onUploadCallback=function(){};this.version=0}function ze(a,b,c){mc.call(this,a,b);this.meshPerAttribute=c||1}function Ae(a,b,c){M.call(this,a,b);this.meshPerAttribute=c||1}function pf(a,b,c,d){this.ray=new sb(a,b);this.near=c||0;this.far=d||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})}function qf(a,
    b){return a.distance-b.distance}function Be(a,b,c,d){if(!1!==a.visible&&(a.raycast(b,c),!0===d)){a=a.children;d=0;for(var e=a.length;d<e;d++)Be(a[d],b,c,!0)}}function rf(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1}function sf(a,b,c){this.radius=void 0!==a?a:1;this.phi=void 0!==b?b:0;this.theta=void 0!==c?c:0;return this}function tf(a,b,c){this.radius=void 0!==a?a:1;this.theta=void 0!==b?b:0;this.y=void 0!==c?c:0;return this}function gd(a){x.call(this);
    this.material=a;this.render=function(){}}function hd(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16711680;d=void 0!==d?d:1;b=0;(c=this.object.geometry)&&c.isGeometry?b=3*c.faces.length:c&&c.isBufferGeometry&&(b=c.attributes.normal.count);c=new E;b=new B(6*b,3);c.addAttribute("position",b);X.call(this,c,new W({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()}function nc(a,b){x.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=
    !1;this.color=b;a=new E;b=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var c=0,d=1;32>c;c++,d++){var e=c/32*Math.PI*2,f=d/32*Math.PI*2;b.push(Math.cos(e),Math.sin(e),1,Math.cos(f),Math.sin(f),1)}a.addAttribute("position",new B(b,3));b=new W({fog:!1});this.cone=new X(a,b);this.add(this.cone);this.update()}function uf(a){var b=[];a&&a.isBone&&b.push(a);for(var c=0;c<a.children.length;c++)b.push.apply(b,uf(a.children[c]));return b}function oc(a){for(var b=uf(a),c=new E,d=[],e=
    [],f=new H(0,0,1),g=new H(0,1,0),h=0;h<b.length;h++){var k=b[h];k.parent&&k.parent.isBone&&(d.push(0,0,0),d.push(0,0,0),e.push(f.r,f.g,f.b),e.push(g.r,g.g,g.b))}c.addAttribute("position",new B(d,3));c.addAttribute("color",new B(e,3));d=new W({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0});X.call(this,c,d);this.root=a;this.bones=b;this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1}function pc(a,b,c){this.light=a;this.light.updateMatrixWorld();this.color=c;a=new wb(b,4,2);b=new Aa({wireframe:!0,
    fog:!1});ra.call(this,a,b);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1;this.update()}function qc(a,b){x.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=b;a=new W({fog:!1});b=new E;b.addAttribute("position",new M(new Float32Array(15),3));this.line=new sa(b,a);this.add(this.line);this.update()}function rc(a,b,c){x.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=
    !1;this.color=c;a=new ub(b);a.rotateY(.5*Math.PI);this.material=new Aa({wireframe:!0,fog:!1});void 0===this.color&&(this.material.vertexColors=2);b=a.getAttribute("position");b=new Float32Array(3*b.count);a.addAttribute("color",new M(b,3));this.add(new ra(a,this.material));this.update()}function id(a,b,c,d){a=a||10;b=b||10;c=new H(void 0!==c?c:4473924);d=new H(void 0!==d?d:8947848);var e=b/2,f=a/b,g=a/2;a=[];for(var h=[],k=0,m=0,q=-g;k<=b;k++,q+=f){a.push(-g,0,q,g,0,q);a.push(q,0,-g,q,0,g);var n=
    k===e?c:d;n.toArray(h,m);m+=3;n.toArray(h,m);m+=3;n.toArray(h,m);m+=3;n.toArray(h,m);m+=3}b=new E;b.addAttribute("position",new B(a,3));b.addAttribute("color",new B(h,3));c=new W({vertexColors:2});X.call(this,b,c)}function Rd(a,b,c,d,e,f){a=a||10;b=b||16;c=c||8;d=d||64;e=new H(void 0!==e?e:4473924);f=new H(void 0!==f?f:8947848);var g=[],h=[],k;for(k=0;k<=b;k++){var m=k/b*2*Math.PI;var q=Math.sin(m)*a;m=Math.cos(m)*a;g.push(0,0,0);g.push(q,0,m);var n=k&1?e:f;h.push(n.r,n.g,n.b);h.push(n.r,n.g,n.b)}for(k=
    0;k<=c;k++){n=k&1?e:f;var l=a-a/c*k;for(b=0;b<d;b++)m=b/d*2*Math.PI,q=Math.sin(m)*l,m=Math.cos(m)*l,g.push(q,0,m),h.push(n.r,n.g,n.b),m=(b+1)/d*2*Math.PI,q=Math.sin(m)*l,m=Math.cos(m)*l,g.push(q,0,m),h.push(n.r,n.g,n.b)}a=new E;a.addAttribute("position",new B(g,3));a.addAttribute("color",new B(h,3));g=new W({vertexColors:2});X.call(this,a,g)}function jd(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16776960;d=void 0!==d?d:1;b=0;(c=this.object.geometry)&&c.isGeometry?b=c.faces.length:
    console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");c=new E;b=new B(6*b,3);c.addAttribute("position",b);X.call(this,c,new W({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()}function sc(a,b,c){x.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=c;void 0===b&&(b=1);a=new E;a.addAttribute("position",new B([-b,b,0,b,b,0,b,-b,0,-b,-b,0,-b,b,0],3));b=new W({fog:!1});
    this.lightPlane=new sa(a,b);this.add(this.lightPlane);a=new E;a.addAttribute("position",new B([0,0,0,0,0,1],3));this.targetLine=new sa(a,b);this.add(this.targetLine);this.update()}function kd(a){function b(a,b,d){c(a,d);c(b,d)}function c(a,b){f.push(0,0,0);g.push(b.r,b.g,b.b);void 0===h[a]&&(h[a]=[]);h[a].push(f.length/3-1)}var d=new E,e=new W({color:16777215,vertexColors:1}),f=[],g=[],h={},k=new H(16755200),m=new H(16711680),q=new H(43775),l=new H(16777215),u=new H(3355443);b("n1","n2",k);b("n2",
    "n4",k);b("n4","n3",k);b("n3","n1",k);b("f1","f2",k);b("f2","f4",k);b("f4","f3",k);b("f3","f1",k);b("n1","f1",k);b("n2","f2",k);b("n3","f3",k);b("n4","f4",k);b("p","n1",m);b("p","n2",m);b("p","n3",m);b("p","n4",m);b("u1","u2",q);b("u2","u3",q);b("u3","u1",q);b("c","t",l);b("p","c",u);b("cn1","cn2",u);b("cn3","cn4",u);b("cf1","cf2",u);b("cf3","cf4",u);d.addAttribute("position",new B(f,3));d.addAttribute("color",new B(g,3));X.call(this,d,e);this.camera=a;this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix();
    this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=h;this.update()}function Gb(a,b){this.object=a;void 0===b&&(b=16776960);a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var c=new Float32Array(24),d=new E;d.setIndex(new M(a,1));d.addAttribute("position",new M(c,3));X.call(this,d,new W({color:b}));this.matrixAutoUpdate=!1;this.update()}function ld(a,b){this.type="Box3Helper";this.box=a;a=void 0!==b?b:16776960;b=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,
    4,1,5,2,6,3,7]);var c=new E;c.setIndex(new M(b,1));c.addAttribute("position",new B([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3));X.call(this,c,new W({color:a}));this.geometry.computeBoundingSphere()}function md(a,b,c){this.type="PlaneHelper";this.plane=a;this.size=void 0===b?1:b;a=void 0!==c?c:16776960;b=new E;b.addAttribute("position",new B([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3));b.computeBoundingSphere();sa.call(this,b,new W({color:a}));b=new E;
    b.addAttribute("position",new B([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3));b.computeBoundingSphere();this.add(new ra(b,new Aa({color:a,opacity:.2,transparent:!0,depthWrite:!1})))}function Hb(a,b,c,d,e,f){x.call(this);void 0===d&&(d=16776960);void 0===c&&(c=1);void 0===e&&(e=.2*c);void 0===f&&(f=.2*e);void 0===Sd&&(Sd=new E,Sd.addAttribute("position",new B([0,0,0,0,1,0],3)),Ce=new ab(0,.5,1,5,1),Ce.translate(0,-.5,0));this.position.copy(b);this.line=new sa(Sd,new W({color:d}));this.line.matrixAutoUpdate=
    !1;this.add(this.line);this.cone=new ra(Ce,new Aa({color:d}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(a);this.setLength(c,e,f)}function nd(a){a=a||1;var b=[0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a];a=new E;a.addAttribute("position",new B(b,3));a.addAttribute("color",new B([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));b=new W({vertexColors:2});X.call(this,a,b)}function vf(a){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");ca.call(this,
    a);this.type="catmullrom";this.closed=!0}function wf(a){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");ca.call(this,a);this.type="catmullrom"}function De(a){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.");ca.call(this,a);this.type="catmullrom"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Number.isInteger&&(Number.isInteger=function(a){return"number"===typeof a&&isFinite(a)&&Math.floor(a)===a});void 0===
    Math.sign&&(Math.sign=function(a){return 0>a?-1:0<a?1:+a});!1==="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});void 0===Object.assign&&function(){Object.assign=function(a){if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var d=arguments[c];if(void 0!==d&&null!==d)for(var e in d)Object.prototype.hasOwnProperty.call(d,
    e)&&(b[e]=d[e])}return b}}();Object.assign(za.prototype,{addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)},removeEventListener:function(a,b){void 0!==this._listeners&&(a=this._listeners[a],void 0!==a&&(b=a.indexOf(b),-1!==b&&a.splice(b,1)))},dispatchEvent:function(a){if(void 0!==
    this._listeners){var b=this._listeners[a.type];if(void 0!==b){a.target=this;for(var b=b.slice(0),c=0,d=b.length;c<d;c++)b[c].call(this,a)}}}});var Q={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var a=[],b=0;256>b;b++)a[b]=(16>b?"0":"")+b.toString(16).toUpperCase();return function(){var b=4294967295*Math.random()|0,d=4294967295*Math.random()|0,e=4294967295*Math.random()|0,f=4294967295*Math.random()|0;return a[b&255]+a[b>>8&255]+a[b>>16&255]+a[b>>24&255]+"-"+a[d&255]+a[d>>8&
    255]+"-"+a[d>>16&15|64]+a[d>>24&255]+"-"+a[e&63|128]+a[e>>8&255]+"-"+a[e>>16&255]+a[e>>24&255]+a[f&255]+a[f>>8&255]+a[f>>16&255]+a[f>>24&255]}}(),clamp:function(a,b,c){return Math.max(b,Math.min(c,a))},euclideanModulo:function(a,b){return(a%b+b)%b},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},lerp:function(a,b,c){return(1-c)*a+c*b},smoothstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;
    a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},degToRad:function(a){return a*Q.DEG2RAD},radToDeg:function(a){return a*Q.RAD2DEG},isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a},ceilPowerOfTwo:function(a){return Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},floorPowerOfTwo:function(a){return Math.pow(2,Math.floor(Math.log(a)/
    Math.LN2))}};Object.defineProperties(D.prototype,{width:{get:function(){return this.x},set:function(a){this.x=a}},height:{get:function(){return this.y},set:function(a){this.y=a}}});Object.assign(D.prototype,{isVector2:!0,set:function(a,b){this.x=a;this.y=b;return this},setScalar:function(a){this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+
    a);}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},
    addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},subScalar:function(a){this.x-=a;this.y-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=
    a.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divide:function(a){this.x/=a.x;this.y/=a.y;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},applyMatrix3:function(a){var b=this.x,c=this.y;a=a.elements;this.x=a[0]*b+a[3]*c+a[6];this.y=a[1]*b+a[4]*c+a[7];return this},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},clamp:function(a,
    b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this},clampScalar:function(){var a=new D,b=new D;return function(c,d){a.set(c,c);b.set(d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=
    Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||
    1)},angle:function(){var a=Math.atan2(this.y,this.x);0>a&&(a+=2*Math.PI);return a},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},manhattanDistanceTo:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,
    a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().");this.x=a.getX(b);this.y=a.getY(b);return this},rotateAround:function(a,b){var c=Math.cos(b);b=Math.sin(b);var d=
    this.x-a.x,e=this.y-a.y;this.x=d*c-e*b+a.x;this.y=d*b+e*c+a.y;return this}});Object.assign(O.prototype,{isMatrix4:!0,set:function(a,b,c,d,e,f,g,h,k,m,q,l,u,r,t,p){var n=this.elements;n[0]=a;n[4]=b;n[8]=c;n[12]=d;n[1]=e;n[5]=f;n[9]=g;n[13]=h;n[2]=k;n[6]=m;n[10]=q;n[14]=l;n[3]=u;n[7]=r;n[11]=t;n[15]=p;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new O).fromArray(this.elements)},copy:function(a){var b=this.elements;a=a.elements;b[0]=
    a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return this},copyPosition:function(a){var b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractBasis:function(a,b,c){a.setFromMatrixColumn(this,0);b.setFromMatrixColumn(this,1);c.setFromMatrixColumn(this,2);return this},makeBasis:function(a,b,c){this.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,
    1);return this},extractRotation:function(){var a=new p;return function(b){var c=this.elements,d=b.elements,e=1/a.setFromMatrixColumn(b,0).length(),f=1/a.setFromMatrixColumn(b,1).length();b=1/a.setFromMatrixColumn(b,2).length();c[0]=d[0]*e;c[1]=d[1]*e;c[2]=d[2]*e;c[4]=d[4]*f;c[5]=d[5]*f;c[6]=d[6]*f;c[8]=d[8]*b;c[9]=d[9]*b;c[10]=d[10]*b;return this}}(),makeRotationFromEuler:function(a){a&&a.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
    var b=this.elements,c=a.x,d=a.y,e=a.z,f=Math.cos(c),c=Math.sin(c),g=Math.cos(d),d=Math.sin(d),h=Math.cos(e),e=Math.sin(e);if("XYZ"===a.order){var k=f*h;var m=f*e;var q=c*h;a=c*e;b[0]=g*h;b[4]=-g*e;b[8]=d;b[1]=m+q*d;b[5]=k-a*d;b[9]=-c*g;b[2]=a-k*d;b[6]=q+m*d;b[10]=f*g}else"YXZ"===a.order?(k=g*h,m=g*e,q=d*h,a=d*e,b[0]=k+a*c,b[4]=q*c-m,b[8]=f*d,b[1]=f*e,b[5]=f*h,b[9]=-c,b[2]=m*c-q,b[6]=a+k*c,b[10]=f*g):"ZXY"===a.order?(k=g*h,m=g*e,q=d*h,a=d*e,b[0]=k-a*c,b[4]=-f*e,b[8]=q+m*c,b[1]=m+q*c,b[5]=f*h,b[9]=
    a-k*c,b[2]=-f*d,b[6]=c,b[10]=f*g):"ZYX"===a.order?(k=f*h,m=f*e,q=c*h,a=c*e,b[0]=g*h,b[4]=q*d-m,b[8]=k*d+a,b[1]=g*e,b[5]=a*d+k,b[9]=m*d-q,b[2]=-d,b[6]=c*g,b[10]=f*g):"YZX"===a.order?(k=f*g,m=f*d,q=c*g,a=c*d,b[0]=g*h,b[4]=a-k*e,b[8]=q*e+m,b[1]=e,b[5]=f*h,b[9]=-c*h,b[2]=-d*h,b[6]=m*e+q,b[10]=k-a*e):"XZY"===a.order&&(k=f*g,m=f*d,q=c*g,a=c*d,b[0]=g*h,b[4]=-e,b[8]=d*h,b[1]=k*e+a,b[5]=f*h,b[9]=m*e-q,b[2]=q*e-m,b[6]=c*h,b[10]=a*e+k);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},makeRotationFromQuaternion:function(a){var b=
    this.elements,c=a._x,d=a._y,e=a._z,f=a._w,g=c+c,h=d+d,k=e+e;a=c*g;var m=c*h,c=c*k,q=d*h,d=d*k,e=e*k,g=f*g,h=f*h,f=f*k;b[0]=1-(q+e);b[4]=m-f;b[8]=c+h;b[1]=m+f;b[5]=1-(a+e);b[9]=d-g;b[2]=c-h;b[6]=d+g;b[10]=1-(a+q);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a=new p,b=new p,c=new p;return function(d,e,f){var g=this.elements;c.subVectors(d,e);0===c.lengthSq()&&(c.z=1);c.normalize();a.crossVectors(f,c);0===a.lengthSq()&&(1===Math.abs(f.z)?c.x+=1E-4:c.z+=1E-4,
    c.normalize(),a.crossVectors(f,c));a.normalize();b.crossVectors(c,a);g[0]=a.x;g[4]=b.x;g[8]=c.x;g[1]=a.y;g[5]=b.y;g[9]=c.y;g[2]=a.z;g[6]=b.z;g[10]=c.z;return this}}(),multiply:function(a,b){return void 0!==b?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements;
    b=this.elements;a=c[0];var e=c[4],f=c[8],g=c[12],h=c[1],k=c[5],m=c[9],q=c[13],n=c[2],l=c[6],r=c[10],t=c[14],p=c[3],w=c[7],z=c[11],c=c[15],y=d[0],I=d[4],A=d[8],J=d[12],x=d[1],B=d[5],D=d[9],C=d[13],E=d[2],H=d[6],K=d[10],S=d[14],L=d[3],N=d[7],M=d[11],d=d[15];b[0]=a*y+e*x+f*E+g*L;b[4]=a*I+e*B+f*H+g*N;b[8]=a*A+e*D+f*K+g*M;b[12]=a*J+e*C+f*S+g*d;b[1]=h*y+k*x+m*E+q*L;b[5]=h*I+k*B+m*H+q*N;b[9]=h*A+k*D+m*K+q*M;b[13]=h*J+k*C+m*S+q*d;b[2]=n*y+l*x+r*E+t*L;b[6]=n*I+l*B+r*H+t*N;b[10]=n*A+l*D+r*K+t*M;b[14]=n*J+l*
    C+r*S+t*d;b[3]=p*y+w*x+z*E+c*L;b[7]=p*I+w*B+z*H+c*N;b[11]=p*A+w*D+z*K+c*M;b[15]=p*J+w*C+z*S+c*d;return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},applyToBufferAttribute:function(){var a=new p;return function(b){for(var c=0,d=b.count;c<d;c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix4(this),b.setXYZ(c,a.x,a.y,a.z);return b}}(),determinant:function(){var a=
    this.elements,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],k=a[13],m=a[2],q=a[6],n=a[10],l=a[14];return a[3]*(+e*h*q-d*k*q-e*g*n+c*k*n+d*g*l-c*h*l)+a[7]*(+b*h*l-b*k*n+e*f*n-d*f*l+d*k*m-e*h*m)+a[11]*(+b*k*q-b*g*l-e*f*q+c*f*l+e*g*m-c*k*m)+a[15]*(-d*g*m-b*h*q+b*g*n+d*f*q-c*f*n+c*h*m)},transpose:function(){var a=this.elements;var b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},setPosition:function(a){var b=
    this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=this.elements,d=a.elements;a=d[0];var e=d[1],f=d[2],g=d[3],h=d[4],k=d[5],m=d[6],q=d[7],l=d[8],u=d[9],r=d[10],t=d[11],p=d[12],w=d[13],z=d[14],d=d[15],y=u*z*q-w*r*q+w*m*t-k*z*t-u*m*d+k*r*d,x=p*r*q-l*z*q-p*m*t+h*z*t+l*m*d-h*r*d,A=l*w*q-p*u*q+p*k*t-h*w*t-l*k*d+h*u*d,J=p*u*m-l*w*m-p*k*r+h*w*r+l*k*z-h*u*z,B=a*y+e*x+f*A+g*J;if(0===B){if(!0===b)throw Error("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");
    console.warn("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");return this.identity()}b=1/B;c[0]=y*b;c[1]=(w*r*g-u*z*g-w*f*t+e*z*t+u*f*d-e*r*d)*b;c[2]=(k*z*g-w*m*g+w*f*q-e*z*q-k*f*d+e*m*d)*b;c[3]=(u*m*g-k*r*g-u*f*q+e*r*q+k*f*t-e*m*t)*b;c[4]=x*b;c[5]=(l*z*g-p*r*g+p*f*t-a*z*t-l*f*d+a*r*d)*b;c[6]=(p*m*g-h*z*g-p*f*q+a*z*q+h*f*d-a*m*d)*b;c[7]=(h*r*g-l*m*g+l*f*q-a*r*q-h*f*t+a*m*t)*b;c[8]=A*b;c[9]=(p*u*g-l*w*g-p*e*t+a*w*t+l*e*d-a*u*d)*b;c[10]=(h*w*g-p*k*g+p*e*q-a*w*q-h*e*d+a*k*d)*b;c[11]=
    (l*k*g-h*u*g-l*e*q+a*u*q+h*e*t-a*k*t)*b;c[12]=J*b;c[13]=(l*w*f-p*u*f+p*e*r-a*w*r-l*e*z+a*u*z)*b;c[14]=(p*k*f-h*w*f-p*e*m+a*w*m+h*e*z-a*k*z)*b;c[15]=(h*u*f-l*k*f+l*e*m-a*u*m-h*e*r+a*k*r)*b;return this},scale:function(a){var b=this.elements,c=a.x,d=a.y;a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],
    a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))},makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},makeRotationX:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this},makeRotationY:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=
    Math.cos(b);b=Math.sin(b);var d=1-c,e=a.x,f=a.y;a=a.z;var g=d*e,h=d*f;this.set(g*e+c,g*f-b*a,g*a+b*f,0,g*f+b*a,h*f+c,h*a-b*e,0,g*a-b*f,h*a+b*e,d*a*a+c,0,0,0,0,1);return this},makeScale:function(a,b,c){this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return this},makeShear:function(a,b,c){this.set(1,b,c,0,a,1,c,0,a,b,1,0,0,0,0,1);return this},compose:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);return this},decompose:function(){var a=new p,b=new O;return function(c,
    d,e){var f=this.elements,g=a.set(f[0],f[1],f[2]).length(),h=a.set(f[4],f[5],f[6]).length(),k=a.set(f[8],f[9],f[10]).length();0>this.determinant()&&(g=-g);c.x=f[12];c.y=f[13];c.z=f[14];b.copy(this);c=1/g;var f=1/h,m=1/k;b.elements[0]*=c;b.elements[1]*=c;b.elements[2]*=c;b.elements[4]*=f;b.elements[5]*=f;b.elements[6]*=f;b.elements[8]*=m;b.elements[9]*=m;b.elements[10]*=m;d.setFromRotationMatrix(b);e.x=g;e.y=h;e.z=k;return this}}(),makePerspective:function(a,b,c,d,e,f){void 0===f&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");
    var g=this.elements;g[0]=2*e/(b-a);g[4]=0;g[8]=(b+a)/(b-a);g[12]=0;g[1]=0;g[5]=2*e/(c-d);g[9]=(c+d)/(c-d);g[13]=0;g[2]=0;g[6]=0;g[10]=-(f+e)/(f-e);g[14]=-2*f*e/(f-e);g[3]=0;g[7]=0;g[11]=-1;g[15]=0;return this},makeOrthographic:function(a,b,c,d,e,f){var g=this.elements,h=1/(b-a),k=1/(c-d),m=1/(f-e);g[0]=2*h;g[4]=0;g[8]=0;g[12]=-((b+a)*h);g[1]=0;g[5]=2*k;g[9]=0;g[13]=-((c+d)*k);g[2]=0;g[6]=0;g[10]=-2*m;g[14]=-((f+e)*m);g[3]=0;g[7]=0;g[11]=0;g[15]=1;return this},equals:function(a){var b=this.elements;
    a=a.elements;for(var c=0;16>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a,b){void 0===b&&(b=0);for(var c=0;16>c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a}});Object.assign(ha,{slerp:function(a,b,c,d){return c.copy(a).slerp(b,
    d)},slerpFlat:function(a,b,c,d,e,f,g){var h=c[d+0],k=c[d+1],m=c[d+2];c=c[d+3];d=e[f+0];var q=e[f+1],l=e[f+2];e=e[f+3];if(c!==e||h!==d||k!==q||m!==l){f=1-g;var u=h*d+k*q+m*l+c*e,r=0<=u?1:-1,p=1-u*u;p>Number.EPSILON&&(p=Math.sqrt(p),u=Math.atan2(p,u*r),f=Math.sin(f*u)/p,g=Math.sin(g*u)/p);r*=g;h=h*f+d*r;k=k*f+q*r;m=m*f+l*r;c=c*f+e*r;f===1-g&&(g=1/Math.sqrt(h*h+k*k+m*m+c*c),h*=g,k*=g,m*=g,c*=g)}a[b]=h;a[b+1]=k;a[b+2]=m;a[b+3]=c}});Object.defineProperties(ha.prototype,{x:{get:function(){return this._x},
    set:function(a){this._x=a;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(a){this._y=a;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(a){this._z=a;this.onChangeCallback()}},w:{get:function(){return this._w},set:function(a){this._w=a;this.onChangeCallback()}}});Object.assign(ha.prototype,{set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,
    this._w)},copy:function(a){this._x=a.x;this._y=a.y;this._z=a.z;this._w=a.w;this.onChangeCallback();return this},setFromEuler:function(a,b){if(!a||!a.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var c=a._x,d=a._y,e=a._z;a=a.order;var f=Math.cos,g=Math.sin,h=f(c/2),k=f(d/2),f=f(e/2),c=g(c/2),d=g(d/2),e=g(e/2);"XYZ"===a?(this._x=c*k*f+h*d*e,this._y=h*d*f-c*k*e,this._z=h*k*e+c*d*f,this._w=h*k*f-c*d*e):"YXZ"===a?(this._x=c*k*f+
    h*d*e,this._y=h*d*f-c*k*e,this._z=h*k*e-c*d*f,this._w=h*k*f+c*d*e):"ZXY"===a?(this._x=c*k*f-h*d*e,this._y=h*d*f+c*k*e,this._z=h*k*e+c*d*f,this._w=h*k*f-c*d*e):"ZYX"===a?(this._x=c*k*f-h*d*e,this._y=h*d*f+c*k*e,this._z=h*k*e-c*d*f,this._w=h*k*f+c*d*e):"YZX"===a?(this._x=c*k*f+h*d*e,this._y=h*d*f+c*k*e,this._z=h*k*e-c*d*f,this._w=h*k*f-c*d*e):"XZY"===a&&(this._x=c*k*f-h*d*e,this._y=h*d*f-c*k*e,this._z=h*k*e+c*d*f,this._w=h*k*f+c*d*e);if(!1!==b)this.onChangeCallback();return this},setFromAxisAngle:function(a,
    b){b/=2;var c=Math.sin(b);this._x=a.x*c;this._y=a.y*c;this._z=a.z*c;this._w=Math.cos(b);this.onChangeCallback();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var d=b[8],e=b[1],f=b[5],g=b[9],h=b[2],k=b[6],b=b[10],m=c+f+b;0<m?(c=.5/Math.sqrt(m+1),this._w=.25/c,this._x=(k-g)*c,this._y=(d-h)*c,this._z=(e-a)*c):c>f&&c>b?(c=2*Math.sqrt(1+c-f-b),this._w=(k-g)/c,this._x=.25*c,this._y=(a+e)/c,this._z=(d+h)/c):f>b?(c=2*Math.sqrt(1+f-c-b),this._w=(d-h)/c,this._x=(a+e)/c,this._y=
    .25*c,this._z=(g+k)/c):(c=2*Math.sqrt(1+b-c-f),this._w=(e-a)/c,this._x=(d+h)/c,this._y=(g+k)/c,this._z=.25*c);this.onChangeCallback();return this},setFromUnitVectors:function(){var a=new p,b;return function(c,d){void 0===a&&(a=new p);b=c.dot(d)+1;1E-6>b?(b=0,Math.abs(c.x)>Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;return this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){this._x*=
    -1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},
    multiply:function(a,b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},premultiply:function(a){return this.multiplyQuaternions(a,this)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z;a=a._w;var f=b._x,g=b._y,h=b._z;b=b._w;this._x=c*b+a*f+d*h-e*g;this._y=d*b+a*g+e*f-c*h;this._z=e*b+a*h+c*g-d*f;this._w=a*b-c*f-d*g-e*h;this.onChangeCallback();
    return this},slerp:function(a,b){if(0===b)return this;if(1===b)return this.copy(a);var c=this._x,d=this._y,e=this._z,f=this._w,g=f*a._w+c*a._x+d*a._y+e*a._z;0>g?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,g=-g):this.copy(a);if(1<=g)return this._w=f,this._x=c,this._y=d,this._z=e,this;a=Math.sqrt(1-g*g);if(.001>Math.abs(a))return this._w=.5*(f+this._w),this._x=.5*(c+this._x),this._y=.5*(d+this._y),this._z=.5*(e+this._z),this;var h=Math.atan2(a,g),g=Math.sin((1-b)*h)/a;b=Math.sin(b*h)/a;
    this._w=f*g+this._w*b;this._x=c*g+this._x*b;this._y=d*g+this._y*b;this._z=e*g+this._z*b;this.onChangeCallback();return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,b){void 0===b&&(b=0);this._x=a[b];this._y=a[b+1];this._z=a[b+2];this._w=a[b+3];this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._w;return a},onChange:function(a){this.onChangeCallback=
    a;return this},onChangeCallback:function(){}});Object.assign(p.prototype,{isVector3:!0,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setScalar:function(a){this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;
    case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},
    addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=
    a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a=new ha;return function(b){b&&b.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");
    return this.applyQuaternion(a.setFromEuler(b))}}(),applyAxisAngle:function(){var a=new ha;return function(b,c){return this.applyQuaternion(a.setFromAxisAngle(b,c))}}(),applyMatrix3:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;var e=1/(a[3]*b+a[7]*c+a[11]*d+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e;this.y=(a[1]*b+a[5]*c+
    a[9]*d+a[13])*e;this.z=(a[2]*b+a[6]*c+a[10]*d+a[14])*e;return this},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,g=a.z;a=a.w;var h=a*b+f*d-g*c,k=a*c+g*b-e*d,m=a*d+e*c-f*b,b=-e*b-f*c-g*d;this.x=h*a+b*-e+k*-g-m*-f;this.y=k*a+b*-f+m*-e-h*-g;this.z=m*a+b*-g+h*-f-k*-e;return this},project:function(){var a=new O;return function(b){a.multiplyMatrices(b.projectionMatrix,a.getInverse(b.matrixWorld));return this.applyMatrix4(a)}}(),unproject:function(){var a=new O;return function(b){a.multiplyMatrices(b.matrixWorld,
    a.getInverse(b.projectionMatrix));return this.applyMatrix4(a)}}(),transformDirection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+a[9]*d;this.z=a[2]*b+a[6]*c+a[10]*d;return this.normalize()},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=
    Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this},clampScalar:function(){var a=new p,b=new p;return function(c,d){a.set(c,c,c);b.set(d,d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=
    Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=
    -this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=(a.x-
    this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},cross:function(a,b){return void 0!==b?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b)):this.crossVectors(this,a)},crossVectors:function(a,b){var c=a.x,d=a.y;a=a.z;var e=b.x,f=b.y;b=b.z;this.x=d*b-a*f;this.y=a*e-c*b;this.z=c*f-d*e;return this},projectOnVector:function(a){var b=
    a.dot(this)/a.lengthSq();return this.copy(a).multiplyScalar(b)},projectOnPlane:function(){var a=new p;return function(b){a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a=new p;return function(b){return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=this.dot(a)/Math.sqrt(this.lengthSq()*a.lengthSq());return Math.acos(Q.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-
    a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},manhattanDistanceTo:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)},setFromSpherical:function(a){var b=Math.sin(a.phi)*a.radius;this.x=b*Math.sin(a.theta);this.y=Math.cos(a.phi)*a.radius;this.z=b*Math.cos(a.theta);return this},setFromCylindrical:function(a){this.x=a.radius*Math.sin(a.theta);this.y=a.y;this.z=a.radius*Math.cos(a.theta);return this},setFromMatrixPosition:function(a){a=a.elements;this.x=a[12];this.y=
    a[13];this.z=a[14];return this},setFromMatrixScale:function(a){var b=this.setFromMatrixColumn(a,0).length(),c=this.setFromMatrixColumn(a,1).length();a=this.setFromMatrixColumn(a,2).length();this.x=b;this.y=c;this.z=a;return this},setFromMatrixColumn:function(a,b){return this.fromArray(a.elements,4*b)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=
    []);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().");this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);return this}});Object.assign(ma.prototype,{isMatrix3:!0,set:function(a,b,c,d,e,f,g,h,k){var m=this.elements;m[0]=a;m[1]=d;m[2]=g;m[3]=b;m[4]=e;m[5]=h;m[6]=c;m[7]=f;m[8]=k;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},
    copy:function(a){var b=this.elements;a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return this},setFromMatrix4:function(a){a=a.elements;this.set(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10]);return this},applyToBufferAttribute:function(){var a=new p;return function(b){for(var c=0,d=b.count;c<d;c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix3(this),b.setXYZ(c,a.x,a.y,a.z);return b}}(),multiply:function(a){return this.multiplyMatrices(this,
    a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements;b=this.elements;a=c[0];var e=c[3],f=c[6],g=c[1],h=c[4],k=c[7],m=c[2],q=c[5],c=c[8],l=d[0],p=d[3],r=d[6],t=d[1],v=d[4],w=d[7],z=d[2],y=d[5],d=d[8];b[0]=a*l+e*t+f*z;b[3]=a*p+e*v+f*y;b[6]=a*r+e*w+f*d;b[1]=g*l+h*t+k*z;b[4]=g*p+h*v+k*y;b[7]=g*r+h*w+k*d;b[2]=m*l+q*t+c*z;b[5]=m*p+q*v+c*y;b[8]=m*r+q*w+c*d;return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;
    b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],k=a[7],a=a[8];return b*f*a-b*g*k-c*e*a+c*g*h+d*e*k-d*f*h},getInverse:function(a,b){a&&a.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var c=a.elements;a=this.elements;var d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],k=c[5],m=c[6],q=c[7],c=c[8],l=c*h-k*q,p=k*m-c*g,r=q*g-h*m,t=d*l+e*p+f*r;if(0===t){if(!0===
    b)throw Error("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");console.warn("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");return this.identity()}b=1/t;a[0]=l*b;a[1]=(f*q-c*e)*b;a[2]=(k*e-f*h)*b;a[3]=p*b;a[4]=(c*d-f*m)*b;a[5]=(f*g-k*d)*b;a[6]=r*b;a[7]=(e*m-q*d)*b;a[8]=(h*d-e*g)*b;return this},transpose:function(){var a=this.elements;var b=a[1];a[1]=a[3];a[3]=b;b=a[2];a[2]=a[6];a[6]=b;b=a[5];a[5]=a[7];a[7]=b;return this},getNormalMatrix:function(a){return this.setFromMatrix4(a).getInverse(this).transpose()},
    transposeIntoArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this},setUvTransform:function(a,b,c,d,e,f,g){var h=Math.cos(e);e=Math.sin(e);this.set(c*h,c*e,-c*(h*f+e*g)+f+a,-d*e,d*h,-d*(-e*f+h*g)+g+b,0,0,1)},scale:function(a,b){var c=this.elements;c[0]*=a;c[3]*=a;c[6]*=a;c[1]*=b;c[4]*=b;c[7]*=b;return this},rotate:function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.elements,d=c[0],e=c[3],f=c[6],g=c[1],h=c[4],
    k=c[7];c[0]=b*d+a*g;c[3]=b*e+a*h;c[6]=b*f+a*k;c[1]=-a*d+b*g;c[4]=-a*e+b*h;c[7]=-a*f+b*k;return this},translate:function(a,b){var c=this.elements;c[0]+=a*c[2];c[3]+=a*c[5];c[6]+=a*c[8];c[1]+=b*c[2];c[4]+=b*c[5];c[7]+=b*c[8];return this},equals:function(a){var b=this.elements;a=a.elements;for(var c=0;9>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a,b){void 0===b&&(b=0);for(var c=0;9>c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=
    this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];return a}});var Af=0;U.DEFAULT_IMAGE=void 0;U.DEFAULT_MAPPING=300;U.prototype=Object.assign(Object.create(za.prototype),{constructor:U,isTexture:!0,clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.name=a.name;this.image=a.image;this.mipmaps=a.mipmaps.slice(0);this.mapping=a.mapping;this.wrapS=a.wrapS;this.wrapT=a.wrapT;this.magFilter=a.magFilter;this.minFilter=
    a.minFilter;this.anisotropy=a.anisotropy;this.format=a.format;this.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.center.copy(a.center);this.rotation=a.rotation;this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrix.copy(a.matrix);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=a.premultiplyAlpha;this.flipY=a.flipY;this.unpackAlignment=a.unpackAlignment;this.encoding=a.encoding;return this},toJSON:function(a){var b=void 0===a||"string"===typeof a;if(!b&&void 0!==
    a.textures[this.uuid])return a.textures[this.uuid];var c={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var d=this.image;void 0===d.uuid&&(d.uuid=Q.generateUUID());
    if(!b&&void 0===a.images[d.uuid]){var e=a.images,f=d.uuid,g=d.uuid;if(d instanceof HTMLCanvasElement)var h=d;else{h=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");h.width=d.width;h.height=d.height;var k=h.getContext("2d");d instanceof ImageData?k.putImageData(d,0,0):k.drawImage(d,0,0,d.width,d.height)}h=2048<h.width||2048<h.height?h.toDataURL("image/jpeg",.6):h.toDataURL("image/png");e[f]={uuid:g,url:h}}c.image=d.uuid}b||(a.textures[this.uuid]=c);return c},dispose:function(){this.dispatchEvent({type:"dispose"})},
    transformUv:function(a){if(300===this.mapping){a.applyMatrix3(this.matrix);if(0>a.x||1<a.x)switch(this.wrapS){case 1E3:a.x-=Math.floor(a.x);break;case 1001:a.x=0>a.x?0:1;break;case 1002:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(0>a.y||1<a.y)switch(this.wrapT){case 1E3:a.y-=Math.floor(a.y);break;case 1001:a.y=0>a.y?0:1;break;case 1002:a.y=1===Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}this.flipY&&(a.y=1-a.y)}}});Object.defineProperty(U.prototype,
    "needsUpdate",{set:function(a){!0===a&&this.version++}});Object.assign(aa.prototype,{isVector4:!0,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},setScalar:function(a){this.w=this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=
    b;break;default:throw Error("index is out of range: "+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
    this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,
    b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;this.w-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=a[2]*b+a[6]*c+a[10]*d+a[14]*
    e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){a=a.elements;var b=a[0];var c=a[4];var d=a[8],e=a[1],f=a[5],g=a[9];var h=a[2];var k=a[6];var m=a[10];if(.01>Math.abs(c-e)&&.01>Math.abs(d-h)&&.01>Math.abs(g-k)){if(.1>Math.abs(c+
    e)&&.1>Math.abs(d+h)&&.1>Math.abs(g+k)&&.1>Math.abs(b+f+m-3))return this.set(1,0,0,0),this;a=Math.PI;b=(b+1)/2;f=(f+1)/2;m=(m+1)/2;c=(c+e)/4;d=(d+h)/4;g=(g+k)/4;b>f&&b>m?.01>b?(k=0,c=h=.707106781):(k=Math.sqrt(b),h=c/k,c=d/k):f>m?.01>f?(k=.707106781,h=0,c=.707106781):(h=Math.sqrt(f),k=c/h,c=g/h):.01>m?(h=k=.707106781,c=0):(c=Math.sqrt(m),k=d/c,h=g/c);this.set(k,h,c,a);return this}a=Math.sqrt((k-g)*(k-g)+(d-h)*(d-h)+(e-c)*(e-c));.001>Math.abs(a)&&(a=1);this.x=(k-g)/a;this.y=(d-h)/a;this.z=(e-c)/a;
    this.w=Math.acos((b+f+m-1)/2);return this},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);this.w=Math.min(this.w,a.w);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);this.w=Math.max(this.w,a.w);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));this.w=Math.max(a.w,Math.min(b.w,
    this.w));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new aa,b=new aa);a.set(c,c,c,c);b.set(d,d,d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);
    this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},
    dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=
    (a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a},fromBufferAttribute:function(a,
    b,c){void 0!==c&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().");this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);this.w=a.getW(b);return this}});kb.prototype=Object.assign(Object.create(za.prototype),{constructor:kb,isWebGLRenderTarget:!0,setSize:function(a,b){if(this.width!==a||this.height!==b)this.width=a,this.height=b,this.dispose();this.viewport.set(0,0,a,b);this.scissor.set(0,0,a,b)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.width=
    a.width;this.height=a.height;this.viewport.copy(a.viewport);this.texture=a.texture.clone();this.depthBuffer=a.depthBuffer;this.stencilBuffer=a.stencilBuffer;this.depthTexture=a.depthTexture;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Jb.prototype=Object.create(kb.prototype);Jb.prototype.constructor=Jb;Jb.prototype.isWebGLRenderTargetCube=!0;lb.prototype=Object.create(U.prototype);lb.prototype.constructor=lb;lb.prototype.isDataTexture=!0;db.prototype=Object.create(U.prototype);
    db.prototype.constructor=db;db.prototype.isCubeTexture=!0;Object.defineProperty(db.prototype,"images",{get:function(){return this.image},set:function(a){this.image=a}});var Ne=new U,Oe=new db,Ie=[],Ke=[],Me=new Float32Array(16),Le=new Float32Array(9);Se.prototype.setValue=function(a,b){for(var c=this.seq,d=0,e=c.length;d!==e;++d){var f=c[d];f.setValue(a,b[f.id])}};var Vd=/([\w\d_]+)(\])?(\[|\.)?/g;mb.prototype.setValue=function(a,b,c){b=this.map[b];void 0!==b&&b.setValue(a,c,this.renderer)};mb.prototype.setOptional=
    function(a,b,c){b=b[c];void 0!==b&&this.setValue(a,c,b)};mb.upload=function(a,b,c,d){for(var e=0,f=b.length;e!==f;++e){var g=b[e],h=c[g.id];!1!==h.needsUpdate&&g.setValue(a,h.value,d)}};mb.seqWithValue=function(a,b){for(var c=[],d=0,e=a.length;d!==e;++d){var f=a[d];f.id in b&&c.push(f)}return c};var Kg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,
    cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,
    deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,
    lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,
    mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,
    royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(H.prototype,{isColor:!0,r:1,g:1,b:1,set:function(a){a&&
    a.isColor?this.copy(a):"number"===typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a);return this},setScalar:function(a){this.b=this.g=this.r=a;return this},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(){function a(a,c,d){0>d&&(d+=1);1<d&&--d;return d<1/6?a+6*(c-a)*d:.5>d?c:d<2/3?a+6*(c-a)*(2/3-d):a}return function(b,c,d){b=Q.euclideanModulo(b,
    1);c=Q.clamp(c,0,1);d=Q.clamp(d,0,1);0===c?this.r=this.g=this.b=d:(c=.5>=d?d*(1+c):d+c-d*c,d=2*d-c,this.r=a(d,c,b+1/3),this.g=a(d,c,b),this.b=a(d,c,b-1/3));return this}}(),setStyle:function(a){function b(b){void 0!==b&&1>parseFloat(b)&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}var c;if(c=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(a)){var d=c[2];switch(c[1]){case "rgb":case "rgba":if(c=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=Math.min(255,
    parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,b(c[5]),this;if(c=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,b(c[5]),this;break;case "hsl":case "hsla":if(c=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d)){var d=parseFloat(c[1])/360,
    e=parseInt(c[2],10)/100,f=parseInt(c[3],10)/100;b(c[5]);return this.setHSL(d,e,f)}}}else if(c=/^\#([A-Fa-f0-9]+)$/.exec(a)){c=c[1];d=c.length;if(3===d)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===d)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}a&&0<a.length&&(c=Kg[a],void 0!==
    c?this.setHex(c):console.warn("THREE.Color: Unknown color "+a));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(a){this.r=a.r;this.g=a.g;this.b=a.b;return this},copyGammaToLinear:function(a,b){void 0===b&&(b=2);this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this},copyLinearToGamma:function(a,b){void 0===b&&(b=2);b=0<b?1/b:1;this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this},convertGammaToLinear:function(){var a=
    this.r,b=this.g,c=this.b;this.r=a*a;this.g=b*b;this.b=c*c;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){a=a||{h:0,s:0,l:0};var b=this.r,c=this.g,d=this.b,e=Math.max(b,c,d),f=Math.min(b,c,d),g,h=(f+e)/2;if(f===e)f=g=0;else{var k=e-f,f=.5>=h?k/(e+f):
    k/(2-e-f);switch(e){case b:g=(c-d)/k+(c<d?6:0);break;case c:g=(d-b)/k+2;break;case d:g=(b-c)/k+4}g/=6}a.h=g;a.s=f;a.l=h;return a},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(a,b,c){var d=this.getHSL();d.h+=a;d.s+=b;d.l+=c;this.setHSL(d.h,d.s,d.l);return this},add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this},addScalar:function(a){this.r+=
    a;this.g+=a;this.b+=a;return this},sub:function(a){this.r=Math.max(0,this.r-a.r);this.g=Math.max(0,this.g-a.g);this.b=Math.max(0,this.b-a.b);return this},multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=a;this.b*=a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a,b){void 0===b&&(b=
    0);this.r=a[b];this.g=a[b+1];this.b=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.r;a[b+1]=this.g;a[b+2]=this.b;return a},toJSON:function(){return this.getHex()}});var K={common:{diffuse:{value:new H(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new ma},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},
    aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new D(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:2.5E-4},fogNear:{value:1},
    fogFar:{value:2E3},fogColor:{value:new H(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},
    pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new H(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new ma}}},
    Ga={merge:function(a){for(var b={},c=0;c<a.length;c++){var d=this.clone(a[c]),e;for(e in d)b[e]=d[e]}return b},clone:function(a){var b={},c;for(c in a){b[c]={};for(var d in a[c]){var e=a[c][d];e&&(e.isColor||e.isMatrix3||e.isMatrix4||e.isVector2||e.isVector3||e.isVector4||e.isTexture)?b[c][d]=e.clone():Array.isArray(e)?b[c][d]=e.slice():b[c][d]=e}}return b}},R={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",
    alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",
    aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.86267 + (0.49788 + 0.01436 * y ) * y;\n\tfloat b = 3.45068 + (4.18814 + y) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tvec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );\n\treturn result;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",
    bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",
    clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",
    clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",
    color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",
    cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",
    defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",
    emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",
    envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",
    envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",
    envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",
    fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",
    gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",
    lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",
    lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",
    lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",
    lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",
    lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tfloat norm = texture2D( ltcMag, uv ).a;\n\t\tvec4 t = texture2D( ltcMat, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3(   1,   0, t.y ),\n\t\t\tvec3(   0, t.z,   0 ),\n\t\t\tvec3( t.w,   0, t.x )\n\t\t);\n\t\treflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",
    lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",
    logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",
    map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",
    metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",
    morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",
    normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",
    normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",
    packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",
    premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",
    roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",
    shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",
    shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",
    shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",
    skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",
    skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",
    specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",
    uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",
    uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",
    uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",
    cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",
    depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",
    distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",
    distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",
    equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",
    linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
    linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",
    meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
    meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",
    meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",
    meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
    meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",
    meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
    meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",
    meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
    normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",
    normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",
    points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
    points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
    shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},
    tb={basic:{uniforms:Ga.merge([K.common,K.specularmap,K.envmap,K.aomap,K.lightmap,K.fog]),vertexShader:R.meshbasic_vert,fragmentShader:R.meshbasic_frag},lambert:{uniforms:Ga.merge([K.common,K.specularmap,K.envmap,K.aomap,K.lightmap,K.emissivemap,K.fog,K.lights,{emissive:{value:new H(0)}}]),vertexShader:R.meshlambert_vert,fragmentShader:R.meshlambert_frag},phong:{uniforms:Ga.merge([K.common,K.specularmap,K.envmap,K.aomap,K.lightmap,K.emissivemap,K.bumpmap,K.normalmap,K.displacementmap,K.gradientmap,
    K.fog,K.lights,{emissive:{value:new H(0)},specular:{value:new H(1118481)},shininess:{value:30}}]),vertexShader:R.meshphong_vert,fragmentShader:R.meshphong_frag},standard:{uniforms:Ga.merge([K.common,K.envmap,K.aomap,K.lightmap,K.emissivemap,K.bumpmap,K.normalmap,K.displacementmap,K.roughnessmap,K.metalnessmap,K.fog,K.lights,{emissive:{value:new H(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:R.meshphysical_vert,fragmentShader:R.meshphysical_frag},points:{uniforms:Ga.merge([K.points,
    K.fog]),vertexShader:R.points_vert,fragmentShader:R.points_frag},dashed:{uniforms:Ga.merge([K.common,K.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:R.linedashed_vert,fragmentShader:R.linedashed_frag},depth:{uniforms:Ga.merge([K.common,K.displacementmap]),vertexShader:R.depth_vert,fragmentShader:R.depth_frag},normal:{uniforms:Ga.merge([K.common,K.bumpmap,K.normalmap,K.displacementmap,{opacity:{value:1}}]),vertexShader:R.normal_vert,fragmentShader:R.normal_frag},cube:{uniforms:{tCube:{value:null},
    tFlip:{value:-1},opacity:{value:1}},vertexShader:R.cube_vert,fragmentShader:R.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:R.equirect_vert,fragmentShader:R.equirect_frag},distanceRGBA:{uniforms:Ga.merge([K.common,K.displacementmap,{referencePosition:{value:new p},nearDistance:{value:1},farDistance:{value:1E3}}]),vertexShader:R.distanceRGBA_vert,fragmentShader:R.distanceRGBA_frag},shadow:{uniforms:Ga.merge([K.lights,K.fog,{color:{value:new H(0)},opacity:{value:1}}]),vertexShader:R.shadow_vert,
    fragmentShader:R.shadow_frag}};tb.physical={uniforms:Ga.merge([tb.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:R.meshphysical_vert,fragmentShader:R.meshphysical_frag};Object.assign(od.prototype,{set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new D;return function(b,c){c=a.copy(c).multiplyScalar(.5);
    this.min.copy(b).sub(c);this.max.copy(b).add(c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(a){a=a||new D;return this.isEmpty()?a.set(0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){a=
    a||new D;return this.isEmpty()?a.set(0,0):a.subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=
    this.max.y},getParameter:function(a,b){return(b||new D).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0},clampPoint:function(a,b){return(b||new D).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new D;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);
    this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}});tc.prototype=Object.create(U.prototype);tc.prototype.constructor=tc;var ag=0;P.prototype=Object.assign(Object.create(za.prototype),{constructor:P,isMaterial:!0,onBeforeCompile:function(){},setValues:function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0===
    c)console.warn("THREE.Material: '"+b+"' parameter is undefined.");else if("shading"===b)console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===c?!0:!1;else{var d=this[b];void 0===d?console.warn("THREE."+this.type+": '"+b+"' is not a property of this material."):d&&d.isColor?d.set(c):d&&d.isVector3&&c&&c.isVector3?d.copy(c):this[b]="overdraw"===b?Number(c):c}}},toJSON:function(a){function b(a){var b=[],c;for(c in a){var d=a[c];delete d.metadata;
    b.push(d)}return b}var c=void 0===a||"string"===typeof a;c&&(a={textures:{},images:{}});var d={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};d.uuid=this.uuid;d.type=this.type;""!==this.name&&(d.name=this.name);this.color&&this.color.isColor&&(d.color=this.color.getHex());void 0!==this.roughness&&(d.roughness=this.roughness);void 0!==this.metalness&&(d.metalness=this.metalness);this.emissive&&this.emissive.isColor&&(d.emissive=this.emissive.getHex());1!==this.emissiveIntensity&&
    (d.emissiveIntensity=this.emissiveIntensity);this.specular&&this.specular.isColor&&(d.specular=this.specular.getHex());void 0!==this.shininess&&(d.shininess=this.shininess);void 0!==this.clearCoat&&(d.clearCoat=this.clearCoat);void 0!==this.clearCoatRoughness&&(d.clearCoatRoughness=this.clearCoatRoughness);this.map&&this.map.isTexture&&(d.map=this.map.toJSON(a).uuid);this.alphaMap&&this.alphaMap.isTexture&&(d.alphaMap=this.alphaMap.toJSON(a).uuid);this.lightMap&&this.lightMap.isTexture&&(d.lightMap=
    this.lightMap.toJSON(a).uuid);this.bumpMap&&this.bumpMap.isTexture&&(d.bumpMap=this.bumpMap.toJSON(a).uuid,d.bumpScale=this.bumpScale);this.normalMap&&this.normalMap.isTexture&&(d.normalMap=this.normalMap.toJSON(a).uuid,d.normalScale=this.normalScale.toArray());this.displacementMap&&this.displacementMap.isTexture&&(d.displacementMap=this.displacementMap.toJSON(a).uuid,d.displacementScale=this.displacementScale,d.displacementBias=this.displacementBias);this.roughnessMap&&this.roughnessMap.isTexture&&
    (d.roughnessMap=this.roughnessMap.toJSON(a).uuid);this.metalnessMap&&this.metalnessMap.isTexture&&(d.metalnessMap=this.metalnessMap.toJSON(a).uuid);this.emissiveMap&&this.emissiveMap.isTexture&&(d.emissiveMap=this.emissiveMap.toJSON(a).uuid);this.specularMap&&this.specularMap.isTexture&&(d.specularMap=this.specularMap.toJSON(a).uuid);this.envMap&&this.envMap.isTexture&&(d.envMap=this.envMap.toJSON(a).uuid,d.reflectivity=this.reflectivity);this.gradientMap&&this.gradientMap.isTexture&&(d.gradientMap=
    this.gradientMap.toJSON(a).uuid);void 0!==this.size&&(d.size=this.size);void 0!==this.sizeAttenuation&&(d.sizeAttenuation=this.sizeAttenuation);1!==this.blending&&(d.blending=this.blending);!0===this.flatShading&&(d.flatShading=this.flatShading);0!==this.side&&(d.side=this.side);0!==this.vertexColors&&(d.vertexColors=this.vertexColors);1>this.opacity&&(d.opacity=this.opacity);!0===this.transparent&&(d.transparent=this.transparent);d.depthFunc=this.depthFunc;d.depthTest=this.depthTest;d.depthWrite=
    this.depthWrite;0!==this.rotation&&(d.rotation=this.rotation);1!==this.linewidth&&(d.linewidth=this.linewidth);void 0!==this.dashSize&&(d.dashSize=this.dashSize);void 0!==this.gapSize&&(d.gapSize=this.gapSize);void 0!==this.scale&&(d.scale=this.scale);!0===this.dithering&&(d.dithering=!0);0<this.alphaTest&&(d.alphaTest=this.alphaTest);!0===this.premultipliedAlpha&&(d.premultipliedAlpha=this.premultipliedAlpha);!0===this.wireframe&&(d.wireframe=this.wireframe);1<this.wireframeLinewidth&&(d.wireframeLinewidth=
    this.wireframeLinewidth);"round"!==this.wireframeLinecap&&(d.wireframeLinecap=this.wireframeLinecap);"round"!==this.wireframeLinejoin&&(d.wireframeLinejoin=this.wireframeLinejoin);!0===this.morphTargets&&(d.morphTargets=!0);!0===this.skinning&&(d.skinning=!0);!1===this.visible&&(d.visible=!1);"{}"!==JSON.stringify(this.userData)&&(d.userData=this.userData);c&&(c=b(a.textures),a=b(a.images),0<c.length&&(d.textures=c),0<a.length&&(d.images=a));return d},clone:function(){return(new this.constructor).copy(this)},
    copy:function(a){this.name=a.name;this.fog=a.fog;this.lights=a.lights;this.blending=a.blending;this.side=a.side;this.flatShading=a.flatShading;this.vertexColors=a.vertexColors;this.opacity=a.opacity;this.transparent=a.transparent;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=a.blendDstAlpha;this.blendEquationAlpha=a.blendEquationAlpha;this.depthFunc=a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;
    this.colorWrite=a.colorWrite;this.precision=a.precision;this.polygonOffset=a.polygonOffset;this.polygonOffsetFactor=a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;this.dithering=a.dithering;this.alphaTest=a.alphaTest;this.premultipliedAlpha=a.premultipliedAlpha;this.overdraw=a.overdraw;this.visible=a.visible;this.userData=JSON.parse(JSON.stringify(a.userData));this.clipShadows=a.clipShadows;this.clipIntersection=a.clipIntersection;a=a.clippingPlanes;var b=null;if(null!==a)for(var c=
    a.length,b=Array(c),d=0;d!==c;++d)b[d]=a[d].clone();this.clippingPlanes=b;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});eb.prototype=Object.create(P.prototype);eb.prototype.constructor=eb;eb.prototype.isMeshDepthMaterial=!0;eb.prototype.copy=function(a){P.prototype.copy.call(this,a);this.depthPacking=a.depthPacking;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=
    a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this};fb.prototype=Object.create(P.prototype);fb.prototype.constructor=fb;fb.prototype.isMeshDistanceMaterial=!0;fb.prototype.copy=function(a){P.prototype.copy.call(this,a);this.referencePosition.copy(a.referencePosition);this.nearDistance=a.nearDistance;this.farDistance=a.farDistance;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=
    a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;return this};Object.assign(Xa.prototype,{isBox3:!0,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromArray:function(a){for(var b=Infinity,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=-Infinity,h=0,k=a.length;h<k;h+=3){var m=a[h],q=a[h+1],l=a[h+2];m<b&&(b=m);q<c&&(c=q);l<d&&(d=l);m>e&&(e=m);q>f&&(f=q);l>g&&(g=l)}this.min.set(b,c,d);this.max.set(e,
    f,g);return this},setFromBufferAttribute:function(a){for(var b=Infinity,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=-Infinity,h=0,k=a.count;h<k;h++){var m=a.getX(h),q=a.getY(h),l=a.getZ(h);m<b&&(b=m);q<c&&(c=q);l<d&&(d=l);m>e&&(e=m);q>f&&(f=q);l>g&&(g=l)}this.min.set(b,c,d);this.max.set(e,f,g);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new p;return function(b,c){c=a.copy(c).multiplyScalar(.5);
    this.min.copy(b).sub(c);this.max.copy(b).add(c);return this}}(),setFromObject:function(a){this.makeEmpty();return this.expandByObject(a)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(a){a=
    a||new p;return this.isEmpty()?a.set(0,0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){a=a||new p;return this.isEmpty()?a.set(0,0,0):a.subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},expandByObject:function(){function a(a){var f=a.geometry;if(void 0!==f)if(f.isGeometry)for(f=
    f.vertices,c=0,d=f.length;c<d;c++)e.copy(f[c]),e.applyMatrix4(a.matrixWorld),b.expandByPoint(e);else if(f.isBufferGeometry&&(f=f.attributes.position,void 0!==f))for(c=0,d=f.count;c<d;c++)e.fromBufferAttribute(f,c).applyMatrix4(a.matrixWorld),b.expandByPoint(e)}var b,c,d,e=new p;return function(c){b=this;c.updateMatrixWorld(!0);c.traverse(a);return this}}(),containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=
    a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z},getParameter:function(a,b){return(b||new p).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},intersectsSphere:function(){var a=new p;return function(b){this.clampPoint(b.center,
    a);return a.distanceToSquared(b.center)<=b.radius*b.radius}}(),intersectsPlane:function(a){if(0<a.normal.x){var b=a.normal.x*this.min.x;var c=a.normal.x*this.max.x}else b=a.normal.x*this.max.x,c=a.normal.x*this.min.x;0<a.normal.y?(b+=a.normal.y*this.min.y,c+=a.normal.y*this.max.y):(b+=a.normal.y*this.max.y,c+=a.normal.y*this.min.y);0<a.normal.z?(b+=a.normal.z*this.min.z,c+=a.normal.z*this.max.z):(b+=a.normal.z*this.max.z,c+=a.normal.z*this.min.z);return b<=a.constant&&c>=a.constant},clampPoint:function(a,
    b){return(b||new p).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new p;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=new p;return function(b){b=b||new Ia;this.getCenter(b.center);b.radius=.5*this.getSize(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);this.isEmpty()&&this.makeEmpty();return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=
    [new p,new p,new p,new p,new p,new p,new p,new p];return function(b){if(this.isEmpty())return this;a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);
    a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.setFromPoints(a);return this}}(),translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}});Object.assign(Ia.prototype,{set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new Xa;return function(b,c){var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).getCenter(d);for(var e=c=0,f=b.length;e<f;e++)c=Math.max(c,
    d.distanceToSquared(b[e]));this.radius=Math.sqrt(c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},empty:function(){return 0>=this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=
    b*b},intersectsBox:function(a){return a.intersectsSphere(this)},intersectsPlane:function(a){return Math.abs(a.distanceToPoint(this.center))<=this.radius},clampPoint:function(a,b){var c=this.center.distanceToSquared(a);b=b||new p;b.copy(a);c>this.radius*this.radius&&(b.sub(this.center).normalize(),b.multiplyScalar(this.radius).add(this.center));return b},getBoundingBox:function(a){a=a||new Xa;a.set(this.center,this.center);a.expandByScalar(this.radius);return a},applyMatrix4:function(a){this.center.applyMatrix4(a);
    this.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius}});Object.assign(Ea.prototype,{set:function(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function(a,b,c,d){this.normal.set(a,b,c);this.constant=d;return this},setFromNormalAndCoplanarPoint:function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=
    new p,b=new p;return function(c,d,e){d=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize();this.setFromNormalAndCoplanarPoint(d,c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+
    this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){return(b||new p).copy(this.normal).multiplyScalar(-this.distanceToPoint(a)).add(a)},intersectLine:function(){var a=new p;return function(b,c){c=c||new p;var d=b.delta(a),e=this.normal.dot(d);if(0===e){if(0===this.distanceToPoint(b.start))return c.copy(b.start)}else if(e=-(b.start.dot(this.normal)+this.constant)/e,!(0>e||1<e))return c.copy(d).multiplyScalar(e).add(b.start)}}(),intersectsLine:function(a){var b=
    this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b},intersectsBox:function(a){return a.intersectsPlane(this)},intersectsSphere:function(a){return a.intersectsPlane(this)},coplanarPoint:function(a){return(a||new p).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new p,b=new ma;return function(c,d){d=d||b.getNormalMatrix(c);c=this.coplanarPoint(a).applyMatrix4(c);d=this.normal.applyMatrix3(d).normalize();this.constant=-c.dot(d);return this}}(),
    translate:function(a){this.constant-=a.dot(this.normal);return this},equals:function(a){return a.normal.equals(this.normal)&&a.constant===this.constant}});Object.assign(rd.prototype,{set:function(a,b,c,d,e,f){var g=this.planes;g[0].copy(a);g[1].copy(b);g[2].copy(c);g[3].copy(d);g[4].copy(e);g[5].copy(f);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,
    c=a.elements;a=c[0];var d=c[1],e=c[2],f=c[3],g=c[4],h=c[5],k=c[6],m=c[7],q=c[8],l=c[9],p=c[10],r=c[11],t=c[12],v=c[13],w=c[14],c=c[15];b[0].setComponents(f-a,m-g,r-q,c-t).normalize();b[1].setComponents(f+a,m+g,r+q,c+t).normalize();b[2].setComponents(f+d,m+h,r+l,c+v).normalize();b[3].setComponents(f-d,m-h,r-l,c-v).normalize();b[4].setComponents(f-e,m-k,r-p,c-w).normalize();b[5].setComponents(f+e,m+k,r+p,c+w).normalize();return this},intersectsObject:function(){var a=new Ia;return function(b){var c=
    b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere).applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSprite:function(){var a=new Ia;return function(b){a.center.set(0,0,0);a.radius=.7071067811865476;a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSphere:function(a){var b=this.planes,c=a.center;a=-a.radius;for(var d=0;6>d;d++)if(b[d].distanceToPoint(c)<a)return!1;return!0},intersectsBox:function(){var a=new p,b=
    new p;return function(c){for(var d=this.planes,e=0;6>e;e++){var f=d[e];a.x=0<f.normal.x?c.min.x:c.max.x;b.x=0<f.normal.x?c.max.x:c.min.x;a.y=0<f.normal.y?c.min.y:c.max.y;b.y=0<f.normal.y?c.max.y:c.min.y;a.z=0<f.normal.z?c.min.z:c.max.z;b.z=0<f.normal.z?c.max.z:c.min.z;var g=f.distanceToPoint(a),f=f.distanceToPoint(b);if(0>g&&0>f)return!1}return!0}}(),containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0}});gb.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");
    gb.DefaultOrder="XYZ";Object.defineProperties(gb.prototype,{x:{get:function(){return this._x},set:function(a){this._x=a;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(a){this._y=a;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(a){this._z=a;this.onChangeCallback()}},order:{get:function(){return this._order},set:function(a){this._order=a;this.onChangeCallback()}}});Object.assign(gb.prototype,{isEuler:!0,set:function(a,b,c,d){this._x=a;this._y=b;this._z=
    c;this._order=d||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return this},setFromRotationMatrix:function(a,b,c){var d=Q.clamp,e=a.elements;a=e[0];var f=e[4],g=e[8],h=e[1],k=e[5],m=e[9],l=e[2],n=e[6],e=e[10];b=b||this._order;"XYZ"===b?(this._y=Math.asin(d(g,-1,1)),.99999>Math.abs(g)?(this._x=Math.atan2(-m,e),this._z=
    Math.atan2(-f,a)):(this._x=Math.atan2(n,k),this._z=0)):"YXZ"===b?(this._x=Math.asin(-d(m,-1,1)),.99999>Math.abs(m)?(this._y=Math.atan2(g,e),this._z=Math.atan2(h,k)):(this._y=Math.atan2(-l,a),this._z=0)):"ZXY"===b?(this._x=Math.asin(d(n,-1,1)),.99999>Math.abs(n)?(this._y=Math.atan2(-l,e),this._z=Math.atan2(-f,k)):(this._y=0,this._z=Math.atan2(h,a))):"ZYX"===b?(this._y=Math.asin(-d(l,-1,1)),.99999>Math.abs(l)?(this._x=Math.atan2(n,e),this._z=Math.atan2(h,a)):(this._x=0,this._z=Math.atan2(-f,k))):"YZX"===
    b?(this._z=Math.asin(d(h,-1,1)),.99999>Math.abs(h)?(this._x=Math.atan2(-m,k),this._y=Math.atan2(-l,a)):(this._x=0,this._y=Math.atan2(g,e))):"XZY"===b?(this._z=Math.asin(-d(f,-1,1)),.99999>Math.abs(f)?(this._x=Math.atan2(n,k),this._y=Math.atan2(g,a)):(this._x=Math.atan2(-m,e),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+b);this._order=b;if(!1!==c)this.onChangeCallback();return this},setFromQuaternion:function(){var a=new O;return function(b,c,d){a.makeRotationFromQuaternion(b);
    return this.setFromRotationMatrix(a,c,d)}}(),setFromVector3:function(a,b){return this.set(a.x,a.y,a.z,b||this._order)},reorder:function(){var a=new ha;return function(b){a.setFromEuler(this);return this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);
    void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._order;return a},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new p(this._x,this._y,this._z)},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}});Object.assign(Wd.prototype,{set:function(a){this.mask=1<<a|0},enable:function(a){this.mask=this.mask|1<<a|0},toggle:function(a){this.mask^=1<<a|0},disable:function(a){this.mask&=~(1<<a|0)},test:function(a){return 0!==(this.mask&
    a.mask)}});var cg=0;x.DefaultUp=new p(0,1,0);x.DefaultMatrixAutoUpdate=!0;x.prototype=Object.assign(Object.create(za.prototype),{constructor:x,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(a){this.quaternion.premultiply(a);return this},setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,
    !0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new ha;return function(b,c){a.setFromAxisAngle(b,c);this.quaternion.multiply(a);return this}}(),rotateOnWorldAxis:function(){var a=new ha;return function(b,c){a.setFromAxisAngle(b,c);this.quaternion.premultiply(a);return this}}(),rotateX:function(){var a=new p(1,0,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateY:function(){var a=
    new p(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=new p(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new p;return function(b,c){a.copy(b).applyQuaternion(this.quaternion);this.position.add(a.multiplyScalar(c));return this}}(),translateX:function(){var a=new p(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new p(0,1,0);return function(b){return this.translateOnAxis(a,
    b)}}(),translateZ:function(){var a=new p(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new O;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new O,b=new p;return function(c,d,e){c.isVector3?b.copy(c):b.set(c,d,e);this.isCamera?a.lookAt(this.position,b,this.up):a.lookAt(b,this.position,this.up);this.quaternion.setFromRotationMatrix(a)}}(),
    add:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this;a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),this.children.push(a)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a);return this},remove:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);
    return this}b=this.children.indexOf(a);-1!==b&&(a.parent=null,a.dispatchEvent({type:"removed"}),this.children.splice(b,1));return this},getObjectById:function(a){return this.getObjectByProperty("id",a)},getObjectByName:function(a){return this.getObjectByProperty("name",a)},getObjectByProperty:function(a,b){if(this[a]===b)return this;for(var c=0,d=this.children.length;c<d;c++){var e=this.children[c].getObjectByProperty(a,b);if(void 0!==e)return e}},getWorldPosition:function(a){a=a||new p;this.updateMatrixWorld(!0);
    return a.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var a=new p,b=new p;return function(c){c=c||new ha;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,c,b);return c}}(),getWorldRotation:function(){var a=new ha;return function(b){b=b||new gb;this.getWorldQuaternion(a);return b.setFromQuaternion(a,this.rotation.order,!1)}}(),getWorldScale:function(){var a=new p,b=new ha;return function(c){c=c||new p;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,b,c);return c}}(),
    getWorldDirection:function(){var a=new ha;return function(b){b=b||new p;this.getWorldQuaternion(a);return b.set(0,0,1).applyQuaternion(a)}}(),raycast:function(){},traverse:function(a){a(this);for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].traverse(a)},traverseVisible:function(a){if(!1!==this.visible){a(this);for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].traverseVisible(a)}},traverseAncestors:function(a){var b=this.parent;null!==b&&(a(b),b.traverseAncestors(a))},updateMatrix:function(){this.matrix.compose(this.position,
    this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||a)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].updateMatrixWorld(a)},toJSON:function(a){function b(b,c){void 0===b[c.uuid]&&(b[c.uuid]=c.toJSON(a));return c.uuid}function c(a){var b=
    [],c;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var d=void 0===a||"string"===typeof a,e={};d&&(a={geometries:{},materials:{},textures:{},images:{},shapes:{}},e.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var f={};f.uuid=this.uuid;f.type=this.type;""!==this.name&&(f.name=this.name);!0===this.castShadow&&(f.castShadow=!0);!0===this.receiveShadow&&(f.receiveShadow=!0);!1===this.visible&&(f.visible=!1);"{}"!==JSON.stringify(this.userData)&&(f.userData=this.userData);
    f.matrix=this.matrix.toArray();if(void 0!==this.geometry){f.geometry=b(a.geometries,this.geometry);var g=this.geometry.parameters;if(void 0!==g&&void 0!==g.shapes)if(g=g.shapes,Array.isArray(g))for(var h=0,k=g.length;h<k;h++)b(a.shapes,g[h]);else b(a.shapes,g)}if(void 0!==this.material)if(Array.isArray(this.material)){g=[];h=0;for(k=this.material.length;h<k;h++)g.push(b(a.materials,this.material[h]));f.material=g}else f.material=b(a.materials,this.material);if(0<this.children.length)for(f.children=
    [],h=0;h<this.children.length;h++)f.children.push(this.children[h].toJSON(a).object);if(d){var d=c(a.geometries),h=c(a.materials),k=c(a.textures),m=c(a.images);g=c(a.shapes);0<d.length&&(e.geometries=d);0<h.length&&(e.materials=h);0<k.length&&(e.textures=k);0<m.length&&(e.images=m);0<g.length&&(e.shapes=g)}e.object=f;return e},clone:function(a){return(new this.constructor).copy(this,a)},copy:function(a,b){void 0===b&&(b=!0);this.name=a.name;this.up.copy(a.up);this.position.copy(a.position);this.quaternion.copy(a.quaternion);
    this.scale.copy(a.scale);this.matrix.copy(a.matrix);this.matrixWorld.copy(a.matrixWorld);this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate;this.layers.mask=a.layers.mask;this.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;this.userData=JSON.parse(JSON.stringify(a.userData));if(!0===b)for(b=0;b<a.children.length;b++)this.add(a.children[b].clone());return this}});
    Ta.prototype=Object.assign(Object.create(x.prototype),{constructor:Ta,isCamera:!0,copy:function(a,b){x.prototype.copy.call(this,a,b);this.matrixWorldInverse.copy(a.matrixWorldInverse);this.projectionMatrix.copy(a.projectionMatrix);return this},getWorldDirection:function(){var a=new ha;return function(b){b=b||new p;this.getWorldQuaternion(a);return b.set(0,0,-1).applyQuaternion(a)}}(),updateMatrixWorld:function(a){x.prototype.updateMatrixWorld.call(this,a);this.matrixWorldInverse.getInverse(this.matrixWorld)},
    clone:function(){return(new this.constructor).copy(this)}});Lb.prototype=Object.assign(Object.create(Ta.prototype),{constructor:Lb,isOrthographicCamera:!0,copy:function(a,b){Ta.prototype.copy.call(this,a,b);this.left=a.left;this.right=a.right;this.top=a.top;this.bottom=a.bottom;this.near=a.near;this.far=a.far;this.zoom=a.zoom;this.view=null===a.view?null:Object.assign({},a.view);return this},setViewOffset:function(a,b,c,d,e,f){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,
    offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=a;this.view.fullHeight=b;this.view.offsetX=c;this.view.offsetY=d;this.view.width=e;this.view.height=f;this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=(this.right-this.left)/(2*this.zoom),b=(this.top-this.bottom)/(2*this.zoom),c=(this.right+this.left)/2,d=(this.top+this.bottom)/2,e=c-a,c=c+a,a=d+b,b=d-b;if(null!==
    this.view&&this.view.enabled)var c=this.zoom/(this.view.width/this.view.fullWidth),b=this.zoom/(this.view.height/this.view.fullHeight),f=(this.right-this.left)/this.view.width,d=(this.top-this.bottom)/this.view.height,e=e+this.view.offsetX/c*f,c=e+this.view.width/c*f,a=a-this.view.offsetY/b*d,b=a-this.view.height/b*d;this.projectionMatrix.makeOrthographic(e,c,a,b,this.near,this.far)},toJSON:function(a){a=x.prototype.toJSON.call(this,a);a.object.zoom=this.zoom;a.object.left=this.left;a.object.right=
    this.right;a.object.top=this.top;a.object.bottom=this.bottom;a.object.near=this.near;a.object.far=this.far;null!==this.view&&(a.object.view=Object.assign({},this.view));return a}});Object.assign(Ya.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.normal.copy(a.normal);this.color.copy(a.color);this.materialIndex=a.materialIndex;for(var b=0,c=a.vertexNormals.length;b<c;b++)this.vertexNormals[b]=a.vertexNormals[b].clone();b=0;
    for(c=a.vertexColors.length;b<c;b++)this.vertexColors[b]=a.vertexColors[b].clone();return this}});var dg=0;L.prototype=Object.assign(Object.create(za.prototype),{constructor:L,isGeometry:!0,applyMatrix:function(a){for(var b=(new ma).getNormalMatrix(a),c=0,d=this.vertices.length;c<d;c++)this.vertices[c].applyMatrix4(a);c=0;for(d=this.faces.length;c<d;c++){a=this.faces[c];a.normal.applyMatrix3(b).normalize();for(var e=0,f=a.vertexNormals.length;e<f;e++)a.vertexNormals[e].applyMatrix3(b).normalize()}null!==
    this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();this.normalsNeedUpdate=this.verticesNeedUpdate=!0;return this},rotateX:function(){var a=new O;return function(b){a.makeRotationX(b);this.applyMatrix(a);return this}}(),rotateY:function(){var a=new O;return function(b){a.makeRotationY(b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a=new O;return function(b){a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a=
    new O;return function(b,c,d){a.makeTranslation(b,c,d);this.applyMatrix(a);return this}}(),scale:function(){var a=new O;return function(b,c,d){a.makeScale(b,c,d);this.applyMatrix(a);return this}}(),lookAt:function(){var a=new x;return function(b){a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),fromBufferGeometry:function(a){function b(a,b,d,e){var f=void 0!==g?[l[a].clone(),l[b].clone(),l[d].clone()]:[],q=void 0!==h?[c.colors[a].clone(),c.colors[b].clone(),c.colors[d].clone()]:[];e=new Ya(a,
    b,d,f,q,e);c.faces.push(e);void 0!==k&&c.faceVertexUvs[0].push([n[a].clone(),n[b].clone(),n[d].clone()]);void 0!==m&&c.faceVertexUvs[1].push([u[a].clone(),u[b].clone(),u[d].clone()])}var c=this,d=null!==a.index?a.index.array:void 0,e=a.attributes,f=e.position.array,g=void 0!==e.normal?e.normal.array:void 0,h=void 0!==e.color?e.color.array:void 0,k=void 0!==e.uv?e.uv.array:void 0,m=void 0!==e.uv2?e.uv2.array:void 0;void 0!==m&&(this.faceVertexUvs[1]=[]);for(var l=[],n=[],u=[],r=e=0;e<f.length;e+=3,
    r+=2)c.vertices.push(new p(f[e],f[e+1],f[e+2])),void 0!==g&&l.push(new p(g[e],g[e+1],g[e+2])),void 0!==h&&c.colors.push(new H(h[e],h[e+1],h[e+2])),void 0!==k&&n.push(new D(k[r],k[r+1])),void 0!==m&&u.push(new D(m[r],m[r+1]));var t=a.groups;if(0<t.length)for(e=0;e<t.length;e++)for(var f=t[e],v=f.start,w=f.count,r=v,v=v+w;r<v;r+=3)void 0!==d?b(d[r],d[r+1],d[r+2],f.materialIndex):b(r,r+1,r+2,f.materialIndex);else if(void 0!==d)for(e=0;e<d.length;e+=3)b(d[e],d[e+1],d[e+2]);else for(e=0;e<f.length/3;e+=
    3)b(e,e+1,e+2);this.computeFaceNormals();null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());return this},center:function(){this.computeBoundingBox();var a=this.boundingBox.getCenter().negate();this.translate(a.x,a.y,a.z);return a},normalize:function(){this.computeBoundingSphere();var a=this.boundingSphere.center,b=this.boundingSphere.radius,b=0===b?1:1/b,c=new O;c.set(b,0,0,-b*a.x,0,b,0,-b*a.y,0,0,b,-b*a.z,0,0,0,1);
    this.applyMatrix(c);return this},computeFaceNormals:function(){for(var a=new p,b=new p,c=0,d=this.faces.length;c<d;c++){var e=this.faces[c],f=this.vertices[e.a],g=this.vertices[e.b];a.subVectors(this.vertices[e.c],g);b.subVectors(f,g);a.cross(b);a.normalize();e.normal.copy(a)}},computeVertexNormals:function(a){void 0===a&&(a=!0);var b;var c=Array(this.vertices.length);var d=0;for(b=this.vertices.length;d<b;d++)c[d]=new p;if(a){var e=new p,f=new p;a=0;for(d=this.faces.length;a<d;a++){b=this.faces[a];
    var g=this.vertices[b.a];var h=this.vertices[b.b];var k=this.vertices[b.c];e.subVectors(k,h);f.subVectors(g,h);e.cross(f);c[b.a].add(e);c[b.b].add(e);c[b.c].add(e)}}else for(this.computeFaceNormals(),a=0,d=this.faces.length;a<d;a++)b=this.faces[a],c[b.a].add(b.normal),c[b.b].add(b.normal),c[b.c].add(b.normal);d=0;for(b=this.vertices.length;d<b;d++)c[d].normalize();a=0;for(d=this.faces.length;a<d;a++)b=this.faces[a],g=b.vertexNormals,3===g.length?(g[0].copy(c[b.a]),g[1].copy(c[b.b]),g[2].copy(c[b.c])):
    (g[0]=c[b.a].clone(),g[1]=c[b.b].clone(),g[2]=c[b.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var a;this.computeFaceNormals();var b=0;for(a=this.faces.length;b<a;b++){var c=this.faces[b];var d=c.vertexNormals;3===d.length?(d[0].copy(c.normal),d[1].copy(c.normal),d[2].copy(c.normal)):(d[0]=c.normal.clone(),d[1]=c.normal.clone(),d[2]=c.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var a,b;var c=
    0;for(b=this.faces.length;c<b;c++){var d=this.faces[c];d.__originalFaceNormal?d.__originalFaceNormal.copy(d.normal):d.__originalFaceNormal=d.normal.clone();d.__originalVertexNormals||(d.__originalVertexNormals=[]);var e=0;for(a=d.vertexNormals.length;e<a;e++)d.__originalVertexNormals[e]?d.__originalVertexNormals[e].copy(d.vertexNormals[e]):d.__originalVertexNormals[e]=d.vertexNormals[e].clone()}var f=new L;f.faces=this.faces;e=0;for(a=this.morphTargets.length;e<a;e++){if(!this.morphNormals[e]){this.morphNormals[e]=
    {};this.morphNormals[e].faceNormals=[];this.morphNormals[e].vertexNormals=[];d=this.morphNormals[e].faceNormals;var g=this.morphNormals[e].vertexNormals;c=0;for(b=this.faces.length;c<b;c++){var h=new p;var k={a:new p,b:new p,c:new p};d.push(h);g.push(k)}}g=this.morphNormals[e];f.vertices=this.morphTargets[e].vertices;f.computeFaceNormals();f.computeVertexNormals();c=0;for(b=this.faces.length;c<b;c++)d=this.faces[c],h=g.faceNormals[c],k=g.vertexNormals[c],h.copy(d.normal),k.a.copy(d.vertexNormals[0]),
    k.b.copy(d.vertexNormals[1]),k.c.copy(d.vertexNormals[2])}c=0;for(b=this.faces.length;c<b;c++)d=this.faces[c],d.normal=d.__originalFaceNormal,d.vertexNormals=d.__originalVertexNormals},computeLineDistances:function(){for(var a=0,b=this.vertices,c=0,d=b.length;c<d;c++)0<c&&(a+=b[c].distanceTo(b[c-1])),this.lineDistances[c]=a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Xa);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&
    (this.boundingSphere=new Ia);this.boundingSphere.setFromPoints(this.vertices)},merge:function(a,b,c){if(a&&a.isGeometry){var d,e=this.vertices.length,f=this.vertices,g=a.vertices,h=this.faces,k=a.faces,m=this.faceVertexUvs[0],l=a.faceVertexUvs[0],n=this.colors,p=a.colors;void 0===c&&(c=0);void 0!==b&&(d=(new ma).getNormalMatrix(b));a=0;for(var r=g.length;a<r;a++){var t=g[a].clone();void 0!==b&&t.applyMatrix4(b);f.push(t)}a=0;for(r=p.length;a<r;a++)n.push(p[a].clone());a=0;for(r=k.length;a<r;a++){var g=
    k[a],v=g.vertexNormals,p=g.vertexColors,n=new Ya(g.a+e,g.b+e,g.c+e);n.normal.copy(g.normal);void 0!==d&&n.normal.applyMatrix3(d).normalize();b=0;for(f=v.length;b<f;b++)t=v[b].clone(),void 0!==d&&t.applyMatrix3(d).normalize(),n.vertexNormals.push(t);n.color.copy(g.color);b=0;for(f=p.length;b<f;b++)t=p[b],n.vertexColors.push(t.clone());n.materialIndex=g.materialIndex+c;h.push(n)}a=0;for(r=l.length;a<r;a++)if(c=l[a],d=[],void 0!==c){b=0;for(f=c.length;b<f;b++)d.push(c[b].clone());m.push(d)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",
    a)},mergeMesh:function(a){a&&a.isMesh?(a.matrixAutoUpdate&&a.updateMatrix(),this.merge(a.geometry,a.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",a)},mergeVertices:function(){var a={},b=[],c=[],d=Math.pow(10,4),e;var f=0;for(e=this.vertices.length;f<e;f++){var g=this.vertices[f];g=Math.round(g.x*d)+"_"+Math.round(g.y*d)+"_"+Math.round(g.z*d);void 0===a[g]?(a[g]=f,b.push(this.vertices[f]),c[f]=b.length-1):c[f]=c[a[g]]}a=[];f=0;for(e=this.faces.length;f<e;f++)for(d=
    this.faces[f],d.a=c[d.a],d.b=c[d.b],d.c=c[d.c],d=[d.a,d.b,d.c],g=0;3>g;g++)if(d[g]===d[(g+1)%3]){a.push(f);break}for(f=a.length-1;0<=f;f--)for(d=a[f],this.faces.splice(d,1),c=0,e=this.faceVertexUvs.length;c<e;c++)this.faceVertexUvs[c].splice(d,1);f=this.vertices.length-b.length;this.vertices=b;return f},setFromPoints:function(a){this.vertices=[];for(var b=0,c=a.length;b<c;b++){var d=a[b];this.vertices.push(new p(d.x,d.y,d.z||0))}return this},sortFacesByMaterialIndex:function(){for(var a=this.faces,
    b=a.length,c=0;c<b;c++)a[c]._id=c;a.sort(function(a,b){return a.materialIndex-b.materialIndex});var d=this.faceVertexUvs[0],e=this.faceVertexUvs[1],f,g;d&&d.length===b&&(f=[]);e&&e.length===b&&(g=[]);for(c=0;c<b;c++){var h=a[c]._id;f&&f.push(d[h]);g&&g.push(e[h])}f&&(this.faceVertexUvs[0]=f);g&&(this.faceVertexUvs[1]=g)},toJSON:function(){function a(a,b,c){return c?a|1<<b:a&~(1<<b)}function b(a){var b=a.x.toString()+a.y.toString()+a.z.toString();if(void 0!==m[b])return m[b];m[b]=k.length/3;k.push(a.x,
    a.y,a.z);return m[b]}function c(a){var b=a.r.toString()+a.g.toString()+a.b.toString();if(void 0!==n[b])return n[b];n[b]=l.length;l.push(a.getHex());return n[b]}function d(a){var b=a.x.toString()+a.y.toString();if(void 0!==r[b])return r[b];r[b]=p.length/2;p.push(a.x,a.y);return r[b]}var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};e.uuid=this.uuid;e.type=this.type;""!==this.name&&(e.name=this.name);if(void 0!==this.parameters){var f=this.parameters,g;for(g in f)void 0!==f[g]&&
    (e[g]=f[g]);return e}f=[];for(g=0;g<this.vertices.length;g++){var h=this.vertices[g];f.push(h.x,h.y,h.z)}var h=[],k=[],m={},l=[],n={},p=[],r={};for(g=0;g<this.faces.length;g++){var t=this.faces[g],v=void 0!==this.faceVertexUvs[0][g],w=0<t.normal.length(),z=0<t.vertexNormals.length,y=1!==t.color.r||1!==t.color.g||1!==t.color.b,x=0<t.vertexColors.length,A=0,A=a(A,0,0),A=a(A,1,!0),A=a(A,2,!1),A=a(A,3,v),A=a(A,4,w),A=a(A,5,z),A=a(A,6,y),A=a(A,7,x);h.push(A);h.push(t.a,t.b,t.c);h.push(t.materialIndex);
    v&&(v=this.faceVertexUvs[0][g],h.push(d(v[0]),d(v[1]),d(v[2])));w&&h.push(b(t.normal));z&&(w=t.vertexNormals,h.push(b(w[0]),b(w[1]),b(w[2])));y&&h.push(c(t.color));x&&(t=t.vertexColors,h.push(c(t[0]),c(t[1]),c(t[2])))}e.data={};e.data.vertices=f;e.data.normals=k;0<l.length&&(e.data.colors=l);0<p.length&&(e.data.uvs=[p]);e.data.faces=h;return e},clone:function(){return(new L).copy(this)},copy:function(a){var b,c,d;this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=
    [];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.name=a.name;var e=a.vertices;var f=0;for(b=e.length;f<b;f++)this.vertices.push(e[f].clone());e=a.colors;f=0;for(b=e.length;f<b;f++)this.colors.push(e[f].clone());e=a.faces;f=0;for(b=e.length;f<b;f++)this.faces.push(e[f].clone());f=0;for(b=a.faceVertexUvs.length;f<b;f++){var g=a.faceVertexUvs[f];void 0===this.faceVertexUvs[f]&&(this.faceVertexUvs[f]=[]);e=0;for(c=g.length;e<
    c;e++){var h=g[e],k=[];var m=0;for(d=h.length;m<d;m++)k.push(h[m].clone());this.faceVertexUvs[f].push(k)}}m=a.morphTargets;f=0;for(b=m.length;f<b;f++){d={};d.name=m[f].name;if(void 0!==m[f].vertices)for(d.vertices=[],e=0,c=m[f].vertices.length;e<c;e++)d.vertices.push(m[f].vertices[e].clone());if(void 0!==m[f].normals)for(d.normals=[],e=0,c=m[f].normals.length;e<c;e++)d.normals.push(m[f].normals[e].clone());this.morphTargets.push(d)}m=a.morphNormals;f=0;for(b=m.length;f<b;f++){d={};if(void 0!==m[f].vertexNormals)for(d.vertexNormals=
    [],e=0,c=m[f].vertexNormals.length;e<c;e++)g=m[f].vertexNormals[e],h={},h.a=g.a.clone(),h.b=g.b.clone(),h.c=g.c.clone(),d.vertexNormals.push(h);if(void 0!==m[f].faceNormals)for(d.faceNormals=[],e=0,c=m[f].faceNormals.length;e<c;e++)d.faceNormals.push(m[f].faceNormals[e].clone());this.morphNormals.push(d)}e=a.skinWeights;f=0;for(b=e.length;f<b;f++)this.skinWeights.push(e[f].clone());e=a.skinIndices;f=0;for(b=e.length;f<b;f++)this.skinIndices.push(e[f].clone());e=a.lineDistances;f=0;for(b=e.length;f<
    b;f++)this.lineDistances.push(e[f]);f=a.boundingBox;null!==f&&(this.boundingBox=f.clone());f=a.boundingSphere;null!==f&&(this.boundingSphere=f.clone());this.elementsNeedUpdate=a.elementsNeedUpdate;this.verticesNeedUpdate=a.verticesNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.lineDistancesNeedUpdate=a.lineDistancesNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});
    Object.defineProperty(M.prototype,"needsUpdate",{set:function(a){!0===a&&this.version++}});Object.assign(M.prototype,{isBufferAttribute:!0,setArray:function(a){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==a?a.length/this.itemSize:0;this.array=a},setDynamic:function(a){this.dynamic=a;return this},copy:function(a){this.array=new a.array.constructor(a.array);this.itemSize=a.itemSize;this.count=a.count;this.normalized=a.normalized;
    this.dynamic=a.dynamic;return this},copyAt:function(a,b,c){a*=this.itemSize;c*=b.itemSize;for(var d=0,e=this.itemSize;d<e;d++)this.array[a+d]=b.array[c+d];return this},copyArray:function(a){this.array.set(a);return this},copyColorsArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",d),f=new H);b[c++]=f.r;b[c++]=f.g;b[c++]=f.b}return this},copyIndicesArray:function(a){for(var b=this.array,
    c=0,d=0,e=a.length;d<e;d++){var f=a[d];b[c++]=f.a;b[c++]=f.b;b[c++]=f.c}return this},copyVector2sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",d),f=new D);b[c++]=f.x;b[c++]=f.y}return this},copyVector3sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",d),f=new p);
    b[c++]=f.x;b[c++]=f.y;b[c++]=f.z}return this},copyVector4sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",d),f=new aa);b[c++]=f.x;b[c++]=f.y;b[c++]=f.z;b[c++]=f.w}return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},getX:function(a){return this.array[a*this.itemSize]},setX:function(a,b){this.array[a*this.itemSize]=b;return this},getY:function(a){return this.array[a*
    this.itemSize+1]},setY:function(a,b){this.array[a*this.itemSize+1]=b;return this},getZ:function(a){return this.array[a*this.itemSize+2]},setZ:function(a,b){this.array[a*this.itemSize+2]=b;return this},getW:function(a){return this.array[a*this.itemSize+3]},setW:function(a,b){this.array[a*this.itemSize+3]=b;return this},setXY:function(a,b,c){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;return this},setXYZ:function(a,b,c,d){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=
    d;return this},setXYZW:function(a,b,c,d,e){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;this.array[a+3]=e;return this},onUpload:function(a){this.onUploadCallback=a;return this},clone:function(){return(new this.constructor(this.array,this.itemSize)).copy(this)}});uc.prototype=Object.create(M.prototype);uc.prototype.constructor=uc;vc.prototype=Object.create(M.prototype);vc.prototype.constructor=vc;wc.prototype=Object.create(M.prototype);wc.prototype.constructor=wc;xc.prototype=
    Object.create(M.prototype);xc.prototype.constructor=xc;ob.prototype=Object.create(M.prototype);ob.prototype.constructor=ob;yc.prototype=Object.create(M.prototype);yc.prototype.constructor=yc;pb.prototype=Object.create(M.prototype);pb.prototype.constructor=pb;B.prototype=Object.create(M.prototype);B.prototype.constructor=B;zc.prototype=Object.create(M.prototype);zc.prototype.constructor=zc;Object.assign(Ve.prototype,{computeGroups:function(a){var b=[],c=void 0;a=a.faces;for(var d=0;d<a.length;d++){var e=
    a[d];if(e.materialIndex!==c){c=e.materialIndex;void 0!==f&&(f.count=3*d-f.start,b.push(f));var f={start:3*d,materialIndex:c}}}void 0!==f&&(f.count=3*d-f.start,b.push(f));this.groups=b},fromGeometry:function(a){var b=a.faces,c=a.vertices,d=a.faceVertexUvs,e=d[0]&&0<d[0].length,f=d[1]&&0<d[1].length,g=a.morphTargets,h=g.length;if(0<h){var k=[];for(var m=0;m<h;m++)k[m]=[];this.morphTargets.position=k}var l=a.morphNormals,n=l.length;if(0<n){var p=[];for(m=0;m<n;m++)p[m]=[];this.morphTargets.normal=p}for(var r=
    a.skinIndices,t=a.skinWeights,v=r.length===c.length,w=t.length===c.length,m=0;m<b.length;m++){var z=b[m];this.vertices.push(c[z.a],c[z.b],c[z.c]);var y=z.vertexNormals;3===y.length?this.normals.push(y[0],y[1],y[2]):(y=z.normal,this.normals.push(y,y,y));y=z.vertexColors;3===y.length?this.colors.push(y[0],y[1],y[2]):(y=z.color,this.colors.push(y,y,y));!0===e&&(y=d[0][m],void 0!==y?this.uvs.push(y[0],y[1],y[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",m),this.uvs.push(new D,
    new D,new D)));!0===f&&(y=d[1][m],void 0!==y?this.uvs2.push(y[0],y[1],y[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",m),this.uvs2.push(new D,new D,new D)));for(y=0;y<h;y++){var x=g[y].vertices;k[y].push(x[z.a],x[z.b],x[z.c])}for(y=0;y<n;y++)x=l[y].vertexNormals[m],p[y].push(x.a,x.b,x.c);v&&this.skinIndices.push(r[z.a],r[z.b],r[z.c]);w&&this.skinWeights.push(t[z.a],t[z.b],t[z.c])}this.computeGroups(a);this.verticesNeedUpdate=a.verticesNeedUpdate;this.normalsNeedUpdate=
    a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return this}});var eg=1;E.prototype=Object.assign(Object.create(za.prototype),{constructor:E,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(a){Array.isArray(a)?this.index=new (65535<Xd(a)?pb:ob)(a,1):this.index=a},addAttribute:function(a,b,c){if(b&&b.isBufferAttribute||b&&b.isInterleavedBufferAttribute)if("index"===a)console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),
    this.setIndex(b);else return this.attributes[a]=b,this;else console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(a,new M(b,c))},getAttribute:function(a){return this.attributes[a]},removeAttribute:function(a){delete this.attributes[a];return this},addGroup:function(a,b,c){this.groups.push({start:a,count:b,materialIndex:void 0!==c?c:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(a,b){this.drawRange.start=a;this.drawRange.count=b},
    applyMatrix:function(a){var b=this.attributes.position;void 0!==b&&(a.applyToBufferAttribute(b),b.needsUpdate=!0);b=this.attributes.normal;void 0!==b&&((new ma).getNormalMatrix(a).applyToBufferAttribute(b),b.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return this},rotateX:function(){var a=new O;return function(b){a.makeRotationX(b);this.applyMatrix(a);return this}}(),rotateY:function(){var a=new O;return function(b){a.makeRotationY(b);
    this.applyMatrix(a);return this}}(),rotateZ:function(){var a=new O;return function(b){a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a=new O;return function(b,c,d){a.makeTranslation(b,c,d);this.applyMatrix(a);return this}}(),scale:function(){var a=new O;return function(b,c,d){a.makeScale(b,c,d);this.applyMatrix(a);return this}}(),lookAt:function(){var a=new x;return function(b){a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),center:function(){this.computeBoundingBox();
    var a=this.boundingBox.getCenter().negate();this.translate(a.x,a.y,a.z);return a},setFromObject:function(a){var b=a.geometry;if(a.isPoints||a.isLine){a=new B(3*b.vertices.length,3);var c=new B(3*b.colors.length,3);this.addAttribute("position",a.copyVector3sArray(b.vertices));this.addAttribute("color",c.copyColorsArray(b.colors));b.lineDistances&&b.lineDistances.length===b.vertices.length&&(a=new B(b.lineDistances.length,1),this.addAttribute("lineDistance",a.copyArray(b.lineDistances)));null!==b.boundingSphere&&
    (this.boundingSphere=b.boundingSphere.clone());null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone())}else a.isMesh&&b&&b.isGeometry&&this.fromGeometry(b);return this},setFromPoints:function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];b.push(e.x,e.y,e.z||0)}this.addAttribute("position",new B(b,3));return this},updateFromObject:function(a){var b=a.geometry;if(a.isMesh){var c=b.__directGeometry;!0===b.elementsNeedUpdate&&(c=void 0,b.elementsNeedUpdate=!1);if(void 0===c)return this.fromGeometry(b);
    c.verticesNeedUpdate=b.verticesNeedUpdate;c.normalsNeedUpdate=b.normalsNeedUpdate;c.colorsNeedUpdate=b.colorsNeedUpdate;c.uvsNeedUpdate=b.uvsNeedUpdate;c.groupsNeedUpdate=b.groupsNeedUpdate;b.verticesNeedUpdate=!1;b.normalsNeedUpdate=!1;b.colorsNeedUpdate=!1;b.uvsNeedUpdate=!1;b.groupsNeedUpdate=!1;b=c}!0===b.verticesNeedUpdate&&(c=this.attributes.position,void 0!==c&&(c.copyVector3sArray(b.vertices),c.needsUpdate=!0),b.verticesNeedUpdate=!1);!0===b.normalsNeedUpdate&&(c=this.attributes.normal,void 0!==
    c&&(c.copyVector3sArray(b.normals),c.needsUpdate=!0),b.normalsNeedUpdate=!1);!0===b.colorsNeedUpdate&&(c=this.attributes.color,void 0!==c&&(c.copyColorsArray(b.colors),c.needsUpdate=!0),b.colorsNeedUpdate=!1);b.uvsNeedUpdate&&(c=this.attributes.uv,void 0!==c&&(c.copyVector2sArray(b.uvs),c.needsUpdate=!0),b.uvsNeedUpdate=!1);b.lineDistancesNeedUpdate&&(c=this.attributes.lineDistance,void 0!==c&&(c.copyArray(b.lineDistances),c.needsUpdate=!0),b.lineDistancesNeedUpdate=!1);b.groupsNeedUpdate&&(b.computeGroups(a.geometry),
    this.groups=b.groups,b.groupsNeedUpdate=!1);return this},fromGeometry:function(a){a.__directGeometry=(new Ve).fromGeometry(a);return this.fromDirectGeometry(a.__directGeometry)},fromDirectGeometry:function(a){var b=new Float32Array(3*a.vertices.length);this.addAttribute("position",(new M(b,3)).copyVector3sArray(a.vertices));0<a.normals.length&&(b=new Float32Array(3*a.normals.length),this.addAttribute("normal",(new M(b,3)).copyVector3sArray(a.normals)));0<a.colors.length&&(b=new Float32Array(3*a.colors.length),
    this.addAttribute("color",(new M(b,3)).copyColorsArray(a.colors)));0<a.uvs.length&&(b=new Float32Array(2*a.uvs.length),this.addAttribute("uv",(new M(b,2)).copyVector2sArray(a.uvs)));0<a.uvs2.length&&(b=new Float32Array(2*a.uvs2.length),this.addAttribute("uv2",(new M(b,2)).copyVector2sArray(a.uvs2)));0<a.indices.length&&(b=new (65535<Xd(a.indices)?Uint32Array:Uint16Array)(3*a.indices.length),this.setIndex((new M(b,1)).copyIndicesArray(a.indices)));this.groups=a.groups;for(var c in a.morphTargets){for(var b=
    [],d=a.morphTargets[c],e=0,f=d.length;e<f;e++){var g=d[e],h=new B(3*g.length,3);b.push(h.copyVector3sArray(g))}this.morphAttributes[c]=b}0<a.skinIndices.length&&(c=new B(4*a.skinIndices.length,4),this.addAttribute("skinIndex",c.copyVector4sArray(a.skinIndices)));0<a.skinWeights.length&&(c=new B(4*a.skinWeights.length,4),this.addAttribute("skinWeight",c.copyVector4sArray(a.skinWeights)));null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());null!==a.boundingBox&&(this.boundingBox=
    a.boundingBox.clone());return this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Xa);var a=this.attributes.position;void 0!==a?this.boundingBox.setFromBufferAttribute(a):this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var a=
    new Xa,b=new p;return function(){null===this.boundingSphere&&(this.boundingSphere=new Ia);var c=this.attributes.position;if(c){var d=this.boundingSphere.center;a.setFromBufferAttribute(c);a.getCenter(d);for(var e=0,f=0,g=c.count;f<g;f++)b.x=c.getX(f),b.y=c.getY(f),b.z=c.getZ(f),e=Math.max(e,d.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(e);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',
    this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var a=this.index,b=this.attributes,c=this.groups;if(b.position){var d=b.position.array;if(void 0===b.normal)this.addAttribute("normal",new M(new Float32Array(d.length),3));else for(var e=b.normal.array,f=0,g=e.length;f<g;f++)e[f]=0;var e=b.normal.array,h=new p,k=new p,m=new p,l=new p,n=new p;if(a){a=a.array;0===c.length&&this.addGroup(0,a.length);for(var u=0,r=c.length;u<r;++u){f=c[u];g=f.start;var t=f.count;f=g;for(g+=t;f<
    g;f+=3){t=3*a[f+0];var v=3*a[f+1];var w=3*a[f+2];h.fromArray(d,t);k.fromArray(d,v);m.fromArray(d,w);l.subVectors(m,k);n.subVectors(h,k);l.cross(n);e[t]+=l.x;e[t+1]+=l.y;e[t+2]+=l.z;e[v]+=l.x;e[v+1]+=l.y;e[v+2]+=l.z;e[w]+=l.x;e[w+1]+=l.y;e[w+2]+=l.z}}}else for(f=0,g=d.length;f<g;f+=9)h.fromArray(d,f),k.fromArray(d,f+3),m.fromArray(d,f+6),l.subVectors(m,k),n.subVectors(h,k),l.cross(n),e[f]=l.x,e[f+1]=l.y,e[f+2]=l.z,e[f+3]=l.x,e[f+4]=l.y,e[f+5]=l.z,e[f+6]=l.x,e[f+7]=l.y,e[f+8]=l.z;this.normalizeNormals();
    b.normal.needsUpdate=!0}},merge:function(a,b){if(a&&a.isBufferGeometry){void 0===b&&(b=0);var c=this.attributes,d;for(d in c)if(void 0!==a.attributes[d])for(var e=c[d].array,f=a.attributes[d],g=f.array,h=0,f=f.itemSize*b;h<g.length;h++,f++)e[f]=g[h];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",a)},normalizeNormals:function(){var a=new p;return function(){for(var b=this.attributes.normal,c=0,d=b.count;c<d;c++)a.x=b.getX(c),a.y=b.getY(c),
    a.z=b.getZ(c),a.normalize(),b.setXYZ(c,a.x,a.y,a.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var a=new E,b=this.index.array,c=this.attributes,d;for(d in c){for(var e=c[d],f=e.array,e=e.itemSize,g=new f.constructor(b.length*e),h,k=0,m=0,l=b.length;m<l;m++){h=b[m]*e;for(var n=0;n<e;n++)g[k++]=f[h++]}a.addAttribute(d,new M(g,e))}return a},toJSON:function(){var a={metadata:{version:4.5,type:"BufferGeometry",
    generator:"BufferGeometry.toJSON"}};a.uuid=this.uuid;a.type=this.type;""!==this.name&&(a.name=this.name);if(void 0!==this.parameters){var b=this.parameters;for(var c in b)void 0!==b[c]&&(a[c]=b[c]);return a}a.data={attributes:{}};var d=this.index;null!==d&&(b=Array.prototype.slice.call(d.array),a.data.index={type:d.array.constructor.name,array:b});d=this.attributes;for(c in d){var e=d[c];b=Array.prototype.slice.call(e.array);a.data.attributes[c]={itemSize:e.itemSize,type:e.array.constructor.name,
    array:b,normalized:e.normalized}}c=this.groups;0<c.length&&(a.data.groups=JSON.parse(JSON.stringify(c)));c=this.boundingSphere;null!==c&&(a.data.boundingSphere={center:c.center.toArray(),radius:c.radius});return a},clone:function(){return(new E).copy(this)},copy:function(a){var b;this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.name=a.name;var c=a.index;null!==c&&this.setIndex(c.clone());c=a.attributes;for(g in c)this.addAttribute(g,
    c[g].clone());var d=a.morphAttributes;for(g in d){var e=[],f=d[g];c=0;for(b=f.length;c<b;c++)e.push(f[c].clone());this.morphAttributes[g]=e}var g=a.groups;c=0;for(b=g.length;c<b;c++)d=g[c],this.addGroup(d.start,d.count,d.materialIndex);g=a.boundingBox;null!==g&&(this.boundingBox=g.clone());g=a.boundingSphere;null!==g&&(this.boundingSphere=g.clone());this.drawRange.start=a.drawRange.start;this.drawRange.count=a.drawRange.count;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});
    Mb.prototype=Object.create(L.prototype);Mb.prototype.constructor=Mb;qb.prototype=Object.create(E.prototype);qb.prototype.constructor=qb;Ac.prototype=Object.create(L.prototype);Ac.prototype.constructor=Ac;rb.prototype=Object.create(E.prototype);rb.prototype.constructor=rb;Aa.prototype=Object.create(P.prototype);Aa.prototype.constructor=Aa;Aa.prototype.isMeshBasicMaterial=!0;Aa.prototype.copy=function(a){P.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;
    this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;return this};Fa.prototype=
    Object.create(P.prototype);Fa.prototype.constructor=Fa;Fa.prototype.isShaderMaterial=!0;Fa.prototype.copy=function(a){P.prototype.copy.call(this,a);this.fragmentShader=a.fragmentShader;this.vertexShader=a.vertexShader;this.uniforms=Ga.clone(a.uniforms);this.defines=a.defines;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.lights=a.lights;this.clipping=a.clipping;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;this.extensions=
    a.extensions;return this};Fa.prototype.toJSON=function(a){a=P.prototype.toJSON.call(this,a);a.uniforms=this.uniforms;a.vertexShader=this.vertexShader;a.fragmentShader=this.fragmentShader;return a};Object.assign(sb.prototype,{set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){return(b||new p).copy(this.direction).multiplyScalar(a).add(this.origin)},
    lookAt:function(a){this.direction.copy(a).sub(this.origin).normalize();return this},recast:function(){var a=new p;return function(b){this.origin.copy(this.at(b,a));return this}}(),closestPointToPoint:function(a,b){b=b||new p;b.subVectors(a,this.origin);a=b.dot(this.direction);return 0>a?b.copy(this.origin):b.copy(this.direction).multiplyScalar(a).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new p;return function(b){var c=
    a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceToSquared(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceToSquared(b)}}(),distanceSqToSegment:function(){var a=new p,b=new p,c=new p;return function(d,e,f,g){a.copy(d).add(e).multiplyScalar(.5);b.copy(e).sub(d).normalize();c.copy(this.origin).sub(a);var h=.5*d.distanceTo(e),k=-this.direction.dot(b),m=c.dot(this.direction),l=-c.dot(b),n=c.lengthSq(),p=Math.abs(1-k*k);if(0<p){d=k*l-m;e=k*
    m-l;var r=h*p;0<=d?e>=-r?e<=r?(h=1/p,d*=h,e*=h,k=d*(d+k*e+2*m)+e*(k*d+e+2*l)+n):(e=h,d=Math.max(0,-(k*e+m)),k=-d*d+e*(e+2*l)+n):(e=-h,d=Math.max(0,-(k*e+m)),k=-d*d+e*(e+2*l)+n):e<=-r?(d=Math.max(0,-(-k*h+m)),e=0<d?-h:Math.min(Math.max(-h,-l),h),k=-d*d+e*(e+2*l)+n):e<=r?(d=0,e=Math.min(Math.max(-h,-l),h),k=e*(e+2*l)+n):(d=Math.max(0,-(k*h+m)),e=0<d?h:Math.min(Math.max(-h,-l),h),k=-d*d+e*(e+2*l)+n)}else e=0<k?-h:h,d=Math.max(0,-(k*e+m)),k=-d*d+e*(e+2*l)+n;f&&f.copy(this.direction).multiplyScalar(d).add(this.origin);
    g&&g.copy(b).multiplyScalar(e).add(a);return k}}(),intersectSphere:function(){var a=new p;return function(b,c){a.subVectors(b.center,this.origin);var d=a.dot(this.direction),e=a.dot(a)-d*d;b=b.radius*b.radius;if(e>b)return null;b=Math.sqrt(b-e);e=d-b;d+=b;return 0>e&&0>d?null:0>e?this.at(d,c):this.at(e,c)}}(),intersectsSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},distanceToPlane:function(a){var b=a.normal.dot(this.direction);if(0===b)return 0===a.distanceToPoint(this.origin)?
    0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return 0<=a?a:null},intersectPlane:function(a,b){a=this.distanceToPlane(a);return null===a?null:this.at(a,b)},intersectsPlane:function(a){var b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1},intersectBox:function(a,b){var c=1/this.direction.x;var d=1/this.direction.y;var e=1/this.direction.z,f=this.origin;if(0<=c){var g=(a.min.x-f.x)*c;c*=a.max.x-f.x}else g=(a.max.x-f.x)*c,c*=a.min.x-f.x;if(0<=d){var h=(a.min.y-
    f.y)*d;d*=a.max.y-f.y}else h=(a.max.y-f.y)*d,d*=a.min.y-f.y;if(g>d||h>c)return null;if(h>g||g!==g)g=h;if(d<c||c!==c)c=d;0<=e?(h=(a.min.z-f.z)*e,a=(a.max.z-f.z)*e):(h=(a.max.z-f.z)*e,a=(a.min.z-f.z)*e);if(g>a||h>c)return null;if(h>g||g!==g)g=h;if(a<c||c!==c)c=a;return 0>c?null:this.at(0<=g?g:c,b)},intersectsBox:function(){var a=new p;return function(b){return null!==this.intersectBox(b,a)}}(),intersectTriangle:function(){var a=new p,b=new p,c=new p,d=new p;return function(e,f,g,h,k){b.subVectors(f,
    e);c.subVectors(g,e);d.crossVectors(b,c);f=this.direction.dot(d);if(0<f){if(h)return null;h=1}else if(0>f)h=-1,f=-f;else return null;a.subVectors(this.origin,e);e=h*this.direction.dot(c.crossVectors(a,c));if(0>e)return null;g=h*this.direction.dot(b.cross(a));if(0>g||e+g>f)return null;e=-h*a.dot(d);return 0>e?null:this.at(e/f,k)}}(),applyMatrix4:function(a){this.origin.applyMatrix4(a);this.direction.transformDirection(a);return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}});
    Object.assign(Nb.prototype,{set:function(a,b){this.start.copy(a);this.end.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},getCenter:function(a){return(a||new p).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){return(a||new p).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},
    at:function(a,b){b=b||new p;return this.delta(b).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new p,b=new p;return function(c,d){a.subVectors(c,this.start);b.subVectors(this.end,this.start);c=b.dot(b);c=b.dot(a)/c;d&&(c=Q.clamp(c,0,1));return c}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);c=c||new p;return this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);this.end.applyMatrix4(a);
    return this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)}});Object.assign(Za,{normal:function(){var a=new p;return function(b,c,d,e){e=e||new p;e.subVectors(d,c);a.subVectors(b,c);e.cross(a);b=e.lengthSq();return 0<b?e.multiplyScalar(1/Math.sqrt(b)):e.set(0,0,0)}}(),barycoordFromPoint:function(){var a=new p,b=new p,c=new p;return function(d,e,f,g,h){a.subVectors(g,e);b.subVectors(f,e);c.subVectors(d,e);d=a.dot(a);e=a.dot(b);f=a.dot(c);var k=b.dot(b);g=b.dot(c);var m=
    d*k-e*e;h=h||new p;if(0===m)return h.set(-2,-1,-1);m=1/m;k=(k*f-e*g)*m;d=(d*g-e*f)*m;return h.set(1-k-d,d,k)}}(),containsPoint:function(){var a=new p;return function(b,c,d,e){b=Za.barycoordFromPoint(b,c,d,e,a);return 0<=b.x&&0<=b.y&&1>=b.x+b.y}}()});Object.assign(Za.prototype,{set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[d]);return this},clone:function(){return(new this.constructor).copy(this)},
    copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},area:function(){var a=new p,b=new p;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return.5*a.cross(b).length()}}(),midpoint:function(a){return(a||new p).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return Za.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new Ea).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return Za.barycoordFromPoint(a,
    this.a,this.b,this.c,b)},containsPoint:function(a){return Za.containsPoint(a,this.a,this.b,this.c)},closestPointToPoint:function(){var a=new Ea,b=[new Nb,new Nb,new Nb],c=new p,d=new p;return function(e,f){f=f||new p;var g=Infinity;a.setFromCoplanarPoints(this.a,this.b,this.c);a.projectPoint(e,c);if(!0===this.containsPoint(c))f.copy(c);else for(b[0].set(this.a,this.b),b[1].set(this.b,this.c),b[2].set(this.c,this.a),e=0;e<b.length;e++){b[e].closestPointToPoint(c,!0,d);var h=c.distanceToSquared(d);
    h<g&&(g=h,f.copy(d))}return f}}(),equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}});ra.prototype=Object.assign(Object.create(x.prototype),{constructor:ra,isMesh:!0,setDrawMode:function(a){this.drawMode=a},copy:function(a){x.prototype.copy.call(this,a);this.drawMode=a.drawMode;void 0!==a.morphTargetInfluences&&(this.morphTargetInfluences=a.morphTargetInfluences.slice());void 0!==a.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},a.morphTargetDictionary));
    return this},updateMorphTargets:function(){var a=this.geometry;if(a.isBufferGeometry){a=a.morphAttributes;var b=Object.keys(a);if(0<b.length){var c=a[b[0]];if(void 0!==c)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},a=0,b=c.length;a<b;a++){var d=c[a].name||String(a);this.morphTargetInfluences.push(0);this.morphTargetDictionary[d]=a}}}else if(c=a.morphTargets,void 0!==c&&0<c.length)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},a=0,b=c.length;a<b;a++)d=c[a].name||
    String(a),this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=a},raycast:function(){function a(a,b,c,d,e,f,g){Za.barycoordFromPoint(a,b,c,d,v);e.multiplyScalar(v.x);f.multiplyScalar(v.y);g.multiplyScalar(v.z);e.add(f).add(g);return e.clone()}function b(a,b,c,d,e,f,g,h){if(null===(1===b.side?d.intersectTriangle(g,f,e,!0,h):d.intersectTriangle(e,f,g,2!==b.side,h)))return null;z.copy(h);z.applyMatrix4(a.matrixWorld);b=c.ray.origin.distanceTo(z);return b<c.near||b>c.far?null:{distance:b,
    point:z.clone(),object:a}}function c(c,d,e,f,m,l,q,n){g.fromBufferAttribute(f,l);h.fromBufferAttribute(f,q);k.fromBufferAttribute(f,n);if(c=b(c,c.material,d,e,g,h,k,w))m&&(u.fromBufferAttribute(m,l),r.fromBufferAttribute(m,q),t.fromBufferAttribute(m,n),c.uv=a(w,g,h,k,u,r,t)),c.face=new Ya(l,q,n,Za.normal(g,h,k)),c.faceIndex=l;return c}var d=new O,e=new sb,f=new Ia,g=new p,h=new p,k=new p,m=new p,l=new p,n=new p,u=new D,r=new D,t=new D,v=new p,w=new p,z=new p;return function(q,p){var v=this.geometry,
    z=this.material,y=this.matrixWorld;if(void 0!==z&&(null===v.boundingSphere&&v.computeBoundingSphere(),f.copy(v.boundingSphere),f.applyMatrix4(y),!1!==q.ray.intersectsSphere(f)&&(d.getInverse(y),e.copy(q.ray).applyMatrix4(d),null===v.boundingBox||!1!==e.intersectsBox(v.boundingBox)))){var x;if(v.isBufferGeometry){var z=v.index,B=v.attributes.position,y=v.attributes.uv,D;if(null!==z){var C=0;for(D=z.count;C<D;C+=3){v=z.getX(C);var I=z.getX(C+1);var E=z.getX(C+2);if(x=c(this,q,e,B,y,v,I,E))x.faceIndex=
    Math.floor(C/3),p.push(x)}}else if(void 0!==B)for(C=0,D=B.count;C<D;C+=3)if(v=C,I=C+1,E=C+2,x=c(this,q,e,B,y,v,I,E))x.index=v,p.push(x)}else if(v.isGeometry){var y=Array.isArray(z);C=v.vertices;D=v.faces;I=v.faceVertexUvs[0];0<I.length&&(B=I);for(var H=0,K=D.length;H<K;H++){var N=D[H];x=y?z[N.materialIndex]:z;if(void 0!==x){I=C[N.a];E=C[N.b];var L=C[N.c];if(!0===x.morphTargets){var M=v.morphTargets,O=this.morphTargetInfluences;g.set(0,0,0);h.set(0,0,0);k.set(0,0,0);for(var P=0,Q=M.length;P<Q;P++){var R=
    O[P];if(0!==R){var U=M[P].vertices;g.addScaledVector(m.subVectors(U[N.a],I),R);h.addScaledVector(l.subVectors(U[N.b],E),R);k.addScaledVector(n.subVectors(U[N.c],L),R)}}g.add(I);h.add(E);k.add(L);I=g;E=h;L=k}if(x=b(this,x,q,e,I,E,L,w))B&&B[H]&&(M=B[H],u.copy(M[0]),r.copy(M[1]),t.copy(M[2]),x.uv=a(w,I,E,L,u,r,t)),x.face=N,x.faceIndex=H,p.push(x)}}}}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});var yg=0;ba.prototype=Object.assign(Object.create(Ta.prototype),
    {constructor:ba,isPerspectiveCamera:!0,copy:function(a,b){Ta.prototype.copy.call(this,a,b);this.fov=a.fov;this.zoom=a.zoom;this.near=a.near;this.far=a.far;this.focus=a.focus;this.aspect=a.aspect;this.view=null===a.view?null:Object.assign({},a.view);this.filmGauge=a.filmGauge;this.filmOffset=a.filmOffset;return this},setFocalLength:function(a){a=.5*this.getFilmHeight()/a;this.fov=2*Q.RAD2DEG*Math.atan(a);this.updateProjectionMatrix()},getFocalLength:function(){var a=Math.tan(.5*Q.DEG2RAD*this.fov);
    return.5*this.getFilmHeight()/a},getEffectiveFOV:function(){return 2*Q.RAD2DEG*Math.atan(Math.tan(.5*Q.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(a,b,c,d,e,f){this.aspect=a/b;null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=a;this.view.fullHeight=b;this.view.offsetX=
    c;this.view.offsetY=d;this.view.width=e;this.view.height=f;this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=this.near,b=a*Math.tan(.5*Q.DEG2RAD*this.fov)/this.zoom,c=2*b,d=this.aspect*c,e=-.5*d,f=this.view;if(null!==this.view&&this.view.enabled)var g=f.fullWidth,h=f.fullHeight,e=e+f.offsetX*d/g,b=b-f.offsetY*c/h,d=f.width/g*d,c=f.height/h*c;f=this.filmOffset;0!==f&&(e+=a*f/this.getFilmWidth());
    this.projectionMatrix.makePerspective(e,e+d,b,b-c,a,this.far)},toJSON:function(a){a=x.prototype.toJSON.call(this,a);a.object.fov=this.fov;a.object.zoom=this.zoom;a.object.near=this.near;a.object.far=this.far;a.object.focus=this.focus;a.object.aspect=this.aspect;null!==this.view&&(a.object.view=Object.assign({},this.view));a.object.filmGauge=this.filmGauge;a.object.filmOffset=this.filmOffset;return a}});ud.prototype=Object.assign(Object.create(ba.prototype),{constructor:ud,isArrayCamera:!0});Pb.prototype.isFogExp2=
    !0;Pb.prototype.clone=function(){return new Pb(this.color.getHex(),this.density)};Pb.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}};Qb.prototype.isFog=!0;Qb.prototype.clone=function(){return new Qb(this.color.getHex(),this.near,this.far)};Qb.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}};vd.prototype=Object.assign(Object.create(x.prototype),{constructor:vd,copy:function(a,b){x.prototype.copy.call(this,
    a,b);null!==a.background&&(this.background=a.background.clone());null!==a.fog&&(this.fog=a.fog.clone());null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.autoUpdate=a.autoUpdate;this.matrixAutoUpdate=a.matrixAutoUpdate;return this},toJSON:function(a){var b=x.prototype.toJSON.call(this,a);null!==this.background&&(b.object.background=this.background.toJSON(a));null!==this.fog&&(b.object.fog=this.fog.toJSON());return b}});de.prototype=Object.assign(Object.create(x.prototype),
    {constructor:de,isLensFlare:!0,copy:function(a){x.prototype.copy.call(this,a);this.positionScreen.copy(a.positionScreen);this.customUpdateCallback=a.customUpdateCallback;for(var b=0,c=a.lensFlares.length;b<c;b++)this.lensFlares.push(a.lensFlares[b]);return this},add:function(a,b,c,d,e,f){void 0===b&&(b=-1);void 0===c&&(c=0);void 0===f&&(f=1);void 0===e&&(e=new H(16777215));void 0===d&&(d=1);c=Math.min(c,Math.max(0,c));this.lensFlares.push({texture:a,size:b,distance:c,x:0,y:0,z:0,scale:1,rotation:0,
    opacity:f,color:e,blending:d})},updateLensFlares:function(){var a,b=this.lensFlares.length,c=2*-this.positionScreen.x,d=2*-this.positionScreen.y;for(a=0;a<b;a++){var e=this.lensFlares[a];e.x=this.positionScreen.x+c*e.distance;e.y=this.positionScreen.y+d*e.distance;e.wantedRotation=e.x*Math.PI*.25;e.rotation+=.25*(e.wantedRotation-e.rotation)}}});hb.prototype=Object.create(P.prototype);hb.prototype.constructor=hb;hb.prototype.isSpriteMaterial=!0;hb.prototype.copy=function(a){P.prototype.copy.call(this,
    a);this.color.copy(a.color);this.map=a.map;this.rotation=a.rotation;return this};Cc.prototype=Object.assign(Object.create(x.prototype),{constructor:Cc,isSprite:!0,raycast:function(){var a=new p,b=new p,c=new p;return function(d,e){b.setFromMatrixPosition(this.matrixWorld);d.ray.closestPointToPoint(b,a);c.setFromMatrixScale(this.matrixWorld);var f=c.x*c.y/4;b.distanceToSquared(a)>f||(f=d.ray.origin.distanceTo(a),f<d.near||f>d.far||e.push({distance:f,point:a.clone(),face:null,object:this}))}}(),clone:function(){return(new this.constructor(this.material)).copy(this)}});
    Dc.prototype=Object.assign(Object.create(x.prototype),{constructor:Dc,copy:function(a){x.prototype.copy.call(this,a,!1);a=a.levels;for(var b=0,c=a.length;b<c;b++){var d=a[b];this.addLevel(d.object.clone(),d.distance)}return this},addLevel:function(a,b){void 0===b&&(b=0);b=Math.abs(b);for(var c=this.levels,d=0;d<c.length&&!(b<c[d].distance);d++);c.splice(d,0,{distance:b,object:a});this.add(a)},getObjectForDistance:function(a){for(var b=this.levels,c=1,d=b.length;c<d&&!(a<b[c].distance);c++);return b[c-
    1].object},raycast:function(){var a=new p;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.origin.distanceTo(a);this.getObjectForDistance(d).raycast(b,c)}}(),update:function(){var a=new p,b=new p;return function(c){var d=this.levels;if(1<d.length){a.setFromMatrixPosition(c.matrixWorld);b.setFromMatrixPosition(this.matrixWorld);c=a.distanceTo(b);d[0].object.visible=!0;for(var e=1,f=d.length;e<f;e++)if(c>=d[e].distance)d[e-1].object.visible=!1,d[e].object.visible=!0;else break;
    for(;e<f;e++)d[e].object.visible=!1}}}(),toJSON:function(a){a=x.prototype.toJSON.call(this,a);a.object.levels=[];for(var b=this.levels,c=0,d=b.length;c<d;c++){var e=b[c];a.object.levels.push({object:e.object.uuid,distance:e.distance})}return a}});Object.assign(Ec.prototype,{calculateInverses:function(){this.boneInverses=[];for(var a=0,b=this.bones.length;a<b;a++){var c=new O;this.bones[a]&&c.getInverse(this.bones[a].matrixWorld);this.boneInverses.push(c)}},pose:function(){var a,b;var c=0;for(b=this.bones.length;c<
    b;c++)(a=this.bones[c])&&a.matrixWorld.getInverse(this.boneInverses[c]);c=0;for(b=this.bones.length;c<b;c++)if(a=this.bones[c])a.parent&&a.parent.isBone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale)},update:function(){var a=new O,b=new O;return function(){for(var c=this.bones,d=this.boneInverses,e=this.boneMatrices,f=this.boneTexture,g=0,h=c.length;g<h;g++)a.multiplyMatrices(c[g]?c[g].matrixWorld:
    b,d[g]),a.toArray(e,16*g);void 0!==f&&(f.needsUpdate=!0)}}(),clone:function(){return new Ec(this.bones,this.boneInverses)}});wd.prototype=Object.assign(Object.create(x.prototype),{constructor:wd,isBone:!0});xd.prototype=Object.assign(Object.create(ra.prototype),{constructor:xd,isSkinnedMesh:!0,initBones:function(){var a=[],b;if(this.geometry&&void 0!==this.geometry.bones){var c=0;for(b=this.geometry.bones.length;c<b;c++){var d=this.geometry.bones[c];var e=new wd;a.push(e);e.name=d.name;e.position.fromArray(d.pos);
    e.quaternion.fromArray(d.rotq);void 0!==d.scl&&e.scale.fromArray(d.scl)}c=0;for(b=this.geometry.bones.length;c<b;c++)d=this.geometry.bones[c],-1!==d.parent&&null!==d.parent&&void 0!==a[d.parent]?a[d.parent].add(a[c]):this.add(a[c])}this.updateMatrixWorld(!0);return a},bind:function(a,b){this.skeleton=a;void 0===b&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),b=this.matrixWorld);this.bindMatrix.copy(b);this.bindMatrixInverse.getInverse(b)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var a;
    if(this.geometry&&this.geometry.isGeometry)for(a=0;a<this.geometry.skinWeights.length;a++){var b=this.geometry.skinWeights[a];var c=1/b.manhattanLength();Infinity!==c?b.multiplyScalar(c):b.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var b=new aa,d=this.geometry.attributes.skinWeight;for(a=0;a<d.count;a++)b.x=d.getX(a),b.y=d.getY(a),b.z=d.getZ(a),b.w=d.getW(a),c=1/b.manhattanLength(),Infinity!==c?b.multiplyScalar(c):b.set(1,0,0,0),d.setXYZW(a,b.x,b.y,b.z,b.w)}},updateMatrixWorld:function(a){ra.prototype.updateMatrixWorld.call(this,
    a);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});W.prototype=Object.create(P.prototype);W.prototype.constructor=W;W.prototype.isLineBasicMaterial=!0;W.prototype.copy=function(a){P.prototype.copy.call(this,a);this.color.copy(a.color);
    this.linewidth=a.linewidth;this.linecap=a.linecap;this.linejoin=a.linejoin;return this};sa.prototype=Object.assign(Object.create(x.prototype),{constructor:sa,isLine:!0,raycast:function(){var a=new O,b=new sb,c=new Ia;return function(d,e){var f=d.linePrecision,f=f*f,g=this.geometry,h=this.matrixWorld;null===g.boundingSphere&&g.computeBoundingSphere();c.copy(g.boundingSphere);c.applyMatrix4(h);if(!1!==d.ray.intersectsSphere(c)){a.getInverse(h);b.copy(d.ray).applyMatrix4(a);var k=new p,m=new p,h=new p,
    l=new p,n=this&&this.isLineSegments?2:1;if(g.isBufferGeometry){var u=g.index;var r=g.attributes.position.array;if(null!==u)for(var t=u.array,g=0,v=t.length-1;g<v;g+=n)u=t[g+1],k.fromArray(r,3*t[g]),m.fromArray(r,3*u),u=b.distanceSqToSegment(k,m,l,h),u>f||(l.applyMatrix4(this.matrixWorld),u=d.ray.origin.distanceTo(l),u<d.near||u>d.far||e.push({distance:u,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}));else for(g=0,v=r.length/3-1;g<v;g+=n)k.fromArray(r,
    3*g),m.fromArray(r,3*g+3),u=b.distanceSqToSegment(k,m,l,h),u>f||(l.applyMatrix4(this.matrixWorld),u=d.ray.origin.distanceTo(l),u<d.near||u>d.far||e.push({distance:u,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}else if(g.isGeometry)for(k=g.vertices,m=k.length,g=0;g<m-1;g+=n)u=b.distanceSqToSegment(k[g],k[g+1],l,h),u>f||(l.applyMatrix4(this.matrixWorld),u=d.ray.origin.distanceTo(l),u<d.near||u>d.far||e.push({distance:u,point:h.clone().applyMatrix4(this.matrixWorld),
    index:g,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});X.prototype=Object.assign(Object.create(sa.prototype),{constructor:X,isLineSegments:!0});yd.prototype=Object.assign(Object.create(sa.prototype),{constructor:yd,isLineLoop:!0});Ka.prototype=Object.create(P.prototype);Ka.prototype.constructor=Ka;Ka.prototype.isPointsMaterial=!0;Ka.prototype.copy=function(a){P.prototype.copy.call(this,a);this.color.copy(a.color);
    this.map=a.map;this.size=a.size;this.sizeAttenuation=a.sizeAttenuation;return this};Rb.prototype=Object.assign(Object.create(x.prototype),{constructor:Rb,isPoints:!0,raycast:function(){var a=new O,b=new sb,c=new Ia;return function(d,e){function f(a,c){var f=b.distanceSqToPoint(a);if(f<l){a=b.closestPointToPoint(a);a.applyMatrix4(k);var h=d.ray.origin.distanceTo(a);h<d.near||h>d.far||e.push({distance:h,distanceToRay:Math.sqrt(f),point:a.clone(),index:c,face:null,object:g})}}var g=this,h=this.geometry,
    k=this.matrixWorld,m=d.params.Points.threshold;null===h.boundingSphere&&h.computeBoundingSphere();c.copy(h.boundingSphere);c.applyMatrix4(k);c.radius+=m;if(!1!==d.ray.intersectsSphere(c)){a.getInverse(k);b.copy(d.ray).applyMatrix4(a);var m=m/((this.scale.x+this.scale.y+this.scale.z)/3),l=m*m,m=new p;if(h.isBufferGeometry){var n=h.index,h=h.attributes.position.array;if(null!==n)for(var u=n.array,n=0,r=u.length;n<r;n++){var t=u[n];m.fromArray(h,3*t);f(m,t)}else for(n=0,u=h.length/3;n<u;n++)m.fromArray(h,
    3*n),f(m,n)}else for(m=h.vertices,n=0,u=m.length;n<u;n++)f(m[n],n)}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});Fc.prototype=Object.assign(Object.create(x.prototype),{constructor:Fc,isGroup:!0});ee.prototype=Object.assign(Object.create(U.prototype),{constructor:ee,isVideoTexture:!0,update:function(){var a=this.image;a.readyState>=a.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});Sb.prototype=Object.create(U.prototype);Sb.prototype.constructor=Sb;Sb.prototype.isCompressedTexture=
    !0;Gc.prototype=Object.create(U.prototype);Gc.prototype.constructor=Gc;Gc.prototype.isDepthTexture=!0;Tb.prototype=Object.create(E.prototype);Tb.prototype.constructor=Tb;Hc.prototype=Object.create(L.prototype);Hc.prototype.constructor=Hc;Ub.prototype=Object.create(E.prototype);Ub.prototype.constructor=Ub;Ic.prototype=Object.create(L.prototype);Ic.prototype.constructor=Ic;ja.prototype=Object.create(E.prototype);ja.prototype.constructor=ja;Jc.prototype=Object.create(L.prototype);Jc.prototype.constructor=
    Jc;Vb.prototype=Object.create(ja.prototype);Vb.prototype.constructor=Vb;Kc.prototype=Object.create(L.prototype);Kc.prototype.constructor=Kc;ub.prototype=Object.create(ja.prototype);ub.prototype.constructor=ub;Lc.prototype=Object.create(L.prototype);Lc.prototype.constructor=Lc;Wb.prototype=Object.create(ja.prototype);Wb.prototype.constructor=Wb;Mc.prototype=Object.create(L.prototype);Mc.prototype.constructor=Mc;Xb.prototype=Object.create(ja.prototype);Xb.prototype.constructor=Xb;Nc.prototype=Object.create(L.prototype);
    Nc.prototype.constructor=Nc;Yb.prototype=Object.create(E.prototype);Yb.prototype.constructor=Yb;Oc.prototype=Object.create(L.prototype);Oc.prototype.constructor=Oc;Zb.prototype=Object.create(E.prototype);Zb.prototype.constructor=Zb;Pc.prototype=Object.create(L.prototype);Pc.prototype.constructor=Pc;$b.prototype=Object.create(E.prototype);$b.prototype.constructor=$b;var Lg={triangulate:function(a,b,c){c=c||2;var d=b&&b.length,e=d?b[0]*c:a.length,f=bf(a,0,e,c,!0),g=[];if(!f)return g;var h;if(d){var k=
    c,d=[],m;var l=0;for(m=b.length;l<m;l++){var n=b[l]*k;var p=l<m-1?b[l+1]*k:a.length;n=bf(a,n,p,k,!1);n===n.next&&(n.steiner=!0);d.push(Jg(n))}d.sort(Hg);for(l=0;l<d.length;l++){b=d[l];k=f;if(k=Ig(b,k))b=ef(k,b),Rc(b,b.next);f=Rc(f,f.next)}}if(a.length>80*c){var r=h=a[0];var t=d=a[1];for(k=c;k<e;k+=c)l=a[k],b=a[k+1],l<r&&(r=l),b<t&&(t=b),l>h&&(h=l),b>d&&(d=b);h=Math.max(h-r,d-t);h=0!==h?1/h:0}Sc(f,g,c,r,t,h);return g}},$a={area:function(a){for(var b=a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=a[d].x*a[e].y-
    a[e].x*a[d].y;return.5*c},isClockWise:function(a){return 0>$a.area(a)},triangulateShape:function(a,b){function c(a){var b=a.length;2<b&&a[b-1].equals(a[0])&&a.pop()}function d(a,b){for(var c=0;c<b.length;c++)a.push(b[c].x),a.push(b[c].y)}var e=[],f=[],g=[];c(a);d(e,a);var h=a.length;b.forEach(c);for(a=0;a<b.length;a++)f.push(h),h+=b[a].length,d(e,b[a]);b=Lg.triangulate(e,f);for(a=0;a<b.length;a+=3)g.push(b.slice(a,a+3));return g}};ib.prototype=Object.create(L.prototype);ib.prototype.constructor=ib;
    La.prototype=Object.create(E.prototype);La.prototype.constructor=La;La.prototype.getArrays=function(){var a=this.getAttribute("position"),a=a?Array.prototype.slice.call(a.array):[],b=this.getAttribute("uv"),b=b?Array.prototype.slice.call(b.array):[],c=this.index,c=c?Array.prototype.slice.call(c.array):[];return{position:a,uv:b,index:c}};La.prototype.addShapeList=function(a,b){var c=a.length;b.arrays=this.getArrays();for(var d=0;d<c;d++)this.addShape(a[d],b);this.setIndex(b.arrays.index);this.addAttribute("position",
    new B(b.arrays.position,3));this.addAttribute("uv",new B(b.arrays.uv,2))};La.prototype.addShape=function(a,b){function c(a,b,c){b||console.error("THREE.ExtrudeGeometry: vec does not exist");return b.clone().multiplyScalar(c).add(a)}function d(a,b,c){var d=a.x-b.x;var e=a.y-b.y;var f=c.x-a.x;var g=c.y-a.y,h=d*d+e*e;if(Math.abs(d*g-e*f)>Number.EPSILON){var k=Math.sqrt(h),m=Math.sqrt(f*f+g*g),h=b.x-e/k;b=b.y+d/k;g=((c.x-g/m-h)*g-(c.y+f/m-b)*f)/(d*g-e*f);f=h+d*g-a.x;d=b+e*g-a.y;e=f*f+d*d;if(2>=e)return new D(f,
    d);e=Math.sqrt(e/2)}else a=!1,d>Number.EPSILON?f>Number.EPSILON&&(a=!0):d<-Number.EPSILON?f<-Number.EPSILON&&(a=!0):Math.sign(e)===Math.sign(g)&&(a=!0),a?(f=-e,e=Math.sqrt(h)):(f=d,d=e,e=Math.sqrt(h/2));return new D(f/e,d/e)}function e(a,b){for(G=a.length;0<=--G;){var c=G;var d=G-1;0>d&&(d=a.length-1);var e,f=x+2*w;for(e=0;e<f;e++){var g=X*e,m=X*(e+1),n=b+d+g,q=b+d+m,m=b+c+m;h(b+c+g);h(n);h(m);h(n);h(q);h(m);g=l.length/3;g=E.generateSideWallUV(S,l,g-6,g-3,g-2,g-1);k(g[0]);k(g[1]);k(g[3]);k(g[1]);
    k(g[2]);k(g[3])}}}function f(a,b,c){r.push(a);r.push(b);r.push(c)}function g(a,b,c){h(a);h(b);h(c);a=l.length/3;a=E.generateTopUV(S,l,a-3,a-2,a-1);k(a[0]);k(a[1]);k(a[2])}function h(a){n.push(l.length/3);l.push(r[3*a+0]);l.push(r[3*a+1]);l.push(r[3*a+2])}function k(a){u.push(a.x);u.push(a.y)}var m=b.arrays?b.arrays:this.getArrays(),l=m.position,n=m.index,u=m.uv,r=[],m=void 0!==b.amount?b.amount:100,t=void 0!==b.bevelThickness?b.bevelThickness:6,v=void 0!==b.bevelSize?b.bevelSize:t-2,w=void 0!==b.bevelSegments?
    b.bevelSegments:3,z=void 0!==b.bevelEnabled?b.bevelEnabled:!0,y=void 0!==b.curveSegments?b.curveSegments:12,x=void 0!==b.steps?b.steps:1,A=b.extrudePath,C=!1,E=void 0!==b.UVGenerator?b.UVGenerator:ib.WorldUVGenerator;if(A){var H=A.getSpacedPoints(x);C=!0;z=!1;var K=void 0!==b.frames?b.frames:A.computeFrenetFrames(x,!1);var L=new p;var M=new p;var P=new p}z||(v=t=w=0);var O,S=this,y=a.extractPoints(y);a=y.shape;var Q=y.holes;if(!$a.isClockWise(a)){a=a.reverse();var N=0;for(O=Q.length;N<O;N++){var R=
    Q[N];$a.isClockWise(R)&&(Q[N]=R.reverse())}}var U=$a.triangulateShape(a,Q),W=a;N=0;for(O=Q.length;N<O;N++)R=Q[N],a=a.concat(R);var V,X=a.length,T,ba=U.length,y=[],G=0;var Y=W.length;var ea=Y-1;for(V=G+1;G<Y;G++,ea++,V++)ea===Y&&(ea=0),V===Y&&(V=0),y[G]=d(W[G],W[ea],W[V]);var A=[],ca=y.concat();N=0;for(O=Q.length;N<O;N++){R=Q[N];var aa=[];G=0;Y=R.length;ea=Y-1;for(V=G+1;G<Y;G++,ea++,V++)ea===Y&&(ea=0),V===Y&&(V=0),aa[G]=d(R[G],R[ea],R[V]);A.push(aa);ca=ca.concat(aa)}for(ea=0;ea<w;ea++){Y=ea/w;var da=
    t*Math.cos(Y*Math.PI/2);V=v*Math.sin(Y*Math.PI/2);G=0;for(Y=W.length;G<Y;G++){var fa=c(W[G],y[G],V);f(fa.x,fa.y,-da)}N=0;for(O=Q.length;N<O;N++)for(R=Q[N],aa=A[N],G=0,Y=R.length;G<Y;G++)fa=c(R[G],aa[G],V),f(fa.x,fa.y,-da)}V=v;for(G=0;G<X;G++)fa=z?c(a[G],ca[G],V):a[G],C?(M.copy(K.normals[0]).multiplyScalar(fa.x),L.copy(K.binormals[0]).multiplyScalar(fa.y),P.copy(H[0]).add(M).add(L),f(P.x,P.y,P.z)):f(fa.x,fa.y,0);for(Y=1;Y<=x;Y++)for(G=0;G<X;G++)fa=z?c(a[G],ca[G],V):a[G],C?(M.copy(K.normals[Y]).multiplyScalar(fa.x),
    L.copy(K.binormals[Y]).multiplyScalar(fa.y),P.copy(H[Y]).add(M).add(L),f(P.x,P.y,P.z)):f(fa.x,fa.y,m/x*Y);for(ea=w-1;0<=ea;ea--){Y=ea/w;da=t*Math.cos(Y*Math.PI/2);V=v*Math.sin(Y*Math.PI/2);G=0;for(Y=W.length;G<Y;G++)fa=c(W[G],y[G],V),f(fa.x,fa.y,m+da);N=0;for(O=Q.length;N<O;N++)for(R=Q[N],aa=A[N],G=0,Y=R.length;G<Y;G++)fa=c(R[G],aa[G],V),C?f(fa.x,fa.y+H[x-1].y,H[x-1].x+da):f(fa.x,fa.y,m+da)}(function(){var a=l.length/3;if(z){var c=0*X;for(G=0;G<ba;G++)T=U[G],g(T[2]+c,T[1]+c,T[0]+c);c=X*(x+2*w);for(G=
    0;G<ba;G++)T=U[G],g(T[0]+c,T[1]+c,T[2]+c)}else{for(G=0;G<ba;G++)T=U[G],g(T[2],T[1],T[0]);for(G=0;G<ba;G++)T=U[G],g(T[0]+X*x,T[1]+X*x,T[2]+X*x)}S.addGroup(a,l.length/3-a,void 0!==b.material?b.material:0)})();(function(){var a=l.length/3,c=0;e(W,c);c+=W.length;N=0;for(O=Q.length;N<O;N++)R=Q[N],e(R,c),c+=R.length;S.addGroup(a,l.length/3-a,void 0!==b.extrudeMaterial?b.extrudeMaterial:1)})();b.arrays||(this.setIndex(n),this.addAttribute("position",new B(l,3)),this.addAttribute("uv",new B(u,2)))};ib.WorldUVGenerator=
    {generateTopUV:function(a,b,c,d,e){a=b[3*d];d=b[3*d+1];var f=b[3*e];e=b[3*e+1];return[new D(b[3*c],b[3*c+1]),new D(a,d),new D(f,e)]},generateSideWallUV:function(a,b,c,d,e,f){a=b[3*c];var g=b[3*c+1];c=b[3*c+2];var h=b[3*d],k=b[3*d+1];d=b[3*d+2];var m=b[3*e],l=b[3*e+1];e=b[3*e+2];var n=b[3*f],p=b[3*f+1];b=b[3*f+2];return.01>Math.abs(g-k)?[new D(a,1-c),new D(h,1-d),new D(m,1-e),new D(n,1-b)]:[new D(g,1-c),new D(k,1-d),new D(l,1-e),new D(p,1-b)]}};Uc.prototype=Object.create(L.prototype);Uc.prototype.constructor=
    Uc;ac.prototype=Object.create(La.prototype);ac.prototype.constructor=ac;Vc.prototype=Object.create(L.prototype);Vc.prototype.constructor=Vc;wb.prototype=Object.create(E.prototype);wb.prototype.constructor=wb;Wc.prototype=Object.create(L.prototype);Wc.prototype.constructor=Wc;bc.prototype=Object.create(E.prototype);bc.prototype.constructor=bc;Xc.prototype=Object.create(L.prototype);Xc.prototype.constructor=Xc;cc.prototype=Object.create(E.prototype);cc.prototype.constructor=cc;xb.prototype=Object.create(L.prototype);
    xb.prototype.constructor=xb;xb.prototype.toJSON=function(){var a=L.prototype.toJSON.call(this);return ff(this.parameters.shapes,a)};yb.prototype=Object.create(E.prototype);yb.prototype.constructor=yb;yb.prototype.toJSON=function(){var a=E.prototype.toJSON.call(this);return ff(this.parameters.shapes,a)};dc.prototype=Object.create(E.prototype);dc.prototype.constructor=dc;zb.prototype=Object.create(L.prototype);zb.prototype.constructor=zb;ab.prototype=Object.create(E.prototype);ab.prototype.constructor=
    ab;Yc.prototype=Object.create(zb.prototype);Yc.prototype.constructor=Yc;Zc.prototype=Object.create(ab.prototype);Zc.prototype.constructor=Zc;$c.prototype=Object.create(L.prototype);$c.prototype.constructor=$c;ec.prototype=Object.create(E.prototype);ec.prototype.constructor=ec;var ka=Object.freeze({WireframeGeometry:Tb,ParametricGeometry:Hc,ParametricBufferGeometry:Ub,TetrahedronGeometry:Jc,TetrahedronBufferGeometry:Vb,OctahedronGeometry:Kc,OctahedronBufferGeometry:ub,IcosahedronGeometry:Lc,IcosahedronBufferGeometry:Wb,
    DodecahedronGeometry:Mc,DodecahedronBufferGeometry:Xb,PolyhedronGeometry:Ic,PolyhedronBufferGeometry:ja,TubeGeometry:Nc,TubeBufferGeometry:Yb,TorusKnotGeometry:Oc,TorusKnotBufferGeometry:Zb,TorusGeometry:Pc,TorusBufferGeometry:$b,TextGeometry:Uc,TextBufferGeometry:ac,SphereGeometry:Vc,SphereBufferGeometry:wb,RingGeometry:Wc,RingBufferGeometry:bc,PlaneGeometry:Ac,PlaneBufferGeometry:rb,LatheGeometry:Xc,LatheBufferGeometry:cc,ShapeGeometry:xb,ShapeBufferGeometry:yb,ExtrudeGeometry:ib,ExtrudeBufferGeometry:La,
    EdgesGeometry:dc,ConeGeometry:Yc,ConeBufferGeometry:Zc,CylinderGeometry:zb,CylinderBufferGeometry:ab,CircleGeometry:$c,CircleBufferGeometry:ec,BoxGeometry:Mb,BoxBufferGeometry:qb});fc.prototype=Object.create(P.prototype);fc.prototype.constructor=fc;fc.prototype.isShadowMaterial=!0;gc.prototype=Object.create(Fa.prototype);gc.prototype.constructor=gc;gc.prototype.isRawShaderMaterial=!0;Ua.prototype=Object.create(P.prototype);Ua.prototype.constructor=Ua;Ua.prototype.isMeshStandardMaterial=!0;Ua.prototype.copy=
    function(a){P.prototype.copy.call(this,a);this.defines={STANDARD:""};this.color.copy(a.color);this.roughness=a.roughness;this.metalness=a.metalness;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);
    this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.roughnessMap=a.roughnessMap;this.metalnessMap=a.metalnessMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.envMapIntensity=a.envMapIntensity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=
    a.morphTargets;this.morphNormals=a.morphNormals;return this};Ab.prototype=Object.create(Ua.prototype);Ab.prototype.constructor=Ab;Ab.prototype.isMeshPhysicalMaterial=!0;Ab.prototype.copy=function(a){Ua.prototype.copy.call(this,a);this.defines={PHYSICAL:""};this.reflectivity=a.reflectivity;this.clearCoat=a.clearCoat;this.clearCoatRoughness=a.clearCoatRoughness;return this};Ma.prototype=Object.create(P.prototype);Ma.prototype.constructor=Ma;Ma.prototype.isMeshPhongMaterial=!0;Ma.prototype.copy=function(a){P.prototype.copy.call(this,
    a);this.color.copy(a.color);this.specular.copy(a.specular);this.shininess=a.shininess;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=
    a.displacementScale;this.displacementBias=a.displacementBias;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Bb.prototype=
    Object.create(Ma.prototype);Bb.prototype.constructor=Bb;Bb.prototype.isMeshToonMaterial=!0;Bb.prototype.copy=function(a){Ma.prototype.copy.call(this,a);this.gradientMap=a.gradientMap;return this};Cb.prototype=Object.create(P.prototype);Cb.prototype.constructor=Cb;Cb.prototype.isMeshNormalMaterial=!0;Cb.prototype.copy=function(a){P.prototype.copy.call(this,a);this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;
    this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Db.prototype=Object.create(P.prototype);Db.prototype.constructor=Db;Db.prototype.isMeshLambertMaterial=!0;Db.prototype.copy=function(a){P.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=
    a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;
    this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Eb.prototype=Object.create(W.prototype);Eb.prototype.constructor=Eb;Eb.prototype.isLineDashedMaterial=!0;Eb.prototype.copy=function(a){W.prototype.copy.call(this,a);this.scale=a.scale;this.dashSize=a.dashSize;this.gapSize=a.gapSize;return this};var Mg=Object.freeze({ShadowMaterial:fc,SpriteMaterial:hb,RawShaderMaterial:gc,ShaderMaterial:Fa,PointsMaterial:Ka,MeshPhysicalMaterial:Ab,MeshStandardMaterial:Ua,
    MeshPhongMaterial:Ma,MeshToonMaterial:Bb,MeshNormalMaterial:Cb,MeshLambertMaterial:Db,MeshDepthMaterial:eb,MeshDistanceMaterial:fb,MeshBasicMaterial:Aa,LineDashedMaterial:Eb,LineBasicMaterial:W,Material:P}),Ib={enabled:!1,files:{},add:function(a,b){!1!==this.enabled&&(this.files[a]=b)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}},xa=new he,cb={};Object.assign(Na.prototype,{load:function(a,b,c,d){void 0===a&&(a=
    "");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);var e=this,f=Ib.get(a);if(void 0!==f)return e.manager.itemStart(a),setTimeout(function(){b&&b(f);e.manager.itemEnd(a)},0),f;if(void 0!==cb[a])cb[a].push({onLoad:b,onProgress:c,onError:d});else{var g=a.match(/^data:(.*?)(;base64)?,(.*)$/);if(g){c=g[1];var h=!!g[2],g=g[3],g=window.decodeURIComponent(g);h&&(g=window.atob(g));try{var k=(this.responseType||"").toLowerCase();switch(k){case "arraybuffer":case "blob":for(var m=new Uint8Array(g.length),
    h=0;h<g.length;h++)m[h]=g.charCodeAt(h);var l="blob"===k?new Blob([m.buffer],{type:c}):m.buffer;break;case "document":l=(new DOMParser).parseFromString(g,c);break;case "json":l=JSON.parse(g);break;default:l=g}window.setTimeout(function(){b&&b(l);e.manager.itemEnd(a)},0)}catch(u){window.setTimeout(function(){d&&d(u);e.manager.itemEnd(a);e.manager.itemError(a)},0)}}else{cb[a]=[];cb[a].push({onLoad:b,onProgress:c,onError:d});var n=new XMLHttpRequest;n.open("GET",a,!0);n.addEventListener("load",function(b){var c=
    this.response;Ib.add(a,c);var d=cb[a];delete cb[a];if(200===this.status){for(var f=0,g=d.length;f<g;f++){var h=d[f];if(h.onLoad)h.onLoad(c)}e.manager.itemEnd(a)}else if(0===this.status){console.warn("THREE.FileLoader: HTTP Status 0 received.");f=0;for(g=d.length;f<g;f++)if(h=d[f],h.onLoad)h.onLoad(c);e.manager.itemEnd(a)}else{f=0;for(g=d.length;f<g;f++)if(h=d[f],h.onError)h.onError(b);e.manager.itemEnd(a);e.manager.itemError(a)}},!1);n.addEventListener("progress",function(b){for(var c=cb[a],d=0,e=
    c.length;d<e;d++){var f=c[d];if(f.onProgress)f.onProgress(b)}},!1);n.addEventListener("error",function(b){var c=cb[a];delete cb[a];for(var d=0,f=c.length;d<f;d++){var g=c[d];if(g.onError)g.onError(b)}e.manager.itemEnd(a);e.manager.itemError(a)},!1);void 0!==this.responseType&&(n.responseType=this.responseType);void 0!==this.withCredentials&&(n.withCredentials=this.withCredentials);n.overrideMimeType&&n.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(h in this.requestHeader)n.setRequestHeader(h,
    this.requestHeader[h]);n.send(null)}e.manager.itemStart(a);return n}},setPath:function(a){this.path=a;return this},setResponseType:function(a){this.responseType=a;return this},setWithCredentials:function(a){this.withCredentials=a;return this},setMimeType:function(a){this.mimeType=a;return this},setRequestHeader:function(a){this.requestHeader=a;return this}});Object.assign(gf.prototype,{load:function(a,b,c,d){function e(e){m.load(a[e],function(a){a=g._parser(a,!0);h[e]={width:a.width,height:a.height,
    format:a.format,mipmaps:a.mipmaps};f+=1;6===f&&(1===a.mipmapCount&&(k.minFilter=1006),k.format=a.format,k.needsUpdate=!0,b&&b(k))},c,d)}var f,g=this,h=[],k=new Sb;k.image=h;var m=new Na(this.manager);m.setPath(this.path);m.setResponseType("arraybuffer");if(Array.isArray(a))for(var l=f=0,n=a.length;l<n;++l)e(l);else m.load(a,function(a){a=g._parser(a,!0);if(a.isCubemap)for(var c=a.mipmaps.length/a.mipmapCount,d=0;d<c;d++){h[d]={mipmaps:[]};for(var e=0;e<a.mipmapCount;e++)h[d].mipmaps.push(a.mipmaps[d*
    a.mipmapCount+e]),h[d].format=a.format,h[d].width=a.width,h[d].height=a.height}else k.image.width=a.width,k.image.height=a.height,k.mipmaps=a.mipmaps;1===a.mipmapCount&&(k.minFilter=1006);k.format=a.format;k.needsUpdate=!0;b&&b(k)},c,d);return k},setPath:function(a){this.path=a;return this}});Object.assign(ie.prototype,{load:function(a,b,c,d){var e=this,f=new lb,g=new Na(this.manager);g.setResponseType("arraybuffer");g.load(a,function(a){if(a=e._parser(a))void 0!==a.image?f.image=a.image:void 0!==
    a.data&&(f.image.width=a.width,f.image.height=a.height,f.image.data=a.data),f.wrapS=void 0!==a.wrapS?a.wrapS:1001,f.wrapT=void 0!==a.wrapT?a.wrapT:1001,f.magFilter=void 0!==a.magFilter?a.magFilter:1006,f.minFilter=void 0!==a.minFilter?a.minFilter:1008,f.anisotropy=void 0!==a.anisotropy?a.anisotropy:1,void 0!==a.format&&(f.format=a.format),void 0!==a.type&&(f.type=a.type),void 0!==a.mipmaps&&(f.mipmaps=a.mipmaps),1===a.mipmapCount&&(f.minFilter=1006),f.needsUpdate=!0,b&&b(f,a)},c,d);return f}});Object.assign(ad.prototype,
    {crossOrigin:"Anonymous",load:function(a,b,c,d){void 0===a&&(a="");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);var e=this,f=Ib.get(a);if(void 0!==f)return e.manager.itemStart(a),setTimeout(function(){b&&b(f);e.manager.itemEnd(a)},0),f;c=document.createElementNS("http://www.w3.org/1999/xhtml","img");c.addEventListener("load",function(){Ib.add(a,this);b&&b(this);e.manager.itemEnd(a)},!1);c.addEventListener("error",function(b){d&&d(b);e.manager.itemEnd(a);e.manager.itemError(a)},
    !1);"data:"!==a.substr(0,5)&&void 0!==this.crossOrigin&&(c.crossOrigin=this.crossOrigin);e.manager.itemStart(a);c.src=a;return c},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this}});Object.assign(je.prototype,{crossOrigin:"Anonymous",load:function(a,b,c,d){function e(c){g.load(a[c],function(a){f.images[c]=a;h++;6===h&&(f.needsUpdate=!0,b&&b(f))},void 0,d)}var f=new db,g=new ad(this.manager);g.setCrossOrigin(this.crossOrigin);g.setPath(this.path);
    var h=0;for(c=0;c<a.length;++c)e(c);return f},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this}});Object.assign(Ad.prototype,{crossOrigin:"Anonymous",load:function(a,b,c,d){var e=new U,f=new ad(this.manager);f.setCrossOrigin(this.crossOrigin);f.setPath(this.path);f.load(a,function(c){e.image=c;c=0<a.search(/\.(jpg|jpeg)$/)||0===a.search(/^data\:image\/jpeg/);e.format=c?1022:1023;e.needsUpdate=!0;void 0!==b&&b(e)},c,d);return e},setCrossOrigin:function(a){this.crossOrigin=
    a;return this},setPath:function(a){this.path=a;return this}});Object.assign(C.prototype,{getPoint:function(){console.warn("THREE.Curve: .getPoint() not implemented.");return null},getPointAt:function(a,b){a=this.getUtoTmapping(a);return this.getPoint(a,b)},getPoints:function(a){void 0===a&&(a=5);for(var b=[],c=0;c<=a;c++)b.push(this.getPoint(c/a));return b},getSpacedPoints:function(a){void 0===a&&(a=5);for(var b=[],c=0;c<=a;c++)b.push(this.getPointAt(c/a));return b},getLength:function(){var a=this.getLengths();
    return a[a.length-1]},getLengths:function(a){void 0===a&&(a=this.arcLengthDivisions);if(this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var b=[],c=this.getPoint(0),d,e=0;b.push(0);for(d=1;d<=a;d++){var f=this.getPoint(d/a);e+=f.distanceTo(c);b.push(e);c=f}return this.cacheArcLengths=b},updateArcLengths:function(){this.needsUpdate=!0;this.getLengths()},getUtoTmapping:function(a,b){var c=this.getLengths(),d=c.length;b=b?b:a*
    c[d-1];for(var e=0,f=d-1,g;e<=f;)if(a=Math.floor(e+(f-e)/2),g=c[a]-b,0>g)e=a+1;else if(0<g)f=a-1;else{f=a;break}a=f;if(c[a]===b)return a/(d-1);e=c[a];return(a+(b-e)/(c[a+1]-e))/(d-1)},getTangent:function(a){var b=a-1E-4;a+=1E-4;0>b&&(b=0);1<a&&(a=1);b=this.getPoint(b);return this.getPoint(a).clone().sub(b).normalize()},getTangentAt:function(a){a=this.getUtoTmapping(a);return this.getTangent(a)},computeFrenetFrames:function(a,b){var c=new p,d=[],e=[],f=[],g=new p,h=new O,k;for(k=0;k<=a;k++){var m=
    k/a;d[k]=this.getTangentAt(m);d[k].normalize()}e[0]=new p;f[0]=new p;k=Number.MAX_VALUE;m=Math.abs(d[0].x);var l=Math.abs(d[0].y),n=Math.abs(d[0].z);m<=k&&(k=m,c.set(1,0,0));l<=k&&(k=l,c.set(0,1,0));n<=k&&c.set(0,0,1);g.crossVectors(d[0],c).normalize();e[0].crossVectors(d[0],g);f[0].crossVectors(d[0],e[0]);for(k=1;k<=a;k++)e[k]=e[k-1].clone(),f[k]=f[k-1].clone(),g.crossVectors(d[k-1],d[k]),g.length()>Number.EPSILON&&(g.normalize(),c=Math.acos(Q.clamp(d[k-1].dot(d[k]),-1,1)),e[k].applyMatrix4(h.makeRotationAxis(g,
    c))),f[k].crossVectors(d[k],e[k]);if(!0===b)for(c=Math.acos(Q.clamp(e[0].dot(e[a]),-1,1)),c/=a,0<d[0].dot(g.crossVectors(e[0],e[a]))&&(c=-c),k=1;k<=a;k++)e[k].applyMatrix4(h.makeRotationAxis(d[k],c*k)),f[k].crossVectors(d[k],e[k]);return{tangents:d,normals:e,binormals:f}},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.arcLengthDivisions=a.arcLengthDivisions;return this},toJSON:function(){var a={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};a.arcLengthDivisions=
    this.arcLengthDivisions;a.type=this.type;return a},fromJSON:function(a){this.arcLengthDivisions=a.arcLengthDivisions;return this}});Ba.prototype=Object.create(C.prototype);Ba.prototype.constructor=Ba;Ba.prototype.isEllipseCurve=!0;Ba.prototype.getPoint=function(a,b){b=b||new D;for(var c=2*Math.PI,d=this.aEndAngle-this.aStartAngle,e=Math.abs(d)<Number.EPSILON;0>d;)d+=c;for(;d>c;)d-=c;d<Number.EPSILON&&(d=e?0:c);!0!==this.aClockwise||e||(d=d===c?-c:d-c);c=this.aStartAngle+a*d;a=this.aX+this.xRadius*
    Math.cos(c);var f=this.aY+this.yRadius*Math.sin(c);0!==this.aRotation&&(c=Math.cos(this.aRotation),d=Math.sin(this.aRotation),e=a-this.aX,f-=this.aY,a=e*c-f*d+this.aX,f=e*d+f*c+this.aY);return b.set(a,f)};Ba.prototype.copy=function(a){C.prototype.copy.call(this,a);this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return this};Ba.prototype.toJSON=function(){var a=
    C.prototype.toJSON.call(this);a.aX=this.aX;a.aY=this.aY;a.xRadius=this.xRadius;a.yRadius=this.yRadius;a.aStartAngle=this.aStartAngle;a.aEndAngle=this.aEndAngle;a.aClockwise=this.aClockwise;a.aRotation=this.aRotation;return a};Ba.prototype.fromJSON=function(a){C.prototype.fromJSON.call(this,a);this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return this};hc.prototype=
    Object.create(Ba.prototype);hc.prototype.constructor=hc;hc.prototype.isArcCurve=!0;var Td=new p,Ee=new ke,Fe=new ke,Ge=new ke;ca.prototype=Object.create(C.prototype);ca.prototype.constructor=ca;ca.prototype.isCatmullRomCurve3=!0;ca.prototype.getPoint=function(a,b){b=b||new p;var c=this.points,d=c.length;a*=d-(this.closed?0:1);var e=Math.floor(a);a-=e;this.closed?e+=0<e?0:(Math.floor(Math.abs(e)/c.length)+1)*c.length:0===a&&e===d-1&&(e=d-2,a=1);if(this.closed||0<e)var f=c[(e-1)%d];else Td.subVectors(c[0],
    c[1]).add(c[0]),f=Td;var g=c[e%d];var h=c[(e+1)%d];this.closed||e+2<d?c=c[(e+2)%d]:(Td.subVectors(c[d-1],c[d-2]).add(c[d-1]),c=Td);if("centripetal"===this.curveType||"chordal"===this.curveType){var k="chordal"===this.curveType?.5:.25,d=Math.pow(f.distanceToSquared(g),k),e=Math.pow(g.distanceToSquared(h),k),k=Math.pow(h.distanceToSquared(c),k);1E-4>e&&(e=1);1E-4>d&&(d=e);1E-4>k&&(k=e);Ee.initNonuniformCatmullRom(f.x,g.x,h.x,c.x,d,e,k);Fe.initNonuniformCatmullRom(f.y,g.y,h.y,c.y,d,e,k);Ge.initNonuniformCatmullRom(f.z,
    g.z,h.z,c.z,d,e,k)}else"catmullrom"===this.curveType&&(Ee.initCatmullRom(f.x,g.x,h.x,c.x,this.tension),Fe.initCatmullRom(f.y,g.y,h.y,c.y,this.tension),Ge.initCatmullRom(f.z,g.z,h.z,c.z,this.tension));b.set(Ee.calc(a),Fe.calc(a),Ge.calc(a));return b};ca.prototype.copy=function(a){C.prototype.copy.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++)this.points.push(a.points[b].clone());this.closed=a.closed;this.curveType=a.curveType;this.tension=a.tension;return this};ca.prototype.toJSON=
    function(){var a=C.prototype.toJSON.call(this);a.points=[];for(var b=0,c=this.points.length;b<c;b++)a.points.push(this.points[b].toArray());a.closed=this.closed;a.curveType=this.curveType;a.tension=this.tension;return a};ca.prototype.fromJSON=function(a){C.prototype.fromJSON.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++){var d=a.points[b];this.points.push((new p).fromArray(d))}this.closed=a.closed;this.curveType=a.curveType;this.tension=a.tension;return this};Oa.prototype=Object.create(C.prototype);
    Oa.prototype.constructor=Oa;Oa.prototype.isCubicBezierCurve=!0;Oa.prototype.getPoint=function(a,b){b=b||new D;var c=this.v0,d=this.v1,e=this.v2,f=this.v3;b.set(cd(a,c.x,d.x,e.x,f.x),cd(a,c.y,d.y,e.y,f.y));return b};Oa.prototype.copy=function(a){C.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return this};Oa.prototype.toJSON=function(){var a=C.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();a.v3=
    this.v3.toArray();return a};Oa.prototype.fromJSON=function(a){C.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return this};Va.prototype=Object.create(C.prototype);Va.prototype.constructor=Va;Va.prototype.isCubicBezierCurve3=!0;Va.prototype.getPoint=function(a,b){b=b||new p;var c=this.v0,d=this.v1,e=this.v2,f=this.v3;b.set(cd(a,c.x,d.x,e.x,f.x),cd(a,c.y,d.y,e.y,f.y),cd(a,c.z,d.z,e.z,f.z));return b};Va.prototype.copy=
    function(a){C.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return this};Va.prototype.toJSON=function(){var a=C.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();a.v3=this.v3.toArray();return a};Va.prototype.fromJSON=function(a){C.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return this};ya.prototype=Object.create(C.prototype);
    ya.prototype.constructor=ya;ya.prototype.isLineCurve=!0;ya.prototype.getPoint=function(a,b){b=b||new D;1===a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),b.multiplyScalar(a).add(this.v1));return b};ya.prototype.getPointAt=function(a,b){return this.getPoint(a,b)};ya.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()};ya.prototype.copy=function(a){C.prototype.copy.call(this,a);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};ya.prototype.toJSON=function(){var a=C.prototype.toJSON.call(this);
    a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a};ya.prototype.fromJSON=function(a){C.prototype.fromJSON.call(this,a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};Pa.prototype=Object.create(C.prototype);Pa.prototype.constructor=Pa;Pa.prototype.isLineCurve3=!0;Pa.prototype.getPoint=function(a,b){b=b||new p;1===a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),b.multiplyScalar(a).add(this.v1));return b};Pa.prototype.getPointAt=function(a,b){return this.getPoint(a,b)};Pa.prototype.copy=
    function(a){C.prototype.copy.call(this,a);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};Pa.prototype.toJSON=function(){var a=C.prototype.toJSON.call(this);a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a};Pa.prototype.fromJSON=function(a){C.prototype.fromJSON.call(this,a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};Qa.prototype=Object.create(C.prototype);Qa.prototype.constructor=Qa;Qa.prototype.isQuadraticBezierCurve=!0;Qa.prototype.getPoint=function(a,b){b=b||new D;var c=
    this.v0,d=this.v1,e=this.v2;b.set(bd(a,c.x,d.x,e.x),bd(a,c.y,d.y,e.y));return b};Qa.prototype.copy=function(a){C.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};Qa.prototype.toJSON=function(){var a=C.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a};Qa.prototype.fromJSON=function(a){C.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};
    Wa.prototype=Object.create(C.prototype);Wa.prototype.constructor=Wa;Wa.prototype.isQuadraticBezierCurve3=!0;Wa.prototype.getPoint=function(a,b){b=b||new p;var c=this.v0,d=this.v1,e=this.v2;b.set(bd(a,c.x,d.x,e.x),bd(a,c.y,d.y,e.y),bd(a,c.z,d.z,e.z));return b};Wa.prototype.copy=function(a){C.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};Wa.prototype.toJSON=function(){var a=C.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();
    a.v2=this.v2.toArray();return a};Wa.prototype.fromJSON=function(a){C.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};Ra.prototype=Object.create(C.prototype);Ra.prototype.constructor=Ra;Ra.prototype.isSplineCurve=!0;Ra.prototype.getPoint=function(a,b){b=b||new D;var c=this.points,d=(c.length-1)*a;a=Math.floor(d);var d=d-a,e=c[0===a?a:a-1],f=c[a],g=c[a>c.length-2?c.length-1:a+1],c=c[a>c.length-3?c.length-1:a+2];b.set(hf(d,e.x,f.x,
    g.x,c.x),hf(d,e.y,f.y,g.y,c.y));return b};Ra.prototype.copy=function(a){C.prototype.copy.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++)this.points.push(a.points[b].clone());return this};Ra.prototype.toJSON=function(){var a=C.prototype.toJSON.call(this);a.points=[];for(var b=0,c=this.points.length;b<c;b++)a.points.push(this.points[b].toArray());return a};Ra.prototype.fromJSON=function(a){C.prototype.fromJSON.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++){var d=
    a.points[b];this.points.push((new D).fromArray(d))}return this};var Ng=Object.freeze({ArcCurve:hc,CatmullRomCurve3:ca,CubicBezierCurve:Oa,CubicBezierCurve3:Va,EllipseCurve:Ba,LineCurve:ya,LineCurve3:Pa,QuadraticBezierCurve:Qa,QuadraticBezierCurve3:Wa,SplineCurve:Ra});bb.prototype=Object.assign(Object.create(C.prototype),{constructor:bb,add:function(a){this.curves.push(a)},closePath:function(){var a=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new ya(b,
    a))},getPoint:function(a){var b=a*this.getLength(),c=this.getCurveLengths();for(a=0;a<c.length;){if(c[a]>=b)return b=c[a]-b,a=this.curves[a],c=a.getLength(),a.getPointAt(0===c?0:1-b/c);a++}return null},getLength:function(){var a=this.getCurveLengths();return a[a.length-1]},updateArcLengths:function(){this.needsUpdate=!0;this.cacheLengths=null;this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],
    b=0,c=0,d=this.curves.length;c<d;c++)b+=this.curves[c].getLength(),a.push(b);return this.cacheLengths=a},getSpacedPoints:function(a){void 0===a&&(a=40);for(var b=[],c=0;c<=a;c++)b.push(this.getPoint(c/a));this.autoClose&&b.push(b[0]);return b},getPoints:function(a){a=a||12;for(var b=[],c,d=0,e=this.curves;d<e.length;d++)for(var f=e[d],f=f.getPoints(f&&f.isEllipseCurve?2*a:f&&f.isLineCurve?1:f&&f.isSplineCurve?a*f.points.length:a),g=0;g<f.length;g++){var h=f[g];c&&c.equals(h)||(b.push(h),c=h)}this.autoClose&&
    1<b.length&&!b[b.length-1].equals(b[0])&&b.push(b[0]);return b},copy:function(a){C.prototype.copy.call(this,a);this.curves=[];for(var b=0,c=a.curves.length;b<c;b++)this.curves.push(a.curves[b].clone());this.autoClose=a.autoClose;return this},toJSON:function(){var a=C.prototype.toJSON.call(this);a.autoClose=this.autoClose;a.curves=[];for(var b=0,c=this.curves.length;b<c;b++)a.curves.push(this.curves[b].toJSON());return a},fromJSON:function(a){C.prototype.fromJSON.call(this,a);this.autoClose=a.autoClose;
    this.curves=[];for(var b=0,c=a.curves.length;b<c;b++){var d=a.curves[b];this.curves.push((new Ng[d.type]).fromJSON(d))}return this}});Sa.prototype=Object.assign(Object.create(bb.prototype),{constructor:Sa,setFromPoints:function(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;b<c;b++)this.lineTo(a[b].x,a[b].y)},moveTo:function(a,b){this.currentPoint.set(a,b)},lineTo:function(a,b){var c=new ya(this.currentPoint.clone(),new D(a,b));this.curves.push(c);this.currentPoint.set(a,b)},quadraticCurveTo:function(a,
    b,c,d){a=new Qa(this.currentPoint.clone(),new D(a,b),new D(c,d));this.curves.push(a);this.currentPoint.set(c,d)},bezierCurveTo:function(a,b,c,d,e,f){a=new Oa(this.currentPoint.clone(),new D(a,b),new D(c,d),new D(e,f));this.curves.push(a);this.currentPoint.set(e,f)},splineThru:function(a){var b=[this.currentPoint.clone()].concat(a),b=new Ra(b);this.curves.push(b);this.currentPoint.copy(a[a.length-1])},arc:function(a,b,c,d,e,f){this.absarc(a+this.currentPoint.x,b+this.currentPoint.y,c,d,e,f)},absarc:function(a,
    b,c,d,e,f){this.absellipse(a,b,c,c,d,e,f)},ellipse:function(a,b,c,d,e,f,g,h){this.absellipse(a+this.currentPoint.x,b+this.currentPoint.y,c,d,e,f,g,h)},absellipse:function(a,b,c,d,e,f,g,h){a=new Ba(a,b,c,d,e,f,g,h);0<this.curves.length&&(b=a.getPoint(0),b.equals(this.currentPoint)||this.lineTo(b.x,b.y));this.curves.push(a);a=a.getPoint(1);this.currentPoint.copy(a)},copy:function(a){bb.prototype.copy.call(this,a);this.currentPoint.copy(a.currentPoint);return this},toJSON:function(){var a=bb.prototype.toJSON.call(this);
    a.currentPoint=this.currentPoint.toArray();return a},fromJSON:function(a){bb.prototype.fromJSON.call(this,a);this.currentPoint.fromArray(a.currentPoint);return this}});jb.prototype=Object.assign(Object.create(Sa.prototype),{constructor:jb,getPointsHoles:function(a){for(var b=[],c=0,d=this.holes.length;c<d;c++)b[c]=this.holes[c].getPoints(a);return b},extractPoints:function(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}},copy:function(a){Sa.prototype.copy.call(this,a);this.holes=[];
    for(var b=0,c=a.holes.length;b<c;b++)this.holes.push(a.holes[b].clone());return this},toJSON:function(){var a=Sa.prototype.toJSON.call(this);a.uuid=this.uuid;a.holes=[];for(var b=0,c=this.holes.length;b<c;b++)a.holes.push(this.holes[b].toJSON());return a},fromJSON:function(a){Sa.prototype.fromJSON.call(this,a);this.uuid=a.uuid;this.holes=[];for(var b=0,c=a.holes.length;b<c;b++){var d=a.holes[b];this.holes.push((new Sa).fromJSON(d))}return this}});da.prototype=Object.assign(Object.create(x.prototype),
    {constructor:da,isLight:!0,copy:function(a){x.prototype.copy.call(this,a);this.color.copy(a.color);this.intensity=a.intensity;return this},toJSON:function(a){a=x.prototype.toJSON.call(this,a);a.object.color=this.color.getHex();a.object.intensity=this.intensity;void 0!==this.groundColor&&(a.object.groundColor=this.groundColor.getHex());void 0!==this.distance&&(a.object.distance=this.distance);void 0!==this.angle&&(a.object.angle=this.angle);void 0!==this.decay&&(a.object.decay=this.decay);void 0!==
    this.penumbra&&(a.object.penumbra=this.penumbra);void 0!==this.shadow&&(a.object.shadow=this.shadow.toJSON());return a}});Bd.prototype=Object.assign(Object.create(da.prototype),{constructor:Bd,isHemisphereLight:!0,copy:function(a){da.prototype.copy.call(this,a);this.groundColor.copy(a.groundColor);return this}});Object.assign(Fb.prototype,{copy:function(a){this.camera=a.camera.clone();this.bias=a.bias;this.radius=a.radius;this.mapSize.copy(a.mapSize);return this},clone:function(){return(new this.constructor).copy(this)},
    toJSON:function(){var a={};0!==this.bias&&(a.bias=this.bias);1!==this.radius&&(a.radius=this.radius);if(512!==this.mapSize.x||512!==this.mapSize.y)a.mapSize=this.mapSize.toArray();a.camera=this.camera.toJSON(!1).object;delete a.camera.matrix;return a}});Cd.prototype=Object.assign(Object.create(Fb.prototype),{constructor:Cd,isSpotLightShadow:!0,update:function(a){var b=this.camera,c=2*Q.RAD2DEG*a.angle,d=this.mapSize.width/this.mapSize.height;a=a.distance||b.far;if(c!==b.fov||d!==b.aspect||a!==b.far)b.fov=
    c,b.aspect=d,b.far=a,b.updateProjectionMatrix()}});Dd.prototype=Object.assign(Object.create(da.prototype),{constructor:Dd,isSpotLight:!0,copy:function(a){da.prototype.copy.call(this,a);this.distance=a.distance;this.angle=a.angle;this.penumbra=a.penumbra;this.decay=a.decay;this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});Ed.prototype=Object.assign(Object.create(da.prototype),{constructor:Ed,isPointLight:!0,copy:function(a){da.prototype.copy.call(this,a);this.distance=a.distance;
    this.decay=a.decay;this.shadow=a.shadow.clone();return this}});Fd.prototype=Object.assign(Object.create(Fb.prototype),{constructor:Fd});Gd.prototype=Object.assign(Object.create(da.prototype),{constructor:Gd,isDirectionalLight:!0,copy:function(a){da.prototype.copy.call(this,a);this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});Hd.prototype=Object.assign(Object.create(da.prototype),{constructor:Hd,isAmbientLight:!0});Id.prototype=Object.assign(Object.create(da.prototype),{constructor:Id,
    isRectAreaLight:!0,copy:function(a){da.prototype.copy.call(this,a);this.width=a.width;this.height=a.height;return this},toJSON:function(a){a=da.prototype.toJSON.call(this,a);a.object.width=this.width;a.object.height=this.height;return a}});Jd.prototype=Object.assign(Object.create(T.prototype),{constructor:Jd,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});Kd.prototype=Object.assign(Object.create(T.prototype),
    {constructor:Kd,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});Object.assign(pa.prototype,{evaluate:function(a){var b=this.parameterPositions,c=this._cachedIndex,d=b[c],e=b[c-1];a:{b:{c:{d:if(!(a<d)){for(var f=c+2;;){if(void 0===d){if(a<e)break d;this._cachedIndex=c=b.length;return this.afterEnd_(c-1,a,e)}if(c===f)break;e=d;d=b[++c];if(a<d)break b}d=b.length;break c}if(a>=e)break a;else{f=b[1];a<f&&
    (c=2,e=f);for(f=c-2;;){if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(c===f)break;d=e;e=b[--c-1];if(a>=e)break b}d=c;c=0}}for(;c<d;)e=c+d>>>1,a<b[e]?d=e:c=e+1;d=b[c];e=b[c-1];if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(void 0===d)return this._cachedIndex=c=b.length,this.afterEnd_(c-1,e,a)}this._cachedIndex=c;this.intervalChanged_(c,e,d)}return this.interpolate_(c,e,a,d)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||
    this.DefaultSettings_},copySampleValue_:function(a){var b=this.resultBuffer,c=this.sampleValues,d=this.valueSize;a*=d;for(var e=0;e!==d;++e)b[e]=c[a+e];return b},interpolate_:function(){throw Error("call to abstract method");},intervalChanged_:function(){}});Object.assign(pa.prototype,{beforeStart_:pa.prototype.copySampleValue_,afterEnd_:pa.prototype.copySampleValue_});Ld.prototype=Object.assign(Object.create(pa.prototype),{constructor:Ld,interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,
    g=this.valueSize;a*=g;b=(c-b)/(d-b);for(c=a+g;a!==c;a+=4)ha.slerpFlat(e,0,f,a-g,f,a,b);return e}});dd.prototype=Object.assign(Object.create(T.prototype),{constructor:dd,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(a){return new Ld(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:void 0});Md.prototype=Object.assign(Object.create(T.prototype),{constructor:Md,ValueTypeName:"color"});ic.prototype=Object.assign(Object.create(T.prototype),
    {constructor:ic,ValueTypeName:"number"});Nd.prototype=Object.assign(Object.create(pa.prototype),{constructor:Nd,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(a,b,c){var d=this.parameterPositions,e=a-2,f=a+1,g=d[e],h=d[f];if(void 0===g)switch(this.getSettings_().endingStart){case 2401:e=a;g=2*b-c;break;case 2402:e=d.length-2;g=b+d[e]-d[e+1];break;default:e=a,g=c}if(void 0===h)switch(this.getSettings_().endingEnd){case 2401:f=a;h=2*c-b;break;case 2402:f=1;h=c+d[1]-d[0];
    break;default:f=a-1,h=b}a=.5*(c-b);d=this.valueSize;this._weightPrev=a/(b-g);this._weightNext=a/(h-c);this._offsetPrev=e*d;this._offsetNext=f*d},interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;var h=a-g,k=this._offsetPrev,m=this._offsetNext,l=this._weightPrev,n=this._weightNext,p=(c-b)/(d-b);c=p*p;d=c*p;b=-l*d+2*l*c-l*p;l=(1+l)*d+(-1.5-2*l)*c+(-.5+l)*p+1;p=(-1-n)*d+(1.5+n)*c+.5*p;n=n*d-n*c;for(c=0;c!==g;++c)e[c]=b*f[k+c]+l*f[h+c]+p*f[a+c]+n*f[m+c];
    return e}});ed.prototype=Object.assign(Object.create(pa.prototype),{constructor:ed,interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;var h=a-g;b=(c-b)/(d-b);c=1-b;for(d=0;d!==g;++d)e[d]=f[h+d]*c+f[a+d]*b;return e}});Od.prototype=Object.assign(Object.create(pa.prototype),{constructor:Od,interpolate_:function(a){return this.copySampleValue_(a-1)}});var ga={arraySlice:function(a,b,c){return ga.isTypedArray(a)?new a.constructor(a.subarray(b,void 0!==c?c:
    a.length)):a.slice(b,c)},convertArray:function(a,b,c){return!a||!c&&a.constructor===b?a:"number"===typeof b.BYTES_PER_ELEMENT?new b(a):Array.prototype.slice.call(a)},isTypedArray:function(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)},getKeyframeOrder:function(a){for(var b=a.length,c=Array(b),d=0;d!==b;++d)c[d]=d;c.sort(function(b,c){return a[b]-a[c]});return c},sortedArray:function(a,b,c){for(var d=a.length,e=new a.constructor(d),f=0,g=0;g!==d;++f)for(var h=c[f]*b,k=0;k!==b;++k)e[g++]=
    a[h+k];return e},flattenJSON:function(a,b,c,d){for(var e=1,f=a[0];void 0!==f&&void 0===f[d];)f=a[e++];if(void 0!==f){var g=f[d];if(void 0!==g)if(Array.isArray(g)){do g=f[d],void 0!==g&&(b.push(f.time),c.push.apply(c,g)),f=a[e++];while(void 0!==f)}else if(void 0!==g.toArray){do g=f[d],void 0!==g&&(b.push(f.time),g.toArray(c,c.length)),f=a[e++];while(void 0!==f)}else{do g=f[d],void 0!==g&&(b.push(f.time),c.push(g)),f=a[e++];while(void 0!==f)}}}};Object.assign(T,{parse:function(a){if(void 0===a.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");
    var b=T._getTrackTypeForValueTypeName(a.type);if(void 0===a.times){var c=[],d=[];ga.flattenJSON(a.keys,c,d,"value");a.times=c;a.values=d}return void 0!==b.parse?b.parse(a):new b(a.name,a.times,a.values,a.interpolation)},toJSON:function(a){var b=a.constructor;if(void 0!==b.toJSON)b=b.toJSON(a);else{var b={name:a.name,times:ga.convertArray(a.times,Array),values:ga.convertArray(a.values,Array)},c=a.getInterpolation();c!==a.DefaultInterpolation&&(b.interpolation=c)}b.type=a.ValueTypeName;return b},_getTrackTypeForValueTypeName:function(a){switch(a.toLowerCase()){case "scalar":case "double":case "float":case "number":case "integer":return ic;
    case "vector":case "vector2":case "vector3":case "vector4":return jc;case "color":return Md;case "quaternion":return dd;case "bool":case "boolean":return Kd;case "string":return Jd}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+a);}});Object.assign(T.prototype,{constructor:T,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(a){return new Od(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodLinear:function(a){return new ed(this.times,
    this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:function(a){return new Nd(this.times,this.values,this.getValueSize(),a)},setInterpolation:function(a){switch(a){case 2300:var b=this.InterpolantFactoryMethodDiscrete;break;case 2301:b=this.InterpolantFactoryMethodLinear;break;case 2302:b=this.InterpolantFactoryMethodSmooth}if(void 0===b){b="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant)if(a!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);
    else throw Error(b);console.warn("THREE.KeyframeTrack:",b)}else this.createInterpolant=b},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(a){if(0!==a)for(var b=this.times,c=0,d=b.length;c!==d;++c)b[c]+=a;return this},scale:function(a){if(1!==a)for(var b=
    this.times,c=0,d=b.length;c!==d;++c)b[c]*=a;return this},trim:function(a,b){for(var c=this.times,d=c.length,e=0,f=d-1;e!==d&&c[e]<a;)++e;for(;-1!==f&&c[f]>b;)--f;++f;if(0!==e||f!==d)e>=f&&(f=Math.max(f,1),e=f-1),a=this.getValueSize(),this.times=ga.arraySlice(c,e,f),this.values=ga.arraySlice(this.values,e*a,f*a);return this},validate:function(){var a=!0,b=this.getValueSize();0!==b-Math.floor(b)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),a=!1);var c=this.times,b=this.values,
    d=c.length;0===d&&(console.error("THREE.KeyframeTrack: Track is empty.",this),a=!1);for(var e=null,f=0;f!==d;f++){var g=c[f];if("number"===typeof g&&isNaN(g)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,f,g);a=!1;break}if(null!==e&&e>g){console.error("THREE.KeyframeTrack: Out of order keys.",this,f,g,e);a=!1;break}e=g}if(void 0!==b&&ga.isTypedArray(b))for(f=0,c=b.length;f!==c;++f)if(d=b[f],isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,f,
    d);a=!1;break}return a},optimize:function(){for(var a,b,c=this.times,d=this.values,e=this.getValueSize(),f=2302===this.getInterpolation(),g=1,h=c.length-1,k=1;k<h;++k){a=!1;var m=c[k];if(m!==c[k+1]&&(1!==k||m!==m[0]))if(f)a=!0;else{b=k*e;for(var l=b-e,n=b+e,m=0;m!==e;++m){var p=d[b+m];if(p!==d[l+m]||p!==d[n+m]){a=!0;break}}}if(a){if(k!==g)for(c[g]=c[k],b=k*e,a=g*e,m=0;m!==e;++m)d[a+m]=d[b+m];++g}}if(0<h){c[g]=c[h];b=h*e;a=g*e;for(m=0;m!==e;++m)d[a+m]=d[b+m];++g}g!==c.length&&(this.times=ga.arraySlice(c,
    0,g),this.values=ga.arraySlice(d,0,g*e));return this}});jc.prototype=Object.assign(Object.create(T.prototype),{constructor:jc,ValueTypeName:"vector"});Object.assign(Ca,{parse:function(a){for(var b=[],c=a.tracks,d=1/(a.fps||1),e=0,f=c.length;e!==f;++e)b.push(T.parse(c[e]).scale(d));return new Ca(a.name,a.duration,b)},toJSON:function(a){var b=[],c=a.tracks;a={name:a.name,duration:a.duration,tracks:b};for(var d=0,e=c.length;d!==e;++d)b.push(T.toJSON(c[d]));return a},CreateFromMorphTargetSequence:function(a,
    b,c,d){for(var e=b.length,f=[],g=0;g<e;g++){var h=[],k=[];h.push((g+e-1)%e,g,(g+1)%e);k.push(0,1,0);var m=ga.getKeyframeOrder(h),h=ga.sortedArray(h,1,m),k=ga.sortedArray(k,1,m);d||0!==h[0]||(h.push(e),k.push(k[0]));f.push((new ic(".morphTargetInfluences["+b[g].name+"]",h,k)).scale(1/c))}return new Ca(a,-1,f)},findByName:function(a,b){var c=a;Array.isArray(a)||(c=a.geometry&&a.geometry.animations||a.animations);for(a=0;a<c.length;a++)if(c[a].name===b)return c[a];return null},CreateClipsFromMorphTargetSequences:function(a,
    b,c){for(var d,e={},f=/^([\w-]*?)([\d]+)$/,g=0,h=a.length;g<h;g++){var k=a[g],m=k.name.match(f);m&&1<m.length&&(d=m[1],(m=e[d])||(e[d]=m=[]),m.push(k))}a=[];for(d in e)a.push(Ca.CreateFromMorphTargetSequence(d,e[d],b,c));return a},parseAnimation:function(a,b){if(!a)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var c=function(a,b,c,d,e){if(0!==c.length){var f=[],g=[];ga.flattenJSON(c,f,g,d);0!==f.length&&e.push(new a(b,f,g))}},d=[],e=a.name||"default",f=a.length||
    -1,g=a.fps||30;a=a.hierarchy||[];for(var h=0;h<a.length;h++){var k=a[h].keys;if(k&&0!==k.length)if(k[0].morphTargets){for(var f={},m=0;m<k.length;m++)if(k[m].morphTargets)for(var l=0;l<k[m].morphTargets.length;l++)f[k[m].morphTargets[l]]=-1;for(var n in f){for(var p=[],r=[],l=0;l!==k[m].morphTargets.length;++l){var t=k[m];p.push(t.time);r.push(t.morphTarget===n?1:0)}d.push(new ic(".morphTargetInfluence["+n+"]",p,r))}f=f.length*(g||1)}else m=".bones["+b[h].name+"]",c(jc,m+".position",k,"pos",d),c(dd,
    m+".quaternion",k,"rot",d),c(jc,m+".scale",k,"scl",d)}return 0===d.length?null:new Ca(e,f,d)}});Object.assign(Ca.prototype,{resetDuration:function(){for(var a=0,b=0,c=this.tracks.length;b!==c;++b)var d=this.tracks[b],a=Math.max(a,d.times[d.times.length-1]);this.duration=a},trim:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this},optimize:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this}});Object.assign(Pd.prototype,
    {load:function(a,b,c,d){var e=this;(new Na(e.manager)).load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},setTextures:function(a){this.textures=a},parse:function(a){function b(a){void 0===c[a]&&console.warn("THREE.MaterialLoader: Undefined texture",a);return c[a]}var c=this.textures,d=new Mg[a.type];void 0!==a.uuid&&(d.uuid=a.uuid);void 0!==a.name&&(d.name=a.name);void 0!==a.color&&d.color.setHex(a.color);void 0!==a.roughness&&(d.roughness=a.roughness);void 0!==a.metalness&&(d.metalness=a.metalness);
    void 0!==a.emissive&&d.emissive.setHex(a.emissive);void 0!==a.specular&&d.specular.setHex(a.specular);void 0!==a.shininess&&(d.shininess=a.shininess);void 0!==a.clearCoat&&(d.clearCoat=a.clearCoat);void 0!==a.clearCoatRoughness&&(d.clearCoatRoughness=a.clearCoatRoughness);void 0!==a.uniforms&&(d.uniforms=a.uniforms);void 0!==a.vertexShader&&(d.vertexShader=a.vertexShader);void 0!==a.fragmentShader&&(d.fragmentShader=a.fragmentShader);void 0!==a.vertexColors&&(d.vertexColors=a.vertexColors);void 0!==
    a.fog&&(d.fog=a.fog);void 0!==a.flatShading&&(d.flatShading=a.flatShading);void 0!==a.blending&&(d.blending=a.blending);void 0!==a.side&&(d.side=a.side);void 0!==a.opacity&&(d.opacity=a.opacity);void 0!==a.transparent&&(d.transparent=a.transparent);void 0!==a.alphaTest&&(d.alphaTest=a.alphaTest);void 0!==a.depthTest&&(d.depthTest=a.depthTest);void 0!==a.depthWrite&&(d.depthWrite=a.depthWrite);void 0!==a.colorWrite&&(d.colorWrite=a.colorWrite);void 0!==a.wireframe&&(d.wireframe=a.wireframe);void 0!==
    a.wireframeLinewidth&&(d.wireframeLinewidth=a.wireframeLinewidth);void 0!==a.wireframeLinecap&&(d.wireframeLinecap=a.wireframeLinecap);void 0!==a.wireframeLinejoin&&(d.wireframeLinejoin=a.wireframeLinejoin);void 0!==a.rotation&&(d.rotation=a.rotation);1!==a.linewidth&&(d.linewidth=a.linewidth);void 0!==a.dashSize&&(d.dashSize=a.dashSize);void 0!==a.gapSize&&(d.gapSize=a.gapSize);void 0!==a.scale&&(d.scale=a.scale);void 0!==a.skinning&&(d.skinning=a.skinning);void 0!==a.morphTargets&&(d.morphTargets=
    a.morphTargets);void 0!==a.dithering&&(d.dithering=a.dithering);void 0!==a.visible&&(d.visible=a.visible);void 0!==a.userData&&(d.userData=a.userData);void 0!==a.shading&&(d.flatShading=1===a.shading);void 0!==a.size&&(d.size=a.size);void 0!==a.sizeAttenuation&&(d.sizeAttenuation=a.sizeAttenuation);void 0!==a.map&&(d.map=b(a.map));void 0!==a.alphaMap&&(d.alphaMap=b(a.alphaMap),d.transparent=!0);void 0!==a.bumpMap&&(d.bumpMap=b(a.bumpMap));void 0!==a.bumpScale&&(d.bumpScale=a.bumpScale);void 0!==a.normalMap&&
    (d.normalMap=b(a.normalMap));if(void 0!==a.normalScale){var e=a.normalScale;!1===Array.isArray(e)&&(e=[e,e]);d.normalScale=(new D).fromArray(e)}void 0!==a.displacementMap&&(d.displacementMap=b(a.displacementMap));void 0!==a.displacementScale&&(d.displacementScale=a.displacementScale);void 0!==a.displacementBias&&(d.displacementBias=a.displacementBias);void 0!==a.roughnessMap&&(d.roughnessMap=b(a.roughnessMap));void 0!==a.metalnessMap&&(d.metalnessMap=b(a.metalnessMap));void 0!==a.emissiveMap&&(d.emissiveMap=
    b(a.emissiveMap));void 0!==a.emissiveIntensity&&(d.emissiveIntensity=a.emissiveIntensity);void 0!==a.specularMap&&(d.specularMap=b(a.specularMap));void 0!==a.envMap&&(d.envMap=b(a.envMap));void 0!==a.reflectivity&&(d.reflectivity=a.reflectivity);void 0!==a.lightMap&&(d.lightMap=b(a.lightMap));void 0!==a.lightMapIntensity&&(d.lightMapIntensity=a.lightMapIntensity);void 0!==a.aoMap&&(d.aoMap=b(a.aoMap));void 0!==a.aoMapIntensity&&(d.aoMapIntensity=a.aoMapIntensity);void 0!==a.gradientMap&&(d.gradientMap=
    b(a.gradientMap));return d}});Object.assign(le.prototype,{load:function(a,b,c,d){var e=this;(new Na(e.manager)).load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},parse:function(a){var b=new E;var c=a.data.index;void 0!==c&&(c=new xf[c.type](c.array),b.setIndex(new M(c,1)));var d=a.data.attributes;for(f in d){var e=d[f];c=new xf[e.type](e.array);b.addAttribute(f,new M(c,e.itemSize,e.normalized))}var f=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==f)for(c=0,d=f.length;c!==d;++c)e=f[c],
    b.addGroup(e.start,e.count,e.materialIndex);a=a.data.boundingSphere;void 0!==a&&(f=new p,void 0!==a.center&&f.fromArray(a.center),b.boundingSphere=new Ia(f,a.radius));return b}});var xf={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};kc.Handlers={handlers:[],add:function(a,b){this.handlers.push(a,
    b)},get:function(a){for(var b=this.handlers,c=0,d=b.length;c<d;c+=2){var e=b[c+1];if(b[c].test(a))return e}return null}};Object.assign(kc.prototype,{crossOrigin:void 0,initMaterials:function(a,b,c){for(var d=[],e=0;e<a.length;++e)d[e]=this.createMaterial(a[e],b,c);return d},createMaterial:function(){var a={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},b=new H,c=new Ad,d=new Pd;return function(e,f,g){function h(a,b,d,e,h){a=f+a;var m=kc.Handlers.get(a);
    null!==m?a=m.load(a):(c.setCrossOrigin(g),a=c.load(a));void 0!==b&&(a.repeat.fromArray(b),1!==b[0]&&(a.wrapS=1E3),1!==b[1]&&(a.wrapT=1E3));void 0!==d&&a.offset.fromArray(d);void 0!==e&&("repeat"===e[0]&&(a.wrapS=1E3),"mirror"===e[0]&&(a.wrapS=1002),"repeat"===e[1]&&(a.wrapT=1E3),"mirror"===e[1]&&(a.wrapT=1002));void 0!==h&&(a.anisotropy=h);b=Q.generateUUID();k[b]=a;return b}var k={},m={uuid:Q.generateUUID(),type:"MeshLambertMaterial"},l;for(l in e){var n=e[l];switch(l){case "DbgColor":case "DbgIndex":case "opticalDensity":case "illumination":break;
    case "DbgName":m.name=n;break;case "blending":m.blending=a[n];break;case "colorAmbient":case "mapAmbient":console.warn("THREE.Loader.createMaterial:",l,"is no longer supported.");break;case "colorDiffuse":m.color=b.fromArray(n).getHex();break;case "colorSpecular":m.specular=b.fromArray(n).getHex();break;case "colorEmissive":m.emissive=b.fromArray(n).getHex();break;case "specularCoef":m.shininess=n;break;case "shading":"basic"===n.toLowerCase()&&(m.type="MeshBasicMaterial");"phong"===n.toLowerCase()&&
    (m.type="MeshPhongMaterial");"standard"===n.toLowerCase()&&(m.type="MeshStandardMaterial");break;case "mapDiffuse":m.map=h(n,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case "mapDiffuseRepeat":case "mapDiffuseOffset":case "mapDiffuseWrap":case "mapDiffuseAnisotropy":break;case "mapEmissive":m.emissiveMap=h(n,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case "mapEmissiveRepeat":case "mapEmissiveOffset":case "mapEmissiveWrap":case "mapEmissiveAnisotropy":break;
    case "mapLight":m.lightMap=h(n,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case "mapLightRepeat":case "mapLightOffset":case "mapLightWrap":case "mapLightAnisotropy":break;case "mapAO":m.aoMap=h(n,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case "mapAORepeat":case "mapAOOffset":case "mapAOWrap":case "mapAOAnisotropy":break;case "mapBump":m.bumpMap=h(n,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case "mapBumpScale":m.bumpScale=
    n;break;case "mapBumpRepeat":case "mapBumpOffset":case "mapBumpWrap":case "mapBumpAnisotropy":break;case "mapNormal":m.normalMap=h(n,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case "mapNormalFactor":m.normalScale=[n,n];break;case "mapNormalRepeat":case "mapNormalOffset":case "mapNormalWrap":case "mapNormalAnisotropy":break;case "mapSpecular":m.specularMap=h(n,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case "mapSpecularRepeat":case "mapSpecularOffset":case "mapSpecularWrap":case "mapSpecularAnisotropy":break;
    case "mapMetalness":m.metalnessMap=h(n,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case "mapMetalnessRepeat":case "mapMetalnessOffset":case "mapMetalnessWrap":case "mapMetalnessAnisotropy":break;case "mapRoughness":m.roughnessMap=h(n,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case "mapRoughnessRepeat":case "mapRoughnessOffset":case "mapRoughnessWrap":case "mapRoughnessAnisotropy":break;case "mapAlpha":m.alphaMap=
    h(n,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case "mapAlphaRepeat":case "mapAlphaOffset":case "mapAlphaWrap":case "mapAlphaAnisotropy":break;case "flipSided":m.side=1;break;case "doubleSided":m.side=2;break;case "transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity");m.opacity=n;break;case "depthTest":case "depthWrite":case "colorWrite":case "opacity":case "reflectivity":case "transparent":case "visible":case "wireframe":m[l]=
    n;break;case "vertexColors":!0===n&&(m.vertexColors=2);"face"===n&&(m.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",l,n)}}"MeshBasicMaterial"===m.type&&delete m.emissive;"MeshPhongMaterial"!==m.type&&delete m.specular;1>m.opacity&&(m.transparent=!0);d.setTextures(k);return d.parse(m)}}()});var He={decodeText:function(a){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(a);for(var b="",c=0,d=a.length;c<d;c++)b+=String.fromCharCode(a[c]);return b},
    extractUrlBase:function(a){a=a.split("/");if(1===a.length)return"./";a.pop();return a.join("/")+"/"}};Object.assign(me.prototype,{load:function(a,b,c,d){var e=this,f=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:He.extractUrlBase(a),g=new Na(this.manager);g.setWithCredentials(this.withCredentials);g.load(a,function(c){c=JSON.parse(c);var d=c.metadata;if(void 0!==d&&(d=d.type,void 0!==d)){if("object"===d.toLowerCase()){console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.ObjectLoader instead.");
    return}if("scene"===d.toLowerCase()){console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.SceneLoader instead.");return}}c=e.parse(c,f);b(c.geometry,c.materials)},c,d)},setTexturePath:function(a){this.texturePath=a},parse:function(){return function(a,b){void 0!==a.data&&(a=a.data);a.scale=void 0!==a.scale?1/a.scale:1;var c=new L,d=a,e,f,g,h=d.faces;var k=d.vertices;var m=d.normals,l=d.colors;var n=d.scale;var u=0;if(void 0!==d.uvs){for(e=0;e<d.uvs.length;e++)d.uvs[e].length&&u++;for(e=
    0;e<u;e++)c.faceVertexUvs[e]=[]}var r=0;for(g=k.length;r<g;)e=new p,e.x=k[r++]*n,e.y=k[r++]*n,e.z=k[r++]*n,c.vertices.push(e);r=0;for(g=h.length;r<g;){k=h[r++];var t=k&1;var v=k&2;e=k&8;var w=k&16;var z=k&32;n=k&64;k&=128;if(t){t=new Ya;t.a=h[r];t.b=h[r+1];t.c=h[r+3];var y=new Ya;y.a=h[r+1];y.b=h[r+2];y.c=h[r+3];r+=4;v&&(v=h[r++],t.materialIndex=v,y.materialIndex=v);v=c.faces.length;if(e)for(e=0;e<u;e++){var x=d.uvs[e];c.faceVertexUvs[e][v]=[];c.faceVertexUvs[e][v+1]=[];for(f=0;4>f;f++){var A=h[r++];
    var B=x[2*A];A=x[2*A+1];B=new D(B,A);2!==f&&c.faceVertexUvs[e][v].push(B);0!==f&&c.faceVertexUvs[e][v+1].push(B)}}w&&(w=3*h[r++],t.normal.set(m[w++],m[w++],m[w]),y.normal.copy(t.normal));if(z)for(e=0;4>e;e++)w=3*h[r++],z=new p(m[w++],m[w++],m[w]),2!==e&&t.vertexNormals.push(z),0!==e&&y.vertexNormals.push(z);n&&(n=h[r++],n=l[n],t.color.setHex(n),y.color.setHex(n));if(k)for(e=0;4>e;e++)n=h[r++],n=l[n],2!==e&&t.vertexColors.push(new H(n)),0!==e&&y.vertexColors.push(new H(n));c.faces.push(t);c.faces.push(y)}else{t=
    new Ya;t.a=h[r++];t.b=h[r++];t.c=h[r++];v&&(v=h[r++],t.materialIndex=v);v=c.faces.length;if(e)for(e=0;e<u;e++)for(x=d.uvs[e],c.faceVertexUvs[e][v]=[],f=0;3>f;f++)A=h[r++],B=x[2*A],A=x[2*A+1],B=new D(B,A),c.faceVertexUvs[e][v].push(B);w&&(w=3*h[r++],t.normal.set(m[w++],m[w++],m[w]));if(z)for(e=0;3>e;e++)w=3*h[r++],z=new p(m[w++],m[w++],m[w]),t.vertexNormals.push(z);n&&(n=h[r++],t.color.setHex(l[n]));if(k)for(e=0;3>e;e++)n=h[r++],t.vertexColors.push(new H(l[n]));c.faces.push(t)}}d=a;r=void 0!==d.influencesPerVertex?
    d.influencesPerVertex:2;if(d.skinWeights)for(g=0,h=d.skinWeights.length;g<h;g+=r)c.skinWeights.push(new aa(d.skinWeights[g],1<r?d.skinWeights[g+1]:0,2<r?d.skinWeights[g+2]:0,3<r?d.skinWeights[g+3]:0));if(d.skinIndices)for(g=0,h=d.skinIndices.length;g<h;g+=r)c.skinIndices.push(new aa(d.skinIndices[g],1<r?d.skinIndices[g+1]:0,2<r?d.skinIndices[g+2]:0,3<r?d.skinIndices[g+3]:0));c.bones=d.bones;c.bones&&0<c.bones.length&&(c.skinWeights.length!==c.skinIndices.length||c.skinIndices.length!==c.vertices.length)&&
    console.warn("When skinning, number of vertices ("+c.vertices.length+"), skinIndices ("+c.skinIndices.length+"), and skinWeights ("+c.skinWeights.length+") should match.");g=a;h=g.scale;if(void 0!==g.morphTargets)for(d=0,r=g.morphTargets.length;d<r;d++)for(c.morphTargets[d]={},c.morphTargets[d].name=g.morphTargets[d].name,c.morphTargets[d].vertices=[],m=c.morphTargets[d].vertices,l=g.morphTargets[d].vertices,u=0,k=l.length;u<k;u+=3)n=new p,n.x=l[u]*h,n.y=l[u+1]*h,n.z=l[u+2]*h,m.push(n);if(void 0!==
    g.morphColors&&0<g.morphColors.length)for(console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.'),h=c.faces,g=g.morphColors[0].colors,d=0,r=h.length;d<r;d++)h[d].color.fromArray(g,3*d);g=a;d=[];r=[];void 0!==g.animation&&r.push(g.animation);void 0!==g.animations&&(g.animations.length?r=r.concat(g.animations):r.push(g.animations));for(g=0;g<r.length;g++)(h=Ca.parseAnimation(r[g],c.bones))&&d.push(h);c.morphTargets&&(r=Ca.CreateClipsFromMorphTargetSequences(c.morphTargets,
    10),d=d.concat(r));0<d.length&&(c.animations=d);c.computeFaceNormals();c.computeBoundingSphere();if(void 0===a.materials||0===a.materials.length)return{geometry:c};a=kc.prototype.initMaterials(a.materials,b,this.crossOrigin);return{geometry:c,materials:a}}}()});Object.assign(jf.prototype,{load:function(a,b,c,d){""===this.texturePath&&(this.texturePath=a.substring(0,a.lastIndexOf("/")+1));var e=this;(new Na(e.manager)).load(a,function(c){var f=null;try{f=JSON.parse(c)}catch(h){void 0!==d&&d(h);console.error("THREE:ObjectLoader: Can't parse "+
    a+".",h.message);return}c=f.metadata;void 0===c||void 0===c.type||"geometry"===c.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+a+". Use THREE.JSONLoader instead."):e.parse(f,b)},c,d)},setTexturePath:function(a){this.texturePath=a},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a,b){var c=this.parseShape(a.shapes),c=this.parseGeometries(a.geometries,c),d=this.parseImages(a.images,function(){void 0!==b&&b(e)}),d=this.parseTextures(a.textures,d),d=this.parseMaterials(a.materials,
    d),e=this.parseObject(a.object,c,d);a.animations&&(e.animations=this.parseAnimations(a.animations));void 0!==a.images&&0!==a.images.length||void 0===b||b(e);return e},parseShape:function(a){var b={};if(void 0!==a)for(var c=0,d=a.length;c<d;c++){var e=(new jb).fromJSON(a[c]);b[e.uuid]=e}return b},parseGeometries:function(a,b){var c={};if(void 0!==a)for(var d=new me,e=new le,f=0,g=a.length;f<g;f++){var h=a[f];switch(h.type){case "PlaneGeometry":case "PlaneBufferGeometry":var k=new ka[h.type](h.width,
    h.height,h.widthSegments,h.heightSegments);break;case "BoxGeometry":case "BoxBufferGeometry":case "CubeGeometry":k=new ka[h.type](h.width,h.height,h.depth,h.widthSegments,h.heightSegments,h.depthSegments);break;case "CircleGeometry":case "CircleBufferGeometry":k=new ka[h.type](h.radius,h.segments,h.thetaStart,h.thetaLength);break;case "CylinderGeometry":case "CylinderBufferGeometry":k=new ka[h.type](h.radiusTop,h.radiusBottom,h.height,h.radialSegments,h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);
    break;case "ConeGeometry":case "ConeBufferGeometry":k=new ka[h.type](h.radius,h.height,h.radialSegments,h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);break;case "SphereGeometry":case "SphereBufferGeometry":k=new ka[h.type](h.radius,h.widthSegments,h.heightSegments,h.phiStart,h.phiLength,h.thetaStart,h.thetaLength);break;case "DodecahedronGeometry":case "DodecahedronBufferGeometry":case "IcosahedronGeometry":case "IcosahedronBufferGeometry":case "OctahedronGeometry":case "OctahedronBufferGeometry":case "TetrahedronGeometry":case "TetrahedronBufferGeometry":k=
    new ka[h.type](h.radius,h.detail);break;case "RingGeometry":case "RingBufferGeometry":k=new ka[h.type](h.innerRadius,h.outerRadius,h.thetaSegments,h.phiSegments,h.thetaStart,h.thetaLength);break;case "TorusGeometry":case "TorusBufferGeometry":k=new ka[h.type](h.radius,h.tube,h.radialSegments,h.tubularSegments,h.arc);break;case "TorusKnotGeometry":case "TorusKnotBufferGeometry":k=new ka[h.type](h.radius,h.tube,h.tubularSegments,h.radialSegments,h.p,h.q);break;case "LatheGeometry":case "LatheBufferGeometry":k=
    new ka[h.type](h.points,h.segments,h.phiStart,h.phiLength);break;case "PolyhedronGeometry":case "PolyhedronBufferGeometry":k=new ka[h.type](h.vertices,h.indices,h.radius,h.details);break;case "ShapeGeometry":case "ShapeBufferGeometry":k=[];f=0;for(g=h.shapes.length;f<g;f++)k.push(b[h.shapes[f]]);k=new ka[h.type](k,h.curveSegments);break;case "BufferGeometry":k=e.parse(h);break;case "Geometry":k=d.parse(h,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+
    h.type+'"');continue}k.uuid=h.uuid;void 0!==h.name&&(k.name=h.name);c[h.uuid]=k}return c},parseMaterials:function(a,b){var c={};if(void 0!==a){var d=new Pd;d.setTextures(b);b=0;for(var e=a.length;b<e;b++){var f=a[b];if("MultiMaterial"===f.type){for(var g=[],h=0;h<f.materials.length;h++)g.push(d.parse(f.materials[h]));c[f.uuid]=g}else c[f.uuid]=d.parse(f)}}return c},parseAnimations:function(a){for(var b=[],c=0;c<a.length;c++){var d=Ca.parse(a[c]);b.push(d)}return b},parseImages:function(a,b){function c(a){d.manager.itemStart(a);
    return f.load(a,function(){d.manager.itemEnd(a)},void 0,function(){d.manager.itemEnd(a);d.manager.itemError(a)})}var d=this,e={};if(void 0!==a&&0<a.length){b=new he(b);var f=new ad(b);f.setCrossOrigin(this.crossOrigin);b=0;for(var g=a.length;b<g;b++){var h=a[b],k=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h.url)?h.url:d.texturePath+h.url;e[h.uuid]=c(k)}}return e},parseTextures:function(a,b){function c(a,b){if("number"===typeof a)return a;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",
    a);return b[a]}var d={};if(void 0!==a)for(var e=0,f=a.length;e<f;e++){var g=a[e];void 0===g.image&&console.warn('THREE.ObjectLoader: No "image" specified for',g.uuid);void 0===b[g.image]&&console.warn("THREE.ObjectLoader: Undefined image",g.image);var h=new U(b[g.image]);h.needsUpdate=!0;h.uuid=g.uuid;void 0!==g.name&&(h.name=g.name);void 0!==g.mapping&&(h.mapping=c(g.mapping,Og));void 0!==g.offset&&h.offset.fromArray(g.offset);void 0!==g.repeat&&h.repeat.fromArray(g.repeat);void 0!==g.center&&h.center.fromArray(g.center);
    void 0!==g.rotation&&(h.rotation=g.rotation);void 0!==g.wrap&&(h.wrapS=c(g.wrap[0],yf),h.wrapT=c(g.wrap[1],yf));void 0!==g.minFilter&&(h.minFilter=c(g.minFilter,zf));void 0!==g.magFilter&&(h.magFilter=c(g.magFilter,zf));void 0!==g.anisotropy&&(h.anisotropy=g.anisotropy);void 0!==g.flipY&&(h.flipY=g.flipY);d[g.uuid]=h}return d},parseObject:function(){var a=new O;return function(b,c,d){function e(a){void 0===c[a]&&console.warn("THREE.ObjectLoader: Undefined geometry",a);return c[a]}function f(a){if(void 0!==
    a){if(Array.isArray(a)){for(var b=[],c=0,e=a.length;c<e;c++){var f=a[c];void 0===d[f]&&console.warn("THREE.ObjectLoader: Undefined material",f);b.push(d[f])}return b}void 0===d[a]&&console.warn("THREE.ObjectLoader: Undefined material",a);return d[a]}}switch(b.type){case "Scene":var g=new vd;void 0!==b.background&&Number.isInteger(b.background)&&(g.background=new H(b.background));void 0!==b.fog&&("Fog"===b.fog.type?g.fog=new Qb(b.fog.color,b.fog.near,b.fog.far):"FogExp2"===b.fog.type&&(g.fog=new Pb(b.fog.color,
    b.fog.density)));break;case "PerspectiveCamera":g=new ba(b.fov,b.aspect,b.near,b.far);void 0!==b.focus&&(g.focus=b.focus);void 0!==b.zoom&&(g.zoom=b.zoom);void 0!==b.filmGauge&&(g.filmGauge=b.filmGauge);void 0!==b.filmOffset&&(g.filmOffset=b.filmOffset);void 0!==b.view&&(g.view=Object.assign({},b.view));break;case "OrthographicCamera":g=new Lb(b.left,b.right,b.top,b.bottom,b.near,b.far);break;case "AmbientLight":g=new Hd(b.color,b.intensity);break;case "DirectionalLight":g=new Gd(b.color,b.intensity);
    break;case "PointLight":g=new Ed(b.color,b.intensity,b.distance,b.decay);break;case "RectAreaLight":g=new Id(b.color,b.intensity,b.width,b.height);break;case "SpotLight":g=new Dd(b.color,b.intensity,b.distance,b.angle,b.penumbra,b.decay);break;case "HemisphereLight":g=new Bd(b.color,b.groundColor,b.intensity);break;case "SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case "Mesh":g=e(b.geometry);var h=f(b.material);g=g.bones&&0<g.bones.length?new xd(g,
    h):new ra(g,h);break;case "LOD":g=new Dc;break;case "Line":g=new sa(e(b.geometry),f(b.material),b.mode);break;case "LineLoop":g=new yd(e(b.geometry),f(b.material));break;case "LineSegments":g=new X(e(b.geometry),f(b.material));break;case "PointCloud":case "Points":g=new Rb(e(b.geometry),f(b.material));break;case "Sprite":g=new Cc(f(b.material));break;case "Group":g=new Fc;break;default:g=new x}g.uuid=b.uuid;void 0!==b.name&&(g.name=b.name);void 0!==b.matrix?(a.fromArray(b.matrix),a.decompose(g.position,
    g.quaternion,g.scale)):(void 0!==b.position&&g.position.fromArray(b.position),void 0!==b.rotation&&g.rotation.fromArray(b.rotation),void 0!==b.quaternion&&g.quaternion.fromArray(b.quaternion),void 0!==b.scale&&g.scale.fromArray(b.scale));void 0!==b.castShadow&&(g.castShadow=b.castShadow);void 0!==b.receiveShadow&&(g.receiveShadow=b.receiveShadow);b.shadow&&(void 0!==b.shadow.bias&&(g.shadow.bias=b.shadow.bias),void 0!==b.shadow.radius&&(g.shadow.radius=b.shadow.radius),void 0!==b.shadow.mapSize&&
    g.shadow.mapSize.fromArray(b.shadow.mapSize),void 0!==b.shadow.camera&&(g.shadow.camera=this.parseObject(b.shadow.camera)));void 0!==b.visible&&(g.visible=b.visible);void 0!==b.userData&&(g.userData=b.userData);if(void 0!==b.children)for(var h=b.children,k=0;k<h.length;k++)g.add(this.parseObject(h[k],c,d));if("LOD"===b.type)for(b=b.levels,h=0;h<b.length;h++){var k=b[h],m=g.getObjectByProperty("uuid",k.object);void 0!==m&&g.addLevel(m,k.distance)}return g}}()});var Og={UVMapping:300,CubeReflectionMapping:301,
    CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},yf={RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},zf={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};ne.prototype={constructor:ne,setOptions:function(a){this.options=a;return this},
    load:function(a,b,c,d){void 0===a&&(a="");void 0!==this.path&&(a=this.path+a);var e=this,f=Ib.get(a);if(void 0!==f)return e.manager.itemStart(a),setTimeout(function(){b&&b(f);e.manager.itemEnd(a)},0),f;fetch(a).then(function(a){return a.blob()}).then(function(a){return createImageBitmap(a,e.options)}).then(function(c){Ib.add(a,c);b&&b(c);e.manager.itemEnd(a)}).catch(function(b){d&&d(b);e.manager.itemEnd(a);e.manager.itemError(a)})},setCrossOrigin:function(){return this},setPath:function(a){this.path=
    a;return this}};Object.assign(oe.prototype,{moveTo:function(a,b){this.currentPath=new Sa;this.subPaths.push(this.currentPath);this.currentPath.moveTo(a,b)},lineTo:function(a,b){this.currentPath.lineTo(a,b)},quadraticCurveTo:function(a,b,c,d){this.currentPath.quadraticCurveTo(a,b,c,d)},bezierCurveTo:function(a,b,c,d,e,f){this.currentPath.bezierCurveTo(a,b,c,d,e,f)},splineThru:function(a){this.currentPath.splineThru(a)},toShapes:function(a,b){function c(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=
    a[c],f=new jb;f.curves=e.curves;b.push(f)}return b}function d(a,b){for(var c=b.length,d=!1,e=c-1,f=0;f<c;e=f++){var g=b[e],h=b[f],k=h.x-g.x,m=h.y-g.y;if(Math.abs(m)>Number.EPSILON){if(0>m&&(g=b[f],k=-k,h=b[e],m=-m),!(a.y<g.y||a.y>h.y))if(a.y===g.y){if(a.x===g.x)return!0}else{e=m*(a.x-g.x)-k*(a.y-g.y);if(0===e)return!0;0>e||(d=!d)}}else if(a.y===g.y&&(h.x<=a.x&&a.x<=g.x||g.x<=a.x&&a.x<=h.x))return!0}return d}var e=$a.isClockWise,f=this.subPaths;if(0===f.length)return[];if(!0===b)return c(f);b=[];if(1===
    f.length){var g=f[0];var h=new jb;h.curves=g.curves;b.push(h);return b}var k=!e(f[0].getPoints()),k=a?!k:k;h=[];var m=[],l=[],n=0;m[n]=void 0;l[n]=[];for(var p=0,r=f.length;p<r;p++){g=f[p];var t=g.getPoints();var v=e(t);(v=a?!v:v)?(!k&&m[n]&&n++,m[n]={s:new jb,p:t},m[n].s.curves=g.curves,k&&n++,l[n]=[]):l[n].push({h:g,p:t[0]})}if(!m[0])return c(f);if(1<m.length){p=!1;a=[];e=0;for(f=m.length;e<f;e++)h[e]=[];e=0;for(f=m.length;e<f;e++)for(g=l[e],v=0;v<g.length;v++){k=g[v];n=!0;for(t=0;t<m.length;t++)d(k.p,
    m[t].p)&&(e!==t&&a.push({froms:e,tos:t,hole:v}),n?(n=!1,h[t].push(k)):p=!0);n&&h[e].push(k)}0<a.length&&(p||(l=h))}p=0;for(e=m.length;p<e;p++)for(h=m[p].s,b.push(h),a=l[p],f=0,g=a.length;f<g;f++)h.holes.push(a[f].h);return b}});Object.assign(pe.prototype,{isFont:!0,generateShapes:function(a,b,c){void 0===b&&(b=100);c=this.data;a=String(a).split("");var d=b/c.resolution,e=(c.boundingBox.yMax-c.boundingBox.yMin+c.underlineThickness)*d,f=0,g=0;b=[];for(var h=0;h<a.length;h++){var k=a[h];if("\n"===k)f=
    0,g-=e;else{var m=d;var l=f,n=g;if(k=c.glyphs[k]||c.glyphs["?"]){var p=new oe;if(k.o)for(var r=k._cachedOutline||(k._cachedOutline=k.o.split(" ")),t=0,v=r.length;t<v;)switch(r[t++]){case "m":var w=r[t++]*m+l;var x=r[t++]*m+n;p.moveTo(w,x);break;case "l":w=r[t++]*m+l;x=r[t++]*m+n;p.lineTo(w,x);break;case "q":var y=r[t++]*m+l;var B=r[t++]*m+n;var A=r[t++]*m+l;var C=r[t++]*m+n;p.quadraticCurveTo(A,C,y,B);break;case "b":y=r[t++]*m+l,B=r[t++]*m+n,A=r[t++]*m+l,C=r[t++]*m+n,w=r[t++]*m+l,x=r[t++]*m+n,p.bezierCurveTo(A,
    C,w,x,y,B)}m={offsetX:k.ha*m,path:p}}else m=void 0;f+=m.offsetX;b.push(m.path)}}c=[];a=0;for(d=b.length;a<d;a++)Array.prototype.push.apply(c,b[a].toShapes());return c}});Object.assign(kf.prototype,{load:function(a,b,c,d){var e=this,f=new Na(this.manager);f.setPath(this.path);f.load(a,function(a){try{var c=JSON.parse(a)}catch(k){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),c=JSON.parse(a.substring(65,a.length-2))}a=e.parse(c);b&&b(a)},c,d)},
    parse:function(a){return new pe(a)},setPath:function(a){this.path=a;return this}});var Ud,se={getContext:function(){void 0===Ud&&(Ud=new (window.AudioContext||window.webkitAudioContext));return Ud},setContext:function(a){Ud=a}};Object.assign(qe.prototype,{load:function(a,b,c,d){var e=new Na(this.manager);e.setResponseType("arraybuffer");e.load(a,function(a){se.getContext().decodeAudioData(a,function(a){b(a)})},c,d)}});Object.assign(lf.prototype,{update:function(){var a,b,c,d,e,f,g,h,k=new O,m=new O;
    return function(l){if(a!==this||b!==l.focus||c!==l.fov||d!==l.aspect*this.aspect||e!==l.near||f!==l.far||g!==l.zoom||h!==this.eyeSep){a=this;b=l.focus;c=l.fov;d=l.aspect*this.aspect;e=l.near;f=l.far;g=l.zoom;var n=l.projectionMatrix.clone();h=this.eyeSep/2;var p=h*e/b,q=e*Math.tan(Q.DEG2RAD*c*.5)/g;m.elements[12]=-h;k.elements[12]=h;var t=-q*d+p;var v=q*d+p;n.elements[0]=2*e/(v-t);n.elements[8]=(v+t)/(v-t);this.cameraL.projectionMatrix.copy(n);t=-q*d-p;v=q*d-p;n.elements[0]=2*e/(v-t);n.elements[8]=
    (v+t)/(v-t);this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(l.matrixWorld).multiply(m);this.cameraR.matrixWorld.copy(l.matrixWorld).multiply(k)}}()});fd.prototype=Object.create(x.prototype);fd.prototype.constructor=fd;re.prototype=Object.assign(Object.create(x.prototype),{constructor:re,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),
    this.filter=null)},getFilter:function(){return this.filter},setFilter:function(a){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination);this.filter=a;this.gain.connect(this.filter);this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(a){this.gain.gain.value=a},updateMatrixWorld:function(){var a=new p,b=new ha,c=new p,d=new p;return function(e){x.prototype.updateMatrixWorld.call(this,
    e);e=this.context.listener;var f=this.up;this.matrixWorld.decompose(a,b,c);d.set(0,0,-1).applyQuaternion(b);e.positionX?(e.positionX.setValueAtTime(a.x,this.context.currentTime),e.positionY.setValueAtTime(a.y,this.context.currentTime),e.positionZ.setValueAtTime(a.z,this.context.currentTime),e.forwardX.setValueAtTime(d.x,this.context.currentTime),e.forwardY.setValueAtTime(d.y,this.context.currentTime),e.forwardZ.setValueAtTime(d.z,this.context.currentTime),e.upX.setValueAtTime(f.x,this.context.currentTime),
    e.upY.setValueAtTime(f.y,this.context.currentTime),e.upZ.setValueAtTime(f.z,this.context.currentTime)):(e.setPosition(a.x,a.y,a.z),e.setOrientation(d.x,d.y,d.z,f.x,f.y,f.z))}}()});lc.prototype=Object.assign(Object.create(x.prototype),{constructor:lc,getOutput:function(){return this.gain},setNodeSource:function(a){this.hasPlaybackControl=!1;this.sourceType="audioNode";this.source=a;this.connect();return this},setBuffer:function(a){this.buffer=a;this.sourceType="buffer";this.autoplay&&this.play();return this},
    play:function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else{var a=this.context.createBufferSource();a.buffer=this.buffer;a.loop=this.loop;a.onended=this.onEnded.bind(this);a.playbackRate.setValueAtTime(this.playbackRate,this.startTime);this.startTime=this.context.currentTime;a.start(this.startTime,this.offset);this.isPlaying=!0;this.source=a;return this.connect()}},
    pause:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this},stop:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.source.stop(),this.offset=0,this.isPlaying=!1,this},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);
    for(var a=1,b=this.filters.length;a<b;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var a=1,b=this.filters.length;a<b;a++)this.filters[a-1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},
    getFilters:function(){return this.filters},setFilters:function(a){a||(a=[]);!0===this.isPlaying?(this.disconnect(),this.filters=a,this.connect()):this.filters=a;return this},getFilter:function(){return this.getFilters()[0]},setFilter:function(a){return this.setFilters(a?[a]:[])},setPlaybackRate:function(a){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.playbackRate=a,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,
    this.context.currentTime),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(a){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.loop=a,!0===this.isPlaying&&(this.source.loop=this.loop),this},getVolume:function(){return this.gain.gain.value},
    setVolume:function(a){this.gain.gain.value=a;return this}});te.prototype=Object.assign(Object.create(lc.prototype),{constructor:te,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(a){this.panner.refDistance=a},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(a){this.panner.rolloffFactor=a},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(a){this.panner.distanceModel=
    a},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(a){this.panner.maxDistance=a},updateMatrixWorld:function(){var a=new p;return function(b){x.prototype.updateMatrixWorld.call(this,b);a.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(a.x,a.y,a.z)}}()});Object.assign(ue.prototype,{getFrequencyData:function(){this.analyser.getByteFrequencyData(this.data);return this.data},getAverageFrequency:function(){for(var a=0,b=this.getFrequencyData(),c=0;c<b.length;c++)a+=
    b[c];return a/b.length}});Object.assign(ve.prototype,{accumulate:function(a,b){var c=this.buffer,d=this.valueSize;a=a*d+d;var e=this.cumulativeWeight;if(0===e){for(e=0;e!==d;++e)c[a+e]=c[e];e=b}else e+=b,this._mixBufferRegion(c,a,0,b/e,d);this.cumulativeWeight=e},apply:function(a){var b=this.valueSize,c=this.buffer;a=a*b+b;var d=this.cumulativeWeight,e=this.binding;this.cumulativeWeight=0;1>d&&this._mixBufferRegion(c,a,3*b,1-d,b);for(var d=b,f=b+b;d!==f;++d)if(c[d]!==c[d+b]){e.setValue(c,a);break}},
    saveOriginalState:function(){var a=this.buffer,b=this.valueSize,c=3*b;this.binding.getValue(a,c);for(var d=b;d!==c;++d)a[d]=a[c+d%b];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(a,b,c,d,e){if(.5<=d)for(d=0;d!==e;++d)a[b+d]=a[c+d]},_slerp:function(a,b,c,d){ha.slerpFlat(a,b,a,b,a,c,d)},_lerp:function(a,b,c,d,e){for(var f=1-d,g=0;g!==e;++g){var h=b+g;a[h]=a[h]*f+a[c+g]*d}}});Object.assign(mf.prototype,{getValue:function(a,
    b){this.bind();var c=this._bindings[this._targetGroup.nCachedObjects_];void 0!==c&&c.getValue(a,b)},setValue:function(a,b){for(var c=this._bindings,d=this._targetGroup.nCachedObjects_,e=c.length;d!==e;++d)c[d].setValue(a,b)},bind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].bind()},unbind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].unbind()}});Object.assign(qa,{Composite:mf,create:function(a,
    b,c){return a&&a.isAnimationObjectGroup?new qa.Composite(a,b,c):new qa(a,b,c)},sanitizeNodeName:function(a){return a.replace(/\s/g,"_").replace(/[^\w-]/g,"")},parseTrackName:function(){var a=new RegExp("^"+/((?:[\w-]+[\/:])*)/.source+/([\w-\.]+)?/.source+/(?:\.([\w-]+)(?:\[(.+)\])?)?/.source+/\.([\w-]+)(?:\[(.+)\])?/.source+"$"),b=["material","materials","bones"];return function(c){var d=a.exec(c);if(!d)throw Error("PropertyBinding: Cannot parse trackName: "+c);var d={nodeName:d[2],objectName:d[3],
    objectIndex:d[4],propertyName:d[5],propertyIndex:d[6]},e=d.nodeName&&d.nodeName.lastIndexOf(".");if(void 0!==e&&-1!==e){var f=d.nodeName.substring(e+1);-1!==b.indexOf(f)&&(d.nodeName=d.nodeName.substring(0,e),d.objectName=f)}if(null===d.propertyName||0===d.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+c);return d}}(),findNode:function(a,b){if(!b||""===b||"root"===b||"."===b||-1===b||b===a.name||b===a.uuid)return a;if(a.skeleton){var c=function(a){for(var c=
    0;c<a.bones.length;c++){var d=a.bones[c];if(d.name===b)return d}return null}(a.skeleton);if(c)return c}if(a.children){var d=function(a){for(var c=0;c<a.length;c++){var e=a[c];if(e.name===b||e.uuid===b||(e=d(e.children)))return e}return null};if(a=d(a.children))return a}return null}});Object.assign(qa.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},
    GetterByBindingType:[function(a,b){a[b]=this.node[this.propertyName]},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)a[b++]=c[d]},function(a,b){a[b]=this.resolvedProperty[this.propertyIndex]},function(a,b){this.resolvedProperty.toArray(a,b)}],SetterByBindingTypeAndVersioning:[[function(a,b){this.targetObject[this.propertyName]=a[b]},function(a,b){this.targetObject[this.propertyName]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.targetObject[this.propertyName]=a[b];
    this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++]},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.needsUpdate=!0},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty[this.propertyIndex]=a[b]},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];
    this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty.fromArray(a,b)},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(a,b){this.bind();this.getValue(a,b)},setValue:function(a,b){this.bind();this.setValue(a,b)},bind:function(){var a=
    this.node,b=this.parsedPath,c=b.objectName,d=b.propertyName,e=b.propertyIndex;a||(this.node=a=qa.findNode(this.rootNode,b.nodeName)||this.rootNode);this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(a){if(c){var f=b.objectIndex;switch(c){case "materials":if(!a.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!a.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",
    this);return}a=a.material.materials;break;case "bones":if(!a.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}a=a.skeleton.bones;for(c=0;c<a.length;c++)if(a[c].name===f){f=c;break}break;default:if(void 0===a[c]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}a=a[c]}if(void 0!==f){if(void 0===a[f]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",
    this,a);return}a=a[f]}}f=a[d];if(void 0===f)console.error("THREE.PropertyBinding: Trying to update property for track: "+b.nodeName+"."+d+" but it wasn't found.",a);else{b=this.Versioning.None;void 0!==a.needsUpdate?(b=this.Versioning.NeedsUpdate,this.targetObject=a):void 0!==a.matrixWorldNeedsUpdate&&(b=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=a);c=this.BindingType.Direct;if(void 0!==e){if("morphTargetInfluences"===d){if(!a.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",
    this);return}if(a.geometry.isBufferGeometry){if(!a.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}for(c=0;c<this.node.geometry.morphAttributes.position.length;c++)if(a.geometry.morphAttributes.position[c].name===e){e=c;break}}else{if(!a.geometry.morphTargets){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",
    this);return}for(c=0;c<this.node.geometry.morphTargets.length;c++)if(a.geometry.morphTargets[c].name===e){e=c;break}}}c=this.BindingType.ArrayElement;this.resolvedProperty=f;this.propertyIndex=e}else void 0!==f.fromArray&&void 0!==f.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=f):Array.isArray(f)?(c=this.BindingType.EntireArray,this.resolvedProperty=f):this.propertyName=d;this.getValue=this.GetterByBindingType[c];this.setValue=this.SetterByBindingTypeAndVersioning[c][b]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+
    this.path+" but it wasn't found.")},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}});Object.assign(qa.prototype,{_getValue_unbound:qa.prototype.getValue,_setValue_unbound:qa.prototype.setValue});Object.assign(nf.prototype,{isAnimationObjectGroup:!0,add:function(){for(var a=this._objects,b=a.length,c=this.nCachedObjects_,d=this._indicesByUUID,e=this._paths,f=this._parsedPaths,g=this._bindings,h=g.length,k=0,m=arguments.length;k!==m;++k){var l=
    arguments[k],n=l.uuid,p=d[n];if(void 0===p){p=b++;d[n]=p;a.push(l);for(var n=0,r=h;n!==r;++n)g[n].push(new qa(l,e[n],f[n]))}else if(p<c){var t=--c,r=a[t];d[r.uuid]=p;a[p]=r;d[n]=t;a[t]=l;n=0;for(r=h;n!==r;++n){var v=g[n],w=v[p];v[p]=v[t];void 0===w&&(w=new qa(l,e[n],f[n]));v[t]=w}}else void 0!==a[p]&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c},remove:function(){for(var a=
    this._objects,b=this.nCachedObjects_,c=this._indicesByUUID,d=this._bindings,e=d.length,f=0,g=arguments.length;f!==g;++f){var h=arguments[f],k=h.uuid,m=c[k];if(void 0!==m&&m>=b){var l=b++,n=a[l];c[n.uuid]=m;a[m]=n;c[k]=l;a[l]=h;h=0;for(k=e;h!==k;++h){var n=d[h],p=n[m];n[m]=n[l];n[l]=p}}}this.nCachedObjects_=b},uncache:function(){for(var a,b,c=this._objects,d=c.length,e=this.nCachedObjects_,f=this._indicesByUUID,g=this._bindings,h=g.length,k=0,m=arguments.length;k!==m;++k){b=arguments[k].uuid;var l=
    f[b];if(void 0!==l)if(delete f[b],l<e){var n=--e,p=c[n];b=--d;a=c[b];f[p.uuid]=l;c[l]=p;f[a.uuid]=n;c[n]=a;c.pop();for(var p=0,r=h;p!==r;++p){a=g[p];var t=a[b];a[l]=a[n];a[n]=t;a.pop()}}else for(b=--d,a=c[b],f[a.uuid]=l,c[l]=a,c.pop(),p=0,r=h;p!==r;++p)a=g[p],a[l]=a[b],a.pop()}this.nCachedObjects_=e},subscribe_:function(a,b){var c=this._bindingsIndicesByPath,d=c[a],e=this._bindings;if(void 0!==d)return e[d];var f=this._paths,g=this._parsedPaths,h=this._objects,k=this.nCachedObjects_,m=Array(h.length),
    d=e.length;c[a]=d;f.push(a);g.push(b);e.push(m);c=k;for(d=h.length;c!==d;++c)m[c]=new qa(h[c],a,b);return m},unsubscribe_:function(a){var b=this._bindingsIndicesByPath,c=b[a];if(void 0!==c){var d=this._paths,e=this._parsedPaths,f=this._bindings,g=f.length-1,h=f[g];b[a[g]]=c;f[c]=h;f.pop();e[c]=e[g];e.pop();d[c]=d[g];d.pop()}}});Object.assign(of.prototype,{play:function(){this._mixer._activateAction(this);return this},stop:function(){this._mixer._deactivateAction(this);return this.reset()},reset:function(){this.paused=
    !1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(a){this._startTime=a;return this},setLoop:function(a,b){this.loop=a;this.repetitions=b;return this},setEffectiveWeight:function(a){this.weight=a;this._effectiveWeight=this.enabled?
    a:0;return this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(a){return this._scheduleFading(a,0,1)},fadeOut:function(a){return this._scheduleFading(a,1,0)},crossFadeFrom:function(a,b,c){a.fadeOut(b);this.fadeIn(b);if(c){c=this._clip.duration;var d=a._clip.duration,e=c/d;a.warp(1,d/c,b);this.warp(e,1,b)}return this},crossFadeTo:function(a,b,c){return a.crossFadeFrom(this,b,c)},stopFading:function(){var a=this._weightInterpolant;null!==a&&(this._weightInterpolant=
    null,this._mixer._takeBackControlInterpolant(a));return this},setEffectiveTimeScale:function(a){this.timeScale=a;this._effectiveTimeScale=this.paused?0:a;return this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(a){this.timeScale=this._clip.duration/a;return this.stopWarping()},syncWith:function(a){this.time=a.time;this.timeScale=a.timeScale;return this.stopWarping()},halt:function(a){return this.warp(this._effectiveTimeScale,0,a)},warp:function(a,
    b,c){var d=this._mixer,e=d.time,f=this._timeScaleInterpolant,g=this.timeScale;null===f&&(this._timeScaleInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;f=f.sampleValues;d[0]=e;d[1]=e+c;f[0]=a/g;f[1]=b/g;return this},stopWarping:function(){var a=this._timeScaleInterpolant;null!==a&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(a));return this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||
    this._mixer._root},_update:function(a,b,c,d){if(this.enabled){var e=this._startTime;if(null!==e){b=(a-e)*c;if(0>b||0===c)return;this._startTime=null;b*=c}b*=this._updateTimeScale(a);c=this._updateTime(b);a=this._updateWeight(a);if(0<a){b=this._interpolants;for(var e=this._propertyBindings,f=0,g=b.length;f!==g;++f)b[f].evaluate(c),e[f].accumulate(d,a)}}else this._updateWeight(a)},_updateWeight:function(a){var b=0;if(this.enabled){var b=this.weight,c=this._weightInterpolant;if(null!==c){var d=c.evaluate(a)[0],
    b=b*d;a>c.parameterPositions[1]&&(this.stopFading(),0===d&&(this.enabled=!1))}}return this._effectiveWeight=b},_updateTimeScale:function(a){var b=0;if(!this.paused){var b=this.timeScale,c=this._timeScaleInterpolant;if(null!==c){var d=c.evaluate(a)[0],b=b*d;a>c.parameterPositions[1]&&(this.stopWarping(),0===b?this.paused=!0:this.timeScale=b)}}return this._effectiveTimeScale=b},_updateTime:function(a){var b=this.time+a;if(0===a)return b;var c=this._clip.duration,d=this.loop,e=this._loopCount;if(2200===
    d)a:{if(-1===e&&(this._loopCount=0,this._setEndings(!0,!0,!1)),b>=c)b=c;else if(0>b)b=0;else break a;this.clampWhenFinished?this.paused=!0:this.enabled=!1;this._mixer.dispatchEvent({type:"finished",action:this,direction:0>a?-1:1})}else{d=2202===d;-1===e&&(0<=a?(e=0,this._setEndings(!0,0===this.repetitions,d)):this._setEndings(0===this.repetitions,!0,d));if(b>=c||0>b){var f=Math.floor(b/c),b=b-c*f,e=e+Math.abs(f),g=this.repetitions-e;0>g?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,b=0<a?
    c:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<a?1:-1})):(0===g?(a=0>a,this._setEndings(a,!a,d)):this._setEndings(!1,!1,d),this._loopCount=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:f}))}if(d&&1===(e&1))return this.time=b,c-b}return this.time=b},_setEndings:function(a,b,c){var d=this._interpolantSettings;c?(d.endingStart=2401,d.endingEnd=2401):(d.endingStart=a?this.zeroSlopeAtStart?2401:2400:2402,d.endingEnd=b?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(a,
    b,c){var d=this._mixer,e=d.time,f=this._weightInterpolant;null===f&&(this._weightInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;f=f.sampleValues;d[0]=e;f[0]=b;d[1]=e+a;f[1]=c;return this}});we.prototype=Object.assign(Object.create(za.prototype),{constructor:we,_bindAction:function(a,b){var c=a._localRoot||this._root,d=a._clip.tracks,e=d.length,f=a._propertyBindings;a=a._interpolants;var g=c.uuid,h=this._bindingsByRootAndName,k=h[g];void 0===k&&(k={},h[g]=k);for(h=0;h!==e;++h){var m=
    d[h],l=m.name,n=k[l];if(void 0===n){n=f[h];if(void 0!==n){null===n._cacheIndex&&(++n.referenceCount,this._addInactiveBinding(n,g,l));continue}n=new ve(qa.create(c,l,b&&b._propertyBindings[h].binding.parsedPath),m.ValueTypeName,m.getValueSize());++n.referenceCount;this._addInactiveBinding(n,g,l)}f[h]=n;a[h].resultBuffer=n.buffer}},_activateAction:function(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var b=(a._localRoot||this._root).uuid,c=a._clip.uuid,d=this._actionsByClip[c];this._bindAction(a,
    d&&d.knownActions[0]);this._addInactiveAction(a,c,b)}b=a._propertyBindings;c=0;for(d=b.length;c!==d;++c){var e=b[c];0===e.useCount++&&(this._lendBinding(e),e.saveOriginalState())}this._lendAction(a)}},_deactivateAction:function(a){if(this._isActiveAction(a)){for(var b=a._propertyBindings,c=0,d=b.length;c!==d;++c){var e=b[c];0===--e.useCount&&(e.restoreOriginalState(),this._takeBackBinding(e))}this._takeBackAction(a)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip=
    {};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}},_isActiveAction:function(a){a=a._cacheIndex;
    return null!==a&&a<this._nActiveActions},_addInactiveAction:function(a,b,c){var d=this._actions,e=this._actionsByClip,f=e[b];void 0===f?(f={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,e[b]=f):(b=f.knownActions,a._byClipCacheIndex=b.length,b.push(a));a._cacheIndex=d.length;d.push(a);f.actionByRoot[c]=a},_removeInactiveAction:function(a){var b=this._actions,c=b[b.length-1],d=a._cacheIndex;c._cacheIndex=d;b[d]=c;b.pop();a._cacheIndex=null;var b=a._clip.uuid,c=this._actionsByClip,d=c[b],e=
    d.knownActions,f=e[e.length-1],g=a._byClipCacheIndex;f._byClipCacheIndex=g;e[g]=f;e.pop();a._byClipCacheIndex=null;delete d.actionByRoot[(a._localRoot||this._root).uuid];0===e.length&&delete c[b];this._removeInactiveBindingsForAction(a)},_removeInactiveBindingsForAction:function(a){a=a._propertyBindings;for(var b=0,c=a.length;b!==c;++b){var d=a[b];0===--d.referenceCount&&this._removeInactiveBinding(d)}},_lendAction:function(a){var b=this._actions,c=a._cacheIndex,d=this._nActiveActions++,e=b[d];a._cacheIndex=
    d;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackAction:function(a){var b=this._actions,c=a._cacheIndex,d=--this._nActiveActions,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_addInactiveBinding:function(a,b,c){var d=this._bindingsByRootAndName,e=d[b],f=this._bindings;void 0===e&&(e={},d[b]=e);e[c]=a;a._cacheIndex=f.length;f.push(a)},_removeInactiveBinding:function(a){var b=this._bindings,c=a.binding,d=c.rootNode.uuid,c=c.path,e=this._bindingsByRootAndName,f=e[d],g=b[b.length-1];a=a._cacheIndex;
    g._cacheIndex=a;b[a]=g;b.pop();delete f[c];a:{for(var h in f)break a;delete e[d]}},_lendBinding:function(a){var b=this._bindings,c=a._cacheIndex,d=this._nActiveBindings++,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackBinding:function(a){var b=this._bindings,c=a._cacheIndex,d=--this._nActiveBindings,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_lendControlInterpolant:function(){var a=this._controlInterpolants,b=this._nActiveControlInterpolants++,c=a[b];void 0===c&&(c=new ed(new Float32Array(2),
    new Float32Array(2),1,this._controlInterpolantsResultBuffer),c.__cacheIndex=b,a[b]=c);return c},_takeBackControlInterpolant:function(a){var b=this._controlInterpolants,c=a.__cacheIndex,d=--this._nActiveControlInterpolants,e=b[d];a.__cacheIndex=d;b[d]=a;e.__cacheIndex=c;b[c]=e},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(a,b){var c=b||this._root,d=c.uuid,c="string"===typeof a?Ca.findByName(c,a):a;a=null!==c?c.uuid:a;var e=this._actionsByClip[a],f=null;if(void 0!==e){f=
    e.actionByRoot[d];if(void 0!==f)return f;f=e.knownActions[0];null===c&&(c=f._clip)}if(null===c)return null;b=new of(this,c,b);this._bindAction(b,f);this._addInactiveAction(b,a,d);return b},existingAction:function(a,b){var c=b||this._root;b=c.uuid;c="string"===typeof a?Ca.findByName(c,a):a;a=this._actionsByClip[c?c.uuid:a];return void 0!==a?a.actionByRoot[b]||null:null},stopAllAction:function(){for(var a=this._actions,b=this._nActiveActions,c=this._bindings,d=this._nActiveBindings,e=this._nActiveBindings=
    this._nActiveActions=0;e!==b;++e)a[e].reset();for(e=0;e!==d;++e)c[e].useCount=0;return this},update:function(a){a*=this.timeScale;for(var b=this._actions,c=this._nActiveActions,d=this.time+=a,e=Math.sign(a),f=this._accuIndex^=1,g=0;g!==c;++g)b[g]._update(d,a,e,f);a=this._bindings;b=this._nActiveBindings;for(g=0;g!==b;++g)a[g].apply(f);return this},getRoot:function(){return this._root},uncacheClip:function(a){var b=this._actions;a=a.uuid;var c=this._actionsByClip,d=c[a];if(void 0!==d){for(var d=d.knownActions,
    e=0,f=d.length;e!==f;++e){var g=d[e];this._deactivateAction(g);var h=g._cacheIndex,k=b[b.length-1];g._cacheIndex=null;g._byClipCacheIndex=null;k._cacheIndex=h;b[h]=k;b.pop();this._removeInactiveBindingsForAction(g)}delete c[a]}},uncacheRoot:function(a){a=a.uuid;var b=this._actionsByClip;for(d in b){var c=b[d].actionByRoot[a];void 0!==c&&(this._deactivateAction(c),this._removeInactiveAction(c))}var d=this._bindingsByRootAndName[a];if(void 0!==d)for(var e in d)a=d[e],a.restoreOriginalState(),this._removeInactiveBinding(a)},
    uncacheAction:function(a,b){a=this.existingAction(a,b);null!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}});Qd.prototype.clone=function(){return new Qd(void 0===this.value.clone?this.value:this.value.clone())};xe.prototype=Object.assign(Object.create(E.prototype),{constructor:xe,isInstancedBufferGeometry:!0,copy:function(a){E.prototype.copy.call(this,a);this.maxInstancedCount=a.maxInstancedCount;return this},clone:function(){return(new this.constructor).copy(this)}});Object.defineProperties(ye.prototype,
    {count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(ye.prototype,{isInterleavedBufferAttribute:!0,setX:function(a,b){this.data.array[a*this.data.stride+this.offset]=b;return this},setY:function(a,b){this.data.array[a*this.data.stride+this.offset+1]=b;return this},setZ:function(a,b){this.data.array[a*this.data.stride+this.offset+2]=b;return this},setW:function(a,b){this.data.array[a*this.data.stride+this.offset+3]=b;return this},getX:function(a){return this.data.array[a*
    this.data.stride+this.offset]},getY:function(a){return this.data.array[a*this.data.stride+this.offset+1]},getZ:function(a){return this.data.array[a*this.data.stride+this.offset+2]},getW:function(a){return this.data.array[a*this.data.stride+this.offset+3]},setXY:function(a,b,c){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;return this},setXYZ:function(a,b,c,d){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;return this},
    setXYZW:function(a,b,c,d,e){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;this.data.array[a+3]=e;return this}});Object.defineProperty(mc.prototype,"needsUpdate",{set:function(a){!0===a&&this.version++}});Object.assign(mc.prototype,{isInterleavedBuffer:!0,setArray:function(a){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==a?a.length/this.stride:0;this.array=a},setDynamic:function(a){this.dynamic=
    a;return this},copy:function(a){this.array=new a.array.constructor(a.array);this.count=a.count;this.stride=a.stride;this.dynamic=a.dynamic;return this},copyAt:function(a,b,c){a*=this.stride;c*=b.stride;for(var d=0,e=this.stride;d<e;d++)this.array[a+d]=b.array[c+d];return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(a){this.onUploadCallback=a;return this}});ze.prototype=Object.assign(Object.create(mc.prototype),
    {constructor:ze,isInstancedInterleavedBuffer:!0,copy:function(a){mc.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this}});Ae.prototype=Object.assign(Object.create(M.prototype),{constructor:Ae,isInstancedBufferAttribute:!0,copy:function(a){M.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this}});Object.assign(pf.prototype,{linePrecision:1,set:function(a,b){this.ray.set(a,b)},setFromCamera:function(a,b){b&&b.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(b.matrixWorld),
    this.ray.direction.set(a.x,a.y,.5).unproject(b).sub(this.ray.origin).normalize()):b&&b.isOrthographicCamera?(this.ray.origin.set(a.x,a.y,(b.near+b.far)/(b.near-b.far)).unproject(b),this.ray.direction.set(0,0,-1).transformDirection(b.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(a,b){var c=[];Be(a,this,c,b);c.sort(qf);return c},intersectObjects:function(a,b){var c=[];if(!1===Array.isArray(a))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),
    c;for(var d=0,e=a.length;d<e;d++)Be(a[d],this,c,b);c.sort(qf);return c}});Object.assign(rf.prototype,{start:function(){this.oldTime=this.startTime=("undefined"===typeof performance?Date:performance).now();this.elapsedTime=0;this.running=!0},stop:function(){this.getElapsedTime();this.autoStart=this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var a=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var b=("undefined"===typeof performance?
    Date:performance).now(),a=(b-this.oldTime)/1E3;this.oldTime=b;this.elapsedTime+=a}return a}});Object.assign(sf.prototype,{set:function(a,b,c){this.radius=a;this.phi=b;this.theta=c;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.radius=a.radius;this.phi=a.phi;this.theta=a.theta;return this},makeSafe:function(){this.phi=Math.max(1E-6,Math.min(Math.PI-1E-6,this.phi));return this},setFromVector3:function(a){this.radius=a.length();0===this.radius?this.phi=this.theta=
    0:(this.theta=Math.atan2(a.x,a.z),this.phi=Math.acos(Q.clamp(a.y/this.radius,-1,1)));return this}});Object.assign(tf.prototype,{set:function(a,b,c){this.radius=a;this.theta=b;this.y=c;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.radius=a.radius;this.theta=a.theta;this.y=a.y;return this},setFromVector3:function(a){this.radius=Math.sqrt(a.x*a.x+a.z*a.z);this.theta=Math.atan2(a.x,a.z);this.y=a.y;return this}});gd.prototype=Object.create(x.prototype);gd.prototype.constructor=
    gd;gd.prototype.isImmediateRenderObject=!0;hd.prototype=Object.create(X.prototype);hd.prototype.constructor=hd;hd.prototype.update=function(){var a=new p,b=new p,c=new ma;return function(){var d,e=["a","b","c"];this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);var f=this.object.matrixWorld,g=this.geometry.attributes.position;if((d=this.object.geometry)&&d.isGeometry)for(var h=d.vertices,k=d.faces,l=d=0,p=k.length;l<p;l++)for(var n=k[l],u=0,r=n.vertexNormals.length;u<r;u++){var t=
    n.vertexNormals[u];a.copy(h[n[e[u]]]).applyMatrix4(f);b.copy(t).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);g.setXYZ(d,a.x,a.y,a.z);d+=1;g.setXYZ(d,b.x,b.y,b.z);d+=1}else if(d&&d.isBufferGeometry)for(e=d.attributes.position,h=d.attributes.normal,u=d=0,r=e.count;u<r;u++)a.set(e.getX(u),e.getY(u),e.getZ(u)).applyMatrix4(f),b.set(h.getX(u),h.getY(u),h.getZ(u)),b.applyMatrix3(c).normalize().multiplyScalar(this.size).add(a),g.setXYZ(d,a.x,a.y,a.z),d+=1,g.setXYZ(d,b.x,b.y,b.z),d+=1;g.needsUpdate=
    !0}}();nc.prototype=Object.create(x.prototype);nc.prototype.constructor=nc;nc.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};nc.prototype.update=function(){var a=new p,b=new p;return function(){this.light.updateMatrixWorld();var c=this.light.distance?this.light.distance:1E3,d=c*Math.tan(this.light.angle);this.cone.scale.set(d,d,c);a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(b.sub(a));
    void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}();oc.prototype=Object.create(X.prototype);oc.prototype.constructor=oc;oc.prototype.updateMatrixWorld=function(){var a=new p,b=new O,c=new O;return function(d){var e=this.bones,f=this.geometry,g=f.getAttribute("position");c.getInverse(this.root.matrixWorld);for(var h=0,k=0;h<e.length;h++){var l=e[h];l.parent&&l.parent.isBone&&(b.multiplyMatrices(c,l.matrixWorld),a.setFromMatrixPosition(b),
    g.setXYZ(k,a.x,a.y,a.z),b.multiplyMatrices(c,l.parent.matrixWorld),a.setFromMatrixPosition(b),g.setXYZ(k+1,a.x,a.y,a.z),k+=2)}f.getAttribute("position").needsUpdate=!0;x.prototype.updateMatrixWorld.call(this,d)}}();pc.prototype=Object.create(ra.prototype);pc.prototype.constructor=pc;pc.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};pc.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};qc.prototype=
    Object.create(x.prototype);qc.prototype.constructor=qc;qc.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};qc.prototype.update=function(){var a=.5*this.light.width,b=.5*this.light.height,c=this.line.geometry.attributes.position,d=c.array;d[0]=a;d[1]=-b;d[2]=0;d[3]=a;d[4]=b;d[5]=0;d[6]=-a;d[7]=b;d[8]=0;d[9]=-a;d[10]=-b;d[11]=0;d[12]=a;d[13]=-b;d[14]=0;c.needsUpdate=!0;void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)};
    rc.prototype=Object.create(x.prototype);rc.prototype.constructor=rc;rc.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};rc.prototype.update=function(){var a=new p,b=new H,c=new H;return function(){var d=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=d.geometry.getAttribute("color");b.copy(this.light.color);c.copy(this.light.groundColor);for(var f=0,g=e.count;f<g;f++){var h=f<g/2?b:c;e.setXYZ(f,h.r,h.g,h.b)}e.needsUpdate=
    !0}d.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate())}}();id.prototype=Object.create(X.prototype);id.prototype.constructor=id;Rd.prototype=Object.create(X.prototype);Rd.prototype.constructor=Rd;jd.prototype=Object.create(X.prototype);jd.prototype.constructor=jd;jd.prototype.update=function(){var a=new p,b=new p,c=new ma;return function(){this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);for(var d=this.object.matrixWorld,e=this.geometry.attributes.position,
    f=this.object.geometry,g=f.vertices,f=f.faces,h=0,k=0,l=f.length;k<l;k++){var p=f[k],n=p.normal;a.copy(g[p.a]).add(g[p.b]).add(g[p.c]).divideScalar(3).applyMatrix4(d);b.copy(n).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);e.setXYZ(h,a.x,a.y,a.z);h+=1;e.setXYZ(h,b.x,b.y,b.z);h+=1}e.needsUpdate=!0}}();sc.prototype=Object.create(x.prototype);sc.prototype.constructor=sc;sc.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();
    this.targetLine.material.dispose()};sc.prototype.update=function(){var a=new p,b=new p,c=new p;return function(){a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);c.subVectors(b,a);this.lightPlane.lookAt(c);void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color));this.targetLine.lookAt(c);
    this.targetLine.scale.z=c.length()}}();kd.prototype=Object.create(X.prototype);kd.prototype.constructor=kd;kd.prototype.update=function(){function a(a,g,h,k){d.set(g,h,k).unproject(e);a=c[a];if(void 0!==a)for(g=b.getAttribute("position"),h=0,k=a.length;h<k;h++)g.setXYZ(a[h],d.x,d.y,d.z)}var b,c,d=new p,e=new Ta;return function(){b=this.geometry;c=this.pointMap;e.projectionMatrix.copy(this.camera.projectionMatrix);a("c",0,0,-1);a("t",0,0,1);a("n1",-1,-1,-1);a("n2",1,-1,-1);a("n3",-1,1,-1);a("n4",1,
    1,-1);a("f1",-1,-1,1);a("f2",1,-1,1);a("f3",-1,1,1);a("f4",1,1,1);a("u1",.7,1.1,-1);a("u2",-.7,1.1,-1);a("u3",0,2,-1);a("cf1",-1,0,1);a("cf2",1,0,1);a("cf3",0,-1,1);a("cf4",0,1,1);a("cn1",-1,0,-1);a("cn2",1,0,-1);a("cn3",0,-1,-1);a("cn4",0,1,-1);b.getAttribute("position").needsUpdate=!0}}();Gb.prototype=Object.create(X.prototype);Gb.prototype.constructor=Gb;Gb.prototype.update=function(){var a=new Xa;return function(b){void 0!==b&&console.warn("THREE.BoxHelper: .update() has no longer arguments.");
    void 0!==this.object&&a.setFromObject(this.object);if(!a.isEmpty()){b=a.min;var c=a.max,d=this.geometry.attributes.position,e=d.array;e[0]=c.x;e[1]=c.y;e[2]=c.z;e[3]=b.x;e[4]=c.y;e[5]=c.z;e[6]=b.x;e[7]=b.y;e[8]=c.z;e[9]=c.x;e[10]=b.y;e[11]=c.z;e[12]=c.x;e[13]=c.y;e[14]=b.z;e[15]=b.x;e[16]=c.y;e[17]=b.z;e[18]=b.x;e[19]=b.y;e[20]=b.z;e[21]=c.x;e[22]=b.y;e[23]=b.z;d.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();Gb.prototype.setFromObject=function(a){this.object=a;this.update();return this};
    ld.prototype=Object.create(X.prototype);ld.prototype.constructor=ld;ld.prototype.updateMatrixWorld=function(a){var b=this.box;b.isEmpty()||(b.getCenter(this.position),b.getSize(this.scale),this.scale.multiplyScalar(.5),x.prototype.updateMatrixWorld.call(this,a))};md.prototype=Object.create(sa.prototype);md.prototype.constructor=md;md.prototype.updateMatrixWorld=function(a){var b=-this.plane.constant;1E-8>Math.abs(b)&&(b=1E-8);this.scale.set(.5*this.size,.5*this.size,b);this.lookAt(this.plane.normal);
    x.prototype.updateMatrixWorld.call(this,a)};var Sd,Ce;Hb.prototype=Object.create(x.prototype);Hb.prototype.constructor=Hb;Hb.prototype.setDirection=function(){var a=new p,b;return function(c){.99999<c.y?this.quaternion.set(0,0,0,1):-.99999>c.y?this.quaternion.set(1,0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),this.quaternion.setFromAxisAngle(a,b))}}();Hb.prototype.setLength=function(a,b,c){void 0===b&&(b=.2*a);void 0===c&&(c=.2*b);this.line.scale.set(1,Math.max(0,a-b),1);this.line.updateMatrix();
    this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};Hb.prototype.setColor=function(a){this.line.material.color.copy(a);this.cone.material.color.copy(a)};nd.prototype=Object.create(X.prototype);nd.prototype.constructor=nd;C.create=function(a,b){console.log("THREE.Curve.create() has been deprecated");a.prototype=Object.create(C.prototype);a.prototype.constructor=a;a.prototype.getPoint=b;return a};Object.assign(bb.prototype,{createPointsGeometry:function(a){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");
    a=this.getPoints(a);return this.createGeometry(a)},createSpacedPointsGeometry:function(a){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");a=this.getSpacedPoints(a);return this.createGeometry(a)},createGeometry:function(a){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var b=new L,c=0,d=a.length;c<d;c++){var e=a[c];b.vertices.push(new p(e.x,
    e.y,e.z||0))}return b}});Object.assign(Sa.prototype,{fromPoints:function(a){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints().");this.setFromPoints(a)}});vf.prototype=Object.create(ca.prototype);wf.prototype=Object.create(ca.prototype);De.prototype=Object.create(ca.prototype);Object.assign(De.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},
    reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});id.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};oc.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(kc.prototype,{extractUrlBase:function(a){console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.");
    return He.extractUrlBase(a)}});Object.assign(od.prototype,{center:function(a){console.warn("THREE.Box2: .center() has been renamed to .getCenter().");return this.getCenter(a)},empty:function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(a){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)},size:function(a){console.warn("THREE.Box2: .size() has been renamed to .getSize().");
    return this.getSize(a)}});Object.assign(Xa.prototype,{center:function(a){console.warn("THREE.Box3: .center() has been renamed to .getCenter().");return this.getCenter(a)},empty:function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(a){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)},isIntersectionSphere:function(a){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");
    return this.intersectsSphere(a)},size:function(a){console.warn("THREE.Box3: .size() has been renamed to .getSize().");return this.getSize(a)}});Nb.prototype.center=function(a){console.warn("THREE.Line3: .center() has been renamed to .getCenter().");return this.getCenter(a)};Object.assign(Q,{random16:function(){console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead.");return Math.random()},nearestPowerOfTwo:function(a){console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().");
    return Q.floorPowerOfTwo(a)},nextPowerOfTwo:function(a){console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().");return Q.ceilPowerOfTwo(a)}});Object.assign(ma.prototype,{flattenToArrayOffset:function(a,b){console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(a,b)},multiplyVector3:function(a){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)},
    multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(a){console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(a)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(O.prototype,{extractPosition:function(a){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");
    return this.copyPosition(a)},flattenToArrayOffset:function(a,b){console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(a,b)},getPosition:function(){var a;return function(){void 0===a&&(a=new p);console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return a.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(a){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");
    return this.makeRotationFromQuaternion(a)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(a){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector4:function(a){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},
    rotateAxis:function(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");a.transformDirection(this)},crossVector:function(a){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},
    rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(a){console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(a)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(a,b,c,d,e,f){console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.");
    return this.makePerspective(a,b,d,c,e,f)}});Ea.prototype.isIntersectionLine=function(a){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(a)};ha.prototype.multiplyVector3=function(a){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return a.applyQuaternion(this)};Object.assign(sb.prototype,{isIntersectionBox:function(a){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");
    return this.intersectsBox(a)},isIntersectionPlane:function(a){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(a)},isIntersectionSphere:function(a){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(a)}});Object.assign(jb.prototype,{extractAllPoints:function(a){console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.");return this.extractPoints(a)},
    extrude:function(a){console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.");return new ib(this,a)},makeGeometry:function(a){console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.");return new xb(this,a)}});Object.assign(D.prototype,{fromAttribute:function(a,b,c){console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(a,b,c)},distanceToManhattan:function(a){console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");
    return this.manhattanDistanceTo(a)},lengthManhattan:function(){console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(p.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},
    getPositionFromMatrix:function(a){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,b){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(b,
    a)},applyProjection:function(a){console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.");return this.applyMatrix4(a)},fromAttribute:function(a,b,c){console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(a,b,c)},distanceToManhattan:function(a){console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(a)},lengthManhattan:function(){console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().");
    return this.manhattanLength()}});Object.assign(aa.prototype,{fromAttribute:function(a,b,c){console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(a,b,c)},lengthManhattan:function(){console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});L.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")};Object.assign(x.prototype,
    {getChildByName:function(a){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(a)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(a,b){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(b,a)}});Object.defineProperties(x.prototype,{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");
    return this.rotation.order},set:function(a){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");this.rotation.order=a}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.defineProperties(Dc.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");
    return this.levels}}});Object.defineProperty(Ec.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});Object.defineProperty(C.prototype,"__arcLengthDivisions",{get:function(){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");return this.arcLengthDivisions},set:function(a){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");
    this.arcLengthDivisions=a}});ba.prototype.setLens=function(a,b){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.");void 0!==b&&(this.filmGauge=b);this.setFocalLength(a)};Object.defineProperties(da.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(a){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");this.shadow.camera.fov=a}},
    shadowCameraLeft:{set:function(a){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");this.shadow.camera.left=a}},shadowCameraRight:{set:function(a){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");this.shadow.camera.right=a}},shadowCameraTop:{set:function(a){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");this.shadow.camera.top=a}},shadowCameraBottom:{set:function(a){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");
    this.shadow.camera.bottom=a}},shadowCameraNear:{set:function(a){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");this.shadow.camera.near=a}},shadowCameraFar:{set:function(a){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");this.shadow.camera.far=a}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(a){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");
    this.shadow.bias=a}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(a){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");this.shadow.mapSize.width=a}},shadowMapHeight:{set:function(a){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");this.shadow.mapSize.height=a}}});Object.defineProperties(M.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead.");
    return this.array.length}}});Object.assign(E.prototype,{addIndex:function(a){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(a)},addDrawCall:function(a,b,c){void 0!==c&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(a,b)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");
    this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(E.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return this.groups}}});
    Object.defineProperties(Qd.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.");return this}}});Object.defineProperties(P.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},
    wrapRGB:{get:function(){console.warn("THREE.Material: .wrapRGB has been removed.");return new H}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(a){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.");this.flatShading=1===a}}});Object.defineProperties(Ma.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");
    return!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(Fa.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return this.extensions.derivatives},set:function(a){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");this.extensions.derivatives=a}}});Object.assign(ce.prototype,
    {getCurrentRenderTarget:function(){console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().");return this.getRenderTarget()},getMaxAnisotropy:function(){console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().");return this.capabilities.getMaxAnisotropy()},getPrecision:function(){console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.");return this.capabilities.precision},resetGLState:function(){console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset().");
    return this.state.reset()},supportsFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");
    return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return this.extensions.get("WEBGL_compressed_texture_pvrtc")},
    supportsBlendMinMax:function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.");return this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");
    return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(a){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");this.setScissorTest(a)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}});
    Object.defineProperties(ce.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");this.shadowMap.enabled=a}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");this.shadowMap.type=a}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.");
    this.shadowMap.cullFace=a}}});Object.defineProperties(Ue.prototype,{cullFace:{get:function(){return this.renderReverseSided?2:1},set:function(a){a=1!==a;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+a+".");this.renderReverseSided=a}}});Object.defineProperties(kb.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return this.texture.wrapS},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");
    this.texture.wrapS=a}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=a}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return this.texture.magFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=
    a}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=a}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");return this.texture.anisotropy},set:function(a){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=
    a}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},set:function(a){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=a}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},set:function(a){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");this.texture.repeat=a}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");
    return this.texture.format},set:function(a){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=a}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return this.texture.type},set:function(a){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");this.texture.type=a}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return this.texture.generateMipmaps},
    set:function(a){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=a}}});Object.assign(be.prototype,{getStandingMatrix:function(){console.warn("THREE.WebVRManager: .getStandingMatrix() has been removed.")}});Object.defineProperties(be.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}});lc.prototype.load=function(a){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");
    var b=this;(new qe).load(a,function(a){b.setBuffer(a)});return this};ue.prototype.getData=function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()};fd.prototype.updateCubeMap=function(a,b){console.warn("THREE.CubeCamera: .updateCubeMap() is now .update().");return this.update(a,b)};l.WebGLRenderTargetCube=Jb;l.WebGLRenderTarget=kb;l.WebGLRenderer=ce;l.ShaderLib=tb;l.UniformsLib=K;l.UniformsUtils=Ga;l.ShaderChunk=R;l.FogExp2=Pb;l.Fog=Qb;
    l.Scene=vd;l.LensFlare=de;l.Sprite=Cc;l.LOD=Dc;l.SkinnedMesh=xd;l.Skeleton=Ec;l.Bone=wd;l.Mesh=ra;l.LineSegments=X;l.LineLoop=yd;l.Line=sa;l.Points=Rb;l.Group=Fc;l.VideoTexture=ee;l.DataTexture=lb;l.CompressedTexture=Sb;l.CubeTexture=db;l.CanvasTexture=tc;l.DepthTexture=Gc;l.Texture=U;l.CompressedTextureLoader=gf;l.DataTextureLoader=ie;l.CubeTextureLoader=je;l.TextureLoader=Ad;l.ObjectLoader=jf;l.MaterialLoader=Pd;l.BufferGeometryLoader=le;l.DefaultLoadingManager=xa;l.LoadingManager=he;l.JSONLoader=
    me;l.ImageLoader=ad;l.ImageBitmapLoader=ne;l.FontLoader=kf;l.FileLoader=Na;l.Loader=kc;l.LoaderUtils=He;l.Cache=Ib;l.AudioLoader=qe;l.SpotLightShadow=Cd;l.SpotLight=Dd;l.PointLight=Ed;l.RectAreaLight=Id;l.HemisphereLight=Bd;l.DirectionalLightShadow=Fd;l.DirectionalLight=Gd;l.AmbientLight=Hd;l.LightShadow=Fb;l.Light=da;l.StereoCamera=lf;l.PerspectiveCamera=ba;l.OrthographicCamera=Lb;l.CubeCamera=fd;l.ArrayCamera=ud;l.Camera=Ta;l.AudioListener=re;l.PositionalAudio=te;l.AudioContext=se;l.AudioAnalyser=
    ue;l.Audio=lc;l.VectorKeyframeTrack=jc;l.StringKeyframeTrack=Jd;l.QuaternionKeyframeTrack=dd;l.NumberKeyframeTrack=ic;l.ColorKeyframeTrack=Md;l.BooleanKeyframeTrack=Kd;l.PropertyMixer=ve;l.PropertyBinding=qa;l.KeyframeTrack=T;l.AnimationUtils=ga;l.AnimationObjectGroup=nf;l.AnimationMixer=we;l.AnimationClip=Ca;l.Uniform=Qd;l.InstancedBufferGeometry=xe;l.BufferGeometry=E;l.Geometry=L;l.InterleavedBufferAttribute=ye;l.InstancedInterleavedBuffer=ze;l.InterleavedBuffer=mc;l.InstancedBufferAttribute=Ae;
    l.Face3=Ya;l.Object3D=x;l.Raycaster=pf;l.Layers=Wd;l.EventDispatcher=za;l.Clock=rf;l.QuaternionLinearInterpolant=Ld;l.LinearInterpolant=ed;l.DiscreteInterpolant=Od;l.CubicInterpolant=Nd;l.Interpolant=pa;l.Triangle=Za;l.Math=Q;l.Spherical=sf;l.Cylindrical=tf;l.Plane=Ea;l.Frustum=rd;l.Sphere=Ia;l.Ray=sb;l.Matrix4=O;l.Matrix3=ma;l.Box3=Xa;l.Box2=od;l.Line3=Nb;l.Euler=gb;l.Vector4=aa;l.Vector3=p;l.Vector2=D;l.Quaternion=ha;l.Color=H;l.ImmediateRenderObject=gd;l.VertexNormalsHelper=hd;l.SpotLightHelper=
    nc;l.SkeletonHelper=oc;l.PointLightHelper=pc;l.RectAreaLightHelper=qc;l.HemisphereLightHelper=rc;l.GridHelper=id;l.PolarGridHelper=Rd;l.FaceNormalsHelper=jd;l.DirectionalLightHelper=sc;l.CameraHelper=kd;l.BoxHelper=Gb;l.Box3Helper=ld;l.PlaneHelper=md;l.ArrowHelper=Hb;l.AxesHelper=nd;l.Shape=jb;l.Path=Sa;l.ShapePath=oe;l.Font=pe;l.CurvePath=bb;l.Curve=C;l.ShapeUtils=$a;l.SceneUtils={createMultiMaterialObject:function(a,b){for(var c=new Fc,d=0,e=b.length;d<e;d++)c.add(new ra(a,b[d]));return c},detach:function(a,
    b,c){a.applyMatrix(b.matrixWorld);b.remove(a);c.add(a)},attach:function(a,b,c){a.applyMatrix((new O).getInverse(c.matrixWorld));b.remove(a);c.add(a)}};l.WebGLUtils=af;l.WireframeGeometry=Tb;l.ParametricGeometry=Hc;l.ParametricBufferGeometry=Ub;l.TetrahedronGeometry=Jc;l.TetrahedronBufferGeometry=Vb;l.OctahedronGeometry=Kc;l.OctahedronBufferGeometry=ub;l.IcosahedronGeometry=Lc;l.IcosahedronBufferGeometry=Wb;l.DodecahedronGeometry=Mc;l.DodecahedronBufferGeometry=Xb;l.PolyhedronGeometry=Ic;l.PolyhedronBufferGeometry=
    ja;l.TubeGeometry=Nc;l.TubeBufferGeometry=Yb;l.TorusKnotGeometry=Oc;l.TorusKnotBufferGeometry=Zb;l.TorusGeometry=Pc;l.TorusBufferGeometry=$b;l.TextGeometry=Uc;l.TextBufferGeometry=ac;l.SphereGeometry=Vc;l.SphereBufferGeometry=wb;l.RingGeometry=Wc;l.RingBufferGeometry=bc;l.PlaneGeometry=Ac;l.PlaneBufferGeometry=rb;l.LatheGeometry=Xc;l.LatheBufferGeometry=cc;l.ShapeGeometry=xb;l.ShapeBufferGeometry=yb;l.ExtrudeGeometry=ib;l.ExtrudeBufferGeometry=La;l.EdgesGeometry=dc;l.ConeGeometry=Yc;l.ConeBufferGeometry=
    Zc;l.CylinderGeometry=zb;l.CylinderBufferGeometry=ab;l.CircleGeometry=$c;l.CircleBufferGeometry=ec;l.BoxGeometry=Mb;l.BoxBufferGeometry=qb;l.ShadowMaterial=fc;l.SpriteMaterial=hb;l.RawShaderMaterial=gc;l.ShaderMaterial=Fa;l.PointsMaterial=Ka;l.MeshPhysicalMaterial=Ab;l.MeshStandardMaterial=Ua;l.MeshPhongMaterial=Ma;l.MeshToonMaterial=Bb;l.MeshNormalMaterial=Cb;l.MeshLambertMaterial=Db;l.MeshDepthMaterial=eb;l.MeshDistanceMaterial=fb;l.MeshBasicMaterial=Aa;l.LineDashedMaterial=Eb;l.LineBasicMaterial=
    W;l.Material=P;l.Float64BufferAttribute=zc;l.Float32BufferAttribute=B;l.Uint32BufferAttribute=pb;l.Int32BufferAttribute=yc;l.Uint16BufferAttribute=ob;l.Int16BufferAttribute=xc;l.Uint8ClampedBufferAttribute=wc;l.Uint8BufferAttribute=vc;l.Int8BufferAttribute=uc;l.BufferAttribute=M;l.ArcCurve=hc;l.CatmullRomCurve3=ca;l.CubicBezierCurve=Oa;l.CubicBezierCurve3=Va;l.EllipseCurve=Ba;l.LineCurve=ya;l.LineCurve3=Pa;l.QuadraticBezierCurve=Qa;l.QuadraticBezierCurve3=Wa;l.SplineCurve=Ra;l.REVISION="89";l.MOUSE=
    {LEFT:0,MIDDLE:1,RIGHT:2};l.CullFaceNone=0;l.CullFaceBack=1;l.CullFaceFront=2;l.CullFaceFrontBack=3;l.FrontFaceDirectionCW=0;l.FrontFaceDirectionCCW=1;l.BasicShadowMap=0;l.PCFShadowMap=1;l.PCFSoftShadowMap=2;l.FrontSide=0;l.BackSide=1;l.DoubleSide=2;l.FlatShading=1;l.SmoothShading=2;l.NoColors=0;l.FaceColors=1;l.VertexColors=2;l.NoBlending=0;l.NormalBlending=1;l.AdditiveBlending=2;l.SubtractiveBlending=3;l.MultiplyBlending=4;l.CustomBlending=5;l.AddEquation=100;l.SubtractEquation=101;l.ReverseSubtractEquation=
    102;l.MinEquation=103;l.MaxEquation=104;l.ZeroFactor=200;l.OneFactor=201;l.SrcColorFactor=202;l.OneMinusSrcColorFactor=203;l.SrcAlphaFactor=204;l.OneMinusSrcAlphaFactor=205;l.DstAlphaFactor=206;l.OneMinusDstAlphaFactor=207;l.DstColorFactor=208;l.OneMinusDstColorFactor=209;l.SrcAlphaSaturateFactor=210;l.NeverDepth=0;l.AlwaysDepth=1;l.LessDepth=2;l.LessEqualDepth=3;l.EqualDepth=4;l.GreaterEqualDepth=5;l.GreaterDepth=6;l.NotEqualDepth=7;l.MultiplyOperation=0;l.MixOperation=1;l.AddOperation=2;l.NoToneMapping=
    0;l.LinearToneMapping=1;l.ReinhardToneMapping=2;l.Uncharted2ToneMapping=3;l.CineonToneMapping=4;l.UVMapping=300;l.CubeReflectionMapping=301;l.CubeRefractionMapping=302;l.EquirectangularReflectionMapping=303;l.EquirectangularRefractionMapping=304;l.SphericalReflectionMapping=305;l.CubeUVReflectionMapping=306;l.CubeUVRefractionMapping=307;l.RepeatWrapping=1E3;l.ClampToEdgeWrapping=1001;l.MirroredRepeatWrapping=1002;l.NearestFilter=1003;l.NearestMipMapNearestFilter=1004;l.NearestMipMapLinearFilter=1005;
    l.LinearFilter=1006;l.LinearMipMapNearestFilter=1007;l.LinearMipMapLinearFilter=1008;l.UnsignedByteType=1009;l.ByteType=1010;l.ShortType=1011;l.UnsignedShortType=1012;l.IntType=1013;l.UnsignedIntType=1014;l.FloatType=1015;l.HalfFloatType=1016;l.UnsignedShort4444Type=1017;l.UnsignedShort5551Type=1018;l.UnsignedShort565Type=1019;l.UnsignedInt248Type=1020;l.AlphaFormat=1021;l.RGBFormat=1022;l.RGBAFormat=1023;l.LuminanceFormat=1024;l.LuminanceAlphaFormat=1025;l.RGBEFormat=1023;l.DepthFormat=1026;l.DepthStencilFormat=
    1027;l.RGB_S3TC_DXT1_Format=2001;l.RGBA_S3TC_DXT1_Format=2002;l.RGBA_S3TC_DXT3_Format=2003;l.RGBA_S3TC_DXT5_Format=2004;l.RGB_PVRTC_4BPPV1_Format=2100;l.RGB_PVRTC_2BPPV1_Format=2101;l.RGBA_PVRTC_4BPPV1_Format=2102;l.RGBA_PVRTC_2BPPV1_Format=2103;l.RGB_ETC1_Format=2151;l.LoopOnce=2200;l.LoopRepeat=2201;l.LoopPingPong=2202;l.InterpolateDiscrete=2300;l.InterpolateLinear=2301;l.InterpolateSmooth=2302;l.ZeroCurvatureEnding=2400;l.ZeroSlopeEnding=2401;l.WrapAroundEnding=2402;l.TrianglesDrawMode=0;l.TriangleStripDrawMode=
    1;l.TriangleFanDrawMode=2;l.LinearEncoding=3E3;l.sRGBEncoding=3001;l.GammaEncoding=3007;l.RGBEEncoding=3002;l.LogLuvEncoding=3003;l.RGBM7Encoding=3004;l.RGBM16Encoding=3005;l.RGBDEncoding=3006;l.BasicDepthPacking=3200;l.RGBADepthPacking=3201;l.CubeGeometry=Mb;l.Face4=function(a,b,c,d,e,f,g){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new Ya(a,b,c,e,f,g)};l.LineStrip=0;l.LinePieces=1;l.MeshFaceMaterial=function(a){console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead.");
    return a};l.MultiMaterial=function(a){void 0===a&&(a=[]);console.warn("THREE.MultiMaterial has been removed. Use an Array instead.");a.isMultiMaterial=!0;a.materials=a;a.clone=function(){return a.slice()};return a};l.PointCloud=function(a,b){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new Rb(a,b)};l.Particle=function(a){console.warn("THREE.Particle has been renamed to THREE.Sprite.");return new Cc(a)};l.ParticleSystem=function(a,b){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");
    return new Rb(a,b)};l.PointCloudMaterial=function(a){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new Ka(a)};l.ParticleBasicMaterial=function(a){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new Ka(a)};l.ParticleSystemMaterial=function(a){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new Ka(a)};l.Vertex=function(a,b,c){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");
    return new p(a,b,c)};l.DynamicBufferAttribute=function(a,b){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.");return(new M(a,b)).setDynamic(!0)};l.Int8Attribute=function(a,b){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");return new uc(a,b)};l.Uint8Attribute=function(a,b){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");return new vc(a,
    b)};l.Uint8ClampedAttribute=function(a,b){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");return new wc(a,b)};l.Int16Attribute=function(a,b){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");return new xc(a,b)};l.Uint16Attribute=function(a,b){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");return new ob(a,b)};l.Int32Attribute=
    function(a,b){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");return new yc(a,b)};l.Uint32Attribute=function(a,b){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");return new pb(a,b)};l.Float32Attribute=function(a,b){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");return new B(a,b)};l.Float64Attribute=function(a,b){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");
    return new zc(a,b)};l.ClosedSplineCurve3=vf;l.SplineCurve3=wf;l.Spline=De;l.AxisHelper=function(a){console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper.");return new nd(a)};l.BoundingBoxHelper=function(a,b){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");return new Gb(a,b)};l.EdgesHelper=function(a,b){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");return new X(new dc(a.geometry),new W({color:void 0!==
    b?b:16777215}))};l.WireframeHelper=function(a,b){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");return new X(new Tb(a.geometry),new W({color:void 0!==b?b:16777215}))};l.XHRLoader=function(a){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader.");return new Na(a)};l.BinaryTextureLoader=function(a){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");return new ie(a)};l.GeometryUtils={merge:function(a,b,c){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");
    if(b.isMesh){b.matrixAutoUpdate&&b.updateMatrix();var d=b.matrix;b=b.geometry}a.merge(b,d,c)},center:function(a){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return a.center()}};l.ImageUtils={crossOrigin:void 0,loadTexture:function(a,b,c,d){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var e=new Ad;e.setCrossOrigin(this.crossOrigin);a=e.load(a,c,void 0,d);b&&(a.mapping=b);return a},
    loadTextureCube:function(a,b,c,d){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var e=new je;e.setCrossOrigin(this.crossOrigin);a=e.load(a,c,void 0,d);b&&(a.mapping=b);return a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};
    l.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js.");this.projectVector=function(a,b){console.warn("THREE.Projector: .projectVector() is now vector.project().");a.project(b)};this.unprojectVector=function(a,b){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");a.unproject(b)};this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}};l.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js");
    this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){}};Object.defineProperty(l,"__esModule",{value:!0})});
},{}],"form/loaders/Collada":[function(require,module,exports){
require('../lib/ColladaLoader.js');

exports.Collada = (function() {
  function Collada(properties, cb) {
    this.modelLoader = new THREE.ColladaLoader;
    this.modelLoader.load(properties.path, (function(_this) {
      return function(collada) {
        collada.scene.animations = collada.animations;
        return cb(collada.scene);
      };
    })(this), null, function(e) {
      return console.log(e);
    });
  }

  return Collada;

})();


},{"../lib/ColladaLoader.js":"form/lib/ColladaLoader"}],"form/loaders/FBX":[function(require,module,exports){
require('../lib/FBXLoader.js');

window.Zlib = require('../lib/inflate.min.js').Zlib;

exports.FBX = (function() {
  function FBX(properties, cb) {
    this.modelLoader = new THREE.FBXLoader;
    this.modelLoader.load(properties.path, (function(_this) {
      return function(model) {
        return cb(model);
      };
    })(this), null, function(e) {
      return console.log(e);
    });
  }

  return FBX;

})();


},{"../lib/FBXLoader.js":"form/lib/FBXLoader","../lib/inflate.min.js":"form/lib/inflate-min"}],"form/loaders/GLTF":[function(require,module,exports){
require('../lib/GLTFLoader.js');

exports.GLTF = (function() {
  function GLTF(properties, cb) {
    this.modelLoader = new THREE.GLTFLoader;
    this.modelLoader.load(properties.path, function(model) {
      model.scene.animations = model.animations;
      return cb(model.scene);
    }, null, function(e) {
      return console.log(e);
    });
  }

  return GLTF;

})();


},{"../lib/GLTFLoader.js":"form/lib/GLTFLoader"}],"form/loaders/JSONObject":[function(require,module,exports){
exports.JSONObject = (function() {
  function JSONObject(properties, cb) {
    this.readJSON(properties.path, (function(_this) {
      return function(json) {
        var metadata;
        metadata = JSON.parse(json).metadata;
        if (metadata.type === 'Object') {
          return _this.loadObject(properties, cb);
        } else {
          return _this.loadGeometry(properties, cb);
        }
      };
    })(this));
  }

  JSONObject.prototype.loadObject = function(properties, cb) {
    this.modelLoader = new THREE.ObjectLoader;
    return this.modelLoader.load(properties.path, (function(_this) {
      return function(model) {
        return cb(model);
      };
    })(this), null, function(e) {
      return console.log(e);
    });
  };

  JSONObject.prototype.loadGeometry = function(properties, cb) {
    this.modelLoader = new THREE.JSONLoader;
    return this.modelLoader.load(properties.path, (function(_this) {
      return function(geometry, materials) {
        var material, model;
        material = materials[0];
        model = new THREE.Mesh(geometry, material);
        model.animations = geometry.animations;
        return cb(model);
      };
    })(this), null, function(e) {
      return console.log(e);
    });
  };

  JSONObject.prototype.readJSON = function(path, cb) {
    var rawFile;
    rawFile = new XMLHttpRequest;
    rawFile.overrideMimeType('application/json');
    rawFile.open('GET', path, true);
    rawFile.onreadystatechange = function() {
      if (rawFile.readyState === 4 && rawFile.status === 200) {
        return cb(rawFile.responseText);
      }
    };
    return rawFile.send(null);
  };

  return JSONObject;

})();


},{}],"form/loaders/OBJ":[function(require,module,exports){
require('../lib/OBJLoader.js');

require('../lib/MTLLoader.js');

exports.OBJ = (function() {
  function OBJ(properties, cb) {
    var path;
    path = properties.path;
    this.dirPath = path.substring(0, path.indexOf(path.split('/').pop()));
    this.modelPath = path.split('/').pop();
    this.materialPath = this.modelPath.replace('.obj', '.mtl');
    this.materialLoader = new THREE.MTLLoader;
    this.modelLoader = new THREE.OBJLoader;
    this.materialLoader.setPath(this.dirPath);
    this.materialLoader.load(this.materialPath, (function(_this) {
      return function(materials) {
        materials.preload();
        _this.modelLoader.setMaterials(materials);
        _this.modelLoader.setPath(_this.dirPath);
        return _this.modelLoader.load(_this.modelPath, function(model) {
          return cb(model);
        });
      };
    })(this));
  }

  return OBJ;

})();


},{"../lib/MTLLoader.js":"form/lib/MTLLoader","../lib/OBJLoader.js":"form/lib/OBJLoader"}],"form":[function(require,module,exports){
var Light, Mesh, Model, Scene, Studio;

window.THREE = require('./form/lib/three.min.js');

require('./form/GA.coffee');

Scene = require('./form/Scene.coffee').Scene;

Studio = require('./form/Studio.coffee').Studio;

Model = require('./form/Model.coffee').Model;

Mesh = require('./form/Mesh.coffee').Mesh;

Light = require('./form/Light.coffee').Light;

module.exports = {
  Scene: Scene,
  Studio: Studio,
  Model: Model,
  Mesh: Mesh,
  Light: Light,
  MeshPhongMaterial: THREE.MeshPhongMaterial,
  MeshNormalMaterial: THREE.MeshNormalMaterial,
  MeshStandardMaterial: THREE.MeshStandardMaterial,
  LineBasicMaterial: THREE.LineBasicMaterial,
  LineDashedMaterial: THREE.LineDashedMaterial,
  MeshBasicMaterial: THREE.MeshBasicMaterial,
  MeshDepthMaterial: THREE.MeshDepthMaterial,
  MeshLambertMaterial: THREE.MeshLambertMaterial,
  MeshPhysicalMaterial: THREE.MeshPhysicalMaterial,
  MeshToonMaterial: THREE.MeshToonMaterial,
  PointsMaterial: THREE.PointsMaterial,
  RawShaderMaterial: THREE.RawShaderMaterial,
  ShaderMaterial: THREE.ShaderMaterial,
  ShadowMaterial: THREE.ShadowMaterial,
  SpriteMaterial: THREE.SpriteMaterial
};


},{"./form/GA.coffee":"form/GA","./form/Light.coffee":"form/Light","./form/Mesh.coffee":"form/Mesh","./form/Model.coffee":"form/Model","./form/Scene.coffee":"form/Scene","./form/Studio.coffee":"form/Studio","./form/lib/three.min.js":"form/lib/three-min"}]},{},[])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnJhbWVyLm1vZHVsZXMuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL1VzZXJzL2VtaWx3aWRsdW5kL0RvY3VtZW50cy9GcmFtZXIvZnJhbWVyLWZvcm0vZXhhbXBsZXMvbW9uc3Rlci5mcmFtZXIvbW9kdWxlcy9mb3JtLmNvZmZlZSIsIi4uLy4uLy4uLy4uLy4uL1VzZXJzL2VtaWx3aWRsdW5kL0RvY3VtZW50cy9GcmFtZXIvZnJhbWVyLWZvcm0vZXhhbXBsZXMvbW9uc3Rlci5mcmFtZXIvbW9kdWxlcy9mb3JtL2xvYWRlcnMvT0JKLmNvZmZlZSIsIi4uLy4uLy4uLy4uLy4uL1VzZXJzL2VtaWx3aWRsdW5kL0RvY3VtZW50cy9GcmFtZXIvZnJhbWVyLWZvcm0vZXhhbXBsZXMvbW9uc3Rlci5mcmFtZXIvbW9kdWxlcy9mb3JtL2xvYWRlcnMvSlNPTk9iamVjdC5jb2ZmZWUiLCIuLi8uLi8uLi8uLi8uLi9Vc2Vycy9lbWlsd2lkbHVuZC9Eb2N1bWVudHMvRnJhbWVyL2ZyYW1lci1mb3JtL2V4YW1wbGVzL21vbnN0ZXIuZnJhbWVyL21vZHVsZXMvZm9ybS9sb2FkZXJzL0dMVEYuY29mZmVlIiwiLi4vLi4vLi4vLi4vLi4vVXNlcnMvZW1pbHdpZGx1bmQvRG9jdW1lbnRzL0ZyYW1lci9mcmFtZXItZm9ybS9leGFtcGxlcy9tb25zdGVyLmZyYW1lci9tb2R1bGVzL2Zvcm0vbG9hZGVycy9GQlguY29mZmVlIiwiLi4vLi4vLi4vLi4vLi4vVXNlcnMvZW1pbHdpZGx1bmQvRG9jdW1lbnRzL0ZyYW1lci9mcmFtZXItZm9ybS9leGFtcGxlcy9tb25zdGVyLmZyYW1lci9tb2R1bGVzL2Zvcm0vbG9hZGVycy9Db2xsYWRhLmNvZmZlZSIsIi4uLy4uLy4uLy4uLy4uL1VzZXJzL2VtaWx3aWRsdW5kL0RvY3VtZW50cy9GcmFtZXIvZnJhbWVyLWZvcm0vZXhhbXBsZXMvbW9uc3Rlci5mcmFtZXIvbW9kdWxlcy9mb3JtL2xpYi90aHJlZS5taW4uanMiLCIuLi8uLi8uLi8uLi8uLi9Vc2Vycy9lbWlsd2lkbHVuZC9Eb2N1bWVudHMvRnJhbWVyL2ZyYW1lci1mb3JtL2V4YW1wbGVzL21vbnN0ZXIuZnJhbWVyL21vZHVsZXMvZm9ybS9saWIvaW5mbGF0ZS5taW4uanMiLCIuLi8uLi8uLi8uLi8uLi9Vc2Vycy9lbWlsd2lkbHVuZC9Eb2N1bWVudHMvRnJhbWVyL2ZyYW1lci1mb3JtL2V4YW1wbGVzL21vbnN0ZXIuZnJhbWVyL21vZHVsZXMvZm9ybS9saWIvT3JiaXRDb250cm9scy5qcyIsIi4uLy4uLy4uLy4uLy4uL1VzZXJzL2VtaWx3aWRsdW5kL0RvY3VtZW50cy9GcmFtZXIvZnJhbWVyLWZvcm0vZXhhbXBsZXMvbW9uc3Rlci5mcmFtZXIvbW9kdWxlcy9mb3JtL2xpYi9PQkpMb2FkZXIuanMiLCIuLi8uLi8uLi8uLi8uLi9Vc2Vycy9lbWlsd2lkbHVuZC9Eb2N1bWVudHMvRnJhbWVyL2ZyYW1lci1mb3JtL2V4YW1wbGVzL21vbnN0ZXIuZnJhbWVyL21vZHVsZXMvZm9ybS9saWIvTVRMTG9hZGVyLmpzIiwiLi4vLi4vLi4vLi4vLi4vVXNlcnMvZW1pbHdpZGx1bmQvRG9jdW1lbnRzL0ZyYW1lci9mcmFtZXItZm9ybS9leGFtcGxlcy9tb25zdGVyLmZyYW1lci9tb2R1bGVzL2Zvcm0vbGliL0dMVEZMb2FkZXIuanMiLCIuLi8uLi8uLi8uLi8uLi9Vc2Vycy9lbWlsd2lkbHVuZC9Eb2N1bWVudHMvRnJhbWVyL2ZyYW1lci1mb3JtL2V4YW1wbGVzL21vbnN0ZXIuZnJhbWVyL21vZHVsZXMvZm9ybS9saWIvRkJYTG9hZGVyLmpzIiwiLi4vLi4vLi4vLi4vLi4vVXNlcnMvZW1pbHdpZGx1bmQvRG9jdW1lbnRzL0ZyYW1lci9mcmFtZXItZm9ybS9leGFtcGxlcy9tb25zdGVyLmZyYW1lci9tb2R1bGVzL2Zvcm0vbGliL0NvbGxhZGFMb2FkZXIuanMiLCIuLi8uLi8uLi8uLi8uLi9Vc2Vycy9lbWlsd2lkbHVuZC9Eb2N1bWVudHMvRnJhbWVyL2ZyYW1lci1mb3JtL2V4YW1wbGVzL21vbnN0ZXIuZnJhbWVyL21vZHVsZXMvZm9ybS9fU3RhdGVzLmNvZmZlZSIsIi4uLy4uLy4uLy4uLy4uL1VzZXJzL2VtaWx3aWRsdW5kL0RvY3VtZW50cy9GcmFtZXIvZnJhbWVyLWZvcm0vZXhhbXBsZXMvbW9uc3Rlci5mcmFtZXIvbW9kdWxlcy9mb3JtL19DYW1lcmEuY29mZmVlIiwiLi4vLi4vLi4vLi4vLi4vVXNlcnMvZW1pbHdpZGx1bmQvRG9jdW1lbnRzL0ZyYW1lci9mcmFtZXItZm9ybS9leGFtcGxlcy9tb25zdGVyLmZyYW1lci9tb2R1bGVzL2Zvcm0vX0Jhc2VDbGFzcy5jb2ZmZWUiLCIuLi8uLi8uLi8uLi8uLi9Vc2Vycy9lbWlsd2lkbHVuZC9Eb2N1bWVudHMvRnJhbWVyL2ZyYW1lci1mb3JtL2V4YW1wbGVzL21vbnN0ZXIuZnJhbWVyL21vZHVsZXMvZm9ybS9fQW5pbWF0aW9uLmNvZmZlZSIsIi4uLy4uLy4uLy4uLy4uL1VzZXJzL2VtaWx3aWRsdW5kL0RvY3VtZW50cy9GcmFtZXIvZnJhbWVyLWZvcm0vZXhhbXBsZXMvbW9uc3Rlci5mcmFtZXIvbW9kdWxlcy9mb3JtL1N0dWRpby5jb2ZmZWUiLCIuLi8uLi8uLi8uLi8uLi9Vc2Vycy9lbWlsd2lkbHVuZC9Eb2N1bWVudHMvRnJhbWVyL2ZyYW1lci1mb3JtL2V4YW1wbGVzL21vbnN0ZXIuZnJhbWVyL21vZHVsZXMvZm9ybS9TY2VuZS5jb2ZmZWUiLCIuLi8uLi8uLi8uLi8uLi9Vc2Vycy9lbWlsd2lkbHVuZC9Eb2N1bWVudHMvRnJhbWVyL2ZyYW1lci1mb3JtL2V4YW1wbGVzL21vbnN0ZXIuZnJhbWVyL21vZHVsZXMvZm9ybS9Nb2RlbC5jb2ZmZWUiLCIuLi8uLi8uLi8uLi8uLi9Vc2Vycy9lbWlsd2lkbHVuZC9Eb2N1bWVudHMvRnJhbWVyL2ZyYW1lci1mb3JtL2V4YW1wbGVzL21vbnN0ZXIuZnJhbWVyL21vZHVsZXMvZm9ybS9NZXNoLmNvZmZlZSIsIi4uLy4uLy4uLy4uLy4uL1VzZXJzL2VtaWx3aWRsdW5kL0RvY3VtZW50cy9GcmFtZXIvZnJhbWVyLWZvcm0vZXhhbXBsZXMvbW9uc3Rlci5mcmFtZXIvbW9kdWxlcy9mb3JtL0xpZ2h0LmNvZmZlZSIsIi4uLy4uLy4uLy4uLy4uL1VzZXJzL2VtaWx3aWRsdW5kL0RvY3VtZW50cy9GcmFtZXIvZnJhbWVyLWZvcm0vZXhhbXBsZXMvbW9uc3Rlci5mcmFtZXIvbW9kdWxlcy9mb3JtL0dBLmNvZmZlZSIsIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsid2luZG93LlRIUkVFID0gcmVxdWlyZSAnLi9mb3JtL2xpYi90aHJlZS5taW4uanMnXG5yZXF1aXJlICcuL2Zvcm0vR0EuY29mZmVlJ1xuXG57U2NlbmV9ID0gcmVxdWlyZSAnLi9mb3JtL1NjZW5lLmNvZmZlZSdcbntTdHVkaW99ID0gcmVxdWlyZSAnLi9mb3JtL1N0dWRpby5jb2ZmZWUnXG57TW9kZWx9ID0gcmVxdWlyZSAnLi9mb3JtL01vZGVsLmNvZmZlZSdcbntNZXNofSA9IHJlcXVpcmUgJy4vZm9ybS9NZXNoLmNvZmZlZSdcbntMaWdodH0gPSByZXF1aXJlICcuL2Zvcm0vTGlnaHQuY29mZmVlJ1xuXG5tb2R1bGUuZXhwb3J0cyA9XG4gICAgU2NlbmU6IFNjZW5lXG4gICAgU3R1ZGlvOiBTdHVkaW9cbiAgICBNb2RlbDogTW9kZWxcbiAgICBNZXNoOiBNZXNoXG4gICAgTGlnaHQ6IExpZ2h0XG5cbiAgICAjIE1BVEVSSUFMU1xuXG4gICAgTWVzaFBob25nTWF0ZXJpYWw6IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsXG4gICAgTWVzaE5vcm1hbE1hdGVyaWFsOiBUSFJFRS5NZXNoTm9ybWFsTWF0ZXJpYWxcbiAgICBNZXNoU3RhbmRhcmRNYXRlcmlhbDogVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWxcbiAgICBMaW5lQmFzaWNNYXRlcmlhbDogVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWxcbiAgICBMaW5lRGFzaGVkTWF0ZXJpYWw6IFRIUkVFLkxpbmVEYXNoZWRNYXRlcmlhbFxuICAgIE1lc2hCYXNpY01hdGVyaWFsOiBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbFxuICAgIE1lc2hEZXB0aE1hdGVyaWFsOiBUSFJFRS5NZXNoRGVwdGhNYXRlcmlhbFxuICAgIE1lc2hMYW1iZXJ0TWF0ZXJpYWw6IFRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWxcbiAgICBNZXNoUGh5c2ljYWxNYXRlcmlhbDogVEhSRUUuTWVzaFBoeXNpY2FsTWF0ZXJpYWxcbiAgICBNZXNoVG9vbk1hdGVyaWFsOiBUSFJFRS5NZXNoVG9vbk1hdGVyaWFsXG4gICAgUG9pbnRzTWF0ZXJpYWw6IFRIUkVFLlBvaW50c01hdGVyaWFsXG4gICAgUmF3U2hhZGVyTWF0ZXJpYWw6IFRIUkVFLlJhd1NoYWRlck1hdGVyaWFsXG4gICAgU2hhZGVyTWF0ZXJpYWw6IFRIUkVFLlNoYWRlck1hdGVyaWFsXG4gICAgU2hhZG93TWF0ZXJpYWw6IFRIUkVFLlNoYWRvd01hdGVyaWFsXG4gICAgU3ByaXRlTWF0ZXJpYWw6IFRIUkVFLlNwcml0ZU1hdGVyaWFsIiwicmVxdWlyZSAnLi4vbGliL09CSkxvYWRlci5qcydcbnJlcXVpcmUgJy4uL2xpYi9NVExMb2FkZXIuanMnXG5cbmNsYXNzIGV4cG9ydHMuT0JKXG4gICAgY29uc3RydWN0b3I6IChwcm9wZXJ0aWVzLCBjYikgLT5cbiAgICAgICAgcGF0aCA9IHByb3BlcnRpZXMucGF0aFxuICAgICAgICBAZGlyUGF0aCA9IHBhdGguc3Vic3RyaW5nIDAsIHBhdGguaW5kZXhPZihwYXRoLnNwbGl0KCcvJykucG9wKCkpXG4gICAgICAgIEBtb2RlbFBhdGggPSBwYXRoLnNwbGl0KCcvJykucG9wKClcbiAgICAgICAgQG1hdGVyaWFsUGF0aCA9IEBtb2RlbFBhdGgucmVwbGFjZSAnLm9iaicsICcubXRsJ1xuICAgICAgICBcbiAgICAgICAgQG1hdGVyaWFsTG9hZGVyID0gbmV3IFRIUkVFLk1UTExvYWRlclxuICAgICAgICBAbW9kZWxMb2FkZXIgPSBuZXcgVEhSRUUuT0JKTG9hZGVyXG5cbiAgICAgICAgQG1hdGVyaWFsTG9hZGVyLnNldFBhdGggQGRpclBhdGhcbiAgICAgICAgQG1hdGVyaWFsTG9hZGVyLmxvYWQgQG1hdGVyaWFsUGF0aCwgKG1hdGVyaWFscykgPT5cbiAgICAgICAgICAgIG1hdGVyaWFscy5wcmVsb2FkKClcblxuICAgICAgICAgICAgQG1vZGVsTG9hZGVyLnNldE1hdGVyaWFscyBtYXRlcmlhbHNcbiAgICAgICAgICAgIEBtb2RlbExvYWRlci5zZXRQYXRoIEBkaXJQYXRoXG4gICAgICAgICAgICBAbW9kZWxMb2FkZXIubG9hZCBAbW9kZWxQYXRoLCAobW9kZWwpID0+XG4gICAgICAgICAgICAgICAgY2IgbW9kZWwiLCJjbGFzcyBleHBvcnRzLkpTT05PYmplY3RcbiAgICBjb25zdHJ1Y3RvcjogKHByb3BlcnRpZXMsIGNiKSAtPlxuXG4gICAgICAgIEByZWFkSlNPTiBwcm9wZXJ0aWVzLnBhdGgsIChqc29uKSA9PiBcbiAgICAgICAgICAgIG1ldGFkYXRhID0gSlNPTi5wYXJzZShqc29uKS5tZXRhZGF0YVxuXG4gICAgICAgICAgICBpZiBtZXRhZGF0YS50eXBlID09ICdPYmplY3QnIHRoZW4gQGxvYWRPYmplY3QgcHJvcGVydGllcywgY2JcbiAgICAgICAgICAgIGVsc2UgQGxvYWRHZW9tZXRyeSBwcm9wZXJ0aWVzLCBjYlxuXG5cbiAgICBsb2FkT2JqZWN0OiAocHJvcGVydGllcywgY2IpIC0+XG4gICAgICAgIEBtb2RlbExvYWRlciA9IG5ldyBUSFJFRS5PYmplY3RMb2FkZXJcbiAgICAgICAgQG1vZGVsTG9hZGVyLmxvYWQgcHJvcGVydGllcy5wYXRoLCAobW9kZWwpID0+XG4gICAgICAgICAgICBjYiBtb2RlbFxuICAgICAgICAsIG51bGwsIChlKSAtPiBjb25zb2xlLmxvZyBlXG4gICAgXG4gICAgbG9hZEdlb21ldHJ5OiAocHJvcGVydGllcywgY2IpIC0+XG4gICAgICAgIEBtb2RlbExvYWRlciA9IG5ldyBUSFJFRS5KU09OTG9hZGVyXG4gICAgICAgIEBtb2RlbExvYWRlci5sb2FkIHByb3BlcnRpZXMucGF0aCwgKGdlb21ldHJ5LCBtYXRlcmlhbHMpID0+XG4gICAgICAgICAgICBtYXRlcmlhbCA9IG1hdGVyaWFsc1swXVxuICAgICAgICAgICAgbW9kZWwgPSBuZXcgVEhSRUUuTWVzaCBnZW9tZXRyeSwgbWF0ZXJpYWxcbiAgICAgICAgICAgIG1vZGVsLmFuaW1hdGlvbnMgPSBnZW9tZXRyeS5hbmltYXRpb25zXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNiIG1vZGVsXG4gICAgICAgICwgbnVsbCwgKGUpIC0+IGNvbnNvbGUubG9nIGVcblxuICAgIHJlYWRKU09OOiAocGF0aCwgY2IpIC0+XG4gICAgICAgIHJhd0ZpbGUgPSBuZXcgWE1MSHR0cFJlcXVlc3RcbiAgICAgICAgcmF3RmlsZS5vdmVycmlkZU1pbWVUeXBlICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICByYXdGaWxlLm9wZW4gJ0dFVCcsIHBhdGgsIHRydWVcbiAgICAgICAgcmF3RmlsZS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSAtPlxuICAgICAgICAgICAgaWYgcmF3RmlsZS5yZWFkeVN0YXRlID09IDQgJiYgcmF3RmlsZS5zdGF0dXMgPT0gMjAwXG4gICAgICAgICAgICAgICAgY2IgcmF3RmlsZS5yZXNwb25zZVRleHRcbiAgICAgICAgcmF3RmlsZS5zZW5kIG51bGwiLCJyZXF1aXJlICcuLi9saWIvR0xURkxvYWRlci5qcydcblxuY2xhc3MgZXhwb3J0cy5HTFRGXG4gICAgY29uc3RydWN0b3I6IChwcm9wZXJ0aWVzLCBjYikgLT5cbiAgICAgICAgQG1vZGVsTG9hZGVyID0gbmV3IFRIUkVFLkdMVEZMb2FkZXJcbiAgICAgICAgQG1vZGVsTG9hZGVyLmxvYWQgcHJvcGVydGllcy5wYXRoLCAobW9kZWwpIC0+XG4gICAgICAgICAgICBtb2RlbC5zY2VuZS5hbmltYXRpb25zID0gbW9kZWwuYW5pbWF0aW9uc1xuICAgICAgICAgICAgY2IgbW9kZWwuc2NlbmVcbiAgICAgICAgLCBudWxsLCAoZSkgLT4gY29uc29sZS5sb2cgZSIsInJlcXVpcmUgJy4uL2xpYi9GQlhMb2FkZXIuanMnXG53aW5kb3cuWmxpYiA9IHJlcXVpcmUoJy4uL2xpYi9pbmZsYXRlLm1pbi5qcycpLlpsaWJcblxuY2xhc3MgZXhwb3J0cy5GQlhcbiAgICBjb25zdHJ1Y3RvcjogKHByb3BlcnRpZXMsIGNiKSAtPlxuICAgICAgICBAbW9kZWxMb2FkZXIgPSBuZXcgVEhSRUUuRkJYTG9hZGVyXG4gICAgICAgIEBtb2RlbExvYWRlci5sb2FkIHByb3BlcnRpZXMucGF0aCwgKG1vZGVsKSA9PlxuICAgICAgICAgICAgY2IgbW9kZWxcbiAgICAgICAgLCBudWxsLCAoZSkgLT4gY29uc29sZS5sb2cgZSIsInJlcXVpcmUgJy4uL2xpYi9Db2xsYWRhTG9hZGVyLmpzJ1xuXG5jbGFzcyBleHBvcnRzLkNvbGxhZGFcbiAgICBjb25zdHJ1Y3RvcjogKHByb3BlcnRpZXMsIGNiKSAtPlxuICAgICAgICBAbW9kZWxMb2FkZXIgPSBuZXcgVEhSRUUuQ29sbGFkYUxvYWRlclxuICAgICAgICBAbW9kZWxMb2FkZXIubG9hZCBwcm9wZXJ0aWVzLnBhdGgsIChjb2xsYWRhKSA9PlxuICAgICAgICAgICAgY29sbGFkYS5zY2VuZS5hbmltYXRpb25zID0gY29sbGFkYS5hbmltYXRpb25zXG4gICAgICAgICAgICBjYiBjb2xsYWRhLnNjZW5lXG4gICAgICAgICwgbnVsbCwgKGUpIC0+IGNvbnNvbGUubG9nIGUiLCIvLyB0aHJlZWpzLm9yZy9saWNlbnNlXG4oZnVuY3Rpb24obCx6YSl7XCJvYmplY3RcIj09PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT09dHlwZW9mIG1vZHVsZT96YShleHBvcnRzKTpcImZ1bmN0aW9uXCI9PT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJleHBvcnRzXCJdLHphKTp6YShsLlRIUkVFPXt9KX0pKHRoaXMsZnVuY3Rpb24obCl7ZnVuY3Rpb24gemEoKXt9ZnVuY3Rpb24gRChhLGIpe3RoaXMueD1hfHwwO3RoaXMueT1ifHwwfWZ1bmN0aW9uIE8oKXt0aGlzLmVsZW1lbnRzPVsxLDAsMCwwLDAsMSwwLDAsMCwwLDEsMCwwLDAsMCwxXTswPGFyZ3VtZW50cy5sZW5ndGgmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXg0OiB0aGUgY29uc3RydWN0b3Igbm8gbG9uZ2VyIHJlYWRzIGFyZ3VtZW50cy4gdXNlIC5zZXQoKSBpbnN0ZWFkLlwiKX1mdW5jdGlvbiBoYShhLGIsYyxkKXt0aGlzLl94PWF8fDA7dGhpcy5feT1ifHwwO3RoaXMuX3o9Y3x8MDt0aGlzLl93PXZvaWQgMCE9PWQ/ZDoxfWZ1bmN0aW9uIHAoYSxcbiAgICBiLGMpe3RoaXMueD1hfHwwO3RoaXMueT1ifHwwO3RoaXMuej1jfHwwfWZ1bmN0aW9uIG1hKCl7dGhpcy5lbGVtZW50cz1bMSwwLDAsMCwxLDAsMCwwLDFdOzA8YXJndW1lbnRzLmxlbmd0aCYmY29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDM6IHRoZSBjb25zdHJ1Y3RvciBubyBsb25nZXIgcmVhZHMgYXJndW1lbnRzLiB1c2UgLnNldCgpIGluc3RlYWQuXCIpfWZ1bmN0aW9uIFUoYSxiLGMsZCxlLGYsZyxoLGssbSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpZFwiLHt2YWx1ZTpBZisrfSk7dGhpcy51dWlkPVEuZ2VuZXJhdGVVVUlEKCk7dGhpcy5uYW1lPVwiXCI7dGhpcy5pbWFnZT12b2lkIDAhPT1hP2E6VS5ERUZBVUxUX0lNQUdFO3RoaXMubWlwbWFwcz1bXTt0aGlzLm1hcHBpbmc9dm9pZCAwIT09Yj9iOlUuREVGQVVMVF9NQVBQSU5HO3RoaXMud3JhcFM9dm9pZCAwIT09Yz9jOjEwMDE7dGhpcy53cmFwVD12b2lkIDAhPT1kP2Q6MTAwMTt0aGlzLm1hZ0ZpbHRlcj12b2lkIDAhPT1cbiAgICBlP2U6MTAwNjt0aGlzLm1pbkZpbHRlcj12b2lkIDAhPT1mP2Y6MTAwODt0aGlzLmFuaXNvdHJvcHk9dm9pZCAwIT09az9rOjE7dGhpcy5mb3JtYXQ9dm9pZCAwIT09Zz9nOjEwMjM7dGhpcy50eXBlPXZvaWQgMCE9PWg/aDoxMDA5O3RoaXMub2Zmc2V0PW5ldyBEKDAsMCk7dGhpcy5yZXBlYXQ9bmV3IEQoMSwxKTt0aGlzLmNlbnRlcj1uZXcgRCgwLDApO3RoaXMucm90YXRpb249MDt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITA7dGhpcy5tYXRyaXg9bmV3IG1hO3RoaXMuZ2VuZXJhdGVNaXBtYXBzPSEwO3RoaXMucHJlbXVsdGlwbHlBbHBoYT0hMTt0aGlzLmZsaXBZPSEwO3RoaXMudW5wYWNrQWxpZ25tZW50PTQ7dGhpcy5lbmNvZGluZz12b2lkIDAhPT1tP206M0UzO3RoaXMudmVyc2lvbj0wO3RoaXMub25VcGRhdGU9bnVsbH1mdW5jdGlvbiBhYShhLGIsYyxkKXt0aGlzLng9YXx8MDt0aGlzLnk9Ynx8MDt0aGlzLno9Y3x8MDt0aGlzLnc9dm9pZCAwIT09ZD9kOjF9ZnVuY3Rpb24ga2IoYSxcbiAgICBiLGMpe3RoaXMudXVpZD1RLmdlbmVyYXRlVVVJRCgpO3RoaXMud2lkdGg9YTt0aGlzLmhlaWdodD1iO3RoaXMuc2Npc3Nvcj1uZXcgYWEoMCwwLGEsYik7dGhpcy5zY2lzc29yVGVzdD0hMTt0aGlzLnZpZXdwb3J0PW5ldyBhYSgwLDAsYSxiKTtjPWN8fHt9O3ZvaWQgMD09PWMubWluRmlsdGVyJiYoYy5taW5GaWx0ZXI9MTAwNik7dGhpcy50ZXh0dXJlPW5ldyBVKHZvaWQgMCx2b2lkIDAsYy53cmFwUyxjLndyYXBULGMubWFnRmlsdGVyLGMubWluRmlsdGVyLGMuZm9ybWF0LGMudHlwZSxjLmFuaXNvdHJvcHksYy5lbmNvZGluZyk7dGhpcy5kZXB0aEJ1ZmZlcj12b2lkIDAhPT1jLmRlcHRoQnVmZmVyP2MuZGVwdGhCdWZmZXI6ITA7dGhpcy5zdGVuY2lsQnVmZmVyPXZvaWQgMCE9PWMuc3RlbmNpbEJ1ZmZlcj9jLnN0ZW5jaWxCdWZmZXI6ITA7dGhpcy5kZXB0aFRleHR1cmU9dm9pZCAwIT09Yy5kZXB0aFRleHR1cmU/Yy5kZXB0aFRleHR1cmU6bnVsbH1mdW5jdGlvbiBKYihhLGIsYyl7a2IuY2FsbCh0aGlzLFxuICAgIGEsYixjKTt0aGlzLmFjdGl2ZU1pcE1hcExldmVsPXRoaXMuYWN0aXZlQ3ViZUZhY2U9MH1mdW5jdGlvbiBsYihhLGIsYyxkLGUsZixnLGgsayxtLHEsbil7VS5jYWxsKHRoaXMsbnVsbCxmLGcsaCxrLG0sZCxlLHEsbik7dGhpcy5pbWFnZT17ZGF0YTphLHdpZHRoOmIsaGVpZ2h0OmN9O3RoaXMubWFnRmlsdGVyPXZvaWQgMCE9PWs/azoxMDAzO3RoaXMubWluRmlsdGVyPXZvaWQgMCE9PW0/bToxMDAzO3RoaXMuZmxpcFk9dGhpcy5nZW5lcmF0ZU1pcG1hcHM9ITE7dGhpcy51bnBhY2tBbGlnbm1lbnQ9MX1mdW5jdGlvbiBkYihhLGIsYyxkLGUsZixnLGgsayxtKXthPXZvaWQgMCE9PWE/YTpbXTtVLmNhbGwodGhpcyxhLHZvaWQgMCE9PWI/YjozMDEsYyxkLGUsZixnLGgsayxtKTt0aGlzLmZsaXBZPSExfWZ1bmN0aW9uIEtiKGEsYixjKXt2YXIgZD1hWzBdO2lmKDA+PWR8fDA8ZClyZXR1cm4gYTt2YXIgZT1iKmMsZj1JZVtlXTt2b2lkIDA9PT1mJiYoZj1uZXcgRmxvYXQzMkFycmF5KGUpLFxuICAgIEllW2VdPWYpO2lmKDAhPT1iKWZvcihkLnRvQXJyYXkoZiwwKSxkPTEsZT0wO2QhPT1iOysrZCllKz1jLGFbZF0udG9BcnJheShmLGUpO3JldHVybiBmfWZ1bmN0aW9uIEplKGEsYil7dmFyIGM9S2VbYl07dm9pZCAwPT09YyYmKGM9bmV3IEludDMyQXJyYXkoYiksS2VbYl09Yyk7Zm9yKHZhciBkPTA7ZCE9PWI7KytkKWNbZF09YS5hbGxvY1RleHR1cmVVbml0KCk7cmV0dXJuIGN9ZnVuY3Rpb24gQmYoYSxiKXthLnVuaWZvcm0xZih0aGlzLmFkZHIsYil9ZnVuY3Rpb24gQ2YoYSxiKXthLnVuaWZvcm0xaSh0aGlzLmFkZHIsYil9ZnVuY3Rpb24gRGYoYSxiKXt2b2lkIDA9PT1iLng/YS51bmlmb3JtMmZ2KHRoaXMuYWRkcixiKTphLnVuaWZvcm0yZih0aGlzLmFkZHIsYi54LGIueSl9ZnVuY3Rpb24gRWYoYSxiKXt2b2lkIDAhPT1iLng/YS51bmlmb3JtM2YodGhpcy5hZGRyLGIueCxiLnksYi56KTp2b2lkIDAhPT1iLnI/YS51bmlmb3JtM2YodGhpcy5hZGRyLGIucixiLmcsYi5iKTphLnVuaWZvcm0zZnYodGhpcy5hZGRyLFxuICAgIGIpfWZ1bmN0aW9uIEZmKGEsYil7dm9pZCAwPT09Yi54P2EudW5pZm9ybTRmdih0aGlzLmFkZHIsYik6YS51bmlmb3JtNGYodGhpcy5hZGRyLGIueCxiLnksYi56LGIudyl9ZnVuY3Rpb24gR2YoYSxiKXthLnVuaWZvcm1NYXRyaXgyZnYodGhpcy5hZGRyLCExLGIuZWxlbWVudHN8fGIpfWZ1bmN0aW9uIEhmKGEsYil7dm9pZCAwPT09Yi5lbGVtZW50cz9hLnVuaWZvcm1NYXRyaXgzZnYodGhpcy5hZGRyLCExLGIpOihMZS5zZXQoYi5lbGVtZW50cyksYS51bmlmb3JtTWF0cml4M2Z2KHRoaXMuYWRkciwhMSxMZSkpfWZ1bmN0aW9uIElmKGEsYil7dm9pZCAwPT09Yi5lbGVtZW50cz9hLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5hZGRyLCExLGIpOihNZS5zZXQoYi5lbGVtZW50cyksYS51bmlmb3JtTWF0cml4NGZ2KHRoaXMuYWRkciwhMSxNZSkpfWZ1bmN0aW9uIEpmKGEsYixjKXt2YXIgZD1jLmFsbG9jVGV4dHVyZVVuaXQoKTthLnVuaWZvcm0xaSh0aGlzLmFkZHIsZCk7Yy5zZXRUZXh0dXJlMkQoYnx8XG4gICAgTmUsZCl9ZnVuY3Rpb24gS2YoYSxiLGMpe3ZhciBkPWMuYWxsb2NUZXh0dXJlVW5pdCgpO2EudW5pZm9ybTFpKHRoaXMuYWRkcixkKTtjLnNldFRleHR1cmVDdWJlKGJ8fE9lLGQpfWZ1bmN0aW9uIFBlKGEsYil7YS51bmlmb3JtMml2KHRoaXMuYWRkcixiKX1mdW5jdGlvbiBRZShhLGIpe2EudW5pZm9ybTNpdih0aGlzLmFkZHIsYil9ZnVuY3Rpb24gUmUoYSxiKXthLnVuaWZvcm00aXYodGhpcy5hZGRyLGIpfWZ1bmN0aW9uIExmKGEpe3N3aXRjaChhKXtjYXNlIDUxMjY6cmV0dXJuIEJmO2Nhc2UgMzU2NjQ6cmV0dXJuIERmO2Nhc2UgMzU2NjU6cmV0dXJuIEVmO2Nhc2UgMzU2NjY6cmV0dXJuIEZmO2Nhc2UgMzU2NzQ6cmV0dXJuIEdmO2Nhc2UgMzU2NzU6cmV0dXJuIEhmO2Nhc2UgMzU2NzY6cmV0dXJuIElmO2Nhc2UgMzU2Nzg6Y2FzZSAzNjE5ODpyZXR1cm4gSmY7Y2FzZSAzNTY4MDpyZXR1cm4gS2Y7Y2FzZSA1MTI0OmNhc2UgMzU2NzA6cmV0dXJuIENmO2Nhc2UgMzU2Njc6Y2FzZSAzNTY3MTpyZXR1cm4gUGU7XG4gICAgY2FzZSAzNTY2ODpjYXNlIDM1NjcyOnJldHVybiBRZTtjYXNlIDM1NjY5OmNhc2UgMzU2NzM6cmV0dXJuIFJlfX1mdW5jdGlvbiBNZihhLGIpe2EudW5pZm9ybTFmdih0aGlzLmFkZHIsYil9ZnVuY3Rpb24gTmYoYSxiKXthLnVuaWZvcm0xaXYodGhpcy5hZGRyLGIpfWZ1bmN0aW9uIE9mKGEsYil7YS51bmlmb3JtMmZ2KHRoaXMuYWRkcixLYihiLHRoaXMuc2l6ZSwyKSl9ZnVuY3Rpb24gUGYoYSxiKXthLnVuaWZvcm0zZnYodGhpcy5hZGRyLEtiKGIsdGhpcy5zaXplLDMpKX1mdW5jdGlvbiBRZihhLGIpe2EudW5pZm9ybTRmdih0aGlzLmFkZHIsS2IoYix0aGlzLnNpemUsNCkpfWZ1bmN0aW9uIFJmKGEsYil7YS51bmlmb3JtTWF0cml4MmZ2KHRoaXMuYWRkciwhMSxLYihiLHRoaXMuc2l6ZSw0KSl9ZnVuY3Rpb24gU2YoYSxiKXthLnVuaWZvcm1NYXRyaXgzZnYodGhpcy5hZGRyLCExLEtiKGIsdGhpcy5zaXplLDkpKX1mdW5jdGlvbiBUZihhLGIpe2EudW5pZm9ybU1hdHJpeDRmdih0aGlzLmFkZHIsXG4gICAgITEsS2IoYix0aGlzLnNpemUsMTYpKX1mdW5jdGlvbiBVZihhLGIsYyl7dmFyIGQ9Yi5sZW5ndGgsZT1KZShjLGQpO2EudW5pZm9ybTFpdih0aGlzLmFkZHIsZSk7Zm9yKGE9MDthIT09ZDsrK2EpYy5zZXRUZXh0dXJlMkQoYlthXXx8TmUsZVthXSl9ZnVuY3Rpb24gVmYoYSxiLGMpe3ZhciBkPWIubGVuZ3RoLGU9SmUoYyxkKTthLnVuaWZvcm0xaXYodGhpcy5hZGRyLGUpO2ZvcihhPTA7YSE9PWQ7KythKWMuc2V0VGV4dHVyZUN1YmUoYlthXXx8T2UsZVthXSl9ZnVuY3Rpb24gV2YoYSl7c3dpdGNoKGEpe2Nhc2UgNTEyNjpyZXR1cm4gTWY7Y2FzZSAzNTY2NDpyZXR1cm4gT2Y7Y2FzZSAzNTY2NTpyZXR1cm4gUGY7Y2FzZSAzNTY2NjpyZXR1cm4gUWY7Y2FzZSAzNTY3NDpyZXR1cm4gUmY7Y2FzZSAzNTY3NTpyZXR1cm4gU2Y7Y2FzZSAzNTY3NjpyZXR1cm4gVGY7Y2FzZSAzNTY3ODpyZXR1cm4gVWY7Y2FzZSAzNTY4MDpyZXR1cm4gVmY7Y2FzZSA1MTI0OmNhc2UgMzU2NzA6cmV0dXJuIE5mO1xuICAgIGNhc2UgMzU2Njc6Y2FzZSAzNTY3MTpyZXR1cm4gUGU7Y2FzZSAzNTY2ODpjYXNlIDM1NjcyOnJldHVybiBRZTtjYXNlIDM1NjY5OmNhc2UgMzU2NzM6cmV0dXJuIFJlfX1mdW5jdGlvbiBYZihhLGIsYyl7dGhpcy5pZD1hO3RoaXMuYWRkcj1jO3RoaXMuc2V0VmFsdWU9TGYoYi50eXBlKX1mdW5jdGlvbiBZZihhLGIsYyl7dGhpcy5pZD1hO3RoaXMuYWRkcj1jO3RoaXMuc2l6ZT1iLnNpemU7dGhpcy5zZXRWYWx1ZT1XZihiLnR5cGUpfWZ1bmN0aW9uIFNlKGEpe3RoaXMuaWQ9YTt0aGlzLnNlcT1bXTt0aGlzLm1hcD17fX1mdW5jdGlvbiBtYihhLGIsYyl7dGhpcy5zZXE9W107dGhpcy5tYXA9e307dGhpcy5yZW5kZXJlcj1jO2M9YS5nZXRQcm9ncmFtUGFyYW1ldGVyKGIsYS5BQ1RJVkVfVU5JRk9STVMpO2Zvcih2YXIgZD0wO2Q8YzsrK2Qpe3ZhciBlPWEuZ2V0QWN0aXZlVW5pZm9ybShiLGQpLGY9YS5nZXRVbmlmb3JtTG9jYXRpb24oYixlLm5hbWUpLGc9dGhpcyxoPWUubmFtZSxrPVxuICAgIGgubGVuZ3RoO2ZvcihWZC5sYXN0SW5kZXg9MDs7KXt2YXIgbT1WZC5leGVjKGgpLHE9VmQubGFzdEluZGV4LG49bVsxXSx1PW1bM107XCJdXCI9PT1tWzJdJiYobnw9MCk7aWYodm9pZCAwPT09dXx8XCJbXCI9PT11JiZxKzI9PT1rKXtoPWc7ZT12b2lkIDA9PT11P25ldyBYZihuLGUsZik6bmV3IFlmKG4sZSxmKTtoLnNlcS5wdXNoKGUpO2gubWFwW2UuaWRdPWU7YnJlYWt9ZWxzZSB1PWcubWFwW25dLHZvaWQgMD09PXUmJih1PW5ldyBTZShuKSxuPWcsZz11LG4uc2VxLnB1c2goZyksbi5tYXBbZy5pZF09ZyksZz11fX19ZnVuY3Rpb24gSChhLGIsYyl7cmV0dXJuIHZvaWQgMD09PWImJnZvaWQgMD09PWM/dGhpcy5zZXQoYSk6dGhpcy5zZXRSR0IoYSxiLGMpfWZ1bmN0aW9uIG9kKGEsYil7dGhpcy5taW49dm9pZCAwIT09YT9hOm5ldyBEKEluZmluaXR5LEluZmluaXR5KTt0aGlzLm1heD12b2lkIDAhPT1iP2I6bmV3IEQoLUluZmluaXR5LC1JbmZpbml0eSl9ZnVuY3Rpb24gWmYoYSxiLGMsXG4gICAgZCxlKXt2YXIgZixnLGgsayxtLHEsbix1LHIsdCxsLHcseix5LEksQTt0aGlzLnJlbmRlcj1mdW5jdGlvbihhLHYsRGEsbmEpe2lmKDAhPT1hLmxlbmd0aCl7dj1uZXcgcDt2YXIgSj1uYS53L25hLnosSGE9LjUqbmEueixwZD0uNSpuYS53LGxhPTE2L25hLncsUz1uZXcgRChsYSpKLGxhKSx2YT1uZXcgcCgxLDEsMCksTj1uZXcgRCgxLDEpLEI9bmV3IG9kO0IubWluLnNldChuYS54LG5hLnkpO0IubWF4LnNldChuYS54KyhuYS56LTE2KSxuYS55KyhuYS53LTE2KSk7aWYodm9pZCAwPT09eSl7dmFyIGxhPW5ldyBGbG9hdDMyQXJyYXkoWy0xLC0xLDAsMCwxLC0xLDEsMCwxLDEsMSwxLC0xLDEsMCwxXSkseD1uZXcgVWludDE2QXJyYXkoWzAsMSwyLDAsMiwzXSk7bD1iLmNyZWF0ZUJ1ZmZlcigpO3c9Yi5jcmVhdGVCdWZmZXIoKTtiLmJpbmRCdWZmZXIoYi5BUlJBWV9CVUZGRVIsbCk7Yi5idWZmZXJEYXRhKGIuQVJSQVlfQlVGRkVSLGxhLGIuU1RBVElDX0RSQVcpO2IuYmluZEJ1ZmZlcihiLkVMRU1FTlRfQVJSQVlfQlVGRkVSLFxuICAgIHcpO2IuYnVmZmVyRGF0YShiLkVMRU1FTlRfQVJSQVlfQlVGRkVSLHgsYi5TVEFUSUNfRFJBVyk7ST1iLmNyZWF0ZVRleHR1cmUoKTtBPWIuY3JlYXRlVGV4dHVyZSgpO2MuYmluZFRleHR1cmUoYi5URVhUVVJFXzJELEkpO2IudGV4SW1hZ2UyRChiLlRFWFRVUkVfMkQsMCxiLlJHQiwxNiwxNiwwLGIuUkdCLGIuVU5TSUdORURfQllURSxudWxsKTtiLnRleFBhcmFtZXRlcmkoYi5URVhUVVJFXzJELGIuVEVYVFVSRV9XUkFQX1MsYi5DTEFNUF9UT19FREdFKTtiLnRleFBhcmFtZXRlcmkoYi5URVhUVVJFXzJELGIuVEVYVFVSRV9XUkFQX1QsYi5DTEFNUF9UT19FREdFKTtiLnRleFBhcmFtZXRlcmkoYi5URVhUVVJFXzJELGIuVEVYVFVSRV9NQUdfRklMVEVSLGIuTkVBUkVTVCk7Yi50ZXhQYXJhbWV0ZXJpKGIuVEVYVFVSRV8yRCxiLlRFWFRVUkVfTUlOX0ZJTFRFUixiLk5FQVJFU1QpO2MuYmluZFRleHR1cmUoYi5URVhUVVJFXzJELEEpO2IudGV4SW1hZ2UyRChiLlRFWFRVUkVfMkQsMCxcbiAgICBiLlJHQkEsMTYsMTYsMCxiLlJHQkEsYi5VTlNJR05FRF9CWVRFLG51bGwpO2IudGV4UGFyYW1ldGVyaShiLlRFWFRVUkVfMkQsYi5URVhUVVJFX1dSQVBfUyxiLkNMQU1QX1RPX0VER0UpO2IudGV4UGFyYW1ldGVyaShiLlRFWFRVUkVfMkQsYi5URVhUVVJFX1dSQVBfVCxiLkNMQU1QX1RPX0VER0UpO2IudGV4UGFyYW1ldGVyaShiLlRFWFRVUkVfMkQsYi5URVhUVVJFX01BR19GSUxURVIsYi5ORUFSRVNUKTtiLnRleFBhcmFtZXRlcmkoYi5URVhUVVJFXzJELGIuVEVYVFVSRV9NSU5fRklMVEVSLGIuTkVBUkVTVCk7dmFyIGxhPXo9e3ZlcnRleFNoYWRlcjpcInVuaWZvcm0gbG93cCBpbnQgcmVuZGVyVHlwZTtcXG51bmlmb3JtIHZlYzMgc2NyZWVuUG9zaXRpb247XFxudW5pZm9ybSB2ZWMyIHNjYWxlO1xcbnVuaWZvcm0gZmxvYXQgcm90YXRpb247XFxudW5pZm9ybSBzYW1wbGVyMkQgb2NjbHVzaW9uTWFwO1xcbmF0dHJpYnV0ZSB2ZWMyIHBvc2l0aW9uO1xcbmF0dHJpYnV0ZSB2ZWMyIHV2O1xcbnZhcnlpbmcgdmVjMiB2VVY7XFxudmFyeWluZyBmbG9hdCB2VmlzaWJpbGl0eTtcXG52b2lkIG1haW4oKSB7XFxuXFx0dlVWID0gdXY7XFxuXFx0dmVjMiBwb3MgPSBwb3NpdGlvbjtcXG5cXHRpZiAoIHJlbmRlclR5cGUgPT0gMiApIHtcXG5cXHRcXHR2ZWM0IHZpc2liaWxpdHkgPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC4xLCAwLjEgKSApO1xcblxcdFxcdHZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuNSwgMC4xICkgKTtcXG5cXHRcXHR2aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjksIDAuMSApICk7XFxuXFx0XFx0dmlzaWJpbGl0eSArPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC45LCAwLjUgKSApO1xcblxcdFxcdHZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuOSwgMC45ICkgKTtcXG5cXHRcXHR2aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjUsIDAuOSApICk7XFxuXFx0XFx0dmlzaWJpbGl0eSArPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC4xLCAwLjkgKSApO1xcblxcdFxcdHZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuMSwgMC41ICkgKTtcXG5cXHRcXHR2aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjUsIDAuNSApICk7XFxuXFx0XFx0dlZpc2liaWxpdHkgPSAgICAgICAgdmlzaWJpbGl0eS5yIC8gOS4wO1xcblxcdFxcdHZWaXNpYmlsaXR5ICo9IDEuMCAtIHZpc2liaWxpdHkuZyAvIDkuMDtcXG5cXHRcXHR2VmlzaWJpbGl0eSAqPSAgICAgICB2aXNpYmlsaXR5LmIgLyA5LjA7XFxuXFx0XFx0dlZpc2liaWxpdHkgKj0gMS4wIC0gdmlzaWJpbGl0eS5hIC8gOS4wO1xcblxcdFxcdHBvcy54ID0gY29zKCByb3RhdGlvbiApICogcG9zaXRpb24ueCAtIHNpbiggcm90YXRpb24gKSAqIHBvc2l0aW9uLnk7XFxuXFx0XFx0cG9zLnkgPSBzaW4oIHJvdGF0aW9uICkgKiBwb3NpdGlvbi54ICsgY29zKCByb3RhdGlvbiApICogcG9zaXRpb24ueTtcXG5cXHR9XFxuXFx0Z2xfUG9zaXRpb24gPSB2ZWM0KCAoIHBvcyAqIHNjYWxlICsgc2NyZWVuUG9zaXRpb24ueHkgKS54eSwgc2NyZWVuUG9zaXRpb24ueiwgMS4wICk7XFxufVwiLFxuICAgIGZyYWdtZW50U2hhZGVyOlwidW5pZm9ybSBsb3dwIGludCByZW5kZXJUeXBlO1xcbnVuaWZvcm0gc2FtcGxlcjJEIG1hcDtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudW5pZm9ybSB2ZWMzIGNvbG9yO1xcbnZhcnlpbmcgdmVjMiB2VVY7XFxudmFyeWluZyBmbG9hdCB2VmlzaWJpbGl0eTtcXG52b2lkIG1haW4oKSB7XFxuXFx0aWYgKCByZW5kZXJUeXBlID09IDAgKSB7XFxuXFx0XFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggMS4wLCAwLjAsIDEuMCwgMC4wICk7XFxuXFx0fSBlbHNlIGlmICggcmVuZGVyVHlwZSA9PSAxICkge1xcblxcdFxcdGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCggbWFwLCB2VVYgKTtcXG5cXHR9IGVsc2Uge1xcblxcdFxcdHZlYzQgdGV4dHVyZSA9IHRleHR1cmUyRCggbWFwLCB2VVYgKTtcXG5cXHRcXHR0ZXh0dXJlLmEgKj0gb3BhY2l0eSAqIHZWaXNpYmlsaXR5O1xcblxcdFxcdGdsX0ZyYWdDb2xvciA9IHRleHR1cmU7XFxuXFx0XFx0Z2xfRnJhZ0NvbG9yLnJnYiAqPSBjb2xvcjtcXG5cXHR9XFxufVwifSx4PWIuY3JlYXRlUHJvZ3JhbSgpLFxuICAgIEU9Yi5jcmVhdGVTaGFkZXIoYi5GUkFHTUVOVF9TSEFERVIpLFY9Yi5jcmVhdGVTaGFkZXIoYi5WRVJURVhfU0hBREVSKSxIPVwicHJlY2lzaW9uIFwiK2UucHJlY2lzaW9uK1wiIGZsb2F0O1xcblwiO2Iuc2hhZGVyU291cmNlKEUsSCtsYS5mcmFnbWVudFNoYWRlcik7Yi5zaGFkZXJTb3VyY2UoVixIK2xhLnZlcnRleFNoYWRlcik7Yi5jb21waWxlU2hhZGVyKEUpO2IuY29tcGlsZVNoYWRlcihWKTtiLmF0dGFjaFNoYWRlcih4LEUpO2IuYXR0YWNoU2hhZGVyKHgsVik7Yi5saW5rUHJvZ3JhbSh4KTt5PXg7cj1iLmdldEF0dHJpYkxvY2F0aW9uKHksXCJwb3NpdGlvblwiKTt0PWIuZ2V0QXR0cmliTG9jYXRpb24oeSxcInV2XCIpO2Y9Yi5nZXRVbmlmb3JtTG9jYXRpb24oeSxcInJlbmRlclR5cGVcIik7Zz1iLmdldFVuaWZvcm1Mb2NhdGlvbih5LFwibWFwXCIpO2g9Yi5nZXRVbmlmb3JtTG9jYXRpb24oeSxcIm9jY2x1c2lvbk1hcFwiKTtrPWIuZ2V0VW5pZm9ybUxvY2F0aW9uKHksXCJvcGFjaXR5XCIpO209Yi5nZXRVbmlmb3JtTG9jYXRpb24oeSxcbiAgICBcImNvbG9yXCIpO3E9Yi5nZXRVbmlmb3JtTG9jYXRpb24oeSxcInNjYWxlXCIpO249Yi5nZXRVbmlmb3JtTG9jYXRpb24oeSxcInJvdGF0aW9uXCIpO3U9Yi5nZXRVbmlmb3JtTG9jYXRpb24oeSxcInNjcmVlblBvc2l0aW9uXCIpfWMudXNlUHJvZ3JhbSh5KTtjLmluaXRBdHRyaWJ1dGVzKCk7Yy5lbmFibGVBdHRyaWJ1dGUocik7Yy5lbmFibGVBdHRyaWJ1dGUodCk7Yy5kaXNhYmxlVW51c2VkQXR0cmlidXRlcygpO2IudW5pZm9ybTFpKGgsMCk7Yi51bmlmb3JtMWkoZywxKTtiLmJpbmRCdWZmZXIoYi5BUlJBWV9CVUZGRVIsbCk7Yi52ZXJ0ZXhBdHRyaWJQb2ludGVyKHIsMixiLkZMT0FULCExLDE2LDApO2IudmVydGV4QXR0cmliUG9pbnRlcih0LDIsYi5GTE9BVCwhMSwxNiw4KTtiLmJpbmRCdWZmZXIoYi5FTEVNRU5UX0FSUkFZX0JVRkZFUix3KTtjLmRpc2FibGUoYi5DVUxMX0ZBQ0UpO2MuYnVmZmVycy5kZXB0aC5zZXRNYXNrKCExKTt4PTA7Zm9yKEU9YS5sZW5ndGg7eDxFO3grKylpZihsYT1cbiAgICAxNi9uYS53LFMuc2V0KGxhKkosbGEpLFY9YVt4XSx2LnNldChWLm1hdHJpeFdvcmxkLmVsZW1lbnRzWzEyXSxWLm1hdHJpeFdvcmxkLmVsZW1lbnRzWzEzXSxWLm1hdHJpeFdvcmxkLmVsZW1lbnRzWzE0XSksdi5hcHBseU1hdHJpeDQoRGEubWF0cml4V29ybGRJbnZlcnNlKSx2LmFwcGx5TWF0cml4NChEYS5wcm9qZWN0aW9uTWF0cml4KSx2YS5jb3B5KHYpLE4ueD1uYS54K3ZhLngqSGErSGEtOCxOLnk9bmEueSt2YS55KnBkK3BkLTgsITA9PT1CLmNvbnRhaW5zUG9pbnQoTikpe2MuYWN0aXZlVGV4dHVyZShiLlRFWFRVUkUwKTtjLmJpbmRUZXh0dXJlKGIuVEVYVFVSRV8yRCxudWxsKTtjLmFjdGl2ZVRleHR1cmUoYi5URVhUVVJFMSk7Yy5iaW5kVGV4dHVyZShiLlRFWFRVUkVfMkQsSSk7Yi5jb3B5VGV4SW1hZ2UyRChiLlRFWFRVUkVfMkQsMCxiLlJHQixOLngsTi55LDE2LDE2LDApO2IudW5pZm9ybTFpKGYsMCk7Yi51bmlmb3JtMmYocSxTLngsUy55KTtiLnVuaWZvcm0zZih1LHZhLngsXG4gICAgdmEueSx2YS56KTtjLmRpc2FibGUoYi5CTEVORCk7Yy5lbmFibGUoYi5ERVBUSF9URVNUKTtiLmRyYXdFbGVtZW50cyhiLlRSSUFOR0xFUyw2LGIuVU5TSUdORURfU0hPUlQsMCk7Yy5hY3RpdmVUZXh0dXJlKGIuVEVYVFVSRTApO2MuYmluZFRleHR1cmUoYi5URVhUVVJFXzJELEEpO2IuY29weVRleEltYWdlMkQoYi5URVhUVVJFXzJELDAsYi5SR0JBLE4ueCxOLnksMTYsMTYsMCk7Yi51bmlmb3JtMWkoZiwxKTtjLmRpc2FibGUoYi5ERVBUSF9URVNUKTtjLmFjdGl2ZVRleHR1cmUoYi5URVhUVVJFMSk7Yy5iaW5kVGV4dHVyZShiLlRFWFRVUkVfMkQsSSk7Yi5kcmF3RWxlbWVudHMoYi5UUklBTkdMRVMsNixiLlVOU0lHTkVEX1NIT1JULDApO1YucG9zaXRpb25TY3JlZW4uY29weSh2YSk7Vi5jdXN0b21VcGRhdGVDYWxsYmFjaz9WLmN1c3RvbVVwZGF0ZUNhbGxiYWNrKFYpOlYudXBkYXRlTGVuc0ZsYXJlcygpO2IudW5pZm9ybTFpKGYsMik7Yy5lbmFibGUoYi5CTEVORCk7Zm9yKHZhciBIPVxuICAgIDAsSz1WLmxlbnNGbGFyZXMubGVuZ3RoO0g8SztIKyspe3ZhciBDPVYubGVuc0ZsYXJlc1tIXTsuMDAxPEMub3BhY2l0eSYmLjAwMTxDLnNjYWxlJiYodmEueD1DLngsdmEueT1DLnksdmEuej1DLnosbGE9Qy5zaXplKkMuc2NhbGUvbmEudyxTLng9bGEqSixTLnk9bGEsYi51bmlmb3JtM2YodSx2YS54LHZhLnksdmEueiksYi51bmlmb3JtMmYocSxTLngsUy55KSxiLnVuaWZvcm0xZihuLEMucm90YXRpb24pLGIudW5pZm9ybTFmKGssQy5vcGFjaXR5KSxiLnVuaWZvcm0zZihtLEMuY29sb3IucixDLmNvbG9yLmcsQy5jb2xvci5iKSxjLnNldEJsZW5kaW5nKEMuYmxlbmRpbmcsQy5ibGVuZEVxdWF0aW9uLEMuYmxlbmRTcmMsQy5ibGVuZERzdCksZC5zZXRUZXh0dXJlMkQoQy50ZXh0dXJlLDEpLGIuZHJhd0VsZW1lbnRzKGIuVFJJQU5HTEVTLDYsYi5VTlNJR05FRF9TSE9SVCwwKSl9fWMuZW5hYmxlKGIuQ1VMTF9GQUNFKTtjLmVuYWJsZShiLkRFUFRIX1RFU1QpO2MuYnVmZmVycy5kZXB0aC5zZXRNYXNrKCEwKTtcbiAgICBjLnJlc2V0KCl9fX1mdW5jdGlvbiB0YyhhLGIsYyxkLGUsZixnLGgsayl7VS5jYWxsKHRoaXMsYSxiLGMsZCxlLGYsZyxoLGspO3RoaXMubmVlZHNVcGRhdGU9ITB9ZnVuY3Rpb24gJGYoYSxiLGMsZCxlKXt2YXIgZixnLGgsayxtLHEsbix1LHIsdCxsLHcseix5LEksQSxKO2Z1bmN0aW9uIEhhKGEsYil7cmV0dXJuIGEucmVuZGVyT3JkZXIhPT1iLnJlbmRlck9yZGVyP2EucmVuZGVyT3JkZXItYi5yZW5kZXJPcmRlcjphLnohPT1iLno/Yi56LWEuejpiLmlkLWEuaWR9dmFyIERhLG5hLG9hLFRlLHBkPW5ldyBwLGxhPW5ldyBoYSxTPW5ldyBwO3RoaXMucmVuZGVyPWZ1bmN0aW9uKHYscCxEKXtpZigwIT09di5sZW5ndGgpe2lmKHZvaWQgMD09PW9hKXt2YXIgeD1uZXcgRmxvYXQzMkFycmF5KFstLjUsLS41LDAsMCwuNSwtLjUsMSwwLC41LC41LDEsMSwtLjUsLjUsMCwxXSksTj1uZXcgVWludDE2QXJyYXkoWzAsMSwyLDAsMiwzXSk7RGE9Yi5jcmVhdGVCdWZmZXIoKTtuYT1iLmNyZWF0ZUJ1ZmZlcigpO1xuICAgIGIuYmluZEJ1ZmZlcihiLkFSUkFZX0JVRkZFUixEYSk7Yi5idWZmZXJEYXRhKGIuQVJSQVlfQlVGRkVSLHgsYi5TVEFUSUNfRFJBVyk7Yi5iaW5kQnVmZmVyKGIuRUxFTUVOVF9BUlJBWV9CVUZGRVIsbmEpO2IuYnVmZmVyRGF0YShiLkVMRU1FTlRfQVJSQVlfQlVGRkVSLE4sYi5TVEFUSUNfRFJBVyk7eD1iLmNyZWF0ZVByb2dyYW0oKTtOPWIuY3JlYXRlU2hhZGVyKGIuVkVSVEVYX1NIQURFUik7dmFyIEI9Yi5jcmVhdGVTaGFkZXIoYi5GUkFHTUVOVF9TSEFERVIpO2Iuc2hhZGVyU291cmNlKE4sW1wicHJlY2lzaW9uIFwiK2UucHJlY2lzaW9uK1wiIGZsb2F0O1wiLFwiI2RlZmluZSBTSEFERVJfTkFNRSBTcHJpdGVNYXRlcmlhbFxcbnVuaWZvcm0gbWF0NCBtb2RlbFZpZXdNYXRyaXg7XFxudW5pZm9ybSBtYXQ0IHByb2plY3Rpb25NYXRyaXg7XFxudW5pZm9ybSBmbG9hdCByb3RhdGlvbjtcXG51bmlmb3JtIHZlYzIgc2NhbGU7XFxudW5pZm9ybSB2ZWMyIHV2T2Zmc2V0O1xcbnVuaWZvcm0gdmVjMiB1dlNjYWxlO1xcbmF0dHJpYnV0ZSB2ZWMyIHBvc2l0aW9uO1xcbmF0dHJpYnV0ZSB2ZWMyIHV2O1xcbnZhcnlpbmcgdmVjMiB2VVY7XFxudmFyeWluZyBmbG9hdCBmb2dEZXB0aDtcXG52b2lkIG1haW4oKSB7XFxuXFx0dlVWID0gdXZPZmZzZXQgKyB1diAqIHV2U2NhbGU7XFxuXFx0dmVjMiBhbGlnbmVkUG9zaXRpb24gPSBwb3NpdGlvbiAqIHNjYWxlO1xcblxcdHZlYzIgcm90YXRlZFBvc2l0aW9uO1xcblxcdHJvdGF0ZWRQb3NpdGlvbi54ID0gY29zKCByb3RhdGlvbiApICogYWxpZ25lZFBvc2l0aW9uLnggLSBzaW4oIHJvdGF0aW9uICkgKiBhbGlnbmVkUG9zaXRpb24ueTtcXG5cXHRyb3RhdGVkUG9zaXRpb24ueSA9IHNpbiggcm90YXRpb24gKSAqIGFsaWduZWRQb3NpdGlvbi54ICsgY29zKCByb3RhdGlvbiApICogYWxpZ25lZFBvc2l0aW9uLnk7XFxuXFx0dmVjNCBtdlBvc2l0aW9uO1xcblxcdG12UG9zaXRpb24gPSBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCAwLjAsIDAuMCwgMC4wLCAxLjAgKTtcXG5cXHRtdlBvc2l0aW9uLnh5ICs9IHJvdGF0ZWRQb3NpdGlvbjtcXG5cXHRnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtdlBvc2l0aW9uO1xcblxcdGZvZ0RlcHRoID0gLSBtdlBvc2l0aW9uLno7XFxufVwiXS5qb2luKFwiXFxuXCIpKTtcbiAgICBiLnNoYWRlclNvdXJjZShCLFtcInByZWNpc2lvbiBcIitlLnByZWNpc2lvbitcIiBmbG9hdDtcIixcIiNkZWZpbmUgU0hBREVSX05BTUUgU3ByaXRlTWF0ZXJpYWxcXG51bmlmb3JtIHZlYzMgY29sb3I7XFxudW5pZm9ybSBzYW1wbGVyMkQgbWFwO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG51bmlmb3JtIGludCBmb2dUeXBlO1xcbnVuaWZvcm0gdmVjMyBmb2dDb2xvcjtcXG51bmlmb3JtIGZsb2F0IGZvZ0RlbnNpdHk7XFxudW5pZm9ybSBmbG9hdCBmb2dOZWFyO1xcbnVuaWZvcm0gZmxvYXQgZm9nRmFyO1xcbnVuaWZvcm0gZmxvYXQgYWxwaGFUZXN0O1xcbnZhcnlpbmcgdmVjMiB2VVY7XFxudmFyeWluZyBmbG9hdCBmb2dEZXB0aDtcXG52b2lkIG1haW4oKSB7XFxuXFx0dmVjNCB0ZXh0dXJlID0gdGV4dHVyZTJEKCBtYXAsIHZVViApO1xcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIGNvbG9yICogdGV4dHVyZS54eXosIHRleHR1cmUuYSAqIG9wYWNpdHkgKTtcXG5cXHRpZiAoIGdsX0ZyYWdDb2xvci5hIDwgYWxwaGFUZXN0ICkgZGlzY2FyZDtcXG5cXHRpZiAoIGZvZ1R5cGUgPiAwICkge1xcblxcdFxcdGZsb2F0IGZvZ0ZhY3RvciA9IDAuMDtcXG5cXHRcXHRpZiAoIGZvZ1R5cGUgPT0gMSApIHtcXG5cXHRcXHRcXHRmb2dGYWN0b3IgPSBzbW9vdGhzdGVwKCBmb2dOZWFyLCBmb2dGYXIsIGZvZ0RlcHRoICk7XFxuXFx0XFx0fSBlbHNlIHtcXG5cXHRcXHRcXHRjb25zdCBmbG9hdCBMT0cyID0gMS40NDI2OTU7XFxuXFx0XFx0XFx0Zm9nRmFjdG9yID0gZXhwMiggLSBmb2dEZW5zaXR5ICogZm9nRGVuc2l0eSAqIGZvZ0RlcHRoICogZm9nRGVwdGggKiBMT0cyICk7XFxuXFx0XFx0XFx0Zm9nRmFjdG9yID0gMS4wIC0gY2xhbXAoIGZvZ0ZhY3RvciwgMC4wLCAxLjAgKTtcXG5cXHRcXHR9XFxuXFx0XFx0Z2xfRnJhZ0NvbG9yLnJnYiA9IG1peCggZ2xfRnJhZ0NvbG9yLnJnYiwgZm9nQ29sb3IsIGZvZ0ZhY3RvciApO1xcblxcdH1cXG59XCJdLmpvaW4oXCJcXG5cIikpO1xuICAgIGIuY29tcGlsZVNoYWRlcihOKTtiLmNvbXBpbGVTaGFkZXIoQik7Yi5hdHRhY2hTaGFkZXIoeCxOKTtiLmF0dGFjaFNoYWRlcih4LEIpO2IubGlua1Byb2dyYW0oeCk7b2E9eDtBPWIuZ2V0QXR0cmliTG9jYXRpb24ob2EsXCJwb3NpdGlvblwiKTtKPWIuZ2V0QXR0cmliTG9jYXRpb24ob2EsXCJ1dlwiKTtmPWIuZ2V0VW5pZm9ybUxvY2F0aW9uKG9hLFwidXZPZmZzZXRcIik7Zz1iLmdldFVuaWZvcm1Mb2NhdGlvbihvYSxcInV2U2NhbGVcIik7aD1iLmdldFVuaWZvcm1Mb2NhdGlvbihvYSxcInJvdGF0aW9uXCIpO2s9Yi5nZXRVbmlmb3JtTG9jYXRpb24ob2EsXCJzY2FsZVwiKTttPWIuZ2V0VW5pZm9ybUxvY2F0aW9uKG9hLFwiY29sb3JcIik7cT1iLmdldFVuaWZvcm1Mb2NhdGlvbihvYSxcIm1hcFwiKTtuPWIuZ2V0VW5pZm9ybUxvY2F0aW9uKG9hLFwib3BhY2l0eVwiKTt1PWIuZ2V0VW5pZm9ybUxvY2F0aW9uKG9hLFwibW9kZWxWaWV3TWF0cml4XCIpO3I9Yi5nZXRVbmlmb3JtTG9jYXRpb24ob2EsXCJwcm9qZWN0aW9uTWF0cml4XCIpO1xuICAgIHQ9Yi5nZXRVbmlmb3JtTG9jYXRpb24ob2EsXCJmb2dUeXBlXCIpO2w9Yi5nZXRVbmlmb3JtTG9jYXRpb24ob2EsXCJmb2dEZW5zaXR5XCIpO3c9Yi5nZXRVbmlmb3JtTG9jYXRpb24ob2EsXCJmb2dOZWFyXCIpO3o9Yi5nZXRVbmlmb3JtTG9jYXRpb24ob2EsXCJmb2dGYXJcIik7eT1iLmdldFVuaWZvcm1Mb2NhdGlvbihvYSxcImZvZ0NvbG9yXCIpO2IuZ2V0VW5pZm9ybUxvY2F0aW9uKG9hLFwiZm9nRGVwdGhcIik7ST1iLmdldFVuaWZvcm1Mb2NhdGlvbihvYSxcImFscGhhVGVzdFwiKTt4PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIixcImNhbnZhc1wiKTt4LndpZHRoPTg7eC5oZWlnaHQ9ODtOPXguZ2V0Q29udGV4dChcIjJkXCIpO04uZmlsbFN0eWxlPVwid2hpdGVcIjtOLmZpbGxSZWN0KDAsMCw4LDgpO1RlPW5ldyB0Yyh4KX1jLnVzZVByb2dyYW0ob2EpO2MuaW5pdEF0dHJpYnV0ZXMoKTtjLmVuYWJsZUF0dHJpYnV0ZShBKTtjLmVuYWJsZUF0dHJpYnV0ZShKKTtcbiAgICBjLmRpc2FibGVVbnVzZWRBdHRyaWJ1dGVzKCk7Yy5kaXNhYmxlKGIuQ1VMTF9GQUNFKTtjLmVuYWJsZShiLkJMRU5EKTtiLmJpbmRCdWZmZXIoYi5BUlJBWV9CVUZGRVIsRGEpO2IudmVydGV4QXR0cmliUG9pbnRlcihBLDIsYi5GTE9BVCwhMSwxNiwwKTtiLnZlcnRleEF0dHJpYlBvaW50ZXIoSiwyLGIuRkxPQVQsITEsMTYsOCk7Yi5iaW5kQnVmZmVyKGIuRUxFTUVOVF9BUlJBWV9CVUZGRVIsbmEpO2IudW5pZm9ybU1hdHJpeDRmdihyLCExLEQucHJvamVjdGlvbk1hdHJpeC5lbGVtZW50cyk7Yy5hY3RpdmVUZXh0dXJlKGIuVEVYVFVSRTApO2IudW5pZm9ybTFpKHEsMCk7Tj14PTA7KEI9cC5mb2cpPyhiLnVuaWZvcm0zZih5LEIuY29sb3IucixCLmNvbG9yLmcsQi5jb2xvci5iKSxCLmlzRm9nPyhiLnVuaWZvcm0xZih3LEIubmVhciksYi51bmlmb3JtMWYoeixCLmZhciksYi51bmlmb3JtMWkodCwxKSxOPXg9MSk6Qi5pc0ZvZ0V4cDImJihiLnVuaWZvcm0xZihsLEIuZGVuc2l0eSksXG4gICAgYi51bmlmb3JtMWkodCwyKSxOPXg9MikpOihiLnVuaWZvcm0xaSh0LDApLE49eD0wKTtmb3IodmFyIEM9MCxFPXYubGVuZ3RoO0M8RTtDKyspQj12W0NdLEIubW9kZWxWaWV3TWF0cml4Lm11bHRpcGx5TWF0cmljZXMoRC5tYXRyaXhXb3JsZEludmVyc2UsQi5tYXRyaXhXb3JsZCksQi56PS1CLm1vZGVsVmlld01hdHJpeC5lbGVtZW50c1sxNF07di5zb3J0KEhhKTtmb3IodmFyIHZhPVtdLEM9MCxFPXYubGVuZ3RoO0M8RTtDKyspe0I9dltDXTt2YXIgRz1CLm1hdGVyaWFsO2lmKCExIT09Ry52aXNpYmxlKXtCLm9uQmVmb3JlUmVuZGVyKGEscCxELHZvaWQgMCxHLHZvaWQgMCk7Yi51bmlmb3JtMWYoSSxHLmFscGhhVGVzdCk7Yi51bmlmb3JtTWF0cml4NGZ2KHUsITEsQi5tb2RlbFZpZXdNYXRyaXguZWxlbWVudHMpO0IubWF0cml4V29ybGQuZGVjb21wb3NlKHBkLGxhLFMpO3ZhWzBdPVMueDt2YVsxXT1TLnk7dmFyIHFkPTA7cC5mb2cmJkcuZm9nJiYocWQ9Tik7eCE9PXFkJiYoYi51bmlmb3JtMWkodCxcbiAgICBxZCkseD1xZCk7bnVsbCE9PUcubWFwPyhiLnVuaWZvcm0yZihmLEcubWFwLm9mZnNldC54LEcubWFwLm9mZnNldC55KSxiLnVuaWZvcm0yZihnLEcubWFwLnJlcGVhdC54LEcubWFwLnJlcGVhdC55KSk6KGIudW5pZm9ybTJmKGYsMCwwKSxiLnVuaWZvcm0yZihnLDEsMSkpO2IudW5pZm9ybTFmKG4sRy5vcGFjaXR5KTtiLnVuaWZvcm0zZihtLEcuY29sb3IucixHLmNvbG9yLmcsRy5jb2xvci5iKTtiLnVuaWZvcm0xZihoLEcucm90YXRpb24pO2IudW5pZm9ybTJmdihrLHZhKTtjLnNldEJsZW5kaW5nKEcuYmxlbmRpbmcsRy5ibGVuZEVxdWF0aW9uLEcuYmxlbmRTcmMsRy5ibGVuZERzdCxHLmJsZW5kRXF1YXRpb25BbHBoYSxHLmJsZW5kU3JjQWxwaGEsRy5ibGVuZERzdEFscGhhLEcucHJlbXVsdGlwbGllZEFscGhhKTtjLmJ1ZmZlcnMuZGVwdGguc2V0VGVzdChHLmRlcHRoVGVzdCk7Yy5idWZmZXJzLmRlcHRoLnNldE1hc2soRy5kZXB0aFdyaXRlKTtjLmJ1ZmZlcnMuY29sb3Iuc2V0TWFzayhHLmNvbG9yV3JpdGUpO1xuICAgIGQuc2V0VGV4dHVyZTJEKEcubWFwfHxUZSwwKTtiLmRyYXdFbGVtZW50cyhiLlRSSUFOR0xFUyw2LGIuVU5TSUdORURfU0hPUlQsMCk7Qi5vbkFmdGVyUmVuZGVyKGEscCxELHZvaWQgMCxHLHZvaWQgMCl9fWMuZW5hYmxlKGIuQ1VMTF9GQUNFKTtjLnJlc2V0KCl9fX1mdW5jdGlvbiBQKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpZFwiLHt2YWx1ZTphZysrfSk7dGhpcy51dWlkPVEuZ2VuZXJhdGVVVUlEKCk7dGhpcy5uYW1lPVwiXCI7dGhpcy50eXBlPVwiTWF0ZXJpYWxcIjt0aGlzLmxpZ2h0cz10aGlzLmZvZz0hMDt0aGlzLmJsZW5kaW5nPTE7dGhpcy5zaWRlPTA7dGhpcy5mbGF0U2hhZGluZz0hMTt0aGlzLnZlcnRleENvbG9ycz0wO3RoaXMub3BhY2l0eT0xO3RoaXMudHJhbnNwYXJlbnQ9ITE7dGhpcy5ibGVuZFNyYz0yMDQ7dGhpcy5ibGVuZERzdD0yMDU7dGhpcy5ibGVuZEVxdWF0aW9uPTEwMDt0aGlzLmJsZW5kRXF1YXRpb25BbHBoYT10aGlzLmJsZW5kRHN0QWxwaGE9dGhpcy5ibGVuZFNyY0FscGhhPVxuICAgIG51bGw7dGhpcy5kZXB0aEZ1bmM9Mzt0aGlzLmRlcHRoV3JpdGU9dGhpcy5kZXB0aFRlc3Q9ITA7dGhpcy5jbGlwcGluZ1BsYW5lcz1udWxsO3RoaXMuY2xpcFNoYWRvd3M9dGhpcy5jbGlwSW50ZXJzZWN0aW9uPSExO3RoaXMuY29sb3JXcml0ZT0hMDt0aGlzLnByZWNpc2lvbj1udWxsO3RoaXMucG9seWdvbk9mZnNldD0hMTt0aGlzLnBvbHlnb25PZmZzZXRVbml0cz10aGlzLnBvbHlnb25PZmZzZXRGYWN0b3I9MDt0aGlzLmRpdGhlcmluZz0hMTt0aGlzLmFscGhhVGVzdD0wO3RoaXMucHJlbXVsdGlwbGllZEFscGhhPSExO3RoaXMub3ZlcmRyYXc9MDt0aGlzLnZpc2libGU9ITA7dGhpcy51c2VyRGF0YT17fTt0aGlzLm5lZWRzVXBkYXRlPSEwfWZ1bmN0aW9uIGViKGEpe1AuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJNZXNoRGVwdGhNYXRlcmlhbFwiO3RoaXMuZGVwdGhQYWNraW5nPTMyMDA7dGhpcy5tb3JwaFRhcmdldHM9dGhpcy5za2lubmluZz0hMTt0aGlzLmRpc3BsYWNlbWVudE1hcD1cbiAgICB0aGlzLmFscGhhTWFwPXRoaXMubWFwPW51bGw7dGhpcy5kaXNwbGFjZW1lbnRTY2FsZT0xO3RoaXMuZGlzcGxhY2VtZW50Qmlhcz0wO3RoaXMud2lyZWZyYW1lPSExO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPTE7dGhpcy5saWdodHM9dGhpcy5mb2c9ITE7dGhpcy5zZXRWYWx1ZXMoYSl9ZnVuY3Rpb24gZmIoYSl7UC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIk1lc2hEaXN0YW5jZU1hdGVyaWFsXCI7dGhpcy5yZWZlcmVuY2VQb3NpdGlvbj1uZXcgcDt0aGlzLm5lYXJEaXN0YW5jZT0xO3RoaXMuZmFyRGlzdGFuY2U9MUUzO3RoaXMubW9ycGhUYXJnZXRzPXRoaXMuc2tpbm5pbmc9ITE7dGhpcy5kaXNwbGFjZW1lbnRNYXA9dGhpcy5hbHBoYU1hcD10aGlzLm1hcD1udWxsO3RoaXMuZGlzcGxhY2VtZW50U2NhbGU9MTt0aGlzLmRpc3BsYWNlbWVudEJpYXM9MDt0aGlzLmxpZ2h0cz10aGlzLmZvZz0hMTt0aGlzLnNldFZhbHVlcyhhKX1mdW5jdGlvbiBYYShhLGIpe3RoaXMubWluPXZvaWQgMCE9PVxuICAgIGE/YTpuZXcgcChJbmZpbml0eSxJbmZpbml0eSxJbmZpbml0eSk7dGhpcy5tYXg9dm9pZCAwIT09Yj9iOm5ldyBwKC1JbmZpbml0eSwtSW5maW5pdHksLUluZmluaXR5KX1mdW5jdGlvbiBJYShhLGIpe3RoaXMuY2VudGVyPXZvaWQgMCE9PWE/YTpuZXcgcDt0aGlzLnJhZGl1cz12b2lkIDAhPT1iP2I6MH1mdW5jdGlvbiBFYShhLGIpe3RoaXMubm9ybWFsPXZvaWQgMCE9PWE/YTpuZXcgcCgxLDAsMCk7dGhpcy5jb25zdGFudD12b2lkIDAhPT1iP2I6MH1mdW5jdGlvbiByZChhLGIsYyxkLGUsZil7dGhpcy5wbGFuZXM9W3ZvaWQgMCE9PWE/YTpuZXcgRWEsdm9pZCAwIT09Yj9iOm5ldyBFYSx2b2lkIDAhPT1jP2M6bmV3IEVhLHZvaWQgMCE9PWQ/ZDpuZXcgRWEsdm9pZCAwIT09ZT9lOm5ldyBFYSx2b2lkIDAhPT1mP2Y6bmV3IEVhXX1mdW5jdGlvbiBVZShhLGIsYyl7ZnVuY3Rpb24gZChiLGMsZCxlLGYsZyl7dmFyIGg9Yi5nZW9tZXRyeTt2YXIgaz1uO3ZhciBtPWIuY3VzdG9tRGVwdGhNYXRlcmlhbDtcbiAgICBkJiYoaz11LG09Yi5jdXN0b21EaXN0YW5jZU1hdGVyaWFsKTttP2s9bToobT0hMSxjLm1vcnBoVGFyZ2V0cyYmKGgmJmguaXNCdWZmZXJHZW9tZXRyeT9tPWgubW9ycGhBdHRyaWJ1dGVzJiZoLm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbiYmMDxoLm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbi5sZW5ndGg6aCYmaC5pc0dlb21ldHJ5JiYobT1oLm1vcnBoVGFyZ2V0cyYmMDxoLm1vcnBoVGFyZ2V0cy5sZW5ndGgpKSxiLmlzU2tpbm5lZE1lc2gmJiExPT09Yy5za2lubmluZyYmY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xTaGFkb3dNYXA6IFRIUkVFLlNraW5uZWRNZXNoIHdpdGggbWF0ZXJpYWwuc2tpbm5pbmcgc2V0IHRvIGZhbHNlOlwiLGIpLGI9Yi5pc1NraW5uZWRNZXNoJiZjLnNraW5uaW5nLGg9MCxtJiYoaHw9MSksYiYmKGh8PTIpLGs9a1toXSk7YS5sb2NhbENsaXBwaW5nRW5hYmxlZCYmITA9PT1jLmNsaXBTaGFkb3dzJiYwIT09Yy5jbGlwcGluZ1BsYW5lcy5sZW5ndGgmJihoPVxuICAgIGsudXVpZCxtPWMudXVpZCxiPXJbaF0sdm9pZCAwPT09YiYmKGI9e30scltoXT1iKSxoPWJbbV0sdm9pZCAwPT09aCYmKGg9ay5jbG9uZSgpLGJbbV09aCksaz1oKTtrLnZpc2libGU9Yy52aXNpYmxlO2sud2lyZWZyYW1lPWMud2lyZWZyYW1lO209Yy5zaWRlO0EucmVuZGVyU2luZ2xlU2lkZWQmJjI9PW0mJihtPTApO0EucmVuZGVyUmV2ZXJzZVNpZGVkJiYoMD09PW0/bT0xOjE9PT1tJiYobT0wKSk7ay5zaWRlPW07ay5jbGlwU2hhZG93cz1jLmNsaXBTaGFkb3dzO2suY2xpcHBpbmdQbGFuZXM9Yy5jbGlwcGluZ1BsYW5lcztrLmNsaXBJbnRlcnNlY3Rpb249Yy5jbGlwSW50ZXJzZWN0aW9uO2sud2lyZWZyYW1lTGluZXdpZHRoPWMud2lyZWZyYW1lTGluZXdpZHRoO2subGluZXdpZHRoPWMubGluZXdpZHRoO2QmJmsuaXNNZXNoRGlzdGFuY2VNYXRlcmlhbCYmKGsucmVmZXJlbmNlUG9zaXRpb24uY29weShlKSxrLm5lYXJEaXN0YW5jZT1mLGsuZmFyRGlzdGFuY2U9Zyk7cmV0dXJuIGt9XG4gICAgZnVuY3Rpb24gZShjLGgsZyxrKXt2YXIgbTtpZighMSE9PWMudmlzaWJsZSl7aWYoYy5sYXllcnMudGVzdChoLmxheWVycykmJihjLmlzTWVzaHx8Yy5pc0xpbmV8fGMuaXNQb2ludHMpJiZjLmNhc3RTaGFkb3cmJighYy5mcnVzdHVtQ3VsbGVkfHxmLmludGVyc2VjdHNPYmplY3QoYykpKXtjLm1vZGVsVmlld01hdHJpeC5tdWx0aXBseU1hdHJpY2VzKGcubWF0cml4V29ybGRJbnZlcnNlLGMubWF0cml4V29ybGQpO3ZhciBuPWIudXBkYXRlKGMpLHU9Yy5tYXRlcmlhbDtpZihBcnJheS5pc0FycmF5KHUpKWZvcih2YXIgcj1uLmdyb3Vwcyx0PTAsbD1yLmxlbmd0aDt0PGw7dCsrKXt2YXIgST1yW3RdOyhtPXVbSS5tYXRlcmlhbEluZGV4XSkmJm0udmlzaWJsZSYmKG09ZChjLG0sayxxLGcubmVhcixnLmZhciksYS5yZW5kZXJCdWZmZXJEaXJlY3QoZyxudWxsLG4sbSxjLEkpKX1lbHNlIHUudmlzaWJsZSYmKG09ZChjLHUsayxxLGcubmVhcixnLmZhciksYS5yZW5kZXJCdWZmZXJEaXJlY3QoZyxcbiAgICBudWxsLG4sbSxjLG51bGwpKX1jPWMuY2hpbGRyZW47bj0wO2Zvcih1PWMubGVuZ3RoO248dTtuKyspZShjW25dLGgsZyxrKX19dmFyIGY9bmV3IHJkLGc9bmV3IE8saD1uZXcgRCxrPW5ldyBEKGMsYyksbT1uZXcgcCxxPW5ldyBwLG49QXJyYXkoNCksdT1BcnJheSg0KSxyPXt9LHQ9W25ldyBwKDEsMCwwKSxuZXcgcCgtMSwwLDApLG5ldyBwKDAsMCwxKSxuZXcgcCgwLDAsLTEpLG5ldyBwKDAsMSwwKSxuZXcgcCgwLC0xLDApXSxsPVtuZXcgcCgwLDEsMCksbmV3IHAoMCwxLDApLG5ldyBwKDAsMSwwKSxuZXcgcCgwLDEsMCksbmV3IHAoMCwwLDEpLG5ldyBwKDAsMCwtMSldLHc9W25ldyBhYSxuZXcgYWEsbmV3IGFhLG5ldyBhYSxuZXcgYWEsbmV3IGFhXTtmb3IoYz0wOzQhPT1jOysrYyl7dmFyIHo9MCE9PShjJjEpLHk9MCE9PShjJjIpLEk9bmV3IGViKHtkZXB0aFBhY2tpbmc6MzIwMSxtb3JwaFRhcmdldHM6eixza2lubmluZzp5fSk7bltjXT1JO3o9bmV3IGZiKHttb3JwaFRhcmdldHM6eixcbiAgICBza2lubmluZzp5fSk7dVtjXT16fXZhciBBPXRoaXM7dGhpcy5lbmFibGVkPSExO3RoaXMuYXV0b1VwZGF0ZT0hMDt0aGlzLm5lZWRzVXBkYXRlPSExO3RoaXMudHlwZT0xO3RoaXMucmVuZGVyU2luZ2xlU2lkZWQ9dGhpcy5yZW5kZXJSZXZlcnNlU2lkZWQ9ITA7dGhpcy5yZW5kZXI9ZnVuY3Rpb24oYixjLGQpe2lmKCExIT09QS5lbmFibGVkJiYoITEhPT1BLmF1dG9VcGRhdGV8fCExIT09QS5uZWVkc1VwZGF0ZSkmJjAhPT1iLmxlbmd0aCl7dmFyIG49YS5zdGF0ZTtuLmRpc2FibGUoYS5jb250ZXh0LkJMRU5EKTtuLmJ1ZmZlcnMuY29sb3Iuc2V0Q2xlYXIoMSwxLDEsMSk7bi5idWZmZXJzLmRlcHRoLnNldFRlc3QoITApO24uc2V0U2Npc3NvclRlc3QoITEpO2Zvcih2YXIgdSxyPTAsST1iLmxlbmd0aDtyPEk7cisrKXt2YXIgdj1iW3JdO3U9di5zaGFkb3c7dmFyIHA9diYmdi5pc1BvaW50TGlnaHQ7aWYodm9pZCAwPT09dSljb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFNoYWRvd01hcDpcIixcbiAgICB2LFwiaGFzIG5vIHNoYWRvdy5cIik7ZWxzZXt2YXIgej11LmNhbWVyYTtoLmNvcHkodS5tYXBTaXplKTtoLm1pbihrKTtpZihwKXt2YXIgeT1oLngsSj1oLnk7d1swXS5zZXQoMip5LEoseSxKKTt3WzFdLnNldCgwLEoseSxKKTt3WzJdLnNldCgzKnksSix5LEopO3dbM10uc2V0KHksSix5LEopO3dbNF0uc2V0KDMqeSwwLHksSik7d1s1XS5zZXQoeSwwLHksSik7aC54Kj00O2gueSo9Mn1udWxsPT09dS5tYXAmJih1Lm1hcD1uZXcga2IoaC54LGgueSx7bWluRmlsdGVyOjEwMDMsbWFnRmlsdGVyOjEwMDMsZm9ybWF0OjEwMjN9KSx1Lm1hcC50ZXh0dXJlLm5hbWU9di5uYW1lK1wiLnNoYWRvd01hcFwiLHoudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpKTt1LmlzU3BvdExpZ2h0U2hhZG93JiZ1LnVwZGF0ZSh2KTt5PXUubWFwO0o9dS5tYXRyaXg7cS5zZXRGcm9tTWF0cml4UG9zaXRpb24odi5tYXRyaXhXb3JsZCk7ei5wb3NpdGlvbi5jb3B5KHEpO3A/KHU9NixKLm1ha2VUcmFuc2xhdGlvbigtcS54LFxuICAgIC1xLnksLXEueikpOih1PTEsbS5zZXRGcm9tTWF0cml4UG9zaXRpb24odi50YXJnZXQubWF0cml4V29ybGQpLHoubG9va0F0KG0pLHoudXBkYXRlTWF0cml4V29ybGQoKSxKLnNldCguNSwwLDAsLjUsMCwuNSwwLC41LDAsMCwuNSwuNSwwLDAsMCwxKSxKLm11bHRpcGx5KHoucHJvamVjdGlvbk1hdHJpeCksSi5tdWx0aXBseSh6Lm1hdHJpeFdvcmxkSW52ZXJzZSkpO2Euc2V0UmVuZGVyVGFyZ2V0KHkpO2EuY2xlYXIoKTtmb3Iodj0wO3Y8dTt2KyspcCYmKG0uY29weSh6LnBvc2l0aW9uKSxtLmFkZCh0W3ZdKSx6LnVwLmNvcHkobFt2XSksei5sb29rQXQobSksei51cGRhdGVNYXRyaXhXb3JsZCgpLG4udmlld3BvcnQod1t2XSkpLGcubXVsdGlwbHlNYXRyaWNlcyh6LnByb2plY3Rpb25NYXRyaXgsei5tYXRyaXhXb3JsZEludmVyc2UpLGYuc2V0RnJvbU1hdHJpeChnKSxlKGMsZCx6LHApfX1BLm5lZWRzVXBkYXRlPSExfX19ZnVuY3Rpb24gYmcoYSl7dmFyIGI9e307cmV0dXJue2dldDpmdW5jdGlvbihhKXthLmlzSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUmJlxuICAgIChhPWEuZGF0YSk7cmV0dXJuIGJbYS51dWlkXX0scmVtb3ZlOmZ1bmN0aW9uKGMpe2MuaXNJbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZSYmKGM9Yy5kYXRhKTt2YXIgZD1iW2MudXVpZF07ZCYmKGEuZGVsZXRlQnVmZmVyKGQuYnVmZmVyKSxkZWxldGUgYltjLnV1aWRdKX0sdXBkYXRlOmZ1bmN0aW9uKGMsZCl7Yy5pc0ludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlJiYoYz1jLmRhdGEpO3ZhciBlPWJbYy51dWlkXTtpZih2b2lkIDA9PT1lKXt2YXIgZT1jLnV1aWQsZj1jLmFycmF5LGc9Yy5keW5hbWljP2EuRFlOQU1JQ19EUkFXOmEuU1RBVElDX0RSQVcsaD1hLmNyZWF0ZUJ1ZmZlcigpO2EuYmluZEJ1ZmZlcihkLGgpO2EuYnVmZmVyRGF0YShkLGYsZyk7Yy5vblVwbG9hZENhbGxiYWNrKCk7ZD1hLkZMT0FUO2YgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXk/ZD1hLkZMT0FUOmYgaW5zdGFuY2VvZiBGbG9hdDY0QXJyYXk/Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xBdHRyaWJ1dGVzOiBVbnN1cHBvcnRlZCBkYXRhIGJ1ZmZlciBmb3JtYXQ6IEZsb2F0NjRBcnJheS5cIik6XG4gICAgZiBpbnN0YW5jZW9mIFVpbnQxNkFycmF5P2Q9YS5VTlNJR05FRF9TSE9SVDpmIGluc3RhbmNlb2YgSW50MTZBcnJheT9kPWEuU0hPUlQ6ZiBpbnN0YW5jZW9mIFVpbnQzMkFycmF5P2Q9YS5VTlNJR05FRF9JTlQ6ZiBpbnN0YW5jZW9mIEludDMyQXJyYXk/ZD1hLklOVDpmIGluc3RhbmNlb2YgSW50OEFycmF5P2Q9YS5CWVRFOmYgaW5zdGFuY2VvZiBVaW50OEFycmF5JiYoZD1hLlVOU0lHTkVEX0JZVEUpO2JbZV09e2J1ZmZlcjpoLHR5cGU6ZCxieXRlc1BlckVsZW1lbnQ6Zi5CWVRFU19QRVJfRUxFTUVOVCx2ZXJzaW9uOmMudmVyc2lvbn19ZWxzZSBlLnZlcnNpb248Yy52ZXJzaW9uJiYoZj1jLGg9Zi5hcnJheSxnPWYudXBkYXRlUmFuZ2UsYS5iaW5kQnVmZmVyKGQsZS5idWZmZXIpLCExPT09Zi5keW5hbWljP2EuYnVmZmVyRGF0YShkLGgsYS5TVEFUSUNfRFJBVyk6LTE9PT1nLmNvdW50P2EuYnVmZmVyU3ViRGF0YShkLDAsaCk6MD09PWcuY291bnQ/Y29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMT2JqZWN0cy51cGRhdGVCdWZmZXI6IGR5bmFtaWMgVEhSRUUuQnVmZmVyQXR0cmlidXRlIG1hcmtlZCBhcyBuZWVkc1VwZGF0ZSBidXQgdXBkYXRlUmFuZ2UuY291bnQgaXMgMCwgZW5zdXJlIHlvdSBhcmUgdXNpbmcgc2V0IG1ldGhvZHMgb3IgdXBkYXRpbmcgbWFudWFsbHkuXCIpOlxuICAgIChhLmJ1ZmZlclN1YkRhdGEoZCxnLm9mZnNldCpoLkJZVEVTX1BFUl9FTEVNRU5ULGguc3ViYXJyYXkoZy5vZmZzZXQsZy5vZmZzZXQrZy5jb3VudCkpLGcuY291bnQ9LTEpLGUudmVyc2lvbj1jLnZlcnNpb24pfX19ZnVuY3Rpb24gZ2IoYSxiLGMsZCl7dGhpcy5feD1hfHwwO3RoaXMuX3k9Ynx8MDt0aGlzLl96PWN8fDA7dGhpcy5fb3JkZXI9ZHx8Z2IuRGVmYXVsdE9yZGVyfWZ1bmN0aW9uIFdkKCl7dGhpcy5tYXNrPTF9ZnVuY3Rpb24geCgpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaWRcIix7dmFsdWU6Y2crK30pO3RoaXMudXVpZD1RLmdlbmVyYXRlVVVJRCgpO3RoaXMubmFtZT1cIlwiO3RoaXMudHlwZT1cIk9iamVjdDNEXCI7dGhpcy5wYXJlbnQ9bnVsbDt0aGlzLmNoaWxkcmVuPVtdO3RoaXMudXA9eC5EZWZhdWx0VXAuY2xvbmUoKTt2YXIgYT1uZXcgcCxiPW5ldyBnYixjPW5ldyBoYSxkPW5ldyBwKDEsMSwxKTtiLm9uQ2hhbmdlKGZ1bmN0aW9uKCl7Yy5zZXRGcm9tRXVsZXIoYixcbiAgICAhMSl9KTtjLm9uQ2hhbmdlKGZ1bmN0aW9uKCl7Yi5zZXRGcm9tUXVhdGVybmlvbihjLHZvaWQgMCwhMSl9KTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLHtwb3NpdGlvbjp7ZW51bWVyYWJsZTohMCx2YWx1ZTphfSxyb3RhdGlvbjp7ZW51bWVyYWJsZTohMCx2YWx1ZTpifSxxdWF0ZXJuaW9uOntlbnVtZXJhYmxlOiEwLHZhbHVlOmN9LHNjYWxlOntlbnVtZXJhYmxlOiEwLHZhbHVlOmR9LG1vZGVsVmlld01hdHJpeDp7dmFsdWU6bmV3IE99LG5vcm1hbE1hdHJpeDp7dmFsdWU6bmV3IG1hfX0pO3RoaXMubWF0cml4PW5ldyBPO3RoaXMubWF0cml4V29ybGQ9bmV3IE87dGhpcy5tYXRyaXhBdXRvVXBkYXRlPXguRGVmYXVsdE1hdHJpeEF1dG9VcGRhdGU7dGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSExO3RoaXMubGF5ZXJzPW5ldyBXZDt0aGlzLnZpc2libGU9ITA7dGhpcy5yZWNlaXZlU2hhZG93PXRoaXMuY2FzdFNoYWRvdz0hMTt0aGlzLmZydXN0dW1DdWxsZWQ9ITA7dGhpcy5yZW5kZXJPcmRlcj1cbiAgICAwO3RoaXMudXNlckRhdGE9e319ZnVuY3Rpb24gVGEoKXt4LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiQ2FtZXJhXCI7dGhpcy5tYXRyaXhXb3JsZEludmVyc2U9bmV3IE87dGhpcy5wcm9qZWN0aW9uTWF0cml4PW5ldyBPfWZ1bmN0aW9uIExiKGEsYixjLGQsZSxmKXtUYS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIk9ydGhvZ3JhcGhpY0NhbWVyYVwiO3RoaXMuem9vbT0xO3RoaXMudmlldz1udWxsO3RoaXMubGVmdD1hO3RoaXMucmlnaHQ9Yjt0aGlzLnRvcD1jO3RoaXMuYm90dG9tPWQ7dGhpcy5uZWFyPXZvaWQgMCE9PWU/ZTouMTt0aGlzLmZhcj12b2lkIDAhPT1mP2Y6MkUzO3RoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfWZ1bmN0aW9uIFlhKGEsYixjLGQsZSxmKXt0aGlzLmE9YTt0aGlzLmI9Yjt0aGlzLmM9Yzt0aGlzLm5vcm1hbD1kJiZkLmlzVmVjdG9yMz9kOm5ldyBwO3RoaXMudmVydGV4Tm9ybWFscz1BcnJheS5pc0FycmF5KGQpP2Q6W107dGhpcy5jb2xvcj1lJiZlLmlzQ29sb3I/XG4gICAgZTpuZXcgSDt0aGlzLnZlcnRleENvbG9ycz1BcnJheS5pc0FycmF5KGUpP2U6W107dGhpcy5tYXRlcmlhbEluZGV4PXZvaWQgMCE9PWY/ZjowfWZ1bmN0aW9uIEwoKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlkXCIse3ZhbHVlOmRnKz0yfSk7dGhpcy51dWlkPVEuZ2VuZXJhdGVVVUlEKCk7dGhpcy5uYW1lPVwiXCI7dGhpcy50eXBlPVwiR2VvbWV0cnlcIjt0aGlzLnZlcnRpY2VzPVtdO3RoaXMuY29sb3JzPVtdO3RoaXMuZmFjZXM9W107dGhpcy5mYWNlVmVydGV4VXZzPVtbXV07dGhpcy5tb3JwaFRhcmdldHM9W107dGhpcy5tb3JwaE5vcm1hbHM9W107dGhpcy5za2luV2VpZ2h0cz1bXTt0aGlzLnNraW5JbmRpY2VzPVtdO3RoaXMubGluZURpc3RhbmNlcz1bXTt0aGlzLmJvdW5kaW5nU3BoZXJlPXRoaXMuYm91bmRpbmdCb3g9bnVsbDt0aGlzLmdyb3Vwc05lZWRVcGRhdGU9dGhpcy5saW5lRGlzdGFuY2VzTmVlZFVwZGF0ZT10aGlzLmNvbG9yc05lZWRVcGRhdGU9dGhpcy5ub3JtYWxzTmVlZFVwZGF0ZT1cbiAgICB0aGlzLnV2c05lZWRVcGRhdGU9dGhpcy52ZXJ0aWNlc05lZWRVcGRhdGU9dGhpcy5lbGVtZW50c05lZWRVcGRhdGU9ITF9ZnVuY3Rpb24gTShhLGIsYyl7aWYoQXJyYXkuaXNBcnJheShhKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVEhSRUUuQnVmZmVyQXR0cmlidXRlOiBhcnJheSBzaG91bGQgYmUgYSBUeXBlZCBBcnJheS5cIik7dGhpcy51dWlkPVEuZ2VuZXJhdGVVVUlEKCk7dGhpcy5uYW1lPVwiXCI7dGhpcy5hcnJheT1hO3RoaXMuaXRlbVNpemU9Yjt0aGlzLmNvdW50PXZvaWQgMCE9PWE/YS5sZW5ndGgvYjowO3RoaXMubm9ybWFsaXplZD0hMD09PWM7dGhpcy5keW5hbWljPSExO3RoaXMudXBkYXRlUmFuZ2U9e29mZnNldDowLGNvdW50Oi0xfTt0aGlzLm9uVXBsb2FkQ2FsbGJhY2s9ZnVuY3Rpb24oKXt9O3RoaXMudmVyc2lvbj0wfWZ1bmN0aW9uIHVjKGEsYixjKXtNLmNhbGwodGhpcyxuZXcgSW50OEFycmF5KGEpLGIsYyl9ZnVuY3Rpb24gdmMoYSxiLGMpe00uY2FsbCh0aGlzLG5ldyBVaW50OEFycmF5KGEpLFxuICAgIGIsYyl9ZnVuY3Rpb24gd2MoYSxiLGMpe00uY2FsbCh0aGlzLG5ldyBVaW50OENsYW1wZWRBcnJheShhKSxiLGMpfWZ1bmN0aW9uIHhjKGEsYixjKXtNLmNhbGwodGhpcyxuZXcgSW50MTZBcnJheShhKSxiLGMpfWZ1bmN0aW9uIG9iKGEsYixjKXtNLmNhbGwodGhpcyxuZXcgVWludDE2QXJyYXkoYSksYixjKX1mdW5jdGlvbiB5YyhhLGIsYyl7TS5jYWxsKHRoaXMsbmV3IEludDMyQXJyYXkoYSksYixjKX1mdW5jdGlvbiBwYihhLGIsYyl7TS5jYWxsKHRoaXMsbmV3IFVpbnQzMkFycmF5KGEpLGIsYyl9ZnVuY3Rpb24gQihhLGIsYyl7TS5jYWxsKHRoaXMsbmV3IEZsb2F0MzJBcnJheShhKSxiLGMpfWZ1bmN0aW9uIHpjKGEsYixjKXtNLmNhbGwodGhpcyxuZXcgRmxvYXQ2NEFycmF5KGEpLGIsYyl9ZnVuY3Rpb24gVmUoKXt0aGlzLmluZGljZXM9W107dGhpcy52ZXJ0aWNlcz1bXTt0aGlzLm5vcm1hbHM9W107dGhpcy5jb2xvcnM9W107dGhpcy51dnM9W107dGhpcy51dnMyPVtdO3RoaXMuZ3JvdXBzPVxuICAgIFtdO3RoaXMubW9ycGhUYXJnZXRzPXt9O3RoaXMuc2tpbldlaWdodHM9W107dGhpcy5za2luSW5kaWNlcz1bXTt0aGlzLmJvdW5kaW5nU3BoZXJlPXRoaXMuYm91bmRpbmdCb3g9bnVsbDt0aGlzLmdyb3Vwc05lZWRVcGRhdGU9dGhpcy51dnNOZWVkVXBkYXRlPXRoaXMuY29sb3JzTmVlZFVwZGF0ZT10aGlzLm5vcm1hbHNOZWVkVXBkYXRlPXRoaXMudmVydGljZXNOZWVkVXBkYXRlPSExfWZ1bmN0aW9uIFhkKGEpe2lmKDA9PT1hLmxlbmd0aClyZXR1cm4tSW5maW5pdHk7Zm9yKHZhciBiPWFbMF0sYz0xLGQ9YS5sZW5ndGg7YzxkOysrYylhW2NdPmImJihiPWFbY10pO3JldHVybiBifWZ1bmN0aW9uIEUoKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlkXCIse3ZhbHVlOmVnKz0yfSk7dGhpcy51dWlkPVEuZ2VuZXJhdGVVVUlEKCk7dGhpcy5uYW1lPVwiXCI7dGhpcy50eXBlPVwiQnVmZmVyR2VvbWV0cnlcIjt0aGlzLmluZGV4PW51bGw7dGhpcy5hdHRyaWJ1dGVzPXt9O3RoaXMubW9ycGhBdHRyaWJ1dGVzPVxuICAgIHt9O3RoaXMuZ3JvdXBzPVtdO3RoaXMuYm91bmRpbmdTcGhlcmU9dGhpcy5ib3VuZGluZ0JveD1udWxsO3RoaXMuZHJhd1JhbmdlPXtzdGFydDowLGNvdW50OkluZmluaXR5fX1mdW5jdGlvbiBNYihhLGIsYyxkLGUsZil7TC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkJveEdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXt3aWR0aDphLGhlaWdodDpiLGRlcHRoOmMsd2lkdGhTZWdtZW50czpkLGhlaWdodFNlZ21lbnRzOmUsZGVwdGhTZWdtZW50czpmfTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgcWIoYSxiLGMsZCxlLGYpKTt0aGlzLm1lcmdlVmVydGljZXMoKX1mdW5jdGlvbiBxYihhLGIsYyxkLGUsZil7ZnVuY3Rpb24gZyhhLGIsYyxkLGUsZixnLGwsSGEsRGEsbmEpe3ZhciB0PWYvSGEsdj1nL0RhLEk9Zi8yLEE9Zy8yLHc9bC8yO2c9SGErMTt2YXIgej1EYSsxLHk9Zj0wLEoseCxCPW5ldyBwO2Zvcih4PTA7eDx6O3grKyl7dmFyIEQ9eCp2LUE7Zm9yKEo9MDtKPGc7SisrKUJbYV09XG4gICAgKEoqdC1JKSpkLEJbYl09RCplLEJbY109dyxtLnB1c2goQi54LEIueSxCLnopLEJbYV09MCxCW2JdPTAsQltjXT0wPGw/MTotMSxxLnB1c2goQi54LEIueSxCLnopLG4ucHVzaChKL0hhKSxuLnB1c2goMS14L0RhKSxmKz0xfWZvcih4PTA7eDxEYTt4KyspZm9yKEo9MDtKPEhhO0orKylhPXUrSitnKih4KzEpLGI9dSsoSisxKStnKih4KzEpLGM9dSsoSisxKStnKngsay5wdXNoKHUrSitnKngsYSxjKSxrLnB1c2goYSxiLGMpLHkrPTY7aC5hZGRHcm91cChyLHksbmEpO3IrPXk7dSs9Zn1FLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiQm94QnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3dpZHRoOmEsaGVpZ2h0OmIsZGVwdGg6Yyx3aWR0aFNlZ21lbnRzOmQsaGVpZ2h0U2VnbWVudHM6ZSxkZXB0aFNlZ21lbnRzOmZ9O3ZhciBoPXRoaXM7YT1hfHwxO2I9Ynx8MTtjPWN8fDE7ZD1NYXRoLmZsb29yKGQpfHwxO2U9TWF0aC5mbG9vcihlKXx8MTtmPU1hdGguZmxvb3IoZil8fDE7dmFyIGs9XG4gICAgW10sbT1bXSxxPVtdLG49W10sdT0wLHI9MDtnKFwielwiLFwieVwiLFwieFwiLC0xLC0xLGMsYixhLGYsZSwwKTtnKFwielwiLFwieVwiLFwieFwiLDEsLTEsYyxiLC1hLGYsZSwxKTtnKFwieFwiLFwielwiLFwieVwiLDEsMSxhLGMsYixkLGYsMik7ZyhcInhcIixcInpcIixcInlcIiwxLC0xLGEsYywtYixkLGYsMyk7ZyhcInhcIixcInlcIixcInpcIiwxLC0xLGEsYixjLGQsZSw0KTtnKFwieFwiLFwieVwiLFwielwiLC0xLC0xLGEsYiwtYyxkLGUsNSk7dGhpcy5zZXRJbmRleChrKTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEIobSwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgQihxLDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcInV2XCIsbmV3IEIobiwyKSl9ZnVuY3Rpb24gQWMoYSxiLGMsZCl7TC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlBsYW5lR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3dpZHRoOmEsaGVpZ2h0OmIsd2lkdGhTZWdtZW50czpjLGhlaWdodFNlZ21lbnRzOmR9O3RoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyByYihhLFxuICAgIGIsYyxkKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9ZnVuY3Rpb24gcmIoYSxiLGMsZCl7RS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlBsYW5lQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3dpZHRoOmEsaGVpZ2h0OmIsd2lkdGhTZWdtZW50czpjLGhlaWdodFNlZ21lbnRzOmR9O2E9YXx8MTtiPWJ8fDE7dmFyIGU9YS8yLGY9Yi8yO2M9TWF0aC5mbG9vcihjKXx8MTtkPU1hdGguZmxvb3IoZCl8fDE7dmFyIGc9YysxLGg9ZCsxLGs9YS9jLG09Yi9kLHE9W10sbj1bXSx1PVtdLHI9W107Zm9yKGE9MDthPGg7YSsrKXt2YXIgdD1hKm0tZjtmb3IoYj0wO2I8ZztiKyspbi5wdXNoKGIqay1lLC10LDApLHUucHVzaCgwLDAsMSksci5wdXNoKGIvYyksci5wdXNoKDEtYS9kKX1mb3IoYT0wO2E8ZDthKyspZm9yKGI9MDtiPGM7YisrKWU9YitnKihhKzEpLGY9YisxK2cqKGErMSksaD1iKzErZyphLHEucHVzaChiK2cqYSxlLGgpLHEucHVzaChlLGYsaCk7dGhpcy5zZXRJbmRleChxKTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsXG4gICAgbmV3IEIobiwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgQih1LDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcInV2XCIsbmV3IEIociwyKSl9ZnVuY3Rpb24gQWEoYSl7UC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIk1lc2hCYXNpY01hdGVyaWFsXCI7dGhpcy5jb2xvcj1uZXcgSCgxNjc3NzIxNSk7dGhpcy5saWdodE1hcD10aGlzLm1hcD1udWxsO3RoaXMubGlnaHRNYXBJbnRlbnNpdHk9MTt0aGlzLmFvTWFwPW51bGw7dGhpcy5hb01hcEludGVuc2l0eT0xO3RoaXMuZW52TWFwPXRoaXMuYWxwaGFNYXA9dGhpcy5zcGVjdWxhck1hcD1udWxsO3RoaXMuY29tYmluZT0wO3RoaXMucmVmbGVjdGl2aXR5PTE7dGhpcy5yZWZyYWN0aW9uUmF0aW89Ljk4O3RoaXMud2lyZWZyYW1lPSExO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPTE7dGhpcy53aXJlZnJhbWVMaW5lam9pbj10aGlzLndpcmVmcmFtZUxpbmVjYXA9XCJyb3VuZFwiO3RoaXMubGlnaHRzPXRoaXMubW9ycGhUYXJnZXRzPXRoaXMuc2tpbm5pbmc9XG4gICAgITE7dGhpcy5zZXRWYWx1ZXMoYSl9ZnVuY3Rpb24gRmEoYSl7UC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlNoYWRlck1hdGVyaWFsXCI7dGhpcy5kZWZpbmVzPXt9O3RoaXMudW5pZm9ybXM9e307dGhpcy52ZXJ0ZXhTaGFkZXI9XCJ2b2lkIG1haW4oKSB7XFxuXFx0Z2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApO1xcbn1cIjt0aGlzLmZyYWdtZW50U2hhZGVyPVwidm9pZCBtYWluKCkge1xcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIDEuMCwgMC4wLCAwLjAsIDEuMCApO1xcbn1cIjt0aGlzLmxpbmV3aWR0aD0xO3RoaXMud2lyZWZyYW1lPSExO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPTE7dGhpcy5tb3JwaE5vcm1hbHM9dGhpcy5tb3JwaFRhcmdldHM9dGhpcy5za2lubmluZz10aGlzLmNsaXBwaW5nPXRoaXMubGlnaHRzPXRoaXMuZm9nPSExO3RoaXMuZXh0ZW5zaW9ucz17ZGVyaXZhdGl2ZXM6ITEsZnJhZ0RlcHRoOiExLFxuICAgIGRyYXdCdWZmZXJzOiExLHNoYWRlclRleHR1cmVMT0Q6ITF9O3RoaXMuZGVmYXVsdEF0dHJpYnV0ZVZhbHVlcz17Y29sb3I6WzEsMSwxXSx1djpbMCwwXSx1djI6WzAsMF19O3RoaXMuaW5kZXgwQXR0cmlidXRlTmFtZT12b2lkIDA7dm9pZCAwIT09YSYmKHZvaWQgMCE9PWEuYXR0cmlidXRlcyYmY29uc29sZS5lcnJvcihcIlRIUkVFLlNoYWRlck1hdGVyaWFsOiBhdHRyaWJ1dGVzIHNob3VsZCBub3cgYmUgZGVmaW5lZCBpbiBUSFJFRS5CdWZmZXJHZW9tZXRyeSBpbnN0ZWFkLlwiKSx0aGlzLnNldFZhbHVlcyhhKSl9ZnVuY3Rpb24gc2IoYSxiKXt0aGlzLm9yaWdpbj12b2lkIDAhPT1hP2E6bmV3IHA7dGhpcy5kaXJlY3Rpb249dm9pZCAwIT09Yj9iOm5ldyBwfWZ1bmN0aW9uIE5iKGEsYil7dGhpcy5zdGFydD12b2lkIDAhPT1hP2E6bmV3IHA7dGhpcy5lbmQ9dm9pZCAwIT09Yj9iOm5ldyBwfWZ1bmN0aW9uIFphKGEsYixjKXt0aGlzLmE9dm9pZCAwIT09YT9hOm5ldyBwO3RoaXMuYj12b2lkIDAhPT1cbiAgICBiP2I6bmV3IHA7dGhpcy5jPXZvaWQgMCE9PWM/YzpuZXcgcH1mdW5jdGlvbiByYShhLGIpe3guY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJNZXNoXCI7dGhpcy5nZW9tZXRyeT12b2lkIDAhPT1hP2E6bmV3IEU7dGhpcy5tYXRlcmlhbD12b2lkIDAhPT1iP2I6bmV3IEFhKHtjb2xvcjoxNjc3NzIxNSpNYXRoLnJhbmRvbSgpfSk7dGhpcy5kcmF3TW9kZT0wO3RoaXMudXBkYXRlTW9ycGhUYXJnZXRzKCl9ZnVuY3Rpb24gZmcoYSxiLGMsZCl7ZnVuY3Rpb24gZShhLGMpe2IuYnVmZmVycy5jb2xvci5zZXRDbGVhcihhLnIsYS5nLGEuYixjLGQpfXZhciBmPW5ldyBIKDApLGc9MCxoLGssbTtyZXR1cm57Z2V0Q2xlYXJDb2xvcjpmdW5jdGlvbigpe3JldHVybiBmfSxzZXRDbGVhckNvbG9yOmZ1bmN0aW9uKGEsYil7Zi5zZXQoYSk7Zz12b2lkIDAhPT1iP2I6MTtlKGYsZyl9LGdldENsZWFyQWxwaGE6ZnVuY3Rpb24oKXtyZXR1cm4gZ30sc2V0Q2xlYXJBbHBoYTpmdW5jdGlvbihhKXtnPWE7ZShmLFxuICAgIGcpfSxyZW5kZXI6ZnVuY3Rpb24oYixkLHUscil7ZD1kLmJhY2tncm91bmQ7bnVsbD09PWQ/ZShmLGcpOmQmJmQuaXNDb2xvciYmKGUoZCwxKSxyPSEwKTsoYS5hdXRvQ2xlYXJ8fHIpJiZhLmNsZWFyKGEuYXV0b0NsZWFyQ29sb3IsYS5hdXRvQ2xlYXJEZXB0aCxhLmF1dG9DbGVhclN0ZW5jaWwpO2QmJmQuaXNDdWJlVGV4dHVyZT8odm9pZCAwPT09bSYmKG09bmV3IHJhKG5ldyBxYigxLDEsMSksbmV3IEZhKHt1bmlmb3Jtczp0Yi5jdWJlLnVuaWZvcm1zLHZlcnRleFNoYWRlcjp0Yi5jdWJlLnZlcnRleFNoYWRlcixmcmFnbWVudFNoYWRlcjp0Yi5jdWJlLmZyYWdtZW50U2hhZGVyLHNpZGU6MSxkZXB0aFRlc3Q6ITAsZGVwdGhXcml0ZTohMSxmb2c6ITF9KSksbS5nZW9tZXRyeS5yZW1vdmVBdHRyaWJ1dGUoXCJub3JtYWxcIiksbS5nZW9tZXRyeS5yZW1vdmVBdHRyaWJ1dGUoXCJ1dlwiKSxtLm9uQmVmb3JlUmVuZGVyPWZ1bmN0aW9uKGEsYixjKXt0aGlzLm1hdHJpeFdvcmxkLmNvcHlQb3NpdGlvbihjLm1hdHJpeFdvcmxkKX0sXG4gICAgYy51cGRhdGUobS5nZW9tZXRyeSkpLG0ubWF0ZXJpYWwudW5pZm9ybXMudEN1YmUudmFsdWU9ZCxiLnB1c2gobSxtLmdlb21ldHJ5LG0ubWF0ZXJpYWwsMCxudWxsKSk6ZCYmZC5pc1RleHR1cmUmJih2b2lkIDA9PT1oJiYoaD1uZXcgTGIoLTEsMSwxLC0xLDAsMSksaz1uZXcgcmEobmV3IHJiKDIsMiksbmV3IEFhKHtkZXB0aFRlc3Q6ITEsZGVwdGhXcml0ZTohMSxmb2c6ITF9KSksYy51cGRhdGUoay5nZW9tZXRyeSkpLGsubWF0ZXJpYWwubWFwPWQsYS5yZW5kZXJCdWZmZXJEaXJlY3QoaCxudWxsLGsuZ2VvbWV0cnksay5tYXRlcmlhbCxrLG51bGwpKX19fWZ1bmN0aW9uIGdnKGEsYil7cmV0dXJuIGEucmVuZGVyT3JkZXIhPT1iLnJlbmRlck9yZGVyP2EucmVuZGVyT3JkZXItYi5yZW5kZXJPcmRlcjphLnByb2dyYW0mJmIucHJvZ3JhbSYmYS5wcm9ncmFtIT09Yi5wcm9ncmFtP2EucHJvZ3JhbS5pZC1iLnByb2dyYW0uaWQ6YS5tYXRlcmlhbC5pZCE9PWIubWF0ZXJpYWwuaWQ/YS5tYXRlcmlhbC5pZC1cbiAgICBiLm1hdGVyaWFsLmlkOmEueiE9PWIuej9hLnotYi56OmEuaWQtYi5pZH1mdW5jdGlvbiBoZyhhLGIpe3JldHVybiBhLnJlbmRlck9yZGVyIT09Yi5yZW5kZXJPcmRlcj9hLnJlbmRlck9yZGVyLWIucmVuZGVyT3JkZXI6YS56IT09Yi56P2Iuei1hLno6YS5pZC1iLmlkfWZ1bmN0aW9uIGlnKCl7dmFyIGE9W10sYj0wLGM9W10sZD1bXTtyZXR1cm57b3BhcXVlOmMsdHJhbnNwYXJlbnQ6ZCxpbml0OmZ1bmN0aW9uKCl7Yj0wO2MubGVuZ3RoPTA7ZC5sZW5ndGg9MH0scHVzaDpmdW5jdGlvbihlLGYsZyxoLGspe3ZhciBtPWFbYl07dm9pZCAwPT09bT8obT17aWQ6ZS5pZCxvYmplY3Q6ZSxnZW9tZXRyeTpmLG1hdGVyaWFsOmcscHJvZ3JhbTpnLnByb2dyYW0scmVuZGVyT3JkZXI6ZS5yZW5kZXJPcmRlcix6OmgsZ3JvdXA6a30sYVtiXT1tKToobS5pZD1lLmlkLG0ub2JqZWN0PWUsbS5nZW9tZXRyeT1mLG0ubWF0ZXJpYWw9ZyxtLnByb2dyYW09Zy5wcm9ncmFtLG0ucmVuZGVyT3JkZXI9ZS5yZW5kZXJPcmRlcixcbiAgICBtLno9aCxtLmdyb3VwPWspOyghMD09PWcudHJhbnNwYXJlbnQ/ZDpjKS5wdXNoKG0pO2IrK30sc29ydDpmdW5jdGlvbigpezE8Yy5sZW5ndGgmJmMuc29ydChnZyk7MTxkLmxlbmd0aCYmZC5zb3J0KGhnKX19fWZ1bmN0aW9uIGpnKCl7dmFyIGE9e307cmV0dXJue2dldDpmdW5jdGlvbihiLGMpe2I9Yi5pZCtcIixcIitjLmlkO2M9YVtiXTt2b2lkIDA9PT1jJiYoYz1uZXcgaWcsYVtiXT1jKTtyZXR1cm4gY30sZGlzcG9zZTpmdW5jdGlvbigpe2E9e319fX1mdW5jdGlvbiBrZyhhLGIpe3JldHVybiBNYXRoLmFicyhiWzFdKS1NYXRoLmFicyhhWzFdKX1mdW5jdGlvbiBsZyhhKXt2YXIgYj17fSxjPW5ldyBGbG9hdDMyQXJyYXkoOCk7cmV0dXJue3VwZGF0ZTpmdW5jdGlvbihkLGUsZixnKXt2YXIgaD1kLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcyxrPWgubGVuZ3RoO2Q9YltlLmlkXTtpZih2b2lkIDA9PT1kKXtkPVtdO2Zvcih2YXIgbT0wO208azttKyspZFttXT1bbSwwXTtiW2UuaWRdPWR9dmFyIHE9XG4gICAgZi5tb3JwaFRhcmdldHMmJmUubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uO2Y9Zi5tb3JwaE5vcm1hbHMmJmUubW9ycGhBdHRyaWJ1dGVzLm5vcm1hbDtmb3IobT0wO208azttKyspe3ZhciBuPWRbbV07MCE9PW5bMV0mJihxJiZlLnJlbW92ZUF0dHJpYnV0ZShcIm1vcnBoVGFyZ2V0XCIrbSksZiYmZS5yZW1vdmVBdHRyaWJ1dGUoXCJtb3JwaE5vcm1hbFwiK20pKX1mb3IobT0wO208azttKyspbj1kW21dLG5bMF09bSxuWzFdPWhbbV07ZC5zb3J0KGtnKTtmb3IobT0wOzg+bTttKyspe2lmKG49ZFttXSlpZihoPW5bMF0sbj1uWzFdKXtxJiZlLmFkZEF0dHJpYnV0ZShcIm1vcnBoVGFyZ2V0XCIrbSxxW2hdKTtmJiZlLmFkZEF0dHJpYnV0ZShcIm1vcnBoTm9ybWFsXCIrbSxmW2hdKTtjW21dPW47Y29udGludWV9Y1ttXT0wfWcuZ2V0VW5pZm9ybXMoKS5zZXRWYWx1ZShhLFwibW9ycGhUYXJnZXRJbmZsdWVuY2VzXCIsYyl9fX1mdW5jdGlvbiBtZyhhLGIsYyl7dmFyIGQsZSxmO3RoaXMuc2V0TW9kZT1mdW5jdGlvbihhKXtkPVxuICAgIGF9O3RoaXMuc2V0SW5kZXg9ZnVuY3Rpb24oYSl7ZT1hLnR5cGU7Zj1hLmJ5dGVzUGVyRWxlbWVudH07dGhpcy5yZW5kZXI9ZnVuY3Rpb24oYixoKXthLmRyYXdFbGVtZW50cyhkLGgsZSxiKmYpO2MuY2FsbHMrKztjLnZlcnRpY2VzKz1oO2Q9PT1hLlRSSUFOR0xFUz9jLmZhY2VzKz1oLzM6ZD09PWEuUE9JTlRTJiYoYy5wb2ludHMrPWgpfTt0aGlzLnJlbmRlckluc3RhbmNlcz1mdW5jdGlvbihnLGgsayl7dmFyIG09Yi5nZXQoXCJBTkdMRV9pbnN0YW5jZWRfYXJyYXlzXCIpO251bGw9PT1tP2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTEluZGV4ZWRCdWZmZXJSZW5kZXJlcjogdXNpbmcgVEhSRUUuSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnkgYnV0IGhhcmR3YXJlIGRvZXMgbm90IHN1cHBvcnQgZXh0ZW5zaW9uIEFOR0xFX2luc3RhbmNlZF9hcnJheXMuXCIpOihtLmRyYXdFbGVtZW50c0luc3RhbmNlZEFOR0xFKGQsayxlLGgqZixnLm1heEluc3RhbmNlZENvdW50KSxjLmNhbGxzKyssYy52ZXJ0aWNlcys9XG4gICAgaypnLm1heEluc3RhbmNlZENvdW50LGQ9PT1hLlRSSUFOR0xFUz9jLmZhY2VzKz1nLm1heEluc3RhbmNlZENvdW50KmsvMzpkPT09YS5QT0lOVFMmJihjLnBvaW50cys9Zy5tYXhJbnN0YW5jZWRDb3VudCprKSl9fWZ1bmN0aW9uIG5nKGEsYixjKXt2YXIgZDt0aGlzLnNldE1vZGU9ZnVuY3Rpb24oYSl7ZD1hfTt0aGlzLnJlbmRlcj1mdW5jdGlvbihiLGYpe2EuZHJhd0FycmF5cyhkLGIsZik7Yy5jYWxscysrO2MudmVydGljZXMrPWY7ZD09PWEuVFJJQU5HTEVTP2MuZmFjZXMrPWYvMzpkPT09YS5QT0lOVFMmJihjLnBvaW50cys9Zil9O3RoaXMucmVuZGVySW5zdGFuY2VzPWZ1bmN0aW9uKGUsZixnKXt2YXIgaD1iLmdldChcIkFOR0xFX2luc3RhbmNlZF9hcnJheXNcIik7aWYobnVsbD09PWgpY29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMQnVmZmVyUmVuZGVyZXI6IHVzaW5nIFRIUkVFLkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5IGJ1dCBoYXJkd2FyZSBkb2VzIG5vdCBzdXBwb3J0IGV4dGVuc2lvbiBBTkdMRV9pbnN0YW5jZWRfYXJyYXlzLlwiKTtcbiAgICBlbHNle3ZhciBrPWUuYXR0cmlidXRlcy5wb3NpdGlvbjtrLmlzSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGU/KGc9ay5kYXRhLmNvdW50LGguZHJhd0FycmF5c0luc3RhbmNlZEFOR0xFKGQsMCxnLGUubWF4SW5zdGFuY2VkQ291bnQpKTpoLmRyYXdBcnJheXNJbnN0YW5jZWRBTkdMRShkLGYsZyxlLm1heEluc3RhbmNlZENvdW50KTtjLmNhbGxzKys7Yy52ZXJ0aWNlcys9ZyplLm1heEluc3RhbmNlZENvdW50O2Q9PT1hLlRSSUFOR0xFUz9jLmZhY2VzKz1lLm1heEluc3RhbmNlZENvdW50KmcvMzpkPT09YS5QT0lOVFMmJihjLnBvaW50cys9ZS5tYXhJbnN0YW5jZWRDb3VudCpnKX19fWZ1bmN0aW9uIG9nKGEsYixjKXtmdW5jdGlvbiBkKGEpe2E9YS50YXJnZXQ7dmFyIGg9ZVthLmlkXTtudWxsIT09aC5pbmRleCYmYi5yZW1vdmUoaC5pbmRleCk7Zm9yKHZhciBnIGluIGguYXR0cmlidXRlcyliLnJlbW92ZShoLmF0dHJpYnV0ZXNbZ10pO2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixcbiAgICBkKTtkZWxldGUgZVthLmlkXTtpZihnPWZbYS5pZF0pYi5yZW1vdmUoZyksZGVsZXRlIGZbYS5pZF07aWYoZz1mW2guaWRdKWIucmVtb3ZlKGcpLGRlbGV0ZSBmW2guaWRdO2MuZ2VvbWV0cmllcy0tfXZhciBlPXt9LGY9e307cmV0dXJue2dldDpmdW5jdGlvbihhLGIpe3ZhciBmPWVbYi5pZF07aWYoZilyZXR1cm4gZjtiLmFkZEV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsZCk7Yi5pc0J1ZmZlckdlb21ldHJ5P2Y9YjpiLmlzR2VvbWV0cnkmJih2b2lkIDA9PT1iLl9idWZmZXJHZW9tZXRyeSYmKGIuX2J1ZmZlckdlb21ldHJ5PShuZXcgRSkuc2V0RnJvbU9iamVjdChhKSksZj1iLl9idWZmZXJHZW9tZXRyeSk7ZVtiLmlkXT1mO2MuZ2VvbWV0cmllcysrO3JldHVybiBmfSx1cGRhdGU6ZnVuY3Rpb24oYyl7dmFyIGQ9Yy5pbmRleCxlPWMuYXR0cmlidXRlcztudWxsIT09ZCYmYi51cGRhdGUoZCxhLkVMRU1FTlRfQVJSQVlfQlVGRkVSKTtmb3IodmFyIGYgaW4gZSliLnVwZGF0ZShlW2ZdLFxuICAgIGEuQVJSQVlfQlVGRkVSKTtjPWMubW9ycGhBdHRyaWJ1dGVzO2ZvcihmIGluIGMpZm9yKHZhciBkPWNbZl0sZT0wLGc9ZC5sZW5ndGg7ZTxnO2UrKyliLnVwZGF0ZShkW2VdLGEuQVJSQVlfQlVGRkVSKX0sZ2V0V2lyZWZyYW1lQXR0cmlidXRlOmZ1bmN0aW9uKGMpe3ZhciBkPWZbYy5pZF07aWYoZClyZXR1cm4gZDtkPVtdO3ZhciBlPWMuaW5kZXg7dmFyIGc9Yy5hdHRyaWJ1dGVzO2lmKG51bGwhPT1lKXt2YXIgcT1lLmFycmF5O2Zvcih2YXIgbj0wLHU9cS5sZW5ndGg7bjx1O24rPTMpe3ZhciByPXFbbiswXTtnPXFbbisxXTtlPXFbbisyXTtkLnB1c2gocixnLGcsZSxlLHIpfX1lbHNlIGZvcihxPWcucG9zaXRpb24uYXJyYXksbj0wLHU9cS5sZW5ndGgvMy0xO248dTtuKz0zKXI9biswLGc9bisxLGU9bisyLGQucHVzaChyLGcsZyxlLGUscik7ZD1uZXcgKDY1NTM1PFhkKGQpP3BiOm9iKShkLDEpO2IudXBkYXRlKGQsYS5FTEVNRU5UX0FSUkFZX0JVRkZFUik7cmV0dXJuIGZbYy5pZF09XG4gICAgZH19fWZ1bmN0aW9uIHBnKCl7dmFyIGE9e307cmV0dXJue2dldDpmdW5jdGlvbihiKXtpZih2b2lkIDAhPT1hW2IuaWRdKXJldHVybiBhW2IuaWRdO3N3aXRjaChiLnR5cGUpe2Nhc2UgXCJEaXJlY3Rpb25hbExpZ2h0XCI6dmFyIGM9e2RpcmVjdGlvbjpuZXcgcCxjb2xvcjpuZXcgSCxzaGFkb3c6ITEsc2hhZG93QmlhczowLHNoYWRvd1JhZGl1czoxLHNoYWRvd01hcFNpemU6bmV3IER9O2JyZWFrO2Nhc2UgXCJTcG90TGlnaHRcIjpjPXtwb3NpdGlvbjpuZXcgcCxkaXJlY3Rpb246bmV3IHAsY29sb3I6bmV3IEgsZGlzdGFuY2U6MCxjb25lQ29zOjAscGVudW1icmFDb3M6MCxkZWNheTowLHNoYWRvdzohMSxzaGFkb3dCaWFzOjAsc2hhZG93UmFkaXVzOjEsc2hhZG93TWFwU2l6ZTpuZXcgRH07YnJlYWs7Y2FzZSBcIlBvaW50TGlnaHRcIjpjPXtwb3NpdGlvbjpuZXcgcCxjb2xvcjpuZXcgSCxkaXN0YW5jZTowLGRlY2F5OjAsc2hhZG93OiExLHNoYWRvd0JpYXM6MCxzaGFkb3dSYWRpdXM6MSxzaGFkb3dNYXBTaXplOm5ldyBELFxuICAgIHNoYWRvd0NhbWVyYU5lYXI6MSxzaGFkb3dDYW1lcmFGYXI6MUUzfTticmVhaztjYXNlIFwiSGVtaXNwaGVyZUxpZ2h0XCI6Yz17ZGlyZWN0aW9uOm5ldyBwLHNreUNvbG9yOm5ldyBILGdyb3VuZENvbG9yOm5ldyBIfTticmVhaztjYXNlIFwiUmVjdEFyZWFMaWdodFwiOmM9e2NvbG9yOm5ldyBILHBvc2l0aW9uOm5ldyBwLGhhbGZXaWR0aDpuZXcgcCxoYWxmSGVpZ2h0Om5ldyBwfX1yZXR1cm4gYVtiLmlkXT1jfX19ZnVuY3Rpb24gcWcoKXt2YXIgYT1uZXcgcGcsYj17aGFzaDpcIlwiLGFtYmllbnQ6WzAsMCwwXSxkaXJlY3Rpb25hbDpbXSxkaXJlY3Rpb25hbFNoYWRvd01hcDpbXSxkaXJlY3Rpb25hbFNoYWRvd01hdHJpeDpbXSxzcG90OltdLHNwb3RTaGFkb3dNYXA6W10sc3BvdFNoYWRvd01hdHJpeDpbXSxyZWN0QXJlYTpbXSxwb2ludDpbXSxwb2ludFNoYWRvd01hcDpbXSxwb2ludFNoYWRvd01hdHJpeDpbXSxoZW1pOltdfSxjPW5ldyBwLGQ9bmV3IE8sZT1uZXcgTztyZXR1cm57c2V0dXA6ZnVuY3Rpb24oZixcbiAgICBnLGgpe2Zvcih2YXIgayxtPTAscT0wLG49MCx1PTAscj0wLHQ9MCxsPTAsdz0wLHA9aC5tYXRyaXhXb3JsZEludmVyc2UseT0wLEk9Zi5sZW5ndGg7eTxJO3krKyl7dmFyIEE9Zlt5XTtrPUEuY29sb3I7dmFyIEo9QS5pbnRlbnNpdHksSGE9QS5kaXN0YW5jZSxEYT1BLnNoYWRvdyYmQS5zaGFkb3cubWFwP0Euc2hhZG93Lm1hcC50ZXh0dXJlOm51bGw7aWYoQS5pc0FtYmllbnRMaWdodCltKz1rLnIqSixxKz1rLmcqSixuKz1rLmIqSjtlbHNlIGlmKEEuaXNEaXJlY3Rpb25hbExpZ2h0KXtoPWEuZ2V0KEEpO2guY29sb3IuY29weShBLmNvbG9yKS5tdWx0aXBseVNjYWxhcihBLmludGVuc2l0eSk7aC5kaXJlY3Rpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKEEubWF0cml4V29ybGQpO2Muc2V0RnJvbU1hdHJpeFBvc2l0aW9uKEEudGFyZ2V0Lm1hdHJpeFdvcmxkKTtoLmRpcmVjdGlvbi5zdWIoYyk7aC5kaXJlY3Rpb24udHJhbnNmb3JtRGlyZWN0aW9uKHApO2lmKGguc2hhZG93PUEuY2FzdFNoYWRvdylrPVxuICAgIEEuc2hhZG93LGguc2hhZG93Qmlhcz1rLmJpYXMsaC5zaGFkb3dSYWRpdXM9ay5yYWRpdXMsaC5zaGFkb3dNYXBTaXplPWsubWFwU2l6ZTtiLmRpcmVjdGlvbmFsU2hhZG93TWFwW3VdPURhO2IuZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXhbdV09QS5zaGFkb3cubWF0cml4O2IuZGlyZWN0aW9uYWxbdV09aDt1Kyt9ZWxzZSBpZihBLmlzU3BvdExpZ2h0KXtoPWEuZ2V0KEEpO2gucG9zaXRpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKEEubWF0cml4V29ybGQpO2gucG9zaXRpb24uYXBwbHlNYXRyaXg0KHApO2guY29sb3IuY29weShrKS5tdWx0aXBseVNjYWxhcihKKTtoLmRpc3RhbmNlPUhhO2guZGlyZWN0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbihBLm1hdHJpeFdvcmxkKTtjLnNldEZyb21NYXRyaXhQb3NpdGlvbihBLnRhcmdldC5tYXRyaXhXb3JsZCk7aC5kaXJlY3Rpb24uc3ViKGMpO2guZGlyZWN0aW9uLnRyYW5zZm9ybURpcmVjdGlvbihwKTtoLmNvbmVDb3M9TWF0aC5jb3MoQS5hbmdsZSk7XG4gICAgaC5wZW51bWJyYUNvcz1NYXRoLmNvcyhBLmFuZ2xlKigxLUEucGVudW1icmEpKTtoLmRlY2F5PTA9PT1BLmRpc3RhbmNlPzA6QS5kZWNheTtpZihoLnNoYWRvdz1BLmNhc3RTaGFkb3cpaz1BLnNoYWRvdyxoLnNoYWRvd0JpYXM9ay5iaWFzLGguc2hhZG93UmFkaXVzPWsucmFkaXVzLGguc2hhZG93TWFwU2l6ZT1rLm1hcFNpemU7Yi5zcG90U2hhZG93TWFwW3RdPURhO2Iuc3BvdFNoYWRvd01hdHJpeFt0XT1BLnNoYWRvdy5tYXRyaXg7Yi5zcG90W3RdPWg7dCsrfWVsc2UgaWYoQS5pc1JlY3RBcmVhTGlnaHQpaD1hLmdldChBKSxoLmNvbG9yLmNvcHkoaykubXVsdGlwbHlTY2FsYXIoSi8oQS53aWR0aCpBLmhlaWdodCkpLGgucG9zaXRpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKEEubWF0cml4V29ybGQpLGgucG9zaXRpb24uYXBwbHlNYXRyaXg0KHApLGUuaWRlbnRpdHkoKSxkLmNvcHkoQS5tYXRyaXhXb3JsZCksZC5wcmVtdWx0aXBseShwKSxlLmV4dHJhY3RSb3RhdGlvbihkKSxoLmhhbGZXaWR0aC5zZXQoLjUqXG4gICAgQS53aWR0aCwwLDApLGguaGFsZkhlaWdodC5zZXQoMCwuNSpBLmhlaWdodCwwKSxoLmhhbGZXaWR0aC5hcHBseU1hdHJpeDQoZSksaC5oYWxmSGVpZ2h0LmFwcGx5TWF0cml4NChlKSxiLnJlY3RBcmVhW2xdPWgsbCsrO2Vsc2UgaWYoQS5pc1BvaW50TGlnaHQpe2g9YS5nZXQoQSk7aC5wb3NpdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24oQS5tYXRyaXhXb3JsZCk7aC5wb3NpdGlvbi5hcHBseU1hdHJpeDQocCk7aC5jb2xvci5jb3B5KEEuY29sb3IpLm11bHRpcGx5U2NhbGFyKEEuaW50ZW5zaXR5KTtoLmRpc3RhbmNlPUEuZGlzdGFuY2U7aC5kZWNheT0wPT09QS5kaXN0YW5jZT8wOkEuZGVjYXk7aWYoaC5zaGFkb3c9QS5jYXN0U2hhZG93KWs9QS5zaGFkb3csaC5zaGFkb3dCaWFzPWsuYmlhcyxoLnNoYWRvd1JhZGl1cz1rLnJhZGl1cyxoLnNoYWRvd01hcFNpemU9ay5tYXBTaXplLGguc2hhZG93Q2FtZXJhTmVhcj1rLmNhbWVyYS5uZWFyLGguc2hhZG93Q2FtZXJhRmFyPWsuY2FtZXJhLmZhcjtcbiAgICBiLnBvaW50U2hhZG93TWFwW3JdPURhO2IucG9pbnRTaGFkb3dNYXRyaXhbcl09QS5zaGFkb3cubWF0cml4O2IucG9pbnRbcl09aDtyKyt9ZWxzZSBBLmlzSGVtaXNwaGVyZUxpZ2h0JiYoaD1hLmdldChBKSxoLmRpcmVjdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24oQS5tYXRyaXhXb3JsZCksaC5kaXJlY3Rpb24udHJhbnNmb3JtRGlyZWN0aW9uKHApLGguZGlyZWN0aW9uLm5vcm1hbGl6ZSgpLGguc2t5Q29sb3IuY29weShBLmNvbG9yKS5tdWx0aXBseVNjYWxhcihKKSxoLmdyb3VuZENvbG9yLmNvcHkoQS5ncm91bmRDb2xvcikubXVsdGlwbHlTY2FsYXIoSiksYi5oZW1pW3ddPWgsdysrKX1iLmFtYmllbnRbMF09bTtiLmFtYmllbnRbMV09cTtiLmFtYmllbnRbMl09bjtiLmRpcmVjdGlvbmFsLmxlbmd0aD11O2Iuc3BvdC5sZW5ndGg9dDtiLnJlY3RBcmVhLmxlbmd0aD1sO2IucG9pbnQubGVuZ3RoPXI7Yi5oZW1pLmxlbmd0aD13O2IuaGFzaD11K1wiLFwiK3IrXCIsXCIrdCtcIixcIitsK1wiLFwiK1xuICAgIHcrXCIsXCIrZy5sZW5ndGh9LHN0YXRlOmJ9fWZ1bmN0aW9uIHJnKGEsYil7dmFyIGM9e307cmV0dXJue3VwZGF0ZTpmdW5jdGlvbihkKXt2YXIgZT1iLmZyYW1lLGY9ZC5nZW9tZXRyeSxnPWEuZ2V0KGQsZik7Y1tnLmlkXSE9PWUmJihmLmlzR2VvbWV0cnkmJmcudXBkYXRlRnJvbU9iamVjdChkKSxhLnVwZGF0ZShnKSxjW2cuaWRdPWUpO3JldHVybiBnfSxjbGVhcjpmdW5jdGlvbigpe2M9e319fX1mdW5jdGlvbiBzZyhhKXthPWEuc3BsaXQoXCJcXG5cIik7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspYVtiXT1iKzErXCI6IFwiK2FbYl07cmV0dXJuIGEuam9pbihcIlxcblwiKX1mdW5jdGlvbiBXZShhLGIsYyl7dmFyIGQ9YS5jcmVhdGVTaGFkZXIoYik7YS5zaGFkZXJTb3VyY2UoZCxjKTthLmNvbXBpbGVTaGFkZXIoZCk7ITE9PT1hLmdldFNoYWRlclBhcmFtZXRlcihkLGEuQ09NUElMRV9TVEFUVVMpJiZjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xTaGFkZXI6IFNoYWRlciBjb3VsZG4ndCBjb21waWxlLlwiKTtcbiAgICBcIlwiIT09YS5nZXRTaGFkZXJJbmZvTG9nKGQpJiZjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFNoYWRlcjogZ2wuZ2V0U2hhZGVySW5mb0xvZygpXCIsYj09PWEuVkVSVEVYX1NIQURFUj9cInZlcnRleFwiOlwiZnJhZ21lbnRcIixhLmdldFNoYWRlckluZm9Mb2coZCksc2coYykpO3JldHVybiBkfWZ1bmN0aW9uIFhlKGEpe3N3aXRjaChhKXtjYXNlIDNFMzpyZXR1cm5bXCJMaW5lYXJcIixcIiggdmFsdWUgKVwiXTtjYXNlIDMwMDE6cmV0dXJuW1wic1JHQlwiLFwiKCB2YWx1ZSApXCJdO2Nhc2UgMzAwMjpyZXR1cm5bXCJSR0JFXCIsXCIoIHZhbHVlIClcIl07Y2FzZSAzMDA0OnJldHVybltcIlJHQk1cIixcIiggdmFsdWUsIDcuMCApXCJdO2Nhc2UgMzAwNTpyZXR1cm5bXCJSR0JNXCIsXCIoIHZhbHVlLCAxNi4wIClcIl07Y2FzZSAzMDA2OnJldHVybltcIlJHQkRcIixcIiggdmFsdWUsIDI1Ni4wIClcIl07Y2FzZSAzMDA3OnJldHVybltcIkdhbW1hXCIsXCIoIHZhbHVlLCBmbG9hdCggR0FNTUFfRkFDVE9SICkgKVwiXTtkZWZhdWx0OnRocm93IEVycm9yKFwidW5zdXBwb3J0ZWQgZW5jb2Rpbmc6IFwiK1xuICAgIGEpO319ZnVuY3Rpb24gWWQoYSxiKXtiPVhlKGIpO3JldHVyblwidmVjNCBcIithK1wiKCB2ZWM0IHZhbHVlICkgeyByZXR1cm4gXCIrYlswXStcIlRvTGluZWFyXCIrYlsxXStcIjsgfVwifWZ1bmN0aW9uIHRnKGEsYil7Yj1YZShiKTtyZXR1cm5cInZlYzQgXCIrYStcIiggdmVjNCB2YWx1ZSApIHsgcmV0dXJuIExpbmVhclRvXCIrYlswXStiWzFdK1wiOyB9XCJ9ZnVuY3Rpb24gdWcoYSxiKXtzd2l0Y2goYil7Y2FzZSAxOmI9XCJMaW5lYXJcIjticmVhaztjYXNlIDI6Yj1cIlJlaW5oYXJkXCI7YnJlYWs7Y2FzZSAzOmI9XCJVbmNoYXJ0ZWQyXCI7YnJlYWs7Y2FzZSA0OmI9XCJPcHRpbWl6ZWRDaW5lb25cIjticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwidW5zdXBwb3J0ZWQgdG9uZU1hcHBpbmc6IFwiK2IpO31yZXR1cm5cInZlYzMgXCIrYStcIiggdmVjMyBjb2xvciApIHsgcmV0dXJuIFwiK2IrXCJUb25lTWFwcGluZyggY29sb3IgKTsgfVwifWZ1bmN0aW9uIHZnKGEsYixjKXthPWF8fHt9O3JldHVyblthLmRlcml2YXRpdmVzfHxcbiAgICBiLmVudk1hcEN1YmVVVnx8Yi5idW1wTWFwfHxiLm5vcm1hbE1hcHx8Yi5mbGF0U2hhZGluZz9cIiNleHRlbnNpb24gR0xfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzIDogZW5hYmxlXCI6XCJcIiwoYS5mcmFnRGVwdGh8fGIubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcikmJmMuZ2V0KFwiRVhUX2ZyYWdfZGVwdGhcIik/XCIjZXh0ZW5zaW9uIEdMX0VYVF9mcmFnX2RlcHRoIDogZW5hYmxlXCI6XCJcIixhLmRyYXdCdWZmZXJzJiZjLmdldChcIldFQkdMX2RyYXdfYnVmZmVyc1wiKT9cIiNleHRlbnNpb24gR0xfRVhUX2RyYXdfYnVmZmVycyA6IHJlcXVpcmVcIjpcIlwiLChhLnNoYWRlclRleHR1cmVMT0R8fGIuZW52TWFwKSYmYy5nZXQoXCJFWFRfc2hhZGVyX3RleHR1cmVfbG9kXCIpP1wiI2V4dGVuc2lvbiBHTF9FWFRfc2hhZGVyX3RleHR1cmVfbG9kIDogZW5hYmxlXCI6XCJcIl0uZmlsdGVyKEJjKS5qb2luKFwiXFxuXCIpfWZ1bmN0aW9uIHdnKGEpe3ZhciBiPVtdLGM7Zm9yKGMgaW4gYSl7dmFyIGQ9YVtjXTshMSE9PWQmJmIucHVzaChcIiNkZWZpbmUgXCIrXG4gICAgYytcIiBcIitkKX1yZXR1cm4gYi5qb2luKFwiXFxuXCIpfWZ1bmN0aW9uIEJjKGEpe3JldHVyblwiXCIhPT1hfWZ1bmN0aW9uIFllKGEsYil7cmV0dXJuIGEucmVwbGFjZSgvTlVNX0RJUl9MSUdIVFMvZyxiLm51bURpckxpZ2h0cykucmVwbGFjZSgvTlVNX1NQT1RfTElHSFRTL2csYi5udW1TcG90TGlnaHRzKS5yZXBsYWNlKC9OVU1fUkVDVF9BUkVBX0xJR0hUUy9nLGIubnVtUmVjdEFyZWFMaWdodHMpLnJlcGxhY2UoL05VTV9QT0lOVF9MSUdIVFMvZyxiLm51bVBvaW50TGlnaHRzKS5yZXBsYWNlKC9OVU1fSEVNSV9MSUdIVFMvZyxiLm51bUhlbWlMaWdodHMpfWZ1bmN0aW9uIFpkKGEpe3JldHVybiBhLnJlcGxhY2UoL15bIFxcdF0qI2luY2x1ZGUgKzwoW1xcd1xcZC5dKyk+L2dtLGZ1bmN0aW9uKGEsYyl7YT1SW2NdO2lmKHZvaWQgMD09PWEpdGhyb3cgRXJyb3IoXCJDYW4gbm90IHJlc29sdmUgI2luY2x1ZGUgPFwiK2MrXCI+XCIpO3JldHVybiBaZChhKX0pfWZ1bmN0aW9uIFplKGEpe3JldHVybiBhLnJlcGxhY2UoL2ZvciBcXCggaW50IGkgXFw9IChcXGQrKVxcOyBpIDwgKFxcZCspXFw7IGkgXFwrXFwrIFxcKSBcXHsoW1xcc1xcU10rPykoPz1cXH0pXFx9L2csXG4gICAgZnVuY3Rpb24oYSxjLGQsZSl7YT1cIlwiO2ZvcihjPXBhcnNlSW50KGMpO2M8cGFyc2VJbnQoZCk7YysrKWErPWUucmVwbGFjZSgvXFxbIGkgXFxdL2csXCJbIFwiK2MrXCIgXVwiKTtyZXR1cm4gYX0pfWZ1bmN0aW9uIHhnKGEsYixjLGQsZSxmKXt2YXIgZz1hLmNvbnRleHQsaD1kLmRlZmluZXMsaz1lLnZlcnRleFNoYWRlcixtPWUuZnJhZ21lbnRTaGFkZXIscT1cIlNIQURPV01BUF9UWVBFX0JBU0lDXCI7MT09PWYuc2hhZG93TWFwVHlwZT9xPVwiU0hBRE9XTUFQX1RZUEVfUENGXCI6Mj09PWYuc2hhZG93TWFwVHlwZSYmKHE9XCJTSEFET1dNQVBfVFlQRV9QQ0ZfU09GVFwiKTt2YXIgbj1cIkVOVk1BUF9UWVBFX0NVQkVcIix1PVwiRU5WTUFQX01PREVfUkVGTEVDVElPTlwiLHI9XCJFTlZNQVBfQkxFTkRJTkdfTVVMVElQTFlcIjtpZihmLmVudk1hcCl7c3dpdGNoKGQuZW52TWFwLm1hcHBpbmcpe2Nhc2UgMzAxOmNhc2UgMzAyOm49XCJFTlZNQVBfVFlQRV9DVUJFXCI7YnJlYWs7Y2FzZSAzMDY6Y2FzZSAzMDc6bj1cIkVOVk1BUF9UWVBFX0NVQkVfVVZcIjtcbiAgICBicmVhaztjYXNlIDMwMzpjYXNlIDMwNDpuPVwiRU5WTUFQX1RZUEVfRVFVSVJFQ1wiO2JyZWFrO2Nhc2UgMzA1Om49XCJFTlZNQVBfVFlQRV9TUEhFUkVcIn1zd2l0Y2goZC5lbnZNYXAubWFwcGluZyl7Y2FzZSAzMDI6Y2FzZSAzMDQ6dT1cIkVOVk1BUF9NT0RFX1JFRlJBQ1RJT05cIn1zd2l0Y2goZC5jb21iaW5lKXtjYXNlIDA6cj1cIkVOVk1BUF9CTEVORElOR19NVUxUSVBMWVwiO2JyZWFrO2Nhc2UgMTpyPVwiRU5WTUFQX0JMRU5ESU5HX01JWFwiO2JyZWFrO2Nhc2UgMjpyPVwiRU5WTUFQX0JMRU5ESU5HX0FERFwifX12YXIgdD0wPGEuZ2FtbWFGYWN0b3I/YS5nYW1tYUZhY3RvcjoxLGw9dmcoZC5leHRlbnNpb25zLGYsYikscD13ZyhoKSx6PWcuY3JlYXRlUHJvZ3JhbSgpO2QuaXNSYXdTaGFkZXJNYXRlcmlhbD8oaD1bcF0uZmlsdGVyKEJjKS5qb2luKFwiXFxuXCIpLDA8aC5sZW5ndGgmJihoKz1cIlxcblwiKSxiPVtsLHBdLmZpbHRlcihCYykuam9pbihcIlxcblwiKSwwPGIubGVuZ3RoJiYoYis9XCJcXG5cIikpOihoPVxuICAgIFtcInByZWNpc2lvbiBcIitmLnByZWNpc2lvbitcIiBmbG9hdDtcIixcInByZWNpc2lvbiBcIitmLnByZWNpc2lvbitcIiBpbnQ7XCIsXCIjZGVmaW5lIFNIQURFUl9OQU1FIFwiK2UubmFtZSxwLGYuc3VwcG9ydHNWZXJ0ZXhUZXh0dXJlcz9cIiNkZWZpbmUgVkVSVEVYX1RFWFRVUkVTXCI6XCJcIixcIiNkZWZpbmUgR0FNTUFfRkFDVE9SIFwiK3QsXCIjZGVmaW5lIE1BWF9CT05FUyBcIitmLm1heEJvbmVzLGYudXNlRm9nJiZmLmZvZz9cIiNkZWZpbmUgVVNFX0ZPR1wiOlwiXCIsZi51c2VGb2cmJmYuZm9nRXhwP1wiI2RlZmluZSBGT0dfRVhQMlwiOlwiXCIsZi5tYXA/XCIjZGVmaW5lIFVTRV9NQVBcIjpcIlwiLGYuZW52TWFwP1wiI2RlZmluZSBVU0VfRU5WTUFQXCI6XCJcIixmLmVudk1hcD9cIiNkZWZpbmUgXCIrdTpcIlwiLGYubGlnaHRNYXA/XCIjZGVmaW5lIFVTRV9MSUdIVE1BUFwiOlwiXCIsZi5hb01hcD9cIiNkZWZpbmUgVVNFX0FPTUFQXCI6XCJcIixmLmVtaXNzaXZlTWFwP1wiI2RlZmluZSBVU0VfRU1JU1NJVkVNQVBcIjpcIlwiLGYuYnVtcE1hcD9cIiNkZWZpbmUgVVNFX0JVTVBNQVBcIjpcbiAgICBcIlwiLGYubm9ybWFsTWFwP1wiI2RlZmluZSBVU0VfTk9STUFMTUFQXCI6XCJcIixmLmRpc3BsYWNlbWVudE1hcCYmZi5zdXBwb3J0c1ZlcnRleFRleHR1cmVzP1wiI2RlZmluZSBVU0VfRElTUExBQ0VNRU5UTUFQXCI6XCJcIixmLnNwZWN1bGFyTWFwP1wiI2RlZmluZSBVU0VfU1BFQ1VMQVJNQVBcIjpcIlwiLGYucm91Z2huZXNzTWFwP1wiI2RlZmluZSBVU0VfUk9VR0hORVNTTUFQXCI6XCJcIixmLm1ldGFsbmVzc01hcD9cIiNkZWZpbmUgVVNFX01FVEFMTkVTU01BUFwiOlwiXCIsZi5hbHBoYU1hcD9cIiNkZWZpbmUgVVNFX0FMUEhBTUFQXCI6XCJcIixmLnZlcnRleENvbG9ycz9cIiNkZWZpbmUgVVNFX0NPTE9SXCI6XCJcIixmLmZsYXRTaGFkaW5nP1wiI2RlZmluZSBGTEFUX1NIQURFRFwiOlwiXCIsZi5za2lubmluZz9cIiNkZWZpbmUgVVNFX1NLSU5OSU5HXCI6XCJcIixmLnVzZVZlcnRleFRleHR1cmU/XCIjZGVmaW5lIEJPTkVfVEVYVFVSRVwiOlwiXCIsZi5tb3JwaFRhcmdldHM/XCIjZGVmaW5lIFVTRV9NT1JQSFRBUkdFVFNcIjpcIlwiLGYubW9ycGhOb3JtYWxzJiZcbiAgICAhMT09PWYuZmxhdFNoYWRpbmc/XCIjZGVmaW5lIFVTRV9NT1JQSE5PUk1BTFNcIjpcIlwiLGYuZG91YmxlU2lkZWQ/XCIjZGVmaW5lIERPVUJMRV9TSURFRFwiOlwiXCIsZi5mbGlwU2lkZWQ/XCIjZGVmaW5lIEZMSVBfU0lERURcIjpcIlwiLFwiI2RlZmluZSBOVU1fQ0xJUFBJTkdfUExBTkVTIFwiK2YubnVtQ2xpcHBpbmdQbGFuZXMsZi5zaGFkb3dNYXBFbmFibGVkP1wiI2RlZmluZSBVU0VfU0hBRE9XTUFQXCI6XCJcIixmLnNoYWRvd01hcEVuYWJsZWQ/XCIjZGVmaW5lIFwiK3E6XCJcIixmLnNpemVBdHRlbnVhdGlvbj9cIiNkZWZpbmUgVVNFX1NJWkVBVFRFTlVBVElPTlwiOlwiXCIsZi5sb2dhcml0aG1pY0RlcHRoQnVmZmVyP1wiI2RlZmluZSBVU0VfTE9HREVQVEhCVUZcIjpcIlwiLGYubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlciYmYi5nZXQoXCJFWFRfZnJhZ19kZXB0aFwiKT9cIiNkZWZpbmUgVVNFX0xPR0RFUFRIQlVGX0VYVFwiOlwiXCIsXCJ1bmlmb3JtIG1hdDQgbW9kZWxNYXRyaXg7XCIsXCJ1bmlmb3JtIG1hdDQgbW9kZWxWaWV3TWF0cml4O1wiLFxuICAgIFwidW5pZm9ybSBtYXQ0IHByb2plY3Rpb25NYXRyaXg7XCIsXCJ1bmlmb3JtIG1hdDQgdmlld01hdHJpeDtcIixcInVuaWZvcm0gbWF0MyBub3JtYWxNYXRyaXg7XCIsXCJ1bmlmb3JtIHZlYzMgY2FtZXJhUG9zaXRpb247XCIsXCJhdHRyaWJ1dGUgdmVjMyBwb3NpdGlvbjtcIixcImF0dHJpYnV0ZSB2ZWMzIG5vcm1hbDtcIixcImF0dHJpYnV0ZSB2ZWMyIHV2O1wiLFwiI2lmZGVmIFVTRV9DT0xPUlwiLFwiXFx0YXR0cmlidXRlIHZlYzMgY29sb3I7XCIsXCIjZW5kaWZcIixcIiNpZmRlZiBVU0VfTU9SUEhUQVJHRVRTXCIsXCJcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDA7XCIsXCJcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDE7XCIsXCJcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDI7XCIsXCJcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDM7XCIsXCJcXHQjaWZkZWYgVVNFX01PUlBITk9STUFMU1wiLFwiXFx0XFx0YXR0cmlidXRlIHZlYzMgbW9ycGhOb3JtYWwwO1wiLFwiXFx0XFx0YXR0cmlidXRlIHZlYzMgbW9ycGhOb3JtYWwxO1wiLFxuICAgIFwiXFx0XFx0YXR0cmlidXRlIHZlYzMgbW9ycGhOb3JtYWwyO1wiLFwiXFx0XFx0YXR0cmlidXRlIHZlYzMgbW9ycGhOb3JtYWwzO1wiLFwiXFx0I2Vsc2VcIixcIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0NDtcIixcIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0NTtcIixcIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0NjtcIixcIlxcdFxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0NztcIixcIlxcdCNlbmRpZlwiLFwiI2VuZGlmXCIsXCIjaWZkZWYgVVNFX1NLSU5OSU5HXCIsXCJcXHRhdHRyaWJ1dGUgdmVjNCBza2luSW5kZXg7XCIsXCJcXHRhdHRyaWJ1dGUgdmVjNCBza2luV2VpZ2h0O1wiLFwiI2VuZGlmXCIsXCJcXG5cIl0uZmlsdGVyKEJjKS5qb2luKFwiXFxuXCIpLGI9W2wsXCJwcmVjaXNpb24gXCIrZi5wcmVjaXNpb24rXCIgZmxvYXQ7XCIsXCJwcmVjaXNpb24gXCIrZi5wcmVjaXNpb24rXCIgaW50O1wiLFwiI2RlZmluZSBTSEFERVJfTkFNRSBcIitlLm5hbWUscCxmLmFscGhhVGVzdD9cIiNkZWZpbmUgQUxQSEFURVNUIFwiK2YuYWxwaGFUZXN0OlxuICAgIFwiXCIsXCIjZGVmaW5lIEdBTU1BX0ZBQ1RPUiBcIit0LGYudXNlRm9nJiZmLmZvZz9cIiNkZWZpbmUgVVNFX0ZPR1wiOlwiXCIsZi51c2VGb2cmJmYuZm9nRXhwP1wiI2RlZmluZSBGT0dfRVhQMlwiOlwiXCIsZi5tYXA/XCIjZGVmaW5lIFVTRV9NQVBcIjpcIlwiLGYuZW52TWFwP1wiI2RlZmluZSBVU0VfRU5WTUFQXCI6XCJcIixmLmVudk1hcD9cIiNkZWZpbmUgXCIrbjpcIlwiLGYuZW52TWFwP1wiI2RlZmluZSBcIit1OlwiXCIsZi5lbnZNYXA/XCIjZGVmaW5lIFwiK3I6XCJcIixmLmxpZ2h0TWFwP1wiI2RlZmluZSBVU0VfTElHSFRNQVBcIjpcIlwiLGYuYW9NYXA/XCIjZGVmaW5lIFVTRV9BT01BUFwiOlwiXCIsZi5lbWlzc2l2ZU1hcD9cIiNkZWZpbmUgVVNFX0VNSVNTSVZFTUFQXCI6XCJcIixmLmJ1bXBNYXA/XCIjZGVmaW5lIFVTRV9CVU1QTUFQXCI6XCJcIixmLm5vcm1hbE1hcD9cIiNkZWZpbmUgVVNFX05PUk1BTE1BUFwiOlwiXCIsZi5zcGVjdWxhck1hcD9cIiNkZWZpbmUgVVNFX1NQRUNVTEFSTUFQXCI6XCJcIixmLnJvdWdobmVzc01hcD9cIiNkZWZpbmUgVVNFX1JPVUdITkVTU01BUFwiOlxuICAgIFwiXCIsZi5tZXRhbG5lc3NNYXA/XCIjZGVmaW5lIFVTRV9NRVRBTE5FU1NNQVBcIjpcIlwiLGYuYWxwaGFNYXA/XCIjZGVmaW5lIFVTRV9BTFBIQU1BUFwiOlwiXCIsZi52ZXJ0ZXhDb2xvcnM/XCIjZGVmaW5lIFVTRV9DT0xPUlwiOlwiXCIsZi5ncmFkaWVudE1hcD9cIiNkZWZpbmUgVVNFX0dSQURJRU5UTUFQXCI6XCJcIixmLmZsYXRTaGFkaW5nP1wiI2RlZmluZSBGTEFUX1NIQURFRFwiOlwiXCIsZi5kb3VibGVTaWRlZD9cIiNkZWZpbmUgRE9VQkxFX1NJREVEXCI6XCJcIixmLmZsaXBTaWRlZD9cIiNkZWZpbmUgRkxJUF9TSURFRFwiOlwiXCIsXCIjZGVmaW5lIE5VTV9DTElQUElOR19QTEFORVMgXCIrZi5udW1DbGlwcGluZ1BsYW5lcyxcIiNkZWZpbmUgVU5JT05fQ0xJUFBJTkdfUExBTkVTIFwiKyhmLm51bUNsaXBwaW5nUGxhbmVzLWYubnVtQ2xpcEludGVyc2VjdGlvbiksZi5zaGFkb3dNYXBFbmFibGVkP1wiI2RlZmluZSBVU0VfU0hBRE9XTUFQXCI6XCJcIixmLnNoYWRvd01hcEVuYWJsZWQ/XCIjZGVmaW5lIFwiK3E6XCJcIixmLnByZW11bHRpcGxpZWRBbHBoYT9cbiAgICBcIiNkZWZpbmUgUFJFTVVMVElQTElFRF9BTFBIQVwiOlwiXCIsZi5waHlzaWNhbGx5Q29ycmVjdExpZ2h0cz9cIiNkZWZpbmUgUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUU1wiOlwiXCIsZi5sb2dhcml0aG1pY0RlcHRoQnVmZmVyP1wiI2RlZmluZSBVU0VfTE9HREVQVEhCVUZcIjpcIlwiLGYubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlciYmYi5nZXQoXCJFWFRfZnJhZ19kZXB0aFwiKT9cIiNkZWZpbmUgVVNFX0xPR0RFUFRIQlVGX0VYVFwiOlwiXCIsZi5lbnZNYXAmJmIuZ2V0KFwiRVhUX3NoYWRlcl90ZXh0dXJlX2xvZFwiKT9cIiNkZWZpbmUgVEVYVFVSRV9MT0RfRVhUXCI6XCJcIixcInVuaWZvcm0gbWF0NCB2aWV3TWF0cml4O1wiLFwidW5pZm9ybSB2ZWMzIGNhbWVyYVBvc2l0aW9uO1wiLDAhPT1mLnRvbmVNYXBwaW5nP1wiI2RlZmluZSBUT05FX01BUFBJTkdcIjpcIlwiLDAhPT1mLnRvbmVNYXBwaW5nP1IudG9uZW1hcHBpbmdfcGFyc19mcmFnbWVudDpcIlwiLDAhPT1mLnRvbmVNYXBwaW5nP3VnKFwidG9uZU1hcHBpbmdcIixmLnRvbmVNYXBwaW5nKTpcbiAgICBcIlwiLGYuZGl0aGVyaW5nP1wiI2RlZmluZSBESVRIRVJJTkdcIjpcIlwiLGYub3V0cHV0RW5jb2Rpbmd8fGYubWFwRW5jb2Rpbmd8fGYuZW52TWFwRW5jb2Rpbmd8fGYuZW1pc3NpdmVNYXBFbmNvZGluZz9SLmVuY29kaW5nc19wYXJzX2ZyYWdtZW50OlwiXCIsZi5tYXBFbmNvZGluZz9ZZChcIm1hcFRleGVsVG9MaW5lYXJcIixmLm1hcEVuY29kaW5nKTpcIlwiLGYuZW52TWFwRW5jb2Rpbmc/WWQoXCJlbnZNYXBUZXhlbFRvTGluZWFyXCIsZi5lbnZNYXBFbmNvZGluZyk6XCJcIixmLmVtaXNzaXZlTWFwRW5jb2Rpbmc/WWQoXCJlbWlzc2l2ZU1hcFRleGVsVG9MaW5lYXJcIixmLmVtaXNzaXZlTWFwRW5jb2RpbmcpOlwiXCIsZi5vdXRwdXRFbmNvZGluZz90ZyhcImxpbmVhclRvT3V0cHV0VGV4ZWxcIixmLm91dHB1dEVuY29kaW5nKTpcIlwiLGYuZGVwdGhQYWNraW5nP1wiI2RlZmluZSBERVBUSF9QQUNLSU5HIFwiK2QuZGVwdGhQYWNraW5nOlwiXCIsXCJcXG5cIl0uZmlsdGVyKEJjKS5qb2luKFwiXFxuXCIpKTtrPVpkKGspO2s9WWUoayxmKTtcbiAgICBtPVpkKG0pO209WWUobSxmKTtkLmlzU2hhZGVyTWF0ZXJpYWx8fChrPVplKGspLG09WmUobSkpO209YittO2s9V2UoZyxnLlZFUlRFWF9TSEFERVIsaCtrKTttPVdlKGcsZy5GUkFHTUVOVF9TSEFERVIsbSk7Zy5hdHRhY2hTaGFkZXIoeixrKTtnLmF0dGFjaFNoYWRlcih6LG0pO3ZvaWQgMCE9PWQuaW5kZXgwQXR0cmlidXRlTmFtZT9nLmJpbmRBdHRyaWJMb2NhdGlvbih6LDAsZC5pbmRleDBBdHRyaWJ1dGVOYW1lKTohMD09PWYubW9ycGhUYXJnZXRzJiZnLmJpbmRBdHRyaWJMb2NhdGlvbih6LDAsXCJwb3NpdGlvblwiKTtnLmxpbmtQcm9ncmFtKHopO2Y9Zy5nZXRQcm9ncmFtSW5mb0xvZyh6KTtlPWcuZ2V0U2hhZGVySW5mb0xvZyhrKTtxPWcuZ2V0U2hhZGVySW5mb0xvZyhtKTt1PW49ITA7aWYoITE9PT1nLmdldFByb2dyYW1QYXJhbWV0ZXIoeixnLkxJTktfU1RBVFVTKSluPSExLGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFByb2dyYW06IHNoYWRlciBlcnJvcjogXCIsZy5nZXRFcnJvcigpLFxuICAgIFwiZ2wuVkFMSURBVEVfU1RBVFVTXCIsZy5nZXRQcm9ncmFtUGFyYW1ldGVyKHosZy5WQUxJREFURV9TVEFUVVMpLFwiZ2wuZ2V0UHJvZ3JhbUluZm9Mb2dcIixmLGUscSk7ZWxzZSBpZihcIlwiIT09Ziljb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFByb2dyYW06IGdsLmdldFByb2dyYW1JbmZvTG9nKClcIixmKTtlbHNlIGlmKFwiXCI9PT1lfHxcIlwiPT09cSl1PSExO3UmJih0aGlzLmRpYWdub3N0aWNzPXtydW5uYWJsZTpuLG1hdGVyaWFsOmQscHJvZ3JhbUxvZzpmLHZlcnRleFNoYWRlcjp7bG9nOmUscHJlZml4Omh9LGZyYWdtZW50U2hhZGVyOntsb2c6cSxwcmVmaXg6Yn19KTtnLmRlbGV0ZVNoYWRlcihrKTtnLmRlbGV0ZVNoYWRlcihtKTt2YXIgeTt0aGlzLmdldFVuaWZvcm1zPWZ1bmN0aW9uKCl7dm9pZCAwPT09eSYmKHk9bmV3IG1iKGcseixhKSk7cmV0dXJuIHl9O3ZhciBJO3RoaXMuZ2V0QXR0cmlidXRlcz1mdW5jdGlvbigpe2lmKHZvaWQgMD09PUkpe2Zvcih2YXIgYT17fSxiPWcuZ2V0UHJvZ3JhbVBhcmFtZXRlcih6LFxuICAgIGcuQUNUSVZFX0FUVFJJQlVURVMpLGM9MDtjPGI7YysrKXt2YXIgZD1nLmdldEFjdGl2ZUF0dHJpYih6LGMpLm5hbWU7YVtkXT1nLmdldEF0dHJpYkxvY2F0aW9uKHosZCl9ST1hfXJldHVybiBJfTt0aGlzLmRlc3Ryb3k9ZnVuY3Rpb24oKXtnLmRlbGV0ZVByb2dyYW0oeik7dGhpcy5wcm9ncmFtPXZvaWQgMH07T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7dW5pZm9ybXM6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUHJvZ3JhbTogLnVuaWZvcm1zIGlzIG5vdyAuZ2V0VW5pZm9ybXMoKS5cIik7cmV0dXJuIHRoaXMuZ2V0VW5pZm9ybXMoKX19LGF0dHJpYnV0ZXM6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUHJvZ3JhbTogLmF0dHJpYnV0ZXMgaXMgbm93IC5nZXRBdHRyaWJ1dGVzKCkuXCIpO3JldHVybiB0aGlzLmdldEF0dHJpYnV0ZXMoKX19fSk7dGhpcy5pZD15ZysrO3RoaXMuY29kZT1jO3RoaXMudXNlZFRpbWVzPTE7XG4gICAgdGhpcy5wcm9ncmFtPXo7dGhpcy52ZXJ0ZXhTaGFkZXI9azt0aGlzLmZyYWdtZW50U2hhZGVyPW07cmV0dXJuIHRoaXN9ZnVuY3Rpb24gemcoYSxiLGMpe2Z1bmN0aW9uIGQoYSxiKXtpZihhKWEuaXNUZXh0dXJlP2M9YS5lbmNvZGluZzphLmlzV2ViR0xSZW5kZXJUYXJnZXQmJihjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFByb2dyYW1zLmdldFRleHR1cmVFbmNvZGluZ0Zyb21NYXA6IGRvbid0IHVzZSByZW5kZXIgdGFyZ2V0cyBhcyB0ZXh0dXJlcy4gVXNlIHRoZWlyIC50ZXh0dXJlIHByb3BlcnR5IGluc3RlYWQuXCIpLGM9YS50ZXh0dXJlLmVuY29kaW5nKTtlbHNlIHZhciBjPTNFMzszRTM9PT1jJiZiJiYoYz0zMDA3KTtyZXR1cm4gY312YXIgZT1bXSxmPXtNZXNoRGVwdGhNYXRlcmlhbDpcImRlcHRoXCIsTWVzaERpc3RhbmNlTWF0ZXJpYWw6XCJkaXN0YW5jZVJHQkFcIixNZXNoTm9ybWFsTWF0ZXJpYWw6XCJub3JtYWxcIixNZXNoQmFzaWNNYXRlcmlhbDpcImJhc2ljXCIsTWVzaExhbWJlcnRNYXRlcmlhbDpcImxhbWJlcnRcIixcbiAgICBNZXNoUGhvbmdNYXRlcmlhbDpcInBob25nXCIsTWVzaFRvb25NYXRlcmlhbDpcInBob25nXCIsTWVzaFN0YW5kYXJkTWF0ZXJpYWw6XCJwaHlzaWNhbFwiLE1lc2hQaHlzaWNhbE1hdGVyaWFsOlwicGh5c2ljYWxcIixMaW5lQmFzaWNNYXRlcmlhbDpcImJhc2ljXCIsTGluZURhc2hlZE1hdGVyaWFsOlwiZGFzaGVkXCIsUG9pbnRzTWF0ZXJpYWw6XCJwb2ludHNcIixTaGFkb3dNYXRlcmlhbDpcInNoYWRvd1wifSxnPVwicHJlY2lzaW9uIHN1cHBvcnRzVmVydGV4VGV4dHVyZXMgbWFwIG1hcEVuY29kaW5nIGVudk1hcCBlbnZNYXBNb2RlIGVudk1hcEVuY29kaW5nIGxpZ2h0TWFwIGFvTWFwIGVtaXNzaXZlTWFwIGVtaXNzaXZlTWFwRW5jb2RpbmcgYnVtcE1hcCBub3JtYWxNYXAgZGlzcGxhY2VtZW50TWFwIHNwZWN1bGFyTWFwIHJvdWdobmVzc01hcCBtZXRhbG5lc3NNYXAgZ3JhZGllbnRNYXAgYWxwaGFNYXAgY29tYmluZSB2ZXJ0ZXhDb2xvcnMgZm9nIHVzZUZvZyBmb2dFeHAgZmxhdFNoYWRpbmcgc2l6ZUF0dGVudWF0aW9uIGxvZ2FyaXRobWljRGVwdGhCdWZmZXIgc2tpbm5pbmcgbWF4Qm9uZXMgdXNlVmVydGV4VGV4dHVyZSBtb3JwaFRhcmdldHMgbW9ycGhOb3JtYWxzIG1heE1vcnBoVGFyZ2V0cyBtYXhNb3JwaE5vcm1hbHMgcHJlbXVsdGlwbGllZEFscGhhIG51bURpckxpZ2h0cyBudW1Qb2ludExpZ2h0cyBudW1TcG90TGlnaHRzIG51bUhlbWlMaWdodHMgbnVtUmVjdEFyZWFMaWdodHMgc2hhZG93TWFwRW5hYmxlZCBzaGFkb3dNYXBUeXBlIHRvbmVNYXBwaW5nIHBoeXNpY2FsbHlDb3JyZWN0TGlnaHRzIGFscGhhVGVzdCBkb3VibGVTaWRlZCBmbGlwU2lkZWQgbnVtQ2xpcHBpbmdQbGFuZXMgbnVtQ2xpcEludGVyc2VjdGlvbiBkZXB0aFBhY2tpbmcgZGl0aGVyaW5nXCIuc3BsaXQoXCIgXCIpO1xuICAgIHRoaXMuZ2V0UGFyYW1ldGVycz1mdW5jdGlvbihiLGUsZyxxLG4sdSxyKXt2YXIgaD1mW2IudHlwZV07aWYoci5pc1NraW5uZWRNZXNoKXt2YXIgaz1yLnNrZWxldG9uLmJvbmVzO2lmKGMuZmxvYXRWZXJ0ZXhUZXh0dXJlcylrPTEwMjQ7ZWxzZXt2YXIgbT1NYXRoLm1pbihNYXRoLmZsb29yKChjLm1heFZlcnRleFVuaWZvcm1zLTIwKS80KSxrLmxlbmd0aCk7bTxrLmxlbmd0aD8oY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogU2tlbGV0b24gaGFzIFwiK2subGVuZ3RoK1wiIGJvbmVzLiBUaGlzIEdQVSBzdXBwb3J0cyBcIittK1wiLlwiKSxrPTApOms9bX19ZWxzZSBrPTA7bT1jLnByZWNpc2lvbjtudWxsIT09Yi5wcmVjaXNpb24mJihtPWMuZ2V0TWF4UHJlY2lzaW9uKGIucHJlY2lzaW9uKSxtIT09Yi5wcmVjaXNpb24mJmNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUHJvZ3JhbS5nZXRQYXJhbWV0ZXJzOlwiLGIucHJlY2lzaW9uLFwibm90IHN1cHBvcnRlZCwgdXNpbmdcIixtLFwiaW5zdGVhZC5cIikpO1xuICAgIHZhciBsPWEuZ2V0UmVuZGVyVGFyZ2V0KCk7cmV0dXJue3NoYWRlcklEOmgscHJlY2lzaW9uOm0sc3VwcG9ydHNWZXJ0ZXhUZXh0dXJlczpjLnZlcnRleFRleHR1cmVzLG91dHB1dEVuY29kaW5nOmQobD9sLnRleHR1cmU6bnVsbCxhLmdhbW1hT3V0cHV0KSxtYXA6ISFiLm1hcCxtYXBFbmNvZGluZzpkKGIubWFwLGEuZ2FtbWFJbnB1dCksZW52TWFwOiEhYi5lbnZNYXAsZW52TWFwTW9kZTpiLmVudk1hcCYmYi5lbnZNYXAubWFwcGluZyxlbnZNYXBFbmNvZGluZzpkKGIuZW52TWFwLGEuZ2FtbWFJbnB1dCksZW52TWFwQ3ViZVVWOiEhYi5lbnZNYXAmJigzMDY9PT1iLmVudk1hcC5tYXBwaW5nfHwzMDc9PT1iLmVudk1hcC5tYXBwaW5nKSxsaWdodE1hcDohIWIubGlnaHRNYXAsYW9NYXA6ISFiLmFvTWFwLGVtaXNzaXZlTWFwOiEhYi5lbWlzc2l2ZU1hcCxlbWlzc2l2ZU1hcEVuY29kaW5nOmQoYi5lbWlzc2l2ZU1hcCxhLmdhbW1hSW5wdXQpLGJ1bXBNYXA6ISFiLmJ1bXBNYXAsbm9ybWFsTWFwOiEhYi5ub3JtYWxNYXAsXG4gICAgZGlzcGxhY2VtZW50TWFwOiEhYi5kaXNwbGFjZW1lbnRNYXAscm91Z2huZXNzTWFwOiEhYi5yb3VnaG5lc3NNYXAsbWV0YWxuZXNzTWFwOiEhYi5tZXRhbG5lc3NNYXAsc3BlY3VsYXJNYXA6ISFiLnNwZWN1bGFyTWFwLGFscGhhTWFwOiEhYi5hbHBoYU1hcCxncmFkaWVudE1hcDohIWIuZ3JhZGllbnRNYXAsY29tYmluZTpiLmNvbWJpbmUsdmVydGV4Q29sb3JzOmIudmVydGV4Q29sb3JzLGZvZzohIXEsdXNlRm9nOmIuZm9nLGZvZ0V4cDpxJiZxLmlzRm9nRXhwMixmbGF0U2hhZGluZzpiLmZsYXRTaGFkaW5nLHNpemVBdHRlbnVhdGlvbjpiLnNpemVBdHRlbnVhdGlvbixsb2dhcml0aG1pY0RlcHRoQnVmZmVyOmMubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcixza2lubmluZzpiLnNraW5uaW5nJiYwPGssbWF4Qm9uZXM6ayx1c2VWZXJ0ZXhUZXh0dXJlOmMuZmxvYXRWZXJ0ZXhUZXh0dXJlcyxtb3JwaFRhcmdldHM6Yi5tb3JwaFRhcmdldHMsbW9ycGhOb3JtYWxzOmIubW9ycGhOb3JtYWxzLFxuICAgIG1heE1vcnBoVGFyZ2V0czphLm1heE1vcnBoVGFyZ2V0cyxtYXhNb3JwaE5vcm1hbHM6YS5tYXhNb3JwaE5vcm1hbHMsbnVtRGlyTGlnaHRzOmUuZGlyZWN0aW9uYWwubGVuZ3RoLG51bVBvaW50TGlnaHRzOmUucG9pbnQubGVuZ3RoLG51bVNwb3RMaWdodHM6ZS5zcG90Lmxlbmd0aCxudW1SZWN0QXJlYUxpZ2h0czplLnJlY3RBcmVhLmxlbmd0aCxudW1IZW1pTGlnaHRzOmUuaGVtaS5sZW5ndGgsbnVtQ2xpcHBpbmdQbGFuZXM6bixudW1DbGlwSW50ZXJzZWN0aW9uOnUsZGl0aGVyaW5nOmIuZGl0aGVyaW5nLHNoYWRvd01hcEVuYWJsZWQ6YS5zaGFkb3dNYXAuZW5hYmxlZCYmci5yZWNlaXZlU2hhZG93JiYwPGcubGVuZ3RoLHNoYWRvd01hcFR5cGU6YS5zaGFkb3dNYXAudHlwZSx0b25lTWFwcGluZzphLnRvbmVNYXBwaW5nLHBoeXNpY2FsbHlDb3JyZWN0TGlnaHRzOmEucGh5c2ljYWxseUNvcnJlY3RMaWdodHMscHJlbXVsdGlwbGllZEFscGhhOmIucHJlbXVsdGlwbGllZEFscGhhLFxuICAgIGFscGhhVGVzdDpiLmFscGhhVGVzdCxkb3VibGVTaWRlZDoyPT09Yi5zaWRlLGZsaXBTaWRlZDoxPT09Yi5zaWRlLGRlcHRoUGFja2luZzp2b2lkIDAhPT1iLmRlcHRoUGFja2luZz9iLmRlcHRoUGFja2luZzohMX19O3RoaXMuZ2V0UHJvZ3JhbUNvZGU9ZnVuY3Rpb24oYixjKXt2YXIgZD1bXTtjLnNoYWRlcklEP2QucHVzaChjLnNoYWRlcklEKTooZC5wdXNoKGIuZnJhZ21lbnRTaGFkZXIpLGQucHVzaChiLnZlcnRleFNoYWRlcikpO2lmKHZvaWQgMCE9PWIuZGVmaW5lcylmb3IodmFyIGUgaW4gYi5kZWZpbmVzKWQucHVzaChlKSxkLnB1c2goYi5kZWZpbmVzW2VdKTtmb3IoZT0wO2U8Zy5sZW5ndGg7ZSsrKWQucHVzaChjW2dbZV1dKTtkLnB1c2goYi5vbkJlZm9yZUNvbXBpbGUudG9TdHJpbmcoKSk7ZC5wdXNoKGEuZ2FtbWFPdXRwdXQpO3JldHVybiBkLmpvaW4oKX07dGhpcy5hY3F1aXJlUHJvZ3JhbT1mdW5jdGlvbihjLGQsZixnKXtmb3IodmFyIGgsaz0wLG09ZS5sZW5ndGg7azxcbiAgICBtO2srKyl7dmFyIHE9ZVtrXTtpZihxLmNvZGU9PT1nKXtoPXE7KytoLnVzZWRUaW1lczticmVha319dm9pZCAwPT09aCYmKGg9bmV3IHhnKGEsYixnLGMsZCxmKSxlLnB1c2goaCkpO3JldHVybiBofTt0aGlzLnJlbGVhc2VQcm9ncmFtPWZ1bmN0aW9uKGEpe2lmKDA9PT0tLWEudXNlZFRpbWVzKXt2YXIgYj1lLmluZGV4T2YoYSk7ZVtiXT1lW2UubGVuZ3RoLTFdO2UucG9wKCk7YS5kZXN0cm95KCl9fTt0aGlzLnByb2dyYW1zPWV9ZnVuY3Rpb24gQWcoYSxiLGMsZCxlLGYsZyl7ZnVuY3Rpb24gaChhLGIpe2lmKGEud2lkdGg+Ynx8YS5oZWlnaHQ+Yil7Yi89TWF0aC5tYXgoYS53aWR0aCxhLmhlaWdodCk7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLFwiY2FudmFzXCIpO2Mud2lkdGg9TWF0aC5mbG9vcihhLndpZHRoKmIpO2MuaGVpZ2h0PU1hdGguZmxvb3IoYS5oZWlnaHQqYik7Yy5nZXRDb250ZXh0KFwiMmRcIikuZHJhd0ltYWdlKGEsXG4gICAgMCwwLGEud2lkdGgsYS5oZWlnaHQsMCwwLGMud2lkdGgsYy5oZWlnaHQpO2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IGltYWdlIGlzIHRvbyBiaWcgKFwiK2Eud2lkdGgrXCJ4XCIrYS5oZWlnaHQrXCIpLiBSZXNpemVkIHRvIFwiK2Mud2lkdGgrXCJ4XCIrYy5oZWlnaHQsYSk7cmV0dXJuIGN9cmV0dXJuIGF9ZnVuY3Rpb24gayhhKXtyZXR1cm4gUS5pc1Bvd2VyT2ZUd28oYS53aWR0aCkmJlEuaXNQb3dlck9mVHdvKGEuaGVpZ2h0KX1mdW5jdGlvbiBtKGEsYil7cmV0dXJuIGEuZ2VuZXJhdGVNaXBtYXBzJiZiJiYxMDAzIT09YS5taW5GaWx0ZXImJjEwMDYhPT1hLm1pbkZpbHRlcn1mdW5jdGlvbiBxKGIpe3JldHVybiAxMDAzPT09Ynx8MTAwND09PWJ8fDEwMDU9PT1iP2EuTkVBUkVTVDphLkxJTkVBUn1mdW5jdGlvbiBuKGIpe2I9Yi50YXJnZXQ7Yi5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLG4pO2E6e3ZhciBjPWQuZ2V0KGIpO2lmKGIuaW1hZ2UmJmMuX19pbWFnZV9fd2ViZ2xUZXh0dXJlQ3ViZSlhLmRlbGV0ZVRleHR1cmUoYy5fX2ltYWdlX193ZWJnbFRleHR1cmVDdWJlKTtcbiAgICBlbHNle2lmKHZvaWQgMD09PWMuX193ZWJnbEluaXQpYnJlYWsgYTthLmRlbGV0ZVRleHR1cmUoYy5fX3dlYmdsVGV4dHVyZSl9ZC5yZW1vdmUoYil9Yi5pc1ZpZGVvVGV4dHVyZSYmZGVsZXRlIHlbYi5pZF07Zy50ZXh0dXJlcy0tfWZ1bmN0aW9uIHUoYil7Yj1iLnRhcmdldDtiLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsdSk7dmFyIGM9ZC5nZXQoYiksZT1kLmdldChiLnRleHR1cmUpO2lmKGIpe3ZvaWQgMCE9PWUuX193ZWJnbFRleHR1cmUmJmEuZGVsZXRlVGV4dHVyZShlLl9fd2ViZ2xUZXh0dXJlKTtiLmRlcHRoVGV4dHVyZSYmYi5kZXB0aFRleHR1cmUuZGlzcG9zZSgpO2lmKGIuaXNXZWJHTFJlbmRlclRhcmdldEN1YmUpZm9yKGU9MDs2PmU7ZSsrKWEuZGVsZXRlRnJhbWVidWZmZXIoYy5fX3dlYmdsRnJhbWVidWZmZXJbZV0pLGMuX193ZWJnbERlcHRoYnVmZmVyJiZhLmRlbGV0ZVJlbmRlcmJ1ZmZlcihjLl9fd2ViZ2xEZXB0aGJ1ZmZlcltlXSk7ZWxzZSBhLmRlbGV0ZUZyYW1lYnVmZmVyKGMuX193ZWJnbEZyYW1lYnVmZmVyKSxcbiAgICBjLl9fd2ViZ2xEZXB0aGJ1ZmZlciYmYS5kZWxldGVSZW5kZXJidWZmZXIoYy5fX3dlYmdsRGVwdGhidWZmZXIpO2QucmVtb3ZlKGIudGV4dHVyZSk7ZC5yZW1vdmUoYil9Zy50ZXh0dXJlcy0tfWZ1bmN0aW9uIHIoYixxKXt2YXIgdT1kLmdldChiKTtpZigwPGIudmVyc2lvbiYmdS5fX3ZlcnNpb24hPT1iLnZlcnNpb24pe3ZhciByPWIuaW1hZ2U7aWYodm9pZCAwPT09ciljb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBUZXh0dXJlIG1hcmtlZCBmb3IgdXBkYXRlIGJ1dCBpbWFnZSBpcyB1bmRlZmluZWRcIixiKTtlbHNlIGlmKCExPT09ci5jb21wbGV0ZSljb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBUZXh0dXJlIG1hcmtlZCBmb3IgdXBkYXRlIGJ1dCBpbWFnZSBpcyBpbmNvbXBsZXRlXCIsYik7ZWxzZXt2b2lkIDA9PT11Ll9fd2ViZ2xJbml0JiYodS5fX3dlYmdsSW5pdD0hMCxiLmFkZEV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsbiksdS5fX3dlYmdsVGV4dHVyZT1cbiAgICBhLmNyZWF0ZVRleHR1cmUoKSxiLmlzVmlkZW9UZXh0dXJlJiYoeVtiLmlkXT1iKSxnLnRleHR1cmVzKyspO2MuYWN0aXZlVGV4dHVyZShhLlRFWFRVUkUwK3EpO2MuYmluZFRleHR1cmUoYS5URVhUVVJFXzJELHUuX193ZWJnbFRleHR1cmUpO2EucGl4ZWxTdG9yZWkoYS5VTlBBQ0tfRkxJUF9ZX1dFQkdMLGIuZmxpcFkpO2EucGl4ZWxTdG9yZWkoYS5VTlBBQ0tfUFJFTVVMVElQTFlfQUxQSEFfV0VCR0wsYi5wcmVtdWx0aXBseUFscGhhKTthLnBpeGVsU3RvcmVpKGEuVU5QQUNLX0FMSUdOTUVOVCxiLnVucGFja0FsaWdubWVudCk7dmFyIGw9aChiLmltYWdlLGUubWF4VGV4dHVyZVNpemUpOygxMDAxIT09Yi53cmFwU3x8MTAwMSE9PWIud3JhcFR8fDEwMDMhPT1iLm1pbkZpbHRlciYmMTAwNiE9PWIubWluRmlsdGVyKSYmITE9PT1rKGwpJiYocT1sLHEgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50fHxxIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnR8fHEgaW5zdGFuY2VvZiBJbWFnZUJpdG1hcD9cbiAgICAocj1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCIsXCJjYW52YXNcIiksci53aWR0aD1RLmZsb29yUG93ZXJPZlR3byhxLndpZHRoKSxyLmhlaWdodD1RLmZsb29yUG93ZXJPZlR3byhxLmhlaWdodCksci5nZXRDb250ZXh0KFwiMmRcIikuZHJhd0ltYWdlKHEsMCwwLHIud2lkdGgsci5oZWlnaHQpLGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IGltYWdlIGlzIG5vdCBwb3dlciBvZiB0d28gKFwiK3Eud2lkdGgrXCJ4XCIrcS5oZWlnaHQrXCIpLiBSZXNpemVkIHRvIFwiK3Iud2lkdGgrXCJ4XCIrci5oZWlnaHQscSksbD1yKTpsPXEpO3E9ayhsKTt2YXIgcj1mLmNvbnZlcnQoYi5mb3JtYXQpLHY9Zi5jb252ZXJ0KGIudHlwZSk7dChhLlRFWFRVUkVfMkQsYixxKTt2YXIgcD1iLm1pcG1hcHM7aWYoYi5pc0RlcHRoVGV4dHVyZSl7cD1hLkRFUFRIX0NPTVBPTkVOVDtpZigxMDE1PT09Yi50eXBlKXtpZigheil0aHJvdyBFcnJvcihcIkZsb2F0IERlcHRoIFRleHR1cmUgb25seSBzdXBwb3J0ZWQgaW4gV2ViR0wyLjBcIik7XG4gICAgcD1hLkRFUFRIX0NPTVBPTkVOVDMyRn1lbHNlIHomJihwPWEuREVQVEhfQ09NUE9ORU5UMTYpOzEwMjY9PT1iLmZvcm1hdCYmcD09PWEuREVQVEhfQ09NUE9ORU5UJiYxMDEyIT09Yi50eXBlJiYxMDE0IT09Yi50eXBlJiYoY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogVXNlIFVuc2lnbmVkU2hvcnRUeXBlIG9yIFVuc2lnbmVkSW50VHlwZSBmb3IgRGVwdGhGb3JtYXQgRGVwdGhUZXh0dXJlLlwiKSxiLnR5cGU9MTAxMix2PWYuY29udmVydChiLnR5cGUpKTsxMDI3PT09Yi5mb3JtYXQmJihwPWEuREVQVEhfU1RFTkNJTCwxMDIwIT09Yi50eXBlJiYoY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogVXNlIFVuc2lnbmVkSW50MjQ4VHlwZSBmb3IgRGVwdGhTdGVuY2lsRm9ybWF0IERlcHRoVGV4dHVyZS5cIiksYi50eXBlPTEwMjAsdj1mLmNvbnZlcnQoYi50eXBlKSkpO2MudGV4SW1hZ2UyRChhLlRFWFRVUkVfMkQsMCxwLGwud2lkdGgsbC5oZWlnaHQsMCxyLFxuICAgIHYsbnVsbCl9ZWxzZSBpZihiLmlzRGF0YVRleHR1cmUpaWYoMDxwLmxlbmd0aCYmcSl7Zm9yKHZhciBBPTAsdz1wLmxlbmd0aDtBPHc7QSsrKWw9cFtBXSxjLnRleEltYWdlMkQoYS5URVhUVVJFXzJELEEscixsLndpZHRoLGwuaGVpZ2h0LDAscix2LGwuZGF0YSk7Yi5nZW5lcmF0ZU1pcG1hcHM9ITF9ZWxzZSBjLnRleEltYWdlMkQoYS5URVhUVVJFXzJELDAscixsLndpZHRoLGwuaGVpZ2h0LDAscix2LGwuZGF0YSk7ZWxzZSBpZihiLmlzQ29tcHJlc3NlZFRleHR1cmUpZm9yKEE9MCx3PXAubGVuZ3RoO0E8dztBKyspbD1wW0FdLDEwMjMhPT1iLmZvcm1hdCYmMTAyMiE9PWIuZm9ybWF0Py0xPGMuZ2V0Q29tcHJlc3NlZFRleHR1cmVGb3JtYXRzKCkuaW5kZXhPZihyKT9jLmNvbXByZXNzZWRUZXhJbWFnZTJEKGEuVEVYVFVSRV8yRCxBLHIsbC53aWR0aCxsLmhlaWdodCwwLGwuZGF0YSk6Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogQXR0ZW1wdCB0byBsb2FkIHVuc3VwcG9ydGVkIGNvbXByZXNzZWQgdGV4dHVyZSBmb3JtYXQgaW4gLnVwbG9hZFRleHR1cmUoKVwiKTpcbiAgICBjLnRleEltYWdlMkQoYS5URVhUVVJFXzJELEEscixsLndpZHRoLGwuaGVpZ2h0LDAscix2LGwuZGF0YSk7ZWxzZSBpZigwPHAubGVuZ3RoJiZxKXtBPTA7Zm9yKHc9cC5sZW5ndGg7QTx3O0ErKylsPXBbQV0sYy50ZXhJbWFnZTJEKGEuVEVYVFVSRV8yRCxBLHIscix2LGwpO2IuZ2VuZXJhdGVNaXBtYXBzPSExfWVsc2UgYy50ZXhJbWFnZTJEKGEuVEVYVFVSRV8yRCwwLHIscix2LGwpO20oYixxKSYmYS5nZW5lcmF0ZU1pcG1hcChhLlRFWFRVUkVfMkQpO3UuX192ZXJzaW9uPWIudmVyc2lvbjtpZihiLm9uVXBkYXRlKWIub25VcGRhdGUoYik7cmV0dXJufX1jLmFjdGl2ZVRleHR1cmUoYS5URVhUVVJFMCtxKTtjLmJpbmRUZXh0dXJlKGEuVEVYVFVSRV8yRCx1Ll9fd2ViZ2xUZXh0dXJlKX1mdW5jdGlvbiB0KGMsZyxoKXtoPyhhLnRleFBhcmFtZXRlcmkoYyxhLlRFWFRVUkVfV1JBUF9TLGYuY29udmVydChnLndyYXBTKSksYS50ZXhQYXJhbWV0ZXJpKGMsYS5URVhUVVJFX1dSQVBfVCxcbiAgICBmLmNvbnZlcnQoZy53cmFwVCkpLGEudGV4UGFyYW1ldGVyaShjLGEuVEVYVFVSRV9NQUdfRklMVEVSLGYuY29udmVydChnLm1hZ0ZpbHRlcikpLGEudGV4UGFyYW1ldGVyaShjLGEuVEVYVFVSRV9NSU5fRklMVEVSLGYuY29udmVydChnLm1pbkZpbHRlcikpKTooYS50ZXhQYXJhbWV0ZXJpKGMsYS5URVhUVVJFX1dSQVBfUyxhLkNMQU1QX1RPX0VER0UpLGEudGV4UGFyYW1ldGVyaShjLGEuVEVYVFVSRV9XUkFQX1QsYS5DTEFNUF9UT19FREdFKSwxMDAxPT09Zy53cmFwUyYmMTAwMT09PWcud3JhcFR8fGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFRleHR1cmUgaXMgbm90IHBvd2VyIG9mIHR3by4gVGV4dHVyZS53cmFwUyBhbmQgVGV4dHVyZS53cmFwVCBzaG91bGQgYmUgc2V0IHRvIFRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmcuXCIsZyksYS50ZXhQYXJhbWV0ZXJpKGMsYS5URVhUVVJFX01BR19GSUxURVIscShnLm1hZ0ZpbHRlcikpLGEudGV4UGFyYW1ldGVyaShjLFxuICAgIGEuVEVYVFVSRV9NSU5fRklMVEVSLHEoZy5taW5GaWx0ZXIpKSwxMDAzIT09Zy5taW5GaWx0ZXImJjEwMDYhPT1nLm1pbkZpbHRlciYmY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogVGV4dHVyZSBpcyBub3QgcG93ZXIgb2YgdHdvLiBUZXh0dXJlLm1pbkZpbHRlciBzaG91bGQgYmUgc2V0IHRvIFRIUkVFLk5lYXJlc3RGaWx0ZXIgb3IgVEhSRUUuTGluZWFyRmlsdGVyLlwiLGcpKTshKGg9Yi5nZXQoXCJFWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWNcIikpfHwxMDE1PT09Zy50eXBlJiZudWxsPT09Yi5nZXQoXCJPRVNfdGV4dHVyZV9mbG9hdF9saW5lYXJcIil8fDEwMTY9PT1nLnR5cGUmJm51bGw9PT1iLmdldChcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRfbGluZWFyXCIpfHwhKDE8Zy5hbmlzb3Ryb3B5fHxkLmdldChnKS5fX2N1cnJlbnRBbmlzb3Ryb3B5KXx8KGEudGV4UGFyYW1ldGVyZihjLGguVEVYVFVSRV9NQVhfQU5JU09UUk9QWV9FWFQsTWF0aC5taW4oZy5hbmlzb3Ryb3B5LFxuICAgIGUuZ2V0TWF4QW5pc290cm9weSgpKSksZC5nZXQoZykuX19jdXJyZW50QW5pc290cm9weT1nLmFuaXNvdHJvcHkpfWZ1bmN0aW9uIGwoYixlLGcsaCl7dmFyIGs9Zi5jb252ZXJ0KGUudGV4dHVyZS5mb3JtYXQpLG09Zi5jb252ZXJ0KGUudGV4dHVyZS50eXBlKTtjLnRleEltYWdlMkQoaCwwLGssZS53aWR0aCxlLmhlaWdodCwwLGssbSxudWxsKTthLmJpbmRGcmFtZWJ1ZmZlcihhLkZSQU1FQlVGRkVSLGIpO2EuZnJhbWVidWZmZXJUZXh0dXJlMkQoYS5GUkFNRUJVRkZFUixnLGgsZC5nZXQoZS50ZXh0dXJlKS5fX3dlYmdsVGV4dHVyZSwwKTthLmJpbmRGcmFtZWJ1ZmZlcihhLkZSQU1FQlVGRkVSLG51bGwpfWZ1bmN0aW9uIHAoYixjKXthLmJpbmRSZW5kZXJidWZmZXIoYS5SRU5ERVJCVUZGRVIsYik7Yy5kZXB0aEJ1ZmZlciYmIWMuc3RlbmNpbEJ1ZmZlcj8oYS5yZW5kZXJidWZmZXJTdG9yYWdlKGEuUkVOREVSQlVGRkVSLGEuREVQVEhfQ09NUE9ORU5UMTYsYy53aWR0aCxjLmhlaWdodCksXG4gICAgYS5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcihhLkZSQU1FQlVGRkVSLGEuREVQVEhfQVRUQUNITUVOVCxhLlJFTkRFUkJVRkZFUixiKSk6Yy5kZXB0aEJ1ZmZlciYmYy5zdGVuY2lsQnVmZmVyPyhhLnJlbmRlcmJ1ZmZlclN0b3JhZ2UoYS5SRU5ERVJCVUZGRVIsYS5ERVBUSF9TVEVOQ0lMLGMud2lkdGgsYy5oZWlnaHQpLGEuZnJhbWVidWZmZXJSZW5kZXJidWZmZXIoYS5GUkFNRUJVRkZFUixhLkRFUFRIX1NURU5DSUxfQVRUQUNITUVOVCxhLlJFTkRFUkJVRkZFUixiKSk6YS5yZW5kZXJidWZmZXJTdG9yYWdlKGEuUkVOREVSQlVGRkVSLGEuUkdCQTQsYy53aWR0aCxjLmhlaWdodCk7YS5iaW5kUmVuZGVyYnVmZmVyKGEuUkVOREVSQlVGRkVSLG51bGwpfXZhciB6PVwidW5kZWZpbmVkXCIhPT10eXBlb2YgV2ViR0wyUmVuZGVyaW5nQ29udGV4dCYmYSBpbnN0YW5jZW9mIHdpbmRvdy5XZWJHTDJSZW5kZXJpbmdDb250ZXh0LHk9e307dGhpcy5zZXRUZXh0dXJlMkQ9cjt0aGlzLnNldFRleHR1cmVDdWJlPVxuICAgIGZ1bmN0aW9uKGIscSl7dmFyIHU9ZC5nZXQoYik7aWYoNj09PWIuaW1hZ2UubGVuZ3RoKWlmKDA8Yi52ZXJzaW9uJiZ1Ll9fdmVyc2lvbiE9PWIudmVyc2lvbil7dS5fX2ltYWdlX193ZWJnbFRleHR1cmVDdWJlfHwoYi5hZGRFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLG4pLHUuX19pbWFnZV9fd2ViZ2xUZXh0dXJlQ3ViZT1hLmNyZWF0ZVRleHR1cmUoKSxnLnRleHR1cmVzKyspO2MuYWN0aXZlVGV4dHVyZShhLlRFWFRVUkUwK3EpO2MuYmluZFRleHR1cmUoYS5URVhUVVJFX0NVQkVfTUFQLHUuX19pbWFnZV9fd2ViZ2xUZXh0dXJlQ3ViZSk7YS5waXhlbFN0b3JlaShhLlVOUEFDS19GTElQX1lfV0VCR0wsYi5mbGlwWSk7cT1iJiZiLmlzQ29tcHJlc3NlZFRleHR1cmU7Zm9yKHZhciByPWIuaW1hZ2VbMF0mJmIuaW1hZ2VbMF0uaXNEYXRhVGV4dHVyZSxsPVtdLHY9MDs2PnY7disrKWxbdl09cXx8cj9yP2IuaW1hZ2Vbdl0uaW1hZ2U6Yi5pbWFnZVt2XTpoKGIuaW1hZ2Vbdl0sZS5tYXhDdWJlbWFwU2l6ZSk7XG4gICAgdmFyIHA9ayhsWzBdKSx3PWYuY29udmVydChiLmZvcm1hdCksQT1mLmNvbnZlcnQoYi50eXBlKTt0KGEuVEVYVFVSRV9DVUJFX01BUCxiLHApO2Zvcih2PTA7Nj52O3YrKylpZihxKWZvcih2YXIgeSxJPWxbdl0ubWlwbWFwcyx6PTAseD1JLmxlbmd0aDt6PHg7eisrKXk9SVt6XSwxMDIzIT09Yi5mb3JtYXQmJjEwMjIhPT1iLmZvcm1hdD8tMTxjLmdldENvbXByZXNzZWRUZXh0dXJlRm9ybWF0cygpLmluZGV4T2Yodyk/Yy5jb21wcmVzc2VkVGV4SW1hZ2UyRChhLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCt2LHosdyx5LndpZHRoLHkuaGVpZ2h0LDAseS5kYXRhKTpjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBBdHRlbXB0IHRvIGxvYWQgdW5zdXBwb3J0ZWQgY29tcHJlc3NlZCB0ZXh0dXJlIGZvcm1hdCBpbiAuc2V0VGV4dHVyZUN1YmUoKVwiKTpjLnRleEltYWdlMkQoYS5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1grdix6LHcseS53aWR0aCx5LmhlaWdodCxcbiAgICAwLHcsQSx5LmRhdGEpO2Vsc2Ugcj9jLnRleEltYWdlMkQoYS5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1grdiwwLHcsbFt2XS53aWR0aCxsW3ZdLmhlaWdodCwwLHcsQSxsW3ZdLmRhdGEpOmMudGV4SW1hZ2UyRChhLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCt2LDAsdyx3LEEsbFt2XSk7bShiLHApJiZhLmdlbmVyYXRlTWlwbWFwKGEuVEVYVFVSRV9DVUJFX01BUCk7dS5fX3ZlcnNpb249Yi52ZXJzaW9uO2lmKGIub25VcGRhdGUpYi5vblVwZGF0ZShiKX1lbHNlIGMuYWN0aXZlVGV4dHVyZShhLlRFWFRVUkUwK3EpLGMuYmluZFRleHR1cmUoYS5URVhUVVJFX0NVQkVfTUFQLHUuX19pbWFnZV9fd2ViZ2xUZXh0dXJlQ3ViZSl9O3RoaXMuc2V0VGV4dHVyZUN1YmVEeW5hbWljPWZ1bmN0aW9uKGIsZSl7Yy5hY3RpdmVUZXh0dXJlKGEuVEVYVFVSRTArZSk7Yy5iaW5kVGV4dHVyZShhLlRFWFRVUkVfQ1VCRV9NQVAsZC5nZXQoYikuX193ZWJnbFRleHR1cmUpfTt0aGlzLnNldHVwUmVuZGVyVGFyZ2V0PVxuICAgIGZ1bmN0aW9uKGIpe3ZhciBlPWQuZ2V0KGIpLGY9ZC5nZXQoYi50ZXh0dXJlKTtiLmFkZEV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsdSk7Zi5fX3dlYmdsVGV4dHVyZT1hLmNyZWF0ZVRleHR1cmUoKTtnLnRleHR1cmVzKys7dmFyIGg9ITA9PT1iLmlzV2ViR0xSZW5kZXJUYXJnZXRDdWJlLG49ayhiKTtpZihoKXtlLl9fd2ViZ2xGcmFtZWJ1ZmZlcj1bXTtmb3IodmFyIHE9MDs2PnE7cSsrKWUuX193ZWJnbEZyYW1lYnVmZmVyW3FdPWEuY3JlYXRlRnJhbWVidWZmZXIoKX1lbHNlIGUuX193ZWJnbEZyYW1lYnVmZmVyPWEuY3JlYXRlRnJhbWVidWZmZXIoKTtpZihoKXtjLmJpbmRUZXh0dXJlKGEuVEVYVFVSRV9DVUJFX01BUCxmLl9fd2ViZ2xUZXh0dXJlKTt0KGEuVEVYVFVSRV9DVUJFX01BUCxiLnRleHR1cmUsbik7Zm9yKHE9MDs2PnE7cSsrKWwoZS5fX3dlYmdsRnJhbWVidWZmZXJbcV0sYixhLkNPTE9SX0FUVEFDSE1FTlQwLGEuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YK3EpO1xuICAgIG0oYi50ZXh0dXJlLG4pJiZhLmdlbmVyYXRlTWlwbWFwKGEuVEVYVFVSRV9DVUJFX01BUCk7Yy5iaW5kVGV4dHVyZShhLlRFWFRVUkVfQ1VCRV9NQVAsbnVsbCl9ZWxzZSBjLmJpbmRUZXh0dXJlKGEuVEVYVFVSRV8yRCxmLl9fd2ViZ2xUZXh0dXJlKSx0KGEuVEVYVFVSRV8yRCxiLnRleHR1cmUsbiksbChlLl9fd2ViZ2xGcmFtZWJ1ZmZlcixiLGEuQ09MT1JfQVRUQUNITUVOVDAsYS5URVhUVVJFXzJEKSxtKGIudGV4dHVyZSxuKSYmYS5nZW5lcmF0ZU1pcG1hcChhLlRFWFRVUkVfMkQpLGMuYmluZFRleHR1cmUoYS5URVhUVVJFXzJELG51bGwpO2lmKGIuZGVwdGhCdWZmZXIpe2U9ZC5nZXQoYik7Zj0hMD09PWIuaXNXZWJHTFJlbmRlclRhcmdldEN1YmU7aWYoYi5kZXB0aFRleHR1cmUpe2lmKGYpdGhyb3cgRXJyb3IoXCJ0YXJnZXQuZGVwdGhUZXh0dXJlIG5vdCBzdXBwb3J0ZWQgaW4gQ3ViZSByZW5kZXIgdGFyZ2V0c1wiKTtpZihiJiZiLmlzV2ViR0xSZW5kZXJUYXJnZXRDdWJlKXRocm93IEVycm9yKFwiRGVwdGggVGV4dHVyZSB3aXRoIGN1YmUgcmVuZGVyIHRhcmdldHMgaXMgbm90IHN1cHBvcnRlZFwiKTtcbiAgICBhLmJpbmRGcmFtZWJ1ZmZlcihhLkZSQU1FQlVGRkVSLGUuX193ZWJnbEZyYW1lYnVmZmVyKTtpZighYi5kZXB0aFRleHR1cmV8fCFiLmRlcHRoVGV4dHVyZS5pc0RlcHRoVGV4dHVyZSl0aHJvdyBFcnJvcihcInJlbmRlclRhcmdldC5kZXB0aFRleHR1cmUgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBUSFJFRS5EZXB0aFRleHR1cmVcIik7ZC5nZXQoYi5kZXB0aFRleHR1cmUpLl9fd2ViZ2xUZXh0dXJlJiZiLmRlcHRoVGV4dHVyZS5pbWFnZS53aWR0aD09PWIud2lkdGgmJmIuZGVwdGhUZXh0dXJlLmltYWdlLmhlaWdodD09PWIuaGVpZ2h0fHwoYi5kZXB0aFRleHR1cmUuaW1hZ2Uud2lkdGg9Yi53aWR0aCxiLmRlcHRoVGV4dHVyZS5pbWFnZS5oZWlnaHQ9Yi5oZWlnaHQsYi5kZXB0aFRleHR1cmUubmVlZHNVcGRhdGU9ITApO3IoYi5kZXB0aFRleHR1cmUsMCk7ZT1kLmdldChiLmRlcHRoVGV4dHVyZSkuX193ZWJnbFRleHR1cmU7aWYoMTAyNj09PWIuZGVwdGhUZXh0dXJlLmZvcm1hdClhLmZyYW1lYnVmZmVyVGV4dHVyZTJEKGEuRlJBTUVCVUZGRVIsXG4gICAgYS5ERVBUSF9BVFRBQ0hNRU5ULGEuVEVYVFVSRV8yRCxlLDApO2Vsc2UgaWYoMTAyNz09PWIuZGVwdGhUZXh0dXJlLmZvcm1hdClhLmZyYW1lYnVmZmVyVGV4dHVyZTJEKGEuRlJBTUVCVUZGRVIsYS5ERVBUSF9TVEVOQ0lMX0FUVEFDSE1FTlQsYS5URVhUVVJFXzJELGUsMCk7ZWxzZSB0aHJvdyBFcnJvcihcIlVua25vd24gZGVwdGhUZXh0dXJlIGZvcm1hdFwiKTt9ZWxzZSBpZihmKWZvcihlLl9fd2ViZ2xEZXB0aGJ1ZmZlcj1bXSxmPTA7Nj5mO2YrKylhLmJpbmRGcmFtZWJ1ZmZlcihhLkZSQU1FQlVGRkVSLGUuX193ZWJnbEZyYW1lYnVmZmVyW2ZdKSxlLl9fd2ViZ2xEZXB0aGJ1ZmZlcltmXT1hLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpLHAoZS5fX3dlYmdsRGVwdGhidWZmZXJbZl0sYik7ZWxzZSBhLmJpbmRGcmFtZWJ1ZmZlcihhLkZSQU1FQlVGRkVSLGUuX193ZWJnbEZyYW1lYnVmZmVyKSxlLl9fd2ViZ2xEZXB0aGJ1ZmZlcj1hLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpLHAoZS5fX3dlYmdsRGVwdGhidWZmZXIsXG4gICAgYik7YS5iaW5kRnJhbWVidWZmZXIoYS5GUkFNRUJVRkZFUixudWxsKX19O3RoaXMudXBkYXRlUmVuZGVyVGFyZ2V0TWlwbWFwPWZ1bmN0aW9uKGIpe3ZhciBlPWIudGV4dHVyZSxmPWsoYik7bShlLGYpJiYoYj1iLmlzV2ViR0xSZW5kZXJUYXJnZXRDdWJlP2EuVEVYVFVSRV9DVUJFX01BUDphLlRFWFRVUkVfMkQsZT1kLmdldChlKS5fX3dlYmdsVGV4dHVyZSxjLmJpbmRUZXh0dXJlKGIsZSksYS5nZW5lcmF0ZU1pcG1hcChiKSxjLmJpbmRUZXh0dXJlKGIsbnVsbCkpfTt0aGlzLnVwZGF0ZVZpZGVvVGV4dHVyZXM9ZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4geSl5W2FdLnVwZGF0ZSgpfX1mdW5jdGlvbiBCZygpe3ZhciBhPXt9O3JldHVybntnZXQ6ZnVuY3Rpb24oYil7Yj1iLnV1aWQ7dmFyIGM9YVtiXTt2b2lkIDA9PT1jJiYoYz17fSxhW2JdPWMpO3JldHVybiBjfSxyZW1vdmU6ZnVuY3Rpb24oYil7ZGVsZXRlIGFbYi51dWlkXX0sY2xlYXI6ZnVuY3Rpb24oKXthPXt9fX19ZnVuY3Rpb24gQ2coYSxcbiAgICBiLGMpe2Z1bmN0aW9uIGQoYixjLGQpe3ZhciBlPW5ldyBVaW50OEFycmF5KDQpLGY9YS5jcmVhdGVUZXh0dXJlKCk7YS5iaW5kVGV4dHVyZShiLGYpO2EudGV4UGFyYW1ldGVyaShiLGEuVEVYVFVSRV9NSU5fRklMVEVSLGEuTkVBUkVTVCk7YS50ZXhQYXJhbWV0ZXJpKGIsYS5URVhUVVJFX01BR19GSUxURVIsYS5ORUFSRVNUKTtmb3IoYj0wO2I8ZDtiKyspYS50ZXhJbWFnZTJEKGMrYiwwLGEuUkdCQSwxLDEsMCxhLlJHQkEsYS5VTlNJR05FRF9CWVRFLGUpO3JldHVybiBmfWZ1bmN0aW9uIGUoYil7ITAhPT15W2JdJiYoYS5lbmFibGUoYikseVtiXT0hMCl9ZnVuY3Rpb24gZihiKXshMSE9PXlbYl0mJihhLmRpc2FibGUoYikseVtiXT0hMSl9ZnVuY3Rpb24gZyhiLGQsZyxoLGssbSxxLG4pezAhPT1iP2UoYS5CTEVORCk6ZihhLkJMRU5EKTtpZig1IT09Yil7aWYoYiE9PUp8fG4hPT1sYSlzd2l0Y2goYil7Y2FzZSAyOm4/KGEuYmxlbmRFcXVhdGlvblNlcGFyYXRlKGEuRlVOQ19BREQsXG4gICAgYS5GVU5DX0FERCksYS5ibGVuZEZ1bmNTZXBhcmF0ZShhLk9ORSxhLk9ORSxhLk9ORSxhLk9ORSkpOihhLmJsZW5kRXF1YXRpb24oYS5GVU5DX0FERCksYS5ibGVuZEZ1bmMoYS5TUkNfQUxQSEEsYS5PTkUpKTticmVhaztjYXNlIDM6bj8oYS5ibGVuZEVxdWF0aW9uU2VwYXJhdGUoYS5GVU5DX0FERCxhLkZVTkNfQUREKSxhLmJsZW5kRnVuY1NlcGFyYXRlKGEuWkVSTyxhLlpFUk8sYS5PTkVfTUlOVVNfU1JDX0NPTE9SLGEuT05FX01JTlVTX1NSQ19BTFBIQSkpOihhLmJsZW5kRXF1YXRpb24oYS5GVU5DX0FERCksYS5ibGVuZEZ1bmMoYS5aRVJPLGEuT05FX01JTlVTX1NSQ19DT0xPUikpO2JyZWFrO2Nhc2UgNDpuPyhhLmJsZW5kRXF1YXRpb25TZXBhcmF0ZShhLkZVTkNfQURELGEuRlVOQ19BREQpLGEuYmxlbmRGdW5jU2VwYXJhdGUoYS5aRVJPLGEuU1JDX0NPTE9SLGEuWkVSTyxhLlNSQ19BTFBIQSkpOihhLmJsZW5kRXF1YXRpb24oYS5GVU5DX0FERCksYS5ibGVuZEZ1bmMoYS5aRVJPLFxuICAgIGEuU1JDX0NPTE9SKSk7YnJlYWs7ZGVmYXVsdDpuPyhhLmJsZW5kRXF1YXRpb25TZXBhcmF0ZShhLkZVTkNfQURELGEuRlVOQ19BREQpLGEuYmxlbmRGdW5jU2VwYXJhdGUoYS5PTkUsYS5PTkVfTUlOVVNfU1JDX0FMUEhBLGEuT05FLGEuT05FX01JTlVTX1NSQ19BTFBIQSkpOihhLmJsZW5kRXF1YXRpb25TZXBhcmF0ZShhLkZVTkNfQURELGEuRlVOQ19BREQpLGEuYmxlbmRGdW5jU2VwYXJhdGUoYS5TUkNfQUxQSEEsYS5PTkVfTUlOVVNfU1JDX0FMUEhBLGEuT05FLGEuT05FX01JTlVTX1NSQ19BTFBIQSkpfUg9RT1DPUQ9Qj14PW51bGx9ZWxzZXtrPWt8fGQ7bT1tfHxnO3E9cXx8aDtpZihkIT09eHx8ayE9PUMpYS5ibGVuZEVxdWF0aW9uU2VwYXJhdGUoYy5jb252ZXJ0KGQpLGMuY29udmVydChrKSkseD1kLEM9aztpZihnIT09Qnx8aCE9PUR8fG0hPT1FfHxxIT09SClhLmJsZW5kRnVuY1NlcGFyYXRlKGMuY29udmVydChnKSxjLmNvbnZlcnQoaCksYy5jb252ZXJ0KG0pLGMuY29udmVydChxKSksXG4gICAgQj1nLEQ9aCxFPW0sSD1xfUo9YjtsYT1ufWZ1bmN0aW9uIGgoYil7UyE9PWImJihiP2EuZnJvbnRGYWNlKGEuQ1cpOmEuZnJvbnRGYWNlKGEuQ0NXKSxTPWIpfWZ1bmN0aW9uIGsoYil7MCE9PWI/KGUoYS5DVUxMX0ZBQ0UpLGIhPT1LJiYoMT09PWI/YS5jdWxsRmFjZShhLkJBQ0spOjI9PT1iP2EuY3VsbEZhY2UoYS5GUk9OVCk6YS5jdWxsRmFjZShhLkZST05UX0FORF9CQUNLKSkpOmYoYS5DVUxMX0ZBQ0UpO0s9Yn1mdW5jdGlvbiBtKGIsYyxkKXtpZihiKXtpZihlKGEuUE9MWUdPTl9PRkZTRVRfRklMTCksTCE9PWN8fE8hPT1kKWEucG9seWdvbk9mZnNldChjLGQpLEw9YyxPPWR9ZWxzZSBmKGEuUE9MWUdPTl9PRkZTRVRfRklMTCl9ZnVuY3Rpb24gcShiKXt2b2lkIDA9PT1iJiYoYj1hLlRFWFRVUkUwK1EtMSk7TSE9PWImJihhLmFjdGl2ZVRleHR1cmUoYiksTT1iKX12YXIgbj1uZXcgZnVuY3Rpb24oKXt2YXIgYj0hMSxjPW5ldyBhYSxkPW51bGwsZT1uZXcgYWEoMCwwLDAsMCk7XG4gICAgcmV0dXJue3NldE1hc2s6ZnVuY3Rpb24oYyl7ZD09PWN8fGJ8fChhLmNvbG9yTWFzayhjLGMsYyxjKSxkPWMpfSxzZXRMb2NrZWQ6ZnVuY3Rpb24oYSl7Yj1hfSxzZXRDbGVhcjpmdW5jdGlvbihiLGQsZixnLGgpeyEwPT09aCYmKGIqPWcsZCo9ZyxmKj1nKTtjLnNldChiLGQsZixnKTshMT09PWUuZXF1YWxzKGMpJiYoYS5jbGVhckNvbG9yKGIsZCxmLGcpLGUuY29weShjKSl9LHJlc2V0OmZ1bmN0aW9uKCl7Yj0hMTtkPW51bGw7ZS5zZXQoLTEsMCwwLDApfX19LHU9bmV3IGZ1bmN0aW9uKCl7dmFyIGI9ITEsYz1udWxsLGQ9bnVsbCxnPW51bGw7cmV0dXJue3NldFRlc3Q6ZnVuY3Rpb24oYil7Yj9lKGEuREVQVEhfVEVTVCk6ZihhLkRFUFRIX1RFU1QpfSxzZXRNYXNrOmZ1bmN0aW9uKGQpe2M9PT1kfHxifHwoYS5kZXB0aE1hc2soZCksYz1kKX0sc2V0RnVuYzpmdW5jdGlvbihiKXtpZihkIT09Yil7aWYoYilzd2l0Y2goYil7Y2FzZSAwOmEuZGVwdGhGdW5jKGEuTkVWRVIpO2JyZWFrO1xuICAgIGNhc2UgMTphLmRlcHRoRnVuYyhhLkFMV0FZUyk7YnJlYWs7Y2FzZSAyOmEuZGVwdGhGdW5jKGEuTEVTUyk7YnJlYWs7Y2FzZSAzOmEuZGVwdGhGdW5jKGEuTEVRVUFMKTticmVhaztjYXNlIDQ6YS5kZXB0aEZ1bmMoYS5FUVVBTCk7YnJlYWs7Y2FzZSA1OmEuZGVwdGhGdW5jKGEuR0VRVUFMKTticmVhaztjYXNlIDY6YS5kZXB0aEZ1bmMoYS5HUkVBVEVSKTticmVhaztjYXNlIDc6YS5kZXB0aEZ1bmMoYS5OT1RFUVVBTCk7YnJlYWs7ZGVmYXVsdDphLmRlcHRoRnVuYyhhLkxFUVVBTCl9ZWxzZSBhLmRlcHRoRnVuYyhhLkxFUVVBTCk7ZD1ifX0sc2V0TG9ja2VkOmZ1bmN0aW9uKGEpe2I9YX0sc2V0Q2xlYXI6ZnVuY3Rpb24oYil7ZyE9PWImJihhLmNsZWFyRGVwdGgoYiksZz1iKX0scmVzZXQ6ZnVuY3Rpb24oKXtiPSExO2c9ZD1jPW51bGx9fX0scj1uZXcgZnVuY3Rpb24oKXt2YXIgYj0hMSxjPW51bGwsZD1udWxsLGc9bnVsbCxoPW51bGwsaz1udWxsLG09bnVsbCxuPW51bGwscT1udWxsO1xuICAgIHJldHVybntzZXRUZXN0OmZ1bmN0aW9uKGIpe2I/ZShhLlNURU5DSUxfVEVTVCk6ZihhLlNURU5DSUxfVEVTVCl9LHNldE1hc2s6ZnVuY3Rpb24oZCl7Yz09PWR8fGJ8fChhLnN0ZW5jaWxNYXNrKGQpLGM9ZCl9LHNldEZ1bmM6ZnVuY3Rpb24oYixjLGUpe2lmKGQhPT1ifHxnIT09Y3x8aCE9PWUpYS5zdGVuY2lsRnVuYyhiLGMsZSksZD1iLGc9YyxoPWV9LHNldE9wOmZ1bmN0aW9uKGIsYyxkKXtpZihrIT09Ynx8bSE9PWN8fG4hPT1kKWEuc3RlbmNpbE9wKGIsYyxkKSxrPWIsbT1jLG49ZH0sc2V0TG9ja2VkOmZ1bmN0aW9uKGEpe2I9YX0sc2V0Q2xlYXI6ZnVuY3Rpb24oYil7cSE9PWImJihhLmNsZWFyU3RlbmNpbChiKSxxPWIpfSxyZXNldDpmdW5jdGlvbigpe2I9ITE7cT1uPW09az1oPWc9ZD1jPW51bGx9fX0sbD1hLmdldFBhcmFtZXRlcihhLk1BWF9WRVJURVhfQVRUUklCUyksdj1uZXcgVWludDhBcnJheShsKSxwPW5ldyBVaW50OEFycmF5KGwpLHo9bmV3IFVpbnQ4QXJyYXkobCksXG4gICAgeT17fSxJPW51bGwsQT1udWxsLEo9bnVsbCx4PW51bGwsQj1udWxsLEQ9bnVsbCxDPW51bGwsRT1udWxsLEg9bnVsbCxsYT0hMSxTPW51bGwsSz1udWxsLE49bnVsbCxMPW51bGwsTz1udWxsLFE9YS5nZXRQYXJhbWV0ZXIoYS5NQVhfQ09NQklORURfVEVYVFVSRV9JTUFHRV9VTklUUyksbD1wYXJzZUZsb2F0KC9eV2ViR0xcXCAoWzAtOV0pLy5leGVjKGEuZ2V0UGFyYW1ldGVyKGEuVkVSU0lPTikpWzFdKSxWPTE8PXBhcnNlRmxvYXQobCksTT1udWxsLFA9e30sUj1uZXcgYWEsRz1uZXcgYWEsWT17fTtZW2EuVEVYVFVSRV8yRF09ZChhLlRFWFRVUkVfMkQsYS5URVhUVVJFXzJELDEpO1lbYS5URVhUVVJFX0NVQkVfTUFQXT1kKGEuVEVYVFVSRV9DVUJFX01BUCxhLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCw2KTtuLnNldENsZWFyKDAsMCwwLDEpO3Uuc2V0Q2xlYXIoMSk7ci5zZXRDbGVhcigwKTtlKGEuREVQVEhfVEVTVCk7dS5zZXRGdW5jKDMpO2goITEpO2soMSk7ZShhLkNVTExfRkFDRSk7XG4gICAgZShhLkJMRU5EKTtnKDEpO3JldHVybntidWZmZXJzOntjb2xvcjpuLGRlcHRoOnUsc3RlbmNpbDpyfSxpbml0QXR0cmlidXRlczpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9di5sZW5ndGg7YTxiO2ErKyl2W2FdPTB9LGVuYWJsZUF0dHJpYnV0ZTpmdW5jdGlvbihjKXt2W2NdPTE7MD09PXBbY10mJihhLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGMpLHBbY109MSk7MCE9PXpbY10mJihiLmdldChcIkFOR0xFX2luc3RhbmNlZF9hcnJheXNcIikudmVydGV4QXR0cmliRGl2aXNvckFOR0xFKGMsMCkseltjXT0wKX0sZW5hYmxlQXR0cmlidXRlQW5kRGl2aXNvcjpmdW5jdGlvbihjLGQpe3ZbY109MTswPT09cFtjXSYmKGEuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoYykscFtjXT0xKTt6W2NdIT09ZCYmKGIuZ2V0KFwiQU5HTEVfaW5zdGFuY2VkX2FycmF5c1wiKS52ZXJ0ZXhBdHRyaWJEaXZpc29yQU5HTEUoYyxkKSx6W2NdPWQpfSxkaXNhYmxlVW51c2VkQXR0cmlidXRlczpmdW5jdGlvbigpe2Zvcih2YXIgYj1cbiAgICAwLGM9cC5sZW5ndGg7YiE9PWM7KytiKXBbYl0hPT12W2JdJiYoYS5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoYikscFtiXT0wKX0sZW5hYmxlOmUsZGlzYWJsZTpmLGdldENvbXByZXNzZWRUZXh0dXJlRm9ybWF0czpmdW5jdGlvbigpe2lmKG51bGw9PT1JJiYoST1bXSxiLmdldChcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0Y1wiKXx8Yi5nZXQoXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKXx8Yi5nZXQoXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfZXRjMVwiKSkpZm9yKHZhciBjPWEuZ2V0UGFyYW1ldGVyKGEuQ09NUFJFU1NFRF9URVhUVVJFX0ZPUk1BVFMpLGQ9MDtkPGMubGVuZ3RoO2QrKylJLnB1c2goY1tkXSk7cmV0dXJuIEl9LHVzZVByb2dyYW06ZnVuY3Rpb24oYil7cmV0dXJuIEEhPT1iPyhhLnVzZVByb2dyYW0oYiksQT1iLCEwKTohMX0sc2V0QmxlbmRpbmc6ZyxzZXRNYXRlcmlhbDpmdW5jdGlvbihiLGMpezI9PT1iLnNpZGU/ZihhLkNVTExfRkFDRSk6XG4gICAgZShhLkNVTExfRkFDRSk7dmFyIGQ9MT09PWIuc2lkZTtjJiYoZD0hZCk7aChkKTshMD09PWIudHJhbnNwYXJlbnQ/ZyhiLmJsZW5kaW5nLGIuYmxlbmRFcXVhdGlvbixiLmJsZW5kU3JjLGIuYmxlbmREc3QsYi5ibGVuZEVxdWF0aW9uQWxwaGEsYi5ibGVuZFNyY0FscGhhLGIuYmxlbmREc3RBbHBoYSxiLnByZW11bHRpcGxpZWRBbHBoYSk6ZygwKTt1LnNldEZ1bmMoYi5kZXB0aEZ1bmMpO3Uuc2V0VGVzdChiLmRlcHRoVGVzdCk7dS5zZXRNYXNrKGIuZGVwdGhXcml0ZSk7bi5zZXRNYXNrKGIuY29sb3JXcml0ZSk7bShiLnBvbHlnb25PZmZzZXQsYi5wb2x5Z29uT2Zmc2V0RmFjdG9yLGIucG9seWdvbk9mZnNldFVuaXRzKX0sc2V0RmxpcFNpZGVkOmgsc2V0Q3VsbEZhY2U6ayxzZXRMaW5lV2lkdGg6ZnVuY3Rpb24oYil7YiE9PU4mJihWJiZhLmxpbmVXaWR0aChiKSxOPWIpfSxzZXRQb2x5Z29uT2Zmc2V0Om0sc2V0U2Npc3NvclRlc3Q6ZnVuY3Rpb24oYil7Yj9lKGEuU0NJU1NPUl9URVNUKTpcbiAgICBmKGEuU0NJU1NPUl9URVNUKX0sYWN0aXZlVGV4dHVyZTpxLGJpbmRUZXh0dXJlOmZ1bmN0aW9uKGIsYyl7bnVsbD09PU0mJnEoKTt2YXIgZD1QW01dO3ZvaWQgMD09PWQmJihkPXt0eXBlOnZvaWQgMCx0ZXh0dXJlOnZvaWQgMH0sUFtNXT1kKTtpZihkLnR5cGUhPT1ifHxkLnRleHR1cmUhPT1jKWEuYmluZFRleHR1cmUoYixjfHxZW2JdKSxkLnR5cGU9YixkLnRleHR1cmU9Y30sY29tcHJlc3NlZFRleEltYWdlMkQ6ZnVuY3Rpb24oKXt0cnl7YS5jb21wcmVzc2VkVGV4SW1hZ2UyRC5hcHBseShhLGFyZ3VtZW50cyl9Y2F0Y2goZWEpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFN0YXRlOlwiLGVhKX19LHRleEltYWdlMkQ6ZnVuY3Rpb24oKXt0cnl7YS50ZXhJbWFnZTJELmFwcGx5KGEsYXJndW1lbnRzKX1jYXRjaChlYSl7Y29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMU3RhdGU6XCIsZWEpfX0sc2Npc3NvcjpmdW5jdGlvbihiKXshMT09PVIuZXF1YWxzKGIpJiYoYS5zY2lzc29yKGIueCxcbiAgICBiLnksYi56LGIudyksUi5jb3B5KGIpKX0sdmlld3BvcnQ6ZnVuY3Rpb24oYil7ITE9PT1HLmVxdWFscyhiKSYmKGEudmlld3BvcnQoYi54LGIueSxiLnosYi53KSxHLmNvcHkoYikpfSxyZXNldDpmdW5jdGlvbigpe2Zvcih2YXIgYj0wO2I8cC5sZW5ndGg7YisrKTE9PT1wW2JdJiYoYS5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoYikscFtiXT0wKTt5PXt9O009ST1udWxsO1A9e307Sz1TPUo9QT1udWxsO24ucmVzZXQoKTt1LnJlc2V0KCk7ci5yZXNldCgpfX19ZnVuY3Rpb24gRGcoYSxiLGMpe2Z1bmN0aW9uIGQoYil7aWYoXCJoaWdocFwiPT09Yil7aWYoMDxhLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChhLlZFUlRFWF9TSEFERVIsYS5ISUdIX0ZMT0FUKS5wcmVjaXNpb24mJjA8YS5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoYS5GUkFHTUVOVF9TSEFERVIsYS5ISUdIX0ZMT0FUKS5wcmVjaXNpb24pcmV0dXJuXCJoaWdocFwiO2I9XCJtZWRpdW1wXCJ9cmV0dXJuXCJtZWRpdW1wXCI9PT1iJiZcbiAgICAwPGEuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KGEuVkVSVEVYX1NIQURFUixhLk1FRElVTV9GTE9BVCkucHJlY2lzaW9uJiYwPGEuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KGEuRlJBR01FTlRfU0hBREVSLGEuTUVESVVNX0ZMT0FUKS5wcmVjaXNpb24/XCJtZWRpdW1wXCI6XCJsb3dwXCJ9dmFyIGUsZj12b2lkIDAhPT1jLnByZWNpc2lvbj9jLnByZWNpc2lvbjpcImhpZ2hwXCIsZz1kKGYpO2chPT1mJiYoY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjpcIixmLFwibm90IHN1cHBvcnRlZCwgdXNpbmdcIixnLFwiaW5zdGVhZC5cIiksZj1nKTtjPSEwPT09Yy5sb2dhcml0aG1pY0RlcHRoQnVmZmVyO3ZhciBnPWEuZ2V0UGFyYW1ldGVyKGEuTUFYX1RFWFRVUkVfSU1BR0VfVU5JVFMpLGg9YS5nZXRQYXJhbWV0ZXIoYS5NQVhfVkVSVEVYX1RFWFRVUkVfSU1BR0VfVU5JVFMpLGs9YS5nZXRQYXJhbWV0ZXIoYS5NQVhfVEVYVFVSRV9TSVpFKSxtPWEuZ2V0UGFyYW1ldGVyKGEuTUFYX0NVQkVfTUFQX1RFWFRVUkVfU0laRSksXG4gICAgcT1hLmdldFBhcmFtZXRlcihhLk1BWF9WRVJURVhfQVRUUklCUyksbj1hLmdldFBhcmFtZXRlcihhLk1BWF9WRVJURVhfVU5JRk9STV9WRUNUT1JTKSx1PWEuZ2V0UGFyYW1ldGVyKGEuTUFYX1ZBUllJTkdfVkVDVE9SUykscj1hLmdldFBhcmFtZXRlcihhLk1BWF9GUkFHTUVOVF9VTklGT1JNX1ZFQ1RPUlMpLGw9MDxoLHY9ISFiLmdldChcIk9FU190ZXh0dXJlX2Zsb2F0XCIpO3JldHVybntnZXRNYXhBbmlzb3Ryb3B5OmZ1bmN0aW9uKCl7aWYodm9pZCAwIT09ZSlyZXR1cm4gZTt2YXIgYz1iLmdldChcIkVYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY1wiKTtyZXR1cm4gZT1udWxsIT09Yz9hLmdldFBhcmFtZXRlcihjLk1BWF9URVhUVVJFX01BWF9BTklTT1RST1BZX0VYVCk6MH0sZ2V0TWF4UHJlY2lzaW9uOmQscHJlY2lzaW9uOmYsbG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcjpjLG1heFRleHR1cmVzOmcsbWF4VmVydGV4VGV4dHVyZXM6aCxtYXhUZXh0dXJlU2l6ZTprLG1heEN1YmVtYXBTaXplOm0sXG4gICAgbWF4QXR0cmlidXRlczpxLG1heFZlcnRleFVuaWZvcm1zOm4sbWF4VmFyeWluZ3M6dSxtYXhGcmFnbWVudFVuaWZvcm1zOnIsdmVydGV4VGV4dHVyZXM6bCxmbG9hdEZyYWdtZW50VGV4dHVyZXM6dixmbG9hdFZlcnRleFRleHR1cmVzOmwmJnZ9fWZ1bmN0aW9uIGJhKGEsYixjLGQpe1RhLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiUGVyc3BlY3RpdmVDYW1lcmFcIjt0aGlzLmZvdj12b2lkIDAhPT1hP2E6NTA7dGhpcy56b29tPTE7dGhpcy5uZWFyPXZvaWQgMCE9PWM/YzouMTt0aGlzLmZhcj12b2lkIDAhPT1kP2Q6MkUzO3RoaXMuZm9jdXM9MTA7dGhpcy5hc3BlY3Q9dm9pZCAwIT09Yj9iOjE7dGhpcy52aWV3PW51bGw7dGhpcy5maWxtR2F1Z2U9MzU7dGhpcy5maWxtT2Zmc2V0PTA7dGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9ZnVuY3Rpb24gdWQoYSl7YmEuY2FsbCh0aGlzKTt0aGlzLmNhbWVyYXM9YXx8W119ZnVuY3Rpb24gYmUoYSl7ZnVuY3Rpb24gYigpe2lmKG51bGwhPT1cbiAgICBkJiZkLmlzUHJlc2VudGluZyl7dmFyIGI9ZC5nZXRFeWVQYXJhbWV0ZXJzKFwibGVmdFwiKSxlPWIucmVuZGVyV2lkdGgsYj1iLnJlbmRlckhlaWdodDtuPWEuZ2V0UGl4ZWxSYXRpbygpO3E9YS5nZXRTaXplKCk7YS5zZXREcmF3aW5nQnVmZmVyU2l6ZSgyKmUsYiwxKX1lbHNlIGMuZW5hYmxlZCYmYS5zZXREcmF3aW5nQnVmZmVyU2l6ZShxLndpZHRoLHEuaGVpZ2h0LG4pfXZhciBjPXRoaXMsZD1udWxsLGU9bnVsbCxmPW51bGw7XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiB3aW5kb3cmJlwiVlJGcmFtZURhdGFcImluIHdpbmRvdyYmKGU9bmV3IHdpbmRvdy5WUkZyYW1lRGF0YSk7dmFyIGc9bmV3IE8saD1uZXcgYmE7aC5ib3VuZHM9bmV3IGFhKDAsMCwuNSwxKTtoLmxheWVycy5lbmFibGUoMSk7dmFyIGs9bmV3IGJhO2suYm91bmRzPW5ldyBhYSguNSwwLC41LDEpO2subGF5ZXJzLmVuYWJsZSgyKTt2YXIgbT1uZXcgdWQoW2gsa10pO20ubGF5ZXJzLmVuYWJsZSgxKTttLmxheWVycy5lbmFibGUoMik7XG4gICAgdmFyIHEsbjtcInVuZGVmaW5lZFwiIT09dHlwZW9mIHdpbmRvdyYmd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ2cmRpc3BsYXlwcmVzZW50Y2hhbmdlXCIsYiwhMSk7dGhpcy5lbmFibGVkPSExO3RoaXMuZ2V0RGV2aWNlPWZ1bmN0aW9uKCl7cmV0dXJuIGR9O3RoaXMuc2V0RGV2aWNlPWZ1bmN0aW9uKGEpe3ZvaWQgMCE9PWEmJihkPWEpfTt0aGlzLnNldFBvc2VUYXJnZXQ9ZnVuY3Rpb24oYSl7dm9pZCAwIT09YSYmKGY9YSl9O3RoaXMuZ2V0Q2FtZXJhPWZ1bmN0aW9uKGEpe2lmKG51bGw9PT1kKXJldHVybiBhO2QuZGVwdGhOZWFyPWEubmVhcjtkLmRlcHRoRmFyPWEuZmFyO2QuZ2V0RnJhbWVEYXRhKGUpO3ZhciBiPWUucG9zZSxjPW51bGwhPT1mP2Y6YTtudWxsIT09Yi5wb3NpdGlvbj9jLnBvc2l0aW9uLmZyb21BcnJheShiLnBvc2l0aW9uKTpjLnBvc2l0aW9uLnNldCgwLDAsMCk7bnVsbCE9PWIub3JpZW50YXRpb24mJmMucXVhdGVybmlvbi5mcm9tQXJyYXkoYi5vcmllbnRhdGlvbik7XG4gICAgYy51cGRhdGVNYXRyaXhXb3JsZCgpO2lmKCExPT09ZC5pc1ByZXNlbnRpbmcpcmV0dXJuIGE7aC5uZWFyPWEubmVhcjtrLm5lYXI9YS5uZWFyO2guZmFyPWEuZmFyO2suZmFyPWEuZmFyO20ubWF0cml4V29ybGQuY29weShhLm1hdHJpeFdvcmxkKTttLm1hdHJpeFdvcmxkSW52ZXJzZS5jb3B5KGEubWF0cml4V29ybGRJbnZlcnNlKTtoLm1hdHJpeFdvcmxkSW52ZXJzZS5mcm9tQXJyYXkoZS5sZWZ0Vmlld01hdHJpeCk7ay5tYXRyaXhXb3JsZEludmVyc2UuZnJvbUFycmF5KGUucmlnaHRWaWV3TWF0cml4KTthPWMucGFyZW50O251bGwhPT1hJiYoZy5nZXRJbnZlcnNlKGEubWF0cml4V29ybGQpLGgubWF0cml4V29ybGRJbnZlcnNlLm11bHRpcGx5KGcpLGsubWF0cml4V29ybGRJbnZlcnNlLm11bHRpcGx5KGcpKTtoLm1hdHJpeFdvcmxkLmdldEludmVyc2UoaC5tYXRyaXhXb3JsZEludmVyc2UpO2subWF0cml4V29ybGQuZ2V0SW52ZXJzZShrLm1hdHJpeFdvcmxkSW52ZXJzZSk7aC5wcm9qZWN0aW9uTWF0cml4LmZyb21BcnJheShlLmxlZnRQcm9qZWN0aW9uTWF0cml4KTtcbiAgICBrLnByb2plY3Rpb25NYXRyaXguZnJvbUFycmF5KGUucmlnaHRQcm9qZWN0aW9uTWF0cml4KTttLnByb2plY3Rpb25NYXRyaXguY29weShoLnByb2plY3Rpb25NYXRyaXgpO2E9ZC5nZXRMYXllcnMoKTthLmxlbmd0aCYmKGE9YVswXSxudWxsIT09YS5sZWZ0Qm91bmRzJiY0PT09YS5sZWZ0Qm91bmRzLmxlbmd0aCYmaC5ib3VuZHMuZnJvbUFycmF5KGEubGVmdEJvdW5kcyksbnVsbCE9PWEucmlnaHRCb3VuZHMmJjQ9PT1hLnJpZ2h0Qm91bmRzLmxlbmd0aCYmay5ib3VuZHMuZnJvbUFycmF5KGEucmlnaHRCb3VuZHMpKTtyZXR1cm4gbX07dGhpcy5zdWJtaXRGcmFtZT1mdW5jdGlvbigpe2QmJmQuaXNQcmVzZW50aW5nJiZkLnN1Ym1pdEZyYW1lKCl9O3RoaXMuZGlzcG9zZT1mdW5jdGlvbigpe1widW5kZWZpbmVkXCIhPT10eXBlb2Ygd2luZG93JiZ3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZyZGlzcGxheXByZXNlbnRjaGFuZ2VcIixiKX19ZnVuY3Rpb24gRWcoYSl7dmFyIGI9e307XG4gICAgcmV0dXJue2dldDpmdW5jdGlvbihjKXtpZih2b2lkIDAhPT1iW2NdKXJldHVybiBiW2NdO3N3aXRjaChjKXtjYXNlIFwiV0VCR0xfZGVwdGhfdGV4dHVyZVwiOnZhciBkPWEuZ2V0RXh0ZW5zaW9uKFwiV0VCR0xfZGVwdGhfdGV4dHVyZVwiKXx8YS5nZXRFeHRlbnNpb24oXCJNT1pfV0VCR0xfZGVwdGhfdGV4dHVyZVwiKXx8YS5nZXRFeHRlbnNpb24oXCJXRUJLSVRfV0VCR0xfZGVwdGhfdGV4dHVyZVwiKTticmVhaztjYXNlIFwiRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljXCI6ZD1hLmdldEV4dGVuc2lvbihcIkVYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY1wiKXx8YS5nZXRFeHRlbnNpb24oXCJNT1pfRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljXCIpfHxhLmdldEV4dGVuc2lvbihcIldFQktJVF9FWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWNcIik7YnJlYWs7Y2FzZSBcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCI6ZD1hLmdldEV4dGVuc2lvbihcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpfHxcbiAgICBhLmdldEV4dGVuc2lvbihcIk1PWl9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKXx8YS5nZXRFeHRlbnNpb24oXCJXRUJLSVRfV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIik7YnJlYWs7Y2FzZSBcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0Y1wiOmQ9YS5nZXRFeHRlbnNpb24oXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGNcIil8fGEuZ2V0RXh0ZW5zaW9uKFwiV0VCS0lUX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0Y1wiKTticmVhaztjYXNlIFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2V0YzFcIjpkPWEuZ2V0RXh0ZW5zaW9uKFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2V0YzFcIik7YnJlYWs7ZGVmYXVsdDpkPWEuZ2V0RXh0ZW5zaW9uKGMpfW51bGw9PT1kJiZjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBcIitjK1wiIGV4dGVuc2lvbiBub3Qgc3VwcG9ydGVkLlwiKTtyZXR1cm4gYltjXT1kfX19ZnVuY3Rpb24gRmcoKXtmdW5jdGlvbiBhKCl7bS52YWx1ZSE9PVxuICAgIGQmJihtLnZhbHVlPWQsbS5uZWVkc1VwZGF0ZT0wPGUpO2MubnVtUGxhbmVzPWU7Yy5udW1JbnRlcnNlY3Rpb249MH1mdW5jdGlvbiBiKGEsYixkLGUpe3ZhciBmPW51bGwhPT1hP2EubGVuZ3RoOjAsZz1udWxsO2lmKDAhPT1mKXtnPW0udmFsdWU7aWYoITAhPT1lfHxudWxsPT09Zyl7ZT1kKzQqZjtiPWIubWF0cml4V29ybGRJbnZlcnNlO2suZ2V0Tm9ybWFsTWF0cml4KGIpO2lmKG51bGw9PT1nfHxnLmxlbmd0aDxlKWc9bmV3IEZsb2F0MzJBcnJheShlKTtmb3IoZT0wO2UhPT1mOysrZSxkKz00KWguY29weShhW2VdKS5hcHBseU1hdHJpeDQoYixrKSxoLm5vcm1hbC50b0FycmF5KGcsZCksZ1tkKzNdPWguY29uc3RhbnR9bS52YWx1ZT1nO20ubmVlZHNVcGRhdGU9ITB9Yy5udW1QbGFuZXM9ZjtyZXR1cm4gZ312YXIgYz10aGlzLGQ9bnVsbCxlPTAsZj0hMSxnPSExLGg9bmV3IEVhLGs9bmV3IG1hLG09e3ZhbHVlOm51bGwsbmVlZHNVcGRhdGU6ITF9O3RoaXMudW5pZm9ybT1tO3RoaXMubnVtSW50ZXJzZWN0aW9uPVxuICAgIHRoaXMubnVtUGxhbmVzPTA7dGhpcy5pbml0PWZ1bmN0aW9uKGEsYyxnKXt2YXIgaD0wIT09YS5sZW5ndGh8fGN8fDAhPT1lfHxmO2Y9YztkPWIoYSxnLDApO2U9YS5sZW5ndGg7cmV0dXJuIGh9O3RoaXMuYmVnaW5TaGFkb3dzPWZ1bmN0aW9uKCl7Zz0hMDtiKG51bGwpfTt0aGlzLmVuZFNoYWRvd3M9ZnVuY3Rpb24oKXtnPSExO2EoKX07dGhpcy5zZXRTdGF0ZT1mdW5jdGlvbihjLGgsayxsLHQsdil7aWYoIWZ8fG51bGw9PT1jfHwwPT09Yy5sZW5ndGh8fGcmJiFrKWc/YihudWxsKTphKCk7ZWxzZXtrPWc/MDplO3ZhciBuPTQqayxxPXQuY2xpcHBpbmdTdGF0ZXx8bnVsbDttLnZhbHVlPXE7cT1iKGMsbCxuLHYpO2ZvcihjPTA7YyE9PW47KytjKXFbY109ZFtjXTt0LmNsaXBwaW5nU3RhdGU9cTt0aGlzLm51bUludGVyc2VjdGlvbj1oP3RoaXMubnVtUGxhbmVzOjA7dGhpcy5udW1QbGFuZXMrPWt9fX1mdW5jdGlvbiBhZihhLGIpe3JldHVybntjb252ZXJ0OmZ1bmN0aW9uKGMpe2lmKDFFMz09PVxuICAgIGMpcmV0dXJuIGEuUkVQRUFUO2lmKDEwMDE9PT1jKXJldHVybiBhLkNMQU1QX1RPX0VER0U7aWYoMTAwMj09PWMpcmV0dXJuIGEuTUlSUk9SRURfUkVQRUFUO2lmKDEwMDM9PT1jKXJldHVybiBhLk5FQVJFU1Q7aWYoMTAwND09PWMpcmV0dXJuIGEuTkVBUkVTVF9NSVBNQVBfTkVBUkVTVDtpZigxMDA1PT09YylyZXR1cm4gYS5ORUFSRVNUX01JUE1BUF9MSU5FQVI7aWYoMTAwNj09PWMpcmV0dXJuIGEuTElORUFSO2lmKDEwMDc9PT1jKXJldHVybiBhLkxJTkVBUl9NSVBNQVBfTkVBUkVTVDtpZigxMDA4PT09YylyZXR1cm4gYS5MSU5FQVJfTUlQTUFQX0xJTkVBUjtpZigxMDA5PT09YylyZXR1cm4gYS5VTlNJR05FRF9CWVRFO2lmKDEwMTc9PT1jKXJldHVybiBhLlVOU0lHTkVEX1NIT1JUXzRfNF80XzQ7aWYoMTAxOD09PWMpcmV0dXJuIGEuVU5TSUdORURfU0hPUlRfNV81XzVfMTtpZigxMDE5PT09YylyZXR1cm4gYS5VTlNJR05FRF9TSE9SVF81XzZfNTtpZigxMDEwPT09YylyZXR1cm4gYS5CWVRFO1xuICAgIGlmKDEwMTE9PT1jKXJldHVybiBhLlNIT1JUO2lmKDEwMTI9PT1jKXJldHVybiBhLlVOU0lHTkVEX1NIT1JUO2lmKDEwMTM9PT1jKXJldHVybiBhLklOVDtpZigxMDE0PT09YylyZXR1cm4gYS5VTlNJR05FRF9JTlQ7aWYoMTAxNT09PWMpcmV0dXJuIGEuRkxPQVQ7aWYoMTAxNj09PWMpe3ZhciBkPWIuZ2V0KFwiT0VTX3RleHR1cmVfaGFsZl9mbG9hdFwiKTtpZihudWxsIT09ZClyZXR1cm4gZC5IQUxGX0ZMT0FUX09FU31pZigxMDIxPT09YylyZXR1cm4gYS5BTFBIQTtpZigxMDIyPT09YylyZXR1cm4gYS5SR0I7aWYoMTAyMz09PWMpcmV0dXJuIGEuUkdCQTtpZigxMDI0PT09YylyZXR1cm4gYS5MVU1JTkFOQ0U7aWYoMTAyNT09PWMpcmV0dXJuIGEuTFVNSU5BTkNFX0FMUEhBO2lmKDEwMjY9PT1jKXJldHVybiBhLkRFUFRIX0NPTVBPTkVOVDtpZigxMDI3PT09YylyZXR1cm4gYS5ERVBUSF9TVEVOQ0lMO2lmKDEwMD09PWMpcmV0dXJuIGEuRlVOQ19BREQ7aWYoMTAxPT09YylyZXR1cm4gYS5GVU5DX1NVQlRSQUNUO1xuICAgIGlmKDEwMj09PWMpcmV0dXJuIGEuRlVOQ19SRVZFUlNFX1NVQlRSQUNUO2lmKDIwMD09PWMpcmV0dXJuIGEuWkVSTztpZigyMDE9PT1jKXJldHVybiBhLk9ORTtpZigyMDI9PT1jKXJldHVybiBhLlNSQ19DT0xPUjtpZigyMDM9PT1jKXJldHVybiBhLk9ORV9NSU5VU19TUkNfQ09MT1I7aWYoMjA0PT09YylyZXR1cm4gYS5TUkNfQUxQSEE7aWYoMjA1PT09YylyZXR1cm4gYS5PTkVfTUlOVVNfU1JDX0FMUEhBO2lmKDIwNj09PWMpcmV0dXJuIGEuRFNUX0FMUEhBO2lmKDIwNz09PWMpcmV0dXJuIGEuT05FX01JTlVTX0RTVF9BTFBIQTtpZigyMDg9PT1jKXJldHVybiBhLkRTVF9DT0xPUjtpZigyMDk9PT1jKXJldHVybiBhLk9ORV9NSU5VU19EU1RfQ09MT1I7aWYoMjEwPT09YylyZXR1cm4gYS5TUkNfQUxQSEFfU0FUVVJBVEU7aWYoMjAwMT09PWN8fDIwMDI9PT1jfHwyMDAzPT09Y3x8MjAwND09PWMpaWYoZD1iLmdldChcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpLG51bGwhPT1cbiAgICBkKXtpZigyMDAxPT09YylyZXR1cm4gZC5DT01QUkVTU0VEX1JHQl9TM1RDX0RYVDFfRVhUO2lmKDIwMDI9PT1jKXJldHVybiBkLkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDFfRVhUO2lmKDIwMDM9PT1jKXJldHVybiBkLkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDNfRVhUO2lmKDIwMDQ9PT1jKXJldHVybiBkLkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDVfRVhUfWlmKDIxMDA9PT1jfHwyMTAxPT09Y3x8MjEwMj09PWN8fDIxMDM9PT1jKWlmKGQ9Yi5nZXQoXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGNcIiksbnVsbCE9PWQpe2lmKDIxMDA9PT1jKXJldHVybiBkLkNPTVBSRVNTRURfUkdCX1BWUlRDXzRCUFBWMV9JTUc7aWYoMjEwMT09PWMpcmV0dXJuIGQuQ09NUFJFU1NFRF9SR0JfUFZSVENfMkJQUFYxX0lNRztpZigyMTAyPT09YylyZXR1cm4gZC5DT01QUkVTU0VEX1JHQkFfUFZSVENfNEJQUFYxX0lNRztpZigyMTAzPT09YylyZXR1cm4gZC5DT01QUkVTU0VEX1JHQkFfUFZSVENfMkJQUFYxX0lNR31pZigyMTUxPT09XG4gICAgYyYmKGQ9Yi5nZXQoXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfZXRjMVwiKSxudWxsIT09ZCkpcmV0dXJuIGQuQ09NUFJFU1NFRF9SR0JfRVRDMV9XRUJHTDtpZigxMDM9PT1jfHwxMDQ9PT1jKWlmKGQ9Yi5nZXQoXCJFWFRfYmxlbmRfbWlubWF4XCIpLG51bGwhPT1kKXtpZigxMDM9PT1jKXJldHVybiBkLk1JTl9FWFQ7aWYoMTA0PT09YylyZXR1cm4gZC5NQVhfRVhUfXJldHVybiAxMDIwPT09YyYmKGQ9Yi5nZXQoXCJXRUJHTF9kZXB0aF90ZXh0dXJlXCIpLG51bGwhPT1kKT9kLlVOU0lHTkVEX0lOVF8yNF84X1dFQkdMOjB9fX1mdW5jdGlvbiBjZShhKXtmdW5jdGlvbiBiKCl7aWE9bmV3IEVnKEYpO2lhLmdldChcIldFQkdMX2RlcHRoX3RleHR1cmVcIik7aWEuZ2V0KFwiT0VTX3RleHR1cmVfZmxvYXRcIik7aWEuZ2V0KFwiT0VTX3RleHR1cmVfZmxvYXRfbGluZWFyXCIpO2lhLmdldChcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRcIik7aWEuZ2V0KFwiT0VTX3RleHR1cmVfaGFsZl9mbG9hdF9saW5lYXJcIik7XG4gICAgaWEuZ2V0KFwiT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzXCIpO2lhLmdldChcIk9FU19lbGVtZW50X2luZGV4X3VpbnRcIik7aWEuZ2V0KFwiQU5HTEVfaW5zdGFuY2VkX2FycmF5c1wiKTtwYT1uZXcgYWYoRixpYSk7VD1uZXcgRGcoRixpYSxhKTtaPW5ldyBDZyhGLGlhLHBhKTtaLnNjaXNzb3IoWC5jb3B5KGZhKS5tdWx0aXBseVNjYWxhcih3YSkpO1oudmlld3BvcnQobmIuY29weShkYSkubXVsdGlwbHlTY2FsYXIod2EpKTtjYT1uZXcgQmc7Z2E9bmV3IEFnKEYsaWEsWixjYSxULHBhLGhhKTtxYT1uZXcgYmcoRik7cmE9bmV3IG9nKEYscWEsaGEpO3RhPW5ldyByZyhyYSxiYSk7eGE9bmV3IGxnKEYpO21hPW5ldyB6ZyhTLGlhLFQpO3VhPW5ldyBxZztzYT1uZXcgamc7amE9bmV3IGZnKFMsWixyYSxKKTt5YT1uZXcgbmcoRixpYSxiYSk7emE9bmV3IG1nKEYsaWEsYmEpO0FhPW5ldyBaZihTLEYsWixnYSxUKTtCYT1uZXcgJGYoUyxGLFosZ2EsVCk7Uy5pbmZvLnByb2dyYW1zPW1hLnByb2dyYW1zO1xuICAgIFMuY29udGV4dD1GO1MuY2FwYWJpbGl0aWVzPVQ7Uy5leHRlbnNpb25zPWlhO1MucHJvcGVydGllcz1jYTtTLnJlbmRlckxpc3RzPXNhO1Muc3RhdGU9Wn1mdW5jdGlvbiBjKGEpe2EucHJldmVudERlZmF1bHQoKTtjb25zb2xlLmxvZyhcIlRIUkVFLldlYkdMUmVuZGVyZXI6IENvbnRleHQgTG9zdC5cIik7TD0hMH1mdW5jdGlvbiBkKCl7Y29uc29sZS5sb2coXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBDb250ZXh0IFJlc3RvcmVkLlwiKTtMPSExO2IoKX1mdW5jdGlvbiBlKGEpe2E9YS50YXJnZXQ7YS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLGUpO2YoYSk7Y2EucmVtb3ZlKGEpfWZ1bmN0aW9uIGYoYSl7dmFyIGI9Y2EuZ2V0KGEpLnByb2dyYW07YS5wcm9ncmFtPXZvaWQgMDt2b2lkIDAhPT1iJiZtYS5yZWxlYXNlUHJvZ3JhbShiKX1mdW5jdGlvbiBnKGEsYixjKXthLnJlbmRlcihmdW5jdGlvbihhKXtTLnJlbmRlckJ1ZmZlckltbWVkaWF0ZShhLGIsYyl9KX1mdW5jdGlvbiBoKGEpe251bGwhPT1cbiAgICBDYSYmQ2EoYSk7KGE9a2EuZ2V0RGV2aWNlKCkpJiZhLmlzUHJlc2VudGluZz9hLnJlcXVlc3RBbmltYXRpb25GcmFtZShoKTp3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGgpfWZ1bmN0aW9uIGsoYSxiLGMpe2lmKCExIT09YS52aXNpYmxlKXtpZihhLmxheWVycy50ZXN0KGIubGF5ZXJzKSlpZihhLmlzTGlnaHQpRC5wdXNoKGEpLGEuY2FzdFNoYWRvdyYmQy5wdXNoKGEpO2Vsc2UgaWYoYS5pc1Nwcml0ZSlhLmZydXN0dW1DdWxsZWQmJiEkZC5pbnRlcnNlY3RzU3ByaXRlKGEpfHxILnB1c2goYSk7ZWxzZSBpZihhLmlzTGVuc0ZsYXJlKWxhLnB1c2goYSk7ZWxzZSBpZihhLmlzSW1tZWRpYXRlUmVuZGVyT2JqZWN0KWMmJk9iLnNldEZyb21NYXRyaXhQb3NpdGlvbihhLm1hdHJpeFdvcmxkKS5hcHBseU1hdHJpeDQodGQpLEUucHVzaChhLG51bGwsYS5tYXRlcmlhbCxPYi56LG51bGwpO2Vsc2UgaWYoYS5pc01lc2h8fGEuaXNMaW5lfHxhLmlzUG9pbnRzKWlmKGEuaXNTa2lubmVkTWVzaCYmXG4gICAgYS5za2VsZXRvbi51cGRhdGUoKSwhYS5mcnVzdHVtQ3VsbGVkfHwkZC5pbnRlcnNlY3RzT2JqZWN0KGEpKXtjJiZPYi5zZXRGcm9tTWF0cml4UG9zaXRpb24oYS5tYXRyaXhXb3JsZCkuYXBwbHlNYXRyaXg0KHRkKTt2YXIgZD10YS51cGRhdGUoYSksZT1hLm1hdGVyaWFsO2lmKEFycmF5LmlzQXJyYXkoZSkpZm9yKHZhciBmPWQuZ3JvdXBzLGc9MCxoPWYubGVuZ3RoO2c8aDtnKyspe3ZhciBtPWZbZ10sbj1lW20ubWF0ZXJpYWxJbmRleF07biYmbi52aXNpYmxlJiZFLnB1c2goYSxkLG4sT2IueixtKX1lbHNlIGUudmlzaWJsZSYmRS5wdXNoKGEsZCxlLE9iLnosbnVsbCl9YT1hLmNoaWxkcmVuO2c9MDtmb3IoaD1hLmxlbmd0aDtnPGg7ZysrKWsoYVtnXSxiLGMpfX1mdW5jdGlvbiBtKGEsYixjLGQpe2Zvcih2YXIgZT0wLGY9YS5sZW5ndGg7ZTxmO2UrKyl7dmFyIGc9YVtlXSxoPWcub2JqZWN0LGs9Zy5nZW9tZXRyeSxtPXZvaWQgMD09PWQ/Zy5tYXRlcmlhbDpkLGc9Zy5ncm91cDtpZihjLmlzQXJyYXlDYW1lcmEpe1c9XG4gICAgYztmb3IodmFyIG49Yy5jYW1lcmFzLHU9MCxsPW4ubGVuZ3RoO3U8bDt1Kyspe3ZhciByPW5bdV07aWYoaC5sYXllcnMudGVzdChyLmxheWVycykpe3ZhciB0PXIuYm91bmRzO1oudmlld3BvcnQobmIuc2V0KHQueCplYSx0LnkqVSx0LnoqZWEsdC53KlUpLm11bHRpcGx5U2NhbGFyKHdhKSk7cShoLGIscixrLG0sZyl9fX1lbHNlIFc9bnVsbCxxKGgsYixjLGssbSxnKX19ZnVuY3Rpb24gcShhLGIsYyxkLGUsZil7YS5vbkJlZm9yZVJlbmRlcihTLGIsYyxkLGUsZik7YS5tb2RlbFZpZXdNYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhjLm1hdHJpeFdvcmxkSW52ZXJzZSxhLm1hdHJpeFdvcmxkKTthLm5vcm1hbE1hdHJpeC5nZXROb3JtYWxNYXRyaXgoYS5tb2RlbFZpZXdNYXRyaXgpO2lmKGEuaXNJbW1lZGlhdGVSZW5kZXJPYmplY3Qpe3ZhciBoPWEuaXNNZXNoJiYwPmEubWF0cml4V29ybGQuZGV0ZXJtaW5hbnQoKTtaLnNldE1hdGVyaWFsKGUsaCk7aD11KGMsYi5mb2csZSxhKTtSPVwiXCI7XG4gICAgZyhhLGgsZSl9ZWxzZSBTLnJlbmRlckJ1ZmZlckRpcmVjdChjLGIuZm9nLGQsZSxhLGYpO2Eub25BZnRlclJlbmRlcihTLGIsYyxkLGUsZil9ZnVuY3Rpb24gbihhLGIsYyl7dmFyIGQ9Y2EuZ2V0KGEpO2M9bWEuZ2V0UGFyYW1ldGVycyhhLHVhLnN0YXRlLEMsYixKYS5udW1QbGFuZXMsSmEubnVtSW50ZXJzZWN0aW9uLGMpO3ZhciBnPW1hLmdldFByb2dyYW1Db2RlKGEsYyksaD1kLnByb2dyYW0saz0hMDtpZih2b2lkIDA9PT1oKWEuYWRkRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixlKTtlbHNlIGlmKGguY29kZSE9PWcpZihhKTtlbHNle2lmKHZvaWQgMCE9PWMuc2hhZGVySUQpcmV0dXJuO2s9ITF9ayYmKGMuc2hhZGVySUQ/KGg9dGJbYy5zaGFkZXJJRF0sZC5zaGFkZXI9e25hbWU6YS50eXBlLHVuaWZvcm1zOkdhLmNsb25lKGgudW5pZm9ybXMpLHZlcnRleFNoYWRlcjpoLnZlcnRleFNoYWRlcixmcmFnbWVudFNoYWRlcjpoLmZyYWdtZW50U2hhZGVyfSk6ZC5zaGFkZXI9e25hbWU6YS50eXBlLFxuICAgIHVuaWZvcm1zOmEudW5pZm9ybXMsdmVydGV4U2hhZGVyOmEudmVydGV4U2hhZGVyLGZyYWdtZW50U2hhZGVyOmEuZnJhZ21lbnRTaGFkZXJ9LGEub25CZWZvcmVDb21waWxlKGQuc2hhZGVyKSxoPW1hLmFjcXVpcmVQcm9ncmFtKGEsZC5zaGFkZXIsYyxnKSxkLnByb2dyYW09aCxhLnByb2dyYW09aCk7Yz1oLmdldEF0dHJpYnV0ZXMoKTtpZihhLm1vcnBoVGFyZ2V0cylmb3IoZz1hLm51bVN1cHBvcnRlZE1vcnBoVGFyZ2V0cz0wO2c8Uy5tYXhNb3JwaFRhcmdldHM7ZysrKTA8PWNbXCJtb3JwaFRhcmdldFwiK2ddJiZhLm51bVN1cHBvcnRlZE1vcnBoVGFyZ2V0cysrO2lmKGEubW9ycGhOb3JtYWxzKWZvcihnPWEubnVtU3VwcG9ydGVkTW9ycGhOb3JtYWxzPTA7ZzxTLm1heE1vcnBoTm9ybWFscztnKyspMDw9Y1tcIm1vcnBoTm9ybWFsXCIrZ10mJmEubnVtU3VwcG9ydGVkTW9ycGhOb3JtYWxzKys7Yz1kLnNoYWRlci51bmlmb3JtcztpZighYS5pc1NoYWRlck1hdGVyaWFsJiYhYS5pc1Jhd1NoYWRlck1hdGVyaWFsfHxcbiAgICAhMD09PWEuY2xpcHBpbmcpZC5udW1DbGlwcGluZ1BsYW5lcz1KYS5udW1QbGFuZXMsZC5udW1JbnRlcnNlY3Rpb249SmEubnVtSW50ZXJzZWN0aW9uLGMuY2xpcHBpbmdQbGFuZXM9SmEudW5pZm9ybTtkLmZvZz1iO2QubGlnaHRzSGFzaD11YS5zdGF0ZS5oYXNoO2EubGlnaHRzJiYoYy5hbWJpZW50TGlnaHRDb2xvci52YWx1ZT11YS5zdGF0ZS5hbWJpZW50LGMuZGlyZWN0aW9uYWxMaWdodHMudmFsdWU9dWEuc3RhdGUuZGlyZWN0aW9uYWwsYy5zcG90TGlnaHRzLnZhbHVlPXVhLnN0YXRlLnNwb3QsYy5yZWN0QXJlYUxpZ2h0cy52YWx1ZT11YS5zdGF0ZS5yZWN0QXJlYSxjLnBvaW50TGlnaHRzLnZhbHVlPXVhLnN0YXRlLnBvaW50LGMuaGVtaXNwaGVyZUxpZ2h0cy52YWx1ZT11YS5zdGF0ZS5oZW1pLGMuZGlyZWN0aW9uYWxTaGFkb3dNYXAudmFsdWU9dWEuc3RhdGUuZGlyZWN0aW9uYWxTaGFkb3dNYXAsYy5kaXJlY3Rpb25hbFNoYWRvd01hdHJpeC52YWx1ZT11YS5zdGF0ZS5kaXJlY3Rpb25hbFNoYWRvd01hdHJpeCxcbiAgICBjLnNwb3RTaGFkb3dNYXAudmFsdWU9dWEuc3RhdGUuc3BvdFNoYWRvd01hcCxjLnNwb3RTaGFkb3dNYXRyaXgudmFsdWU9dWEuc3RhdGUuc3BvdFNoYWRvd01hdHJpeCxjLnBvaW50U2hhZG93TWFwLnZhbHVlPXVhLnN0YXRlLnBvaW50U2hhZG93TWFwLGMucG9pbnRTaGFkb3dNYXRyaXgudmFsdWU9dWEuc3RhdGUucG9pbnRTaGFkb3dNYXRyaXgpO2E9ZC5wcm9ncmFtLmdldFVuaWZvcm1zKCk7YT1tYi5zZXFXaXRoVmFsdWUoYS5zZXEsYyk7ZC51bmlmb3Jtc0xpc3Q9YX1mdW5jdGlvbiB1KGEsYixjLGQpe1k9MDt2YXIgZT1jYS5nZXQoYyk7c2QmJihhZXx8YSE9PVYpJiZKYS5zZXRTdGF0ZShjLmNsaXBwaW5nUGxhbmVzLGMuY2xpcEludGVyc2VjdGlvbixjLmNsaXBTaGFkb3dzLGEsZSxhPT09ViYmYy5pZD09PVApOyExPT09Yy5uZWVkc1VwZGF0ZSYmKHZvaWQgMD09PWUucHJvZ3JhbT9jLm5lZWRzVXBkYXRlPSEwOmMuZm9nJiZlLmZvZyE9PWI/Yy5uZWVkc1VwZGF0ZT0hMDpjLmxpZ2h0cyYmXG4gICAgZS5saWdodHNIYXNoIT09dWEuc3RhdGUuaGFzaD9jLm5lZWRzVXBkYXRlPSEwOnZvaWQgMD09PWUubnVtQ2xpcHBpbmdQbGFuZXN8fGUubnVtQ2xpcHBpbmdQbGFuZXM9PT1KYS5udW1QbGFuZXMmJmUubnVtSW50ZXJzZWN0aW9uPT09SmEubnVtSW50ZXJzZWN0aW9ufHwoYy5uZWVkc1VwZGF0ZT0hMCkpO2MubmVlZHNVcGRhdGUmJihuKGMsYixkKSxjLm5lZWRzVXBkYXRlPSExKTt2YXIgZj0hMSxnPSExLGg9ITEsaz1lLnByb2dyYW0sbT1rLmdldFVuaWZvcm1zKCkscT1lLnNoYWRlci51bmlmb3JtcztaLnVzZVByb2dyYW0oay5wcm9ncmFtKSYmKGg9Zz1mPSEwKTtjLmlkIT09UCYmKFA9Yy5pZCxnPSEwKTtpZihmfHxhIT09Vil7bS5zZXRWYWx1ZShGLFwicHJvamVjdGlvbk1hdHJpeFwiLGEucHJvamVjdGlvbk1hdHJpeCk7VC5sb2dhcml0aG1pY0RlcHRoQnVmZmVyJiZtLnNldFZhbHVlKEYsXCJsb2dEZXB0aEJ1ZkZDXCIsMi8oTWF0aC5sb2coYS5mYXIrMSkvTWF0aC5MTjIpKTtWIT09KFd8fFxuICAgIGEpJiYoVj1XfHxhLGg9Zz0hMCk7aWYoYy5pc1NoYWRlck1hdGVyaWFsfHxjLmlzTWVzaFBob25nTWF0ZXJpYWx8fGMuaXNNZXNoU3RhbmRhcmRNYXRlcmlhbHx8Yy5lbnZNYXApZj1tLm1hcC5jYW1lcmFQb3NpdGlvbix2b2lkIDAhPT1mJiZmLnNldFZhbHVlKEYsT2Iuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGEubWF0cml4V29ybGQpKTsoYy5pc01lc2hQaG9uZ01hdGVyaWFsfHxjLmlzTWVzaExhbWJlcnRNYXRlcmlhbHx8Yy5pc01lc2hCYXNpY01hdGVyaWFsfHxjLmlzTWVzaFN0YW5kYXJkTWF0ZXJpYWx8fGMuaXNTaGFkZXJNYXRlcmlhbHx8Yy5za2lubmluZykmJm0uc2V0VmFsdWUoRixcInZpZXdNYXRyaXhcIixhLm1hdHJpeFdvcmxkSW52ZXJzZSl9aWYoYy5za2lubmluZyYmKG0uc2V0T3B0aW9uYWwoRixkLFwiYmluZE1hdHJpeFwiKSxtLnNldE9wdGlvbmFsKEYsZCxcImJpbmRNYXRyaXhJbnZlcnNlXCIpLGE9ZC5za2VsZXRvbikpaWYoZj1hLmJvbmVzLFQuZmxvYXRWZXJ0ZXhUZXh0dXJlcyl7aWYodm9pZCAwPT09XG4gICAgYS5ib25lVGV4dHVyZSl7dmFyIGY9TWF0aC5zcXJ0KDQqZi5sZW5ndGgpLGY9US5jZWlsUG93ZXJPZlR3byhmKSxmPU1hdGgubWF4KGYsNCksdT1uZXcgRmxvYXQzMkFycmF5KGYqZio0KTt1LnNldChhLmJvbmVNYXRyaWNlcyk7dmFyIHI9bmV3IGxiKHUsZixmLDEwMjMsMTAxNSk7YS5ib25lTWF0cmljZXM9dTthLmJvbmVUZXh0dXJlPXI7YS5ib25lVGV4dHVyZVNpemU9Zn1tLnNldFZhbHVlKEYsXCJib25lVGV4dHVyZVwiLGEuYm9uZVRleHR1cmUpO20uc2V0VmFsdWUoRixcImJvbmVUZXh0dXJlU2l6ZVwiLGEuYm9uZVRleHR1cmVTaXplKX1lbHNlIG0uc2V0T3B0aW9uYWwoRixhLFwiYm9uZU1hdHJpY2VzXCIpO2cmJihtLnNldFZhbHVlKEYsXCJ0b25lTWFwcGluZ0V4cG9zdXJlXCIsUy50b25lTWFwcGluZ0V4cG9zdXJlKSxtLnNldFZhbHVlKEYsXCJ0b25lTWFwcGluZ1doaXRlUG9pbnRcIixTLnRvbmVNYXBwaW5nV2hpdGVQb2ludCksYy5saWdodHMmJihnPWgscS5hbWJpZW50TGlnaHRDb2xvci5uZWVkc1VwZGF0ZT1cbiAgICBnLHEuZGlyZWN0aW9uYWxMaWdodHMubmVlZHNVcGRhdGU9ZyxxLnBvaW50TGlnaHRzLm5lZWRzVXBkYXRlPWcscS5zcG90TGlnaHRzLm5lZWRzVXBkYXRlPWcscS5yZWN0QXJlYUxpZ2h0cy5uZWVkc1VwZGF0ZT1nLHEuaGVtaXNwaGVyZUxpZ2h0cy5uZWVkc1VwZGF0ZT1nKSxiJiZjLmZvZyYmKHEuZm9nQ29sb3IudmFsdWU9Yi5jb2xvcixiLmlzRm9nPyhxLmZvZ05lYXIudmFsdWU9Yi5uZWFyLHEuZm9nRmFyLnZhbHVlPWIuZmFyKTpiLmlzRm9nRXhwMiYmKHEuZm9nRGVuc2l0eS52YWx1ZT1iLmRlbnNpdHkpKSxjLmlzTWVzaEJhc2ljTWF0ZXJpYWw/bChxLGMpOmMuaXNNZXNoTGFtYmVydE1hdGVyaWFsPyhsKHEsYyksYy5lbWlzc2l2ZU1hcCYmKHEuZW1pc3NpdmVNYXAudmFsdWU9Yy5lbWlzc2l2ZU1hcCkpOmMuaXNNZXNoUGhvbmdNYXRlcmlhbD8obChxLGMpLGMuaXNNZXNoVG9vbk1hdGVyaWFsPyh0KHEsYyksYy5ncmFkaWVudE1hcCYmKHEuZ3JhZGllbnRNYXAudmFsdWU9Yy5ncmFkaWVudE1hcCkpOlxuICAgIHQocSxjKSk6Yy5pc01lc2hTdGFuZGFyZE1hdGVyaWFsPyhsKHEsYyksYy5pc01lc2hQaHlzaWNhbE1hdGVyaWFsJiYocS5jbGVhckNvYXQudmFsdWU9Yy5jbGVhckNvYXQscS5jbGVhckNvYXRSb3VnaG5lc3MudmFsdWU9Yy5jbGVhckNvYXRSb3VnaG5lc3MpLHEucm91Z2huZXNzLnZhbHVlPWMucm91Z2huZXNzLHEubWV0YWxuZXNzLnZhbHVlPWMubWV0YWxuZXNzLGMucm91Z2huZXNzTWFwJiYocS5yb3VnaG5lc3NNYXAudmFsdWU9Yy5yb3VnaG5lc3NNYXApLGMubWV0YWxuZXNzTWFwJiYocS5tZXRhbG5lc3NNYXAudmFsdWU9Yy5tZXRhbG5lc3NNYXApLGMuZW1pc3NpdmVNYXAmJihxLmVtaXNzaXZlTWFwLnZhbHVlPWMuZW1pc3NpdmVNYXApLGMuYnVtcE1hcCYmKHEuYnVtcE1hcC52YWx1ZT1jLmJ1bXBNYXAscS5idW1wU2NhbGUudmFsdWU9Yy5idW1wU2NhbGUpLGMubm9ybWFsTWFwJiYocS5ub3JtYWxNYXAudmFsdWU9Yy5ub3JtYWxNYXAscS5ub3JtYWxTY2FsZS52YWx1ZS5jb3B5KGMubm9ybWFsU2NhbGUpKSxcbiAgICBjLmRpc3BsYWNlbWVudE1hcCYmKHEuZGlzcGxhY2VtZW50TWFwLnZhbHVlPWMuZGlzcGxhY2VtZW50TWFwLHEuZGlzcGxhY2VtZW50U2NhbGUudmFsdWU9Yy5kaXNwbGFjZW1lbnRTY2FsZSxxLmRpc3BsYWNlbWVudEJpYXMudmFsdWU9Yy5kaXNwbGFjZW1lbnRCaWFzKSxjLmVudk1hcCYmKHEuZW52TWFwSW50ZW5zaXR5LnZhbHVlPWMuZW52TWFwSW50ZW5zaXR5KSk6Yy5pc01lc2hEZXB0aE1hdGVyaWFsPyhsKHEsYyksYy5kaXNwbGFjZW1lbnRNYXAmJihxLmRpc3BsYWNlbWVudE1hcC52YWx1ZT1jLmRpc3BsYWNlbWVudE1hcCxxLmRpc3BsYWNlbWVudFNjYWxlLnZhbHVlPWMuZGlzcGxhY2VtZW50U2NhbGUscS5kaXNwbGFjZW1lbnRCaWFzLnZhbHVlPWMuZGlzcGxhY2VtZW50QmlhcykpOmMuaXNNZXNoRGlzdGFuY2VNYXRlcmlhbD8obChxLGMpLGMuZGlzcGxhY2VtZW50TWFwJiYocS5kaXNwbGFjZW1lbnRNYXAudmFsdWU9Yy5kaXNwbGFjZW1lbnRNYXAscS5kaXNwbGFjZW1lbnRTY2FsZS52YWx1ZT1cbiAgICBjLmRpc3BsYWNlbWVudFNjYWxlLHEuZGlzcGxhY2VtZW50Qmlhcy52YWx1ZT1jLmRpc3BsYWNlbWVudEJpYXMpLHEucmVmZXJlbmNlUG9zaXRpb24udmFsdWUuY29weShjLnJlZmVyZW5jZVBvc2l0aW9uKSxxLm5lYXJEaXN0YW5jZS52YWx1ZT1jLm5lYXJEaXN0YW5jZSxxLmZhckRpc3RhbmNlLnZhbHVlPWMuZmFyRGlzdGFuY2UpOmMuaXNNZXNoTm9ybWFsTWF0ZXJpYWw/KGwocSxjKSxjLmJ1bXBNYXAmJihxLmJ1bXBNYXAudmFsdWU9Yy5idW1wTWFwLHEuYnVtcFNjYWxlLnZhbHVlPWMuYnVtcFNjYWxlKSxjLm5vcm1hbE1hcCYmKHEubm9ybWFsTWFwLnZhbHVlPWMubm9ybWFsTWFwLHEubm9ybWFsU2NhbGUudmFsdWUuY29weShjLm5vcm1hbFNjYWxlKSksYy5kaXNwbGFjZW1lbnRNYXAmJihxLmRpc3BsYWNlbWVudE1hcC52YWx1ZT1jLmRpc3BsYWNlbWVudE1hcCxxLmRpc3BsYWNlbWVudFNjYWxlLnZhbHVlPWMuZGlzcGxhY2VtZW50U2NhbGUscS5kaXNwbGFjZW1lbnRCaWFzLnZhbHVlPVxuICAgIGMuZGlzcGxhY2VtZW50QmlhcykpOmMuaXNMaW5lQmFzaWNNYXRlcmlhbD8ocS5kaWZmdXNlLnZhbHVlPWMuY29sb3IscS5vcGFjaXR5LnZhbHVlPWMub3BhY2l0eSxjLmlzTGluZURhc2hlZE1hdGVyaWFsJiYocS5kYXNoU2l6ZS52YWx1ZT1jLmRhc2hTaXplLHEudG90YWxTaXplLnZhbHVlPWMuZGFzaFNpemUrYy5nYXBTaXplLHEuc2NhbGUudmFsdWU9Yy5zY2FsZSkpOmMuaXNQb2ludHNNYXRlcmlhbD8ocS5kaWZmdXNlLnZhbHVlPWMuY29sb3IscS5vcGFjaXR5LnZhbHVlPWMub3BhY2l0eSxxLnNpemUudmFsdWU9Yy5zaXplKndhLHEuc2NhbGUudmFsdWU9LjUqVSxxLm1hcC52YWx1ZT1jLm1hcCxudWxsIT09Yy5tYXAmJighMD09PWMubWFwLm1hdHJpeEF1dG9VcGRhdGUmJihiPWMubWFwLm9mZnNldCxnPWMubWFwLnJlcGVhdCxoPWMubWFwLmNlbnRlcixjLm1hcC5tYXRyaXguc2V0VXZUcmFuc2Zvcm0oYi54LGIueSxnLngsZy55LGMubWFwLnJvdGF0aW9uLGgueCxoLnkpKSxxLnV2VHJhbnNmb3JtLnZhbHVlLmNvcHkoYy5tYXAubWF0cml4KSkpOlxuICAgIGMuaXNTaGFkb3dNYXRlcmlhbCYmKHEuY29sb3IudmFsdWU9Yy5jb2xvcixxLm9wYWNpdHkudmFsdWU9Yy5vcGFjaXR5KSx2b2lkIDAhPT1xLmx0Y01hdCYmKHEubHRjTWF0LnZhbHVlPUsuTFRDX01BVF9URVhUVVJFKSx2b2lkIDAhPT1xLmx0Y01hZyYmKHEubHRjTWFnLnZhbHVlPUsuTFRDX01BR19URVhUVVJFKSxtYi51cGxvYWQoRixlLnVuaWZvcm1zTGlzdCxxLFMpKTttLnNldFZhbHVlKEYsXCJtb2RlbFZpZXdNYXRyaXhcIixkLm1vZGVsVmlld01hdHJpeCk7bS5zZXRWYWx1ZShGLFwibm9ybWFsTWF0cml4XCIsZC5ub3JtYWxNYXRyaXgpO20uc2V0VmFsdWUoRixcIm1vZGVsTWF0cml4XCIsZC5tYXRyaXhXb3JsZCk7cmV0dXJuIGt9ZnVuY3Rpb24gbChhLGIpe2Eub3BhY2l0eS52YWx1ZT1iLm9wYWNpdHk7Yi5jb2xvciYmKGEuZGlmZnVzZS52YWx1ZT1iLmNvbG9yKTtiLmVtaXNzaXZlJiZhLmVtaXNzaXZlLnZhbHVlLmNvcHkoYi5lbWlzc2l2ZSkubXVsdGlwbHlTY2FsYXIoYi5lbWlzc2l2ZUludGVuc2l0eSk7XG4gICAgYi5tYXAmJihhLm1hcC52YWx1ZT1iLm1hcCk7Yi5hbHBoYU1hcCYmKGEuYWxwaGFNYXAudmFsdWU9Yi5hbHBoYU1hcCk7Yi5zcGVjdWxhck1hcCYmKGEuc3BlY3VsYXJNYXAudmFsdWU9Yi5zcGVjdWxhck1hcCk7Yi5lbnZNYXAmJihhLmVudk1hcC52YWx1ZT1iLmVudk1hcCxhLmZsaXBFbnZNYXAudmFsdWU9Yi5lbnZNYXAmJmIuZW52TWFwLmlzQ3ViZVRleHR1cmU/LTE6MSxhLnJlZmxlY3Rpdml0eS52YWx1ZT1iLnJlZmxlY3Rpdml0eSxhLnJlZnJhY3Rpb25SYXRpby52YWx1ZT1iLnJlZnJhY3Rpb25SYXRpbyk7Yi5saWdodE1hcCYmKGEubGlnaHRNYXAudmFsdWU9Yi5saWdodE1hcCxhLmxpZ2h0TWFwSW50ZW5zaXR5LnZhbHVlPWIubGlnaHRNYXBJbnRlbnNpdHkpO2IuYW9NYXAmJihhLmFvTWFwLnZhbHVlPWIuYW9NYXAsYS5hb01hcEludGVuc2l0eS52YWx1ZT1iLmFvTWFwSW50ZW5zaXR5KTtpZihiLm1hcCl2YXIgYz1iLm1hcDtlbHNlIGIuc3BlY3VsYXJNYXA/Yz1iLnNwZWN1bGFyTWFwOlxuICAgIGIuZGlzcGxhY2VtZW50TWFwP2M9Yi5kaXNwbGFjZW1lbnRNYXA6Yi5ub3JtYWxNYXA/Yz1iLm5vcm1hbE1hcDpiLmJ1bXBNYXA/Yz1iLmJ1bXBNYXA6Yi5yb3VnaG5lc3NNYXA/Yz1iLnJvdWdobmVzc01hcDpiLm1ldGFsbmVzc01hcD9jPWIubWV0YWxuZXNzTWFwOmIuYWxwaGFNYXA/Yz1iLmFscGhhTWFwOmIuZW1pc3NpdmVNYXAmJihjPWIuZW1pc3NpdmVNYXApO2lmKHZvaWQgMCE9PWMpe2MuaXNXZWJHTFJlbmRlclRhcmdldCYmKGM9Yy50ZXh0dXJlKTtpZighMD09PWMubWF0cml4QXV0b1VwZGF0ZSl7Yj1jLm9mZnNldDt2YXIgZD1jLnJlcGVhdCxlPWMuY2VudGVyO2MubWF0cml4LnNldFV2VHJhbnNmb3JtKGIueCxiLnksZC54LGQueSxjLnJvdGF0aW9uLGUueCxlLnkpfWEudXZUcmFuc2Zvcm0udmFsdWUuY29weShjLm1hdHJpeCl9fWZ1bmN0aW9uIHQoYSxiKXthLnNwZWN1bGFyLnZhbHVlPWIuc3BlY3VsYXI7YS5zaGluaW5lc3MudmFsdWU9TWF0aC5tYXgoYi5zaGluaW5lc3MsXG4gICAgMUUtNCk7Yi5lbWlzc2l2ZU1hcCYmKGEuZW1pc3NpdmVNYXAudmFsdWU9Yi5lbWlzc2l2ZU1hcCk7Yi5idW1wTWFwJiYoYS5idW1wTWFwLnZhbHVlPWIuYnVtcE1hcCxhLmJ1bXBTY2FsZS52YWx1ZT1iLmJ1bXBTY2FsZSk7Yi5ub3JtYWxNYXAmJihhLm5vcm1hbE1hcC52YWx1ZT1iLm5vcm1hbE1hcCxhLm5vcm1hbFNjYWxlLnZhbHVlLmNvcHkoYi5ub3JtYWxTY2FsZSkpO2IuZGlzcGxhY2VtZW50TWFwJiYoYS5kaXNwbGFjZW1lbnRNYXAudmFsdWU9Yi5kaXNwbGFjZW1lbnRNYXAsYS5kaXNwbGFjZW1lbnRTY2FsZS52YWx1ZT1iLmRpc3BsYWNlbWVudFNjYWxlLGEuZGlzcGxhY2VtZW50Qmlhcy52YWx1ZT1iLmRpc3BsYWNlbWVudEJpYXMpfWNvbnNvbGUubG9nKFwiVEhSRUUuV2ViR0xSZW5kZXJlclwiLFwiODlcIik7YT1hfHx7fTt2YXIgdj12b2lkIDAhPT1hLmNhbnZhcz9hLmNhbnZhczpkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCIsXG4gICAgXCJjYW52YXNcIiksdz12b2lkIDAhPT1hLmNvbnRleHQ/YS5jb250ZXh0Om51bGwsej12b2lkIDAhPT1hLmFscGhhP2EuYWxwaGE6ITEseT12b2lkIDAhPT1hLmRlcHRoP2EuZGVwdGg6ITAsST12b2lkIDAhPT1hLnN0ZW5jaWw/YS5zdGVuY2lsOiEwLEE9dm9pZCAwIT09YS5hbnRpYWxpYXM/YS5hbnRpYWxpYXM6ITEsSj12b2lkIDAhPT1hLnByZW11bHRpcGxpZWRBbHBoYT9hLnByZW11bHRpcGxpZWRBbHBoYTohMCx4PXZvaWQgMCE9PWEucHJlc2VydmVEcmF3aW5nQnVmZmVyP2EucHJlc2VydmVEcmF3aW5nQnVmZmVyOiExLEI9dm9pZCAwIT09YS5wb3dlclByZWZlcmVuY2U/YS5wb3dlclByZWZlcmVuY2U6XCJkZWZhdWx0XCIsRD1bXSxDPVtdLEU9bnVsbCxIPVtdLGxhPVtdO3RoaXMuZG9tRWxlbWVudD12O3RoaXMuY29udGV4dD1udWxsO3RoaXMuc29ydE9iamVjdHM9dGhpcy5hdXRvQ2xlYXJTdGVuY2lsPXRoaXMuYXV0b0NsZWFyRGVwdGg9dGhpcy5hdXRvQ2xlYXJDb2xvcj10aGlzLmF1dG9DbGVhcj1cbiAgICAhMDt0aGlzLmNsaXBwaW5nUGxhbmVzPVtdO3RoaXMubG9jYWxDbGlwcGluZ0VuYWJsZWQ9ITE7dGhpcy5nYW1tYUZhY3Rvcj0yO3RoaXMucGh5c2ljYWxseUNvcnJlY3RMaWdodHM9dGhpcy5nYW1tYU91dHB1dD10aGlzLmdhbW1hSW5wdXQ9ITE7dGhpcy50b25lTWFwcGluZ1doaXRlUG9pbnQ9dGhpcy50b25lTWFwcGluZ0V4cG9zdXJlPXRoaXMudG9uZU1hcHBpbmc9MTt0aGlzLm1heE1vcnBoVGFyZ2V0cz04O3RoaXMubWF4TW9ycGhOb3JtYWxzPTQ7dmFyIFM9dGhpcyxMPSExLE49bnVsbCxNPW51bGwsUD0tMSxSPVwiXCIsVj1udWxsLFc9bnVsbCxuYj1uZXcgYWEsWD1uZXcgYWEsRz1udWxsLFk9MCxlYT12LndpZHRoLFU9di5oZWlnaHQsd2E9MSxkYT1uZXcgYWEoMCwwLGVhLFUpLGZhPW5ldyBhYSgwLDAsZWEsVSksJGU9ITEsJGQ9bmV3IHJkLEphPW5ldyBGZyxzZD0hMSxhZT0hMSx0ZD1uZXcgTyxPYj1uZXcgcCxoYT17Z2VvbWV0cmllczowLHRleHR1cmVzOjB9LGJhPXtmcmFtZTowLFxuICAgIGNhbGxzOjAsdmVydGljZXM6MCxmYWNlczowLHBvaW50czowfTt0aGlzLmluZm89e3JlbmRlcjpiYSxtZW1vcnk6aGEscHJvZ3JhbXM6bnVsbH07dHJ5e3o9e2FscGhhOnosZGVwdGg6eSxzdGVuY2lsOkksYW50aWFsaWFzOkEscHJlbXVsdGlwbGllZEFscGhhOkoscHJlc2VydmVEcmF3aW5nQnVmZmVyOngscG93ZXJQcmVmZXJlbmNlOkJ9O3YuYWRkRXZlbnRMaXN0ZW5lcihcIndlYmdsY29udGV4dGxvc3RcIixjLCExKTt2LmFkZEV2ZW50TGlzdGVuZXIoXCJ3ZWJnbGNvbnRleHRyZXN0b3JlZFwiLGQsITEpO3ZhciBGPXd8fHYuZ2V0Q29udGV4dChcIndlYmdsXCIseil8fHYuZ2V0Q29udGV4dChcImV4cGVyaW1lbnRhbC13ZWJnbFwiLHopO2lmKG51bGw9PT1GKXtpZihudWxsIT09di5nZXRDb250ZXh0KFwid2ViZ2xcIikpdGhyb3cgRXJyb3IoXCJFcnJvciBjcmVhdGluZyBXZWJHTCBjb250ZXh0IHdpdGggeW91ciBzZWxlY3RlZCBhdHRyaWJ1dGVzLlwiKTt0aHJvdyBFcnJvcihcIkVycm9yIGNyZWF0aW5nIFdlYkdMIGNvbnRleHQuXCIpO1xuICAgIH12b2lkIDA9PT1GLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdCYmKEYuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0PWZ1bmN0aW9uKCl7cmV0dXJue3JhbmdlTWluOjEscmFuZ2VNYXg6MSxwcmVjaXNpb246MX19KX1jYXRjaChHZyl7Y29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFwiK0dnLm1lc3NhZ2UpfXZhciBpYSxULFosY2EsZ2EscWEscmEsdGEsdWEsbWEsc2EsamEseGEseWEsemEsQWEsQmEscGE7YigpO3ZhciBrYT1uZXcgYmUoUyk7dGhpcy52cj1rYTt2YXIgRWE9bmV3IFVlKFMsdGEsVC5tYXhUZXh0dXJlU2l6ZSk7dGhpcy5zaGFkb3dNYXA9RWE7dGhpcy5nZXRDb250ZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIEZ9O3RoaXMuZ2V0Q29udGV4dEF0dHJpYnV0ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gRi5nZXRDb250ZXh0QXR0cmlidXRlcygpfTt0aGlzLmZvcmNlQ29udGV4dExvc3M9ZnVuY3Rpb24oKXt2YXIgYT1pYS5nZXQoXCJXRUJHTF9sb3NlX2NvbnRleHRcIik7YSYmXG4gICAgYS5sb3NlQ29udGV4dCgpfTt0aGlzLmZvcmNlQ29udGV4dFJlc3RvcmU9ZnVuY3Rpb24oKXt2YXIgYT1pYS5nZXQoXCJXRUJHTF9sb3NlX2NvbnRleHRcIik7YSYmYS5yZXN0b3JlQ29udGV4dCgpfTt0aGlzLmdldFBpeGVsUmF0aW89ZnVuY3Rpb24oKXtyZXR1cm4gd2F9O3RoaXMuc2V0UGl4ZWxSYXRpbz1mdW5jdGlvbihhKXt2b2lkIDAhPT1hJiYod2E9YSx0aGlzLnNldFNpemUoZWEsVSwhMSkpfTt0aGlzLmdldFNpemU9ZnVuY3Rpb24oKXtyZXR1cm57d2lkdGg6ZWEsaGVpZ2h0OlV9fTt0aGlzLnNldFNpemU9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWthLmdldERldmljZSgpO2QmJmQuaXNQcmVzZW50aW5nP2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IENhbid0IGNoYW5nZSBzaXplIHdoaWxlIFZSIGRldmljZSBpcyBwcmVzZW50aW5nLlwiKTooZWE9YSxVPWIsdi53aWR0aD1hKndhLHYuaGVpZ2h0PWIqd2EsITEhPT1jJiYodi5zdHlsZS53aWR0aD1hK1wicHhcIix2LnN0eWxlLmhlaWdodD1cbiAgICBiK1wicHhcIiksdGhpcy5zZXRWaWV3cG9ydCgwLDAsYSxiKSl9O3RoaXMuZ2V0RHJhd2luZ0J1ZmZlclNpemU9ZnVuY3Rpb24oKXtyZXR1cm57d2lkdGg6ZWEqd2EsaGVpZ2h0OlUqd2F9fTt0aGlzLnNldERyYXdpbmdCdWZmZXJTaXplPWZ1bmN0aW9uKGEsYixjKXtlYT1hO1U9Yjt3YT1jO3Yud2lkdGg9YSpjO3YuaGVpZ2h0PWIqYzt0aGlzLnNldFZpZXdwb3J0KDAsMCxhLGIpfTt0aGlzLnNldFZpZXdwb3J0PWZ1bmN0aW9uKGEsYixjLGQpe2RhLnNldChhLFUtYi1kLGMsZCk7Wi52aWV3cG9ydChuYi5jb3B5KGRhKS5tdWx0aXBseVNjYWxhcih3YSkpfTt0aGlzLnNldFNjaXNzb3I9ZnVuY3Rpb24oYSxiLGMsZCl7ZmEuc2V0KGEsVS1iLWQsYyxkKTtaLnNjaXNzb3IoWC5jb3B5KGZhKS5tdWx0aXBseVNjYWxhcih3YSkpfTt0aGlzLnNldFNjaXNzb3JUZXN0PWZ1bmN0aW9uKGEpe1ouc2V0U2Npc3NvclRlc3QoJGU9YSl9O3RoaXMuZ2V0Q2xlYXJDb2xvcj1mdW5jdGlvbigpe3JldHVybiBqYS5nZXRDbGVhckNvbG9yKCl9O1xuICAgIHRoaXMuc2V0Q2xlYXJDb2xvcj1mdW5jdGlvbigpe2phLnNldENsZWFyQ29sb3IuYXBwbHkoamEsYXJndW1lbnRzKX07dGhpcy5nZXRDbGVhckFscGhhPWZ1bmN0aW9uKCl7cmV0dXJuIGphLmdldENsZWFyQWxwaGEoKX07dGhpcy5zZXRDbGVhckFscGhhPWZ1bmN0aW9uKCl7amEuc2V0Q2xlYXJBbHBoYS5hcHBseShqYSxhcmd1bWVudHMpfTt0aGlzLmNsZWFyPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD0wO2lmKHZvaWQgMD09PWF8fGEpZHw9Ri5DT0xPUl9CVUZGRVJfQklUO2lmKHZvaWQgMD09PWJ8fGIpZHw9Ri5ERVBUSF9CVUZGRVJfQklUO2lmKHZvaWQgMD09PWN8fGMpZHw9Ri5TVEVOQ0lMX0JVRkZFUl9CSVQ7Ri5jbGVhcihkKX07dGhpcy5jbGVhckNvbG9yPWZ1bmN0aW9uKCl7dGhpcy5jbGVhcighMCwhMSwhMSl9O3RoaXMuY2xlYXJEZXB0aD1mdW5jdGlvbigpe3RoaXMuY2xlYXIoITEsITAsITEpfTt0aGlzLmNsZWFyU3RlbmNpbD1mdW5jdGlvbigpe3RoaXMuY2xlYXIoITEsITEsXG4gICAgITApfTt0aGlzLmNsZWFyVGFyZ2V0PWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMuc2V0UmVuZGVyVGFyZ2V0KGEpO3RoaXMuY2xlYXIoYixjLGQpfTt0aGlzLmRpc3Bvc2U9ZnVuY3Rpb24oKXt2LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ3ZWJnbGNvbnRleHRsb3N0XCIsYywhMSk7di5yZW1vdmVFdmVudExpc3RlbmVyKFwid2ViZ2xjb250ZXh0cmVzdG9yZWRcIixkLCExKTtzYS5kaXNwb3NlKCk7a2EuZGlzcG9zZSgpfTt0aGlzLnJlbmRlckJ1ZmZlckltbWVkaWF0ZT1mdW5jdGlvbihhLGIsYyl7Wi5pbml0QXR0cmlidXRlcygpO3ZhciBkPWNhLmdldChhKTthLmhhc1Bvc2l0aW9ucyYmIWQucG9zaXRpb24mJihkLnBvc2l0aW9uPUYuY3JlYXRlQnVmZmVyKCkpO2EuaGFzTm9ybWFscyYmIWQubm9ybWFsJiYoZC5ub3JtYWw9Ri5jcmVhdGVCdWZmZXIoKSk7YS5oYXNVdnMmJiFkLnV2JiYoZC51dj1GLmNyZWF0ZUJ1ZmZlcigpKTthLmhhc0NvbG9ycyYmIWQuY29sb3ImJihkLmNvbG9yPUYuY3JlYXRlQnVmZmVyKCkpO1xuICAgIGI9Yi5nZXRBdHRyaWJ1dGVzKCk7YS5oYXNQb3NpdGlvbnMmJihGLmJpbmRCdWZmZXIoRi5BUlJBWV9CVUZGRVIsZC5wb3NpdGlvbiksRi5idWZmZXJEYXRhKEYuQVJSQVlfQlVGRkVSLGEucG9zaXRpb25BcnJheSxGLkRZTkFNSUNfRFJBVyksWi5lbmFibGVBdHRyaWJ1dGUoYi5wb3NpdGlvbiksRi52ZXJ0ZXhBdHRyaWJQb2ludGVyKGIucG9zaXRpb24sMyxGLkZMT0FULCExLDAsMCkpO2lmKGEuaGFzTm9ybWFscyl7Ri5iaW5kQnVmZmVyKEYuQVJSQVlfQlVGRkVSLGQubm9ybWFsKTtpZighYy5pc01lc2hQaG9uZ01hdGVyaWFsJiYhYy5pc01lc2hTdGFuZGFyZE1hdGVyaWFsJiYhYy5pc01lc2hOb3JtYWxNYXRlcmlhbCYmITA9PT1jLmZsYXRTaGFkaW5nKWZvcih2YXIgZT0wLGY9MyphLmNvdW50O2U8ZjtlKz05KXt2YXIgZz1hLm5vcm1hbEFycmF5LGg9KGdbZSswXStnW2UrM10rZ1tlKzZdKS8zLGs9KGdbZSsxXStnW2UrNF0rZ1tlKzddKS8zLG09KGdbZSsyXStnW2UrNV0rZ1tlK1xuICAgIDhdKS8zO2dbZSswXT1oO2dbZSsxXT1rO2dbZSsyXT1tO2dbZSszXT1oO2dbZSs0XT1rO2dbZSs1XT1tO2dbZSs2XT1oO2dbZSs3XT1rO2dbZSs4XT1tfUYuYnVmZmVyRGF0YShGLkFSUkFZX0JVRkZFUixhLm5vcm1hbEFycmF5LEYuRFlOQU1JQ19EUkFXKTtaLmVuYWJsZUF0dHJpYnV0ZShiLm5vcm1hbCk7Ri52ZXJ0ZXhBdHRyaWJQb2ludGVyKGIubm9ybWFsLDMsRi5GTE9BVCwhMSwwLDApfWEuaGFzVXZzJiZjLm1hcCYmKEYuYmluZEJ1ZmZlcihGLkFSUkFZX0JVRkZFUixkLnV2KSxGLmJ1ZmZlckRhdGEoRi5BUlJBWV9CVUZGRVIsYS51dkFycmF5LEYuRFlOQU1JQ19EUkFXKSxaLmVuYWJsZUF0dHJpYnV0ZShiLnV2KSxGLnZlcnRleEF0dHJpYlBvaW50ZXIoYi51diwyLEYuRkxPQVQsITEsMCwwKSk7YS5oYXNDb2xvcnMmJjAhPT1jLnZlcnRleENvbG9ycyYmKEYuYmluZEJ1ZmZlcihGLkFSUkFZX0JVRkZFUixkLmNvbG9yKSxGLmJ1ZmZlckRhdGEoRi5BUlJBWV9CVUZGRVIsYS5jb2xvckFycmF5LFxuICAgIEYuRFlOQU1JQ19EUkFXKSxaLmVuYWJsZUF0dHJpYnV0ZShiLmNvbG9yKSxGLnZlcnRleEF0dHJpYlBvaW50ZXIoYi5jb2xvciwzLEYuRkxPQVQsITEsMCwwKSk7Wi5kaXNhYmxlVW51c2VkQXR0cmlidXRlcygpO0YuZHJhd0FycmF5cyhGLlRSSUFOR0xFUywwLGEuY291bnQpO2EuY291bnQ9MH07dGhpcy5yZW5kZXJCdWZmZXJEaXJlY3Q9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBnPWUuaXNNZXNoJiYwPmUubWF0cml4V29ybGQuZGV0ZXJtaW5hbnQoKTtaLnNldE1hdGVyaWFsKGQsZyk7dmFyIGg9dShhLGIsZCxlKTthPWMuaWQrXCJfXCIraC5pZCtcIl9cIisoITA9PT1kLndpcmVmcmFtZSk7dmFyIGs9ITE7YSE9PVImJihSPWEsaz0hMCk7ZS5tb3JwaFRhcmdldEluZmx1ZW5jZXMmJih4YS51cGRhdGUoZSxjLGQsaCksaz0hMCk7dmFyIGc9Yy5pbmRleCxtPWMuYXR0cmlidXRlcy5wb3NpdGlvbjtiPTE7ITA9PT1kLndpcmVmcmFtZSYmKGc9cmEuZ2V0V2lyZWZyYW1lQXR0cmlidXRlKGMpLFxuICAgIGI9Mik7YT15YTtpZihudWxsIT09Zyl7dmFyIHE9cWEuZ2V0KGcpO2E9emE7YS5zZXRJbmRleChxKX1pZihrKXtrPXZvaWQgMDtpZihjJiZjLmlzSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnkmJm51bGw9PT1pYS5nZXQoXCJBTkdMRV9pbnN0YW5jZWRfYXJyYXlzXCIpKWNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFJlbmRlcmVyLnNldHVwVmVydGV4QXR0cmlidXRlczogdXNpbmcgVEhSRUUuSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnkgYnV0IGhhcmR3YXJlIGRvZXMgbm90IHN1cHBvcnQgZXh0ZW5zaW9uIEFOR0xFX2luc3RhbmNlZF9hcnJheXMuXCIpO2Vsc2V7dm9pZCAwPT09ayYmKGs9MCk7Wi5pbml0QXR0cmlidXRlcygpO3ZhciBuPWMuYXR0cmlidXRlcyxoPWguZ2V0QXR0cmlidXRlcygpLGw9ZC5kZWZhdWx0QXR0cmlidXRlVmFsdWVzO2ZvcihKIGluIGgpe3ZhciByPWhbSl07aWYoMDw9cil7dmFyIHQ9bltKXTtpZih2b2lkIDAhPT10KXt2YXIgdj10Lm5vcm1hbGl6ZWQscD10Lml0ZW1TaXplLFxuICAgIHc9cWEuZ2V0KHQpO2lmKHZvaWQgMCE9PXcpe3ZhciBBPXcuYnVmZmVyLHk9dy50eXBlLHc9dy5ieXRlc1BlckVsZW1lbnQ7aWYodC5pc0ludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlKXt2YXIgej10LmRhdGEsST16LnN0cmlkZSx0PXQub2Zmc2V0O3omJnouaXNJbnN0YW5jZWRJbnRlcmxlYXZlZEJ1ZmZlcj8oWi5lbmFibGVBdHRyaWJ1dGVBbmREaXZpc29yKHIsei5tZXNoUGVyQXR0cmlidXRlKSx2b2lkIDA9PT1jLm1heEluc3RhbmNlZENvdW50JiYoYy5tYXhJbnN0YW5jZWRDb3VudD16Lm1lc2hQZXJBdHRyaWJ1dGUqei5jb3VudCkpOlouZW5hYmxlQXR0cmlidXRlKHIpO0YuYmluZEJ1ZmZlcihGLkFSUkFZX0JVRkZFUixBKTtGLnZlcnRleEF0dHJpYlBvaW50ZXIocixwLHksdixJKncsKGsqSSt0KSp3KX1lbHNlIHQuaXNJbnN0YW5jZWRCdWZmZXJBdHRyaWJ1dGU/KFouZW5hYmxlQXR0cmlidXRlQW5kRGl2aXNvcihyLHQubWVzaFBlckF0dHJpYnV0ZSksdm9pZCAwPT09Yy5tYXhJbnN0YW5jZWRDb3VudCYmXG4gICAgKGMubWF4SW5zdGFuY2VkQ291bnQ9dC5tZXNoUGVyQXR0cmlidXRlKnQuY291bnQpKTpaLmVuYWJsZUF0dHJpYnV0ZShyKSxGLmJpbmRCdWZmZXIoRi5BUlJBWV9CVUZGRVIsQSksRi52ZXJ0ZXhBdHRyaWJQb2ludGVyKHIscCx5LHYsMCxrKnAqdyl9fWVsc2UgaWYodm9pZCAwIT09bCYmKHY9bFtKXSx2b2lkIDAhPT12KSlzd2l0Y2godi5sZW5ndGgpe2Nhc2UgMjpGLnZlcnRleEF0dHJpYjJmdihyLHYpO2JyZWFrO2Nhc2UgMzpGLnZlcnRleEF0dHJpYjNmdihyLHYpO2JyZWFrO2Nhc2UgNDpGLnZlcnRleEF0dHJpYjRmdihyLHYpO2JyZWFrO2RlZmF1bHQ6Ri52ZXJ0ZXhBdHRyaWIxZnYocix2KX19fVouZGlzYWJsZVVudXNlZEF0dHJpYnV0ZXMoKX1udWxsIT09ZyYmRi5iaW5kQnVmZmVyKEYuRUxFTUVOVF9BUlJBWV9CVUZGRVIscS5idWZmZXIpfXE9MDtudWxsIT09Zz9xPWcuY291bnQ6dm9pZCAwIT09bSYmKHE9bS5jb3VudCk7Zz1jLmRyYXdSYW5nZS5zdGFydCpiO209bnVsbCE9PVxuICAgIGY/Zi5zdGFydCpiOjA7dmFyIEo9TWF0aC5tYXgoZyxtKTtmPU1hdGgubWF4KDAsTWF0aC5taW4ocSxnK2MuZHJhd1JhbmdlLmNvdW50KmIsbSsobnVsbCE9PWY/Zi5jb3VudCpiOkluZmluaXR5KSktMS1KKzEpO2lmKDAhPT1mKXtpZihlLmlzTWVzaClpZighMD09PWQud2lyZWZyYW1lKVouc2V0TGluZVdpZHRoKGQud2lyZWZyYW1lTGluZXdpZHRoKihudWxsPT09Tj93YToxKSksYS5zZXRNb2RlKEYuTElORVMpO2Vsc2Ugc3dpdGNoKGUuZHJhd01vZGUpe2Nhc2UgMDphLnNldE1vZGUoRi5UUklBTkdMRVMpO2JyZWFrO2Nhc2UgMTphLnNldE1vZGUoRi5UUklBTkdMRV9TVFJJUCk7YnJlYWs7Y2FzZSAyOmEuc2V0TW9kZShGLlRSSUFOR0xFX0ZBTil9ZWxzZSBlLmlzTGluZT8oZD1kLmxpbmV3aWR0aCx2b2lkIDA9PT1kJiYoZD0xKSxaLnNldExpbmVXaWR0aChkKihudWxsPT09Tj93YToxKSksZS5pc0xpbmVTZWdtZW50cz9hLnNldE1vZGUoRi5MSU5FUyk6ZS5pc0xpbmVMb29wP2Euc2V0TW9kZShGLkxJTkVfTE9PUCk6XG4gICAgYS5zZXRNb2RlKEYuTElORV9TVFJJUCkpOmUuaXNQb2ludHMmJmEuc2V0TW9kZShGLlBPSU5UUyk7YyYmYy5pc0luc3RhbmNlZEJ1ZmZlckdlb21ldHJ5PzA8Yy5tYXhJbnN0YW5jZWRDb3VudCYmYS5yZW5kZXJJbnN0YW5jZXMoYyxKLGYpOmEucmVuZGVyKEosZil9fTt0aGlzLmNvbXBpbGU9ZnVuY3Rpb24oYSxiKXtELmxlbmd0aD0wO0MubGVuZ3RoPTA7YS50cmF2ZXJzZShmdW5jdGlvbihhKXthLmlzTGlnaHQmJihELnB1c2goYSksYS5jYXN0U2hhZG93JiZDLnB1c2goYSkpfSk7dWEuc2V0dXAoRCxDLGIpO2EudHJhdmVyc2UoZnVuY3Rpb24oYil7aWYoYi5tYXRlcmlhbClpZihBcnJheS5pc0FycmF5KGIubWF0ZXJpYWwpKWZvcih2YXIgYz0wO2M8Yi5tYXRlcmlhbC5sZW5ndGg7YysrKW4oYi5tYXRlcmlhbFtjXSxhLmZvZyxiKTtlbHNlIG4oYi5tYXRlcmlhbCxhLmZvZyxiKX0pfTt2YXIgRmE9ITEsQ2E9bnVsbDt0aGlzLmFuaW1hdGU9ZnVuY3Rpb24oYSl7Q2E9YTtGYXx8KChhPVxuICAgIGthLmdldERldmljZSgpKSYmYS5pc1ByZXNlbnRpbmc/YS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoaCk6d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShoKSxGYT0hMCl9O3RoaXMucmVuZGVyPWZ1bmN0aW9uKGEsYixjLGQpe2lmKCFifHwhYi5pc0NhbWVyYSljb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5yZW5kZXI6IGNhbWVyYSBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuQ2FtZXJhLlwiKTtlbHNlIGlmKCFMKXtSPVwiXCI7UD0tMTtWPW51bGw7ITA9PT1hLmF1dG9VcGRhdGUmJmEudXBkYXRlTWF0cml4V29ybGQoKTtudWxsPT09Yi5wYXJlbnQmJmIudXBkYXRlTWF0cml4V29ybGQoKTtrYS5lbmFibGVkJiYoYj1rYS5nZXRDYW1lcmEoYikpO3RkLm11bHRpcGx5TWF0cmljZXMoYi5wcm9qZWN0aW9uTWF0cml4LGIubWF0cml4V29ybGRJbnZlcnNlKTskZC5zZXRGcm9tTWF0cml4KHRkKTtELmxlbmd0aD0wO0MubGVuZ3RoPTA7SC5sZW5ndGg9MDtsYS5sZW5ndGg9XG4gICAgMDthZT10aGlzLmxvY2FsQ2xpcHBpbmdFbmFibGVkO3NkPUphLmluaXQodGhpcy5jbGlwcGluZ1BsYW5lcyxhZSxiKTtFPXNhLmdldChhLGIpO0UuaW5pdCgpO2soYSxiLFMuc29ydE9iamVjdHMpOyEwPT09Uy5zb3J0T2JqZWN0cyYmRS5zb3J0KCk7Z2EudXBkYXRlVmlkZW9UZXh0dXJlcygpO3NkJiZKYS5iZWdpblNoYWRvd3MoKTtFYS5yZW5kZXIoQyxhLGIpO3VhLnNldHVwKEQsQyxiKTtzZCYmSmEuZW5kU2hhZG93cygpO2JhLmZyYW1lKys7YmEuY2FsbHM9MDtiYS52ZXJ0aWNlcz0wO2JhLmZhY2VzPTA7YmEucG9pbnRzPTA7dm9pZCAwPT09YyYmKGM9bnVsbCk7dGhpcy5zZXRSZW5kZXJUYXJnZXQoYyk7amEucmVuZGVyKEUsYSxiLGQpO2Q9RS5vcGFxdWU7dmFyIGU9RS50cmFuc3BhcmVudDtpZihhLm92ZXJyaWRlTWF0ZXJpYWwpe3ZhciBmPWEub3ZlcnJpZGVNYXRlcmlhbDtkLmxlbmd0aCYmbShkLGEsYixmKTtlLmxlbmd0aCYmbShlLGEsYixmKX1lbHNlIGQubGVuZ3RoJiZtKGQsXG4gICAgYSxiKSxlLmxlbmd0aCYmbShlLGEsYik7QmEucmVuZGVyKEgsYSxiKTtBYS5yZW5kZXIobGEsYSxiLG5iKTtjJiZnYS51cGRhdGVSZW5kZXJUYXJnZXRNaXBtYXAoYyk7Wi5idWZmZXJzLmRlcHRoLnNldFRlc3QoITApO1ouYnVmZmVycy5kZXB0aC5zZXRNYXNrKCEwKTtaLmJ1ZmZlcnMuY29sb3Iuc2V0TWFzayghMCk7Wi5zZXRQb2x5Z29uT2Zmc2V0KCExKTtrYS5lbmFibGVkJiZrYS5zdWJtaXRGcmFtZSgpfX07dGhpcy5zZXRGYWNlQ3VsbGluZz1mdW5jdGlvbihhLGIpe1ouc2V0Q3VsbEZhY2UoYSk7Wi5zZXRGbGlwU2lkZWQoMD09PWIpfTt0aGlzLmFsbG9jVGV4dHVyZVVuaXQ9ZnVuY3Rpb24oKXt2YXIgYT1ZO2E+PVQubWF4VGV4dHVyZXMmJmNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFRyeWluZyB0byB1c2UgXCIrYStcIiB0ZXh0dXJlIHVuaXRzIHdoaWxlIHRoaXMgR1BVIHN1cHBvcnRzIG9ubHkgXCIrVC5tYXhUZXh0dXJlcyk7WSs9MTtyZXR1cm4gYX07dGhpcy5zZXRUZXh0dXJlMkQ9XG4gICAgZnVuY3Rpb24oKXt2YXIgYT0hMTtyZXR1cm4gZnVuY3Rpb24oYixjKXtiJiZiLmlzV2ViR0xSZW5kZXJUYXJnZXQmJihhfHwoY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5zZXRUZXh0dXJlMkQ6IGRvbid0IHVzZSByZW5kZXIgdGFyZ2V0cyBhcyB0ZXh0dXJlcy4gVXNlIHRoZWlyIC50ZXh0dXJlIHByb3BlcnR5IGluc3RlYWQuXCIpLGE9ITApLGI9Yi50ZXh0dXJlKTtnYS5zZXRUZXh0dXJlMkQoYixjKX19KCk7dGhpcy5zZXRUZXh0dXJlPWZ1bmN0aW9uKCl7dmFyIGE9ITE7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7YXx8KGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zZXRUZXh0dXJlIGlzIGRlcHJlY2F0ZWQsIHVzZSBzZXRUZXh0dXJlMkQgaW5zdGVhZC5cIiksYT0hMCk7Z2Euc2V0VGV4dHVyZTJEKGIsYyl9fSgpO3RoaXMuc2V0VGV4dHVyZUN1YmU9ZnVuY3Rpb24oKXt2YXIgYT0hMTtyZXR1cm4gZnVuY3Rpb24oYixjKXtiJiZiLmlzV2ViR0xSZW5kZXJUYXJnZXRDdWJlJiZcbiAgICAoYXx8KGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXIuc2V0VGV4dHVyZUN1YmU6IGRvbid0IHVzZSBjdWJlIHJlbmRlciB0YXJnZXRzIGFzIHRleHR1cmVzLiBVc2UgdGhlaXIgLnRleHR1cmUgcHJvcGVydHkgaW5zdGVhZC5cIiksYT0hMCksYj1iLnRleHR1cmUpO2ImJmIuaXNDdWJlVGV4dHVyZXx8QXJyYXkuaXNBcnJheShiLmltYWdlKSYmNj09PWIuaW1hZ2UubGVuZ3RoP2dhLnNldFRleHR1cmVDdWJlKGIsYyk6Z2Euc2V0VGV4dHVyZUN1YmVEeW5hbWljKGIsYyl9fSgpO3RoaXMuZ2V0UmVuZGVyVGFyZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIE59O3RoaXMuc2V0UmVuZGVyVGFyZ2V0PWZ1bmN0aW9uKGEpeyhOPWEpJiZ2b2lkIDA9PT1jYS5nZXQoYSkuX193ZWJnbEZyYW1lYnVmZmVyJiZnYS5zZXR1cFJlbmRlclRhcmdldChhKTt2YXIgYj1udWxsLGM9ITE7YT8oYj1jYS5nZXQoYSkuX193ZWJnbEZyYW1lYnVmZmVyLGEuaXNXZWJHTFJlbmRlclRhcmdldEN1YmUmJihiPVxuICAgIGJbYS5hY3RpdmVDdWJlRmFjZV0sYz0hMCksbmIuY29weShhLnZpZXdwb3J0KSxYLmNvcHkoYS5zY2lzc29yKSxHPWEuc2Npc3NvclRlc3QpOihuYi5jb3B5KGRhKS5tdWx0aXBseVNjYWxhcih3YSksWC5jb3B5KGZhKS5tdWx0aXBseVNjYWxhcih3YSksRz0kZSk7TSE9PWImJihGLmJpbmRGcmFtZWJ1ZmZlcihGLkZSQU1FQlVGRkVSLGIpLE09Yik7Wi52aWV3cG9ydChuYik7Wi5zY2lzc29yKFgpO1ouc2V0U2Npc3NvclRlc3QoRyk7YyYmKGM9Y2EuZ2V0KGEudGV4dHVyZSksRi5mcmFtZWJ1ZmZlclRleHR1cmUyRChGLkZSQU1FQlVGRkVSLEYuQ09MT1JfQVRUQUNITUVOVDAsRi5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1grYS5hY3RpdmVDdWJlRmFjZSxjLl9fd2ViZ2xUZXh0dXJlLGEuYWN0aXZlTWlwTWFwTGV2ZWwpKX07dGhpcy5yZWFkUmVuZGVyVGFyZ2V0UGl4ZWxzPWZ1bmN0aW9uKGEsYixjLGQsZSxmKXtpZihhJiZhLmlzV2ViR0xSZW5kZXJUYXJnZXQpe3ZhciBnPWNhLmdldChhKS5fX3dlYmdsRnJhbWVidWZmZXI7XG4gICAgaWYoZyl7dmFyIGg9ITE7ZyE9PU0mJihGLmJpbmRGcmFtZWJ1ZmZlcihGLkZSQU1FQlVGRkVSLGcpLGg9ITApO3RyeXt2YXIgaz1hLnRleHR1cmUsbT1rLmZvcm1hdCxxPWsudHlwZTsxMDIzIT09bSYmcGEuY29udmVydChtKSE9PUYuZ2V0UGFyYW1ldGVyKEYuSU1QTEVNRU5UQVRJT05fQ09MT1JfUkVBRF9GT1JNQVQpP2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFJlbmRlcmVyLnJlYWRSZW5kZXJUYXJnZXRQaXhlbHM6IHJlbmRlclRhcmdldCBpcyBub3QgaW4gUkdCQSBvciBpbXBsZW1lbnRhdGlvbiBkZWZpbmVkIGZvcm1hdC5cIik6MTAwOT09PXF8fHBhLmNvbnZlcnQocSk9PT1GLmdldFBhcmFtZXRlcihGLklNUExFTUVOVEFUSU9OX0NPTE9SX1JFQURfVFlQRSl8fDEwMTU9PT1xJiYoaWEuZ2V0KFwiT0VTX3RleHR1cmVfZmxvYXRcIil8fGlhLmdldChcIldFQkdMX2NvbG9yX2J1ZmZlcl9mbG9hdFwiKSl8fDEwMTY9PT1xJiZpYS5nZXQoXCJFWFRfY29sb3JfYnVmZmVyX2hhbGZfZmxvYXRcIik/XG4gICAgRi5jaGVja0ZyYW1lYnVmZmVyU3RhdHVzKEYuRlJBTUVCVUZGRVIpPT09Ri5GUkFNRUJVRkZFUl9DT01QTEVURT8wPD1iJiZiPD1hLndpZHRoLWQmJjA8PWMmJmM8PWEuaGVpZ2h0LWUmJkYucmVhZFBpeGVscyhiLGMsZCxlLHBhLmNvbnZlcnQobSkscGEuY29udmVydChxKSxmKTpjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5yZWFkUmVuZGVyVGFyZ2V0UGl4ZWxzOiByZWFkUGl4ZWxzIGZyb20gcmVuZGVyVGFyZ2V0IGZhaWxlZC4gRnJhbWVidWZmZXIgbm90IGNvbXBsZXRlLlwiKTpjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5yZWFkUmVuZGVyVGFyZ2V0UGl4ZWxzOiByZW5kZXJUYXJnZXQgaXMgbm90IGluIFVuc2lnbmVkQnl0ZVR5cGUgb3IgaW1wbGVtZW50YXRpb24gZGVmaW5lZCB0eXBlLlwiKX1maW5hbGx5e2gmJkYuYmluZEZyYW1lYnVmZmVyKEYuRlJBTUVCVUZGRVIsTSl9fX1lbHNlIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFJlbmRlcmVyLnJlYWRSZW5kZXJUYXJnZXRQaXhlbHM6IHJlbmRlclRhcmdldCBpcyBub3QgVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQuXCIpfX1cbiAgICBmdW5jdGlvbiBQYihhLGIpe3RoaXMubmFtZT1cIlwiO3RoaXMuY29sb3I9bmV3IEgoYSk7dGhpcy5kZW5zaXR5PXZvaWQgMCE9PWI/YjoyLjVFLTR9ZnVuY3Rpb24gUWIoYSxiLGMpe3RoaXMubmFtZT1cIlwiO3RoaXMuY29sb3I9bmV3IEgoYSk7dGhpcy5uZWFyPXZvaWQgMCE9PWI/YjoxO3RoaXMuZmFyPXZvaWQgMCE9PWM/YzoxRTN9ZnVuY3Rpb24gdmQoKXt4LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiU2NlbmVcIjt0aGlzLm92ZXJyaWRlTWF0ZXJpYWw9dGhpcy5mb2c9dGhpcy5iYWNrZ3JvdW5kPW51bGw7dGhpcy5hdXRvVXBkYXRlPSEwfWZ1bmN0aW9uIGRlKGEsYixjLGQsZSl7eC5jYWxsKHRoaXMpO3RoaXMubGVuc0ZsYXJlcz1bXTt0aGlzLnBvc2l0aW9uU2NyZWVuPW5ldyBwO3RoaXMuY3VzdG9tVXBkYXRlQ2FsbGJhY2s9dm9pZCAwO3ZvaWQgMCE9PWEmJnRoaXMuYWRkKGEsYixjLGQsZSl9ZnVuY3Rpb24gaGIoYSl7UC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlNwcml0ZU1hdGVyaWFsXCI7XG4gICAgdGhpcy5jb2xvcj1uZXcgSCgxNjc3NzIxNSk7dGhpcy5tYXA9bnVsbDt0aGlzLnJvdGF0aW9uPTA7dGhpcy5saWdodHM9dGhpcy5mb2c9ITE7dGhpcy5zZXRWYWx1ZXMoYSl9ZnVuY3Rpb24gQ2MoYSl7eC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlNwcml0ZVwiO3RoaXMubWF0ZXJpYWw9dm9pZCAwIT09YT9hOm5ldyBoYn1mdW5jdGlvbiBEYygpe3guY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJMT0RcIjtPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLHtsZXZlbHM6e2VudW1lcmFibGU6ITAsdmFsdWU6W119fSl9ZnVuY3Rpb24gRWMoYSxiKXthPWF8fFtdO3RoaXMuYm9uZXM9YS5zbGljZSgwKTt0aGlzLmJvbmVNYXRyaWNlcz1uZXcgRmxvYXQzMkFycmF5KDE2KnRoaXMuYm9uZXMubGVuZ3RoKTtpZih2b2lkIDA9PT1iKXRoaXMuY2FsY3VsYXRlSW52ZXJzZXMoKTtlbHNlIGlmKHRoaXMuYm9uZXMubGVuZ3RoPT09Yi5sZW5ndGgpdGhpcy5ib25lSW52ZXJzZXM9Yi5zbGljZSgwKTtlbHNlIGZvcihjb25zb2xlLndhcm4oXCJUSFJFRS5Ta2VsZXRvbiBib25lSW52ZXJzZXMgaXMgdGhlIHdyb25nIGxlbmd0aC5cIiksXG4gICAgdGhpcy5ib25lSW52ZXJzZXM9W10sYT0wLGI9dGhpcy5ib25lcy5sZW5ndGg7YTxiO2ErKyl0aGlzLmJvbmVJbnZlcnNlcy5wdXNoKG5ldyBPKX1mdW5jdGlvbiB3ZCgpe3guY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJCb25lXCJ9ZnVuY3Rpb24geGQoYSxiKXtyYS5jYWxsKHRoaXMsYSxiKTt0aGlzLnR5cGU9XCJTa2lubmVkTWVzaFwiO3RoaXMuYmluZE1vZGU9XCJhdHRhY2hlZFwiO3RoaXMuYmluZE1hdHJpeD1uZXcgTzt0aGlzLmJpbmRNYXRyaXhJbnZlcnNlPW5ldyBPO2E9dGhpcy5pbml0Qm9uZXMoKTthPW5ldyBFYyhhKTt0aGlzLmJpbmQoYSx0aGlzLm1hdHJpeFdvcmxkKTt0aGlzLm5vcm1hbGl6ZVNraW5XZWlnaHRzKCl9ZnVuY3Rpb24gVyhhKXtQLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTGluZUJhc2ljTWF0ZXJpYWxcIjt0aGlzLmNvbG9yPW5ldyBIKDE2Nzc3MjE1KTt0aGlzLmxpbmV3aWR0aD0xO3RoaXMubGluZWpvaW49dGhpcy5saW5lY2FwPVwicm91bmRcIjt0aGlzLmxpZ2h0cz0hMTtcbiAgICB0aGlzLnNldFZhbHVlcyhhKX1mdW5jdGlvbiBzYShhLGIsYyl7aWYoMT09PWMpcmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkxpbmU6IHBhcmFtZXRlciBUSFJFRS5MaW5lUGllY2VzIG5vIGxvbmdlciBzdXBwb3J0ZWQuIENyZWF0ZWQgVEhSRUUuTGluZVNlZ21lbnRzIGluc3RlYWQuXCIpLG5ldyBYKGEsYik7eC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkxpbmVcIjt0aGlzLmdlb21ldHJ5PXZvaWQgMCE9PWE/YTpuZXcgRTt0aGlzLm1hdGVyaWFsPXZvaWQgMCE9PWI/YjpuZXcgVyh7Y29sb3I6MTY3NzcyMTUqTWF0aC5yYW5kb20oKX0pfWZ1bmN0aW9uIFgoYSxiKXtzYS5jYWxsKHRoaXMsYSxiKTt0aGlzLnR5cGU9XCJMaW5lU2VnbWVudHNcIn1mdW5jdGlvbiB5ZChhLGIpe3NhLmNhbGwodGhpcyxhLGIpO3RoaXMudHlwZT1cIkxpbmVMb29wXCJ9ZnVuY3Rpb24gS2EoYSl7UC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlBvaW50c01hdGVyaWFsXCI7dGhpcy5jb2xvcj1uZXcgSCgxNjc3NzIxNSk7XG4gICAgdGhpcy5tYXA9bnVsbDt0aGlzLnNpemU9MTt0aGlzLnNpemVBdHRlbnVhdGlvbj0hMDt0aGlzLmxpZ2h0cz0hMTt0aGlzLnNldFZhbHVlcyhhKX1mdW5jdGlvbiBSYihhLGIpe3guY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJQb2ludHNcIjt0aGlzLmdlb21ldHJ5PXZvaWQgMCE9PWE/YTpuZXcgRTt0aGlzLm1hdGVyaWFsPXZvaWQgMCE9PWI/YjpuZXcgS2Eoe2NvbG9yOjE2Nzc3MjE1Kk1hdGgucmFuZG9tKCl9KX1mdW5jdGlvbiBGYygpe3guY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJHcm91cFwifWZ1bmN0aW9uIGVlKGEsYixjLGQsZSxmLGcsaCxrKXtmdW5jdGlvbiBtKCl7YS5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZGVkZGF0YVwiLG0sITEpO3EubmVlZHNVcGRhdGU9ITB9VS5jYWxsKHRoaXMsYSxiLGMsZCxlLGYsZyxoLGspO3RoaXMuZ2VuZXJhdGVNaXBtYXBzPSExO3ZhciBxPXRoaXM7YS5hZGRFdmVudExpc3RlbmVyKFwibG9hZGVkZGF0YVwiLG0sITEpfWZ1bmN0aW9uIFNiKGEsYixjLGQsXG4gICAgZSxmLGcsaCxrLG0scSxuKXtVLmNhbGwodGhpcyxudWxsLGYsZyxoLGssbSxkLGUscSxuKTt0aGlzLmltYWdlPXt3aWR0aDpiLGhlaWdodDpjfTt0aGlzLm1pcG1hcHM9YTt0aGlzLmdlbmVyYXRlTWlwbWFwcz10aGlzLmZsaXBZPSExfWZ1bmN0aW9uIEdjKGEsYixjLGQsZSxmLGcsaCxrLG0pe209dm9pZCAwIT09bT9tOjEwMjY7aWYoMTAyNiE9PW0mJjEwMjchPT1tKXRocm93IEVycm9yKFwiRGVwdGhUZXh0dXJlIGZvcm1hdCBtdXN0IGJlIGVpdGhlciBUSFJFRS5EZXB0aEZvcm1hdCBvciBUSFJFRS5EZXB0aFN0ZW5jaWxGb3JtYXRcIik7dm9pZCAwPT09YyYmMTAyNj09PW0mJihjPTEwMTIpO3ZvaWQgMD09PWMmJjEwMjc9PT1tJiYoYz0xMDIwKTtVLmNhbGwodGhpcyxudWxsLGQsZSxmLGcsaCxtLGMsayk7dGhpcy5pbWFnZT17d2lkdGg6YSxoZWlnaHQ6Yn07dGhpcy5tYWdGaWx0ZXI9dm9pZCAwIT09Zz9nOjEwMDM7dGhpcy5taW5GaWx0ZXI9dm9pZCAwIT09aD9oOjEwMDM7dGhpcy5nZW5lcmF0ZU1pcG1hcHM9XG4gICAgdGhpcy5mbGlwWT0hMX1mdW5jdGlvbiBUYihhKXtFLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiV2lyZWZyYW1lR2VvbWV0cnlcIjt2YXIgYj1bXSxjLGQsZSxmPVswLDBdLGc9e30saD1bXCJhXCIsXCJiXCIsXCJjXCJdO2lmKGEmJmEuaXNHZW9tZXRyeSl7dmFyIGs9YS5mYWNlczt2YXIgbT0wO2ZvcihkPWsubGVuZ3RoO208ZDttKyspe3ZhciBxPWtbbV07Zm9yKGM9MDszPmM7YysrKXt2YXIgbj1xW2hbY11dO3ZhciB1PXFbaFsoYysxKSUzXV07ZlswXT1NYXRoLm1pbihuLHUpO2ZbMV09TWF0aC5tYXgobix1KTtuPWZbMF0rXCIsXCIrZlsxXTt2b2lkIDA9PT1nW25dJiYoZ1tuXT17aW5kZXgxOmZbMF0saW5kZXgyOmZbMV19KX19Zm9yKG4gaW4gZyltPWdbbl0saD1hLnZlcnRpY2VzW20uaW5kZXgxXSxiLnB1c2goaC54LGgueSxoLnopLGg9YS52ZXJ0aWNlc1ttLmluZGV4Ml0sYi5wdXNoKGgueCxoLnksaC56KX1lbHNlIGlmKGEmJmEuaXNCdWZmZXJHZW9tZXRyeSl7dmFyIGg9bmV3IHA7aWYobnVsbCE9PVxuICAgIGEuaW5kZXgpe2s9YS5hdHRyaWJ1dGVzLnBvc2l0aW9uO3E9YS5pbmRleDt2YXIgbD1hLmdyb3VwczswPT09bC5sZW5ndGgmJihsPVt7c3RhcnQ6MCxjb3VudDpxLmNvdW50LG1hdGVyaWFsSW5kZXg6MH1dKTthPTA7Zm9yKGU9bC5sZW5ndGg7YTxlOysrYSlmb3IobT1sW2FdLGM9bS5zdGFydCxkPW0uY291bnQsbT1jLGQ9YytkO208ZDttKz0zKWZvcihjPTA7Mz5jO2MrKyluPXEuZ2V0WChtK2MpLHU9cS5nZXRYKG0rKGMrMSklMyksZlswXT1NYXRoLm1pbihuLHUpLGZbMV09TWF0aC5tYXgobix1KSxuPWZbMF0rXCIsXCIrZlsxXSx2b2lkIDA9PT1nW25dJiYoZ1tuXT17aW5kZXgxOmZbMF0saW5kZXgyOmZbMV19KTtmb3IobiBpbiBnKW09Z1tuXSxoLmZyb21CdWZmZXJBdHRyaWJ1dGUoayxtLmluZGV4MSksYi5wdXNoKGgueCxoLnksaC56KSxoLmZyb21CdWZmZXJBdHRyaWJ1dGUoayxtLmluZGV4MiksYi5wdXNoKGgueCxoLnksaC56KX1lbHNlIGZvcihrPWEuYXR0cmlidXRlcy5wb3NpdGlvbixcbiAgICBtPTAsZD1rLmNvdW50LzM7bTxkO20rKylmb3IoYz0wOzM+YztjKyspZz0zKm0rYyxoLmZyb21CdWZmZXJBdHRyaWJ1dGUoayxnKSxiLnB1c2goaC54LGgueSxoLnopLGc9MyptKyhjKzEpJTMsaC5mcm9tQnVmZmVyQXR0cmlidXRlKGssZyksYi5wdXNoKGgueCxoLnksaC56KX10aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEIoYiwzKSl9ZnVuY3Rpb24gSGMoYSxiLGMpe0wuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJQYXJhbWV0cmljR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e2Z1bmM6YSxzbGljZXM6YixzdGFja3M6Y307dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IFViKGEsYixjKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9ZnVuY3Rpb24gVWIoYSxiLGMpe0UuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJQYXJhbWV0cmljQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e2Z1bmM6YSxzbGljZXM6YixzdGFja3M6Y307dmFyIGQ9W10sZT1bXSxmPVtdLGc9W10saD1cbiAgICBuZXcgcCxrPW5ldyBwLG09bmV3IHAscT1uZXcgcCxuPW5ldyBwLHUsbCx0PWIrMTtmb3IodT0wO3U8PWM7dSsrKXt2YXIgdj11L2M7Zm9yKGw9MDtsPD1iO2wrKyl7dmFyIHc9bC9iLGs9YSh3LHYsayk7ZS5wdXNoKGsueCxrLnksay56KTswPD13LTFFLTU/KG09YSh3LTFFLTUsdixtKSxxLnN1YlZlY3RvcnMoayxtKSk6KG09YSh3KzFFLTUsdixtKSxxLnN1YlZlY3RvcnMobSxrKSk7MDw9di0xRS01PyhtPWEodyx2LTFFLTUsbSksbi5zdWJWZWN0b3JzKGssbSkpOihtPWEodyx2KzFFLTUsbSksbi5zdWJWZWN0b3JzKG0saykpO2guY3Jvc3NWZWN0b3JzKHEsbikubm9ybWFsaXplKCk7Zi5wdXNoKGgueCxoLnksaC56KTtnLnB1c2godyx2KX19Zm9yKHU9MDt1PGM7dSsrKWZvcihsPTA7bDxiO2wrKylhPXUqdCtsKzEsaD0odSsxKSp0K2wrMSxrPSh1KzEpKnQrbCxkLnB1c2godSp0K2wsYSxrKSxkLnB1c2goYSxoLGspO3RoaXMuc2V0SW5kZXgoZCk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLFxuICAgIG5ldyBCKGUsMykpO3RoaXMuYWRkQXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IEIoZiwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBCKGcsMikpfWZ1bmN0aW9uIEljKGEsYixjLGQpe0wuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJQb2x5aGVkcm9uR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3ZlcnRpY2VzOmEsaW5kaWNlczpiLHJhZGl1czpjLGRldGFpbDpkfTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgamEoYSxiLGMsZCkpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfWZ1bmN0aW9uIGphKGEsYixjLGQpe2Z1bmN0aW9uIGUoYSl7aC5wdXNoKGEueCxhLnksYS56KX1mdW5jdGlvbiBmKGIsYyl7Yio9MztjLng9YVtiKzBdO2MueT1hW2IrMV07Yy56PWFbYisyXX1mdW5jdGlvbiBnKGEsYixjLGQpezA+ZCYmMT09PWEueCYmKGtbYl09YS54LTEpOzA9PT1jLngmJjA9PT1jLnomJihrW2JdPWQvMi9NYXRoLlBJKy41KX1FLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiUG9seWhlZHJvbkJ1ZmZlckdlb21ldHJ5XCI7XG4gICAgdGhpcy5wYXJhbWV0ZXJzPXt2ZXJ0aWNlczphLGluZGljZXM6YixyYWRpdXM6YyxkZXRhaWw6ZH07Yz1jfHwxO2Q9ZHx8MDt2YXIgaD1bXSxrPVtdOyhmdW5jdGlvbihhKXtmb3IodmFyIGM9bmV3IHAsZD1uZXcgcCxnPW5ldyBwLGg9MDtoPGIubGVuZ3RoO2grPTMpe2YoYltoKzBdLGMpO2YoYltoKzFdLGQpO2YoYltoKzJdLGcpO3ZhciBrLG0sbD1jLHo9ZCx5PWcsST1NYXRoLnBvdygyLGEpLEE9W107Zm9yKG09MDttPD1JO20rKyl7QVttXT1bXTt2YXIgSj1sLmNsb25lKCkubGVycCh5LG0vSSkseD16LmNsb25lKCkubGVycCh5LG0vSSksQj1JLW07Zm9yKGs9MDtrPD1CO2srKylBW21dW2tdPTA9PT1rJiZtPT09ST9KOkouY2xvbmUoKS5sZXJwKHgsay9CKX1mb3IobT0wO208STttKyspZm9yKGs9MDtrPDIqKEktbSktMTtrKyspbD1NYXRoLmZsb29yKGsvMiksMD09PWslMj8oZShBW21dW2wrMV0pLGUoQVttKzFdW2xdKSxlKEFbbV1bbF0pKTooZShBW21dW2wrMV0pLGUoQVttKzFdW2wrXG4gICAgMV0pLGUoQVttKzFdW2xdKSl9fSkoZCk7KGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1uZXcgcCxjPTA7YzxoLmxlbmd0aDtjKz0zKWIueD1oW2MrMF0sYi55PWhbYysxXSxiLno9aFtjKzJdLGIubm9ybWFsaXplKCkubXVsdGlwbHlTY2FsYXIoYSksaFtjKzBdPWIueCxoW2MrMV09Yi55LGhbYysyXT1iLnp9KShjKTsoZnVuY3Rpb24oKXtmb3IodmFyIGE9bmV3IHAsYj0wO2I8aC5sZW5ndGg7Yis9MylhLng9aFtiKzBdLGEueT1oW2IrMV0sYS56PWhbYisyXSxrLnB1c2goTWF0aC5hdGFuMihhLnosLWEueCkvMi9NYXRoLlBJKy41LDEtKE1hdGguYXRhbjIoLWEueSxNYXRoLnNxcnQoYS54KmEueCthLnoqYS56KSkvTWF0aC5QSSsuNSkpO2Zvcih2YXIgYT1uZXcgcCxiPW5ldyBwLGM9bmV3IHAsZD1uZXcgcCxlPW5ldyBELGY9bmV3IEQsbD1uZXcgRCx3PTAsej0wO3c8aC5sZW5ndGg7dys9OSx6Kz02KXthLnNldChoW3crMF0saFt3KzFdLGhbdysyXSk7Yi5zZXQoaFt3KzNdLGhbdys0XSxoW3crXG4gICAgNV0pO2Muc2V0KGhbdys2XSxoW3crN10saFt3KzhdKTtlLnNldChrW3orMF0sa1t6KzFdKTtmLnNldChrW3orMl0sa1t6KzNdKTtsLnNldChrW3orNF0sa1t6KzVdKTtkLmNvcHkoYSkuYWRkKGIpLmFkZChjKS5kaXZpZGVTY2FsYXIoMyk7dmFyIHk9TWF0aC5hdGFuMihkLnosLWQueCk7ZyhlLHorMCxhLHkpO2coZix6KzIsYix5KTtnKGwseis0LGMseSl9Zm9yKGE9MDthPGsubGVuZ3RoO2ErPTYpYj1rW2ErMF0sYz1rW2ErMl0sZD1rW2ErNF0sZT1NYXRoLm1pbihiLGMsZCksLjk8TWF0aC5tYXgoYixjLGQpJiYuMT5lJiYoLjI+YiYmKGtbYSswXSs9MSksLjI+YyYmKGtbYSsyXSs9MSksLjI+ZCYmKGtbYSs0XSs9MSkpfSkoKTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEIoaCwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgQihoLnNsaWNlKCksMykpO3RoaXMuYWRkQXR0cmlidXRlKFwidXZcIixuZXcgQihrLDIpKTswPT09ZD90aGlzLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCk6XG4gICAgdGhpcy5ub3JtYWxpemVOb3JtYWxzKCl9ZnVuY3Rpb24gSmMoYSxiKXtMLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiVGV0cmFoZWRyb25HZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmEsZGV0YWlsOmJ9O3RoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBWYihhLGIpKTt0aGlzLm1lcmdlVmVydGljZXMoKX1mdW5jdGlvbiBWYihhLGIpe2phLmNhbGwodGhpcyxbMSwxLDEsLTEsLTEsMSwtMSwxLC0xLDEsLTEsLTFdLFsyLDEsMCwwLDMsMiwxLDMsMCwyLDMsMV0sYSxiKTt0aGlzLnR5cGU9XCJUZXRyYWhlZHJvbkJ1ZmZlckdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6YSxkZXRhaWw6Yn19ZnVuY3Rpb24gS2MoYSxiKXtMLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiT2N0YWhlZHJvbkdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6YSxkZXRhaWw6Yn07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IHViKGEsYikpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfVxuICAgIGZ1bmN0aW9uIHViKGEsYil7amEuY2FsbCh0aGlzLFsxLDAsMCwtMSwwLDAsMCwxLDAsMCwtMSwwLDAsMCwxLDAsMCwtMV0sWzAsMiw0LDAsNCwzLDAsMyw1LDAsNSwyLDEsMiw1LDEsNSwzLDEsMyw0LDEsNCwyXSxhLGIpO3RoaXMudHlwZT1cIk9jdGFoZWRyb25CdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmEsZGV0YWlsOmJ9fWZ1bmN0aW9uIExjKGEsYil7TC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkljb3NhaGVkcm9uR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLGRldGFpbDpifTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgV2IoYSxiKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9ZnVuY3Rpb24gV2IoYSxiKXt2YXIgYz0oMStNYXRoLnNxcnQoNSkpLzI7amEuY2FsbCh0aGlzLFstMSxjLDAsMSxjLDAsLTEsLWMsMCwxLC1jLDAsMCwtMSxjLDAsMSxjLDAsLTEsLWMsMCwxLC1jLGMsMCwtMSxjLDAsMSwtYywwLC0xLC1jLDAsMV0sWzAsMTEsXG4gICAgNSwwLDUsMSwwLDEsNywwLDcsMTAsMCwxMCwxMSwxLDUsOSw1LDExLDQsMTEsMTAsMiwxMCw3LDYsNywxLDgsMyw5LDQsMyw0LDIsMywyLDYsMyw2LDgsMyw4LDksNCw5LDUsMiw0LDExLDYsMiwxMCw4LDYsNyw5LDgsMV0sYSxiKTt0aGlzLnR5cGU9XCJJY29zYWhlZHJvbkJ1ZmZlckdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6YSxkZXRhaWw6Yn19ZnVuY3Rpb24gTWMoYSxiKXtMLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiRG9kZWNhaGVkcm9uR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLGRldGFpbDpifTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgWGIoYSxiKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9ZnVuY3Rpb24gWGIoYSxiKXt2YXIgYz0oMStNYXRoLnNxcnQoNSkpLzIsZD0xL2M7amEuY2FsbCh0aGlzLFstMSwtMSwtMSwtMSwtMSwxLC0xLDEsLTEsLTEsMSwxLDEsLTEsLTEsMSwtMSwxLDEsMSwtMSwxLDEsMSwwLC1kLC1jLDAsLWQsYywwLFxuICAgIGQsLWMsMCxkLGMsLWQsLWMsMCwtZCxjLDAsZCwtYywwLGQsYywwLC1jLDAsLWQsYywwLC1kLC1jLDAsZCxjLDAsZF0sWzMsMTEsNywzLDcsMTUsMywxNSwxMyw3LDE5LDE3LDcsMTcsNiw3LDYsMTUsMTcsNCw4LDE3LDgsMTAsMTcsMTAsNiw4LDAsMTYsOCwxNiwyLDgsMiwxMCwwLDEyLDEsMCwxLDE4LDAsMTgsMTYsNiwxMCwyLDYsMiwxMyw2LDEzLDE1LDIsMTYsMTgsMiwxOCwzLDIsMywxMywxOCwxLDksMTgsOSwxMSwxOCwxMSwzLDQsMTQsMTIsNCwxMiwwLDQsMCw4LDExLDksNSwxMSw1LDE5LDExLDE5LDcsMTksNSwxNCwxOSwxNCw0LDE5LDQsMTcsMSwxMiwxNCwxLDE0LDUsMSw1LDldLGEsYik7dGhpcy50eXBlPVwiRG9kZWNhaGVkcm9uQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLGRldGFpbDpifX1mdW5jdGlvbiBOYyhhLGIsYyxkLGUsZil7TC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlR1YmVHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cGF0aDphLFxuICAgIHR1YnVsYXJTZWdtZW50czpiLHJhZGl1czpjLHJhZGlhbFNlZ21lbnRzOmQsY2xvc2VkOmV9O3ZvaWQgMCE9PWYmJmNvbnNvbGUud2FybihcIlRIUkVFLlR1YmVHZW9tZXRyeTogdGFwZXIgaGFzIGJlZW4gcmVtb3ZlZC5cIik7YT1uZXcgWWIoYSxiLGMsZCxlKTt0aGlzLnRhbmdlbnRzPWEudGFuZ2VudHM7dGhpcy5ub3JtYWxzPWEubm9ybWFsczt0aGlzLmJpbm9ybWFscz1hLmJpbm9ybWFsczt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShhKTt0aGlzLm1lcmdlVmVydGljZXMoKX1mdW5jdGlvbiBZYihhLGIsYyxkLGUpe2Z1bmN0aW9uIGYoZSl7cT1hLmdldFBvaW50QXQoZS9iLHEpO3ZhciBmPWcubm9ybWFsc1tlXTtlPWcuYmlub3JtYWxzW2VdO2ZvcihsPTA7bDw9ZDtsKyspe3ZhciBtPWwvZCpNYXRoLlBJKjIsbj1NYXRoLnNpbihtKSxtPS1NYXRoLmNvcyhtKTtrLng9bSpmLngrbiplLng7ay55PW0qZi55K24qZS55O2suej1tKmYueituKmUuejtrLm5vcm1hbGl6ZSgpO3QucHVzaChrLngsXG4gICAgay55LGsueik7aC54PXEueCtjKmsueDtoLnk9cS55K2Mqay55O2guej1xLnorYyprLno7ci5wdXNoKGgueCxoLnksaC56KX19RS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlR1YmVCdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cGF0aDphLHR1YnVsYXJTZWdtZW50czpiLHJhZGl1czpjLHJhZGlhbFNlZ21lbnRzOmQsY2xvc2VkOmV9O2I9Ynx8NjQ7Yz1jfHwxO2Q9ZHx8ODtlPWV8fCExO3ZhciBnPWEuY29tcHV0ZUZyZW5ldEZyYW1lcyhiLGUpO3RoaXMudGFuZ2VudHM9Zy50YW5nZW50czt0aGlzLm5vcm1hbHM9Zy5ub3JtYWxzO3RoaXMuYmlub3JtYWxzPWcuYmlub3JtYWxzO3ZhciBoPW5ldyBwLGs9bmV3IHAsbT1uZXcgRCxxPW5ldyBwLG4sbCxyPVtdLHQ9W10sdj1bXSx3PVtdO2ZvcihuPTA7bjxiO24rKylmKG4pO2YoITE9PT1lP2I6MCk7Zm9yKG49MDtuPD1iO24rKylmb3IobD0wO2w8PWQ7bCsrKW0ueD1uL2IsbS55PWwvZCx2LnB1c2gobS54LG0ueSk7KGZ1bmN0aW9uKCl7Zm9yKGw9XG4gICAgMTtsPD1iO2wrKylmb3Iobj0xO248PWQ7bisrKXt2YXIgYT0oZCsxKSpsKyhuLTEpLGM9KGQrMSkqbCtuLGU9KGQrMSkqKGwtMSkrbjt3LnB1c2goKGQrMSkqKGwtMSkrKG4tMSksYSxlKTt3LnB1c2goYSxjLGUpfX0pKCk7dGhpcy5zZXRJbmRleCh3KTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEIociwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgQih0LDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcInV2XCIsbmV3IEIodiwyKSl9ZnVuY3Rpb24gT2MoYSxiLGMsZCxlLGYsZyl7TC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlRvcnVzS25vdEdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6YSx0dWJlOmIsdHVidWxhclNlZ21lbnRzOmMscmFkaWFsU2VnbWVudHM6ZCxwOmUscTpmfTt2b2lkIDAhPT1nJiZjb25zb2xlLndhcm4oXCJUSFJFRS5Ub3J1c0tub3RHZW9tZXRyeTogaGVpZ2h0U2NhbGUgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC5zY2FsZSggeCwgeSwgeiApIGluc3RlYWQuXCIpO1xuICAgIHRoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBaYihhLGIsYyxkLGUsZikpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfWZ1bmN0aW9uIFpiKGEsYixjLGQsZSxmKXtmdW5jdGlvbiBnKGEsYixjLGQsZSl7dmFyIGY9TWF0aC5zaW4oYSk7Yj1jL2IqYTtjPU1hdGguY29zKGIpO2UueD1kKigyK2MpKi41Kk1hdGguY29zKGEpO2UueT1kKigyK2MpKmYqLjU7ZS56PWQqTWF0aC5zaW4oYikqLjV9RS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlRvcnVzS25vdEJ1ZmZlckdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6YSx0dWJlOmIsdHVidWxhclNlZ21lbnRzOmMscmFkaWFsU2VnbWVudHM6ZCxwOmUscTpmfTthPWF8fDE7Yj1ifHwuNDtjPU1hdGguZmxvb3IoYyl8fDY0O2Q9TWF0aC5mbG9vcihkKXx8ODtlPWV8fDI7Zj1mfHwzO3ZhciBoPVtdLGs9W10sbT1bXSxxPVtdLG4sbD1uZXcgcCxyPW5ldyBwLHQ9bmV3IHAsdj1uZXcgcCx3PW5ldyBwLHo9bmV3IHAseT1uZXcgcDtmb3Iobj0wO248PVxuICAgIGM7KytuKXt2YXIgST1uL2MqZSpNYXRoLlBJKjI7ZyhJLGUsZixhLHQpO2coSSsuMDEsZSxmLGEsdik7ei5zdWJWZWN0b3JzKHYsdCk7eS5hZGRWZWN0b3JzKHYsdCk7dy5jcm9zc1ZlY3RvcnMoeix5KTt5LmNyb3NzVmVjdG9ycyh3LHopO3cubm9ybWFsaXplKCk7eS5ub3JtYWxpemUoKTtmb3IoST0wO0k8PWQ7KytJKXt2YXIgQT1JL2QqTWF0aC5QSSoyLEo9LWIqTWF0aC5jb3MoQSksQT1iKk1hdGguc2luKEEpO2wueD10LngrKEoqeS54K0Eqdy54KTtsLnk9dC55KyhKKnkueStBKncueSk7bC56PXQueisoSip5LnorQSp3LnopO2sucHVzaChsLngsbC55LGwueik7ci5zdWJWZWN0b3JzKGwsdCkubm9ybWFsaXplKCk7bS5wdXNoKHIueCxyLnksci56KTtxLnB1c2gobi9jKTtxLnB1c2goSS9kKX19Zm9yKEk9MTtJPD1jO0krKylmb3Iobj0xO248PWQ7bisrKWE9KGQrMSkqSSsobi0xKSxiPShkKzEpKkkrbixlPShkKzEpKihJLTEpK24saC5wdXNoKChkKzEpKihJLTEpKyhuLTEpLGEsZSksXG4gICAgaC5wdXNoKGEsYixlKTt0aGlzLnNldEluZGV4KGgpO3RoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgQihrLDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBCKG0sMykpO3RoaXMuYWRkQXR0cmlidXRlKFwidXZcIixuZXcgQihxLDIpKX1mdW5jdGlvbiBQYyhhLGIsYyxkLGUpe0wuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJUb3J1c0dlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6YSx0dWJlOmIscmFkaWFsU2VnbWVudHM6Yyx0dWJ1bGFyU2VnbWVudHM6ZCxhcmM6ZX07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3ICRiKGEsYixjLGQsZSkpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfWZ1bmN0aW9uICRiKGEsYixjLGQsZSl7RS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlRvcnVzQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLHR1YmU6YixyYWRpYWxTZWdtZW50czpjLHR1YnVsYXJTZWdtZW50czpkLGFyYzplfTthPWF8fDE7Yj1ifHxcbiAgICAuNDtjPU1hdGguZmxvb3IoYyl8fDg7ZD1NYXRoLmZsb29yKGQpfHw2O2U9ZXx8MipNYXRoLlBJO3ZhciBmPVtdLGc9W10saD1bXSxrPVtdLG09bmV3IHAscT1uZXcgcCxuPW5ldyBwLGwscjtmb3IobD0wO2w8PWM7bCsrKWZvcihyPTA7cjw9ZDtyKyspe3ZhciB0PXIvZCplLHY9bC9jKk1hdGguUEkqMjtxLng9KGErYipNYXRoLmNvcyh2KSkqTWF0aC5jb3ModCk7cS55PShhK2IqTWF0aC5jb3ModikpKk1hdGguc2luKHQpO3Euej1iKk1hdGguc2luKHYpO2cucHVzaChxLngscS55LHEueik7bS54PWEqTWF0aC5jb3ModCk7bS55PWEqTWF0aC5zaW4odCk7bi5zdWJWZWN0b3JzKHEsbSkubm9ybWFsaXplKCk7aC5wdXNoKG4ueCxuLnksbi56KTtrLnB1c2goci9kKTtrLnB1c2gobC9jKX1mb3IobD0xO2w8PWM7bCsrKWZvcihyPTE7cjw9ZDtyKyspYT0oZCsxKSoobC0xKStyLTEsYj0oZCsxKSoobC0xKStyLGU9KGQrMSkqbCtyLGYucHVzaCgoZCsxKSpsK3ItMSxhLGUpLGYucHVzaChhLGIsXG4gICAgZSk7dGhpcy5zZXRJbmRleChmKTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEIoZywzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgQihoLDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcInV2XCIsbmV3IEIoaywyKSl9ZnVuY3Rpb24gYmYoYSxiLGMsZCxlKXtmb3IodmFyIGYsZz0wLGg9YixrPWMtZDtoPGM7aCs9ZClnKz0oYVtrXS1hW2hdKSooYVtoKzFdK2FbaysxXSksaz1oO2lmKGU9PT0wPGcpZm9yKGU9YjtlPGM7ZSs9ZClmPWNmKGUsYVtlXSxhW2UrMV0sZik7ZWxzZSBmb3IoZT1jLWQ7ZT49YjtlLT1kKWY9Y2YoZSxhW2VdLGFbZSsxXSxmKTtmJiZ2YihmLGYubmV4dCkmJihRYyhmKSxmPWYubmV4dCk7cmV0dXJuIGZ9ZnVuY3Rpb24gUmMoYSxiKXtpZighYSlyZXR1cm4gYTtifHwoYj1hKTtkb3t2YXIgYz0hMTtpZihhLnN0ZWluZXJ8fCF2YihhLGEubmV4dCkmJjAhPT10YShhLnByZXYsYSxhLm5leHQpKWE9YS5uZXh0O2Vsc2V7UWMoYSk7YT1iPWEucHJldjtcbiAgICBpZihhPT09YS5uZXh0KWJyZWFrO2M9ITB9fXdoaWxlKGN8fGEhPT1iKTtyZXR1cm4gYn1mdW5jdGlvbiBTYyhhLGIsYyxkLGUsZixnKXtpZihhKXtpZighZyYmZil7dmFyIGg9YSxrPWg7ZG8gbnVsbD09PWsueiYmKGsuej1mZShrLngsay55LGQsZSxmKSksay5wcmV2Wj1rLnByZXYsaz1rLm5leHRaPWsubmV4dDt3aGlsZShrIT09aCk7ay5wcmV2Wi5uZXh0Wj1udWxsO2sucHJldlo9bnVsbDt2YXIgaD1rLG0scSxuLGwscj0xO2Rve2s9aDt2YXIgdD1oPW51bGw7Zm9yKHE9MDtrOyl7cSsrO3ZhciBwPWs7Zm9yKG09bj0wO208ciYmKG4rKyxwPXAubmV4dFoscCk7bSsrKTtmb3IobD1yOzA8bnx8MDxsJiZwOykwIT09biYmKDA9PT1sfHwhcHx8ay56PD1wLnopPyhtPWssaz1rLm5leHRaLG4tLSk6KG09cCxwPXAubmV4dFosbC0tKSx0P3QubmV4dFo9bTpoPW0sbS5wcmV2Wj10LHQ9bTtrPXB9dC5uZXh0Wj1udWxsO3IqPTJ9d2hpbGUoMTxxKX1mb3IoaD1hO2EucHJldiE9PWEubmV4dDspe2s9XG4gICAgYS5wcmV2O3A9YS5uZXh0O2lmKGYpYTp7dD1hO2w9ZDt2YXIgdz1lLHo9ZjtxPXQucHJldjtuPXQ7cj10Lm5leHQ7aWYoMDw9dGEocSxuLHIpKXQ9ITE7ZWxzZXt2YXIgeT1xLng+bi54P3EueD5yLng/cS54OnIueDpuLng+ci54P24ueDpyLngsST1xLnk+bi55P3EueT5yLnk/cS55OnIueTpuLnk+ci55P24ueTpyLnk7bT1mZShxLng8bi54P3EueDxyLng/cS54OnIueDpuLng8ci54P24ueDpyLngscS55PG4ueT9xLnk8ci55P3EueTpyLnk6bi55PHIueT9uLnk6ci55LGwsdyx6KTtsPWZlKHksSSxsLHcseik7Zm9yKHc9dC5uZXh0Wjt3JiZ3Lno8PWw7KXtpZih3IT09dC5wcmV2JiZ3IT09dC5uZXh0JiZ6ZChxLngscS55LG4ueCxuLnksci54LHIueSx3Lngsdy55KSYmMDw9dGEody5wcmV2LHcsdy5uZXh0KSl7dD0hMTticmVhayBhfXc9dy5uZXh0Wn1mb3Iodz10LnByZXZaO3cmJncuej49bTspe2lmKHchPT10LnByZXYmJnchPT10Lm5leHQmJnpkKHEueCxxLnksbi54LG4ueSxyLngsXG4gICAgci55LHcueCx3LnkpJiYwPD10YSh3LnByZXYsdyx3Lm5leHQpKXt0PSExO2JyZWFrIGF9dz13LnByZXZafXQ9ITB9fWVsc2UgYTppZih0PWEscT10LnByZXYsbj10LHI9dC5uZXh0LDA8PXRhKHEsbixyKSl0PSExO2Vsc2V7Zm9yKG09dC5uZXh0Lm5leHQ7bSE9PXQucHJldjspe2lmKHpkKHEueCxxLnksbi54LG4ueSxyLngsci55LG0ueCxtLnkpJiYwPD10YShtLnByZXYsbSxtLm5leHQpKXt0PSExO2JyZWFrIGF9bT1tLm5leHR9dD0hMH1pZih0KWIucHVzaChrLmkvYyksYi5wdXNoKGEuaS9jKSxiLnB1c2gocC5pL2MpLFFjKGEpLGg9YT1wLm5leHQ7ZWxzZSBpZihhPXAsYT09PWgpe2lmKCFnKVNjKFJjKGEpLGIsYyxkLGUsZiwxKTtlbHNlIGlmKDE9PT1nKXtnPWI7aD1jO2s9YTtkbyBwPWsucHJldix0PWsubmV4dC5uZXh0LCF2YihwLHQpJiZkZihwLGssay5uZXh0LHQpJiZUYyhwLHQpJiZUYyh0LHApJiYoZy5wdXNoKHAuaS9oKSxnLnB1c2goay5pL2gpLGcucHVzaCh0LmkvaCksXG4gICAgUWMoayksUWMoay5uZXh0KSxrPWE9dCksaz1rLm5leHQ7d2hpbGUoayE9PWEpO2E9aztTYyhhLGIsYyxkLGUsZiwyKX1lbHNlIGlmKDI9PT1nKWE6e2c9YTtkb3tmb3IoaD1nLm5leHQubmV4dDtoIT09Zy5wcmV2Oyl7aWYoaz1nLmkhPT1oLmkpe2s9ZztwPWg7aWYodD1rLm5leHQuaSE9PXAuaSYmay5wcmV2LmkhPT1wLmkpe2I6e3Q9aztkb3tpZih0LmkhPT1rLmkmJnQubmV4dC5pIT09ay5pJiZ0LmkhPT1wLmkmJnQubmV4dC5pIT09cC5pJiZkZih0LHQubmV4dCxrLHApKXt0PSEwO2JyZWFrIGJ9dD10Lm5leHR9d2hpbGUodCE9PWspO3Q9ITF9dD0hdH1pZih0PXQmJlRjKGsscCkmJlRjKHAsaykpe3Q9aztxPSExO249KGsueCtwLngpLzI7cD0oay55K3AueSkvMjtkbyB0Lnk+cCE9PXQubmV4dC55PnAmJnQubmV4dC55IT09dC55JiZuPCh0Lm5leHQueC10LngpKihwLXQueSkvKHQubmV4dC55LXQueSkrdC54JiYocT0hcSksdD10Lm5leHQ7d2hpbGUodCE9PWspO3Q9cX1rPXR9aWYoayl7YT1cbiAgICBlZihnLGgpO2c9UmMoZyxnLm5leHQpO2E9UmMoYSxhLm5leHQpO1NjKGcsYixjLGQsZSxmKTtTYyhhLGIsYyxkLGUsZik7YnJlYWsgYX1oPWgubmV4dH1nPWcubmV4dH13aGlsZShnIT09YSl9YnJlYWt9fX19ZnVuY3Rpb24gSGcoYSxiKXtyZXR1cm4gYS54LWIueH1mdW5jdGlvbiBJZyhhLGIpe3ZhciBjPWIsZD1hLngsZT1hLnksZj0tSW5maW5pdHk7ZG97aWYoZTw9Yy55JiZlPj1jLm5leHQueSYmYy5uZXh0LnkhPT1jLnkpe3ZhciBnPWMueCsoZS1jLnkpKihjLm5leHQueC1jLngpLyhjLm5leHQueS1jLnkpO2lmKGc8PWQmJmc+Zil7Zj1nO2lmKGc9PT1kKXtpZihlPT09Yy55KXJldHVybiBjO2lmKGU9PT1jLm5leHQueSlyZXR1cm4gYy5uZXh0fXZhciBoPWMueDxjLm5leHQueD9jOmMubmV4dH19Yz1jLm5leHR9d2hpbGUoYyE9PWIpO2lmKCFoKXJldHVybiBudWxsO2lmKGQ9PT1mKXJldHVybiBoLnByZXY7Yj1oO2Zvcih2YXIgZz1oLngsaz1oLnksbT1JbmZpbml0eSxxLGM9aC5uZXh0O2MhPT1cbiAgICBiOylkPj1jLngmJmMueD49ZyYmZCE9PWMueCYmemQoZTxrP2Q6ZixlLGcsayxlPGs/ZjpkLGUsYy54LGMueSkmJihxPU1hdGguYWJzKGUtYy55KS8oZC1jLngpLChxPG18fHE9PT1tJiZjLng+aC54KSYmVGMoYyxhKSYmKGg9YyxtPXEpKSxjPWMubmV4dDtyZXR1cm4gaH1mdW5jdGlvbiBmZShhLGIsYyxkLGUpe2E9MzI3NjcqKGEtYykqZTtiPTMyNzY3KihiLWQpKmU7YT0oYXxhPDw4KSYxNjcxMTkzNTthPShhfGE8PDQpJjI1MjY0NTEzNTthPShhfGE8PDIpJjg1ODk5MzQ1OTtiPShifGI8PDgpJjE2NzExOTM1O2I9KGJ8Yjw8NCkmMjUyNjQ1MTM1O2I9KGJ8Yjw8MikmODU4OTkzNDU5O3JldHVybihhfGE8PDEpJjE0MzE2NTU3NjV8KChifGI8PDEpJjE0MzE2NTU3NjUpPDwxfWZ1bmN0aW9uIEpnKGEpe3ZhciBiPWEsYz1hO2RvIGIueDxjLngmJihjPWIpLGI9Yi5uZXh0O3doaWxlKGIhPT1hKTtyZXR1cm4gY31mdW5jdGlvbiB6ZChhLGIsYyxkLGUsZixnLGgpe3JldHVybiAwPD0oZS1cbiAgICBnKSooYi1oKS0oYS1nKSooZi1oKSYmMDw9KGEtZykqKGQtaCktKGMtZykqKGItaCkmJjA8PShjLWcpKihmLWgpLShlLWcpKihkLWgpfWZ1bmN0aW9uIHRhKGEsYixjKXtyZXR1cm4oYi55LWEueSkqKGMueC1iLngpLShiLngtYS54KSooYy55LWIueSl9ZnVuY3Rpb24gdmIoYSxiKXtyZXR1cm4gYS54PT09Yi54JiZhLnk9PT1iLnl9ZnVuY3Rpb24gZGYoYSxiLGMsZCl7cmV0dXJuIHZiKGEsYikmJnZiKGMsZCl8fHZiKGEsZCkmJnZiKGMsYik/ITA6MDx0YShhLGIsYykhPT0wPHRhKGEsYixkKSYmMDx0YShjLGQsYSkhPT0wPHRhKGMsZCxiKX1mdW5jdGlvbiBUYyhhLGIpe3JldHVybiAwPnRhKGEucHJldixhLGEubmV4dCk/MDw9dGEoYSxiLGEubmV4dCkmJjA8PXRhKGEsYS5wcmV2LGIpOjA+dGEoYSxiLGEucHJldil8fDA+dGEoYSxhLm5leHQsYil9ZnVuY3Rpb24gZWYoYSxiKXt2YXIgYz1uZXcgZ2UoYS5pLGEueCxhLnkpLGQ9bmV3IGdlKGIuaSxiLngsYi55KSxlPWEubmV4dCxmPWIucHJldjtcbiAgICBhLm5leHQ9YjtiLnByZXY9YTtjLm5leHQ9ZTtlLnByZXY9YztkLm5leHQ9YztjLnByZXY9ZDtmLm5leHQ9ZDtkLnByZXY9ZjtyZXR1cm4gZH1mdW5jdGlvbiBjZihhLGIsYyxkKXthPW5ldyBnZShhLGIsYyk7ZD8oYS5uZXh0PWQubmV4dCxhLnByZXY9ZCxkLm5leHQucHJldj1hLGQubmV4dD1hKTooYS5wcmV2PWEsYS5uZXh0PWEpO3JldHVybiBhfWZ1bmN0aW9uIFFjKGEpe2EubmV4dC5wcmV2PWEucHJldjthLnByZXYubmV4dD1hLm5leHQ7YS5wcmV2WiYmKGEucHJldloubmV4dFo9YS5uZXh0Wik7YS5uZXh0WiYmKGEubmV4dFoucHJldlo9YS5wcmV2Wil9ZnVuY3Rpb24gZ2UoYSxiLGMpe3RoaXMuaT1hO3RoaXMueD1iO3RoaXMueT1jO3RoaXMubmV4dFo9dGhpcy5wcmV2Wj10aGlzLno9dGhpcy5uZXh0PXRoaXMucHJldj1udWxsO3RoaXMuc3RlaW5lcj0hMX1mdW5jdGlvbiBpYihhLGIpe0wuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJFeHRydWRlR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9XG4gICAge3NoYXBlczphLG9wdGlvbnM6Yn07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IExhKGEsYikpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfWZ1bmN0aW9uIExhKGEsYil7XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBhJiYoRS5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIkV4dHJ1ZGVCdWZmZXJHZW9tZXRyeVwiLGE9QXJyYXkuaXNBcnJheShhKT9hOlthXSx0aGlzLmFkZFNoYXBlTGlzdChhLGIpLHRoaXMuY29tcHV0ZVZlcnRleE5vcm1hbHMoKSl9ZnVuY3Rpb24gVWMoYSxiKXtMLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiVGV4dEdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXt0ZXh0OmEscGFyYW1ldGVyczpifTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgYWMoYSxiKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9ZnVuY3Rpb24gYWMoYSxiKXtiPWJ8fHt9O3ZhciBjPWIuZm9udDtpZighY3x8IWMuaXNGb250KXJldHVybiBjb25zb2xlLmVycm9yKFwiVEhSRUUuVGV4dEdlb21ldHJ5OiBmb250IHBhcmFtZXRlciBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuRm9udC5cIiksXG4gICAgbmV3IEw7YT1jLmdlbmVyYXRlU2hhcGVzKGEsYi5zaXplLGIuY3VydmVTZWdtZW50cyk7Yi5hbW91bnQ9dm9pZCAwIT09Yi5oZWlnaHQ/Yi5oZWlnaHQ6NTA7dm9pZCAwPT09Yi5iZXZlbFRoaWNrbmVzcyYmKGIuYmV2ZWxUaGlja25lc3M9MTApO3ZvaWQgMD09PWIuYmV2ZWxTaXplJiYoYi5iZXZlbFNpemU9OCk7dm9pZCAwPT09Yi5iZXZlbEVuYWJsZWQmJihiLmJldmVsRW5hYmxlZD0hMSk7TGEuY2FsbCh0aGlzLGEsYik7dGhpcy50eXBlPVwiVGV4dEJ1ZmZlckdlb21ldHJ5XCJ9ZnVuY3Rpb24gVmMoYSxiLGMsZCxlLGYsZyl7TC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlNwaGVyZUdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6YSx3aWR0aFNlZ21lbnRzOmIsaGVpZ2h0U2VnbWVudHM6YyxwaGlTdGFydDpkLHBoaUxlbmd0aDplLHRoZXRhU3RhcnQ6Zix0aGV0YUxlbmd0aDpnfTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgd2IoYSxiLGMsZCxlLGYsZykpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfVxuICAgIGZ1bmN0aW9uIHdiKGEsYixjLGQsZSxmLGcpe0UuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJTcGhlcmVCdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmEsd2lkdGhTZWdtZW50czpiLGhlaWdodFNlZ21lbnRzOmMscGhpU3RhcnQ6ZCxwaGlMZW5ndGg6ZSx0aGV0YVN0YXJ0OmYsdGhldGFMZW5ndGg6Z307YT1hfHwxO2I9TWF0aC5tYXgoMyxNYXRoLmZsb29yKGIpfHw4KTtjPU1hdGgubWF4KDIsTWF0aC5mbG9vcihjKXx8Nik7ZD12b2lkIDAhPT1kP2Q6MDtlPXZvaWQgMCE9PWU/ZToyKk1hdGguUEk7Zj12b2lkIDAhPT1mP2Y6MDtnPXZvaWQgMCE9PWc/ZzpNYXRoLlBJO3ZhciBoPWYrZyxrLG0scT0wLG49W10sbD1uZXcgcCxyPW5ldyBwLHQ9W10sdj1bXSx3PVtdLHo9W107Zm9yKG09MDttPD1jO20rKyl7dmFyIHk9W10sST1tL2M7Zm9yKGs9MDtrPD1iO2srKyl7dmFyIEE9ay9iO2wueD0tYSpNYXRoLmNvcyhkK0EqZSkqTWF0aC5zaW4oZitJKmcpO2wueT1hKk1hdGguY29zKGYrXG4gICAgSSpnKTtsLno9YSpNYXRoLnNpbihkK0EqZSkqTWF0aC5zaW4oZitJKmcpO3YucHVzaChsLngsbC55LGwueik7ci5zZXQobC54LGwueSxsLnopLm5vcm1hbGl6ZSgpO3cucHVzaChyLngsci55LHIueik7ei5wdXNoKEEsMS1JKTt5LnB1c2gocSsrKX1uLnB1c2goeSl9Zm9yKG09MDttPGM7bSsrKWZvcihrPTA7azxiO2srKylhPW5bbV1baysxXSxkPW5bbV1ba10sZT1uW20rMV1ba10sZz1uW20rMV1baysxXSwoMCE9PW18fDA8ZikmJnQucHVzaChhLGQsZyksKG0hPT1jLTF8fGg8TWF0aC5QSSkmJnQucHVzaChkLGUsZyk7dGhpcy5zZXRJbmRleCh0KTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEIodiwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgQih3LDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcInV2XCIsbmV3IEIoeiwyKSl9ZnVuY3Rpb24gV2MoYSxiLGMsZCxlLGYpe0wuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJSaW5nR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9XG4gICAge2lubmVyUmFkaXVzOmEsb3V0ZXJSYWRpdXM6Yix0aGV0YVNlZ21lbnRzOmMscGhpU2VnbWVudHM6ZCx0aGV0YVN0YXJ0OmUsdGhldGFMZW5ndGg6Zn07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IGJjKGEsYixjLGQsZSxmKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9ZnVuY3Rpb24gYmMoYSxiLGMsZCxlLGYpe0UuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJSaW5nQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e2lubmVyUmFkaXVzOmEsb3V0ZXJSYWRpdXM6Yix0aGV0YVNlZ21lbnRzOmMscGhpU2VnbWVudHM6ZCx0aGV0YVN0YXJ0OmUsdGhldGFMZW5ndGg6Zn07YT1hfHwuNTtiPWJ8fDE7ZT12b2lkIDAhPT1lP2U6MDtmPXZvaWQgMCE9PWY/ZjoyKk1hdGguUEk7Yz12b2lkIDAhPT1jP01hdGgubWF4KDMsYyk6ODtkPXZvaWQgMCE9PWQ/TWF0aC5tYXgoMSxkKToxO3ZhciBnPVtdLGg9W10saz1bXSxtPVtdLHE9YSxuPShiLWEpL2QsbD1uZXcgcCxyPW5ldyBELHQsdjtmb3IodD1cbiAgICAwO3Q8PWQ7dCsrKXtmb3Iodj0wO3Y8PWM7disrKWE9ZSt2L2MqZixsLng9cSpNYXRoLmNvcyhhKSxsLnk9cSpNYXRoLnNpbihhKSxoLnB1c2gobC54LGwueSxsLnopLGsucHVzaCgwLDAsMSksci54PShsLngvYisxKS8yLHIueT0obC55L2IrMSkvMixtLnB1c2goci54LHIueSk7cSs9bn1mb3IodD0wO3Q8ZDt0KyspZm9yKGI9dCooYysxKSx2PTA7djxjO3YrKylhPXYrYixlPWErYysxLGY9YStjKzIscT1hKzEsZy5wdXNoKGEsZSxxKSxnLnB1c2goZSxmLHEpO3RoaXMuc2V0SW5kZXgoZyk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKGgsMykpO3RoaXMuYWRkQXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IEIoaywzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBCKG0sMikpfWZ1bmN0aW9uIFhjKGEsYixjLGQpe0wuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJMYXRoZUdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtwb2ludHM6YSxzZWdtZW50czpiLHBoaVN0YXJ0OmMscGhpTGVuZ3RoOmR9O1xuICAgIHRoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBjYyhhLGIsYyxkKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9ZnVuY3Rpb24gY2MoYSxiLGMsZCl7RS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkxhdGhlQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3BvaW50czphLHNlZ21lbnRzOmIscGhpU3RhcnQ6YyxwaGlMZW5ndGg6ZH07Yj1NYXRoLmZsb29yKGIpfHwxMjtjPWN8fDA7ZD1kfHwyKk1hdGguUEk7ZD1RLmNsYW1wKGQsMCwyKk1hdGguUEkpO3ZhciBlPVtdLGY9W10sZz1bXSxoPTEvYixrPW5ldyBwLG09bmV3IEQscTtmb3IocT0wO3E8PWI7cSsrKXt2YXIgbj1jK3EqaCpkO3ZhciBsPU1hdGguc2luKG4pLHI9TWF0aC5jb3Mobik7Zm9yKG49MDtuPD1hLmxlbmd0aC0xO24rKylrLng9YVtuXS54Kmwsay55PWFbbl0ueSxrLno9YVtuXS54KnIsZi5wdXNoKGsueCxrLnksay56KSxtLng9cS9iLG0ueT1uLyhhLmxlbmd0aC0xKSxnLnB1c2gobS54LG0ueSl9Zm9yKHE9MDtxPGI7cSsrKWZvcihuPVxuICAgIDA7bjxhLmxlbmd0aC0xO24rKyljPW4rcSphLmxlbmd0aCxoPWMrYS5sZW5ndGgsaz1jK2EubGVuZ3RoKzEsbT1jKzEsZS5wdXNoKGMsaCxtKSxlLnB1c2goaCxrLG0pO3RoaXMuc2V0SW5kZXgoZSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKGYsMykpO3RoaXMuYWRkQXR0cmlidXRlKFwidXZcIixuZXcgQihnLDIpKTt0aGlzLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCk7aWYoZD09PTIqTWF0aC5QSSlmb3IoZD10aGlzLmF0dHJpYnV0ZXMubm9ybWFsLmFycmF5LGU9bmV3IHAsZj1uZXcgcCxnPW5ldyBwLGM9YiphLmxlbmd0aCozLG49cT0wO3E8YS5sZW5ndGg7cSsrLG4rPTMpZS54PWRbbiswXSxlLnk9ZFtuKzFdLGUuej1kW24rMl0sZi54PWRbYytuKzBdLGYueT1kW2MrbisxXSxmLno9ZFtjK24rMl0sZy5hZGRWZWN0b3JzKGUsZikubm9ybWFsaXplKCksZFtuKzBdPWRbYytuKzBdPWcueCxkW24rMV09ZFtjK24rMV09Zy55LGRbbisyXT1kW2MrbisyXT1nLnp9ZnVuY3Rpb24geGIoYSxcbiAgICBiKXtMLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiU2hhcGVHZW9tZXRyeVwiO1wib2JqZWN0XCI9PT10eXBlb2YgYiYmKGNvbnNvbGUud2FybihcIlRIUkVFLlNoYXBlR2VvbWV0cnk6IE9wdGlvbnMgcGFyYW1ldGVyIGhhcyBiZWVuIHJlbW92ZWQuXCIpLGI9Yi5jdXJ2ZVNlZ21lbnRzKTt0aGlzLnBhcmFtZXRlcnM9e3NoYXBlczphLGN1cnZlU2VnbWVudHM6Yn07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IHliKGEsYikpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfWZ1bmN0aW9uIHliKGEsYil7ZnVuY3Rpb24gYyhhKXt2YXIgYyxoPWUubGVuZ3RoLzM7YT1hLmV4dHJhY3RQb2ludHMoYik7dmFyIG09YS5zaGFwZSxxPWEuaG9sZXM7aWYoITE9PT0kYS5pc0Nsb2NrV2lzZShtKSlmb3IobT1tLnJldmVyc2UoKSxhPTAsYz1xLmxlbmd0aDthPGM7YSsrKXt2YXIgbD1xW2FdOyEwPT09JGEuaXNDbG9ja1dpc2UobCkmJihxW2FdPWwucmV2ZXJzZSgpKX12YXIgcD0kYS50cmlhbmd1bGF0ZVNoYXBlKG0sXG4gICAgcSk7YT0wO2ZvcihjPXEubGVuZ3RoO2E8YzthKyspbD1xW2FdLG09bS5jb25jYXQobCk7YT0wO2ZvcihjPW0ubGVuZ3RoO2E8YzthKyspbD1tW2FdLGUucHVzaChsLngsbC55LDApLGYucHVzaCgwLDAsMSksZy5wdXNoKGwueCxsLnkpO2E9MDtmb3IoYz1wLmxlbmd0aDthPGM7YSsrKW09cFthXSxkLnB1c2gobVswXStoLG1bMV0raCxtWzJdK2gpLGsrPTN9RS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlNoYXBlQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3NoYXBlczphLGN1cnZlU2VnbWVudHM6Yn07Yj1ifHwxMjt2YXIgZD1bXSxlPVtdLGY9W10sZz1bXSxoPTAsaz0wO2lmKCExPT09QXJyYXkuaXNBcnJheShhKSljKGEpO2Vsc2UgZm9yKHZhciBtPTA7bTxhLmxlbmd0aDttKyspYyhhW21dKSx0aGlzLmFkZEdyb3VwKGgsayxtKSxoKz1rLGs9MDt0aGlzLnNldEluZGV4KGQpO3RoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgQihlLDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcIm5vcm1hbFwiLFxuICAgIG5ldyBCKGYsMykpO3RoaXMuYWRkQXR0cmlidXRlKFwidXZcIixuZXcgQihnLDIpKX1mdW5jdGlvbiBmZihhLGIpe2Iuc2hhcGVzPVtdO2lmKEFycmF5LmlzQXJyYXkoYSkpZm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKWIuc2hhcGVzLnB1c2goYVtjXS51dWlkKTtlbHNlIGIuc2hhcGVzLnB1c2goYS51dWlkKTtyZXR1cm4gYn1mdW5jdGlvbiBkYyhhLGIpe0UuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJFZGdlc0dlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXt0aHJlc2hvbGRBbmdsZTpifTt2YXIgYz1bXTtiPU1hdGguY29zKFEuREVHMlJBRCoodm9pZCAwIT09Yj9iOjEpKTt2YXIgZD1bMCwwXSxlPXt9LGY9W1wiYVwiLFwiYlwiLFwiY1wiXTtpZihhLmlzQnVmZmVyR2VvbWV0cnkpe3ZhciBnPW5ldyBMO2cuZnJvbUJ1ZmZlckdlb21ldHJ5KGEpfWVsc2UgZz1hLmNsb25lKCk7Zy5tZXJnZVZlcnRpY2VzKCk7Zy5jb21wdXRlRmFjZU5vcm1hbHMoKTthPWcudmVydGljZXM7Zz1nLmZhY2VzO2Zvcih2YXIgaD1cbiAgICAwLGs9Zy5sZW5ndGg7aDxrO2grKylmb3IodmFyIG09Z1toXSxxPTA7Mz5xO3ErKyl7dmFyIG49bVtmW3FdXTt2YXIgbD1tW2ZbKHErMSklM11dO2RbMF09TWF0aC5taW4obixsKTtkWzFdPU1hdGgubWF4KG4sbCk7bj1kWzBdK1wiLFwiK2RbMV07dm9pZCAwPT09ZVtuXT9lW25dPXtpbmRleDE6ZFswXSxpbmRleDI6ZFsxXSxmYWNlMTpoLGZhY2UyOnZvaWQgMH06ZVtuXS5mYWNlMj1ofWZvcihuIGluIGUpaWYoZD1lW25dLHZvaWQgMD09PWQuZmFjZTJ8fGdbZC5mYWNlMV0ubm9ybWFsLmRvdChnW2QuZmFjZTJdLm5vcm1hbCk8PWIpZj1hW2QuaW5kZXgxXSxjLnB1c2goZi54LGYueSxmLnopLGY9YVtkLmluZGV4Ml0sYy5wdXNoKGYueCxmLnksZi56KTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEIoYywzKSl9ZnVuY3Rpb24gemIoYSxiLGMsZCxlLGYsZyxoKXtMLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiQ3lsaW5kZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzVG9wOmEsXG4gICAgcmFkaXVzQm90dG9tOmIsaGVpZ2h0OmMscmFkaWFsU2VnbWVudHM6ZCxoZWlnaHRTZWdtZW50czplLG9wZW5FbmRlZDpmLHRoZXRhU3RhcnQ6Zyx0aGV0YUxlbmd0aDpofTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgYWIoYSxiLGMsZCxlLGYsZyxoKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9ZnVuY3Rpb24gYWIoYSxiLGMsZCxlLGYsZyxoKXtmdW5jdGlvbiBrKGMpe3ZhciBlLGY9bmV3IEQsaz1uZXcgcCx1PTAsdj0hMD09PWM/YTpiLHk9ITA9PT1jPzE6LTE7dmFyIHg9dDtmb3IoZT0xO2U8PWQ7ZSsrKW4ucHVzaCgwLHcqeSwwKSxsLnB1c2goMCx5LDApLHIucHVzaCguNSwuNSksdCsrO3ZhciBCPXQ7Zm9yKGU9MDtlPD1kO2UrKyl7dmFyIEM9ZS9kKmgrZyxFPU1hdGguY29zKEMpLEM9TWF0aC5zaW4oQyk7ay54PXYqQztrLnk9dyp5O2suej12KkU7bi5wdXNoKGsueCxrLnksay56KTtsLnB1c2goMCx5LDApO2YueD0uNSpFKy41O2YueT0uNSpDKnkrLjU7ci5wdXNoKGYueCxmLnkpO1xuICAgIHQrK31mb3IoZT0wO2U8ZDtlKyspZj14K2Usaz1CK2UsITA9PT1jP3EucHVzaChrLGsrMSxmKTpxLnB1c2goaysxLGssZiksdSs9MzttLmFkZEdyb3VwKHosdSwhMD09PWM/MToyKTt6Kz11fUUuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJDeWxpbmRlckJ1ZmZlckdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXNUb3A6YSxyYWRpdXNCb3R0b206YixoZWlnaHQ6YyxyYWRpYWxTZWdtZW50czpkLGhlaWdodFNlZ21lbnRzOmUsb3BlbkVuZGVkOmYsdGhldGFTdGFydDpnLHRoZXRhTGVuZ3RoOmh9O3ZhciBtPXRoaXM7YT12b2lkIDAhPT1hP2E6MTtiPXZvaWQgMCE9PWI/YjoxO2M9Y3x8MTtkPU1hdGguZmxvb3IoZCl8fDg7ZT1NYXRoLmZsb29yKGUpfHwxO2Y9dm9pZCAwIT09Zj9mOiExO2c9dm9pZCAwIT09Zz9nOjA7aD12b2lkIDAhPT1oP2g6MipNYXRoLlBJO3ZhciBxPVtdLG49W10sbD1bXSxyPVtdLHQ9MCx2PVtdLHc9Yy8yLHo9MDsoZnVuY3Rpb24oKXt2YXIgZixrLHU9bmV3IHAsXG4gICAgSj1uZXcgcCx4PTAsQj0oYi1hKS9jO2ZvcihrPTA7azw9ZTtrKyspe3ZhciBEPVtdLEM9ay9lLEU9QyooYi1hKSthO2ZvcihmPTA7Zjw9ZDtmKyspe3ZhciBIPWYvZCxLPUgqaCtnLFM9TWF0aC5zaW4oSyksSz1NYXRoLmNvcyhLKTtKLng9RSpTO0oueT0tQypjK3c7Si56PUUqSztuLnB1c2goSi54LEoueSxKLnopO3Uuc2V0KFMsQixLKS5ub3JtYWxpemUoKTtsLnB1c2godS54LHUueSx1LnopO3IucHVzaChILDEtQyk7RC5wdXNoKHQrKyl9di5wdXNoKEQpfWZvcihmPTA7ZjxkO2YrKylmb3Ioaz0wO2s8ZTtrKyspdT12W2srMV1bZl0sSj12W2srMV1bZisxXSxCPXZba11bZisxXSxxLnB1c2godltrXVtmXSx1LEIpLHEucHVzaCh1LEosQikseCs9NjttLmFkZEdyb3VwKHoseCwwKTt6Kz14fSkoKTshMT09PWYmJigwPGEmJmsoITApLDA8YiYmayghMSkpO3RoaXMuc2V0SW5kZXgocSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKG4sMykpO3RoaXMuYWRkQXR0cmlidXRlKFwibm9ybWFsXCIsXG4gICAgbmV3IEIobCwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBCKHIsMikpfWZ1bmN0aW9uIFljKGEsYixjLGQsZSxmLGcpe3piLmNhbGwodGhpcywwLGEsYixjLGQsZSxmLGcpO3RoaXMudHlwZT1cIkNvbmVHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmEsaGVpZ2h0OmIscmFkaWFsU2VnbWVudHM6YyxoZWlnaHRTZWdtZW50czpkLG9wZW5FbmRlZDplLHRoZXRhU3RhcnQ6Zix0aGV0YUxlbmd0aDpnfX1mdW5jdGlvbiBaYyhhLGIsYyxkLGUsZixnKXthYi5jYWxsKHRoaXMsMCxhLGIsYyxkLGUsZixnKTt0aGlzLnR5cGU9XCJDb25lQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLGhlaWdodDpiLHJhZGlhbFNlZ21lbnRzOmMsaGVpZ2h0U2VnbWVudHM6ZCxvcGVuRW5kZWQ6ZSx0aGV0YVN0YXJ0OmYsdGhldGFMZW5ndGg6Z319ZnVuY3Rpb24gJGMoYSxiLGMsZCl7TC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkNpcmNsZUdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPVxuICAgIHtyYWRpdXM6YSxzZWdtZW50czpiLHRoZXRhU3RhcnQ6Yyx0aGV0YUxlbmd0aDpkfTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgZWMoYSxiLGMsZCkpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfWZ1bmN0aW9uIGVjKGEsYixjLGQpe0UuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJDaXJjbGVCdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmEsc2VnbWVudHM6Yix0aGV0YVN0YXJ0OmMsdGhldGFMZW5ndGg6ZH07YT1hfHwxO2I9dm9pZCAwIT09Yj9NYXRoLm1heCgzLGIpOjg7Yz12b2lkIDAhPT1jP2M6MDtkPXZvaWQgMCE9PWQ/ZDoyKk1hdGguUEk7dmFyIGU9W10sZj1bXSxnPVtdLGg9W10sayxtPW5ldyBwLHE9bmV3IEQ7Zi5wdXNoKDAsMCwwKTtnLnB1c2goMCwwLDEpO2gucHVzaCguNSwuNSk7dmFyIG49MDtmb3Ioaz0zO248PWI7bisrLGsrPTMpe3ZhciBsPWMrbi9iKmQ7bS54PWEqTWF0aC5jb3MobCk7bS55PWEqTWF0aC5zaW4obCk7Zi5wdXNoKG0ueCxtLnksXG4gICAgbS56KTtnLnB1c2goMCwwLDEpO3EueD0oZltrXS9hKzEpLzI7cS55PShmW2srMV0vYSsxKS8yO2gucHVzaChxLngscS55KX1mb3Ioaz0xO2s8PWI7aysrKWUucHVzaChrLGsrMSwwKTt0aGlzLnNldEluZGV4KGUpO3RoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgQihmLDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBCKGcsMykpO3RoaXMuYWRkQXR0cmlidXRlKFwidXZcIixuZXcgQihoLDIpKX1mdW5jdGlvbiBmYyhhKXtQLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiU2hhZG93TWF0ZXJpYWxcIjt0aGlzLmNvbG9yPW5ldyBIKDApO3RoaXMub3BhY2l0eT0xO3RoaXMudHJhbnNwYXJlbnQ9dGhpcy5saWdodHM9ITA7dGhpcy5zZXRWYWx1ZXMoYSl9ZnVuY3Rpb24gZ2MoYSl7RmEuY2FsbCh0aGlzLGEpO3RoaXMudHlwZT1cIlJhd1NoYWRlck1hdGVyaWFsXCJ9ZnVuY3Rpb24gVWEoYSl7UC5jYWxsKHRoaXMpO3RoaXMuZGVmaW5lcz17U1RBTkRBUkQ6XCJcIn07dGhpcy50eXBlPVxuICAgIFwiTWVzaFN0YW5kYXJkTWF0ZXJpYWxcIjt0aGlzLmNvbG9yPW5ldyBIKDE2Nzc3MjE1KTt0aGlzLm1ldGFsbmVzcz10aGlzLnJvdWdobmVzcz0uNTt0aGlzLmxpZ2h0TWFwPXRoaXMubWFwPW51bGw7dGhpcy5saWdodE1hcEludGVuc2l0eT0xO3RoaXMuYW9NYXA9bnVsbDt0aGlzLmFvTWFwSW50ZW5zaXR5PTE7dGhpcy5lbWlzc2l2ZT1uZXcgSCgwKTt0aGlzLmVtaXNzaXZlSW50ZW5zaXR5PTE7dGhpcy5idW1wTWFwPXRoaXMuZW1pc3NpdmVNYXA9bnVsbDt0aGlzLmJ1bXBTY2FsZT0xO3RoaXMubm9ybWFsTWFwPW51bGw7dGhpcy5ub3JtYWxTY2FsZT1uZXcgRCgxLDEpO3RoaXMuZGlzcGxhY2VtZW50TWFwPW51bGw7dGhpcy5kaXNwbGFjZW1lbnRTY2FsZT0xO3RoaXMuZGlzcGxhY2VtZW50Qmlhcz0wO3RoaXMuZW52TWFwPXRoaXMuYWxwaGFNYXA9dGhpcy5tZXRhbG5lc3NNYXA9dGhpcy5yb3VnaG5lc3NNYXA9bnVsbDt0aGlzLmVudk1hcEludGVuc2l0eT0xO3RoaXMucmVmcmFjdGlvblJhdGlvPVxuICAgIC45ODt0aGlzLndpcmVmcmFtZT0hMTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xO3RoaXMud2lyZWZyYW1lTGluZWpvaW49dGhpcy53aXJlZnJhbWVMaW5lY2FwPVwicm91bmRcIjt0aGlzLm1vcnBoTm9ybWFscz10aGlzLm1vcnBoVGFyZ2V0cz10aGlzLnNraW5uaW5nPSExO3RoaXMuc2V0VmFsdWVzKGEpfWZ1bmN0aW9uIEFiKGEpe1VhLmNhbGwodGhpcyk7dGhpcy5kZWZpbmVzPXtQSFlTSUNBTDpcIlwifTt0aGlzLnR5cGU9XCJNZXNoUGh5c2ljYWxNYXRlcmlhbFwiO3RoaXMucmVmbGVjdGl2aXR5PS41O3RoaXMuY2xlYXJDb2F0Um91Z2huZXNzPXRoaXMuY2xlYXJDb2F0PTA7dGhpcy5zZXRWYWx1ZXMoYSl9ZnVuY3Rpb24gTWEoYSl7UC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIk1lc2hQaG9uZ01hdGVyaWFsXCI7dGhpcy5jb2xvcj1uZXcgSCgxNjc3NzIxNSk7dGhpcy5zcGVjdWxhcj1uZXcgSCgxMTE4NDgxKTt0aGlzLnNoaW5pbmVzcz0zMDt0aGlzLmxpZ2h0TWFwPXRoaXMubWFwPW51bGw7XG4gICAgdGhpcy5saWdodE1hcEludGVuc2l0eT0xO3RoaXMuYW9NYXA9bnVsbDt0aGlzLmFvTWFwSW50ZW5zaXR5PTE7dGhpcy5lbWlzc2l2ZT1uZXcgSCgwKTt0aGlzLmVtaXNzaXZlSW50ZW5zaXR5PTE7dGhpcy5idW1wTWFwPXRoaXMuZW1pc3NpdmVNYXA9bnVsbDt0aGlzLmJ1bXBTY2FsZT0xO3RoaXMubm9ybWFsTWFwPW51bGw7dGhpcy5ub3JtYWxTY2FsZT1uZXcgRCgxLDEpO3RoaXMuZGlzcGxhY2VtZW50TWFwPW51bGw7dGhpcy5kaXNwbGFjZW1lbnRTY2FsZT0xO3RoaXMuZGlzcGxhY2VtZW50Qmlhcz0wO3RoaXMuZW52TWFwPXRoaXMuYWxwaGFNYXA9dGhpcy5zcGVjdWxhck1hcD1udWxsO3RoaXMuY29tYmluZT0wO3RoaXMucmVmbGVjdGl2aXR5PTE7dGhpcy5yZWZyYWN0aW9uUmF0aW89Ljk4O3RoaXMud2lyZWZyYW1lPSExO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPTE7dGhpcy53aXJlZnJhbWVMaW5lam9pbj10aGlzLndpcmVmcmFtZUxpbmVjYXA9XCJyb3VuZFwiO3RoaXMubW9ycGhOb3JtYWxzPVxuICAgIHRoaXMubW9ycGhUYXJnZXRzPXRoaXMuc2tpbm5pbmc9ITE7dGhpcy5zZXRWYWx1ZXMoYSl9ZnVuY3Rpb24gQmIoYSl7TWEuY2FsbCh0aGlzKTt0aGlzLmRlZmluZXM9e1RPT046XCJcIn07dGhpcy50eXBlPVwiTWVzaFRvb25NYXRlcmlhbFwiO3RoaXMuZ3JhZGllbnRNYXA9bnVsbDt0aGlzLnNldFZhbHVlcyhhKX1mdW5jdGlvbiBDYihhKXtQLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTWVzaE5vcm1hbE1hdGVyaWFsXCI7dGhpcy5idW1wTWFwPW51bGw7dGhpcy5idW1wU2NhbGU9MTt0aGlzLm5vcm1hbE1hcD1udWxsO3RoaXMubm9ybWFsU2NhbGU9bmV3IEQoMSwxKTt0aGlzLmRpc3BsYWNlbWVudE1hcD1udWxsO3RoaXMuZGlzcGxhY2VtZW50U2NhbGU9MTt0aGlzLmRpc3BsYWNlbWVudEJpYXM9MDt0aGlzLndpcmVmcmFtZT0hMTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xO3RoaXMubW9ycGhOb3JtYWxzPXRoaXMubW9ycGhUYXJnZXRzPXRoaXMuc2tpbm5pbmc9dGhpcy5saWdodHM9dGhpcy5mb2c9XG4gICAgITE7dGhpcy5zZXRWYWx1ZXMoYSl9ZnVuY3Rpb24gRGIoYSl7UC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIk1lc2hMYW1iZXJ0TWF0ZXJpYWxcIjt0aGlzLmNvbG9yPW5ldyBIKDE2Nzc3MjE1KTt0aGlzLmxpZ2h0TWFwPXRoaXMubWFwPW51bGw7dGhpcy5saWdodE1hcEludGVuc2l0eT0xO3RoaXMuYW9NYXA9bnVsbDt0aGlzLmFvTWFwSW50ZW5zaXR5PTE7dGhpcy5lbWlzc2l2ZT1uZXcgSCgwKTt0aGlzLmVtaXNzaXZlSW50ZW5zaXR5PTE7dGhpcy5lbnZNYXA9dGhpcy5hbHBoYU1hcD10aGlzLnNwZWN1bGFyTWFwPXRoaXMuZW1pc3NpdmVNYXA9bnVsbDt0aGlzLmNvbWJpbmU9MDt0aGlzLnJlZmxlY3Rpdml0eT0xO3RoaXMucmVmcmFjdGlvblJhdGlvPS45ODt0aGlzLndpcmVmcmFtZT0hMTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xO3RoaXMud2lyZWZyYW1lTGluZWpvaW49dGhpcy53aXJlZnJhbWVMaW5lY2FwPVwicm91bmRcIjt0aGlzLm1vcnBoTm9ybWFscz10aGlzLm1vcnBoVGFyZ2V0cz1cbiAgICB0aGlzLnNraW5uaW5nPSExO3RoaXMuc2V0VmFsdWVzKGEpfWZ1bmN0aW9uIEViKGEpe1cuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJMaW5lRGFzaGVkTWF0ZXJpYWxcIjt0aGlzLnNjYWxlPTE7dGhpcy5kYXNoU2l6ZT0zO3RoaXMuZ2FwU2l6ZT0xO3RoaXMuc2V0VmFsdWVzKGEpfWZ1bmN0aW9uIGhlKGEsYixjKXt2YXIgZD10aGlzLGU9ITEsZj0wLGc9MCxoPXZvaWQgMDt0aGlzLm9uU3RhcnQ9dm9pZCAwO3RoaXMub25Mb2FkPWE7dGhpcy5vblByb2dyZXNzPWI7dGhpcy5vbkVycm9yPWM7dGhpcy5pdGVtU3RhcnQ9ZnVuY3Rpb24oYSl7ZysrO2lmKCExPT09ZSYmdm9pZCAwIT09ZC5vblN0YXJ0KWQub25TdGFydChhLGYsZyk7ZT0hMH07dGhpcy5pdGVtRW5kPWZ1bmN0aW9uKGEpe2YrKztpZih2b2lkIDAhPT1kLm9uUHJvZ3Jlc3MpZC5vblByb2dyZXNzKGEsZixnKTtpZihmPT09ZyYmKGU9ITEsdm9pZCAwIT09ZC5vbkxvYWQpKWQub25Mb2FkKCl9O3RoaXMuaXRlbUVycm9yPWZ1bmN0aW9uKGEpe2lmKHZvaWQgMCE9PVxuICAgIGQub25FcnJvcilkLm9uRXJyb3IoYSl9O3RoaXMucmVzb2x2ZVVSTD1mdW5jdGlvbihhKXtyZXR1cm4gaD9oKGEpOmF9O3RoaXMuc2V0VVJMTW9kaWZpZXI9ZnVuY3Rpb24oYSl7aD1hO3JldHVybiB0aGlzfX1mdW5jdGlvbiBOYShhKXt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOnhhfWZ1bmN0aW9uIGdmKGEpe3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6eGE7dGhpcy5fcGFyc2VyPW51bGx9ZnVuY3Rpb24gaWUoYSl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PWE/YTp4YTt0aGlzLl9wYXJzZXI9bnVsbH1mdW5jdGlvbiBhZChhKXt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOnhhfWZ1bmN0aW9uIGplKGEpe3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6eGF9ZnVuY3Rpb24gQWQoYSl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PWE/YTp4YX1mdW5jdGlvbiBDKCl7dGhpcy50eXBlPVwiQ3VydmVcIjt0aGlzLmFyY0xlbmd0aERpdmlzaW9ucz0yMDB9ZnVuY3Rpb24gQmEoYSxiLGMsZCxlLGYsXG4gICAgZyxoKXtDLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiRWxsaXBzZUN1cnZlXCI7dGhpcy5hWD1hfHwwO3RoaXMuYVk9Ynx8MDt0aGlzLnhSYWRpdXM9Y3x8MTt0aGlzLnlSYWRpdXM9ZHx8MTt0aGlzLmFTdGFydEFuZ2xlPWV8fDA7dGhpcy5hRW5kQW5nbGU9Znx8MipNYXRoLlBJO3RoaXMuYUNsb2Nrd2lzZT1nfHwhMTt0aGlzLmFSb3RhdGlvbj1ofHwwfWZ1bmN0aW9uIGhjKGEsYixjLGQsZSxmKXtCYS5jYWxsKHRoaXMsYSxiLGMsYyxkLGUsZik7dGhpcy50eXBlPVwiQXJjQ3VydmVcIn1mdW5jdGlvbiBrZSgpe3ZhciBhPTAsYj0wLGM9MCxkPTA7cmV0dXJue2luaXRDYXRtdWxsUm9tOmZ1bmN0aW9uKGUsZixnLGgsayl7ZT1rKihnLWUpO2g9ayooaC1mKTthPWY7Yj1lO2M9LTMqZiszKmctMiplLWg7ZD0yKmYtMipnK2UraH0saW5pdE5vbnVuaWZvcm1DYXRtdWxsUm9tOmZ1bmN0aW9uKGUsZixnLGgsayxtLHEpe2U9KChmLWUpL2stKGctZSkvKGsrbSkrKGctZikvbSkqbTtoPSgoZy1mKS9tLVxuICAgIChoLWYpLyhtK3EpKyhoLWcpL3EpKm07YT1mO2I9ZTtjPS0zKmYrMypnLTIqZS1oO2Q9MipmLTIqZytlK2h9LGNhbGM6ZnVuY3Rpb24oZSl7dmFyIGY9ZSplO3JldHVybiBhK2IqZStjKmYrZCpmKmV9fX1mdW5jdGlvbiBjYShhLGIsYyxkKXtDLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiQ2F0bXVsbFJvbUN1cnZlM1wiO3RoaXMucG9pbnRzPWF8fFtdO3RoaXMuY2xvc2VkPWJ8fCExO3RoaXMuY3VydmVUeXBlPWN8fFwiY2VudHJpcGV0YWxcIjt0aGlzLnRlbnNpb249ZHx8LjV9ZnVuY3Rpb24gaGYoYSxiLGMsZCxlKXtiPS41KihkLWIpO2U9LjUqKGUtYyk7dmFyIGY9YSphO3JldHVybigyKmMtMipkK2IrZSkqYSpmKygtMypjKzMqZC0yKmItZSkqZitiKmErY31mdW5jdGlvbiBiZChhLGIsYyxkKXt2YXIgZT0xLWE7cmV0dXJuIGUqZSpiKzIqKDEtYSkqYSpjK2EqYSpkfWZ1bmN0aW9uIGNkKGEsYixjLGQsZSl7dmFyIGY9MS1hLGc9MS1hO3JldHVybiBmKmYqZipiKzMqZypnKmEqYyszKigxLWEpKlxuICAgIGEqYSpkK2EqYSphKmV9ZnVuY3Rpb24gT2EoYSxiLGMsZCl7Qy5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkN1YmljQmV6aWVyQ3VydmVcIjt0aGlzLnYwPWF8fG5ldyBEO3RoaXMudjE9Ynx8bmV3IEQ7dGhpcy52Mj1jfHxuZXcgRDt0aGlzLnYzPWR8fG5ldyBEfWZ1bmN0aW9uIFZhKGEsYixjLGQpe0MuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJDdWJpY0JlemllckN1cnZlM1wiO3RoaXMudjA9YXx8bmV3IHA7dGhpcy52MT1ifHxuZXcgcDt0aGlzLnYyPWN8fG5ldyBwO3RoaXMudjM9ZHx8bmV3IHB9ZnVuY3Rpb24geWEoYSxiKXtDLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTGluZUN1cnZlXCI7dGhpcy52MT1hfHxuZXcgRDt0aGlzLnYyPWJ8fG5ldyBEfWZ1bmN0aW9uIFBhKGEsYil7Qy5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkxpbmVDdXJ2ZTNcIjt0aGlzLnYxPWF8fG5ldyBwO3RoaXMudjI9Ynx8bmV3IHB9ZnVuY3Rpb24gUWEoYSxiLGMpe0MuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJRdWFkcmF0aWNCZXppZXJDdXJ2ZVwiO1xuICAgIHRoaXMudjA9YXx8bmV3IEQ7dGhpcy52MT1ifHxuZXcgRDt0aGlzLnYyPWN8fG5ldyBEfWZ1bmN0aW9uIFdhKGEsYixjKXtDLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiUXVhZHJhdGljQmV6aWVyQ3VydmUzXCI7dGhpcy52MD1hfHxuZXcgcDt0aGlzLnYxPWJ8fG5ldyBwO3RoaXMudjI9Y3x8bmV3IHB9ZnVuY3Rpb24gUmEoYSl7Qy5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlNwbGluZUN1cnZlXCI7dGhpcy5wb2ludHM9YXx8W119ZnVuY3Rpb24gYmIoKXtDLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiQ3VydmVQYXRoXCI7dGhpcy5jdXJ2ZXM9W107dGhpcy5hdXRvQ2xvc2U9ITF9ZnVuY3Rpb24gU2EoYSl7YmIuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJQYXRoXCI7dGhpcy5jdXJyZW50UG9pbnQ9bmV3IEQ7YSYmdGhpcy5zZXRGcm9tUG9pbnRzKGEpfWZ1bmN0aW9uIGpiKGEpe1NhLmNhbGwodGhpcyxhKTt0aGlzLnV1aWQ9US5nZW5lcmF0ZVVVSUQoKTt0aGlzLnR5cGU9XCJTaGFwZVwiO3RoaXMuaG9sZXM9XG4gICAgW119ZnVuY3Rpb24gZGEoYSxiKXt4LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTGlnaHRcIjt0aGlzLmNvbG9yPW5ldyBIKGEpO3RoaXMuaW50ZW5zaXR5PXZvaWQgMCE9PWI/YjoxO3RoaXMucmVjZWl2ZVNoYWRvdz12b2lkIDB9ZnVuY3Rpb24gQmQoYSxiLGMpe2RhLmNhbGwodGhpcyxhLGMpO3RoaXMudHlwZT1cIkhlbWlzcGhlcmVMaWdodFwiO3RoaXMuY2FzdFNoYWRvdz12b2lkIDA7dGhpcy5wb3NpdGlvbi5jb3B5KHguRGVmYXVsdFVwKTt0aGlzLnVwZGF0ZU1hdHJpeCgpO3RoaXMuZ3JvdW5kQ29sb3I9bmV3IEgoYil9ZnVuY3Rpb24gRmIoYSl7dGhpcy5jYW1lcmE9YTt0aGlzLmJpYXM9MDt0aGlzLnJhZGl1cz0xO3RoaXMubWFwU2l6ZT1uZXcgRCg1MTIsNTEyKTt0aGlzLm1hcD1udWxsO3RoaXMubWF0cml4PW5ldyBPfWZ1bmN0aW9uIENkKCl7RmIuY2FsbCh0aGlzLG5ldyBiYSg1MCwxLC41LDUwMCkpfWZ1bmN0aW9uIERkKGEsYixjLGQsZSxmKXtkYS5jYWxsKHRoaXMsYSxiKTt0aGlzLnR5cGU9XG4gICAgXCJTcG90TGlnaHRcIjt0aGlzLnBvc2l0aW9uLmNvcHkoeC5EZWZhdWx0VXApO3RoaXMudXBkYXRlTWF0cml4KCk7dGhpcy50YXJnZXQ9bmV3IHg7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJwb3dlclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnRlbnNpdHkqTWF0aC5QSX0sc2V0OmZ1bmN0aW9uKGEpe3RoaXMuaW50ZW5zaXR5PWEvTWF0aC5QSX19KTt0aGlzLmRpc3RhbmNlPXZvaWQgMCE9PWM/YzowO3RoaXMuYW5nbGU9dm9pZCAwIT09ZD9kOk1hdGguUEkvMzt0aGlzLnBlbnVtYnJhPXZvaWQgMCE9PWU/ZTowO3RoaXMuZGVjYXk9dm9pZCAwIT09Zj9mOjE7dGhpcy5zaGFkb3c9bmV3IENkfWZ1bmN0aW9uIEVkKGEsYixjLGQpe2RhLmNhbGwodGhpcyxhLGIpO3RoaXMudHlwZT1cIlBvaW50TGlnaHRcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInBvd2VyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiA0KnRoaXMuaW50ZW5zaXR5Kk1hdGguUEl9LHNldDpmdW5jdGlvbihhKXt0aGlzLmludGVuc2l0eT1cbiAgICBhLyg0Kk1hdGguUEkpfX0pO3RoaXMuZGlzdGFuY2U9dm9pZCAwIT09Yz9jOjA7dGhpcy5kZWNheT12b2lkIDAhPT1kP2Q6MTt0aGlzLnNoYWRvdz1uZXcgRmIobmV3IGJhKDkwLDEsLjUsNTAwKSl9ZnVuY3Rpb24gRmQoKXtGYi5jYWxsKHRoaXMsbmV3IExiKC01LDUsNSwtNSwuNSw1MDApKX1mdW5jdGlvbiBHZChhLGIpe2RhLmNhbGwodGhpcyxhLGIpO3RoaXMudHlwZT1cIkRpcmVjdGlvbmFsTGlnaHRcIjt0aGlzLnBvc2l0aW9uLmNvcHkoeC5EZWZhdWx0VXApO3RoaXMudXBkYXRlTWF0cml4KCk7dGhpcy50YXJnZXQ9bmV3IHg7dGhpcy5zaGFkb3c9bmV3IEZkfWZ1bmN0aW9uIEhkKGEsYil7ZGEuY2FsbCh0aGlzLGEsYik7dGhpcy50eXBlPVwiQW1iaWVudExpZ2h0XCI7dGhpcy5jYXN0U2hhZG93PXZvaWQgMH1mdW5jdGlvbiBJZChhLGIsYyxkKXtkYS5jYWxsKHRoaXMsYSxiKTt0aGlzLnR5cGU9XCJSZWN0QXJlYUxpZ2h0XCI7dGhpcy5wb3NpdGlvbi5zZXQoMCwxLDApO3RoaXMudXBkYXRlTWF0cml4KCk7XG4gICAgdGhpcy53aWR0aD12b2lkIDAhPT1jP2M6MTA7dGhpcy5oZWlnaHQ9dm9pZCAwIT09ZD9kOjEwfWZ1bmN0aW9uIEpkKGEsYixjLGQpe1QuY2FsbCh0aGlzLGEsYixjLGQpfWZ1bmN0aW9uIEtkKGEsYixjKXtULmNhbGwodGhpcyxhLGIsYyl9ZnVuY3Rpb24gcGEoYSxiLGMsZCl7dGhpcy5wYXJhbWV0ZXJQb3NpdGlvbnM9YTt0aGlzLl9jYWNoZWRJbmRleD0wO3RoaXMucmVzdWx0QnVmZmVyPXZvaWQgMCE9PWQ/ZDpuZXcgYi5jb25zdHJ1Y3RvcihjKTt0aGlzLnNhbXBsZVZhbHVlcz1iO3RoaXMudmFsdWVTaXplPWN9ZnVuY3Rpb24gTGQoYSxiLGMsZCl7cGEuY2FsbCh0aGlzLGEsYixjLGQpfWZ1bmN0aW9uIGRkKGEsYixjLGQpe1QuY2FsbCh0aGlzLGEsYixjLGQpfWZ1bmN0aW9uIE1kKGEsYixjLGQpe1QuY2FsbCh0aGlzLGEsYixjLGQpfWZ1bmN0aW9uIGljKGEsYixjLGQpe1QuY2FsbCh0aGlzLGEsYixjLGQpfWZ1bmN0aW9uIE5kKGEsYixjLGQpe3BhLmNhbGwodGhpcyxhLGIsYyxkKTtcbiAgICB0aGlzLl9vZmZzZXROZXh0PXRoaXMuX3dlaWdodE5leHQ9dGhpcy5fb2Zmc2V0UHJldj10aGlzLl93ZWlnaHRQcmV2PS0wfWZ1bmN0aW9uIGVkKGEsYixjLGQpe3BhLmNhbGwodGhpcyxhLGIsYyxkKX1mdW5jdGlvbiBPZChhLGIsYyxkKXtwYS5jYWxsKHRoaXMsYSxiLGMsZCl9ZnVuY3Rpb24gVChhLGIsYyxkKXtpZih2b2lkIDA9PT1hKXRocm93IEVycm9yKFwiVEhSRUUuS2V5ZnJhbWVUcmFjazogdHJhY2sgbmFtZSBpcyB1bmRlZmluZWRcIik7aWYodm9pZCAwPT09Ynx8MD09PWIubGVuZ3RoKXRocm93IEVycm9yKFwiVEhSRUUuS2V5ZnJhbWVUcmFjazogbm8ga2V5ZnJhbWVzIGluIHRyYWNrIG5hbWVkIFwiK2EpO3RoaXMubmFtZT1hO3RoaXMudGltZXM9Z2EuY29udmVydEFycmF5KGIsdGhpcy5UaW1lQnVmZmVyVHlwZSk7dGhpcy52YWx1ZXM9Z2EuY29udmVydEFycmF5KGMsdGhpcy5WYWx1ZUJ1ZmZlclR5cGUpO3RoaXMuc2V0SW50ZXJwb2xhdGlvbihkfHx0aGlzLkRlZmF1bHRJbnRlcnBvbGF0aW9uKTtcbiAgICB0aGlzLnZhbGlkYXRlKCk7dGhpcy5vcHRpbWl6ZSgpfWZ1bmN0aW9uIGpjKGEsYixjLGQpe1QuY2FsbCh0aGlzLGEsYixjLGQpfWZ1bmN0aW9uIENhKGEsYixjKXt0aGlzLm5hbWU9YTt0aGlzLnRyYWNrcz1jO3RoaXMuZHVyYXRpb249dm9pZCAwIT09Yj9iOi0xO3RoaXMudXVpZD1RLmdlbmVyYXRlVVVJRCgpOzA+dGhpcy5kdXJhdGlvbiYmdGhpcy5yZXNldER1cmF0aW9uKCk7dGhpcy5vcHRpbWl6ZSgpfWZ1bmN0aW9uIFBkKGEpe3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6eGE7dGhpcy50ZXh0dXJlcz17fX1mdW5jdGlvbiBsZShhKXt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOnhhfWZ1bmN0aW9uIGtjKCl7dGhpcy5vbkxvYWRTdGFydD1mdW5jdGlvbigpe307dGhpcy5vbkxvYWRQcm9ncmVzcz1mdW5jdGlvbigpe307dGhpcy5vbkxvYWRDb21wbGV0ZT1mdW5jdGlvbigpe319ZnVuY3Rpb24gbWUoYSl7XCJib29sZWFuXCI9PT10eXBlb2YgYSYmKGNvbnNvbGUud2FybihcIlRIUkVFLkpTT05Mb2FkZXI6IHNob3dTdGF0dXMgcGFyYW1ldGVyIGhhcyBiZWVuIHJlbW92ZWQgZnJvbSBjb25zdHJ1Y3Rvci5cIiksXG4gICAgYT12b2lkIDApO3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6eGE7dGhpcy53aXRoQ3JlZGVudGlhbHM9ITF9ZnVuY3Rpb24gamYoYSl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PWE/YTp4YTt0aGlzLnRleHR1cmVQYXRoPVwiXCJ9ZnVuY3Rpb24gbmUoYSl7XCJ1bmRlZmluZWRcIj09PXR5cGVvZiBjcmVhdGVJbWFnZUJpdG1hcCYmY29uc29sZS53YXJuKFwiVEhSRUUuSW1hZ2VCaXRtYXBMb2FkZXI6IGNyZWF0ZUltYWdlQml0bWFwKCkgbm90IHN1cHBvcnRlZC5cIik7XCJ1bmRlZmluZWRcIj09PXR5cGVvZiBmZXRjaCYmY29uc29sZS53YXJuKFwiVEhSRUUuSW1hZ2VCaXRtYXBMb2FkZXI6IGZldGNoKCkgbm90IHN1cHBvcnRlZC5cIik7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PWE/YTp4YTt0aGlzLm9wdGlvbnM9dm9pZCAwfWZ1bmN0aW9uIG9lKCl7dGhpcy50eXBlPVwiU2hhcGVQYXRoXCI7dGhpcy5zdWJQYXRocz1bXTt0aGlzLmN1cnJlbnRQYXRoPW51bGx9ZnVuY3Rpb24gcGUoYSl7dGhpcy50eXBlPVwiRm9udFwiO1xuICAgIHRoaXMuZGF0YT1hfWZ1bmN0aW9uIGtmKGEpe3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6eGF9ZnVuY3Rpb24gcWUoYSl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PWE/YTp4YX1mdW5jdGlvbiBsZigpe3RoaXMudHlwZT1cIlN0ZXJlb0NhbWVyYVwiO3RoaXMuYXNwZWN0PTE7dGhpcy5leWVTZXA9LjA2NDt0aGlzLmNhbWVyYUw9bmV3IGJhO3RoaXMuY2FtZXJhTC5sYXllcnMuZW5hYmxlKDEpO3RoaXMuY2FtZXJhTC5tYXRyaXhBdXRvVXBkYXRlPSExO3RoaXMuY2FtZXJhUj1uZXcgYmE7dGhpcy5jYW1lcmFSLmxheWVycy5lbmFibGUoMik7dGhpcy5jYW1lcmFSLm1hdHJpeEF1dG9VcGRhdGU9ITF9ZnVuY3Rpb24gZmQoYSxiLGMpe3guY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJDdWJlQ2FtZXJhXCI7dmFyIGQ9bmV3IGJhKDkwLDEsYSxiKTtkLnVwLnNldCgwLC0xLDApO2QubG9va0F0KG5ldyBwKDEsMCwwKSk7dGhpcy5hZGQoZCk7dmFyIGU9bmV3IGJhKDkwLDEsYSxiKTtlLnVwLnNldCgwLC0xLFxuICAgIDApO2UubG9va0F0KG5ldyBwKC0xLDAsMCkpO3RoaXMuYWRkKGUpO3ZhciBmPW5ldyBiYSg5MCwxLGEsYik7Zi51cC5zZXQoMCwwLDEpO2YubG9va0F0KG5ldyBwKDAsMSwwKSk7dGhpcy5hZGQoZik7dmFyIGc9bmV3IGJhKDkwLDEsYSxiKTtnLnVwLnNldCgwLDAsLTEpO2cubG9va0F0KG5ldyBwKDAsLTEsMCkpO3RoaXMuYWRkKGcpO3ZhciBoPW5ldyBiYSg5MCwxLGEsYik7aC51cC5zZXQoMCwtMSwwKTtoLmxvb2tBdChuZXcgcCgwLDAsMSkpO3RoaXMuYWRkKGgpO3ZhciBrPW5ldyBiYSg5MCwxLGEsYik7ay51cC5zZXQoMCwtMSwwKTtrLmxvb2tBdChuZXcgcCgwLDAsLTEpKTt0aGlzLmFkZChrKTt0aGlzLnJlbmRlclRhcmdldD1uZXcgSmIoYyxjLHtmb3JtYXQ6MTAyMixtYWdGaWx0ZXI6MTAwNixtaW5GaWx0ZXI6MTAwNn0pO3RoaXMucmVuZGVyVGFyZ2V0LnRleHR1cmUubmFtZT1cIkN1YmVDYW1lcmFcIjt0aGlzLnVwZGF0ZT1mdW5jdGlvbihhLGIpe251bGw9PT10aGlzLnBhcmVudCYmXG4gICAgdGhpcy51cGRhdGVNYXRyaXhXb3JsZCgpO3ZhciBjPXRoaXMucmVuZGVyVGFyZ2V0LG09Yy50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcztjLnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzPSExO2MuYWN0aXZlQ3ViZUZhY2U9MDthLnJlbmRlcihiLGQsYyk7Yy5hY3RpdmVDdWJlRmFjZT0xO2EucmVuZGVyKGIsZSxjKTtjLmFjdGl2ZUN1YmVGYWNlPTI7YS5yZW5kZXIoYixmLGMpO2MuYWN0aXZlQ3ViZUZhY2U9MzthLnJlbmRlcihiLGcsYyk7Yy5hY3RpdmVDdWJlRmFjZT00O2EucmVuZGVyKGIsaCxjKTtjLnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzPW07Yy5hY3RpdmVDdWJlRmFjZT01O2EucmVuZGVyKGIsayxjKTthLnNldFJlbmRlclRhcmdldChudWxsKX07dGhpcy5jbGVhcj1mdW5jdGlvbihhLGIsYyxkKXtmb3IodmFyIGU9dGhpcy5yZW5kZXJUYXJnZXQsZj0wOzY+ZjtmKyspZS5hY3RpdmVDdWJlRmFjZT1mLGEuc2V0UmVuZGVyVGFyZ2V0KGUpLGEuY2xlYXIoYixjLGQpO2Euc2V0UmVuZGVyVGFyZ2V0KG51bGwpfX1cbiAgICBmdW5jdGlvbiByZSgpe3guY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJBdWRpb0xpc3RlbmVyXCI7dGhpcy5jb250ZXh0PXNlLmdldENvbnRleHQoKTt0aGlzLmdhaW49dGhpcy5jb250ZXh0LmNyZWF0ZUdhaW4oKTt0aGlzLmdhaW4uY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pO3RoaXMuZmlsdGVyPW51bGx9ZnVuY3Rpb24gbGMoYSl7eC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkF1ZGlvXCI7dGhpcy5jb250ZXh0PWEuY29udGV4dDt0aGlzLmdhaW49dGhpcy5jb250ZXh0LmNyZWF0ZUdhaW4oKTt0aGlzLmdhaW4uY29ubmVjdChhLmdldElucHV0KCkpO3RoaXMuYXV0b3BsYXk9ITE7dGhpcy5idWZmZXI9bnVsbDt0aGlzLmxvb3A9ITE7dGhpcy5vZmZzZXQ9dGhpcy5zdGFydFRpbWU9MDt0aGlzLnBsYXliYWNrUmF0ZT0xO3RoaXMuaXNQbGF5aW5nPSExO3RoaXMuaGFzUGxheWJhY2tDb250cm9sPSEwO3RoaXMuc291cmNlVHlwZT1cImVtcHR5XCI7dGhpcy5maWx0ZXJzPVtdfWZ1bmN0aW9uIHRlKGEpe2xjLmNhbGwodGhpcyxcbiAgICBhKTt0aGlzLnBhbm5lcj10aGlzLmNvbnRleHQuY3JlYXRlUGFubmVyKCk7dGhpcy5wYW5uZXIuY29ubmVjdCh0aGlzLmdhaW4pfWZ1bmN0aW9uIHVlKGEsYil7dGhpcy5hbmFseXNlcj1hLmNvbnRleHQuY3JlYXRlQW5hbHlzZXIoKTt0aGlzLmFuYWx5c2VyLmZmdFNpemU9dm9pZCAwIT09Yj9iOjIwNDg7dGhpcy5kYXRhPW5ldyBVaW50OEFycmF5KHRoaXMuYW5hbHlzZXIuZnJlcXVlbmN5QmluQ291bnQpO2EuZ2V0T3V0cHV0KCkuY29ubmVjdCh0aGlzLmFuYWx5c2VyKX1mdW5jdGlvbiB2ZShhLGIsYyl7dGhpcy5iaW5kaW5nPWE7dGhpcy52YWx1ZVNpemU9YzthPUZsb2F0NjRBcnJheTtzd2l0Y2goYil7Y2FzZSBcInF1YXRlcm5pb25cIjpiPXRoaXMuX3NsZXJwO2JyZWFrO2Nhc2UgXCJzdHJpbmdcIjpjYXNlIFwiYm9vbFwiOmE9QXJyYXk7Yj10aGlzLl9zZWxlY3Q7YnJlYWs7ZGVmYXVsdDpiPXRoaXMuX2xlcnB9dGhpcy5idWZmZXI9bmV3IGEoNCpjKTt0aGlzLl9taXhCdWZmZXJSZWdpb249XG4gICAgYjt0aGlzLnJlZmVyZW5jZUNvdW50PXRoaXMudXNlQ291bnQ9dGhpcy5jdW11bGF0aXZlV2VpZ2h0PTB9ZnVuY3Rpb24gbWYoYSxiLGMpe2M9Y3x8cWEucGFyc2VUcmFja05hbWUoYik7dGhpcy5fdGFyZ2V0R3JvdXA9YTt0aGlzLl9iaW5kaW5ncz1hLnN1YnNjcmliZV8oYixjKX1mdW5jdGlvbiBxYShhLGIsYyl7dGhpcy5wYXRoPWI7dGhpcy5wYXJzZWRQYXRoPWN8fHFhLnBhcnNlVHJhY2tOYW1lKGIpO3RoaXMubm9kZT1xYS5maW5kTm9kZShhLHRoaXMucGFyc2VkUGF0aC5ub2RlTmFtZSl8fGE7dGhpcy5yb290Tm9kZT1hfWZ1bmN0aW9uIG5mKCl7dGhpcy51dWlkPVEuZ2VuZXJhdGVVVUlEKCk7dGhpcy5fb2JqZWN0cz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO3RoaXMubkNhY2hlZE9iamVjdHNfPTA7dmFyIGE9e307dGhpcy5faW5kaWNlc0J5VVVJRD1hO2Zvcih2YXIgYj0wLGM9YXJndW1lbnRzLmxlbmd0aDtiIT09YzsrK2IpYVthcmd1bWVudHNbYl0udXVpZF09XG4gICAgYjt0aGlzLl9wYXRocz1bXTt0aGlzLl9wYXJzZWRQYXRocz1bXTt0aGlzLl9iaW5kaW5ncz1bXTt0aGlzLl9iaW5kaW5nc0luZGljZXNCeVBhdGg9e307dmFyIGQ9dGhpczt0aGlzLnN0YXRzPXtvYmplY3RzOntnZXQgdG90YWwoKXtyZXR1cm4gZC5fb2JqZWN0cy5sZW5ndGh9LGdldCBpblVzZSgpe3JldHVybiB0aGlzLnRvdGFsLWQubkNhY2hlZE9iamVjdHNffX0sZ2V0IGJpbmRpbmdzUGVyT2JqZWN0KCl7cmV0dXJuIGQuX2JpbmRpbmdzLmxlbmd0aH19fWZ1bmN0aW9uIG9mKGEsYixjKXt0aGlzLl9taXhlcj1hO3RoaXMuX2NsaXA9Yjt0aGlzLl9sb2NhbFJvb3Q9Y3x8bnVsbDthPWIudHJhY2tzO2I9YS5sZW5ndGg7Yz1BcnJheShiKTtmb3IodmFyIGQ9e2VuZGluZ1N0YXJ0OjI0MDAsZW5kaW5nRW5kOjI0MDB9LGU9MDtlIT09YjsrK2Upe3ZhciBmPWFbZV0uY3JlYXRlSW50ZXJwb2xhbnQobnVsbCk7Y1tlXT1mO2Yuc2V0dGluZ3M9ZH10aGlzLl9pbnRlcnBvbGFudFNldHRpbmdzPVxuICAgIGQ7dGhpcy5faW50ZXJwb2xhbnRzPWM7dGhpcy5fcHJvcGVydHlCaW5kaW5ncz1BcnJheShiKTt0aGlzLl93ZWlnaHRJbnRlcnBvbGFudD10aGlzLl90aW1lU2NhbGVJbnRlcnBvbGFudD10aGlzLl9ieUNsaXBDYWNoZUluZGV4PXRoaXMuX2NhY2hlSW5kZXg9bnVsbDt0aGlzLmxvb3A9MjIwMTt0aGlzLl9sb29wQ291bnQ9LTE7dGhpcy5fc3RhcnRUaW1lPW51bGw7dGhpcy50aW1lPTA7dGhpcy5fZWZmZWN0aXZlV2VpZ2h0PXRoaXMud2VpZ2h0PXRoaXMuX2VmZmVjdGl2ZVRpbWVTY2FsZT10aGlzLnRpbWVTY2FsZT0xO3RoaXMucmVwZXRpdGlvbnM9SW5maW5pdHk7dGhpcy5wYXVzZWQ9ITE7dGhpcy5lbmFibGVkPSEwO3RoaXMuY2xhbXBXaGVuRmluaXNoZWQ9ITE7dGhpcy56ZXJvU2xvcGVBdEVuZD10aGlzLnplcm9TbG9wZUF0U3RhcnQ9ITB9ZnVuY3Rpb24gd2UoYSl7dGhpcy5fcm9vdD1hO3RoaXMuX2luaXRNZW1vcnlNYW5hZ2VyKCk7dGhpcy50aW1lPXRoaXMuX2FjY3VJbmRleD1cbiAgICAwO3RoaXMudGltZVNjYWxlPTF9ZnVuY3Rpb24gUWQoYSxiKXtcInN0cmluZ1wiPT09dHlwZW9mIGEmJihjb25zb2xlLndhcm4oXCJUSFJFRS5Vbmlmb3JtOiBUeXBlIHBhcmFtZXRlciBpcyBubyBsb25nZXIgbmVlZGVkLlwiKSxhPWIpO3RoaXMudmFsdWU9YX1mdW5jdGlvbiB4ZSgpe0UuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJJbnN0YW5jZWRCdWZmZXJHZW9tZXRyeVwiO3RoaXMubWF4SW5zdGFuY2VkQ291bnQ9dm9pZCAwfWZ1bmN0aW9uIHllKGEsYixjLGQpe3RoaXMudXVpZD1RLmdlbmVyYXRlVVVJRCgpO3RoaXMuZGF0YT1hO3RoaXMuaXRlbVNpemU9Yjt0aGlzLm9mZnNldD1jO3RoaXMubm9ybWFsaXplZD0hMD09PWR9ZnVuY3Rpb24gbWMoYSxiKXt0aGlzLnV1aWQ9US5nZW5lcmF0ZVVVSUQoKTt0aGlzLmFycmF5PWE7dGhpcy5zdHJpZGU9Yjt0aGlzLmNvdW50PXZvaWQgMCE9PWE/YS5sZW5ndGgvYjowO3RoaXMuZHluYW1pYz0hMTt0aGlzLnVwZGF0ZVJhbmdlPXtvZmZzZXQ6MCxjb3VudDotMX07XG4gICAgdGhpcy5vblVwbG9hZENhbGxiYWNrPWZ1bmN0aW9uKCl7fTt0aGlzLnZlcnNpb249MH1mdW5jdGlvbiB6ZShhLGIsYyl7bWMuY2FsbCh0aGlzLGEsYik7dGhpcy5tZXNoUGVyQXR0cmlidXRlPWN8fDF9ZnVuY3Rpb24gQWUoYSxiLGMpe00uY2FsbCh0aGlzLGEsYik7dGhpcy5tZXNoUGVyQXR0cmlidXRlPWN8fDF9ZnVuY3Rpb24gcGYoYSxiLGMsZCl7dGhpcy5yYXk9bmV3IHNiKGEsYik7dGhpcy5uZWFyPWN8fDA7dGhpcy5mYXI9ZHx8SW5maW5pdHk7dGhpcy5wYXJhbXM9e01lc2g6e30sTGluZTp7fSxMT0Q6e30sUG9pbnRzOnt0aHJlc2hvbGQ6MX0sU3ByaXRlOnt9fTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLnBhcmFtcyx7UG9pbnRDbG91ZDp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuUmF5Y2FzdGVyOiBwYXJhbXMuUG9pbnRDbG91ZCBoYXMgYmVlbiByZW5hbWVkIHRvIHBhcmFtcy5Qb2ludHMuXCIpO3JldHVybiB0aGlzLlBvaW50c319fSl9ZnVuY3Rpb24gcWYoYSxcbiAgICBiKXtyZXR1cm4gYS5kaXN0YW5jZS1iLmRpc3RhbmNlfWZ1bmN0aW9uIEJlKGEsYixjLGQpe2lmKCExIT09YS52aXNpYmxlJiYoYS5yYXljYXN0KGIsYyksITA9PT1kKSl7YT1hLmNoaWxkcmVuO2Q9MDtmb3IodmFyIGU9YS5sZW5ndGg7ZDxlO2QrKylCZShhW2RdLGIsYywhMCl9fWZ1bmN0aW9uIHJmKGEpe3RoaXMuYXV0b1N0YXJ0PXZvaWQgMCE9PWE/YTohMDt0aGlzLmVsYXBzZWRUaW1lPXRoaXMub2xkVGltZT10aGlzLnN0YXJ0VGltZT0wO3RoaXMucnVubmluZz0hMX1mdW5jdGlvbiBzZihhLGIsYyl7dGhpcy5yYWRpdXM9dm9pZCAwIT09YT9hOjE7dGhpcy5waGk9dm9pZCAwIT09Yj9iOjA7dGhpcy50aGV0YT12b2lkIDAhPT1jP2M6MDtyZXR1cm4gdGhpc31mdW5jdGlvbiB0ZihhLGIsYyl7dGhpcy5yYWRpdXM9dm9pZCAwIT09YT9hOjE7dGhpcy50aGV0YT12b2lkIDAhPT1iP2I6MDt0aGlzLnk9dm9pZCAwIT09Yz9jOjA7cmV0dXJuIHRoaXN9ZnVuY3Rpb24gZ2QoYSl7eC5jYWxsKHRoaXMpO1xuICAgIHRoaXMubWF0ZXJpYWw9YTt0aGlzLnJlbmRlcj1mdW5jdGlvbigpe319ZnVuY3Rpb24gaGQoYSxiLGMsZCl7dGhpcy5vYmplY3Q9YTt0aGlzLnNpemU9dm9pZCAwIT09Yj9iOjE7YT12b2lkIDAhPT1jP2M6MTY3MTE2ODA7ZD12b2lkIDAhPT1kP2Q6MTtiPTA7KGM9dGhpcy5vYmplY3QuZ2VvbWV0cnkpJiZjLmlzR2VvbWV0cnk/Yj0zKmMuZmFjZXMubGVuZ3RoOmMmJmMuaXNCdWZmZXJHZW9tZXRyeSYmKGI9Yy5hdHRyaWJ1dGVzLm5vcm1hbC5jb3VudCk7Yz1uZXcgRTtiPW5ldyBCKDYqYiwzKTtjLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsYik7WC5jYWxsKHRoaXMsYyxuZXcgVyh7Y29sb3I6YSxsaW5ld2lkdGg6ZH0pKTt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy51cGRhdGUoKX1mdW5jdGlvbiBuYyhhLGIpe3guY2FsbCh0aGlzKTt0aGlzLmxpZ2h0PWE7dGhpcy5saWdodC51cGRhdGVNYXRyaXhXb3JsZCgpO3RoaXMubWF0cml4PWEubWF0cml4V29ybGQ7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPVxuICAgICExO3RoaXMuY29sb3I9YjthPW5ldyBFO2I9WzAsMCwwLDAsMCwxLDAsMCwwLDEsMCwxLDAsMCwwLC0xLDAsMSwwLDAsMCwwLDEsMSwwLDAsMCwwLC0xLDFdO2Zvcih2YXIgYz0wLGQ9MTszMj5jO2MrKyxkKyspe3ZhciBlPWMvMzIqTWF0aC5QSSoyLGY9ZC8zMipNYXRoLlBJKjI7Yi5wdXNoKE1hdGguY29zKGUpLE1hdGguc2luKGUpLDEsTWF0aC5jb3MoZiksTWF0aC5zaW4oZiksMSl9YS5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKGIsMykpO2I9bmV3IFcoe2ZvZzohMX0pO3RoaXMuY29uZT1uZXcgWChhLGIpO3RoaXMuYWRkKHRoaXMuY29uZSk7dGhpcy51cGRhdGUoKX1mdW5jdGlvbiB1ZihhKXt2YXIgYj1bXTthJiZhLmlzQm9uZSYmYi5wdXNoKGEpO2Zvcih2YXIgYz0wO2M8YS5jaGlsZHJlbi5sZW5ndGg7YysrKWIucHVzaC5hcHBseShiLHVmKGEuY2hpbGRyZW5bY10pKTtyZXR1cm4gYn1mdW5jdGlvbiBvYyhhKXtmb3IodmFyIGI9dWYoYSksYz1uZXcgRSxkPVtdLGU9XG4gICAgW10sZj1uZXcgSCgwLDAsMSksZz1uZXcgSCgwLDEsMCksaD0wO2g8Yi5sZW5ndGg7aCsrKXt2YXIgaz1iW2hdO2sucGFyZW50JiZrLnBhcmVudC5pc0JvbmUmJihkLnB1c2goMCwwLDApLGQucHVzaCgwLDAsMCksZS5wdXNoKGYucixmLmcsZi5iKSxlLnB1c2goZy5yLGcuZyxnLmIpKX1jLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEIoZCwzKSk7Yy5hZGRBdHRyaWJ1dGUoXCJjb2xvclwiLG5ldyBCKGUsMykpO2Q9bmV3IFcoe3ZlcnRleENvbG9yczoyLGRlcHRoVGVzdDohMSxkZXB0aFdyaXRlOiExLHRyYW5zcGFyZW50OiEwfSk7WC5jYWxsKHRoaXMsYyxkKTt0aGlzLnJvb3Q9YTt0aGlzLmJvbmVzPWI7dGhpcy5tYXRyaXg9YS5tYXRyaXhXb3JsZDt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITF9ZnVuY3Rpb24gcGMoYSxiLGMpe3RoaXMubGlnaHQ9YTt0aGlzLmxpZ2h0LnVwZGF0ZU1hdHJpeFdvcmxkKCk7dGhpcy5jb2xvcj1jO2E9bmV3IHdiKGIsNCwyKTtiPW5ldyBBYSh7d2lyZWZyYW1lOiEwLFxuICAgIGZvZzohMX0pO3JhLmNhbGwodGhpcyxhLGIpO3RoaXMubWF0cml4PXRoaXMubGlnaHQubWF0cml4V29ybGQ7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExO3RoaXMudXBkYXRlKCl9ZnVuY3Rpb24gcWMoYSxiKXt4LmNhbGwodGhpcyk7dGhpcy5saWdodD1hO3RoaXMubGlnaHQudXBkYXRlTWF0cml4V29ybGQoKTt0aGlzLm1hdHJpeD1hLm1hdHJpeFdvcmxkO3RoaXMubWF0cml4QXV0b1VwZGF0ZT0hMTt0aGlzLmNvbG9yPWI7YT1uZXcgVyh7Zm9nOiExfSk7Yj1uZXcgRTtiLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IE0obmV3IEZsb2F0MzJBcnJheSgxNSksMykpO3RoaXMubGluZT1uZXcgc2EoYixhKTt0aGlzLmFkZCh0aGlzLmxpbmUpO3RoaXMudXBkYXRlKCl9ZnVuY3Rpb24gcmMoYSxiLGMpe3guY2FsbCh0aGlzKTt0aGlzLmxpZ2h0PWE7dGhpcy5saWdodC51cGRhdGVNYXRyaXhXb3JsZCgpO3RoaXMubWF0cml4PWEubWF0cml4V29ybGQ7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPVxuICAgICExO3RoaXMuY29sb3I9YzthPW5ldyB1YihiKTthLnJvdGF0ZVkoLjUqTWF0aC5QSSk7dGhpcy5tYXRlcmlhbD1uZXcgQWEoe3dpcmVmcmFtZTohMCxmb2c6ITF9KTt2b2lkIDA9PT10aGlzLmNvbG9yJiYodGhpcy5tYXRlcmlhbC52ZXJ0ZXhDb2xvcnM9Mik7Yj1hLmdldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIpO2I9bmV3IEZsb2F0MzJBcnJheSgzKmIuY291bnQpO2EuYWRkQXR0cmlidXRlKFwiY29sb3JcIixuZXcgTShiLDMpKTt0aGlzLmFkZChuZXcgcmEoYSx0aGlzLm1hdGVyaWFsKSk7dGhpcy51cGRhdGUoKX1mdW5jdGlvbiBpZChhLGIsYyxkKXthPWF8fDEwO2I9Ynx8MTA7Yz1uZXcgSCh2b2lkIDAhPT1jP2M6NDQ3MzkyNCk7ZD1uZXcgSCh2b2lkIDAhPT1kP2Q6ODk0Nzg0OCk7dmFyIGU9Yi8yLGY9YS9iLGc9YS8yO2E9W107Zm9yKHZhciBoPVtdLGs9MCxtPTAscT0tZztrPD1iO2srKyxxKz1mKXthLnB1c2goLWcsMCxxLGcsMCxxKTthLnB1c2gocSwwLC1nLHEsMCxnKTt2YXIgbj1cbiAgICBrPT09ZT9jOmQ7bi50b0FycmF5KGgsbSk7bSs9MztuLnRvQXJyYXkoaCxtKTttKz0zO24udG9BcnJheShoLG0pO20rPTM7bi50b0FycmF5KGgsbSk7bSs9M31iPW5ldyBFO2IuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgQihhLDMpKTtiLmFkZEF0dHJpYnV0ZShcImNvbG9yXCIsbmV3IEIoaCwzKSk7Yz1uZXcgVyh7dmVydGV4Q29sb3JzOjJ9KTtYLmNhbGwodGhpcyxiLGMpfWZ1bmN0aW9uIFJkKGEsYixjLGQsZSxmKXthPWF8fDEwO2I9Ynx8MTY7Yz1jfHw4O2Q9ZHx8NjQ7ZT1uZXcgSCh2b2lkIDAhPT1lP2U6NDQ3MzkyNCk7Zj1uZXcgSCh2b2lkIDAhPT1mP2Y6ODk0Nzg0OCk7dmFyIGc9W10saD1bXSxrO2ZvcihrPTA7azw9YjtrKyspe3ZhciBtPWsvYioyKk1hdGguUEk7dmFyIHE9TWF0aC5zaW4obSkqYTttPU1hdGguY29zKG0pKmE7Zy5wdXNoKDAsMCwwKTtnLnB1c2gocSwwLG0pO3ZhciBuPWsmMT9lOmY7aC5wdXNoKG4ucixuLmcsbi5iKTtoLnB1c2gobi5yLG4uZyxuLmIpfWZvcihrPVxuICAgIDA7azw9YztrKyspe249ayYxP2U6Zjt2YXIgbD1hLWEvYyprO2ZvcihiPTA7YjxkO2IrKyltPWIvZCoyKk1hdGguUEkscT1NYXRoLnNpbihtKSpsLG09TWF0aC5jb3MobSkqbCxnLnB1c2gocSwwLG0pLGgucHVzaChuLnIsbi5nLG4uYiksbT0oYisxKS9kKjIqTWF0aC5QSSxxPU1hdGguc2luKG0pKmwsbT1NYXRoLmNvcyhtKSpsLGcucHVzaChxLDAsbSksaC5wdXNoKG4ucixuLmcsbi5iKX1hPW5ldyBFO2EuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgQihnLDMpKTthLmFkZEF0dHJpYnV0ZShcImNvbG9yXCIsbmV3IEIoaCwzKSk7Zz1uZXcgVyh7dmVydGV4Q29sb3JzOjJ9KTtYLmNhbGwodGhpcyxhLGcpfWZ1bmN0aW9uIGpkKGEsYixjLGQpe3RoaXMub2JqZWN0PWE7dGhpcy5zaXplPXZvaWQgMCE9PWI/YjoxO2E9dm9pZCAwIT09Yz9jOjE2Nzc2OTYwO2Q9dm9pZCAwIT09ZD9kOjE7Yj0wOyhjPXRoaXMub2JqZWN0Lmdlb21ldHJ5KSYmYy5pc0dlb21ldHJ5P2I9Yy5mYWNlcy5sZW5ndGg6XG4gICAgY29uc29sZS53YXJuKFwiVEhSRUUuRmFjZU5vcm1hbHNIZWxwZXI6IG9ubHkgVEhSRUUuR2VvbWV0cnkgaXMgc3VwcG9ydGVkLiBVc2UgVEhSRUUuVmVydGV4Tm9ybWFsc0hlbHBlciwgaW5zdGVhZC5cIik7Yz1uZXcgRTtiPW5ldyBCKDYqYiwzKTtjLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsYik7WC5jYWxsKHRoaXMsYyxuZXcgVyh7Y29sb3I6YSxsaW5ld2lkdGg6ZH0pKTt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy51cGRhdGUoKX1mdW5jdGlvbiBzYyhhLGIsYyl7eC5jYWxsKHRoaXMpO3RoaXMubGlnaHQ9YTt0aGlzLmxpZ2h0LnVwZGF0ZU1hdHJpeFdvcmxkKCk7dGhpcy5tYXRyaXg9YS5tYXRyaXhXb3JsZDt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy5jb2xvcj1jO3ZvaWQgMD09PWImJihiPTEpO2E9bmV3IEU7YS5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKFstYixiLDAsYixiLDAsYiwtYiwwLC1iLC1iLDAsLWIsYiwwXSwzKSk7Yj1uZXcgVyh7Zm9nOiExfSk7XG4gICAgdGhpcy5saWdodFBsYW5lPW5ldyBzYShhLGIpO3RoaXMuYWRkKHRoaXMubGlnaHRQbGFuZSk7YT1uZXcgRTthLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEIoWzAsMCwwLDAsMCwxXSwzKSk7dGhpcy50YXJnZXRMaW5lPW5ldyBzYShhLGIpO3RoaXMuYWRkKHRoaXMudGFyZ2V0TGluZSk7dGhpcy51cGRhdGUoKX1mdW5jdGlvbiBrZChhKXtmdW5jdGlvbiBiKGEsYixkKXtjKGEsZCk7YyhiLGQpfWZ1bmN0aW9uIGMoYSxiKXtmLnB1c2goMCwwLDApO2cucHVzaChiLnIsYi5nLGIuYik7dm9pZCAwPT09aFthXSYmKGhbYV09W10pO2hbYV0ucHVzaChmLmxlbmd0aC8zLTEpfXZhciBkPW5ldyBFLGU9bmV3IFcoe2NvbG9yOjE2Nzc3MjE1LHZlcnRleENvbG9yczoxfSksZj1bXSxnPVtdLGg9e30saz1uZXcgSCgxNjc1NTIwMCksbT1uZXcgSCgxNjcxMTY4MCkscT1uZXcgSCg0Mzc3NSksbD1uZXcgSCgxNjc3NzIxNSksdT1uZXcgSCgzMzU1NDQzKTtiKFwibjFcIixcIm4yXCIsayk7YihcIm4yXCIsXG4gICAgXCJuNFwiLGspO2IoXCJuNFwiLFwibjNcIixrKTtiKFwibjNcIixcIm4xXCIsayk7YihcImYxXCIsXCJmMlwiLGspO2IoXCJmMlwiLFwiZjRcIixrKTtiKFwiZjRcIixcImYzXCIsayk7YihcImYzXCIsXCJmMVwiLGspO2IoXCJuMVwiLFwiZjFcIixrKTtiKFwibjJcIixcImYyXCIsayk7YihcIm4zXCIsXCJmM1wiLGspO2IoXCJuNFwiLFwiZjRcIixrKTtiKFwicFwiLFwibjFcIixtKTtiKFwicFwiLFwibjJcIixtKTtiKFwicFwiLFwibjNcIixtKTtiKFwicFwiLFwibjRcIixtKTtiKFwidTFcIixcInUyXCIscSk7YihcInUyXCIsXCJ1M1wiLHEpO2IoXCJ1M1wiLFwidTFcIixxKTtiKFwiY1wiLFwidFwiLGwpO2IoXCJwXCIsXCJjXCIsdSk7YihcImNuMVwiLFwiY24yXCIsdSk7YihcImNuM1wiLFwiY240XCIsdSk7YihcImNmMVwiLFwiY2YyXCIsdSk7YihcImNmM1wiLFwiY2Y0XCIsdSk7ZC5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKGYsMykpO2QuYWRkQXR0cmlidXRlKFwiY29sb3JcIixuZXcgQihnLDMpKTtYLmNhbGwodGhpcyxkLGUpO3RoaXMuY2FtZXJhPWE7dGhpcy5jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCYmdGhpcy5jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xuICAgIHRoaXMubWF0cml4PWEubWF0cml4V29ybGQ7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExO3RoaXMucG9pbnRNYXA9aDt0aGlzLnVwZGF0ZSgpfWZ1bmN0aW9uIEdiKGEsYil7dGhpcy5vYmplY3Q9YTt2b2lkIDA9PT1iJiYoYj0xNjc3Njk2MCk7YT1uZXcgVWludDE2QXJyYXkoWzAsMSwxLDIsMiwzLDMsMCw0LDUsNSw2LDYsNyw3LDQsMCw0LDEsNSwyLDYsMyw3XSk7dmFyIGM9bmV3IEZsb2F0MzJBcnJheSgyNCksZD1uZXcgRTtkLnNldEluZGV4KG5ldyBNKGEsMSkpO2QuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgTShjLDMpKTtYLmNhbGwodGhpcyxkLG5ldyBXKHtjb2xvcjpifSkpO3RoaXMubWF0cml4QXV0b1VwZGF0ZT0hMTt0aGlzLnVwZGF0ZSgpfWZ1bmN0aW9uIGxkKGEsYil7dGhpcy50eXBlPVwiQm94M0hlbHBlclwiO3RoaXMuYm94PWE7YT12b2lkIDAhPT1iP2I6MTY3NzY5NjA7Yj1uZXcgVWludDE2QXJyYXkoWzAsMSwxLDIsMiwzLDMsMCw0LDUsNSw2LDYsNyw3LDQsMCxcbiAgICA0LDEsNSwyLDYsMyw3XSk7dmFyIGM9bmV3IEU7Yy5zZXRJbmRleChuZXcgTShiLDEpKTtjLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEIoWzEsMSwxLC0xLDEsMSwtMSwtMSwxLDEsLTEsMSwxLDEsLTEsLTEsMSwtMSwtMSwtMSwtMSwxLC0xLC0xXSwzKSk7WC5jYWxsKHRoaXMsYyxuZXcgVyh7Y29sb3I6YX0pKTt0aGlzLmdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpfWZ1bmN0aW9uIG1kKGEsYixjKXt0aGlzLnR5cGU9XCJQbGFuZUhlbHBlclwiO3RoaXMucGxhbmU9YTt0aGlzLnNpemU9dm9pZCAwPT09Yj8xOmI7YT12b2lkIDAhPT1jP2M6MTY3NzY5NjA7Yj1uZXcgRTtiLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEIoWzEsLTEsMSwtMSwxLDEsLTEsLTEsMSwxLDEsMSwtMSwxLDEsLTEsLTEsMSwxLC0xLDEsMSwxLDEsMCwwLDEsMCwwLDBdLDMpKTtiLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO3NhLmNhbGwodGhpcyxiLG5ldyBXKHtjb2xvcjphfSkpO2I9bmV3IEU7XG4gICAgYi5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKFsxLDEsMSwtMSwxLDEsLTEsLTEsMSwxLDEsMSwtMSwtMSwxLDEsLTEsMV0sMykpO2IuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7dGhpcy5hZGQobmV3IHJhKGIsbmV3IEFhKHtjb2xvcjphLG9wYWNpdHk6LjIsdHJhbnNwYXJlbnQ6ITAsZGVwdGhXcml0ZTohMX0pKSl9ZnVuY3Rpb24gSGIoYSxiLGMsZCxlLGYpe3guY2FsbCh0aGlzKTt2b2lkIDA9PT1kJiYoZD0xNjc3Njk2MCk7dm9pZCAwPT09YyYmKGM9MSk7dm9pZCAwPT09ZSYmKGU9LjIqYyk7dm9pZCAwPT09ZiYmKGY9LjIqZSk7dm9pZCAwPT09U2QmJihTZD1uZXcgRSxTZC5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBCKFswLDAsMCwwLDEsMF0sMykpLENlPW5ldyBhYigwLC41LDEsNSwxKSxDZS50cmFuc2xhdGUoMCwtLjUsMCkpO3RoaXMucG9zaXRpb24uY29weShiKTt0aGlzLmxpbmU9bmV3IHNhKFNkLG5ldyBXKHtjb2xvcjpkfSkpO3RoaXMubGluZS5tYXRyaXhBdXRvVXBkYXRlPVxuICAgICExO3RoaXMuYWRkKHRoaXMubGluZSk7dGhpcy5jb25lPW5ldyByYShDZSxuZXcgQWEoe2NvbG9yOmR9KSk7dGhpcy5jb25lLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy5hZGQodGhpcy5jb25lKTt0aGlzLnNldERpcmVjdGlvbihhKTt0aGlzLnNldExlbmd0aChjLGUsZil9ZnVuY3Rpb24gbmQoYSl7YT1hfHwxO3ZhciBiPVswLDAsMCxhLDAsMCwwLDAsMCwwLGEsMCwwLDAsMCwwLDAsYV07YT1uZXcgRTthLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEIoYiwzKSk7YS5hZGRBdHRyaWJ1dGUoXCJjb2xvclwiLG5ldyBCKFsxLDAsMCwxLC42LDAsMCwxLDAsLjYsMSwwLDAsMCwxLDAsLjYsMV0sMykpO2I9bmV3IFcoe3ZlcnRleENvbG9yczoyfSk7WC5jYWxsKHRoaXMsYSxiKX1mdW5jdGlvbiB2ZihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5DbG9zZWRTcGxpbmVDdXJ2ZTMgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIFRIUkVFLkNhdG11bGxSb21DdXJ2ZTMgaW5zdGVhZC5cIik7Y2EuY2FsbCh0aGlzLFxuICAgIGEpO3RoaXMudHlwZT1cImNhdG11bGxyb21cIjt0aGlzLmNsb3NlZD0hMH1mdW5jdGlvbiB3ZihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5TcGxpbmVDdXJ2ZTMgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIFRIUkVFLkNhdG11bGxSb21DdXJ2ZTMgaW5zdGVhZC5cIik7Y2EuY2FsbCh0aGlzLGEpO3RoaXMudHlwZT1cImNhdG11bGxyb21cIn1mdW5jdGlvbiBEZShhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5TcGxpbmUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFRIUkVFLkNhdG11bGxSb21DdXJ2ZTMgaW5zdGVhZC5cIik7Y2EuY2FsbCh0aGlzLGEpO3RoaXMudHlwZT1cImNhdG11bGxyb21cIn12b2lkIDA9PT1OdW1iZXIuRVBTSUxPTiYmKE51bWJlci5FUFNJTE9OPU1hdGgucG93KDIsLTUyKSk7dm9pZCAwPT09TnVtYmVyLmlzSW50ZWdlciYmKE51bWJlci5pc0ludGVnZXI9ZnVuY3Rpb24oYSl7cmV0dXJuXCJudW1iZXJcIj09PXR5cGVvZiBhJiZpc0Zpbml0ZShhKSYmTWF0aC5mbG9vcihhKT09PWF9KTt2b2lkIDA9PT1cbiAgICBNYXRoLnNpZ24mJihNYXRoLnNpZ249ZnVuY3Rpb24oYSl7cmV0dXJuIDA+YT8tMTowPGE/MTorYX0pOyExPT09XCJuYW1lXCJpbiBGdW5jdGlvbi5wcm90b3R5cGUmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShGdW5jdGlvbi5wcm90b3R5cGUsXCJuYW1lXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvU3RyaW5nKCkubWF0Y2goL15cXHMqZnVuY3Rpb25cXHMqKFteXFwoXFxzXSopLylbMV19fSk7dm9pZCAwPT09T2JqZWN0LmFzc2lnbiYmZnVuY3Rpb24oKXtPYmplY3QuYXNzaWduPWZ1bmN0aW9uKGEpe2lmKHZvaWQgMD09PWF8fG51bGw9PT1hKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3RcIik7Zm9yKHZhciBiPU9iamVjdChhKSxjPTE7Yzxhcmd1bWVudHMubGVuZ3RoO2MrKyl7dmFyIGQ9YXJndW1lbnRzW2NdO2lmKHZvaWQgMCE9PWQmJm51bGwhPT1kKWZvcih2YXIgZSBpbiBkKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkLFxuICAgIGUpJiYoYltlXT1kW2VdKX1yZXR1cm4gYn19KCk7T2JqZWN0LmFzc2lnbih6YS5wcm90b3R5cGUse2FkZEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT10aGlzLl9saXN0ZW5lcnMmJih0aGlzLl9saXN0ZW5lcnM9e30pO3ZhciBjPXRoaXMuX2xpc3RlbmVyczt2b2lkIDA9PT1jW2FdJiYoY1thXT1bXSk7LTE9PT1jW2FdLmluZGV4T2YoYikmJmNbYV0ucHVzaChiKX0saGFzRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihhLGIpe2lmKHZvaWQgMD09PXRoaXMuX2xpc3RlbmVycylyZXR1cm4hMTt2YXIgYz10aGlzLl9saXN0ZW5lcnM7cmV0dXJuIHZvaWQgMCE9PWNbYV0mJi0xIT09Y1thXS5pbmRleE9mKGIpfSxyZW1vdmVFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYil7dm9pZCAwIT09dGhpcy5fbGlzdGVuZXJzJiYoYT10aGlzLl9saXN0ZW5lcnNbYV0sdm9pZCAwIT09YSYmKGI9YS5pbmRleE9mKGIpLC0xIT09YiYmYS5zcGxpY2UoYiwxKSkpfSxkaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKGEpe2lmKHZvaWQgMCE9PVxuICAgIHRoaXMuX2xpc3RlbmVycyl7dmFyIGI9dGhpcy5fbGlzdGVuZXJzW2EudHlwZV07aWYodm9pZCAwIT09Yil7YS50YXJnZXQ9dGhpcztmb3IodmFyIGI9Yi5zbGljZSgwKSxjPTAsZD1iLmxlbmd0aDtjPGQ7YysrKWJbY10uY2FsbCh0aGlzLGEpfX19fSk7dmFyIFE9e0RFRzJSQUQ6TWF0aC5QSS8xODAsUkFEMkRFRzoxODAvTWF0aC5QSSxnZW5lcmF0ZVVVSUQ6ZnVuY3Rpb24oKXtmb3IodmFyIGE9W10sYj0wOzI1Nj5iO2IrKylhW2JdPSgxNj5iP1wiMFwiOlwiXCIpK2IudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGI9NDI5NDk2NzI5NSpNYXRoLnJhbmRvbSgpfDAsZD00Mjk0OTY3Mjk1Kk1hdGgucmFuZG9tKCl8MCxlPTQyOTQ5NjcyOTUqTWF0aC5yYW5kb20oKXwwLGY9NDI5NDk2NzI5NSpNYXRoLnJhbmRvbSgpfDA7cmV0dXJuIGFbYiYyNTVdK2FbYj4+OCYyNTVdK2FbYj4+MTYmMjU1XSthW2I+PjI0JjI1NV0rXCItXCIrYVtkJjI1NV0rYVtkPj44JlxuICAgIDI1NV0rXCItXCIrYVtkPj4xNiYxNXw2NF0rYVtkPj4yNCYyNTVdK1wiLVwiK2FbZSY2M3wxMjhdK2FbZT4+OCYyNTVdK1wiLVwiK2FbZT4+MTYmMjU1XSthW2U+PjI0JjI1NV0rYVtmJjI1NV0rYVtmPj44JjI1NV0rYVtmPj4xNiYyNTVdK2FbZj4+MjQmMjU1XX19KCksY2xhbXA6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBNYXRoLm1heChiLE1hdGgubWluKGMsYSkpfSxldWNsaWRlYW5Nb2R1bG86ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYSViK2IpJWJ9LG1hcExpbmVhcjpmdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybiBkKyhhLWIpKihlLWQpLyhjLWIpfSxsZXJwOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4oMS1jKSphK2MqYn0sc21vb3Roc3RlcDpmdW5jdGlvbihhLGIsYyl7aWYoYTw9YilyZXR1cm4gMDtpZihhPj1jKXJldHVybiAxO2E9KGEtYikvKGMtYik7cmV0dXJuIGEqYSooMy0yKmEpfSxzbW9vdGhlcnN0ZXA6ZnVuY3Rpb24oYSxiLGMpe2lmKGE8PWIpcmV0dXJuIDA7aWYoYT49YylyZXR1cm4gMTtcbiAgICBhPShhLWIpLyhjLWIpO3JldHVybiBhKmEqYSooYSooNiphLTE1KSsxMCl9LHJhbmRJbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYStNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKGItYSsxKSl9LHJhbmRGbG9hdDpmdW5jdGlvbihhLGIpe3JldHVybiBhK01hdGgucmFuZG9tKCkqKGItYSl9LHJhbmRGbG9hdFNwcmVhZDpmdW5jdGlvbihhKXtyZXR1cm4gYSooLjUtTWF0aC5yYW5kb20oKSl9LGRlZ1RvUmFkOmZ1bmN0aW9uKGEpe3JldHVybiBhKlEuREVHMlJBRH0scmFkVG9EZWc6ZnVuY3Rpb24oYSl7cmV0dXJuIGEqUS5SQUQyREVHfSxpc1Bvd2VyT2ZUd286ZnVuY3Rpb24oYSl7cmV0dXJuIDA9PT0oYSZhLTEpJiYwIT09YX0sY2VpbFBvd2VyT2ZUd286ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGgucG93KDIsTWF0aC5jZWlsKE1hdGgubG9nKGEpL01hdGguTE4yKSl9LGZsb29yUG93ZXJPZlR3bzpmdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5wb3coMixNYXRoLmZsb29yKE1hdGgubG9nKGEpL1xuICAgIE1hdGguTE4yKSl9fTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhELnByb3RvdHlwZSx7d2lkdGg6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnh9LHNldDpmdW5jdGlvbihhKXt0aGlzLng9YX19LGhlaWdodDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueX0sc2V0OmZ1bmN0aW9uKGEpe3RoaXMueT1hfX19KTtPYmplY3QuYXNzaWduKEQucHJvdG90eXBlLHtpc1ZlY3RvcjI6ITAsc2V0OmZ1bmN0aW9uKGEsYil7dGhpcy54PWE7dGhpcy55PWI7cmV0dXJuIHRoaXN9LHNldFNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLnk9dGhpcy54PWE7cmV0dXJuIHRoaXN9LHNldFg6ZnVuY3Rpb24oYSl7dGhpcy54PWE7cmV0dXJuIHRoaXN9LHNldFk6ZnVuY3Rpb24oYSl7dGhpcy55PWE7cmV0dXJuIHRoaXN9LHNldENvbXBvbmVudDpmdW5jdGlvbihhLGIpe3N3aXRjaChhKXtjYXNlIDA6dGhpcy54PWI7YnJlYWs7Y2FzZSAxOnRoaXMueT1iO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJpbmRleCBpcyBvdXQgb2YgcmFuZ2U6IFwiK1xuICAgIGEpO31yZXR1cm4gdGhpc30sZ2V0Q29tcG9uZW50OmZ1bmN0aW9uKGEpe3N3aXRjaChhKXtjYXNlIDA6cmV0dXJuIHRoaXMueDtjYXNlIDE6cmV0dXJuIHRoaXMueTtkZWZhdWx0OnRocm93IEVycm9yKFwiaW5kZXggaXMgb3V0IG9mIHJhbmdlOiBcIithKTt9fSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLngsdGhpcy55KX0sY29weTpmdW5jdGlvbihhKXt0aGlzLng9YS54O3RoaXMueT1hLnk7cmV0dXJuIHRoaXN9LGFkZDpmdW5jdGlvbihhLGIpe2lmKHZvaWQgMCE9PWIpcmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjI6IC5hZGQoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5hZGRWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5hZGRWZWN0b3JzKGEsYik7dGhpcy54Kz1hLng7dGhpcy55Kz1hLnk7cmV0dXJuIHRoaXN9LGFkZFNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLngrPWE7dGhpcy55Kz1hO3JldHVybiB0aGlzfSxcbiAgICBhZGRWZWN0b3JzOmZ1bmN0aW9uKGEsYil7dGhpcy54PWEueCtiLng7dGhpcy55PWEueStiLnk7cmV0dXJuIHRoaXN9LGFkZFNjYWxlZFZlY3RvcjpmdW5jdGlvbihhLGIpe3RoaXMueCs9YS54KmI7dGhpcy55Kz1hLnkqYjtyZXR1cm4gdGhpc30sc3ViOmZ1bmN0aW9uKGEsYil7aWYodm9pZCAwIT09YilyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMjogLnN1YigpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLnN1YlZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLnN1YlZlY3RvcnMoYSxiKTt0aGlzLngtPWEueDt0aGlzLnktPWEueTtyZXR1cm4gdGhpc30sc3ViU2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMueC09YTt0aGlzLnktPWE7cmV0dXJuIHRoaXN9LHN1YlZlY3RvcnM6ZnVuY3Rpb24oYSxiKXt0aGlzLng9YS54LWIueDt0aGlzLnk9YS55LWIueTtyZXR1cm4gdGhpc30sbXVsdGlwbHk6ZnVuY3Rpb24oYSl7dGhpcy54Kj1hLng7dGhpcy55Kj1cbiAgICBhLnk7cmV0dXJuIHRoaXN9LG11bHRpcGx5U2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMueCo9YTt0aGlzLnkqPWE7cmV0dXJuIHRoaXN9LGRpdmlkZTpmdW5jdGlvbihhKXt0aGlzLngvPWEueDt0aGlzLnkvPWEueTtyZXR1cm4gdGhpc30sZGl2aWRlU2NhbGFyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm11bHRpcGx5U2NhbGFyKDEvYSl9LGFwcGx5TWF0cml4MzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLngsYz10aGlzLnk7YT1hLmVsZW1lbnRzO3RoaXMueD1hWzBdKmIrYVszXSpjK2FbNl07dGhpcy55PWFbMV0qYithWzRdKmMrYVs3XTtyZXR1cm4gdGhpc30sbWluOmZ1bmN0aW9uKGEpe3RoaXMueD1NYXRoLm1pbih0aGlzLngsYS54KTt0aGlzLnk9TWF0aC5taW4odGhpcy55LGEueSk7cmV0dXJuIHRoaXN9LG1heDpmdW5jdGlvbihhKXt0aGlzLng9TWF0aC5tYXgodGhpcy54LGEueCk7dGhpcy55PU1hdGgubWF4KHRoaXMueSxhLnkpO3JldHVybiB0aGlzfSxjbGFtcDpmdW5jdGlvbihhLFxuICAgIGIpe3RoaXMueD1NYXRoLm1heChhLngsTWF0aC5taW4oYi54LHRoaXMueCkpO3RoaXMueT1NYXRoLm1heChhLnksTWF0aC5taW4oYi55LHRoaXMueSkpO3JldHVybiB0aGlzfSxjbGFtcFNjYWxhcjpmdW5jdGlvbigpe3ZhciBhPW5ldyBELGI9bmV3IEQ7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7YS5zZXQoYyxjKTtiLnNldChkLGQpO3JldHVybiB0aGlzLmNsYW1wKGEsYil9fSgpLGNsYW1wTGVuZ3RoOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5sZW5ndGgoKTtyZXR1cm4gdGhpcy5kaXZpZGVTY2FsYXIoY3x8MSkubXVsdGlwbHlTY2FsYXIoTWF0aC5tYXgoYSxNYXRoLm1pbihiLGMpKSl9LGZsb29yOmZ1bmN0aW9uKCl7dGhpcy54PU1hdGguZmxvb3IodGhpcy54KTt0aGlzLnk9TWF0aC5mbG9vcih0aGlzLnkpO3JldHVybiB0aGlzfSxjZWlsOmZ1bmN0aW9uKCl7dGhpcy54PU1hdGguY2VpbCh0aGlzLngpO3RoaXMueT1NYXRoLmNlaWwodGhpcy55KTtyZXR1cm4gdGhpc30scm91bmQ6ZnVuY3Rpb24oKXt0aGlzLng9XG4gICAgTWF0aC5yb3VuZCh0aGlzLngpO3RoaXMueT1NYXRoLnJvdW5kKHRoaXMueSk7cmV0dXJuIHRoaXN9LHJvdW5kVG9aZXJvOmZ1bmN0aW9uKCl7dGhpcy54PTA+dGhpcy54P01hdGguY2VpbCh0aGlzLngpOk1hdGguZmxvb3IodGhpcy54KTt0aGlzLnk9MD50aGlzLnk/TWF0aC5jZWlsKHRoaXMueSk6TWF0aC5mbG9vcih0aGlzLnkpO3JldHVybiB0aGlzfSxuZWdhdGU6ZnVuY3Rpb24oKXt0aGlzLng9LXRoaXMueDt0aGlzLnk9LXRoaXMueTtyZXR1cm4gdGhpc30sZG90OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLngqYS54K3RoaXMueSphLnl9LGxlbmd0aFNxOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueX0sbGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguc3FydCh0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnkpfSxtYW5oYXR0YW5MZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5hYnModGhpcy54KStNYXRoLmFicyh0aGlzLnkpfSxub3JtYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXZpZGVTY2FsYXIodGhpcy5sZW5ndGgoKXx8XG4gICAgMSl9LGFuZ2xlOmZ1bmN0aW9uKCl7dmFyIGE9TWF0aC5hdGFuMih0aGlzLnksdGhpcy54KTswPmEmJihhKz0yKk1hdGguUEkpO3JldHVybiBhfSxkaXN0YW5jZVRvOmZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLnNxcnQodGhpcy5kaXN0YW5jZVRvU3F1YXJlZChhKSl9LGRpc3RhbmNlVG9TcXVhcmVkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueC1hLng7YT10aGlzLnktYS55O3JldHVybiBiKmIrYSphfSxtYW5oYXR0YW5EaXN0YW5jZVRvOmZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLmFicyh0aGlzLngtYS54KStNYXRoLmFicyh0aGlzLnktYS55KX0sc2V0TGVuZ3RoOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm5vcm1hbGl6ZSgpLm11bHRpcGx5U2NhbGFyKGEpfSxsZXJwOmZ1bmN0aW9uKGEsYil7dGhpcy54Kz0oYS54LXRoaXMueCkqYjt0aGlzLnkrPShhLnktdGhpcy55KSpiO3JldHVybiB0aGlzfSxsZXJwVmVjdG9yczpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHRoaXMuc3ViVmVjdG9ycyhiLFxuICAgIGEpLm11bHRpcGx5U2NhbGFyKGMpLmFkZChhKX0sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLng9PT10aGlzLngmJmEueT09PXRoaXMueX0sZnJvbUFycmF5OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9MCk7dGhpcy54PWFbYl07dGhpcy55PWFbYisxXTtyZXR1cm4gdGhpc30sdG9BcnJheTpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PWEmJihhPVtdKTt2b2lkIDA9PT1iJiYoYj0wKTthW2JdPXRoaXMueDthW2IrMV09dGhpcy55O3JldHVybiBhfSxmcm9tQnVmZmVyQXR0cmlidXRlOmZ1bmN0aW9uKGEsYixjKXt2b2lkIDAhPT1jJiZjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IyOiBvZmZzZXQgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIC5mcm9tQnVmZmVyQXR0cmlidXRlKCkuXCIpO3RoaXMueD1hLmdldFgoYik7dGhpcy55PWEuZ2V0WShiKTtyZXR1cm4gdGhpc30scm90YXRlQXJvdW5kOmZ1bmN0aW9uKGEsYil7dmFyIGM9TWF0aC5jb3MoYik7Yj1NYXRoLnNpbihiKTt2YXIgZD1cbiAgICB0aGlzLngtYS54LGU9dGhpcy55LWEueTt0aGlzLng9ZCpjLWUqYithLng7dGhpcy55PWQqYitlKmMrYS55O3JldHVybiB0aGlzfX0pO09iamVjdC5hc3NpZ24oTy5wcm90b3R5cGUse2lzTWF0cml4NDohMCxzZXQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoLGssbSxxLGwsdSxyLHQscCl7dmFyIG49dGhpcy5lbGVtZW50cztuWzBdPWE7bls0XT1iO25bOF09YztuWzEyXT1kO25bMV09ZTtuWzVdPWY7bls5XT1nO25bMTNdPWg7blsyXT1rO25bNl09bTtuWzEwXT1xO25bMTRdPWw7blszXT11O25bN109cjtuWzExXT10O25bMTVdPXA7cmV0dXJuIHRoaXN9LGlkZW50aXR5OmZ1bmN0aW9uKCl7dGhpcy5zZXQoMSwwLDAsMCwwLDEsMCwwLDAsMCwxLDAsMCwwLDAsMSk7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBPKS5mcm9tQXJyYXkodGhpcy5lbGVtZW50cyl9LGNvcHk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbGVtZW50czthPWEuZWxlbWVudHM7YlswXT1cbiAgICBhWzBdO2JbMV09YVsxXTtiWzJdPWFbMl07YlszXT1hWzNdO2JbNF09YVs0XTtiWzVdPWFbNV07Yls2XT1hWzZdO2JbN109YVs3XTtiWzhdPWFbOF07Yls5XT1hWzldO2JbMTBdPWFbMTBdO2JbMTFdPWFbMTFdO2JbMTJdPWFbMTJdO2JbMTNdPWFbMTNdO2JbMTRdPWFbMTRdO2JbMTVdPWFbMTVdO3JldHVybiB0aGlzfSxjb3B5UG9zaXRpb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbGVtZW50czthPWEuZWxlbWVudHM7YlsxMl09YVsxMl07YlsxM109YVsxM107YlsxNF09YVsxNF07cmV0dXJuIHRoaXN9LGV4dHJhY3RCYXNpczpmdW5jdGlvbihhLGIsYyl7YS5zZXRGcm9tTWF0cml4Q29sdW1uKHRoaXMsMCk7Yi5zZXRGcm9tTWF0cml4Q29sdW1uKHRoaXMsMSk7Yy5zZXRGcm9tTWF0cml4Q29sdW1uKHRoaXMsMik7cmV0dXJuIHRoaXN9LG1ha2VCYXNpczpmdW5jdGlvbihhLGIsYyl7dGhpcy5zZXQoYS54LGIueCxjLngsMCxhLnksYi55LGMueSwwLGEueixiLnosYy56LDAsMCwwLDAsXG4gICAgMSk7cmV0dXJuIHRoaXN9LGV4dHJhY3RSb3RhdGlvbjpmdW5jdGlvbigpe3ZhciBhPW5ldyBwO3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz10aGlzLmVsZW1lbnRzLGQ9Yi5lbGVtZW50cyxlPTEvYS5zZXRGcm9tTWF0cml4Q29sdW1uKGIsMCkubGVuZ3RoKCksZj0xL2Euc2V0RnJvbU1hdHJpeENvbHVtbihiLDEpLmxlbmd0aCgpO2I9MS9hLnNldEZyb21NYXRyaXhDb2x1bW4oYiwyKS5sZW5ndGgoKTtjWzBdPWRbMF0qZTtjWzFdPWRbMV0qZTtjWzJdPWRbMl0qZTtjWzRdPWRbNF0qZjtjWzVdPWRbNV0qZjtjWzZdPWRbNl0qZjtjWzhdPWRbOF0qYjtjWzldPWRbOV0qYjtjWzEwXT1kWzEwXSpiO3JldHVybiB0aGlzfX0oKSxtYWtlUm90YXRpb25Gcm9tRXVsZXI6ZnVuY3Rpb24oYSl7YSYmYS5pc0V1bGVyfHxjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4NDogLm1ha2VSb3RhdGlvbkZyb21FdWxlcigpIG5vdyBleHBlY3RzIGEgRXVsZXIgcm90YXRpb24gcmF0aGVyIHRoYW4gYSBWZWN0b3IzIGFuZCBvcmRlci5cIik7XG4gICAgdmFyIGI9dGhpcy5lbGVtZW50cyxjPWEueCxkPWEueSxlPWEueixmPU1hdGguY29zKGMpLGM9TWF0aC5zaW4oYyksZz1NYXRoLmNvcyhkKSxkPU1hdGguc2luKGQpLGg9TWF0aC5jb3MoZSksZT1NYXRoLnNpbihlKTtpZihcIlhZWlwiPT09YS5vcmRlcil7dmFyIGs9ZipoO3ZhciBtPWYqZTt2YXIgcT1jKmg7YT1jKmU7YlswXT1nKmg7Yls0XT0tZyplO2JbOF09ZDtiWzFdPW0rcSpkO2JbNV09ay1hKmQ7Yls5XT0tYypnO2JbMl09YS1rKmQ7Yls2XT1xK20qZDtiWzEwXT1mKmd9ZWxzZVwiWVhaXCI9PT1hLm9yZGVyPyhrPWcqaCxtPWcqZSxxPWQqaCxhPWQqZSxiWzBdPWsrYSpjLGJbNF09cSpjLW0sYls4XT1mKmQsYlsxXT1mKmUsYls1XT1mKmgsYls5XT0tYyxiWzJdPW0qYy1xLGJbNl09YStrKmMsYlsxMF09ZipnKTpcIlpYWVwiPT09YS5vcmRlcj8oaz1nKmgsbT1nKmUscT1kKmgsYT1kKmUsYlswXT1rLWEqYyxiWzRdPS1mKmUsYls4XT1xK20qYyxiWzFdPW0rcSpjLGJbNV09ZipoLGJbOV09XG4gICAgYS1rKmMsYlsyXT0tZipkLGJbNl09YyxiWzEwXT1mKmcpOlwiWllYXCI9PT1hLm9yZGVyPyhrPWYqaCxtPWYqZSxxPWMqaCxhPWMqZSxiWzBdPWcqaCxiWzRdPXEqZC1tLGJbOF09aypkK2EsYlsxXT1nKmUsYls1XT1hKmQrayxiWzldPW0qZC1xLGJbMl09LWQsYls2XT1jKmcsYlsxMF09ZipnKTpcIllaWFwiPT09YS5vcmRlcj8oaz1mKmcsbT1mKmQscT1jKmcsYT1jKmQsYlswXT1nKmgsYls0XT1hLWsqZSxiWzhdPXEqZSttLGJbMV09ZSxiWzVdPWYqaCxiWzldPS1jKmgsYlsyXT0tZCpoLGJbNl09bSplK3EsYlsxMF09ay1hKmUpOlwiWFpZXCI9PT1hLm9yZGVyJiYoaz1mKmcsbT1mKmQscT1jKmcsYT1jKmQsYlswXT1nKmgsYls0XT0tZSxiWzhdPWQqaCxiWzFdPWsqZSthLGJbNV09ZipoLGJbOV09bSplLXEsYlsyXT1xKmUtbSxiWzZdPWMqaCxiWzEwXT1hKmUrayk7YlszXT0wO2JbN109MDtiWzExXT0wO2JbMTJdPTA7YlsxM109MDtiWzE0XT0wO2JbMTVdPTE7cmV0dXJuIHRoaXN9LG1ha2VSb3RhdGlvbkZyb21RdWF0ZXJuaW9uOmZ1bmN0aW9uKGEpe3ZhciBiPVxuICAgIHRoaXMuZWxlbWVudHMsYz1hLl94LGQ9YS5feSxlPWEuX3osZj1hLl93LGc9YytjLGg9ZCtkLGs9ZStlO2E9YypnO3ZhciBtPWMqaCxjPWMqayxxPWQqaCxkPWQqayxlPWUqayxnPWYqZyxoPWYqaCxmPWYqaztiWzBdPTEtKHErZSk7Yls0XT1tLWY7Yls4XT1jK2g7YlsxXT1tK2Y7Yls1XT0xLShhK2UpO2JbOV09ZC1nO2JbMl09Yy1oO2JbNl09ZCtnO2JbMTBdPTEtKGErcSk7YlszXT0wO2JbN109MDtiWzExXT0wO2JbMTJdPTA7YlsxM109MDtiWzE0XT0wO2JbMTVdPTE7cmV0dXJuIHRoaXN9LGxvb2tBdDpmdW5jdGlvbigpe3ZhciBhPW5ldyBwLGI9bmV3IHAsYz1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oZCxlLGYpe3ZhciBnPXRoaXMuZWxlbWVudHM7Yy5zdWJWZWN0b3JzKGQsZSk7MD09PWMubGVuZ3RoU3EoKSYmKGMuej0xKTtjLm5vcm1hbGl6ZSgpO2EuY3Jvc3NWZWN0b3JzKGYsYyk7MD09PWEubGVuZ3RoU3EoKSYmKDE9PT1NYXRoLmFicyhmLnopP2MueCs9MUUtNDpjLnorPTFFLTQsXG4gICAgYy5ub3JtYWxpemUoKSxhLmNyb3NzVmVjdG9ycyhmLGMpKTthLm5vcm1hbGl6ZSgpO2IuY3Jvc3NWZWN0b3JzKGMsYSk7Z1swXT1hLng7Z1s0XT1iLng7Z1s4XT1jLng7Z1sxXT1hLnk7Z1s1XT1iLnk7Z1s5XT1jLnk7Z1syXT1hLno7Z1s2XT1iLno7Z1sxMF09Yy56O3JldHVybiB0aGlzfX0oKSxtdWx0aXBseTpmdW5jdGlvbihhLGIpe3JldHVybiB2b2lkIDAhPT1iPyhjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAubXVsdGlwbHkoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5tdWx0aXBseU1hdHJpY2VzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5tdWx0aXBseU1hdHJpY2VzKGEsYikpOnRoaXMubXVsdGlwbHlNYXRyaWNlcyh0aGlzLGEpfSxwcmVtdWx0aXBseTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tdWx0aXBseU1hdHJpY2VzKGEsdGhpcyl9LG11bHRpcGx5TWF0cmljZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmVsZW1lbnRzLGQ9Yi5lbGVtZW50cztcbiAgICBiPXRoaXMuZWxlbWVudHM7YT1jWzBdO3ZhciBlPWNbNF0sZj1jWzhdLGc9Y1sxMl0saD1jWzFdLGs9Y1s1XSxtPWNbOV0scT1jWzEzXSxuPWNbMl0sbD1jWzZdLHI9Y1sxMF0sdD1jWzE0XSxwPWNbM10sdz1jWzddLHo9Y1sxMV0sYz1jWzE1XSx5PWRbMF0sST1kWzRdLEE9ZFs4XSxKPWRbMTJdLHg9ZFsxXSxCPWRbNV0sRD1kWzldLEM9ZFsxM10sRT1kWzJdLEg9ZFs2XSxLPWRbMTBdLFM9ZFsxNF0sTD1kWzNdLE49ZFs3XSxNPWRbMTFdLGQ9ZFsxNV07YlswXT1hKnkrZSp4K2YqRStnKkw7Yls0XT1hKkkrZSpCK2YqSCtnKk47Yls4XT1hKkErZSpEK2YqSytnKk07YlsxMl09YSpKK2UqQytmKlMrZypkO2JbMV09aCp5K2sqeCttKkUrcSpMO2JbNV09aCpJK2sqQittKkgrcSpOO2JbOV09aCpBK2sqRCttKksrcSpNO2JbMTNdPWgqSitrKkMrbSpTK3EqZDtiWzJdPW4qeStsKngrcipFK3QqTDtiWzZdPW4qSStsKkIrcipIK3QqTjtiWzEwXT1uKkErbCpEK3IqSyt0Kk07YlsxNF09bipKK2wqXG4gICAgQytyKlMrdCpkO2JbM109cCp5K3cqeCt6KkUrYypMO2JbN109cCpJK3cqQit6KkgrYypOO2JbMTFdPXAqQSt3KkQreipLK2MqTTtiWzE1XT1wKkordypDK3oqUytjKmQ7cmV0dXJuIHRoaXN9LG11bHRpcGx5U2NhbGFyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudHM7YlswXSo9YTtiWzRdKj1hO2JbOF0qPWE7YlsxMl0qPWE7YlsxXSo9YTtiWzVdKj1hO2JbOV0qPWE7YlsxM10qPWE7YlsyXSo9YTtiWzZdKj1hO2JbMTBdKj1hO2JbMTRdKj1hO2JbM10qPWE7Yls3XSo9YTtiWzExXSo9YTtiWzE1XSo9YTtyZXR1cm4gdGhpc30sYXBwbHlUb0J1ZmZlckF0dHJpYnV0ZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBwO3JldHVybiBmdW5jdGlvbihiKXtmb3IodmFyIGM9MCxkPWIuY291bnQ7YzxkO2MrKylhLng9Yi5nZXRYKGMpLGEueT1iLmdldFkoYyksYS56PWIuZ2V0WihjKSxhLmFwcGx5TWF0cml4NCh0aGlzKSxiLnNldFhZWihjLGEueCxhLnksYS56KTtyZXR1cm4gYn19KCksZGV0ZXJtaW5hbnQ6ZnVuY3Rpb24oKXt2YXIgYT1cbiAgICB0aGlzLmVsZW1lbnRzLGI9YVswXSxjPWFbNF0sZD1hWzhdLGU9YVsxMl0sZj1hWzFdLGc9YVs1XSxoPWFbOV0saz1hWzEzXSxtPWFbMl0scT1hWzZdLG49YVsxMF0sbD1hWzE0XTtyZXR1cm4gYVszXSooK2UqaCpxLWQqaypxLWUqZypuK2MqaypuK2QqZypsLWMqaCpsKSthWzddKigrYipoKmwtYiprKm4rZSpmKm4tZCpmKmwrZCprKm0tZSpoKm0pK2FbMTFdKigrYiprKnEtYipnKmwtZSpmKnErYypmKmwrZSpnKm0tYyprKm0pK2FbMTVdKigtZCpnKm0tYipoKnErYipnKm4rZCpmKnEtYypmKm4rYypoKm0pfSx0cmFuc3Bvc2U6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW1lbnRzO3ZhciBiPWFbMV07YVsxXT1hWzRdO2FbNF09YjtiPWFbMl07YVsyXT1hWzhdO2FbOF09YjtiPWFbNl07YVs2XT1hWzldO2FbOV09YjtiPWFbM107YVszXT1hWzEyXTthWzEyXT1iO2I9YVs3XTthWzddPWFbMTNdO2FbMTNdPWI7Yj1hWzExXTthWzExXT1hWzE0XTthWzE0XT1iO3JldHVybiB0aGlzfSxzZXRQb3NpdGlvbjpmdW5jdGlvbihhKXt2YXIgYj1cbiAgICB0aGlzLmVsZW1lbnRzO2JbMTJdPWEueDtiWzEzXT1hLnk7YlsxNF09YS56O3JldHVybiB0aGlzfSxnZXRJbnZlcnNlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5lbGVtZW50cyxkPWEuZWxlbWVudHM7YT1kWzBdO3ZhciBlPWRbMV0sZj1kWzJdLGc9ZFszXSxoPWRbNF0saz1kWzVdLG09ZFs2XSxxPWRbN10sbD1kWzhdLHU9ZFs5XSxyPWRbMTBdLHQ9ZFsxMV0scD1kWzEyXSx3PWRbMTNdLHo9ZFsxNF0sZD1kWzE1XSx5PXUqeipxLXcqcipxK3cqbSp0LWsqeip0LXUqbSpkK2sqcipkLHg9cCpyKnEtbCp6KnEtcCptKnQraCp6KnQrbCptKmQtaCpyKmQsQT1sKncqcS1wKnUqcStwKmsqdC1oKncqdC1sKmsqZCtoKnUqZCxKPXAqdSptLWwqdyptLXAqaypyK2gqdypyK2wqayp6LWgqdSp6LEI9YSp5K2UqeCtmKkErZypKO2lmKDA9PT1CKXtpZighMD09PWIpdGhyb3cgRXJyb3IoXCJUSFJFRS5NYXRyaXg0OiAuZ2V0SW52ZXJzZSgpIGNhbid0IGludmVydCBtYXRyaXgsIGRldGVybWluYW50IGlzIDBcIik7XG4gICAgY29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLmdldEludmVyc2UoKSBjYW4ndCBpbnZlcnQgbWF0cml4LCBkZXRlcm1pbmFudCBpcyAwXCIpO3JldHVybiB0aGlzLmlkZW50aXR5KCl9Yj0xL0I7Y1swXT15KmI7Y1sxXT0odypyKmctdSp6KmctdypmKnQrZSp6KnQrdSpmKmQtZSpyKmQpKmI7Y1syXT0oayp6KmctdyptKmcrdypmKnEtZSp6KnEtaypmKmQrZSptKmQpKmI7Y1szXT0odSptKmctaypyKmctdSpmKnErZSpyKnEraypmKnQtZSptKnQpKmI7Y1s0XT14KmI7Y1s1XT0obCp6KmctcCpyKmcrcCpmKnQtYSp6KnQtbCpmKmQrYSpyKmQpKmI7Y1s2XT0ocCptKmctaCp6KmctcCpmKnErYSp6KnEraCpmKmQtYSptKmQpKmI7Y1s3XT0oaCpyKmctbCptKmcrbCpmKnEtYSpyKnEtaCpmKnQrYSptKnQpKmI7Y1s4XT1BKmI7Y1s5XT0ocCp1KmctbCp3KmctcCplKnQrYSp3KnQrbCplKmQtYSp1KmQpKmI7Y1sxMF09KGgqdypnLXAqaypnK3AqZSpxLWEqdypxLWgqZSpkK2EqaypkKSpiO2NbMTFdPVxuICAgIChsKmsqZy1oKnUqZy1sKmUqcSthKnUqcStoKmUqdC1hKmsqdCkqYjtjWzEyXT1KKmI7Y1sxM109KGwqdypmLXAqdSpmK3AqZSpyLWEqdypyLWwqZSp6K2EqdSp6KSpiO2NbMTRdPShwKmsqZi1oKncqZi1wKmUqbSthKncqbStoKmUqei1hKmsqeikqYjtjWzE1XT0oaCp1KmYtbCprKmYrbCplKm0tYSp1Km0taCplKnIrYSprKnIpKmI7cmV0dXJuIHRoaXN9LHNjYWxlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudHMsYz1hLngsZD1hLnk7YT1hLno7YlswXSo9YztiWzRdKj1kO2JbOF0qPWE7YlsxXSo9YztiWzVdKj1kO2JbOV0qPWE7YlsyXSo9YztiWzZdKj1kO2JbMTBdKj1hO2JbM10qPWM7Yls3XSo9ZDtiWzExXSo9YTtyZXR1cm4gdGhpc30sZ2V0TWF4U2NhbGVPbkF4aXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW1lbnRzO3JldHVybiBNYXRoLnNxcnQoTWF0aC5tYXgoYVswXSphWzBdK2FbMV0qYVsxXSthWzJdKmFbMl0sYVs0XSphWzRdK2FbNV0qYVs1XSthWzZdKmFbNl0sXG4gICAgYVs4XSphWzhdK2FbOV0qYVs5XSthWzEwXSphWzEwXSkpfSxtYWtlVHJhbnNsYXRpb246ZnVuY3Rpb24oYSxiLGMpe3RoaXMuc2V0KDEsMCwwLGEsMCwxLDAsYiwwLDAsMSxjLDAsMCwwLDEpO3JldHVybiB0aGlzfSxtYWtlUm90YXRpb25YOmZ1bmN0aW9uKGEpe3ZhciBiPU1hdGguY29zKGEpO2E9TWF0aC5zaW4oYSk7dGhpcy5zZXQoMSwwLDAsMCwwLGIsLWEsMCwwLGEsYiwwLDAsMCwwLDEpO3JldHVybiB0aGlzfSxtYWtlUm90YXRpb25ZOmZ1bmN0aW9uKGEpe3ZhciBiPU1hdGguY29zKGEpO2E9TWF0aC5zaW4oYSk7dGhpcy5zZXQoYiwwLGEsMCwwLDEsMCwwLC1hLDAsYiwwLDAsMCwwLDEpO3JldHVybiB0aGlzfSxtYWtlUm90YXRpb25aOmZ1bmN0aW9uKGEpe3ZhciBiPU1hdGguY29zKGEpO2E9TWF0aC5zaW4oYSk7dGhpcy5zZXQoYiwtYSwwLDAsYSxiLDAsMCwwLDAsMSwwLDAsMCwwLDEpO3JldHVybiB0aGlzfSxtYWtlUm90YXRpb25BeGlzOmZ1bmN0aW9uKGEsYil7dmFyIGM9XG4gICAgTWF0aC5jb3MoYik7Yj1NYXRoLnNpbihiKTt2YXIgZD0xLWMsZT1hLngsZj1hLnk7YT1hLno7dmFyIGc9ZCplLGg9ZCpmO3RoaXMuc2V0KGcqZStjLGcqZi1iKmEsZyphK2IqZiwwLGcqZitiKmEsaCpmK2MsaCphLWIqZSwwLGcqYS1iKmYsaCphK2IqZSxkKmEqYStjLDAsMCwwLDAsMSk7cmV0dXJuIHRoaXN9LG1ha2VTY2FsZTpmdW5jdGlvbihhLGIsYyl7dGhpcy5zZXQoYSwwLDAsMCwwLGIsMCwwLDAsMCxjLDAsMCwwLDAsMSk7cmV0dXJuIHRoaXN9LG1ha2VTaGVhcjpmdW5jdGlvbihhLGIsYyl7dGhpcy5zZXQoMSxiLGMsMCxhLDEsYywwLGEsYiwxLDAsMCwwLDAsMSk7cmV0dXJuIHRoaXN9LGNvbXBvc2U6ZnVuY3Rpb24oYSxiLGMpe3RoaXMubWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24oYik7dGhpcy5zY2FsZShjKTt0aGlzLnNldFBvc2l0aW9uKGEpO3JldHVybiB0aGlzfSxkZWNvbXBvc2U6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCxiPW5ldyBPO3JldHVybiBmdW5jdGlvbihjLFxuICAgIGQsZSl7dmFyIGY9dGhpcy5lbGVtZW50cyxnPWEuc2V0KGZbMF0sZlsxXSxmWzJdKS5sZW5ndGgoKSxoPWEuc2V0KGZbNF0sZls1XSxmWzZdKS5sZW5ndGgoKSxrPWEuc2V0KGZbOF0sZls5XSxmWzEwXSkubGVuZ3RoKCk7MD50aGlzLmRldGVybWluYW50KCkmJihnPS1nKTtjLng9ZlsxMl07Yy55PWZbMTNdO2Muej1mWzE0XTtiLmNvcHkodGhpcyk7Yz0xL2c7dmFyIGY9MS9oLG09MS9rO2IuZWxlbWVudHNbMF0qPWM7Yi5lbGVtZW50c1sxXSo9YztiLmVsZW1lbnRzWzJdKj1jO2IuZWxlbWVudHNbNF0qPWY7Yi5lbGVtZW50c1s1XSo9ZjtiLmVsZW1lbnRzWzZdKj1mO2IuZWxlbWVudHNbOF0qPW07Yi5lbGVtZW50c1s5XSo9bTtiLmVsZW1lbnRzWzEwXSo9bTtkLnNldEZyb21Sb3RhdGlvbk1hdHJpeChiKTtlLng9ZztlLnk9aDtlLno9aztyZXR1cm4gdGhpc319KCksbWFrZVBlcnNwZWN0aXZlOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2b2lkIDA9PT1mJiZjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAubWFrZVBlcnNwZWN0aXZlKCkgaGFzIGJlZW4gcmVkZWZpbmVkIGFuZCBoYXMgYSBuZXcgc2lnbmF0dXJlLiBQbGVhc2UgY2hlY2sgdGhlIGRvY3MuXCIpO1xuICAgIHZhciBnPXRoaXMuZWxlbWVudHM7Z1swXT0yKmUvKGItYSk7Z1s0XT0wO2dbOF09KGIrYSkvKGItYSk7Z1sxMl09MDtnWzFdPTA7Z1s1XT0yKmUvKGMtZCk7Z1s5XT0oYytkKS8oYy1kKTtnWzEzXT0wO2dbMl09MDtnWzZdPTA7Z1sxMF09LShmK2UpLyhmLWUpO2dbMTRdPS0yKmYqZS8oZi1lKTtnWzNdPTA7Z1s3XT0wO2dbMTFdPS0xO2dbMTVdPTA7cmV0dXJuIHRoaXN9LG1ha2VPcnRob2dyYXBoaWM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBnPXRoaXMuZWxlbWVudHMsaD0xLyhiLWEpLGs9MS8oYy1kKSxtPTEvKGYtZSk7Z1swXT0yKmg7Z1s0XT0wO2dbOF09MDtnWzEyXT0tKChiK2EpKmgpO2dbMV09MDtnWzVdPTIqaztnWzldPTA7Z1sxM109LSgoYytkKSprKTtnWzJdPTA7Z1s2XT0wO2dbMTBdPS0yKm07Z1sxNF09LSgoZitlKSptKTtnWzNdPTA7Z1s3XT0wO2dbMTFdPTA7Z1sxNV09MTtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudHM7XG4gICAgYT1hLmVsZW1lbnRzO2Zvcih2YXIgYz0wOzE2PmM7YysrKWlmKGJbY10hPT1hW2NdKXJldHVybiExO3JldHVybiEwfSxmcm9tQXJyYXk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj0wKTtmb3IodmFyIGM9MDsxNj5jO2MrKyl0aGlzLmVsZW1lbnRzW2NdPWFbYytiXTtyZXR1cm4gdGhpc30sdG9BcnJheTpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PWEmJihhPVtdKTt2b2lkIDA9PT1iJiYoYj0wKTt2YXIgYz10aGlzLmVsZW1lbnRzO2FbYl09Y1swXTthW2IrMV09Y1sxXTthW2IrMl09Y1syXTthW2IrM109Y1szXTthW2IrNF09Y1s0XTthW2IrNV09Y1s1XTthW2IrNl09Y1s2XTthW2IrN109Y1s3XTthW2IrOF09Y1s4XTthW2IrOV09Y1s5XTthW2IrMTBdPWNbMTBdO2FbYisxMV09Y1sxMV07YVtiKzEyXT1jWzEyXTthW2IrMTNdPWNbMTNdO2FbYisxNF09Y1sxNF07YVtiKzE1XT1jWzE1XTtyZXR1cm4gYX19KTtPYmplY3QuYXNzaWduKGhhLHtzbGVycDpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gYy5jb3B5KGEpLnNsZXJwKGIsXG4gICAgZCl9LHNsZXJwRmxhdDpmdW5jdGlvbihhLGIsYyxkLGUsZixnKXt2YXIgaD1jW2QrMF0saz1jW2QrMV0sbT1jW2QrMl07Yz1jW2QrM107ZD1lW2YrMF07dmFyIHE9ZVtmKzFdLGw9ZVtmKzJdO2U9ZVtmKzNdO2lmKGMhPT1lfHxoIT09ZHx8ayE9PXF8fG0hPT1sKXtmPTEtZzt2YXIgdT1oKmQraypxK20qbCtjKmUscj0wPD11PzE6LTEscD0xLXUqdTtwPk51bWJlci5FUFNJTE9OJiYocD1NYXRoLnNxcnQocCksdT1NYXRoLmF0YW4yKHAsdSpyKSxmPU1hdGguc2luKGYqdSkvcCxnPU1hdGguc2luKGcqdSkvcCk7cio9ZztoPWgqZitkKnI7az1rKmYrcSpyO209bSpmK2wqcjtjPWMqZitlKnI7Zj09PTEtZyYmKGc9MS9NYXRoLnNxcnQoaCpoK2sqayttKm0rYypjKSxoKj1nLGsqPWcsbSo9ZyxjKj1nKX1hW2JdPWg7YVtiKzFdPWs7YVtiKzJdPW07YVtiKzNdPWN9fSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoaGEucHJvdG90eXBlLHt4OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5feH0sXG4gICAgc2V0OmZ1bmN0aW9uKGEpe3RoaXMuX3g9YTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKX19LHk6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl95fSxzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5feT1hO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpfX0sejp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3p9LHNldDpmdW5jdGlvbihhKXt0aGlzLl96PWE7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCl9fSx3OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd30sc2V0OmZ1bmN0aW9uKGEpe3RoaXMuX3c9YTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKX19fSk7T2JqZWN0LmFzc2lnbihoYS5wcm90b3R5cGUse3NldDpmdW5jdGlvbihhLGIsYyxkKXt0aGlzLl94PWE7dGhpcy5feT1iO3RoaXMuX3o9Yzt0aGlzLl93PWQ7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuX3gsdGhpcy5feSx0aGlzLl96LFxuICAgIHRoaXMuX3cpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMuX3g9YS54O3RoaXMuX3k9YS55O3RoaXMuX3o9YS56O3RoaXMuX3c9YS53O3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzfSxzZXRGcm9tRXVsZXI6ZnVuY3Rpb24oYSxiKXtpZighYXx8IWEuaXNFdWxlcil0aHJvdyBFcnJvcihcIlRIUkVFLlF1YXRlcm5pb246IC5zZXRGcm9tRXVsZXIoKSBub3cgZXhwZWN0cyBhbiBFdWxlciByb3RhdGlvbiByYXRoZXIgdGhhbiBhIFZlY3RvcjMgYW5kIG9yZGVyLlwiKTt2YXIgYz1hLl94LGQ9YS5feSxlPWEuX3o7YT1hLm9yZGVyO3ZhciBmPU1hdGguY29zLGc9TWF0aC5zaW4saD1mKGMvMiksaz1mKGQvMiksZj1mKGUvMiksYz1nKGMvMiksZD1nKGQvMiksZT1nKGUvMik7XCJYWVpcIj09PWE/KHRoaXMuX3g9YyprKmYraCpkKmUsdGhpcy5feT1oKmQqZi1jKmsqZSx0aGlzLl96PWgqayplK2MqZCpmLHRoaXMuX3c9aCprKmYtYypkKmUpOlwiWVhaXCI9PT1hPyh0aGlzLl94PWMqaypmK1xuICAgIGgqZCplLHRoaXMuX3k9aCpkKmYtYyprKmUsdGhpcy5fej1oKmsqZS1jKmQqZix0aGlzLl93PWgqaypmK2MqZCplKTpcIlpYWVwiPT09YT8odGhpcy5feD1jKmsqZi1oKmQqZSx0aGlzLl95PWgqZCpmK2MqayplLHRoaXMuX3o9aCprKmUrYypkKmYsdGhpcy5fdz1oKmsqZi1jKmQqZSk6XCJaWVhcIj09PWE/KHRoaXMuX3g9YyprKmYtaCpkKmUsdGhpcy5feT1oKmQqZitjKmsqZSx0aGlzLl96PWgqayplLWMqZCpmLHRoaXMuX3c9aCprKmYrYypkKmUpOlwiWVpYXCI9PT1hPyh0aGlzLl94PWMqaypmK2gqZCplLHRoaXMuX3k9aCpkKmYrYyprKmUsdGhpcy5fej1oKmsqZS1jKmQqZix0aGlzLl93PWgqaypmLWMqZCplKTpcIlhaWVwiPT09YSYmKHRoaXMuX3g9YyprKmYtaCpkKmUsdGhpcy5feT1oKmQqZi1jKmsqZSx0aGlzLl96PWgqayplK2MqZCpmLHRoaXMuX3c9aCprKmYrYypkKmUpO2lmKCExIT09Yil0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpc30sc2V0RnJvbUF4aXNBbmdsZTpmdW5jdGlvbihhLFxuICAgIGIpe2IvPTI7dmFyIGM9TWF0aC5zaW4oYik7dGhpcy5feD1hLngqYzt0aGlzLl95PWEueSpjO3RoaXMuX3o9YS56KmM7dGhpcy5fdz1NYXRoLmNvcyhiKTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpc30sc2V0RnJvbVJvdGF0aW9uTWF0cml4OmZ1bmN0aW9uKGEpe3ZhciBiPWEuZWxlbWVudHMsYz1iWzBdO2E9Yls0XTt2YXIgZD1iWzhdLGU9YlsxXSxmPWJbNV0sZz1iWzldLGg9YlsyXSxrPWJbNl0sYj1iWzEwXSxtPWMrZitiOzA8bT8oYz0uNS9NYXRoLnNxcnQobSsxKSx0aGlzLl93PS4yNS9jLHRoaXMuX3g9KGstZykqYyx0aGlzLl95PShkLWgpKmMsdGhpcy5fej0oZS1hKSpjKTpjPmYmJmM+Yj8oYz0yKk1hdGguc3FydCgxK2MtZi1iKSx0aGlzLl93PShrLWcpL2MsdGhpcy5feD0uMjUqYyx0aGlzLl95PShhK2UpL2MsdGhpcy5fej0oZCtoKS9jKTpmPmI/KGM9MipNYXRoLnNxcnQoMStmLWMtYiksdGhpcy5fdz0oZC1oKS9jLHRoaXMuX3g9KGErZSkvYyx0aGlzLl95PVxuICAgIC4yNSpjLHRoaXMuX3o9KGcraykvYyk6KGM9MipNYXRoLnNxcnQoMStiLWMtZiksdGhpcy5fdz0oZS1hKS9jLHRoaXMuX3g9KGQraCkvYyx0aGlzLl95PShnK2spL2MsdGhpcy5fej0uMjUqYyk7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LHNldEZyb21Vbml0VmVjdG9yczpmdW5jdGlvbigpe3ZhciBhPW5ldyBwLGI7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7dm9pZCAwPT09YSYmKGE9bmV3IHApO2I9Yy5kb3QoZCkrMTsxRS02PmI/KGI9MCxNYXRoLmFicyhjLngpPk1hdGguYWJzKGMueik/YS5zZXQoLWMueSxjLngsMCk6YS5zZXQoMCwtYy56LGMueSkpOmEuY3Jvc3NWZWN0b3JzKGMsZCk7dGhpcy5feD1hLng7dGhpcy5feT1hLnk7dGhpcy5fej1hLno7dGhpcy5fdz1iO3JldHVybiB0aGlzLm5vcm1hbGl6ZSgpfX0oKSxpbnZlcnNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uanVnYXRlKCkubm9ybWFsaXplKCl9LGNvbmp1Z2F0ZTpmdW5jdGlvbigpe3RoaXMuX3gqPVxuICAgIC0xO3RoaXMuX3kqPS0xO3RoaXMuX3oqPS0xO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzfSxkb3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX3gqYS5feCt0aGlzLl95KmEuX3krdGhpcy5feiphLl96K3RoaXMuX3cqYS5fd30sbGVuZ3RoU3E6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5feCp0aGlzLl94K3RoaXMuX3kqdGhpcy5feSt0aGlzLl96KnRoaXMuX3ordGhpcy5fdyp0aGlzLl93fSxsZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMuX3gqdGhpcy5feCt0aGlzLl95KnRoaXMuX3krdGhpcy5feip0aGlzLl96K3RoaXMuX3cqdGhpcy5fdyl9LG5vcm1hbGl6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMubGVuZ3RoKCk7MD09PWE/KHRoaXMuX3o9dGhpcy5feT10aGlzLl94PTAsdGhpcy5fdz0xKTooYT0xL2EsdGhpcy5feCo9YSx0aGlzLl95Kj1hLHRoaXMuX3oqPWEsdGhpcy5fdyo9YSk7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LFxuICAgIG11bHRpcGx5OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHZvaWQgMCE9PWI/KGNvbnNvbGUud2FybihcIlRIUkVFLlF1YXRlcm5pb246IC5tdWx0aXBseSgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLm11bHRpcGx5UXVhdGVybmlvbnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLm11bHRpcGx5UXVhdGVybmlvbnMoYSxiKSk6dGhpcy5tdWx0aXBseVF1YXRlcm5pb25zKHRoaXMsYSl9LHByZW11bHRpcGx5OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm11bHRpcGx5UXVhdGVybmlvbnMoYSx0aGlzKX0sbXVsdGlwbHlRdWF0ZXJuaW9uczpmdW5jdGlvbihhLGIpe3ZhciBjPWEuX3gsZD1hLl95LGU9YS5fejthPWEuX3c7dmFyIGY9Yi5feCxnPWIuX3ksaD1iLl96O2I9Yi5fdzt0aGlzLl94PWMqYithKmYrZCpoLWUqZzt0aGlzLl95PWQqYithKmcrZSpmLWMqaDt0aGlzLl96PWUqYithKmgrYypnLWQqZjt0aGlzLl93PWEqYi1jKmYtZCpnLWUqaDt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtcbiAgICByZXR1cm4gdGhpc30sc2xlcnA6ZnVuY3Rpb24oYSxiKXtpZigwPT09YilyZXR1cm4gdGhpcztpZigxPT09YilyZXR1cm4gdGhpcy5jb3B5KGEpO3ZhciBjPXRoaXMuX3gsZD10aGlzLl95LGU9dGhpcy5feixmPXRoaXMuX3csZz1mKmEuX3crYyphLl94K2QqYS5feStlKmEuX3o7MD5nPyh0aGlzLl93PS1hLl93LHRoaXMuX3g9LWEuX3gsdGhpcy5feT0tYS5feSx0aGlzLl96PS1hLl96LGc9LWcpOnRoaXMuY29weShhKTtpZigxPD1nKXJldHVybiB0aGlzLl93PWYsdGhpcy5feD1jLHRoaXMuX3k9ZCx0aGlzLl96PWUsdGhpczthPU1hdGguc3FydCgxLWcqZyk7aWYoLjAwMT5NYXRoLmFicyhhKSlyZXR1cm4gdGhpcy5fdz0uNSooZit0aGlzLl93KSx0aGlzLl94PS41KihjK3RoaXMuX3gpLHRoaXMuX3k9LjUqKGQrdGhpcy5feSksdGhpcy5fej0uNSooZSt0aGlzLl96KSx0aGlzO3ZhciBoPU1hdGguYXRhbjIoYSxnKSxnPU1hdGguc2luKCgxLWIpKmgpL2E7Yj1NYXRoLnNpbihiKmgpL2E7XG4gICAgdGhpcy5fdz1mKmcrdGhpcy5fdypiO3RoaXMuX3g9YypnK3RoaXMuX3gqYjt0aGlzLl95PWQqZyt0aGlzLl95KmI7dGhpcy5fej1lKmcrdGhpcy5feipiO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuX3g9PT10aGlzLl94JiZhLl95PT09dGhpcy5feSYmYS5fej09PXRoaXMuX3omJmEuX3c9PT10aGlzLl93fSxmcm9tQXJyYXk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj0wKTt0aGlzLl94PWFbYl07dGhpcy5feT1hW2IrMV07dGhpcy5fej1hW2IrMl07dGhpcy5fdz1hW2IrM107dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1hJiYoYT1bXSk7dm9pZCAwPT09YiYmKGI9MCk7YVtiXT10aGlzLl94O2FbYisxXT10aGlzLl95O2FbYisyXT10aGlzLl96O2FbYiszXT10aGlzLl93O3JldHVybiBhfSxvbkNoYW5nZTpmdW5jdGlvbihhKXt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2s9XG4gICAgYTtyZXR1cm4gdGhpc30sb25DaGFuZ2VDYWxsYmFjazpmdW5jdGlvbigpe319KTtPYmplY3QuYXNzaWduKHAucHJvdG90eXBlLHtpc1ZlY3RvcjM6ITAsc2V0OmZ1bmN0aW9uKGEsYixjKXt0aGlzLng9YTt0aGlzLnk9Yjt0aGlzLno9YztyZXR1cm4gdGhpc30sc2V0U2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMuej10aGlzLnk9dGhpcy54PWE7cmV0dXJuIHRoaXN9LHNldFg6ZnVuY3Rpb24oYSl7dGhpcy54PWE7cmV0dXJuIHRoaXN9LHNldFk6ZnVuY3Rpb24oYSl7dGhpcy55PWE7cmV0dXJuIHRoaXN9LHNldFo6ZnVuY3Rpb24oYSl7dGhpcy56PWE7cmV0dXJuIHRoaXN9LHNldENvbXBvbmVudDpmdW5jdGlvbihhLGIpe3N3aXRjaChhKXtjYXNlIDA6dGhpcy54PWI7YnJlYWs7Y2FzZSAxOnRoaXMueT1iO2JyZWFrO2Nhc2UgMjp0aGlzLno9YjticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwiaW5kZXggaXMgb3V0IG9mIHJhbmdlOiBcIithKTt9cmV0dXJuIHRoaXN9LGdldENvbXBvbmVudDpmdW5jdGlvbihhKXtzd2l0Y2goYSl7Y2FzZSAwOnJldHVybiB0aGlzLng7XG4gICAgY2FzZSAxOnJldHVybiB0aGlzLnk7Y2FzZSAyOnJldHVybiB0aGlzLno7ZGVmYXVsdDp0aHJvdyBFcnJvcihcImluZGV4IGlzIG91dCBvZiByYW5nZTogXCIrYSk7fX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy54LHRoaXMueSx0aGlzLnopfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMueD1hLng7dGhpcy55PWEueTt0aGlzLno9YS56O3JldHVybiB0aGlzfSxhZGQ6ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDAhPT1iKXJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAuYWRkKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuYWRkVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMuYWRkVmVjdG9ycyhhLGIpO3RoaXMueCs9YS54O3RoaXMueSs9YS55O3RoaXMueis9YS56O3JldHVybiB0aGlzfSxhZGRTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy54Kz1hO3RoaXMueSs9YTt0aGlzLnorPWE7cmV0dXJuIHRoaXN9LFxuICAgIGFkZFZlY3RvcnM6ZnVuY3Rpb24oYSxiKXt0aGlzLng9YS54K2IueDt0aGlzLnk9YS55K2IueTt0aGlzLno9YS56K2IuejtyZXR1cm4gdGhpc30sYWRkU2NhbGVkVmVjdG9yOmZ1bmN0aW9uKGEsYil7dGhpcy54Kz1hLngqYjt0aGlzLnkrPWEueSpiO3RoaXMueis9YS56KmI7cmV0dXJuIHRoaXN9LHN1YjpmdW5jdGlvbihhLGIpe2lmKHZvaWQgMCE9PWIpcmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IC5zdWIoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5zdWJWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5zdWJWZWN0b3JzKGEsYik7dGhpcy54LT1hLng7dGhpcy55LT1hLnk7dGhpcy56LT1hLno7cmV0dXJuIHRoaXN9LHN1YlNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLngtPWE7dGhpcy55LT1hO3RoaXMuei09YTtyZXR1cm4gdGhpc30sc3ViVmVjdG9yczpmdW5jdGlvbihhLGIpe3RoaXMueD1hLngtYi54O3RoaXMueT1hLnktYi55O3RoaXMuej1cbiAgICBhLnotYi56O3JldHVybiB0aGlzfSxtdWx0aXBseTpmdW5jdGlvbihhLGIpe2lmKHZvaWQgMCE9PWIpcmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IC5tdWx0aXBseSgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLm11bHRpcGx5VmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMubXVsdGlwbHlWZWN0b3JzKGEsYik7dGhpcy54Kj1hLng7dGhpcy55Kj1hLnk7dGhpcy56Kj1hLno7cmV0dXJuIHRoaXN9LG11bHRpcGx5U2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMueCo9YTt0aGlzLnkqPWE7dGhpcy56Kj1hO3JldHVybiB0aGlzfSxtdWx0aXBseVZlY3RvcnM6ZnVuY3Rpb24oYSxiKXt0aGlzLng9YS54KmIueDt0aGlzLnk9YS55KmIueTt0aGlzLno9YS56KmIuejtyZXR1cm4gdGhpc30sYXBwbHlFdWxlcjpmdW5jdGlvbigpe3ZhciBhPW5ldyBoYTtyZXR1cm4gZnVuY3Rpb24oYil7YiYmYi5pc0V1bGVyfHxjb25zb2xlLmVycm9yKFwiVEhSRUUuVmVjdG9yMzogLmFwcGx5RXVsZXIoKSBub3cgZXhwZWN0cyBhbiBFdWxlciByb3RhdGlvbiByYXRoZXIgdGhhbiBhIFZlY3RvcjMgYW5kIG9yZGVyLlwiKTtcbiAgICByZXR1cm4gdGhpcy5hcHBseVF1YXRlcm5pb24oYS5zZXRGcm9tRXVsZXIoYikpfX0oKSxhcHBseUF4aXNBbmdsZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBoYTtyZXR1cm4gZnVuY3Rpb24oYixjKXtyZXR1cm4gdGhpcy5hcHBseVF1YXRlcm5pb24oYS5zZXRGcm9tQXhpc0FuZ2xlKGIsYykpfX0oKSxhcHBseU1hdHJpeDM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy54LGM9dGhpcy55LGQ9dGhpcy56O2E9YS5lbGVtZW50czt0aGlzLng9YVswXSpiK2FbM10qYythWzZdKmQ7dGhpcy55PWFbMV0qYithWzRdKmMrYVs3XSpkO3RoaXMuej1hWzJdKmIrYVs1XSpjK2FbOF0qZDtyZXR1cm4gdGhpc30sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueCxjPXRoaXMueSxkPXRoaXMuejthPWEuZWxlbWVudHM7dmFyIGU9MS8oYVszXSpiK2FbN10qYythWzExXSpkK2FbMTVdKTt0aGlzLng9KGFbMF0qYithWzRdKmMrYVs4XSpkK2FbMTJdKSplO3RoaXMueT0oYVsxXSpiK2FbNV0qYytcbiAgICBhWzldKmQrYVsxM10pKmU7dGhpcy56PShhWzJdKmIrYVs2XSpjK2FbMTBdKmQrYVsxNF0pKmU7cmV0dXJuIHRoaXN9LGFwcGx5UXVhdGVybmlvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLngsYz10aGlzLnksZD10aGlzLnosZT1hLngsZj1hLnksZz1hLno7YT1hLnc7dmFyIGg9YSpiK2YqZC1nKmMsaz1hKmMrZypiLWUqZCxtPWEqZCtlKmMtZipiLGI9LWUqYi1mKmMtZypkO3RoaXMueD1oKmErYiotZStrKi1nLW0qLWY7dGhpcy55PWsqYStiKi1mK20qLWUtaCotZzt0aGlzLno9bSphK2IqLWcraCotZi1rKi1lO3JldHVybiB0aGlzfSxwcm9qZWN0OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE87cmV0dXJuIGZ1bmN0aW9uKGIpe2EubXVsdGlwbHlNYXRyaWNlcyhiLnByb2plY3Rpb25NYXRyaXgsYS5nZXRJbnZlcnNlKGIubWF0cml4V29ybGQpKTtyZXR1cm4gdGhpcy5hcHBseU1hdHJpeDQoYSl9fSgpLHVucHJvamVjdDpmdW5jdGlvbigpe3ZhciBhPW5ldyBPO3JldHVybiBmdW5jdGlvbihiKXthLm11bHRpcGx5TWF0cmljZXMoYi5tYXRyaXhXb3JsZCxcbiAgICBhLmdldEludmVyc2UoYi5wcm9qZWN0aW9uTWF0cml4KSk7cmV0dXJuIHRoaXMuYXBwbHlNYXRyaXg0KGEpfX0oKSx0cmFuc2Zvcm1EaXJlY3Rpb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy54LGM9dGhpcy55LGQ9dGhpcy56O2E9YS5lbGVtZW50czt0aGlzLng9YVswXSpiK2FbNF0qYythWzhdKmQ7dGhpcy55PWFbMV0qYithWzVdKmMrYVs5XSpkO3RoaXMuej1hWzJdKmIrYVs2XSpjK2FbMTBdKmQ7cmV0dXJuIHRoaXMubm9ybWFsaXplKCl9LGRpdmlkZTpmdW5jdGlvbihhKXt0aGlzLngvPWEueDt0aGlzLnkvPWEueTt0aGlzLnovPWEuejtyZXR1cm4gdGhpc30sZGl2aWRlU2NhbGFyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm11bHRpcGx5U2NhbGFyKDEvYSl9LG1pbjpmdW5jdGlvbihhKXt0aGlzLng9TWF0aC5taW4odGhpcy54LGEueCk7dGhpcy55PU1hdGgubWluKHRoaXMueSxhLnkpO3RoaXMuej1NYXRoLm1pbih0aGlzLnosYS56KTtyZXR1cm4gdGhpc30sbWF4OmZ1bmN0aW9uKGEpe3RoaXMueD1cbiAgICBNYXRoLm1heCh0aGlzLngsYS54KTt0aGlzLnk9TWF0aC5tYXgodGhpcy55LGEueSk7dGhpcy56PU1hdGgubWF4KHRoaXMueixhLnopO3JldHVybiB0aGlzfSxjbGFtcDpmdW5jdGlvbihhLGIpe3RoaXMueD1NYXRoLm1heChhLngsTWF0aC5taW4oYi54LHRoaXMueCkpO3RoaXMueT1NYXRoLm1heChhLnksTWF0aC5taW4oYi55LHRoaXMueSkpO3RoaXMuej1NYXRoLm1heChhLnosTWF0aC5taW4oYi56LHRoaXMueikpO3JldHVybiB0aGlzfSxjbGFtcFNjYWxhcjpmdW5jdGlvbigpe3ZhciBhPW5ldyBwLGI9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7YS5zZXQoYyxjLGMpO2Iuc2V0KGQsZCxkKTtyZXR1cm4gdGhpcy5jbGFtcChhLGIpfX0oKSxjbGFtcExlbmd0aDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMubGVuZ3RoKCk7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKGN8fDEpLm11bHRpcGx5U2NhbGFyKE1hdGgubWF4KGEsTWF0aC5taW4oYixjKSkpfSxmbG9vcjpmdW5jdGlvbigpe3RoaXMueD1cbiAgICBNYXRoLmZsb29yKHRoaXMueCk7dGhpcy55PU1hdGguZmxvb3IodGhpcy55KTt0aGlzLno9TWF0aC5mbG9vcih0aGlzLnopO3JldHVybiB0aGlzfSxjZWlsOmZ1bmN0aW9uKCl7dGhpcy54PU1hdGguY2VpbCh0aGlzLngpO3RoaXMueT1NYXRoLmNlaWwodGhpcy55KTt0aGlzLno9TWF0aC5jZWlsKHRoaXMueik7cmV0dXJuIHRoaXN9LHJvdW5kOmZ1bmN0aW9uKCl7dGhpcy54PU1hdGgucm91bmQodGhpcy54KTt0aGlzLnk9TWF0aC5yb3VuZCh0aGlzLnkpO3RoaXMuej1NYXRoLnJvdW5kKHRoaXMueik7cmV0dXJuIHRoaXN9LHJvdW5kVG9aZXJvOmZ1bmN0aW9uKCl7dGhpcy54PTA+dGhpcy54P01hdGguY2VpbCh0aGlzLngpOk1hdGguZmxvb3IodGhpcy54KTt0aGlzLnk9MD50aGlzLnk/TWF0aC5jZWlsKHRoaXMueSk6TWF0aC5mbG9vcih0aGlzLnkpO3RoaXMuej0wPnRoaXMuej9NYXRoLmNlaWwodGhpcy56KTpNYXRoLmZsb29yKHRoaXMueik7cmV0dXJuIHRoaXN9LG5lZ2F0ZTpmdW5jdGlvbigpe3RoaXMueD1cbiAgICAtdGhpcy54O3RoaXMueT0tdGhpcy55O3RoaXMuej0tdGhpcy56O3JldHVybiB0aGlzfSxkb3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMueCphLngrdGhpcy55KmEueSt0aGlzLnoqYS56fSxsZW5ndGhTcTpmdW5jdGlvbigpe3JldHVybiB0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnkrdGhpcy56KnRoaXMuen0sbGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguc3FydCh0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnkrdGhpcy56KnRoaXMueil9LG1hbmhhdHRhbkxlbmd0aDpmdW5jdGlvbigpe3JldHVybiBNYXRoLmFicyh0aGlzLngpK01hdGguYWJzKHRoaXMueSkrTWF0aC5hYnModGhpcy56KX0sbm9ybWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKHRoaXMubGVuZ3RoKCl8fDEpfSxzZXRMZW5ndGg6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubm9ybWFsaXplKCkubXVsdGlwbHlTY2FsYXIoYSl9LGxlcnA6ZnVuY3Rpb24oYSxiKXt0aGlzLngrPShhLngtXG4gICAgdGhpcy54KSpiO3RoaXMueSs9KGEueS10aGlzLnkpKmI7dGhpcy56Kz0oYS56LXRoaXMueikqYjtyZXR1cm4gdGhpc30sbGVycFZlY3RvcnM6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLnN1YlZlY3RvcnMoYixhKS5tdWx0aXBseVNjYWxhcihjKS5hZGQoYSl9LGNyb3NzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHZvaWQgMCE9PWI/KGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IC5jcm9zcygpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLmNyb3NzVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMuY3Jvc3NWZWN0b3JzKGEsYikpOnRoaXMuY3Jvc3NWZWN0b3JzKHRoaXMsYSl9LGNyb3NzVmVjdG9yczpmdW5jdGlvbihhLGIpe3ZhciBjPWEueCxkPWEueTthPWEuejt2YXIgZT1iLngsZj1iLnk7Yj1iLno7dGhpcy54PWQqYi1hKmY7dGhpcy55PWEqZS1jKmI7dGhpcy56PWMqZi1kKmU7cmV0dXJuIHRoaXN9LHByb2plY3RPblZlY3RvcjpmdW5jdGlvbihhKXt2YXIgYj1cbiAgICBhLmRvdCh0aGlzKS9hLmxlbmd0aFNxKCk7cmV0dXJuIHRoaXMuY29weShhKS5tdWx0aXBseVNjYWxhcihiKX0scHJvamVjdE9uUGxhbmU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYil7YS5jb3B5KHRoaXMpLnByb2plY3RPblZlY3RvcihiKTtyZXR1cm4gdGhpcy5zdWIoYSl9fSgpLHJlZmxlY3Q6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMuc3ViKGEuY29weShiKS5tdWx0aXBseVNjYWxhcigyKnRoaXMuZG90KGIpKSl9fSgpLGFuZ2xlVG86ZnVuY3Rpb24oYSl7YT10aGlzLmRvdChhKS9NYXRoLnNxcnQodGhpcy5sZW5ndGhTcSgpKmEubGVuZ3RoU3EoKSk7cmV0dXJuIE1hdGguYWNvcyhRLmNsYW1wKGEsLTEsMSkpfSxkaXN0YW5jZVRvOmZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLnNxcnQodGhpcy5kaXN0YW5jZVRvU3F1YXJlZChhKSl9LGRpc3RhbmNlVG9TcXVhcmVkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueC1cbiAgICBhLngsYz10aGlzLnktYS55O2E9dGhpcy56LWEuejtyZXR1cm4gYipiK2MqYythKmF9LG1hbmhhdHRhbkRpc3RhbmNlVG86ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGguYWJzKHRoaXMueC1hLngpK01hdGguYWJzKHRoaXMueS1hLnkpK01hdGguYWJzKHRoaXMuei1hLnopfSxzZXRGcm9tU3BoZXJpY2FsOmZ1bmN0aW9uKGEpe3ZhciBiPU1hdGguc2luKGEucGhpKSphLnJhZGl1czt0aGlzLng9YipNYXRoLnNpbihhLnRoZXRhKTt0aGlzLnk9TWF0aC5jb3MoYS5waGkpKmEucmFkaXVzO3RoaXMuej1iKk1hdGguY29zKGEudGhldGEpO3JldHVybiB0aGlzfSxzZXRGcm9tQ3lsaW5kcmljYWw6ZnVuY3Rpb24oYSl7dGhpcy54PWEucmFkaXVzKk1hdGguc2luKGEudGhldGEpO3RoaXMueT1hLnk7dGhpcy56PWEucmFkaXVzKk1hdGguY29zKGEudGhldGEpO3JldHVybiB0aGlzfSxzZXRGcm9tTWF0cml4UG9zaXRpb246ZnVuY3Rpb24oYSl7YT1hLmVsZW1lbnRzO3RoaXMueD1hWzEyXTt0aGlzLnk9XG4gICAgYVsxM107dGhpcy56PWFbMTRdO3JldHVybiB0aGlzfSxzZXRGcm9tTWF0cml4U2NhbGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5zZXRGcm9tTWF0cml4Q29sdW1uKGEsMCkubGVuZ3RoKCksYz10aGlzLnNldEZyb21NYXRyaXhDb2x1bW4oYSwxKS5sZW5ndGgoKTthPXRoaXMuc2V0RnJvbU1hdHJpeENvbHVtbihhLDIpLmxlbmd0aCgpO3RoaXMueD1iO3RoaXMueT1jO3RoaXMuej1hO3JldHVybiB0aGlzfSxzZXRGcm9tTWF0cml4Q29sdW1uOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZnJvbUFycmF5KGEuZWxlbWVudHMsNCpiKX0sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLng9PT10aGlzLngmJmEueT09PXRoaXMueSYmYS56PT09dGhpcy56fSxmcm9tQXJyYXk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj0wKTt0aGlzLng9YVtiXTt0aGlzLnk9YVtiKzFdO3RoaXMuej1hW2IrMl07cmV0dXJuIHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1hJiYoYT1cbiAgICBbXSk7dm9pZCAwPT09YiYmKGI9MCk7YVtiXT10aGlzLng7YVtiKzFdPXRoaXMueTthW2IrMl09dGhpcy56O3JldHVybiBhfSxmcm9tQnVmZmVyQXR0cmlidXRlOmZ1bmN0aW9uKGEsYixjKXt2b2lkIDAhPT1jJiZjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiBvZmZzZXQgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIC5mcm9tQnVmZmVyQXR0cmlidXRlKCkuXCIpO3RoaXMueD1hLmdldFgoYik7dGhpcy55PWEuZ2V0WShiKTt0aGlzLno9YS5nZXRaKGIpO3JldHVybiB0aGlzfX0pO09iamVjdC5hc3NpZ24obWEucHJvdG90eXBlLHtpc01hdHJpeDM6ITAsc2V0OmZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxrKXt2YXIgbT10aGlzLmVsZW1lbnRzO21bMF09YTttWzFdPWQ7bVsyXT1nO21bM109YjttWzRdPWU7bVs1XT1oO21bNl09YzttWzddPWY7bVs4XT1rO3JldHVybiB0aGlzfSxpZGVudGl0eTpmdW5jdGlvbigpe3RoaXMuc2V0KDEsMCwwLDAsMSwwLDAsMCwxKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmZyb21BcnJheSh0aGlzLmVsZW1lbnRzKX0sXG4gICAgY29weTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmVsZW1lbnRzO2E9YS5lbGVtZW50cztiWzBdPWFbMF07YlsxXT1hWzFdO2JbMl09YVsyXTtiWzNdPWFbM107Yls0XT1hWzRdO2JbNV09YVs1XTtiWzZdPWFbNl07Yls3XT1hWzddO2JbOF09YVs4XTtyZXR1cm4gdGhpc30sc2V0RnJvbU1hdHJpeDQ6ZnVuY3Rpb24oYSl7YT1hLmVsZW1lbnRzO3RoaXMuc2V0KGFbMF0sYVs0XSxhWzhdLGFbMV0sYVs1XSxhWzldLGFbMl0sYVs2XSxhWzEwXSk7cmV0dXJuIHRoaXN9LGFwcGx5VG9CdWZmZXJBdHRyaWJ1dGU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYil7Zm9yKHZhciBjPTAsZD1iLmNvdW50O2M8ZDtjKyspYS54PWIuZ2V0WChjKSxhLnk9Yi5nZXRZKGMpLGEuej1iLmdldFooYyksYS5hcHBseU1hdHJpeDModGhpcyksYi5zZXRYWVooYyxhLngsYS55LGEueik7cmV0dXJuIGJ9fSgpLG11bHRpcGx5OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm11bHRpcGx5TWF0cmljZXModGhpcyxcbiAgICBhKX0scHJlbXVsdGlwbHk6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubXVsdGlwbHlNYXRyaWNlcyhhLHRoaXMpfSxtdWx0aXBseU1hdHJpY2VzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5lbGVtZW50cyxkPWIuZWxlbWVudHM7Yj10aGlzLmVsZW1lbnRzO2E9Y1swXTt2YXIgZT1jWzNdLGY9Y1s2XSxnPWNbMV0saD1jWzRdLGs9Y1s3XSxtPWNbMl0scT1jWzVdLGM9Y1s4XSxsPWRbMF0scD1kWzNdLHI9ZFs2XSx0PWRbMV0sdj1kWzRdLHc9ZFs3XSx6PWRbMl0seT1kWzVdLGQ9ZFs4XTtiWzBdPWEqbCtlKnQrZip6O2JbM109YSpwK2UqditmKnk7Yls2XT1hKnIrZSp3K2YqZDtiWzFdPWcqbCtoKnQrayp6O2JbNF09ZypwK2gqditrKnk7Yls3XT1nKnIraCp3K2sqZDtiWzJdPW0qbCtxKnQrYyp6O2JbNV09bSpwK3EqditjKnk7Yls4XT1tKnIrcSp3K2MqZDtyZXR1cm4gdGhpc30sbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbGVtZW50cztiWzBdKj1hO2JbM10qPWE7XG4gICAgYls2XSo9YTtiWzFdKj1hO2JbNF0qPWE7Yls3XSo9YTtiWzJdKj1hO2JbNV0qPWE7Yls4XSo9YTtyZXR1cm4gdGhpc30sZGV0ZXJtaW5hbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW1lbnRzLGI9YVswXSxjPWFbMV0sZD1hWzJdLGU9YVszXSxmPWFbNF0sZz1hWzVdLGg9YVs2XSxrPWFbN10sYT1hWzhdO3JldHVybiBiKmYqYS1iKmcqay1jKmUqYStjKmcqaCtkKmUqay1kKmYqaH0sZ2V0SW52ZXJzZTpmdW5jdGlvbihhLGIpe2EmJmEuaXNNYXRyaXg0JiZjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4MzogLmdldEludmVyc2UoKSBubyBsb25nZXIgdGFrZXMgYSBNYXRyaXg0IGFyZ3VtZW50LlwiKTt2YXIgYz1hLmVsZW1lbnRzO2E9dGhpcy5lbGVtZW50czt2YXIgZD1jWzBdLGU9Y1sxXSxmPWNbMl0sZz1jWzNdLGg9Y1s0XSxrPWNbNV0sbT1jWzZdLHE9Y1s3XSxjPWNbOF0sbD1jKmgtaypxLHA9ayptLWMqZyxyPXEqZy1oKm0sdD1kKmwrZSpwK2YqcjtpZigwPT09dCl7aWYoITA9PT1cbiAgICBiKXRocm93IEVycm9yKFwiVEhSRUUuTWF0cml4MzogLmdldEludmVyc2UoKSBjYW4ndCBpbnZlcnQgbWF0cml4LCBkZXRlcm1pbmFudCBpcyAwXCIpO2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDM6IC5nZXRJbnZlcnNlKCkgY2FuJ3QgaW52ZXJ0IG1hdHJpeCwgZGV0ZXJtaW5hbnQgaXMgMFwiKTtyZXR1cm4gdGhpcy5pZGVudGl0eSgpfWI9MS90O2FbMF09bCpiO2FbMV09KGYqcS1jKmUpKmI7YVsyXT0oayplLWYqaCkqYjthWzNdPXAqYjthWzRdPShjKmQtZiptKSpiO2FbNV09KGYqZy1rKmQpKmI7YVs2XT1yKmI7YVs3XT0oZSptLXEqZCkqYjthWzhdPShoKmQtZSpnKSpiO3JldHVybiB0aGlzfSx0cmFuc3Bvc2U6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW1lbnRzO3ZhciBiPWFbMV07YVsxXT1hWzNdO2FbM109YjtiPWFbMl07YVsyXT1hWzZdO2FbNl09YjtiPWFbNV07YVs1XT1hWzddO2FbN109YjtyZXR1cm4gdGhpc30sZ2V0Tm9ybWFsTWF0cml4OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnNldEZyb21NYXRyaXg0KGEpLmdldEludmVyc2UodGhpcykudHJhbnNwb3NlKCl9LFxuICAgIHRyYW5zcG9zZUludG9BcnJheTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmVsZW1lbnRzO2FbMF09YlswXTthWzFdPWJbM107YVsyXT1iWzZdO2FbM109YlsxXTthWzRdPWJbNF07YVs1XT1iWzddO2FbNl09YlsyXTthWzddPWJbNV07YVs4XT1iWzhdO3JldHVybiB0aGlzfSxzZXRVdlRyYW5zZm9ybTpmdW5jdGlvbihhLGIsYyxkLGUsZixnKXt2YXIgaD1NYXRoLmNvcyhlKTtlPU1hdGguc2luKGUpO3RoaXMuc2V0KGMqaCxjKmUsLWMqKGgqZitlKmcpK2YrYSwtZCplLGQqaCwtZCooLWUqZitoKmcpK2crYiwwLDAsMSl9LHNjYWxlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5lbGVtZW50cztjWzBdKj1hO2NbM10qPWE7Y1s2XSo9YTtjWzFdKj1iO2NbNF0qPWI7Y1s3XSo9YjtyZXR1cm4gdGhpc30scm90YXRlOmZ1bmN0aW9uKGEpe3ZhciBiPU1hdGguY29zKGEpO2E9TWF0aC5zaW4oYSk7dmFyIGM9dGhpcy5lbGVtZW50cyxkPWNbMF0sZT1jWzNdLGY9Y1s2XSxnPWNbMV0saD1jWzRdLFxuICAgIGs9Y1s3XTtjWzBdPWIqZCthKmc7Y1szXT1iKmUrYSpoO2NbNl09YipmK2EqaztjWzFdPS1hKmQrYipnO2NbNF09LWEqZStiKmg7Y1s3XT0tYSpmK2IqaztyZXR1cm4gdGhpc30sdHJhbnNsYXRlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5lbGVtZW50cztjWzBdKz1hKmNbMl07Y1szXSs9YSpjWzVdO2NbNl0rPWEqY1s4XTtjWzFdKz1iKmNbMl07Y1s0XSs9YipjWzVdO2NbN10rPWIqY1s4XTtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudHM7YT1hLmVsZW1lbnRzO2Zvcih2YXIgYz0wOzk+YztjKyspaWYoYltjXSE9PWFbY10pcmV0dXJuITE7cmV0dXJuITB9LGZyb21BcnJheTpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPTApO2Zvcih2YXIgYz0wOzk+YztjKyspdGhpcy5lbGVtZW50c1tjXT1hW2MrYl07cmV0dXJuIHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1hJiYoYT1bXSk7dm9pZCAwPT09YiYmKGI9MCk7dmFyIGM9XG4gICAgdGhpcy5lbGVtZW50czthW2JdPWNbMF07YVtiKzFdPWNbMV07YVtiKzJdPWNbMl07YVtiKzNdPWNbM107YVtiKzRdPWNbNF07YVtiKzVdPWNbNV07YVtiKzZdPWNbNl07YVtiKzddPWNbN107YVtiKzhdPWNbOF07cmV0dXJuIGF9fSk7dmFyIEFmPTA7VS5ERUZBVUxUX0lNQUdFPXZvaWQgMDtVLkRFRkFVTFRfTUFQUElORz0zMDA7VS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHphLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlUsaXNUZXh0dXJlOiEwLGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMubmFtZT1hLm5hbWU7dGhpcy5pbWFnZT1hLmltYWdlO3RoaXMubWlwbWFwcz1hLm1pcG1hcHMuc2xpY2UoMCk7dGhpcy5tYXBwaW5nPWEubWFwcGluZzt0aGlzLndyYXBTPWEud3JhcFM7dGhpcy53cmFwVD1hLndyYXBUO3RoaXMubWFnRmlsdGVyPWEubWFnRmlsdGVyO3RoaXMubWluRmlsdGVyPVxuICAgIGEubWluRmlsdGVyO3RoaXMuYW5pc290cm9weT1hLmFuaXNvdHJvcHk7dGhpcy5mb3JtYXQ9YS5mb3JtYXQ7dGhpcy50eXBlPWEudHlwZTt0aGlzLm9mZnNldC5jb3B5KGEub2Zmc2V0KTt0aGlzLnJlcGVhdC5jb3B5KGEucmVwZWF0KTt0aGlzLmNlbnRlci5jb3B5KGEuY2VudGVyKTt0aGlzLnJvdGF0aW9uPWEucm90YXRpb247dGhpcy5tYXRyaXhBdXRvVXBkYXRlPWEubWF0cml4QXV0b1VwZGF0ZTt0aGlzLm1hdHJpeC5jb3B5KGEubWF0cml4KTt0aGlzLmdlbmVyYXRlTWlwbWFwcz1hLmdlbmVyYXRlTWlwbWFwczt0aGlzLnByZW11bHRpcGx5QWxwaGE9YS5wcmVtdWx0aXBseUFscGhhO3RoaXMuZmxpcFk9YS5mbGlwWTt0aGlzLnVucGFja0FsaWdubWVudD1hLnVucGFja0FsaWdubWVudDt0aGlzLmVuY29kaW5nPWEuZW5jb2Rpbmc7cmV0dXJuIHRoaXN9LHRvSlNPTjpmdW5jdGlvbihhKXt2YXIgYj12b2lkIDA9PT1hfHxcInN0cmluZ1wiPT09dHlwZW9mIGE7aWYoIWImJnZvaWQgMCE9PVxuICAgIGEudGV4dHVyZXNbdGhpcy51dWlkXSlyZXR1cm4gYS50ZXh0dXJlc1t0aGlzLnV1aWRdO3ZhciBjPXttZXRhZGF0YTp7dmVyc2lvbjo0LjUsdHlwZTpcIlRleHR1cmVcIixnZW5lcmF0b3I6XCJUZXh0dXJlLnRvSlNPTlwifSx1dWlkOnRoaXMudXVpZCxuYW1lOnRoaXMubmFtZSxtYXBwaW5nOnRoaXMubWFwcGluZyxyZXBlYXQ6W3RoaXMucmVwZWF0LngsdGhpcy5yZXBlYXQueV0sb2Zmc2V0Olt0aGlzLm9mZnNldC54LHRoaXMub2Zmc2V0LnldLGNlbnRlcjpbdGhpcy5jZW50ZXIueCx0aGlzLmNlbnRlci55XSxyb3RhdGlvbjp0aGlzLnJvdGF0aW9uLHdyYXA6W3RoaXMud3JhcFMsdGhpcy53cmFwVF0sbWluRmlsdGVyOnRoaXMubWluRmlsdGVyLG1hZ0ZpbHRlcjp0aGlzLm1hZ0ZpbHRlcixhbmlzb3Ryb3B5OnRoaXMuYW5pc290cm9weSxmbGlwWTp0aGlzLmZsaXBZfTtpZih2b2lkIDAhPT10aGlzLmltYWdlKXt2YXIgZD10aGlzLmltYWdlO3ZvaWQgMD09PWQudXVpZCYmKGQudXVpZD1RLmdlbmVyYXRlVVVJRCgpKTtcbiAgICBpZighYiYmdm9pZCAwPT09YS5pbWFnZXNbZC51dWlkXSl7dmFyIGU9YS5pbWFnZXMsZj1kLnV1aWQsZz1kLnV1aWQ7aWYoZCBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KXZhciBoPWQ7ZWxzZXtoPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIixcImNhbnZhc1wiKTtoLndpZHRoPWQud2lkdGg7aC5oZWlnaHQ9ZC5oZWlnaHQ7dmFyIGs9aC5nZXRDb250ZXh0KFwiMmRcIik7ZCBpbnN0YW5jZW9mIEltYWdlRGF0YT9rLnB1dEltYWdlRGF0YShkLDAsMCk6ay5kcmF3SW1hZ2UoZCwwLDAsZC53aWR0aCxkLmhlaWdodCl9aD0yMDQ4PGgud2lkdGh8fDIwNDg8aC5oZWlnaHQ/aC50b0RhdGFVUkwoXCJpbWFnZS9qcGVnXCIsLjYpOmgudG9EYXRhVVJMKFwiaW1hZ2UvcG5nXCIpO2VbZl09e3V1aWQ6Zyx1cmw6aH19Yy5pbWFnZT1kLnV1aWR9Ynx8KGEudGV4dHVyZXNbdGhpcy51dWlkXT1jKTtyZXR1cm4gY30sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImRpc3Bvc2VcIn0pfSxcbiAgICB0cmFuc2Zvcm1VdjpmdW5jdGlvbihhKXtpZigzMDA9PT10aGlzLm1hcHBpbmcpe2EuYXBwbHlNYXRyaXgzKHRoaXMubWF0cml4KTtpZigwPmEueHx8MTxhLngpc3dpdGNoKHRoaXMud3JhcFMpe2Nhc2UgMUUzOmEueC09TWF0aC5mbG9vcihhLngpO2JyZWFrO2Nhc2UgMTAwMTphLng9MD5hLng/MDoxO2JyZWFrO2Nhc2UgMTAwMjphLng9MT09PU1hdGguYWJzKE1hdGguZmxvb3IoYS54KSUyKT9NYXRoLmNlaWwoYS54KS1hLng6YS54LU1hdGguZmxvb3IoYS54KX1pZigwPmEueXx8MTxhLnkpc3dpdGNoKHRoaXMud3JhcFQpe2Nhc2UgMUUzOmEueS09TWF0aC5mbG9vcihhLnkpO2JyZWFrO2Nhc2UgMTAwMTphLnk9MD5hLnk/MDoxO2JyZWFrO2Nhc2UgMTAwMjphLnk9MT09PU1hdGguYWJzKE1hdGguZmxvb3IoYS55KSUyKT9NYXRoLmNlaWwoYS55KS1hLnk6YS55LU1hdGguZmxvb3IoYS55KX10aGlzLmZsaXBZJiYoYS55PTEtYS55KX19fSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KFUucHJvdG90eXBlLFxuICAgIFwibmVlZHNVcGRhdGVcIix7c2V0OmZ1bmN0aW9uKGEpeyEwPT09YSYmdGhpcy52ZXJzaW9uKyt9fSk7T2JqZWN0LmFzc2lnbihhYS5wcm90b3R5cGUse2lzVmVjdG9yNDohMCxzZXQ6ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy54PWE7dGhpcy55PWI7dGhpcy56PWM7dGhpcy53PWQ7cmV0dXJuIHRoaXN9LHNldFNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLnc9dGhpcy56PXRoaXMueT10aGlzLng9YTtyZXR1cm4gdGhpc30sc2V0WDpmdW5jdGlvbihhKXt0aGlzLng9YTtyZXR1cm4gdGhpc30sc2V0WTpmdW5jdGlvbihhKXt0aGlzLnk9YTtyZXR1cm4gdGhpc30sc2V0WjpmdW5jdGlvbihhKXt0aGlzLno9YTtyZXR1cm4gdGhpc30sc2V0VzpmdW5jdGlvbihhKXt0aGlzLnc9YTtyZXR1cm4gdGhpc30sc2V0Q29tcG9uZW50OmZ1bmN0aW9uKGEsYil7c3dpdGNoKGEpe2Nhc2UgMDp0aGlzLng9YjticmVhaztjYXNlIDE6dGhpcy55PWI7YnJlYWs7Y2FzZSAyOnRoaXMuej1iO2JyZWFrO2Nhc2UgMzp0aGlzLnc9XG4gICAgYjticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwiaW5kZXggaXMgb3V0IG9mIHJhbmdlOiBcIithKTt9cmV0dXJuIHRoaXN9LGdldENvbXBvbmVudDpmdW5jdGlvbihhKXtzd2l0Y2goYSl7Y2FzZSAwOnJldHVybiB0aGlzLng7Y2FzZSAxOnJldHVybiB0aGlzLnk7Y2FzZSAyOnJldHVybiB0aGlzLno7Y2FzZSAzOnJldHVybiB0aGlzLnc7ZGVmYXVsdDp0aHJvdyBFcnJvcihcImluZGV4IGlzIG91dCBvZiByYW5nZTogXCIrYSk7fX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy54LHRoaXMueSx0aGlzLnosdGhpcy53KX0sY29weTpmdW5jdGlvbihhKXt0aGlzLng9YS54O3RoaXMueT1hLnk7dGhpcy56PWEuejt0aGlzLnc9dm9pZCAwIT09YS53P2EudzoxO3JldHVybiB0aGlzfSxhZGQ6ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDAhPT1iKXJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3I0OiAuYWRkKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuYWRkVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLFxuICAgIHRoaXMuYWRkVmVjdG9ycyhhLGIpO3RoaXMueCs9YS54O3RoaXMueSs9YS55O3RoaXMueis9YS56O3RoaXMudys9YS53O3JldHVybiB0aGlzfSxhZGRTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy54Kz1hO3RoaXMueSs9YTt0aGlzLnorPWE7dGhpcy53Kz1hO3JldHVybiB0aGlzfSxhZGRWZWN0b3JzOmZ1bmN0aW9uKGEsYil7dGhpcy54PWEueCtiLng7dGhpcy55PWEueStiLnk7dGhpcy56PWEueitiLno7dGhpcy53PWEudytiLnc7cmV0dXJuIHRoaXN9LGFkZFNjYWxlZFZlY3RvcjpmdW5jdGlvbihhLGIpe3RoaXMueCs9YS54KmI7dGhpcy55Kz1hLnkqYjt0aGlzLnorPWEueipiO3RoaXMudys9YS53KmI7cmV0dXJuIHRoaXN9LHN1YjpmdW5jdGlvbihhLGIpe2lmKHZvaWQgMCE9PWIpcmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjQ6IC5zdWIoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5zdWJWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5zdWJWZWN0b3JzKGEsXG4gICAgYik7dGhpcy54LT1hLng7dGhpcy55LT1hLnk7dGhpcy56LT1hLno7dGhpcy53LT1hLnc7cmV0dXJuIHRoaXN9LHN1YlNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLngtPWE7dGhpcy55LT1hO3RoaXMuei09YTt0aGlzLnctPWE7cmV0dXJuIHRoaXN9LHN1YlZlY3RvcnM6ZnVuY3Rpb24oYSxiKXt0aGlzLng9YS54LWIueDt0aGlzLnk9YS55LWIueTt0aGlzLno9YS56LWIuejt0aGlzLnc9YS53LWIudztyZXR1cm4gdGhpc30sbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy54Kj1hO3RoaXMueSo9YTt0aGlzLnoqPWE7dGhpcy53Kj1hO3JldHVybiB0aGlzfSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy54LGM9dGhpcy55LGQ9dGhpcy56LGU9dGhpcy53O2E9YS5lbGVtZW50czt0aGlzLng9YVswXSpiK2FbNF0qYythWzhdKmQrYVsxMl0qZTt0aGlzLnk9YVsxXSpiK2FbNV0qYythWzldKmQrYVsxM10qZTt0aGlzLno9YVsyXSpiK2FbNl0qYythWzEwXSpkK2FbMTRdKlxuICAgIGU7dGhpcy53PWFbM10qYithWzddKmMrYVsxMV0qZCthWzE1XSplO3JldHVybiB0aGlzfSxkaXZpZGVTY2FsYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoMS9hKX0sc2V0QXhpc0FuZ2xlRnJvbVF1YXRlcm5pb246ZnVuY3Rpb24oYSl7dGhpcy53PTIqTWF0aC5hY29zKGEudyk7dmFyIGI9TWF0aC5zcXJ0KDEtYS53KmEudyk7MUUtND5iPyh0aGlzLng9MSx0aGlzLno9dGhpcy55PTApOih0aGlzLng9YS54L2IsdGhpcy55PWEueS9iLHRoaXMuej1hLnovYik7cmV0dXJuIHRoaXN9LHNldEF4aXNBbmdsZUZyb21Sb3RhdGlvbk1hdHJpeDpmdW5jdGlvbihhKXthPWEuZWxlbWVudHM7dmFyIGI9YVswXTt2YXIgYz1hWzRdO3ZhciBkPWFbOF0sZT1hWzFdLGY9YVs1XSxnPWFbOV07dmFyIGg9YVsyXTt2YXIgaz1hWzZdO3ZhciBtPWFbMTBdO2lmKC4wMT5NYXRoLmFicyhjLWUpJiYuMDE+TWF0aC5hYnMoZC1oKSYmLjAxPk1hdGguYWJzKGctaykpe2lmKC4xPk1hdGguYWJzKGMrXG4gICAgZSkmJi4xPk1hdGguYWJzKGQraCkmJi4xPk1hdGguYWJzKGcraykmJi4xPk1hdGguYWJzKGIrZittLTMpKXJldHVybiB0aGlzLnNldCgxLDAsMCwwKSx0aGlzO2E9TWF0aC5QSTtiPShiKzEpLzI7Zj0oZisxKS8yO209KG0rMSkvMjtjPShjK2UpLzQ7ZD0oZCtoKS80O2c9KGcraykvNDtiPmYmJmI+bT8uMDE+Yj8oaz0wLGM9aD0uNzA3MTA2NzgxKTooaz1NYXRoLnNxcnQoYiksaD1jL2ssYz1kL2spOmY+bT8uMDE+Zj8oaz0uNzA3MTA2NzgxLGg9MCxjPS43MDcxMDY3ODEpOihoPU1hdGguc3FydChmKSxrPWMvaCxjPWcvaCk6LjAxPm0/KGg9az0uNzA3MTA2NzgxLGM9MCk6KGM9TWF0aC5zcXJ0KG0pLGs9ZC9jLGg9Zy9jKTt0aGlzLnNldChrLGgsYyxhKTtyZXR1cm4gdGhpc31hPU1hdGguc3FydCgoay1nKSooay1nKSsoZC1oKSooZC1oKSsoZS1jKSooZS1jKSk7LjAwMT5NYXRoLmFicyhhKSYmKGE9MSk7dGhpcy54PShrLWcpL2E7dGhpcy55PShkLWgpL2E7dGhpcy56PShlLWMpL2E7XG4gICAgdGhpcy53PU1hdGguYWNvcygoYitmK20tMSkvMik7cmV0dXJuIHRoaXN9LG1pbjpmdW5jdGlvbihhKXt0aGlzLng9TWF0aC5taW4odGhpcy54LGEueCk7dGhpcy55PU1hdGgubWluKHRoaXMueSxhLnkpO3RoaXMuej1NYXRoLm1pbih0aGlzLnosYS56KTt0aGlzLnc9TWF0aC5taW4odGhpcy53LGEudyk7cmV0dXJuIHRoaXN9LG1heDpmdW5jdGlvbihhKXt0aGlzLng9TWF0aC5tYXgodGhpcy54LGEueCk7dGhpcy55PU1hdGgubWF4KHRoaXMueSxhLnkpO3RoaXMuej1NYXRoLm1heCh0aGlzLnosYS56KTt0aGlzLnc9TWF0aC5tYXgodGhpcy53LGEudyk7cmV0dXJuIHRoaXN9LGNsYW1wOmZ1bmN0aW9uKGEsYil7dGhpcy54PU1hdGgubWF4KGEueCxNYXRoLm1pbihiLngsdGhpcy54KSk7dGhpcy55PU1hdGgubWF4KGEueSxNYXRoLm1pbihiLnksdGhpcy55KSk7dGhpcy56PU1hdGgubWF4KGEueixNYXRoLm1pbihiLnosdGhpcy56KSk7dGhpcy53PU1hdGgubWF4KGEudyxNYXRoLm1pbihiLncsXG4gICAgdGhpcy53KSk7cmV0dXJuIHRoaXN9LGNsYW1wU2NhbGFyOmZ1bmN0aW9uKCl7dmFyIGEsYjtyZXR1cm4gZnVuY3Rpb24oYyxkKXt2b2lkIDA9PT1hJiYoYT1uZXcgYWEsYj1uZXcgYWEpO2Euc2V0KGMsYyxjLGMpO2Iuc2V0KGQsZCxkLGQpO3JldHVybiB0aGlzLmNsYW1wKGEsYil9fSgpLGNsYW1wTGVuZ3RoOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5sZW5ndGgoKTtyZXR1cm4gdGhpcy5kaXZpZGVTY2FsYXIoY3x8MSkubXVsdGlwbHlTY2FsYXIoTWF0aC5tYXgoYSxNYXRoLm1pbihiLGMpKSl9LGZsb29yOmZ1bmN0aW9uKCl7dGhpcy54PU1hdGguZmxvb3IodGhpcy54KTt0aGlzLnk9TWF0aC5mbG9vcih0aGlzLnkpO3RoaXMuej1NYXRoLmZsb29yKHRoaXMueik7dGhpcy53PU1hdGguZmxvb3IodGhpcy53KTtyZXR1cm4gdGhpc30sY2VpbDpmdW5jdGlvbigpe3RoaXMueD1NYXRoLmNlaWwodGhpcy54KTt0aGlzLnk9TWF0aC5jZWlsKHRoaXMueSk7dGhpcy56PU1hdGguY2VpbCh0aGlzLnopO1xuICAgIHRoaXMudz1NYXRoLmNlaWwodGhpcy53KTtyZXR1cm4gdGhpc30scm91bmQ6ZnVuY3Rpb24oKXt0aGlzLng9TWF0aC5yb3VuZCh0aGlzLngpO3RoaXMueT1NYXRoLnJvdW5kKHRoaXMueSk7dGhpcy56PU1hdGgucm91bmQodGhpcy56KTt0aGlzLnc9TWF0aC5yb3VuZCh0aGlzLncpO3JldHVybiB0aGlzfSxyb3VuZFRvWmVybzpmdW5jdGlvbigpe3RoaXMueD0wPnRoaXMueD9NYXRoLmNlaWwodGhpcy54KTpNYXRoLmZsb29yKHRoaXMueCk7dGhpcy55PTA+dGhpcy55P01hdGguY2VpbCh0aGlzLnkpOk1hdGguZmxvb3IodGhpcy55KTt0aGlzLno9MD50aGlzLno/TWF0aC5jZWlsKHRoaXMueik6TWF0aC5mbG9vcih0aGlzLnopO3RoaXMudz0wPnRoaXMudz9NYXRoLmNlaWwodGhpcy53KTpNYXRoLmZsb29yKHRoaXMudyk7cmV0dXJuIHRoaXN9LG5lZ2F0ZTpmdW5jdGlvbigpe3RoaXMueD0tdGhpcy54O3RoaXMueT0tdGhpcy55O3RoaXMuej0tdGhpcy56O3RoaXMudz0tdGhpcy53O3JldHVybiB0aGlzfSxcbiAgICBkb3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMueCphLngrdGhpcy55KmEueSt0aGlzLnoqYS56K3RoaXMudyphLnd9LGxlbmd0aFNxOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueSt0aGlzLnoqdGhpcy56K3RoaXMudyp0aGlzLnd9LGxlbmd0aDpmdW5jdGlvbigpe3JldHVybiBNYXRoLnNxcnQodGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55K3RoaXMueip0aGlzLnordGhpcy53KnRoaXMudyl9LG1hbmhhdHRhbkxlbmd0aDpmdW5jdGlvbigpe3JldHVybiBNYXRoLmFicyh0aGlzLngpK01hdGguYWJzKHRoaXMueSkrTWF0aC5hYnModGhpcy56KStNYXRoLmFicyh0aGlzLncpfSxub3JtYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXZpZGVTY2FsYXIodGhpcy5sZW5ndGgoKXx8MSl9LHNldExlbmd0aDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5ub3JtYWxpemUoKS5tdWx0aXBseVNjYWxhcihhKX0sbGVycDpmdW5jdGlvbihhLGIpe3RoaXMueCs9XG4gICAgKGEueC10aGlzLngpKmI7dGhpcy55Kz0oYS55LXRoaXMueSkqYjt0aGlzLnorPShhLnotdGhpcy56KSpiO3RoaXMudys9KGEudy10aGlzLncpKmI7cmV0dXJuIHRoaXN9LGxlcnBWZWN0b3JzOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5zdWJWZWN0b3JzKGIsYSkubXVsdGlwbHlTY2FsYXIoYykuYWRkKGEpfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEueD09PXRoaXMueCYmYS55PT09dGhpcy55JiZhLno9PT10aGlzLnomJmEudz09PXRoaXMud30sZnJvbUFycmF5OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9MCk7dGhpcy54PWFbYl07dGhpcy55PWFbYisxXTt0aGlzLno9YVtiKzJdO3RoaXMudz1hW2IrM107cmV0dXJuIHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1hJiYoYT1bXSk7dm9pZCAwPT09YiYmKGI9MCk7YVtiXT10aGlzLng7YVtiKzFdPXRoaXMueTthW2IrMl09dGhpcy56O2FbYiszXT10aGlzLnc7cmV0dXJuIGF9LGZyb21CdWZmZXJBdHRyaWJ1dGU6ZnVuY3Rpb24oYSxcbiAgICBiLGMpe3ZvaWQgMCE9PWMmJmNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjQ6IG9mZnNldCBoYXMgYmVlbiByZW1vdmVkIGZyb20gLmZyb21CdWZmZXJBdHRyaWJ1dGUoKS5cIik7dGhpcy54PWEuZ2V0WChiKTt0aGlzLnk9YS5nZXRZKGIpO3RoaXMuej1hLmdldFooYik7dGhpcy53PWEuZ2V0VyhiKTtyZXR1cm4gdGhpc319KTtrYi5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHphLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOmtiLGlzV2ViR0xSZW5kZXJUYXJnZXQ6ITAsc2V0U2l6ZTpmdW5jdGlvbihhLGIpe2lmKHRoaXMud2lkdGghPT1hfHx0aGlzLmhlaWdodCE9PWIpdGhpcy53aWR0aD1hLHRoaXMuaGVpZ2h0PWIsdGhpcy5kaXNwb3NlKCk7dGhpcy52aWV3cG9ydC5zZXQoMCwwLGEsYik7dGhpcy5zY2lzc29yLnNldCgwLDAsYSxiKX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy53aWR0aD1cbiAgICBhLndpZHRoO3RoaXMuaGVpZ2h0PWEuaGVpZ2h0O3RoaXMudmlld3BvcnQuY29weShhLnZpZXdwb3J0KTt0aGlzLnRleHR1cmU9YS50ZXh0dXJlLmNsb25lKCk7dGhpcy5kZXB0aEJ1ZmZlcj1hLmRlcHRoQnVmZmVyO3RoaXMuc3RlbmNpbEJ1ZmZlcj1hLnN0ZW5jaWxCdWZmZXI7dGhpcy5kZXB0aFRleHR1cmU9YS5kZXB0aFRleHR1cmU7cmV0dXJuIHRoaXN9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJkaXNwb3NlXCJ9KX19KTtKYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShrYi5wcm90b3R5cGUpO0piLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1KYjtKYi5wcm90b3R5cGUuaXNXZWJHTFJlbmRlclRhcmdldEN1YmU9ITA7bGIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVS5wcm90b3R5cGUpO2xiLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1sYjtsYi5wcm90b3R5cGUuaXNEYXRhVGV4dHVyZT0hMDtkYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShVLnByb3RvdHlwZSk7XG4gICAgZGIucHJvdG90eXBlLmNvbnN0cnVjdG9yPWRiO2RiLnByb3RvdHlwZS5pc0N1YmVUZXh0dXJlPSEwO09iamVjdC5kZWZpbmVQcm9wZXJ0eShkYi5wcm90b3R5cGUsXCJpbWFnZXNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW1hZ2V9LHNldDpmdW5jdGlvbihhKXt0aGlzLmltYWdlPWF9fSk7dmFyIE5lPW5ldyBVLE9lPW5ldyBkYixJZT1bXSxLZT1bXSxNZT1uZXcgRmxvYXQzMkFycmF5KDE2KSxMZT1uZXcgRmxvYXQzMkFycmF5KDkpO1NlLnByb3RvdHlwZS5zZXRWYWx1ZT1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz10aGlzLnNlcSxkPTAsZT1jLmxlbmd0aDtkIT09ZTsrK2Qpe3ZhciBmPWNbZF07Zi5zZXRWYWx1ZShhLGJbZi5pZF0pfX07dmFyIFZkPS8oW1xcd1xcZF9dKykoXFxdKT8oXFxbfFxcLik/L2c7bWIucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKGEsYixjKXtiPXRoaXMubWFwW2JdO3ZvaWQgMCE9PWImJmIuc2V0VmFsdWUoYSxjLHRoaXMucmVuZGVyZXIpfTttYi5wcm90b3R5cGUuc2V0T3B0aW9uYWw9XG4gICAgZnVuY3Rpb24oYSxiLGMpe2I9YltjXTt2b2lkIDAhPT1iJiZ0aGlzLnNldFZhbHVlKGEsYyxiKX07bWIudXBsb2FkPWZ1bmN0aW9uKGEsYixjLGQpe2Zvcih2YXIgZT0wLGY9Yi5sZW5ndGg7ZSE9PWY7KytlKXt2YXIgZz1iW2VdLGg9Y1tnLmlkXTshMSE9PWgubmVlZHNVcGRhdGUmJmcuc2V0VmFsdWUoYSxoLnZhbHVlLGQpfX07bWIuc2VxV2l0aFZhbHVlPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPVtdLGQ9MCxlPWEubGVuZ3RoO2QhPT1lOysrZCl7dmFyIGY9YVtkXTtmLmlkIGluIGImJmMucHVzaChmKX1yZXR1cm4gY307dmFyIEtnPXthbGljZWJsdWU6MTU3OTIzODMsYW50aXF1ZXdoaXRlOjE2NDQ0Mzc1LGFxdWE6NjU1MzUsYXF1YW1hcmluZTo4Mzg4NTY0LGF6dXJlOjE1Nzk0MTc1LGJlaWdlOjE2MTE5MjYwLGJpc3F1ZToxNjc3MDI0NCxibGFjazowLGJsYW5jaGVkYWxtb25kOjE2NzcyMDQ1LGJsdWU6MjU1LGJsdWV2aW9sZXQ6OTA1NTIwMixicm93bjoxMDgyNDIzNCxidXJseXdvb2Q6MTQ1OTYyMzEsXG4gICAgY2FkZXRibHVlOjYyNjY1MjgsY2hhcnRyZXVzZTo4Mzg4MzUyLGNob2NvbGF0ZToxMzc4OTQ3MCxjb3JhbDoxNjc0NDI3Mixjb3JuZmxvd2VyYmx1ZTo2NTkxOTgxLGNvcm5zaWxrOjE2Nzc1Mzg4LGNyaW1zb246MTQ0MjMxMDAsY3lhbjo2NTUzNSxkYXJrYmx1ZToxMzksZGFya2N5YW46MzU3MjMsZGFya2dvbGRlbnJvZDoxMjA5MjkzOSxkYXJrZ3JheToxMTExOTAxNyxkYXJrZ3JlZW46MjU2MDAsZGFya2dyZXk6MTExMTkwMTcsZGFya2toYWtpOjEyNDMzMjU5LGRhcmttYWdlbnRhOjkxMDk2NDMsZGFya29saXZlZ3JlZW46NTU5Nzk5OSxkYXJrb3JhbmdlOjE2NzQ3NTIwLGRhcmtvcmNoaWQ6MTAwNDAwMTIsZGFya3JlZDo5MTA5NTA0LGRhcmtzYWxtb246MTUzMDg0MTAsZGFya3NlYWdyZWVuOjk0MTk5MTksZGFya3NsYXRlYmx1ZTo0NzM0MzQ3LGRhcmtzbGF0ZWdyYXk6MzEwMDQ5NSxkYXJrc2xhdGVncmV5OjMxMDA0OTUsZGFya3R1cnF1b2lzZTo1Mjk0NSxkYXJrdmlvbGV0Ojk2OTk1MzksXG4gICAgZGVlcHBpbms6MTY3MTY5NDcsZGVlcHNreWJsdWU6NDkxNTEsZGltZ3JheTo2OTA4MjY1LGRpbWdyZXk6NjkwODI2NSxkb2RnZXJibHVlOjIwMDMxOTksZmlyZWJyaWNrOjExNjc0MTQ2LGZsb3JhbHdoaXRlOjE2Nzc1OTIwLGZvcmVzdGdyZWVuOjIyNjM4NDIsZnVjaHNpYToxNjcxMTkzNSxnYWluc2Jvcm86MTQ0NzQ0NjAsZ2hvc3R3aGl0ZToxNjMxNjY3MSxnb2xkOjE2NzY2NzIwLGdvbGRlbnJvZDoxNDMyOTEyMCxncmF5Ojg0MjE1MDQsZ3JlZW46MzI3NjgsZ3JlZW55ZWxsb3c6MTE0MDMwNTUsZ3JleTo4NDIxNTA0LGhvbmV5ZGV3OjE1Nzk0MTYwLGhvdHBpbms6MTY3Mzg3NDAsaW5kaWFucmVkOjEzNDU4NTI0LGluZGlnbzo0OTE1MzMwLGl2b3J5OjE2Nzc3MjAwLGtoYWtpOjE1Nzg3NjYwLGxhdmVuZGVyOjE1MTMyNDEwLGxhdmVuZGVyYmx1c2g6MTY3NzMzNjUsbGF3bmdyZWVuOjgxOTA5NzYsbGVtb25jaGlmZm9uOjE2Nzc1ODg1LGxpZ2h0Ymx1ZToxMTM5MzI1NCxsaWdodGNvcmFsOjE1NzYxNTM2LFxuICAgIGxpZ2h0Y3lhbjoxNDc0NTU5OSxsaWdodGdvbGRlbnJvZHllbGxvdzoxNjQ0ODIxMCxsaWdodGdyYXk6MTM4ODIzMjMsbGlnaHRncmVlbjo5NDk4MjU2LGxpZ2h0Z3JleToxMzg4MjMyMyxsaWdodHBpbms6MTY3NTg0NjUsbGlnaHRzYWxtb246MTY3NTI3NjIsbGlnaHRzZWFncmVlbjoyMTQyODkwLGxpZ2h0c2t5Ymx1ZTo4OTAwMzQ2LGxpZ2h0c2xhdGVncmF5Ojc4MzM3NTMsbGlnaHRzbGF0ZWdyZXk6NzgzMzc1MyxsaWdodHN0ZWVsYmx1ZToxMTU4NDczNCxsaWdodHllbGxvdzoxNjc3NzE4NCxsaW1lOjY1MjgwLGxpbWVncmVlbjozMzI5MzMwLGxpbmVuOjE2NDQ1NjcwLG1hZ2VudGE6MTY3MTE5MzUsbWFyb29uOjgzODg2MDgsbWVkaXVtYXF1YW1hcmluZTo2NzM3MzIyLG1lZGl1bWJsdWU6MjA1LG1lZGl1bW9yY2hpZDoxMjIxMTY2NyxtZWRpdW1wdXJwbGU6OTY2MjY4MyxtZWRpdW1zZWFncmVlbjozOTc4MDk3LG1lZGl1bXNsYXRlYmx1ZTo4MDg3NzkwLG1lZGl1bXNwcmluZ2dyZWVuOjY0MTU0LFxuICAgIG1lZGl1bXR1cnF1b2lzZTo0NzcyMzAwLG1lZGl1bXZpb2xldHJlZDoxMzA0NzE3MyxtaWRuaWdodGJsdWU6MTY0NDkxMixtaW50Y3JlYW06MTYxMjE4NTAsbWlzdHlyb3NlOjE2NzcwMjczLG1vY2Nhc2luOjE2NzcwMjI5LG5hdmFqb3doaXRlOjE2NzY4Njg1LG5hdnk6MTI4LG9sZGxhY2U6MTY2NDM1NTgsb2xpdmU6ODQyMTM3NixvbGl2ZWRyYWI6NzA0ODczOSxvcmFuZ2U6MTY3NTM5MjAsb3JhbmdlcmVkOjE2NzI5MzQ0LG9yY2hpZDoxNDMxNTczNCxwYWxlZ29sZGVucm9kOjE1NjU3MTMwLHBhbGVncmVlbjoxMDAyNTg4MCxwYWxldHVycXVvaXNlOjExNTI5OTY2LHBhbGV2aW9sZXRyZWQ6MTQzODEyMDMscGFwYXlhd2hpcDoxNjc3MzA3NyxwZWFjaHB1ZmY6MTY3Njc2NzMscGVydToxMzQ2ODk5MSxwaW5rOjE2NzYxMDM1LHBsdW06MTQ1MjQ2MzcscG93ZGVyYmx1ZToxMTU5MTkxMCxwdXJwbGU6ODM4ODczNixyZWJlY2NhcHVycGxlOjY2OTc4ODEscmVkOjE2NzExNjgwLHJvc3licm93bjoxMjM1NzUxOSxcbiAgICByb3lhbGJsdWU6NDI4Njk0NSxzYWRkbGVicm93bjo5MTI3MTg3LHNhbG1vbjoxNjQxNjg4MixzYW5keWJyb3duOjE2MDMyODY0LHNlYWdyZWVuOjMwNTAzMjcsc2Vhc2hlbGw6MTY3NzQ2Mzgsc2llbm5hOjEwNTA2Nzk3LHNpbHZlcjoxMjYzMjI1Nixza3libHVlOjg5MDAzMzEsc2xhdGVibHVlOjY5NzAwNjEsc2xhdGVncmF5OjczNzI5NDQsc2xhdGVncmV5OjczNzI5NDQsc25vdzoxNjc3NTkzMCxzcHJpbmdncmVlbjo2NTQwNyxzdGVlbGJsdWU6NDYyMDk4MCx0YW46MTM4MDg3ODAsdGVhbDozMjg5Nix0aGlzdGxlOjE0MjA0ODg4LHRvbWF0bzoxNjczNzA5NSx0dXJxdW9pc2U6NDI1MTg1Nix2aW9sZXQ6MTU2MzEwODYsd2hlYXQ6MTYxMTMzMzEsd2hpdGU6MTY3NzcyMTUsd2hpdGVzbW9rZToxNjExOTI4NSx5ZWxsb3c6MTY3NzY5NjAseWVsbG93Z3JlZW46MTAxNDUwNzR9O09iamVjdC5hc3NpZ24oSC5wcm90b3R5cGUse2lzQ29sb3I6ITAscjoxLGc6MSxiOjEsc2V0OmZ1bmN0aW9uKGEpe2EmJlxuICAgIGEuaXNDb2xvcj90aGlzLmNvcHkoYSk6XCJudW1iZXJcIj09PXR5cGVvZiBhP3RoaXMuc2V0SGV4KGEpOlwic3RyaW5nXCI9PT10eXBlb2YgYSYmdGhpcy5zZXRTdHlsZShhKTtyZXR1cm4gdGhpc30sc2V0U2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMuYj10aGlzLmc9dGhpcy5yPWE7cmV0dXJuIHRoaXN9LHNldEhleDpmdW5jdGlvbihhKXthPU1hdGguZmxvb3IoYSk7dGhpcy5yPShhPj4xNiYyNTUpLzI1NTt0aGlzLmc9KGE+PjgmMjU1KS8yNTU7dGhpcy5iPShhJjI1NSkvMjU1O3JldHVybiB0aGlzfSxzZXRSR0I6ZnVuY3Rpb24oYSxiLGMpe3RoaXMucj1hO3RoaXMuZz1iO3RoaXMuYj1jO3JldHVybiB0aGlzfSxzZXRIU0w6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYyxkKXswPmQmJihkKz0xKTsxPGQmJi0tZDtyZXR1cm4gZDwxLzY/YSs2KihjLWEpKmQ6LjU+ZD9jOmQ8Mi8zP2ErNiooYy1hKSooMi8zLWQpOmF9cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXtiPVEuZXVjbGlkZWFuTW9kdWxvKGIsXG4gICAgMSk7Yz1RLmNsYW1wKGMsMCwxKTtkPVEuY2xhbXAoZCwwLDEpOzA9PT1jP3RoaXMucj10aGlzLmc9dGhpcy5iPWQ6KGM9LjU+PWQ/ZCooMStjKTpkK2MtZCpjLGQ9MipkLWMsdGhpcy5yPWEoZCxjLGIrMS8zKSx0aGlzLmc9YShkLGMsYiksdGhpcy5iPWEoZCxjLGItMS8zKSk7cmV0dXJuIHRoaXN9fSgpLHNldFN0eWxlOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYil7dm9pZCAwIT09YiYmMT5wYXJzZUZsb2F0KGIpJiZjb25zb2xlLndhcm4oXCJUSFJFRS5Db2xvcjogQWxwaGEgY29tcG9uZW50IG9mIFwiK2ErXCIgd2lsbCBiZSBpZ25vcmVkLlwiKX12YXIgYztpZihjPS9eKCg/OnJnYnxoc2wpYT8pXFwoXFxzKihbXlxcKV0qKVxcKS8uZXhlYyhhKSl7dmFyIGQ9Y1syXTtzd2l0Y2goY1sxXSl7Y2FzZSBcInJnYlwiOmNhc2UgXCJyZ2JhXCI6aWYoYz0vXihcXGQrKVxccyosXFxzKihcXGQrKVxccyosXFxzKihcXGQrKVxccyooLFxccyooWzAtOV0qXFwuP1swLTldKylcXHMqKT8kLy5leGVjKGQpKXJldHVybiB0aGlzLnI9TWF0aC5taW4oMjU1LFxuICAgIHBhcnNlSW50KGNbMV0sMTApKS8yNTUsdGhpcy5nPU1hdGgubWluKDI1NSxwYXJzZUludChjWzJdLDEwKSkvMjU1LHRoaXMuYj1NYXRoLm1pbigyNTUscGFyc2VJbnQoY1szXSwxMCkpLzI1NSxiKGNbNV0pLHRoaXM7aWYoYz0vXihcXGQrKVxcJVxccyosXFxzKihcXGQrKVxcJVxccyosXFxzKihcXGQrKVxcJVxccyooLFxccyooWzAtOV0qXFwuP1swLTldKylcXHMqKT8kLy5leGVjKGQpKXJldHVybiB0aGlzLnI9TWF0aC5taW4oMTAwLHBhcnNlSW50KGNbMV0sMTApKS8xMDAsdGhpcy5nPU1hdGgubWluKDEwMCxwYXJzZUludChjWzJdLDEwKSkvMTAwLHRoaXMuYj1NYXRoLm1pbigxMDAscGFyc2VJbnQoY1szXSwxMCkpLzEwMCxiKGNbNV0pLHRoaXM7YnJlYWs7Y2FzZSBcImhzbFwiOmNhc2UgXCJoc2xhXCI6aWYoYz0vXihbMC05XSpcXC4/WzAtOV0rKVxccyosXFxzKihcXGQrKVxcJVxccyosXFxzKihcXGQrKVxcJVxccyooLFxccyooWzAtOV0qXFwuP1swLTldKylcXHMqKT8kLy5leGVjKGQpKXt2YXIgZD1wYXJzZUZsb2F0KGNbMV0pLzM2MCxcbiAgICBlPXBhcnNlSW50KGNbMl0sMTApLzEwMCxmPXBhcnNlSW50KGNbM10sMTApLzEwMDtiKGNbNV0pO3JldHVybiB0aGlzLnNldEhTTChkLGUsZil9fX1lbHNlIGlmKGM9L15cXCMoW0EtRmEtZjAtOV0rKSQvLmV4ZWMoYSkpe2M9Y1sxXTtkPWMubGVuZ3RoO2lmKDM9PT1kKXJldHVybiB0aGlzLnI9cGFyc2VJbnQoYy5jaGFyQXQoMCkrYy5jaGFyQXQoMCksMTYpLzI1NSx0aGlzLmc9cGFyc2VJbnQoYy5jaGFyQXQoMSkrYy5jaGFyQXQoMSksMTYpLzI1NSx0aGlzLmI9cGFyc2VJbnQoYy5jaGFyQXQoMikrYy5jaGFyQXQoMiksMTYpLzI1NSx0aGlzO2lmKDY9PT1kKXJldHVybiB0aGlzLnI9cGFyc2VJbnQoYy5jaGFyQXQoMCkrYy5jaGFyQXQoMSksMTYpLzI1NSx0aGlzLmc9cGFyc2VJbnQoYy5jaGFyQXQoMikrYy5jaGFyQXQoMyksMTYpLzI1NSx0aGlzLmI9cGFyc2VJbnQoYy5jaGFyQXQoNCkrYy5jaGFyQXQoNSksMTYpLzI1NSx0aGlzfWEmJjA8YS5sZW5ndGgmJihjPUtnW2FdLHZvaWQgMCE9PVxuICAgIGM/dGhpcy5zZXRIZXgoYyk6Y29uc29sZS53YXJuKFwiVEhSRUUuQ29sb3I6IFVua25vd24gY29sb3IgXCIrYSkpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLnIsdGhpcy5nLHRoaXMuYil9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5yPWEucjt0aGlzLmc9YS5nO3RoaXMuYj1hLmI7cmV0dXJuIHRoaXN9LGNvcHlHYW1tYVRvTGluZWFyOmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9Mik7dGhpcy5yPU1hdGgucG93KGEucixiKTt0aGlzLmc9TWF0aC5wb3coYS5nLGIpO3RoaXMuYj1NYXRoLnBvdyhhLmIsYik7cmV0dXJuIHRoaXN9LGNvcHlMaW5lYXJUb0dhbW1hOmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9Mik7Yj0wPGI/MS9iOjE7dGhpcy5yPU1hdGgucG93KGEucixiKTt0aGlzLmc9TWF0aC5wb3coYS5nLGIpO3RoaXMuYj1NYXRoLnBvdyhhLmIsYik7cmV0dXJuIHRoaXN9LGNvbnZlcnRHYW1tYVRvTGluZWFyOmZ1bmN0aW9uKCl7dmFyIGE9XG4gICAgdGhpcy5yLGI9dGhpcy5nLGM9dGhpcy5iO3RoaXMucj1hKmE7dGhpcy5nPWIqYjt0aGlzLmI9YypjO3JldHVybiB0aGlzfSxjb252ZXJ0TGluZWFyVG9HYW1tYTpmdW5jdGlvbigpe3RoaXMucj1NYXRoLnNxcnQodGhpcy5yKTt0aGlzLmc9TWF0aC5zcXJ0KHRoaXMuZyk7dGhpcy5iPU1hdGguc3FydCh0aGlzLmIpO3JldHVybiB0aGlzfSxnZXRIZXg6ZnVuY3Rpb24oKXtyZXR1cm4gMjU1KnRoaXMucjw8MTZeMjU1KnRoaXMuZzw8OF4yNTUqdGhpcy5iPDwwfSxnZXRIZXhTdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4oXCIwMDAwMDBcIit0aGlzLmdldEhleCgpLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTYpfSxnZXRIU0w6ZnVuY3Rpb24oYSl7YT1hfHx7aDowLHM6MCxsOjB9O3ZhciBiPXRoaXMucixjPXRoaXMuZyxkPXRoaXMuYixlPU1hdGgubWF4KGIsYyxkKSxmPU1hdGgubWluKGIsYyxkKSxnLGg9KGYrZSkvMjtpZihmPT09ZSlmPWc9MDtlbHNle3ZhciBrPWUtZixmPS41Pj1oP2svKGUrZik6XG4gICAgay8oMi1lLWYpO3N3aXRjaChlKXtjYXNlIGI6Zz0oYy1kKS9rKyhjPGQ/NjowKTticmVhaztjYXNlIGM6Zz0oZC1iKS9rKzI7YnJlYWs7Y2FzZSBkOmc9KGItYykvays0fWcvPTZ9YS5oPWc7YS5zPWY7YS5sPWg7cmV0dXJuIGF9LGdldFN0eWxlOmZ1bmN0aW9uKCl7cmV0dXJuXCJyZ2IoXCIrKDI1NSp0aGlzLnJ8MCkrXCIsXCIrKDI1NSp0aGlzLmd8MCkrXCIsXCIrKDI1NSp0aGlzLmJ8MCkrXCIpXCJ9LG9mZnNldEhTTDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5nZXRIU0woKTtkLmgrPWE7ZC5zKz1iO2QubCs9Yzt0aGlzLnNldEhTTChkLmgsZC5zLGQubCk7cmV0dXJuIHRoaXN9LGFkZDpmdW5jdGlvbihhKXt0aGlzLnIrPWEucjt0aGlzLmcrPWEuZzt0aGlzLmIrPWEuYjtyZXR1cm4gdGhpc30sYWRkQ29sb3JzOmZ1bmN0aW9uKGEsYil7dGhpcy5yPWEucitiLnI7dGhpcy5nPWEuZytiLmc7dGhpcy5iPWEuYitiLmI7cmV0dXJuIHRoaXN9LGFkZFNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLnIrPVxuICAgIGE7dGhpcy5nKz1hO3RoaXMuYis9YTtyZXR1cm4gdGhpc30sc3ViOmZ1bmN0aW9uKGEpe3RoaXMucj1NYXRoLm1heCgwLHRoaXMuci1hLnIpO3RoaXMuZz1NYXRoLm1heCgwLHRoaXMuZy1hLmcpO3RoaXMuYj1NYXRoLm1heCgwLHRoaXMuYi1hLmIpO3JldHVybiB0aGlzfSxtdWx0aXBseTpmdW5jdGlvbihhKXt0aGlzLnIqPWEucjt0aGlzLmcqPWEuZzt0aGlzLmIqPWEuYjtyZXR1cm4gdGhpc30sbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy5yKj1hO3RoaXMuZyo9YTt0aGlzLmIqPWE7cmV0dXJuIHRoaXN9LGxlcnA6ZnVuY3Rpb24oYSxiKXt0aGlzLnIrPShhLnItdGhpcy5yKSpiO3RoaXMuZys9KGEuZy10aGlzLmcpKmI7dGhpcy5iKz0oYS5iLXRoaXMuYikqYjtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLnI9PT10aGlzLnImJmEuZz09PXRoaXMuZyYmYS5iPT09dGhpcy5ifSxmcm9tQXJyYXk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj1cbiAgICAwKTt0aGlzLnI9YVtiXTt0aGlzLmc9YVtiKzFdO3RoaXMuYj1hW2IrMl07cmV0dXJuIHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1hJiYoYT1bXSk7dm9pZCAwPT09YiYmKGI9MCk7YVtiXT10aGlzLnI7YVtiKzFdPXRoaXMuZzthW2IrMl09dGhpcy5iO3JldHVybiBhfSx0b0pTT046ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRIZXgoKX19KTt2YXIgSz17Y29tbW9uOntkaWZmdXNlOnt2YWx1ZTpuZXcgSCgxNTY1ODczNCl9LG9wYWNpdHk6e3ZhbHVlOjF9LG1hcDp7dmFsdWU6bnVsbH0sdXZUcmFuc2Zvcm06e3ZhbHVlOm5ldyBtYX0sYWxwaGFNYXA6e3ZhbHVlOm51bGx9fSxzcGVjdWxhcm1hcDp7c3BlY3VsYXJNYXA6e3ZhbHVlOm51bGx9fSxlbnZtYXA6e2Vudk1hcDp7dmFsdWU6bnVsbH0sZmxpcEVudk1hcDp7dmFsdWU6LTF9LHJlZmxlY3Rpdml0eTp7dmFsdWU6MX0scmVmcmFjdGlvblJhdGlvOnt2YWx1ZTouOTh9fSxhb21hcDp7YW9NYXA6e3ZhbHVlOm51bGx9LFxuICAgIGFvTWFwSW50ZW5zaXR5Ont2YWx1ZToxfX0sbGlnaHRtYXA6e2xpZ2h0TWFwOnt2YWx1ZTpudWxsfSxsaWdodE1hcEludGVuc2l0eTp7dmFsdWU6MX19LGVtaXNzaXZlbWFwOntlbWlzc2l2ZU1hcDp7dmFsdWU6bnVsbH19LGJ1bXBtYXA6e2J1bXBNYXA6e3ZhbHVlOm51bGx9LGJ1bXBTY2FsZTp7dmFsdWU6MX19LG5vcm1hbG1hcDp7bm9ybWFsTWFwOnt2YWx1ZTpudWxsfSxub3JtYWxTY2FsZTp7dmFsdWU6bmV3IEQoMSwxKX19LGRpc3BsYWNlbWVudG1hcDp7ZGlzcGxhY2VtZW50TWFwOnt2YWx1ZTpudWxsfSxkaXNwbGFjZW1lbnRTY2FsZTp7dmFsdWU6MX0sZGlzcGxhY2VtZW50Qmlhczp7dmFsdWU6MH19LHJvdWdobmVzc21hcDp7cm91Z2huZXNzTWFwOnt2YWx1ZTpudWxsfX0sbWV0YWxuZXNzbWFwOnttZXRhbG5lc3NNYXA6e3ZhbHVlOm51bGx9fSxncmFkaWVudG1hcDp7Z3JhZGllbnRNYXA6e3ZhbHVlOm51bGx9fSxmb2c6e2ZvZ0RlbnNpdHk6e3ZhbHVlOjIuNUUtNH0sZm9nTmVhcjp7dmFsdWU6MX0sXG4gICAgZm9nRmFyOnt2YWx1ZToyRTN9LGZvZ0NvbG9yOnt2YWx1ZTpuZXcgSCgxNjc3NzIxNSl9fSxsaWdodHM6e2FtYmllbnRMaWdodENvbG9yOnt2YWx1ZTpbXX0sZGlyZWN0aW9uYWxMaWdodHM6e3ZhbHVlOltdLHByb3BlcnRpZXM6e2RpcmVjdGlvbjp7fSxjb2xvcjp7fSxzaGFkb3c6e30sc2hhZG93Qmlhczp7fSxzaGFkb3dSYWRpdXM6e30sc2hhZG93TWFwU2l6ZTp7fX19LGRpcmVjdGlvbmFsU2hhZG93TWFwOnt2YWx1ZTpbXX0sZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXg6e3ZhbHVlOltdfSxzcG90TGlnaHRzOnt2YWx1ZTpbXSxwcm9wZXJ0aWVzOntjb2xvcjp7fSxwb3NpdGlvbjp7fSxkaXJlY3Rpb246e30sZGlzdGFuY2U6e30sY29uZUNvczp7fSxwZW51bWJyYUNvczp7fSxkZWNheTp7fSxzaGFkb3c6e30sc2hhZG93Qmlhczp7fSxzaGFkb3dSYWRpdXM6e30sc2hhZG93TWFwU2l6ZTp7fX19LHNwb3RTaGFkb3dNYXA6e3ZhbHVlOltdfSxzcG90U2hhZG93TWF0cml4Ont2YWx1ZTpbXX0sXG4gICAgcG9pbnRMaWdodHM6e3ZhbHVlOltdLHByb3BlcnRpZXM6e2NvbG9yOnt9LHBvc2l0aW9uOnt9LGRlY2F5Ont9LGRpc3RhbmNlOnt9LHNoYWRvdzp7fSxzaGFkb3dCaWFzOnt9LHNoYWRvd1JhZGl1czp7fSxzaGFkb3dNYXBTaXplOnt9LHNoYWRvd0NhbWVyYU5lYXI6e30sc2hhZG93Q2FtZXJhRmFyOnt9fX0scG9pbnRTaGFkb3dNYXA6e3ZhbHVlOltdfSxwb2ludFNoYWRvd01hdHJpeDp7dmFsdWU6W119LGhlbWlzcGhlcmVMaWdodHM6e3ZhbHVlOltdLHByb3BlcnRpZXM6e2RpcmVjdGlvbjp7fSxza3lDb2xvcjp7fSxncm91bmRDb2xvcjp7fX19LHJlY3RBcmVhTGlnaHRzOnt2YWx1ZTpbXSxwcm9wZXJ0aWVzOntjb2xvcjp7fSxwb3NpdGlvbjp7fSx3aWR0aDp7fSxoZWlnaHQ6e319fX0scG9pbnRzOntkaWZmdXNlOnt2YWx1ZTpuZXcgSCgxNTY1ODczNCl9LG9wYWNpdHk6e3ZhbHVlOjF9LHNpemU6e3ZhbHVlOjF9LHNjYWxlOnt2YWx1ZToxfSxtYXA6e3ZhbHVlOm51bGx9LHV2VHJhbnNmb3JtOnt2YWx1ZTpuZXcgbWF9fX0sXG4gICAgR2E9e21lcmdlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj17fSxjPTA7YzxhLmxlbmd0aDtjKyspe3ZhciBkPXRoaXMuY2xvbmUoYVtjXSksZTtmb3IoZSBpbiBkKWJbZV09ZFtlXX1yZXR1cm4gYn0sY2xvbmU6ZnVuY3Rpb24oYSl7dmFyIGI9e30sYztmb3IoYyBpbiBhKXtiW2NdPXt9O2Zvcih2YXIgZCBpbiBhW2NdKXt2YXIgZT1hW2NdW2RdO2UmJihlLmlzQ29sb3J8fGUuaXNNYXRyaXgzfHxlLmlzTWF0cml4NHx8ZS5pc1ZlY3RvcjJ8fGUuaXNWZWN0b3IzfHxlLmlzVmVjdG9yNHx8ZS5pc1RleHR1cmUpP2JbY11bZF09ZS5jbG9uZSgpOkFycmF5LmlzQXJyYXkoZSk/YltjXVtkXT1lLnNsaWNlKCk6YltjXVtkXT1lfX1yZXR1cm4gYn19LFI9e2FscGhhbWFwX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9BTFBIQU1BUFxcblxcdGRpZmZ1c2VDb2xvci5hICo9IHRleHR1cmUyRCggYWxwaGFNYXAsIHZVdiApLmc7XFxuI2VuZGlmXFxuXCIsYWxwaGFtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfQUxQSEFNQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBhbHBoYU1hcDtcXG4jZW5kaWZcXG5cIixcbiAgICBhbHBoYXRlc3RfZnJhZ21lbnQ6XCIjaWZkZWYgQUxQSEFURVNUXFxuXFx0aWYgKCBkaWZmdXNlQ29sb3IuYSA8IEFMUEhBVEVTVCApIGRpc2NhcmQ7XFxuI2VuZGlmXFxuXCIsYW9tYXBfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0FPTUFQXFxuXFx0ZmxvYXQgYW1iaWVudE9jY2x1c2lvbiA9ICggdGV4dHVyZTJEKCBhb01hcCwgdlV2MiApLnIgLSAxLjAgKSAqIGFvTWFwSW50ZW5zaXR5ICsgMS4wO1xcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSAqPSBhbWJpZW50T2NjbHVzaW9uO1xcblxcdCNpZiBkZWZpbmVkKCBVU0VfRU5WTUFQICkgJiYgZGVmaW5lZCggUEhZU0lDQUwgKVxcblxcdFxcdGZsb2F0IGRvdE5WID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkubm9ybWFsLCBnZW9tZXRyeS52aWV3RGlyICkgKTtcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdFNwZWN1bGFyICo9IGNvbXB1dGVTcGVjdWxhck9jY2x1c2lvbiggZG90TlYsIGFtYmllbnRPY2NsdXNpb24sIG1hdGVyaWFsLnNwZWN1bGFyUm91Z2huZXNzICk7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXCIsXG4gICAgYW9tYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfQU9NQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBhb01hcDtcXG5cXHR1bmlmb3JtIGZsb2F0IGFvTWFwSW50ZW5zaXR5O1xcbiNlbmRpZlwiLGJlZ2luX3ZlcnRleDpcIlxcbnZlYzMgdHJhbnNmb3JtZWQgPSB2ZWMzKCBwb3NpdGlvbiApO1xcblwiLGJlZ2lubm9ybWFsX3ZlcnRleDpcIlxcbnZlYzMgb2JqZWN0Tm9ybWFsID0gdmVjMyggbm9ybWFsICk7XFxuXCIsYnNkZnM6XCJmbG9hdCBwdW5jdHVhbExpZ2h0SW50ZW5zaXR5VG9JcnJhZGlhbmNlRmFjdG9yKCBjb25zdCBpbiBmbG9hdCBsaWdodERpc3RhbmNlLCBjb25zdCBpbiBmbG9hdCBjdXRvZmZEaXN0YW5jZSwgY29uc3QgaW4gZmxvYXQgZGVjYXlFeHBvbmVudCApIHtcXG5cXHRpZiggZGVjYXlFeHBvbmVudCA+IDAuMCApIHtcXG4jaWYgZGVmaW5lZCAoIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFMgKVxcblxcdFxcdGZsb2F0IGRpc3RhbmNlRmFsbG9mZiA9IDEuMCAvIG1heCggcG93KCBsaWdodERpc3RhbmNlLCBkZWNheUV4cG9uZW50ICksIDAuMDEgKTtcXG5cXHRcXHRmbG9hdCBtYXhEaXN0YW5jZUN1dG9mZkZhY3RvciA9IHBvdzIoIHNhdHVyYXRlKCAxLjAgLSBwb3c0KCBsaWdodERpc3RhbmNlIC8gY3V0b2ZmRGlzdGFuY2UgKSApICk7XFxuXFx0XFx0cmV0dXJuIGRpc3RhbmNlRmFsbG9mZiAqIG1heERpc3RhbmNlQ3V0b2ZmRmFjdG9yO1xcbiNlbHNlXFxuXFx0XFx0cmV0dXJuIHBvdyggc2F0dXJhdGUoIC1saWdodERpc3RhbmNlIC8gY3V0b2ZmRGlzdGFuY2UgKyAxLjAgKSwgZGVjYXlFeHBvbmVudCApO1xcbiNlbmRpZlxcblxcdH1cXG5cXHRyZXR1cm4gMS4wO1xcbn1cXG52ZWMzIEJSREZfRGlmZnVzZV9MYW1iZXJ0KCBjb25zdCBpbiB2ZWMzIGRpZmZ1c2VDb2xvciApIHtcXG5cXHRyZXR1cm4gUkVDSVBST0NBTF9QSSAqIGRpZmZ1c2VDb2xvcjtcXG59XFxudmVjMyBGX1NjaGxpY2soIGNvbnN0IGluIHZlYzMgc3BlY3VsYXJDb2xvciwgY29uc3QgaW4gZmxvYXQgZG90TEggKSB7XFxuXFx0ZmxvYXQgZnJlc25lbCA9IGV4cDIoICggLTUuNTU0NzMgKiBkb3RMSCAtIDYuOTgzMTYgKSAqIGRvdExIICk7XFxuXFx0cmV0dXJuICggMS4wIC0gc3BlY3VsYXJDb2xvciApICogZnJlc25lbCArIHNwZWN1bGFyQ29sb3I7XFxufVxcbmZsb2F0IEdfR0dYX1NtaXRoKCBjb25zdCBpbiBmbG9hdCBhbHBoYSwgY29uc3QgaW4gZmxvYXQgZG90TkwsIGNvbnN0IGluIGZsb2F0IGRvdE5WICkge1xcblxcdGZsb2F0IGEyID0gcG93MiggYWxwaGEgKTtcXG5cXHRmbG9hdCBnbCA9IGRvdE5MICsgc3FydCggYTIgKyAoIDEuMCAtIGEyICkgKiBwb3cyKCBkb3ROTCApICk7XFxuXFx0ZmxvYXQgZ3YgPSBkb3ROViArIHNxcnQoIGEyICsgKCAxLjAgLSBhMiApICogcG93MiggZG90TlYgKSApO1xcblxcdHJldHVybiAxLjAgLyAoIGdsICogZ3YgKTtcXG59XFxuZmxvYXQgR19HR1hfU21pdGhDb3JyZWxhdGVkKCBjb25zdCBpbiBmbG9hdCBhbHBoYSwgY29uc3QgaW4gZmxvYXQgZG90TkwsIGNvbnN0IGluIGZsb2F0IGRvdE5WICkge1xcblxcdGZsb2F0IGEyID0gcG93MiggYWxwaGEgKTtcXG5cXHRmbG9hdCBndiA9IGRvdE5MICogc3FydCggYTIgKyAoIDEuMCAtIGEyICkgKiBwb3cyKCBkb3ROViApICk7XFxuXFx0ZmxvYXQgZ2wgPSBkb3ROViAqIHNxcnQoIGEyICsgKCAxLjAgLSBhMiApICogcG93MiggZG90TkwgKSApO1xcblxcdHJldHVybiAwLjUgLyBtYXgoIGd2ICsgZ2wsIEVQU0lMT04gKTtcXG59XFxuZmxvYXQgRF9HR1goIGNvbnN0IGluIGZsb2F0IGFscGhhLCBjb25zdCBpbiBmbG9hdCBkb3ROSCApIHtcXG5cXHRmbG9hdCBhMiA9IHBvdzIoIGFscGhhICk7XFxuXFx0ZmxvYXQgZGVub20gPSBwb3cyKCBkb3ROSCApICogKCBhMiAtIDEuMCApICsgMS4wO1xcblxcdHJldHVybiBSRUNJUFJPQ0FMX1BJICogYTIgLyBwb3cyKCBkZW5vbSApO1xcbn1cXG52ZWMzIEJSREZfU3BlY3VsYXJfR0dYKCBjb25zdCBpbiBJbmNpZGVudExpZ2h0IGluY2lkZW50TGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIHZlYzMgc3BlY3VsYXJDb2xvciwgY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzICkge1xcblxcdGZsb2F0IGFscGhhID0gcG93Miggcm91Z2huZXNzICk7XFxuXFx0dmVjMyBoYWxmRGlyID0gbm9ybWFsaXplKCBpbmNpZGVudExpZ2h0LmRpcmVjdGlvbiArIGdlb21ldHJ5LnZpZXdEaXIgKTtcXG5cXHRmbG9hdCBkb3ROTCA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgaW5jaWRlbnRMaWdodC5kaXJlY3Rpb24gKSApO1xcblxcdGZsb2F0IGRvdE5WID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkubm9ybWFsLCBnZW9tZXRyeS52aWV3RGlyICkgKTtcXG5cXHRmbG9hdCBkb3ROSCA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgaGFsZkRpciApICk7XFxuXFx0ZmxvYXQgZG90TEggPSBzYXR1cmF0ZSggZG90KCBpbmNpZGVudExpZ2h0LmRpcmVjdGlvbiwgaGFsZkRpciApICk7XFxuXFx0dmVjMyBGID0gRl9TY2hsaWNrKCBzcGVjdWxhckNvbG9yLCBkb3RMSCApO1xcblxcdGZsb2F0IEcgPSBHX0dHWF9TbWl0aENvcnJlbGF0ZWQoIGFscGhhLCBkb3ROTCwgZG90TlYgKTtcXG5cXHRmbG9hdCBEID0gRF9HR1goIGFscGhhLCBkb3ROSCApO1xcblxcdHJldHVybiBGICogKCBHICogRCApO1xcbn1cXG52ZWMyIExUQ19VdiggY29uc3QgaW4gdmVjMyBOLCBjb25zdCBpbiB2ZWMzIFYsIGNvbnN0IGluIGZsb2F0IHJvdWdobmVzcyApIHtcXG5cXHRjb25zdCBmbG9hdCBMVVRfU0laRSAgPSA2NC4wO1xcblxcdGNvbnN0IGZsb2F0IExVVF9TQ0FMRSA9ICggTFVUX1NJWkUgLSAxLjAgKSAvIExVVF9TSVpFO1xcblxcdGNvbnN0IGZsb2F0IExVVF9CSUFTICA9IDAuNSAvIExVVF9TSVpFO1xcblxcdGZsb2F0IHRoZXRhID0gYWNvcyggZG90KCBOLCBWICkgKTtcXG5cXHR2ZWMyIHV2ID0gdmVjMihcXG5cXHRcXHRzcXJ0KCBzYXR1cmF0ZSggcm91Z2huZXNzICkgKSxcXG5cXHRcXHRzYXR1cmF0ZSggdGhldGEgLyAoIDAuNSAqIFBJICkgKSApO1xcblxcdHV2ID0gdXYgKiBMVVRfU0NBTEUgKyBMVVRfQklBUztcXG5cXHRyZXR1cm4gdXY7XFxufVxcbmZsb2F0IExUQ19DbGlwcGVkU3BoZXJlRm9ybUZhY3RvciggY29uc3QgaW4gdmVjMyBmICkge1xcblxcdGZsb2F0IGwgPSBsZW5ndGgoIGYgKTtcXG5cXHRyZXR1cm4gbWF4KCAoIGwgKiBsICsgZi56ICkgLyAoIGwgKyAxLjAgKSwgMC4wICk7XFxufVxcbnZlYzMgTFRDX0VkZ2VWZWN0b3JGb3JtRmFjdG9yKCBjb25zdCBpbiB2ZWMzIHYxLCBjb25zdCBpbiB2ZWMzIHYyICkge1xcblxcdGZsb2F0IHggPSBkb3QoIHYxLCB2MiApO1xcblxcdGZsb2F0IHkgPSBhYnMoIHggKTtcXG5cXHRmbG9hdCBhID0gMC44NjI2NyArICgwLjQ5Nzg4ICsgMC4wMTQzNiAqIHkgKSAqIHk7XFxuXFx0ZmxvYXQgYiA9IDMuNDUwNjggKyAoNC4xODgxNCArIHkpICogeTtcXG5cXHRmbG9hdCB2ID0gYSAvIGI7XFxuXFx0ZmxvYXQgdGhldGFfc2ludGhldGEgPSAoeCA+IDAuMCkgPyB2IDogMC41ICogaW52ZXJzZXNxcnQoIDEuMCAtIHggKiB4ICkgLSB2O1xcblxcdHJldHVybiBjcm9zcyggdjEsIHYyICkgKiB0aGV0YV9zaW50aGV0YTtcXG59XFxudmVjMyBMVENfRXZhbHVhdGUoIGNvbnN0IGluIHZlYzMgTiwgY29uc3QgaW4gdmVjMyBWLCBjb25zdCBpbiB2ZWMzIFAsIGNvbnN0IGluIG1hdDMgbUludiwgY29uc3QgaW4gdmVjMyByZWN0Q29vcmRzWyA0IF0gKSB7XFxuXFx0dmVjMyB2MSA9IHJlY3RDb29yZHNbIDEgXSAtIHJlY3RDb29yZHNbIDAgXTtcXG5cXHR2ZWMzIHYyID0gcmVjdENvb3Jkc1sgMyBdIC0gcmVjdENvb3Jkc1sgMCBdO1xcblxcdHZlYzMgbGlnaHROb3JtYWwgPSBjcm9zcyggdjEsIHYyICk7XFxuXFx0aWYoIGRvdCggbGlnaHROb3JtYWwsIFAgLSByZWN0Q29vcmRzWyAwIF0gKSA8IDAuMCApIHJldHVybiB2ZWMzKCAwLjAgKTtcXG5cXHR2ZWMzIFQxLCBUMjtcXG5cXHRUMSA9IG5vcm1hbGl6ZSggViAtIE4gKiBkb3QoIFYsIE4gKSApO1xcblxcdFQyID0gLSBjcm9zcyggTiwgVDEgKTtcXG5cXHRtYXQzIG1hdCA9IG1JbnYgKiB0cmFuc3Bvc2VNYXQzKCBtYXQzKCBUMSwgVDIsIE4gKSApO1xcblxcdHZlYzMgY29vcmRzWyA0IF07XFxuXFx0Y29vcmRzWyAwIF0gPSBtYXQgKiAoIHJlY3RDb29yZHNbIDAgXSAtIFAgKTtcXG5cXHRjb29yZHNbIDEgXSA9IG1hdCAqICggcmVjdENvb3Jkc1sgMSBdIC0gUCApO1xcblxcdGNvb3Jkc1sgMiBdID0gbWF0ICogKCByZWN0Q29vcmRzWyAyIF0gLSBQICk7XFxuXFx0Y29vcmRzWyAzIF0gPSBtYXQgKiAoIHJlY3RDb29yZHNbIDMgXSAtIFAgKTtcXG5cXHRjb29yZHNbIDAgXSA9IG5vcm1hbGl6ZSggY29vcmRzWyAwIF0gKTtcXG5cXHRjb29yZHNbIDEgXSA9IG5vcm1hbGl6ZSggY29vcmRzWyAxIF0gKTtcXG5cXHRjb29yZHNbIDIgXSA9IG5vcm1hbGl6ZSggY29vcmRzWyAyIF0gKTtcXG5cXHRjb29yZHNbIDMgXSA9IG5vcm1hbGl6ZSggY29vcmRzWyAzIF0gKTtcXG5cXHR2ZWMzIHZlY3RvckZvcm1GYWN0b3IgPSB2ZWMzKCAwLjAgKTtcXG5cXHR2ZWN0b3JGb3JtRmFjdG9yICs9IExUQ19FZGdlVmVjdG9yRm9ybUZhY3RvciggY29vcmRzWyAwIF0sIGNvb3Jkc1sgMSBdICk7XFxuXFx0dmVjdG9yRm9ybUZhY3RvciArPSBMVENfRWRnZVZlY3RvckZvcm1GYWN0b3IoIGNvb3Jkc1sgMSBdLCBjb29yZHNbIDIgXSApO1xcblxcdHZlY3RvckZvcm1GYWN0b3IgKz0gTFRDX0VkZ2VWZWN0b3JGb3JtRmFjdG9yKCBjb29yZHNbIDIgXSwgY29vcmRzWyAzIF0gKTtcXG5cXHR2ZWN0b3JGb3JtRmFjdG9yICs9IExUQ19FZGdlVmVjdG9yRm9ybUZhY3RvciggY29vcmRzWyAzIF0sIGNvb3Jkc1sgMCBdICk7XFxuXFx0dmVjMyByZXN1bHQgPSB2ZWMzKCBMVENfQ2xpcHBlZFNwaGVyZUZvcm1GYWN0b3IoIHZlY3RvckZvcm1GYWN0b3IgKSApO1xcblxcdHJldHVybiByZXN1bHQ7XFxufVxcbnZlYzMgQlJERl9TcGVjdWxhcl9HR1hfRW52aXJvbm1lbnQoIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIHZlYzMgc3BlY3VsYXJDb2xvciwgY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzICkge1xcblxcdGZsb2F0IGRvdE5WID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkubm9ybWFsLCBnZW9tZXRyeS52aWV3RGlyICkgKTtcXG5cXHRjb25zdCB2ZWM0IGMwID0gdmVjNCggLSAxLCAtIDAuMDI3NSwgLSAwLjU3MiwgMC4wMjIgKTtcXG5cXHRjb25zdCB2ZWM0IGMxID0gdmVjNCggMSwgMC4wNDI1LCAxLjA0LCAtIDAuMDQgKTtcXG5cXHR2ZWM0IHIgPSByb3VnaG5lc3MgKiBjMCArIGMxO1xcblxcdGZsb2F0IGEwMDQgPSBtaW4oIHIueCAqIHIueCwgZXhwMiggLSA5LjI4ICogZG90TlYgKSApICogci54ICsgci55O1xcblxcdHZlYzIgQUIgPSB2ZWMyKCAtMS4wNCwgMS4wNCApICogYTAwNCArIHIuenc7XFxuXFx0cmV0dXJuIHNwZWN1bGFyQ29sb3IgKiBBQi54ICsgQUIueTtcXG59XFxuZmxvYXQgR19CbGlublBob25nX0ltcGxpY2l0KCApIHtcXG5cXHRyZXR1cm4gMC4yNTtcXG59XFxuZmxvYXQgRF9CbGlublBob25nKCBjb25zdCBpbiBmbG9hdCBzaGluaW5lc3MsIGNvbnN0IGluIGZsb2F0IGRvdE5IICkge1xcblxcdHJldHVybiBSRUNJUFJPQ0FMX1BJICogKCBzaGluaW5lc3MgKiAwLjUgKyAxLjAgKSAqIHBvdyggZG90TkgsIHNoaW5pbmVzcyApO1xcbn1cXG52ZWMzIEJSREZfU3BlY3VsYXJfQmxpbm5QaG9uZyggY29uc3QgaW4gSW5jaWRlbnRMaWdodCBpbmNpZGVudExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiB2ZWMzIHNwZWN1bGFyQ29sb3IsIGNvbnN0IGluIGZsb2F0IHNoaW5pbmVzcyApIHtcXG5cXHR2ZWMzIGhhbGZEaXIgPSBub3JtYWxpemUoIGluY2lkZW50TGlnaHQuZGlyZWN0aW9uICsgZ2VvbWV0cnkudmlld0RpciApO1xcblxcdGZsb2F0IGRvdE5IID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkubm9ybWFsLCBoYWxmRGlyICkgKTtcXG5cXHRmbG9hdCBkb3RMSCA9IHNhdHVyYXRlKCBkb3QoIGluY2lkZW50TGlnaHQuZGlyZWN0aW9uLCBoYWxmRGlyICkgKTtcXG5cXHR2ZWMzIEYgPSBGX1NjaGxpY2soIHNwZWN1bGFyQ29sb3IsIGRvdExIICk7XFxuXFx0ZmxvYXQgRyA9IEdfQmxpbm5QaG9uZ19JbXBsaWNpdCggKTtcXG5cXHRmbG9hdCBEID0gRF9CbGlublBob25nKCBzaGluaW5lc3MsIGRvdE5IICk7XFxuXFx0cmV0dXJuIEYgKiAoIEcgKiBEICk7XFxufVxcbmZsb2F0IEdHWFJvdWdobmVzc1RvQmxpbm5FeHBvbmVudCggY29uc3QgaW4gZmxvYXQgZ2d4Um91Z2huZXNzICkge1xcblxcdHJldHVybiAoIDIuMCAvIHBvdzIoIGdneFJvdWdobmVzcyArIDAuMDAwMSApIC0gMi4wICk7XFxufVxcbmZsb2F0IEJsaW5uRXhwb25lbnRUb0dHWFJvdWdobmVzcyggY29uc3QgaW4gZmxvYXQgYmxpbm5FeHBvbmVudCApIHtcXG5cXHRyZXR1cm4gc3FydCggMi4wIC8gKCBibGlubkV4cG9uZW50ICsgMi4wICkgKTtcXG59XFxuXCIsXG4gICAgYnVtcG1hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9CVU1QTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgYnVtcE1hcDtcXG5cXHR1bmlmb3JtIGZsb2F0IGJ1bXBTY2FsZTtcXG5cXHR2ZWMyIGRIZHh5X2Z3ZCgpIHtcXG5cXHRcXHR2ZWMyIGRTVGR4ID0gZEZkeCggdlV2ICk7XFxuXFx0XFx0dmVjMiBkU1RkeSA9IGRGZHkoIHZVdiApO1xcblxcdFxcdGZsb2F0IEhsbCA9IGJ1bXBTY2FsZSAqIHRleHR1cmUyRCggYnVtcE1hcCwgdlV2ICkueDtcXG5cXHRcXHRmbG9hdCBkQnggPSBidW1wU2NhbGUgKiB0ZXh0dXJlMkQoIGJ1bXBNYXAsIHZVdiArIGRTVGR4ICkueCAtIEhsbDtcXG5cXHRcXHRmbG9hdCBkQnkgPSBidW1wU2NhbGUgKiB0ZXh0dXJlMkQoIGJ1bXBNYXAsIHZVdiArIGRTVGR5ICkueCAtIEhsbDtcXG5cXHRcXHRyZXR1cm4gdmVjMiggZEJ4LCBkQnkgKTtcXG5cXHR9XFxuXFx0dmVjMyBwZXJ0dXJiTm9ybWFsQXJiKCB2ZWMzIHN1cmZfcG9zLCB2ZWMzIHN1cmZfbm9ybSwgdmVjMiBkSGR4eSApIHtcXG5cXHRcXHR2ZWMzIHZTaWdtYVggPSB2ZWMzKCBkRmR4KCBzdXJmX3Bvcy54ICksIGRGZHgoIHN1cmZfcG9zLnkgKSwgZEZkeCggc3VyZl9wb3MueiApICk7XFxuXFx0XFx0dmVjMyB2U2lnbWFZID0gdmVjMyggZEZkeSggc3VyZl9wb3MueCApLCBkRmR5KCBzdXJmX3Bvcy55ICksIGRGZHkoIHN1cmZfcG9zLnogKSApO1xcblxcdFxcdHZlYzMgdk4gPSBzdXJmX25vcm07XFxuXFx0XFx0dmVjMyBSMSA9IGNyb3NzKCB2U2lnbWFZLCB2TiApO1xcblxcdFxcdHZlYzMgUjIgPSBjcm9zcyggdk4sIHZTaWdtYVggKTtcXG5cXHRcXHRmbG9hdCBmRGV0ID0gZG90KCB2U2lnbWFYLCBSMSApO1xcblxcdFxcdHZlYzMgdkdyYWQgPSBzaWduKCBmRGV0ICkgKiAoIGRIZHh5LnggKiBSMSArIGRIZHh5LnkgKiBSMiApO1xcblxcdFxcdHJldHVybiBub3JtYWxpemUoIGFicyggZkRldCApICogc3VyZl9ub3JtIC0gdkdyYWQgKTtcXG5cXHR9XFxuI2VuZGlmXFxuXCIsXG4gICAgY2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50OlwiI2lmIE5VTV9DTElQUElOR19QTEFORVMgPiAwXFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgVU5JT05fQ0xJUFBJTkdfUExBTkVTOyArKyBpICkge1xcblxcdFxcdHZlYzQgcGxhbmUgPSBjbGlwcGluZ1BsYW5lc1sgaSBdO1xcblxcdFxcdGlmICggZG90KCB2Vmlld1Bvc2l0aW9uLCBwbGFuZS54eXogKSA+IHBsYW5lLncgKSBkaXNjYXJkO1xcblxcdH1cXG5cXHRcXHRcXG5cXHQjaWYgVU5JT05fQ0xJUFBJTkdfUExBTkVTIDwgTlVNX0NMSVBQSU5HX1BMQU5FU1xcblxcdFxcdGJvb2wgY2xpcHBlZCA9IHRydWU7XFxuXFx0XFx0Zm9yICggaW50IGkgPSBVTklPTl9DTElQUElOR19QTEFORVM7IGkgPCBOVU1fQ0xJUFBJTkdfUExBTkVTOyArKyBpICkge1xcblxcdFxcdFxcdHZlYzQgcGxhbmUgPSBjbGlwcGluZ1BsYW5lc1sgaSBdO1xcblxcdFxcdFxcdGNsaXBwZWQgPSAoIGRvdCggdlZpZXdQb3NpdGlvbiwgcGxhbmUueHl6ICkgPiBwbGFuZS53ICkgJiYgY2xpcHBlZDtcXG5cXHRcXHR9XFxuXFx0XFx0aWYgKCBjbGlwcGVkICkgZGlzY2FyZDtcXG5cXHRcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG5cIixcbiAgICBjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudDpcIiNpZiBOVU1fQ0xJUFBJTkdfUExBTkVTID4gMFxcblxcdCNpZiAhIGRlZmluZWQoIFBIWVNJQ0FMICkgJiYgISBkZWZpbmVkKCBQSE9ORyApXFxuXFx0XFx0dmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuXFx0I2VuZGlmXFxuXFx0dW5pZm9ybSB2ZWM0IGNsaXBwaW5nUGxhbmVzWyBOVU1fQ0xJUFBJTkdfUExBTkVTIF07XFxuI2VuZGlmXFxuXCIsY2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4OlwiI2lmIE5VTV9DTElQUElOR19QTEFORVMgPiAwICYmICEgZGVmaW5lZCggUEhZU0lDQUwgKSAmJiAhIGRlZmluZWQoIFBIT05HIClcXG5cXHR2YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG4jZW5kaWZcXG5cIixjbGlwcGluZ19wbGFuZXNfdmVydGV4OlwiI2lmIE5VTV9DTElQUElOR19QTEFORVMgPiAwICYmICEgZGVmaW5lZCggUEhZU0lDQUwgKSAmJiAhIGRlZmluZWQoIFBIT05HIClcXG5cXHR2Vmlld1Bvc2l0aW9uID0gLSBtdlBvc2l0aW9uLnh5ejtcXG4jZW5kaWZcXG5cIixcbiAgICBjb2xvcl9mcmFnbWVudDpcIiNpZmRlZiBVU0VfQ09MT1JcXG5cXHRkaWZmdXNlQ29sb3IucmdiICo9IHZDb2xvcjtcXG4jZW5kaWZcIixjb2xvcl9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9DT0xPUlxcblxcdHZhcnlpbmcgdmVjMyB2Q29sb3I7XFxuI2VuZGlmXFxuXCIsY29sb3JfcGFyc192ZXJ0ZXg6XCIjaWZkZWYgVVNFX0NPTE9SXFxuXFx0dmFyeWluZyB2ZWMzIHZDb2xvcjtcXG4jZW5kaWZcIixjb2xvcl92ZXJ0ZXg6XCIjaWZkZWYgVVNFX0NPTE9SXFxuXFx0dkNvbG9yLnh5eiA9IGNvbG9yLnh5ejtcXG4jZW5kaWZcIixjb21tb246XCIjZGVmaW5lIFBJIDMuMTQxNTkyNjUzNTlcXG4jZGVmaW5lIFBJMiA2LjI4MzE4NTMwNzE4XFxuI2RlZmluZSBQSV9IQUxGIDEuNTcwNzk2MzI2Nzk0OVxcbiNkZWZpbmUgUkVDSVBST0NBTF9QSSAwLjMxODMwOTg4NjE4XFxuI2RlZmluZSBSRUNJUFJPQ0FMX1BJMiAwLjE1OTE1NDk0XFxuI2RlZmluZSBMT0cyIDEuNDQyNjk1XFxuI2RlZmluZSBFUFNJTE9OIDFlLTZcXG4jZGVmaW5lIHNhdHVyYXRlKGEpIGNsYW1wKCBhLCAwLjAsIDEuMCApXFxuI2RlZmluZSB3aGl0ZUNvbXBsaW1lbnQoYSkgKCAxLjAgLSBzYXR1cmF0ZSggYSApIClcXG5mbG9hdCBwb3cyKCBjb25zdCBpbiBmbG9hdCB4ICkgeyByZXR1cm4geCp4OyB9XFxuZmxvYXQgcG93MyggY29uc3QgaW4gZmxvYXQgeCApIHsgcmV0dXJuIHgqeCp4OyB9XFxuZmxvYXQgcG93NCggY29uc3QgaW4gZmxvYXQgeCApIHsgZmxvYXQgeDIgPSB4Kng7IHJldHVybiB4Mip4MjsgfVxcbmZsb2F0IGF2ZXJhZ2UoIGNvbnN0IGluIHZlYzMgY29sb3IgKSB7IHJldHVybiBkb3QoIGNvbG9yLCB2ZWMzKCAwLjMzMzMgKSApOyB9XFxuaGlnaHAgZmxvYXQgcmFuZCggY29uc3QgaW4gdmVjMiB1diApIHtcXG5cXHRjb25zdCBoaWdocCBmbG9hdCBhID0gMTIuOTg5OCwgYiA9IDc4LjIzMywgYyA9IDQzNzU4LjU0NTM7XFxuXFx0aGlnaHAgZmxvYXQgZHQgPSBkb3QoIHV2Lnh5LCB2ZWMyKCBhLGIgKSApLCBzbiA9IG1vZCggZHQsIFBJICk7XFxuXFx0cmV0dXJuIGZyYWN0KHNpbihzbikgKiBjKTtcXG59XFxuc3RydWN0IEluY2lkZW50TGlnaHQge1xcblxcdHZlYzMgY29sb3I7XFxuXFx0dmVjMyBkaXJlY3Rpb247XFxuXFx0Ym9vbCB2aXNpYmxlO1xcbn07XFxuc3RydWN0IFJlZmxlY3RlZExpZ2h0IHtcXG5cXHR2ZWMzIGRpcmVjdERpZmZ1c2U7XFxuXFx0dmVjMyBkaXJlY3RTcGVjdWxhcjtcXG5cXHR2ZWMzIGluZGlyZWN0RGlmZnVzZTtcXG5cXHR2ZWMzIGluZGlyZWN0U3BlY3VsYXI7XFxufTtcXG5zdHJ1Y3QgR2VvbWV0cmljQ29udGV4dCB7XFxuXFx0dmVjMyBwb3NpdGlvbjtcXG5cXHR2ZWMzIG5vcm1hbDtcXG5cXHR2ZWMzIHZpZXdEaXI7XFxufTtcXG52ZWMzIHRyYW5zZm9ybURpcmVjdGlvbiggaW4gdmVjMyBkaXIsIGluIG1hdDQgbWF0cml4ICkge1xcblxcdHJldHVybiBub3JtYWxpemUoICggbWF0cml4ICogdmVjNCggZGlyLCAwLjAgKSApLnh5eiApO1xcbn1cXG52ZWMzIGludmVyc2VUcmFuc2Zvcm1EaXJlY3Rpb24oIGluIHZlYzMgZGlyLCBpbiBtYXQ0IG1hdHJpeCApIHtcXG5cXHRyZXR1cm4gbm9ybWFsaXplKCAoIHZlYzQoIGRpciwgMC4wICkgKiBtYXRyaXggKS54eXogKTtcXG59XFxudmVjMyBwcm9qZWN0T25QbGFuZShpbiB2ZWMzIHBvaW50LCBpbiB2ZWMzIHBvaW50T25QbGFuZSwgaW4gdmVjMyBwbGFuZU5vcm1hbCApIHtcXG5cXHRmbG9hdCBkaXN0YW5jZSA9IGRvdCggcGxhbmVOb3JtYWwsIHBvaW50IC0gcG9pbnRPblBsYW5lICk7XFxuXFx0cmV0dXJuIC0gZGlzdGFuY2UgKiBwbGFuZU5vcm1hbCArIHBvaW50O1xcbn1cXG5mbG9hdCBzaWRlT2ZQbGFuZSggaW4gdmVjMyBwb2ludCwgaW4gdmVjMyBwb2ludE9uUGxhbmUsIGluIHZlYzMgcGxhbmVOb3JtYWwgKSB7XFxuXFx0cmV0dXJuIHNpZ24oIGRvdCggcG9pbnQgLSBwb2ludE9uUGxhbmUsIHBsYW5lTm9ybWFsICkgKTtcXG59XFxudmVjMyBsaW5lUGxhbmVJbnRlcnNlY3QoIGluIHZlYzMgcG9pbnRPbkxpbmUsIGluIHZlYzMgbGluZURpcmVjdGlvbiwgaW4gdmVjMyBwb2ludE9uUGxhbmUsIGluIHZlYzMgcGxhbmVOb3JtYWwgKSB7XFxuXFx0cmV0dXJuIGxpbmVEaXJlY3Rpb24gKiAoIGRvdCggcGxhbmVOb3JtYWwsIHBvaW50T25QbGFuZSAtIHBvaW50T25MaW5lICkgLyBkb3QoIHBsYW5lTm9ybWFsLCBsaW5lRGlyZWN0aW9uICkgKSArIHBvaW50T25MaW5lO1xcbn1cXG5tYXQzIHRyYW5zcG9zZU1hdDMoIGNvbnN0IGluIG1hdDMgbSApIHtcXG5cXHRtYXQzIHRtcDtcXG5cXHR0bXBbIDAgXSA9IHZlYzMoIG1bIDAgXS54LCBtWyAxIF0ueCwgbVsgMiBdLnggKTtcXG5cXHR0bXBbIDEgXSA9IHZlYzMoIG1bIDAgXS55LCBtWyAxIF0ueSwgbVsgMiBdLnkgKTtcXG5cXHR0bXBbIDIgXSA9IHZlYzMoIG1bIDAgXS56LCBtWyAxIF0ueiwgbVsgMiBdLnogKTtcXG5cXHRyZXR1cm4gdG1wO1xcbn1cXG5mbG9hdCBsaW5lYXJUb1JlbGF0aXZlTHVtaW5hbmNlKCBjb25zdCBpbiB2ZWMzIGNvbG9yICkge1xcblxcdHZlYzMgd2VpZ2h0cyA9IHZlYzMoIDAuMjEyNiwgMC43MTUyLCAwLjA3MjIgKTtcXG5cXHRyZXR1cm4gZG90KCB3ZWlnaHRzLCBjb2xvci5yZ2IgKTtcXG59XFxuXCIsXG4gICAgY3ViZV91dl9yZWZsZWN0aW9uX2ZyYWdtZW50OlwiI2lmZGVmIEVOVk1BUF9UWVBFX0NVQkVfVVZcXG4jZGVmaW5lIGN1YmVVVl90ZXh0dXJlU2l6ZSAoMTAyNC4wKVxcbmludCBnZXRGYWNlRnJvbURpcmVjdGlvbih2ZWMzIGRpcmVjdGlvbikge1xcblxcdHZlYzMgYWJzRGlyZWN0aW9uID0gYWJzKGRpcmVjdGlvbik7XFxuXFx0aW50IGZhY2UgPSAtMTtcXG5cXHRpZiggYWJzRGlyZWN0aW9uLnggPiBhYnNEaXJlY3Rpb24ueiApIHtcXG5cXHRcXHRpZihhYnNEaXJlY3Rpb24ueCA+IGFic0RpcmVjdGlvbi55IClcXG5cXHRcXHRcXHRmYWNlID0gZGlyZWN0aW9uLnggPiAwLjAgPyAwIDogMztcXG5cXHRcXHRlbHNlXFxuXFx0XFx0XFx0ZmFjZSA9IGRpcmVjdGlvbi55ID4gMC4wID8gMSA6IDQ7XFxuXFx0fVxcblxcdGVsc2Uge1xcblxcdFxcdGlmKGFic0RpcmVjdGlvbi56ID4gYWJzRGlyZWN0aW9uLnkgKVxcblxcdFxcdFxcdGZhY2UgPSBkaXJlY3Rpb24ueiA+IDAuMCA/IDIgOiA1O1xcblxcdFxcdGVsc2VcXG5cXHRcXHRcXHRmYWNlID0gZGlyZWN0aW9uLnkgPiAwLjAgPyAxIDogNDtcXG5cXHR9XFxuXFx0cmV0dXJuIGZhY2U7XFxufVxcbiNkZWZpbmUgY3ViZVVWX21heExvZHMxICAobG9nMihjdWJlVVZfdGV4dHVyZVNpemUqMC4yNSkgLSAxLjApXFxuI2RlZmluZSBjdWJlVVZfcmFuZ2VDbGFtcCAoZXhwMigoNi4wIC0gMS4wKSAqIDIuMCkpXFxudmVjMiBNaXBMZXZlbEluZm8oIHZlYzMgdmVjLCBmbG9hdCByb3VnaG5lc3NMZXZlbCwgZmxvYXQgcm91Z2huZXNzICkge1xcblxcdGZsb2F0IHNjYWxlID0gZXhwMihjdWJlVVZfbWF4TG9kczEgLSByb3VnaG5lc3NMZXZlbCk7XFxuXFx0ZmxvYXQgZHhSb3VnaG5lc3MgPSBkRmR4KHJvdWdobmVzcyk7XFxuXFx0ZmxvYXQgZHlSb3VnaG5lc3MgPSBkRmR5KHJvdWdobmVzcyk7XFxuXFx0dmVjMyBkeCA9IGRGZHgoIHZlYyAqIHNjYWxlICogZHhSb3VnaG5lc3MgKTtcXG5cXHR2ZWMzIGR5ID0gZEZkeSggdmVjICogc2NhbGUgKiBkeVJvdWdobmVzcyApO1xcblxcdGZsb2F0IGQgPSBtYXgoIGRvdCggZHgsIGR4ICksIGRvdCggZHksIGR5ICkgKTtcXG5cXHRkID0gY2xhbXAoZCwgMS4wLCBjdWJlVVZfcmFuZ2VDbGFtcCk7XFxuXFx0ZmxvYXQgbWlwTGV2ZWwgPSAwLjUgKiBsb2cyKGQpO1xcblxcdHJldHVybiB2ZWMyKGZsb29yKG1pcExldmVsKSwgZnJhY3QobWlwTGV2ZWwpKTtcXG59XFxuI2RlZmluZSBjdWJlVVZfbWF4TG9kczIgKGxvZzIoY3ViZVVWX3RleHR1cmVTaXplKjAuMjUpIC0gMi4wKVxcbiNkZWZpbmUgY3ViZVVWX3JjcFRleHR1cmVTaXplICgxLjAgLyBjdWJlVVZfdGV4dHVyZVNpemUpXFxudmVjMiBnZXRDdWJlVVYodmVjMyBkaXJlY3Rpb24sIGZsb2F0IHJvdWdobmVzc0xldmVsLCBmbG9hdCBtaXBMZXZlbCkge1xcblxcdG1pcExldmVsID0gcm91Z2huZXNzTGV2ZWwgPiBjdWJlVVZfbWF4TG9kczIgLSAzLjAgPyAwLjAgOiBtaXBMZXZlbDtcXG5cXHRmbG9hdCBhID0gMTYuMCAqIGN1YmVVVl9yY3BUZXh0dXJlU2l6ZTtcXG5cXHR2ZWMyIGV4cDJfcGFja2VkID0gZXhwMiggdmVjMiggcm91Z2huZXNzTGV2ZWwsIG1pcExldmVsICkgKTtcXG5cXHR2ZWMyIHJjcF9leHAyX3BhY2tlZCA9IHZlYzIoIDEuMCApIC8gZXhwMl9wYWNrZWQ7XFxuXFx0ZmxvYXQgcG93U2NhbGUgPSBleHAyX3BhY2tlZC54ICogZXhwMl9wYWNrZWQueTtcXG5cXHRmbG9hdCBzY2FsZSA9IHJjcF9leHAyX3BhY2tlZC54ICogcmNwX2V4cDJfcGFja2VkLnkgKiAwLjI1O1xcblxcdGZsb2F0IG1pcE9mZnNldCA9IDAuNzUqKDEuMCAtIHJjcF9leHAyX3BhY2tlZC55KSAqIHJjcF9leHAyX3BhY2tlZC54O1xcblxcdGJvb2wgYlJlcyA9IG1pcExldmVsID09IDAuMDtcXG5cXHRzY2FsZSA9ICBiUmVzICYmIChzY2FsZSA8IGEpID8gYSA6IHNjYWxlO1xcblxcdHZlYzMgcjtcXG5cXHR2ZWMyIG9mZnNldDtcXG5cXHRpbnQgZmFjZSA9IGdldEZhY2VGcm9tRGlyZWN0aW9uKGRpcmVjdGlvbik7XFxuXFx0ZmxvYXQgcmNwUG93U2NhbGUgPSAxLjAgLyBwb3dTY2FsZTtcXG5cXHRpZiggZmFjZSA9PSAwKSB7XFxuXFx0XFx0ciA9IHZlYzMoZGlyZWN0aW9uLngsIC1kaXJlY3Rpb24ueiwgZGlyZWN0aW9uLnkpO1xcblxcdFxcdG9mZnNldCA9IHZlYzIoMC4wK21pcE9mZnNldCwwLjc1ICogcmNwUG93U2NhbGUpO1xcblxcdFxcdG9mZnNldC55ID0gYlJlcyAmJiAob2Zmc2V0LnkgPCAyLjAqYSkgPyBhIDogb2Zmc2V0Lnk7XFxuXFx0fVxcblxcdGVsc2UgaWYoIGZhY2UgPT0gMSkge1xcblxcdFxcdHIgPSB2ZWMzKGRpcmVjdGlvbi55LCBkaXJlY3Rpb24ueCwgZGlyZWN0aW9uLnopO1xcblxcdFxcdG9mZnNldCA9IHZlYzIoc2NhbGUrbWlwT2Zmc2V0LCAwLjc1ICogcmNwUG93U2NhbGUpO1xcblxcdFxcdG9mZnNldC55ID0gYlJlcyAmJiAob2Zmc2V0LnkgPCAyLjAqYSkgPyBhIDogb2Zmc2V0Lnk7XFxuXFx0fVxcblxcdGVsc2UgaWYoIGZhY2UgPT0gMikge1xcblxcdFxcdHIgPSB2ZWMzKGRpcmVjdGlvbi56LCBkaXJlY3Rpb24ueCwgZGlyZWN0aW9uLnkpO1xcblxcdFxcdG9mZnNldCA9IHZlYzIoMi4wKnNjYWxlK21pcE9mZnNldCwgMC43NSAqIHJjcFBvd1NjYWxlKTtcXG5cXHRcXHRvZmZzZXQueSA9IGJSZXMgJiYgKG9mZnNldC55IDwgMi4wKmEpID8gYSA6IG9mZnNldC55O1xcblxcdH1cXG5cXHRlbHNlIGlmKCBmYWNlID09IDMpIHtcXG5cXHRcXHRyID0gdmVjMyhkaXJlY3Rpb24ueCwgZGlyZWN0aW9uLnosIGRpcmVjdGlvbi55KTtcXG5cXHRcXHRvZmZzZXQgPSB2ZWMyKDAuMCttaXBPZmZzZXQsMC41ICogcmNwUG93U2NhbGUpO1xcblxcdFxcdG9mZnNldC55ID0gYlJlcyAmJiAob2Zmc2V0LnkgPCAyLjAqYSkgPyAwLjAgOiBvZmZzZXQueTtcXG5cXHR9XFxuXFx0ZWxzZSBpZiggZmFjZSA9PSA0KSB7XFxuXFx0XFx0ciA9IHZlYzMoZGlyZWN0aW9uLnksIGRpcmVjdGlvbi54LCAtZGlyZWN0aW9uLnopO1xcblxcdFxcdG9mZnNldCA9IHZlYzIoc2NhbGUrbWlwT2Zmc2V0LCAwLjUgKiByY3BQb3dTY2FsZSk7XFxuXFx0XFx0b2Zmc2V0LnkgPSBiUmVzICYmIChvZmZzZXQueSA8IDIuMCphKSA/IDAuMCA6IG9mZnNldC55O1xcblxcdH1cXG5cXHRlbHNlIHtcXG5cXHRcXHRyID0gdmVjMyhkaXJlY3Rpb24ueiwgLWRpcmVjdGlvbi54LCBkaXJlY3Rpb24ueSk7XFxuXFx0XFx0b2Zmc2V0ID0gdmVjMigyLjAqc2NhbGUrbWlwT2Zmc2V0LCAwLjUgKiByY3BQb3dTY2FsZSk7XFxuXFx0XFx0b2Zmc2V0LnkgPSBiUmVzICYmIChvZmZzZXQueSA8IDIuMCphKSA/IDAuMCA6IG9mZnNldC55O1xcblxcdH1cXG5cXHRyID0gbm9ybWFsaXplKHIpO1xcblxcdGZsb2F0IHRleGVsT2Zmc2V0ID0gMC41ICogY3ViZVVWX3JjcFRleHR1cmVTaXplO1xcblxcdHZlYzIgcyA9ICggci55eiAvIGFicyggci54ICkgKyB2ZWMyKCAxLjAgKSApICogMC41O1xcblxcdHZlYzIgYmFzZSA9IG9mZnNldCArIHZlYzIoIHRleGVsT2Zmc2V0ICk7XFxuXFx0cmV0dXJuIGJhc2UgKyBzICogKCBzY2FsZSAtIDIuMCAqIHRleGVsT2Zmc2V0ICk7XFxufVxcbiNkZWZpbmUgY3ViZVVWX21heExvZHMzIChsb2cyKGN1YmVVVl90ZXh0dXJlU2l6ZSowLjI1KSAtIDMuMClcXG52ZWM0IHRleHR1cmVDdWJlVVYodmVjMyByZWZsZWN0ZWREaXJlY3Rpb24sIGZsb2F0IHJvdWdobmVzcyApIHtcXG5cXHRmbG9hdCByb3VnaG5lc3NWYWwgPSByb3VnaG5lc3MqIGN1YmVVVl9tYXhMb2RzMztcXG5cXHRmbG9hdCByMSA9IGZsb29yKHJvdWdobmVzc1ZhbCk7XFxuXFx0ZmxvYXQgcjIgPSByMSArIDEuMDtcXG5cXHRmbG9hdCB0ID0gZnJhY3Qocm91Z2huZXNzVmFsKTtcXG5cXHR2ZWMyIG1pcEluZm8gPSBNaXBMZXZlbEluZm8ocmVmbGVjdGVkRGlyZWN0aW9uLCByMSwgcm91Z2huZXNzKTtcXG5cXHRmbG9hdCBzID0gbWlwSW5mby55O1xcblxcdGZsb2F0IGxldmVsMCA9IG1pcEluZm8ueDtcXG5cXHRmbG9hdCBsZXZlbDEgPSBsZXZlbDAgKyAxLjA7XFxuXFx0bGV2ZWwxID0gbGV2ZWwxID4gNS4wID8gNS4wIDogbGV2ZWwxO1xcblxcdGxldmVsMCArPSBtaW4oIGZsb29yKCBzICsgMC41ICksIDUuMCApO1xcblxcdHZlYzIgdXZfMTAgPSBnZXRDdWJlVVYocmVmbGVjdGVkRGlyZWN0aW9uLCByMSwgbGV2ZWwwKTtcXG5cXHR2ZWM0IGNvbG9yMTAgPSBlbnZNYXBUZXhlbFRvTGluZWFyKHRleHR1cmUyRChlbnZNYXAsIHV2XzEwKSk7XFxuXFx0dmVjMiB1dl8yMCA9IGdldEN1YmVVVihyZWZsZWN0ZWREaXJlY3Rpb24sIHIyLCBsZXZlbDApO1xcblxcdHZlYzQgY29sb3IyMCA9IGVudk1hcFRleGVsVG9MaW5lYXIodGV4dHVyZTJEKGVudk1hcCwgdXZfMjApKTtcXG5cXHR2ZWM0IHJlc3VsdCA9IG1peChjb2xvcjEwLCBjb2xvcjIwLCB0KTtcXG5cXHRyZXR1cm4gdmVjNChyZXN1bHQucmdiLCAxLjApO1xcbn1cXG4jZW5kaWZcXG5cIixcbiAgICBkZWZhdWx0bm9ybWFsX3ZlcnRleDpcInZlYzMgdHJhbnNmb3JtZWROb3JtYWwgPSBub3JtYWxNYXRyaXggKiBvYmplY3ROb3JtYWw7XFxuI2lmZGVmIEZMSVBfU0lERURcXG5cXHR0cmFuc2Zvcm1lZE5vcm1hbCA9IC0gdHJhbnNmb3JtZWROb3JtYWw7XFxuI2VuZGlmXFxuXCIsZGlzcGxhY2VtZW50bWFwX3BhcnNfdmVydGV4OlwiI2lmZGVmIFVTRV9ESVNQTEFDRU1FTlRNQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBkaXNwbGFjZW1lbnRNYXA7XFxuXFx0dW5pZm9ybSBmbG9hdCBkaXNwbGFjZW1lbnRTY2FsZTtcXG5cXHR1bmlmb3JtIGZsb2F0IGRpc3BsYWNlbWVudEJpYXM7XFxuI2VuZGlmXFxuXCIsZGlzcGxhY2VtZW50bWFwX3ZlcnRleDpcIiNpZmRlZiBVU0VfRElTUExBQ0VNRU5UTUFQXFxuXFx0dHJhbnNmb3JtZWQgKz0gbm9ybWFsaXplKCBvYmplY3ROb3JtYWwgKSAqICggdGV4dHVyZTJEKCBkaXNwbGFjZW1lbnRNYXAsIHV2ICkueCAqIGRpc3BsYWNlbWVudFNjYWxlICsgZGlzcGxhY2VtZW50QmlhcyApO1xcbiNlbmRpZlxcblwiLFxuICAgIGVtaXNzaXZlbWFwX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9FTUlTU0lWRU1BUFxcblxcdHZlYzQgZW1pc3NpdmVDb2xvciA9IHRleHR1cmUyRCggZW1pc3NpdmVNYXAsIHZVdiApO1xcblxcdGVtaXNzaXZlQ29sb3IucmdiID0gZW1pc3NpdmVNYXBUZXhlbFRvTGluZWFyKCBlbWlzc2l2ZUNvbG9yICkucmdiO1xcblxcdHRvdGFsRW1pc3NpdmVSYWRpYW5jZSAqPSBlbWlzc2l2ZUNvbG9yLnJnYjtcXG4jZW5kaWZcXG5cIixlbWlzc2l2ZW1hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9FTUlTU0lWRU1BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGVtaXNzaXZlTWFwO1xcbiNlbmRpZlxcblwiLGVuY29kaW5nc19mcmFnbWVudDpcIiAgZ2xfRnJhZ0NvbG9yID0gbGluZWFyVG9PdXRwdXRUZXhlbCggZ2xfRnJhZ0NvbG9yICk7XFxuXCIsZW5jb2RpbmdzX3BhcnNfZnJhZ21lbnQ6XCJcXG52ZWM0IExpbmVhclRvTGluZWFyKCBpbiB2ZWM0IHZhbHVlICkge1xcblxcdHJldHVybiB2YWx1ZTtcXG59XFxudmVjNCBHYW1tYVRvTGluZWFyKCBpbiB2ZWM0IHZhbHVlLCBpbiBmbG9hdCBnYW1tYUZhY3RvciApIHtcXG5cXHRyZXR1cm4gdmVjNCggcG93KCB2YWx1ZS54eXosIHZlYzMoIGdhbW1hRmFjdG9yICkgKSwgdmFsdWUudyApO1xcbn1cXG52ZWM0IExpbmVhclRvR2FtbWEoIGluIHZlYzQgdmFsdWUsIGluIGZsb2F0IGdhbW1hRmFjdG9yICkge1xcblxcdHJldHVybiB2ZWM0KCBwb3coIHZhbHVlLnh5eiwgdmVjMyggMS4wIC8gZ2FtbWFGYWN0b3IgKSApLCB2YWx1ZS53ICk7XFxufVxcbnZlYzQgc1JHQlRvTGluZWFyKCBpbiB2ZWM0IHZhbHVlICkge1xcblxcdHJldHVybiB2ZWM0KCBtaXgoIHBvdyggdmFsdWUucmdiICogMC45NDc4NjcyOTg2ICsgdmVjMyggMC4wNTIxMzI3MDE0ICksIHZlYzMoIDIuNCApICksIHZhbHVlLnJnYiAqIDAuMDc3Mzk5MzgwOCwgdmVjMyggbGVzc1RoYW5FcXVhbCggdmFsdWUucmdiLCB2ZWMzKCAwLjA0MDQ1ICkgKSApICksIHZhbHVlLncgKTtcXG59XFxudmVjNCBMaW5lYXJUb3NSR0IoIGluIHZlYzQgdmFsdWUgKSB7XFxuXFx0cmV0dXJuIHZlYzQoIG1peCggcG93KCB2YWx1ZS5yZ2IsIHZlYzMoIDAuNDE2NjYgKSApICogMS4wNTUgLSB2ZWMzKCAwLjA1NSApLCB2YWx1ZS5yZ2IgKiAxMi45MiwgdmVjMyggbGVzc1RoYW5FcXVhbCggdmFsdWUucmdiLCB2ZWMzKCAwLjAwMzEzMDggKSApICkgKSwgdmFsdWUudyApO1xcbn1cXG52ZWM0IFJHQkVUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSApIHtcXG5cXHRyZXR1cm4gdmVjNCggdmFsdWUucmdiICogZXhwMiggdmFsdWUuYSAqIDI1NS4wIC0gMTI4LjAgKSwgMS4wICk7XFxufVxcbnZlYzQgTGluZWFyVG9SR0JFKCBpbiB2ZWM0IHZhbHVlICkge1xcblxcdGZsb2F0IG1heENvbXBvbmVudCA9IG1heCggbWF4KCB2YWx1ZS5yLCB2YWx1ZS5nICksIHZhbHVlLmIgKTtcXG5cXHRmbG9hdCBmRXhwID0gY2xhbXAoIGNlaWwoIGxvZzIoIG1heENvbXBvbmVudCApICksIC0xMjguMCwgMTI3LjAgKTtcXG5cXHRyZXR1cm4gdmVjNCggdmFsdWUucmdiIC8gZXhwMiggZkV4cCApLCAoIGZFeHAgKyAxMjguMCApIC8gMjU1LjAgKTtcXG59XFxudmVjNCBSR0JNVG9MaW5lYXIoIGluIHZlYzQgdmFsdWUsIGluIGZsb2F0IG1heFJhbmdlICkge1xcblxcdHJldHVybiB2ZWM0KCB2YWx1ZS54eXogKiB2YWx1ZS53ICogbWF4UmFuZ2UsIDEuMCApO1xcbn1cXG52ZWM0IExpbmVhclRvUkdCTSggaW4gdmVjNCB2YWx1ZSwgaW4gZmxvYXQgbWF4UmFuZ2UgKSB7XFxuXFx0ZmxvYXQgbWF4UkdCID0gbWF4KCB2YWx1ZS54LCBtYXgoIHZhbHVlLmcsIHZhbHVlLmIgKSApO1xcblxcdGZsb2F0IE0gICAgICA9IGNsYW1wKCBtYXhSR0IgLyBtYXhSYW5nZSwgMC4wLCAxLjAgKTtcXG5cXHRNICAgICAgICAgICAgPSBjZWlsKCBNICogMjU1LjAgKSAvIDI1NS4wO1xcblxcdHJldHVybiB2ZWM0KCB2YWx1ZS5yZ2IgLyAoIE0gKiBtYXhSYW5nZSApLCBNICk7XFxufVxcbnZlYzQgUkdCRFRvTGluZWFyKCBpbiB2ZWM0IHZhbHVlLCBpbiBmbG9hdCBtYXhSYW5nZSApIHtcXG5cXHRyZXR1cm4gdmVjNCggdmFsdWUucmdiICogKCAoIG1heFJhbmdlIC8gMjU1LjAgKSAvIHZhbHVlLmEgKSwgMS4wICk7XFxufVxcbnZlYzQgTGluZWFyVG9SR0JEKCBpbiB2ZWM0IHZhbHVlLCBpbiBmbG9hdCBtYXhSYW5nZSApIHtcXG5cXHRmbG9hdCBtYXhSR0IgPSBtYXgoIHZhbHVlLngsIG1heCggdmFsdWUuZywgdmFsdWUuYiApICk7XFxuXFx0ZmxvYXQgRCAgICAgID0gbWF4KCBtYXhSYW5nZSAvIG1heFJHQiwgMS4wICk7XFxuXFx0RCAgICAgICAgICAgID0gbWluKCBmbG9vciggRCApIC8gMjU1LjAsIDEuMCApO1xcblxcdHJldHVybiB2ZWM0KCB2YWx1ZS5yZ2IgKiAoIEQgKiAoIDI1NS4wIC8gbWF4UmFuZ2UgKSApLCBEICk7XFxufVxcbmNvbnN0IG1hdDMgY0xvZ0x1dk0gPSBtYXQzKCAwLjIyMDksIDAuMzM5MCwgMC40MTg0LCAwLjExMzgsIDAuNjc4MCwgMC43MzE5LCAwLjAxMDIsIDAuMTEzMCwgMC4yOTY5ICk7XFxudmVjNCBMaW5lYXJUb0xvZ0x1diggaW4gdmVjNCB2YWx1ZSApICB7XFxuXFx0dmVjMyBYcF9ZX1hZWnAgPSB2YWx1ZS5yZ2IgKiBjTG9nTHV2TTtcXG5cXHRYcF9ZX1hZWnAgPSBtYXgoWHBfWV9YWVpwLCB2ZWMzKDFlLTYsIDFlLTYsIDFlLTYpKTtcXG5cXHR2ZWM0IHZSZXN1bHQ7XFxuXFx0dlJlc3VsdC54eSA9IFhwX1lfWFlacC54eSAvIFhwX1lfWFlacC56O1xcblxcdGZsb2F0IExlID0gMi4wICogbG9nMihYcF9ZX1hZWnAueSkgKyAxMjcuMDtcXG5cXHR2UmVzdWx0LncgPSBmcmFjdChMZSk7XFxuXFx0dlJlc3VsdC56ID0gKExlIC0gKGZsb29yKHZSZXN1bHQudyoyNTUuMCkpLzI1NS4wKS8yNTUuMDtcXG5cXHRyZXR1cm4gdlJlc3VsdDtcXG59XFxuY29uc3QgbWF0MyBjTG9nTHV2SW52ZXJzZU0gPSBtYXQzKCA2LjAwMTQsIC0yLjcwMDgsIC0xLjc5OTYsIC0xLjMzMjAsIDMuMTAyOSwgLTUuNzcyMSwgMC4zMDA4LCAtMS4wODgyLCA1LjYyNjggKTtcXG52ZWM0IExvZ0x1dlRvTGluZWFyKCBpbiB2ZWM0IHZhbHVlICkge1xcblxcdGZsb2F0IExlID0gdmFsdWUueiAqIDI1NS4wICsgdmFsdWUudztcXG5cXHR2ZWMzIFhwX1lfWFlacDtcXG5cXHRYcF9ZX1hZWnAueSA9IGV4cDIoKExlIC0gMTI3LjApIC8gMi4wKTtcXG5cXHRYcF9ZX1hZWnAueiA9IFhwX1lfWFlacC55IC8gdmFsdWUueTtcXG5cXHRYcF9ZX1hZWnAueCA9IHZhbHVlLnggKiBYcF9ZX1hZWnAuejtcXG5cXHR2ZWMzIHZSR0IgPSBYcF9ZX1hZWnAucmdiICogY0xvZ0x1dkludmVyc2VNO1xcblxcdHJldHVybiB2ZWM0KCBtYXgodlJHQiwgMC4wKSwgMS4wICk7XFxufVxcblwiLFxuICAgIGVudm1hcF9mcmFnbWVudDpcIiNpZmRlZiBVU0VfRU5WTUFQXFxuXFx0I2lmIGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFBIT05HIClcXG5cXHRcXHR2ZWMzIGNhbWVyYVRvVmVydGV4ID0gbm9ybWFsaXplKCB2V29ybGRQb3NpdGlvbiAtIGNhbWVyYVBvc2l0aW9uICk7XFxuXFx0XFx0dmVjMyB3b3JsZE5vcm1hbCA9IGludmVyc2VUcmFuc2Zvcm1EaXJlY3Rpb24oIG5vcm1hbCwgdmlld01hdHJpeCApO1xcblxcdFxcdCNpZmRlZiBFTlZNQVBfTU9ERV9SRUZMRUNUSU9OXFxuXFx0XFx0XFx0dmVjMyByZWZsZWN0VmVjID0gcmVmbGVjdCggY2FtZXJhVG9WZXJ0ZXgsIHdvcmxkTm9ybWFsICk7XFxuXFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHR2ZWMzIHJlZmxlY3RWZWMgPSByZWZyYWN0KCBjYW1lcmFUb1ZlcnRleCwgd29ybGROb3JtYWwsIHJlZnJhY3Rpb25SYXRpbyApO1xcblxcdFxcdCNlbmRpZlxcblxcdCNlbHNlXFxuXFx0XFx0dmVjMyByZWZsZWN0VmVjID0gdlJlZmxlY3Q7XFxuXFx0I2VuZGlmXFxuXFx0I2lmZGVmIEVOVk1BUF9UWVBFX0NVQkVcXG5cXHRcXHR2ZWM0IGVudkNvbG9yID0gdGV4dHVyZUN1YmUoIGVudk1hcCwgdmVjMyggZmxpcEVudk1hcCAqIHJlZmxlY3RWZWMueCwgcmVmbGVjdFZlYy55eiApICk7XFxuXFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX1RZUEVfRVFVSVJFQyApXFxuXFx0XFx0dmVjMiBzYW1wbGVVVjtcXG5cXHRcXHRyZWZsZWN0VmVjID0gbm9ybWFsaXplKCByZWZsZWN0VmVjICk7XFxuXFx0XFx0c2FtcGxlVVYueSA9IGFzaW4oIGNsYW1wKCByZWZsZWN0VmVjLnksIC0gMS4wLCAxLjAgKSApICogUkVDSVBST0NBTF9QSSArIDAuNTtcXG5cXHRcXHRzYW1wbGVVVi54ID0gYXRhbiggcmVmbGVjdFZlYy56LCByZWZsZWN0VmVjLnggKSAqIFJFQ0lQUk9DQUxfUEkyICsgMC41O1xcblxcdFxcdHZlYzQgZW52Q29sb3IgPSB0ZXh0dXJlMkQoIGVudk1hcCwgc2FtcGxlVVYgKTtcXG5cXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfVFlQRV9TUEhFUkUgKVxcblxcdFxcdHJlZmxlY3RWZWMgPSBub3JtYWxpemUoIHJlZmxlY3RWZWMgKTtcXG5cXHRcXHR2ZWMzIHJlZmxlY3RWaWV3ID0gbm9ybWFsaXplKCAoIHZpZXdNYXRyaXggKiB2ZWM0KCByZWZsZWN0VmVjLCAwLjAgKSApLnh5eiArIHZlYzMoIDAuMCwgMC4wLCAxLjAgKSApO1xcblxcdFxcdHZlYzQgZW52Q29sb3IgPSB0ZXh0dXJlMkQoIGVudk1hcCwgcmVmbGVjdFZpZXcueHkgKiAwLjUgKyAwLjUgKTtcXG5cXHQjZWxzZVxcblxcdFxcdHZlYzQgZW52Q29sb3IgPSB2ZWM0KCAwLjAgKTtcXG5cXHQjZW5kaWZcXG5cXHRlbnZDb2xvciA9IGVudk1hcFRleGVsVG9MaW5lYXIoIGVudkNvbG9yICk7XFxuXFx0I2lmZGVmIEVOVk1BUF9CTEVORElOR19NVUxUSVBMWVxcblxcdFxcdG91dGdvaW5nTGlnaHQgPSBtaXgoIG91dGdvaW5nTGlnaHQsIG91dGdvaW5nTGlnaHQgKiBlbnZDb2xvci54eXosIHNwZWN1bGFyU3RyZW5ndGggKiByZWZsZWN0aXZpdHkgKTtcXG5cXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfQkxFTkRJTkdfTUlYIClcXG5cXHRcXHRvdXRnb2luZ0xpZ2h0ID0gbWl4KCBvdXRnb2luZ0xpZ2h0LCBlbnZDb2xvci54eXosIHNwZWN1bGFyU3RyZW5ndGggKiByZWZsZWN0aXZpdHkgKTtcXG5cXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfQkxFTkRJTkdfQUREIClcXG5cXHRcXHRvdXRnb2luZ0xpZ2h0ICs9IGVudkNvbG9yLnh5eiAqIHNwZWN1bGFyU3RyZW5ndGggKiByZWZsZWN0aXZpdHk7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXCIsXG4gICAgZW52bWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWYgZGVmaW5lZCggVVNFX0VOVk1BUCApIHx8IGRlZmluZWQoIFBIWVNJQ0FMIClcXG5cXHR1bmlmb3JtIGZsb2F0IHJlZmxlY3Rpdml0eTtcXG5cXHR1bmlmb3JtIGZsb2F0IGVudk1hcEludGVuc2l0eTtcXG4jZW5kaWZcXG4jaWZkZWYgVVNFX0VOVk1BUFxcblxcdCNpZiAhIGRlZmluZWQoIFBIWVNJQ0FMICkgJiYgKCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBQSE9ORyApIClcXG5cXHRcXHR2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxuXFx0I2VuZGlmXFxuXFx0I2lmZGVmIEVOVk1BUF9UWVBFX0NVQkVcXG5cXHRcXHR1bmlmb3JtIHNhbXBsZXJDdWJlIGVudk1hcDtcXG5cXHQjZWxzZVxcblxcdFxcdHVuaWZvcm0gc2FtcGxlcjJEIGVudk1hcDtcXG5cXHQjZW5kaWZcXG5cXHR1bmlmb3JtIGZsb2F0IGZsaXBFbnZNYXA7XFxuXFx0I2lmIGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFBIT05HICkgfHwgZGVmaW5lZCggUEhZU0lDQUwgKVxcblxcdFxcdHVuaWZvcm0gZmxvYXQgcmVmcmFjdGlvblJhdGlvO1xcblxcdCNlbHNlXFxuXFx0XFx0dmFyeWluZyB2ZWMzIHZSZWZsZWN0O1xcblxcdCNlbmRpZlxcbiNlbmRpZlxcblwiLFxuICAgIGVudm1hcF9wYXJzX3ZlcnRleDpcIiNpZmRlZiBVU0VfRU5WTUFQXFxuXFx0I2lmIGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFBIT05HIClcXG5cXHRcXHR2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxuXFx0I2Vsc2VcXG5cXHRcXHR2YXJ5aW5nIHZlYzMgdlJlZmxlY3Q7XFxuXFx0XFx0dW5pZm9ybSBmbG9hdCByZWZyYWN0aW9uUmF0aW87XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXCIsZW52bWFwX3ZlcnRleDpcIiNpZmRlZiBVU0VfRU5WTUFQXFxuXFx0I2lmIGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFBIT05HIClcXG5cXHRcXHR2V29ybGRQb3NpdGlvbiA9IHdvcmxkUG9zaXRpb24ueHl6O1xcblxcdCNlbHNlXFxuXFx0XFx0dmVjMyBjYW1lcmFUb1ZlcnRleCA9IG5vcm1hbGl6ZSggd29ybGRQb3NpdGlvbi54eXogLSBjYW1lcmFQb3NpdGlvbiApO1xcblxcdFxcdHZlYzMgd29ybGROb3JtYWwgPSBpbnZlcnNlVHJhbnNmb3JtRGlyZWN0aW9uKCB0cmFuc2Zvcm1lZE5vcm1hbCwgdmlld01hdHJpeCApO1xcblxcdFxcdCNpZmRlZiBFTlZNQVBfTU9ERV9SRUZMRUNUSU9OXFxuXFx0XFx0XFx0dlJlZmxlY3QgPSByZWZsZWN0KCBjYW1lcmFUb1ZlcnRleCwgd29ybGROb3JtYWwgKTtcXG5cXHRcXHQjZWxzZVxcblxcdFxcdFxcdHZSZWZsZWN0ID0gcmVmcmFjdCggY2FtZXJhVG9WZXJ0ZXgsIHdvcmxkTm9ybWFsLCByZWZyYWN0aW9uUmF0aW8gKTtcXG5cXHRcXHQjZW5kaWZcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG5cIixcbiAgICBmb2dfdmVydGV4OlwiXFxuI2lmZGVmIFVTRV9GT0dcXG5mb2dEZXB0aCA9IC1tdlBvc2l0aW9uLno7XFxuI2VuZGlmXCIsZm9nX3BhcnNfdmVydGV4OlwiI2lmZGVmIFVTRV9GT0dcXG4gIHZhcnlpbmcgZmxvYXQgZm9nRGVwdGg7XFxuI2VuZGlmXFxuXCIsZm9nX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9GT0dcXG5cXHQjaWZkZWYgRk9HX0VYUDJcXG5cXHRcXHRmbG9hdCBmb2dGYWN0b3IgPSB3aGl0ZUNvbXBsaW1lbnQoIGV4cDIoIC0gZm9nRGVuc2l0eSAqIGZvZ0RlbnNpdHkgKiBmb2dEZXB0aCAqIGZvZ0RlcHRoICogTE9HMiApICk7XFxuXFx0I2Vsc2VcXG5cXHRcXHRmbG9hdCBmb2dGYWN0b3IgPSBzbW9vdGhzdGVwKCBmb2dOZWFyLCBmb2dGYXIsIGZvZ0RlcHRoICk7XFxuXFx0I2VuZGlmXFxuXFx0Z2xfRnJhZ0NvbG9yLnJnYiA9IG1peCggZ2xfRnJhZ0NvbG9yLnJnYiwgZm9nQ29sb3IsIGZvZ0ZhY3RvciApO1xcbiNlbmRpZlxcblwiLGZvZ19wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9GT0dcXG5cXHR1bmlmb3JtIHZlYzMgZm9nQ29sb3I7XFxuXFx0dmFyeWluZyBmbG9hdCBmb2dEZXB0aDtcXG5cXHQjaWZkZWYgRk9HX0VYUDJcXG5cXHRcXHR1bmlmb3JtIGZsb2F0IGZvZ0RlbnNpdHk7XFxuXFx0I2Vsc2VcXG5cXHRcXHR1bmlmb3JtIGZsb2F0IGZvZ05lYXI7XFxuXFx0XFx0dW5pZm9ybSBmbG9hdCBmb2dGYXI7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXCIsXG4gICAgZ3JhZGllbnRtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBUT09OXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgZ3JhZGllbnRNYXA7XFxuXFx0dmVjMyBnZXRHcmFkaWVudElycmFkaWFuY2UoIHZlYzMgbm9ybWFsLCB2ZWMzIGxpZ2h0RGlyZWN0aW9uICkge1xcblxcdFxcdGZsb2F0IGRvdE5MID0gZG90KCBub3JtYWwsIGxpZ2h0RGlyZWN0aW9uICk7XFxuXFx0XFx0dmVjMiBjb29yZCA9IHZlYzIoIGRvdE5MICogMC41ICsgMC41LCAwLjAgKTtcXG5cXHRcXHQjaWZkZWYgVVNFX0dSQURJRU5UTUFQXFxuXFx0XFx0XFx0cmV0dXJuIHRleHR1cmUyRCggZ3JhZGllbnRNYXAsIGNvb3JkICkucmdiO1xcblxcdFxcdCNlbHNlXFxuXFx0XFx0XFx0cmV0dXJuICggY29vcmQueCA8IDAuNyApID8gdmVjMyggMC43ICkgOiB2ZWMzKCAxLjAgKTtcXG5cXHRcXHQjZW5kaWZcXG5cXHR9XFxuI2VuZGlmXFxuXCIsbGlnaHRtYXBfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0xJR0hUTUFQXFxuXFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICs9IFBJICogdGV4dHVyZTJEKCBsaWdodE1hcCwgdlV2MiApLnh5eiAqIGxpZ2h0TWFwSW50ZW5zaXR5O1xcbiNlbmRpZlxcblwiLFxuICAgIGxpZ2h0bWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX0xJR0hUTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgbGlnaHRNYXA7XFxuXFx0dW5pZm9ybSBmbG9hdCBsaWdodE1hcEludGVuc2l0eTtcXG4jZW5kaWZcIixsaWdodHNfbGFtYmVydF92ZXJ0ZXg6XCJ2ZWMzIGRpZmZ1c2UgPSB2ZWMzKCAxLjAgKTtcXG5HZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5O1xcbmdlb21ldHJ5LnBvc2l0aW9uID0gbXZQb3NpdGlvbi54eXo7XFxuZ2VvbWV0cnkubm9ybWFsID0gbm9ybWFsaXplKCB0cmFuc2Zvcm1lZE5vcm1hbCApO1xcbmdlb21ldHJ5LnZpZXdEaXIgPSBub3JtYWxpemUoIC1tdlBvc2l0aW9uLnh5eiApO1xcbkdlb21ldHJpY0NvbnRleHQgYmFja0dlb21ldHJ5O1xcbmJhY2tHZW9tZXRyeS5wb3NpdGlvbiA9IGdlb21ldHJ5LnBvc2l0aW9uO1xcbmJhY2tHZW9tZXRyeS5ub3JtYWwgPSAtZ2VvbWV0cnkubm9ybWFsO1xcbmJhY2tHZW9tZXRyeS52aWV3RGlyID0gZ2VvbWV0cnkudmlld0RpcjtcXG52TGlnaHRGcm9udCA9IHZlYzMoIDAuMCApO1xcbiNpZmRlZiBET1VCTEVfU0lERURcXG5cXHR2TGlnaHRCYWNrID0gdmVjMyggMC4wICk7XFxuI2VuZGlmXFxuSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodDtcXG5mbG9hdCBkb3ROTDtcXG52ZWMzIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcXG4jaWYgTlVNX1BPSU5UX0xJR0hUUyA+IDBcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fUE9JTlRfTElHSFRTOyBpICsrICkge1xcblxcdFxcdGdldFBvaW50RGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBwb2ludExpZ2h0c1sgaSBdLCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcXG5cXHRcXHRkb3ROTCA9IGRvdCggZ2VvbWV0cnkubm9ybWFsLCBkaXJlY3RMaWdodC5kaXJlY3Rpb24gKTtcXG5cXHRcXHRkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2UgPSBQSSAqIGRpcmVjdExpZ2h0LmNvbG9yO1xcblxcdFxcdHZMaWdodEZyb250ICs9IHNhdHVyYXRlKCBkb3ROTCApICogZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xcblxcdFxcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cXHRcXHRcXHR2TGlnaHRCYWNrICs9IHNhdHVyYXRlKCAtZG90TkwgKSAqIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcXG5cXHRcXHQjZW5kaWZcXG5cXHR9XFxuI2VuZGlmXFxuI2lmIE5VTV9TUE9UX0xJR0hUUyA+IDBcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fU1BPVF9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0Z2V0U3BvdERpcmVjdExpZ2h0SXJyYWRpYW5jZSggc3BvdExpZ2h0c1sgaSBdLCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcXG5cXHRcXHRkb3ROTCA9IGRvdCggZ2VvbWV0cnkubm9ybWFsLCBkaXJlY3RMaWdodC5kaXJlY3Rpb24gKTtcXG5cXHRcXHRkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2UgPSBQSSAqIGRpcmVjdExpZ2h0LmNvbG9yO1xcblxcdFxcdHZMaWdodEZyb250ICs9IHNhdHVyYXRlKCBkb3ROTCApICogZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xcblxcdFxcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cXHRcXHRcXHR2TGlnaHRCYWNrICs9IHNhdHVyYXRlKCAtZG90TkwgKSAqIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcXG5cXHRcXHQjZW5kaWZcXG5cXHR9XFxuI2VuZGlmXFxuI2lmIE5VTV9ESVJfTElHSFRTID4gMFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9ESVJfTElHSFRTOyBpICsrICkge1xcblxcdFxcdGdldERpcmVjdGlvbmFsRGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBkaXJlY3Rpb25hbExpZ2h0c1sgaSBdLCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcXG5cXHRcXHRkb3ROTCA9IGRvdCggZ2VvbWV0cnkubm9ybWFsLCBkaXJlY3RMaWdodC5kaXJlY3Rpb24gKTtcXG5cXHRcXHRkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2UgPSBQSSAqIGRpcmVjdExpZ2h0LmNvbG9yO1xcblxcdFxcdHZMaWdodEZyb250ICs9IHNhdHVyYXRlKCBkb3ROTCApICogZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xcblxcdFxcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cXHRcXHRcXHR2TGlnaHRCYWNrICs9IHNhdHVyYXRlKCAtZG90TkwgKSAqIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcXG5cXHRcXHQjZW5kaWZcXG5cXHR9XFxuI2VuZGlmXFxuI2lmIE5VTV9IRU1JX0xJR0hUUyA+IDBcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fSEVNSV9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0dkxpZ2h0RnJvbnQgKz0gZ2V0SGVtaXNwaGVyZUxpZ2h0SXJyYWRpYW5jZSggaGVtaXNwaGVyZUxpZ2h0c1sgaSBdLCBnZW9tZXRyeSApO1xcblxcdFxcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cXHRcXHRcXHR2TGlnaHRCYWNrICs9IGdldEhlbWlzcGhlcmVMaWdodElycmFkaWFuY2UoIGhlbWlzcGhlcmVMaWdodHNbIGkgXSwgYmFja0dlb21ldHJ5ICk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0fVxcbiNlbmRpZlxcblwiLFxuICAgIGxpZ2h0c19wYXJzOlwidW5pZm9ybSB2ZWMzIGFtYmllbnRMaWdodENvbG9yO1xcbnZlYzMgZ2V0QW1iaWVudExpZ2h0SXJyYWRpYW5jZSggY29uc3QgaW4gdmVjMyBhbWJpZW50TGlnaHRDb2xvciApIHtcXG5cXHR2ZWMzIGlycmFkaWFuY2UgPSBhbWJpZW50TGlnaHRDb2xvcjtcXG5cXHQjaWZuZGVmIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFNcXG5cXHRcXHRpcnJhZGlhbmNlICo9IFBJO1xcblxcdCNlbmRpZlxcblxcdHJldHVybiBpcnJhZGlhbmNlO1xcbn1cXG4jaWYgTlVNX0RJUl9MSUdIVFMgPiAwXFxuXFx0c3RydWN0IERpcmVjdGlvbmFsTGlnaHQge1xcblxcdFxcdHZlYzMgZGlyZWN0aW9uO1xcblxcdFxcdHZlYzMgY29sb3I7XFxuXFx0XFx0aW50IHNoYWRvdztcXG5cXHRcXHRmbG9hdCBzaGFkb3dCaWFzO1xcblxcdFxcdGZsb2F0IHNoYWRvd1JhZGl1cztcXG5cXHRcXHR2ZWMyIHNoYWRvd01hcFNpemU7XFxuXFx0fTtcXG5cXHR1bmlmb3JtIERpcmVjdGlvbmFsTGlnaHQgZGlyZWN0aW9uYWxMaWdodHNbIE5VTV9ESVJfTElHSFRTIF07XFxuXFx0dm9pZCBnZXREaXJlY3Rpb25hbERpcmVjdExpZ2h0SXJyYWRpYW5jZSggY29uc3QgaW4gRGlyZWN0aW9uYWxMaWdodCBkaXJlY3Rpb25hbExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBvdXQgSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodCApIHtcXG5cXHRcXHRkaXJlY3RMaWdodC5jb2xvciA9IGRpcmVjdGlvbmFsTGlnaHQuY29sb3I7XFxuXFx0XFx0ZGlyZWN0TGlnaHQuZGlyZWN0aW9uID0gZGlyZWN0aW9uYWxMaWdodC5kaXJlY3Rpb247XFxuXFx0XFx0ZGlyZWN0TGlnaHQudmlzaWJsZSA9IHRydWU7XFxuXFx0fVxcbiNlbmRpZlxcbiNpZiBOVU1fUE9JTlRfTElHSFRTID4gMFxcblxcdHN0cnVjdCBQb2ludExpZ2h0IHtcXG5cXHRcXHR2ZWMzIHBvc2l0aW9uO1xcblxcdFxcdHZlYzMgY29sb3I7XFxuXFx0XFx0ZmxvYXQgZGlzdGFuY2U7XFxuXFx0XFx0ZmxvYXQgZGVjYXk7XFxuXFx0XFx0aW50IHNoYWRvdztcXG5cXHRcXHRmbG9hdCBzaGFkb3dCaWFzO1xcblxcdFxcdGZsb2F0IHNoYWRvd1JhZGl1cztcXG5cXHRcXHR2ZWMyIHNoYWRvd01hcFNpemU7XFxuXFx0XFx0ZmxvYXQgc2hhZG93Q2FtZXJhTmVhcjtcXG5cXHRcXHRmbG9hdCBzaGFkb3dDYW1lcmFGYXI7XFxuXFx0fTtcXG5cXHR1bmlmb3JtIFBvaW50TGlnaHQgcG9pbnRMaWdodHNbIE5VTV9QT0lOVF9MSUdIVFMgXTtcXG5cXHR2b2lkIGdldFBvaW50RGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBjb25zdCBpbiBQb2ludExpZ2h0IHBvaW50TGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIG91dCBJbmNpZGVudExpZ2h0IGRpcmVjdExpZ2h0ICkge1xcblxcdFxcdHZlYzMgbFZlY3RvciA9IHBvaW50TGlnaHQucG9zaXRpb24gLSBnZW9tZXRyeS5wb3NpdGlvbjtcXG5cXHRcXHRkaXJlY3RMaWdodC5kaXJlY3Rpb24gPSBub3JtYWxpemUoIGxWZWN0b3IgKTtcXG5cXHRcXHRmbG9hdCBsaWdodERpc3RhbmNlID0gbGVuZ3RoKCBsVmVjdG9yICk7XFxuXFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgPSBwb2ludExpZ2h0LmNvbG9yO1xcblxcdFxcdGRpcmVjdExpZ2h0LmNvbG9yICo9IHB1bmN0dWFsTGlnaHRJbnRlbnNpdHlUb0lycmFkaWFuY2VGYWN0b3IoIGxpZ2h0RGlzdGFuY2UsIHBvaW50TGlnaHQuZGlzdGFuY2UsIHBvaW50TGlnaHQuZGVjYXkgKTtcXG5cXHRcXHRkaXJlY3RMaWdodC52aXNpYmxlID0gKCBkaXJlY3RMaWdodC5jb2xvciAhPSB2ZWMzKCAwLjAgKSApO1xcblxcdH1cXG4jZW5kaWZcXG4jaWYgTlVNX1NQT1RfTElHSFRTID4gMFxcblxcdHN0cnVjdCBTcG90TGlnaHQge1xcblxcdFxcdHZlYzMgcG9zaXRpb247XFxuXFx0XFx0dmVjMyBkaXJlY3Rpb247XFxuXFx0XFx0dmVjMyBjb2xvcjtcXG5cXHRcXHRmbG9hdCBkaXN0YW5jZTtcXG5cXHRcXHRmbG9hdCBkZWNheTtcXG5cXHRcXHRmbG9hdCBjb25lQ29zO1xcblxcdFxcdGZsb2F0IHBlbnVtYnJhQ29zO1xcblxcdFxcdGludCBzaGFkb3c7XFxuXFx0XFx0ZmxvYXQgc2hhZG93QmlhcztcXG5cXHRcXHRmbG9hdCBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0dmVjMiBzaGFkb3dNYXBTaXplO1xcblxcdH07XFxuXFx0dW5pZm9ybSBTcG90TGlnaHQgc3BvdExpZ2h0c1sgTlVNX1NQT1RfTElHSFRTIF07XFxuXFx0dm9pZCBnZXRTcG90RGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBjb25zdCBpbiBTcG90TGlnaHQgc3BvdExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBvdXQgSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodCAgKSB7XFxuXFx0XFx0dmVjMyBsVmVjdG9yID0gc3BvdExpZ2h0LnBvc2l0aW9uIC0gZ2VvbWV0cnkucG9zaXRpb247XFxuXFx0XFx0ZGlyZWN0TGlnaHQuZGlyZWN0aW9uID0gbm9ybWFsaXplKCBsVmVjdG9yICk7XFxuXFx0XFx0ZmxvYXQgbGlnaHREaXN0YW5jZSA9IGxlbmd0aCggbFZlY3RvciApO1xcblxcdFxcdGZsb2F0IGFuZ2xlQ29zID0gZG90KCBkaXJlY3RMaWdodC5kaXJlY3Rpb24sIHNwb3RMaWdodC5kaXJlY3Rpb24gKTtcXG5cXHRcXHRpZiAoIGFuZ2xlQ29zID4gc3BvdExpZ2h0LmNvbmVDb3MgKSB7XFxuXFx0XFx0XFx0ZmxvYXQgc3BvdEVmZmVjdCA9IHNtb290aHN0ZXAoIHNwb3RMaWdodC5jb25lQ29zLCBzcG90TGlnaHQucGVudW1icmFDb3MsIGFuZ2xlQ29zICk7XFxuXFx0XFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgPSBzcG90TGlnaHQuY29sb3I7XFxuXFx0XFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgKj0gc3BvdEVmZmVjdCAqIHB1bmN0dWFsTGlnaHRJbnRlbnNpdHlUb0lycmFkaWFuY2VGYWN0b3IoIGxpZ2h0RGlzdGFuY2UsIHNwb3RMaWdodC5kaXN0YW5jZSwgc3BvdExpZ2h0LmRlY2F5ICk7XFxuXFx0XFx0XFx0ZGlyZWN0TGlnaHQudmlzaWJsZSA9IHRydWU7XFxuXFx0XFx0fSBlbHNlIHtcXG5cXHRcXHRcXHRkaXJlY3RMaWdodC5jb2xvciA9IHZlYzMoIDAuMCApO1xcblxcdFxcdFxcdGRpcmVjdExpZ2h0LnZpc2libGUgPSBmYWxzZTtcXG5cXHRcXHR9XFxuXFx0fVxcbiNlbmRpZlxcbiNpZiBOVU1fUkVDVF9BUkVBX0xJR0hUUyA+IDBcXG5cXHRzdHJ1Y3QgUmVjdEFyZWFMaWdodCB7XFxuXFx0XFx0dmVjMyBjb2xvcjtcXG5cXHRcXHR2ZWMzIHBvc2l0aW9uO1xcblxcdFxcdHZlYzMgaGFsZldpZHRoO1xcblxcdFxcdHZlYzMgaGFsZkhlaWdodDtcXG5cXHR9O1xcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGx0Y01hdDtcXHR1bmlmb3JtIHNhbXBsZXIyRCBsdGNNYWc7XFxuXFx0dW5pZm9ybSBSZWN0QXJlYUxpZ2h0IHJlY3RBcmVhTGlnaHRzWyBOVU1fUkVDVF9BUkVBX0xJR0hUUyBdO1xcbiNlbmRpZlxcbiNpZiBOVU1fSEVNSV9MSUdIVFMgPiAwXFxuXFx0c3RydWN0IEhlbWlzcGhlcmVMaWdodCB7XFxuXFx0XFx0dmVjMyBkaXJlY3Rpb247XFxuXFx0XFx0dmVjMyBza3lDb2xvcjtcXG5cXHRcXHR2ZWMzIGdyb3VuZENvbG9yO1xcblxcdH07XFxuXFx0dW5pZm9ybSBIZW1pc3BoZXJlTGlnaHQgaGVtaXNwaGVyZUxpZ2h0c1sgTlVNX0hFTUlfTElHSFRTIF07XFxuXFx0dmVjMyBnZXRIZW1pc3BoZXJlTGlnaHRJcnJhZGlhbmNlKCBjb25zdCBpbiBIZW1pc3BoZXJlTGlnaHQgaGVtaUxpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5ICkge1xcblxcdFxcdGZsb2F0IGRvdE5MID0gZG90KCBnZW9tZXRyeS5ub3JtYWwsIGhlbWlMaWdodC5kaXJlY3Rpb24gKTtcXG5cXHRcXHRmbG9hdCBoZW1pRGlmZnVzZVdlaWdodCA9IDAuNSAqIGRvdE5MICsgMC41O1xcblxcdFxcdHZlYzMgaXJyYWRpYW5jZSA9IG1peCggaGVtaUxpZ2h0Lmdyb3VuZENvbG9yLCBoZW1pTGlnaHQuc2t5Q29sb3IsIGhlbWlEaWZmdXNlV2VpZ2h0ICk7XFxuXFx0XFx0I2lmbmRlZiBQSFlTSUNBTExZX0NPUlJFQ1RfTElHSFRTXFxuXFx0XFx0XFx0aXJyYWRpYW5jZSAqPSBQSTtcXG5cXHRcXHQjZW5kaWZcXG5cXHRcXHRyZXR1cm4gaXJyYWRpYW5jZTtcXG5cXHR9XFxuI2VuZGlmXFxuI2lmIGRlZmluZWQoIFVTRV9FTlZNQVAgKSAmJiBkZWZpbmVkKCBQSFlTSUNBTCApXFxuXFx0dmVjMyBnZXRMaWdodFByb2JlSW5kaXJlY3RJcnJhZGlhbmNlKCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBpbnQgbWF4TUlQTGV2ZWwgKSB7XFxuXFx0XFx0dmVjMyB3b3JsZE5vcm1hbCA9IGludmVyc2VUcmFuc2Zvcm1EaXJlY3Rpb24oIGdlb21ldHJ5Lm5vcm1hbCwgdmlld01hdHJpeCApO1xcblxcdFxcdCNpZmRlZiBFTlZNQVBfVFlQRV9DVUJFXFxuXFx0XFx0XFx0dmVjMyBxdWVyeVZlYyA9IHZlYzMoIGZsaXBFbnZNYXAgKiB3b3JsZE5vcm1hbC54LCB3b3JsZE5vcm1hbC55eiApO1xcblxcdFxcdFxcdCNpZmRlZiBURVhUVVJFX0xPRF9FWFRcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmVMb2RFWFQoIGVudk1hcCwgcXVlcnlWZWMsIGZsb2F0KCBtYXhNSVBMZXZlbCApICk7XFxuXFx0XFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmUoIGVudk1hcCwgcXVlcnlWZWMsIGZsb2F0KCBtYXhNSVBMZXZlbCApICk7XFxuXFx0XFx0XFx0I2VuZGlmXFxuXFx0XFx0XFx0ZW52TWFwQ29sb3IucmdiID0gZW52TWFwVGV4ZWxUb0xpbmVhciggZW52TWFwQ29sb3IgKS5yZ2I7XFxuXFx0XFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX1RZUEVfQ1VCRV9VViApXFxuXFx0XFx0XFx0dmVjMyBxdWVyeVZlYyA9IHZlYzMoIGZsaXBFbnZNYXAgKiB3b3JsZE5vcm1hbC54LCB3b3JsZE5vcm1hbC55eiApO1xcblxcdFxcdFxcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlQ3ViZVVWKCBxdWVyeVZlYywgMS4wICk7XFxuXFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdmVjNCggMC4wICk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0cmV0dXJuIFBJICogZW52TWFwQ29sb3IucmdiICogZW52TWFwSW50ZW5zaXR5O1xcblxcdH1cXG5cXHRmbG9hdCBnZXRTcGVjdWxhck1JUExldmVsKCBjb25zdCBpbiBmbG9hdCBibGlublNoaW5pbmVzc0V4cG9uZW50LCBjb25zdCBpbiBpbnQgbWF4TUlQTGV2ZWwgKSB7XFxuXFx0XFx0ZmxvYXQgbWF4TUlQTGV2ZWxTY2FsYXIgPSBmbG9hdCggbWF4TUlQTGV2ZWwgKTtcXG5cXHRcXHRmbG9hdCBkZXNpcmVkTUlQTGV2ZWwgPSBtYXhNSVBMZXZlbFNjYWxhciArIDAuNzkyNDggLSAwLjUgKiBsb2cyKCBwb3cyKCBibGlublNoaW5pbmVzc0V4cG9uZW50ICkgKyAxLjAgKTtcXG5cXHRcXHRyZXR1cm4gY2xhbXAoIGRlc2lyZWRNSVBMZXZlbCwgMC4wLCBtYXhNSVBMZXZlbFNjYWxhciApO1xcblxcdH1cXG5cXHR2ZWMzIGdldExpZ2h0UHJvYmVJbmRpcmVjdFJhZGlhbmNlKCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBmbG9hdCBibGlublNoaW5pbmVzc0V4cG9uZW50LCBjb25zdCBpbiBpbnQgbWF4TUlQTGV2ZWwgKSB7XFxuXFx0XFx0I2lmZGVmIEVOVk1BUF9NT0RFX1JFRkxFQ1RJT05cXG5cXHRcXHRcXHR2ZWMzIHJlZmxlY3RWZWMgPSByZWZsZWN0KCAtZ2VvbWV0cnkudmlld0RpciwgZ2VvbWV0cnkubm9ybWFsICk7XFxuXFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHR2ZWMzIHJlZmxlY3RWZWMgPSByZWZyYWN0KCAtZ2VvbWV0cnkudmlld0RpciwgZ2VvbWV0cnkubm9ybWFsLCByZWZyYWN0aW9uUmF0aW8gKTtcXG5cXHRcXHQjZW5kaWZcXG5cXHRcXHRyZWZsZWN0VmVjID0gaW52ZXJzZVRyYW5zZm9ybURpcmVjdGlvbiggcmVmbGVjdFZlYywgdmlld01hdHJpeCApO1xcblxcdFxcdGZsb2F0IHNwZWN1bGFyTUlQTGV2ZWwgPSBnZXRTcGVjdWxhck1JUExldmVsKCBibGlublNoaW5pbmVzc0V4cG9uZW50LCBtYXhNSVBMZXZlbCApO1xcblxcdFxcdCNpZmRlZiBFTlZNQVBfVFlQRV9DVUJFXFxuXFx0XFx0XFx0dmVjMyBxdWVyeVJlZmxlY3RWZWMgPSB2ZWMzKCBmbGlwRW52TWFwICogcmVmbGVjdFZlYy54LCByZWZsZWN0VmVjLnl6ICk7XFxuXFx0XFx0XFx0I2lmZGVmIFRFWFRVUkVfTE9EX0VYVFxcblxcdFxcdFxcdFxcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlQ3ViZUxvZEVYVCggZW52TWFwLCBxdWVyeVJlZmxlY3RWZWMsIHNwZWN1bGFyTUlQTGV2ZWwgKTtcXG5cXHRcXHRcXHQjZWxzZVxcblxcdFxcdFxcdFxcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlQ3ViZSggZW52TWFwLCBxdWVyeVJlZmxlY3RWZWMsIHNwZWN1bGFyTUlQTGV2ZWwgKTtcXG5cXHRcXHRcXHQjZW5kaWZcXG5cXHRcXHRcXHRlbnZNYXBDb2xvci5yZ2IgPSBlbnZNYXBUZXhlbFRvTGluZWFyKCBlbnZNYXBDb2xvciApLnJnYjtcXG5cXHRcXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfVFlQRV9DVUJFX1VWIClcXG5cXHRcXHRcXHR2ZWMzIHF1ZXJ5UmVmbGVjdFZlYyA9IHZlYzMoIGZsaXBFbnZNYXAgKiByZWZsZWN0VmVjLngsIHJlZmxlY3RWZWMueXogKTtcXG5cXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmVVVihxdWVyeVJlZmxlY3RWZWMsIEJsaW5uRXhwb25lbnRUb0dHWFJvdWdobmVzcyhibGlublNoaW5pbmVzc0V4cG9uZW50KSk7XFxuXFx0XFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX1RZUEVfRVFVSVJFQyApXFxuXFx0XFx0XFx0dmVjMiBzYW1wbGVVVjtcXG5cXHRcXHRcXHRzYW1wbGVVVi55ID0gYXNpbiggY2xhbXAoIHJlZmxlY3RWZWMueSwgLSAxLjAsIDEuMCApICkgKiBSRUNJUFJPQ0FMX1BJICsgMC41O1xcblxcdFxcdFxcdHNhbXBsZVVWLnggPSBhdGFuKCByZWZsZWN0VmVjLnosIHJlZmxlY3RWZWMueCApICogUkVDSVBST0NBTF9QSTIgKyAwLjU7XFxuXFx0XFx0XFx0I2lmZGVmIFRFWFRVUkVfTE9EX0VYVFxcblxcdFxcdFxcdFxcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlMkRMb2RFWFQoIGVudk1hcCwgc2FtcGxlVVYsIHNwZWN1bGFyTUlQTGV2ZWwgKTtcXG5cXHRcXHRcXHQjZWxzZVxcblxcdFxcdFxcdFxcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlMkQoIGVudk1hcCwgc2FtcGxlVVYsIHNwZWN1bGFyTUlQTGV2ZWwgKTtcXG5cXHRcXHRcXHQjZW5kaWZcXG5cXHRcXHRcXHRlbnZNYXBDb2xvci5yZ2IgPSBlbnZNYXBUZXhlbFRvTGluZWFyKCBlbnZNYXBDb2xvciApLnJnYjtcXG5cXHRcXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfVFlQRV9TUEhFUkUgKVxcblxcdFxcdFxcdHZlYzMgcmVmbGVjdFZpZXcgPSBub3JtYWxpemUoICggdmlld01hdHJpeCAqIHZlYzQoIHJlZmxlY3RWZWMsIDAuMCApICkueHl6ICsgdmVjMyggMC4wLDAuMCwxLjAgKSApO1xcblxcdFxcdFxcdCNpZmRlZiBURVhUVVJFX0xPRF9FWFRcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZTJETG9kRVhUKCBlbnZNYXAsIHJlZmxlY3RWaWV3Lnh5ICogMC41ICsgMC41LCBzcGVjdWxhck1JUExldmVsICk7XFxuXFx0XFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZTJEKCBlbnZNYXAsIHJlZmxlY3RWaWV3Lnh5ICogMC41ICsgMC41LCBzcGVjdWxhck1JUExldmVsICk7XFxuXFx0XFx0XFx0I2VuZGlmXFxuXFx0XFx0XFx0ZW52TWFwQ29sb3IucmdiID0gZW52TWFwVGV4ZWxUb0xpbmVhciggZW52TWFwQ29sb3IgKS5yZ2I7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0cmV0dXJuIGVudk1hcENvbG9yLnJnYiAqIGVudk1hcEludGVuc2l0eTtcXG5cXHR9XFxuI2VuZGlmXFxuXCIsXG4gICAgbGlnaHRzX3Bob25nX2ZyYWdtZW50OlwiQmxpbm5QaG9uZ01hdGVyaWFsIG1hdGVyaWFsO1xcbm1hdGVyaWFsLmRpZmZ1c2VDb2xvciA9IGRpZmZ1c2VDb2xvci5yZ2I7XFxubWF0ZXJpYWwuc3BlY3VsYXJDb2xvciA9IHNwZWN1bGFyO1xcbm1hdGVyaWFsLnNwZWN1bGFyU2hpbmluZXNzID0gc2hpbmluZXNzO1xcbm1hdGVyaWFsLnNwZWN1bGFyU3RyZW5ndGggPSBzcGVjdWxhclN0cmVuZ3RoO1xcblwiLGxpZ2h0c19waG9uZ19wYXJzX2ZyYWdtZW50OlwidmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcbiNlbmRpZlxcbnN0cnVjdCBCbGlublBob25nTWF0ZXJpYWwge1xcblxcdHZlYzNcXHRkaWZmdXNlQ29sb3I7XFxuXFx0dmVjM1xcdHNwZWN1bGFyQ29sb3I7XFxuXFx0ZmxvYXRcXHRzcGVjdWxhclNoaW5pbmVzcztcXG5cXHRmbG9hdFxcdHNwZWN1bGFyU3RyZW5ndGg7XFxufTtcXG52b2lkIFJFX0RpcmVjdF9CbGlublBob25nKCBjb25zdCBpbiBJbmNpZGVudExpZ2h0IGRpcmVjdExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBCbGlublBob25nTWF0ZXJpYWwgbWF0ZXJpYWwsIGlub3V0IFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ICkge1xcblxcdCNpZmRlZiBUT09OXFxuXFx0XFx0dmVjMyBpcnJhZGlhbmNlID0gZ2V0R3JhZGllbnRJcnJhZGlhbmNlKCBnZW9tZXRyeS5ub3JtYWwsIGRpcmVjdExpZ2h0LmRpcmVjdGlvbiApICogZGlyZWN0TGlnaHQuY29sb3I7XFxuXFx0I2Vsc2VcXG5cXHRcXHRmbG9hdCBkb3ROTCA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICkgKTtcXG5cXHRcXHR2ZWMzIGlycmFkaWFuY2UgPSBkb3ROTCAqIGRpcmVjdExpZ2h0LmNvbG9yO1xcblxcdCNlbmRpZlxcblxcdCNpZm5kZWYgUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUU1xcblxcdFxcdGlycmFkaWFuY2UgKj0gUEk7XFxuXFx0I2VuZGlmXFxuXFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArPSBpcnJhZGlhbmNlICogQlJERl9EaWZmdXNlX0xhbWJlcnQoIG1hdGVyaWFsLmRpZmZ1c2VDb2xvciApO1xcblxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdFNwZWN1bGFyICs9IGlycmFkaWFuY2UgKiBCUkRGX1NwZWN1bGFyX0JsaW5uUGhvbmcoIGRpcmVjdExpZ2h0LCBnZW9tZXRyeSwgbWF0ZXJpYWwuc3BlY3VsYXJDb2xvciwgbWF0ZXJpYWwuc3BlY3VsYXJTaGluaW5lc3MgKSAqIG1hdGVyaWFsLnNwZWN1bGFyU3RyZW5ndGg7XFxufVxcbnZvaWQgUkVfSW5kaXJlY3REaWZmdXNlX0JsaW5uUGhvbmcoIGNvbnN0IGluIHZlYzMgaXJyYWRpYW5jZSwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gQmxpbm5QaG9uZ01hdGVyaWFsIG1hdGVyaWFsLCBpbm91dCBSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCApIHtcXG5cXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKz0gaXJyYWRpYW5jZSAqIEJSREZfRGlmZnVzZV9MYW1iZXJ0KCBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgKTtcXG59XFxuI2RlZmluZSBSRV9EaXJlY3RcXHRcXHRcXHRcXHRSRV9EaXJlY3RfQmxpbm5QaG9uZ1xcbiNkZWZpbmUgUkVfSW5kaXJlY3REaWZmdXNlXFx0XFx0UkVfSW5kaXJlY3REaWZmdXNlX0JsaW5uUGhvbmdcXG4jZGVmaW5lIE1hdGVyaWFsX0xpZ2h0UHJvYmVMT0QoIG1hdGVyaWFsIClcXHQoMClcXG5cIixcbiAgICBsaWdodHNfcGh5c2ljYWxfZnJhZ21lbnQ6XCJQaHlzaWNhbE1hdGVyaWFsIG1hdGVyaWFsO1xcbm1hdGVyaWFsLmRpZmZ1c2VDb2xvciA9IGRpZmZ1c2VDb2xvci5yZ2IgKiAoIDEuMCAtIG1ldGFsbmVzc0ZhY3RvciApO1xcbm1hdGVyaWFsLnNwZWN1bGFyUm91Z2huZXNzID0gY2xhbXAoIHJvdWdobmVzc0ZhY3RvciwgMC4wNCwgMS4wICk7XFxuI2lmZGVmIFNUQU5EQVJEXFxuXFx0bWF0ZXJpYWwuc3BlY3VsYXJDb2xvciA9IG1peCggdmVjMyggREVGQVVMVF9TUEVDVUxBUl9DT0VGRklDSUVOVCApLCBkaWZmdXNlQ29sb3IucmdiLCBtZXRhbG5lc3NGYWN0b3IgKTtcXG4jZWxzZVxcblxcdG1hdGVyaWFsLnNwZWN1bGFyQ29sb3IgPSBtaXgoIHZlYzMoIE1BWElNVU1fU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgKiBwb3cyKCByZWZsZWN0aXZpdHkgKSApLCBkaWZmdXNlQ29sb3IucmdiLCBtZXRhbG5lc3NGYWN0b3IgKTtcXG5cXHRtYXRlcmlhbC5jbGVhckNvYXQgPSBzYXR1cmF0ZSggY2xlYXJDb2F0ICk7XFx0bWF0ZXJpYWwuY2xlYXJDb2F0Um91Z2huZXNzID0gY2xhbXAoIGNsZWFyQ29hdFJvdWdobmVzcywgMC4wNCwgMS4wICk7XFxuI2VuZGlmXFxuXCIsXG4gICAgbGlnaHRzX3BoeXNpY2FsX3BhcnNfZnJhZ21lbnQ6XCJzdHJ1Y3QgUGh5c2ljYWxNYXRlcmlhbCB7XFxuXFx0dmVjM1xcdGRpZmZ1c2VDb2xvcjtcXG5cXHRmbG9hdFxcdHNwZWN1bGFyUm91Z2huZXNzO1xcblxcdHZlYzNcXHRzcGVjdWxhckNvbG9yO1xcblxcdCNpZm5kZWYgU1RBTkRBUkRcXG5cXHRcXHRmbG9hdCBjbGVhckNvYXQ7XFxuXFx0XFx0ZmxvYXQgY2xlYXJDb2F0Um91Z2huZXNzO1xcblxcdCNlbmRpZlxcbn07XFxuI2RlZmluZSBNQVhJTVVNX1NQRUNVTEFSX0NPRUZGSUNJRU5UIDAuMTZcXG4jZGVmaW5lIERFRkFVTFRfU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgMC4wNFxcbmZsb2F0IGNsZWFyQ29hdERIUkFwcHJveCggY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzLCBjb25zdCBpbiBmbG9hdCBkb3ROTCApIHtcXG5cXHRyZXR1cm4gREVGQVVMVF9TUEVDVUxBUl9DT0VGRklDSUVOVCArICggMS4wIC0gREVGQVVMVF9TUEVDVUxBUl9DT0VGRklDSUVOVCApICogKCBwb3coIDEuMCAtIGRvdE5MLCA1LjAgKSAqIHBvdyggMS4wIC0gcm91Z2huZXNzLCAyLjAgKSApO1xcbn1cXG4jaWYgTlVNX1JFQ1RfQVJFQV9MSUdIVFMgPiAwXFxuXFx0dm9pZCBSRV9EaXJlY3RfUmVjdEFyZWFfUGh5c2ljYWwoIGNvbnN0IGluIFJlY3RBcmVhTGlnaHQgcmVjdEFyZWFMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gUGh5c2ljYWxNYXRlcmlhbCBtYXRlcmlhbCwgaW5vdXQgUmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgKSB7XFxuXFx0XFx0dmVjMyBub3JtYWwgPSBnZW9tZXRyeS5ub3JtYWw7XFxuXFx0XFx0dmVjMyB2aWV3RGlyID0gZ2VvbWV0cnkudmlld0RpcjtcXG5cXHRcXHR2ZWMzIHBvc2l0aW9uID0gZ2VvbWV0cnkucG9zaXRpb247XFxuXFx0XFx0dmVjMyBsaWdodFBvcyA9IHJlY3RBcmVhTGlnaHQucG9zaXRpb247XFxuXFx0XFx0dmVjMyBoYWxmV2lkdGggPSByZWN0QXJlYUxpZ2h0LmhhbGZXaWR0aDtcXG5cXHRcXHR2ZWMzIGhhbGZIZWlnaHQgPSByZWN0QXJlYUxpZ2h0LmhhbGZIZWlnaHQ7XFxuXFx0XFx0dmVjMyBsaWdodENvbG9yID0gcmVjdEFyZWFMaWdodC5jb2xvcjtcXG5cXHRcXHRmbG9hdCByb3VnaG5lc3MgPSBtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcztcXG5cXHRcXHR2ZWMzIHJlY3RDb29yZHNbIDQgXTtcXG5cXHRcXHRyZWN0Q29vcmRzWyAwIF0gPSBsaWdodFBvcyAtIGhhbGZXaWR0aCAtIGhhbGZIZWlnaHQ7XFx0XFx0cmVjdENvb3Jkc1sgMSBdID0gbGlnaHRQb3MgKyBoYWxmV2lkdGggLSBoYWxmSGVpZ2h0O1xcblxcdFxcdHJlY3RDb29yZHNbIDIgXSA9IGxpZ2h0UG9zICsgaGFsZldpZHRoICsgaGFsZkhlaWdodDtcXG5cXHRcXHRyZWN0Q29vcmRzWyAzIF0gPSBsaWdodFBvcyAtIGhhbGZXaWR0aCArIGhhbGZIZWlnaHQ7XFxuXFx0XFx0dmVjMiB1diA9IExUQ19Vdiggbm9ybWFsLCB2aWV3RGlyLCByb3VnaG5lc3MgKTtcXG5cXHRcXHRmbG9hdCBub3JtID0gdGV4dHVyZTJEKCBsdGNNYWcsIHV2ICkuYTtcXG5cXHRcXHR2ZWM0IHQgPSB0ZXh0dXJlMkQoIGx0Y01hdCwgdXYgKTtcXG5cXHRcXHRtYXQzIG1JbnYgPSBtYXQzKFxcblxcdFxcdFxcdHZlYzMoICAgMSwgICAwLCB0LnkgKSxcXG5cXHRcXHRcXHR2ZWMzKCAgIDAsIHQueiwgICAwICksXFxuXFx0XFx0XFx0dmVjMyggdC53LCAgIDAsIHQueCApXFxuXFx0XFx0KTtcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3RTcGVjdWxhciArPSBsaWdodENvbG9yICogbWF0ZXJpYWwuc3BlY3VsYXJDb2xvciAqIG5vcm0gKiBMVENfRXZhbHVhdGUoIG5vcm1hbCwgdmlld0RpciwgcG9zaXRpb24sIG1JbnYsIHJlY3RDb29yZHMgKTtcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlICs9IGxpZ2h0Q29sb3IgKiBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgKiBMVENfRXZhbHVhdGUoIG5vcm1hbCwgdmlld0RpciwgcG9zaXRpb24sIG1hdDMoIDEgKSwgcmVjdENvb3JkcyApO1xcblxcdH1cXG4jZW5kaWZcXG52b2lkIFJFX0RpcmVjdF9QaHlzaWNhbCggY29uc3QgaW4gSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gUGh5c2ljYWxNYXRlcmlhbCBtYXRlcmlhbCwgaW5vdXQgUmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgKSB7XFxuXFx0ZmxvYXQgZG90TkwgPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGRpcmVjdExpZ2h0LmRpcmVjdGlvbiApICk7XFxuXFx0dmVjMyBpcnJhZGlhbmNlID0gZG90TkwgKiBkaXJlY3RMaWdodC5jb2xvcjtcXG5cXHQjaWZuZGVmIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFNcXG5cXHRcXHRpcnJhZGlhbmNlICo9IFBJO1xcblxcdCNlbmRpZlxcblxcdCNpZm5kZWYgU1RBTkRBUkRcXG5cXHRcXHRmbG9hdCBjbGVhckNvYXRESFIgPSBtYXRlcmlhbC5jbGVhckNvYXQgKiBjbGVhckNvYXRESFJBcHByb3goIG1hdGVyaWFsLmNsZWFyQ29hdFJvdWdobmVzcywgZG90TkwgKTtcXG5cXHQjZWxzZVxcblxcdFxcdGZsb2F0IGNsZWFyQ29hdERIUiA9IDAuMDtcXG5cXHQjZW5kaWZcXG5cXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3RTcGVjdWxhciArPSAoIDEuMCAtIGNsZWFyQ29hdERIUiApICogaXJyYWRpYW5jZSAqIEJSREZfU3BlY3VsYXJfR0dYKCBkaXJlY3RMaWdodCwgZ2VvbWV0cnksIG1hdGVyaWFsLnNwZWN1bGFyQ29sb3IsIG1hdGVyaWFsLnNwZWN1bGFyUm91Z2huZXNzICk7XFxuXFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArPSAoIDEuMCAtIGNsZWFyQ29hdERIUiApICogaXJyYWRpYW5jZSAqIEJSREZfRGlmZnVzZV9MYW1iZXJ0KCBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgKTtcXG5cXHQjaWZuZGVmIFNUQU5EQVJEXFxuXFx0XFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKz0gaXJyYWRpYW5jZSAqIG1hdGVyaWFsLmNsZWFyQ29hdCAqIEJSREZfU3BlY3VsYXJfR0dYKCBkaXJlY3RMaWdodCwgZ2VvbWV0cnksIHZlYzMoIERFRkFVTFRfU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgKSwgbWF0ZXJpYWwuY2xlYXJDb2F0Um91Z2huZXNzICk7XFxuXFx0I2VuZGlmXFxufVxcbnZvaWQgUkVfSW5kaXJlY3REaWZmdXNlX1BoeXNpY2FsKCBjb25zdCBpbiB2ZWMzIGlycmFkaWFuY2UsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIFBoeXNpY2FsTWF0ZXJpYWwgbWF0ZXJpYWwsIGlub3V0IFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ICkge1xcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArPSBpcnJhZGlhbmNlICogQlJERl9EaWZmdXNlX0xhbWJlcnQoIG1hdGVyaWFsLmRpZmZ1c2VDb2xvciApO1xcbn1cXG52b2lkIFJFX0luZGlyZWN0U3BlY3VsYXJfUGh5c2ljYWwoIGNvbnN0IGluIHZlYzMgcmFkaWFuY2UsIGNvbnN0IGluIHZlYzMgY2xlYXJDb2F0UmFkaWFuY2UsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIFBoeXNpY2FsTWF0ZXJpYWwgbWF0ZXJpYWwsIGlub3V0IFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ICkge1xcblxcdCNpZm5kZWYgU1RBTkRBUkRcXG5cXHRcXHRmbG9hdCBkb3ROViA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZ2VvbWV0cnkudmlld0RpciApICk7XFxuXFx0XFx0ZmxvYXQgZG90TkwgPSBkb3ROVjtcXG5cXHRcXHRmbG9hdCBjbGVhckNvYXRESFIgPSBtYXRlcmlhbC5jbGVhckNvYXQgKiBjbGVhckNvYXRESFJBcHByb3goIG1hdGVyaWFsLmNsZWFyQ29hdFJvdWdobmVzcywgZG90TkwgKTtcXG5cXHQjZWxzZVxcblxcdFxcdGZsb2F0IGNsZWFyQ29hdERIUiA9IDAuMDtcXG5cXHQjZW5kaWZcXG5cXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdFNwZWN1bGFyICs9ICggMS4wIC0gY2xlYXJDb2F0REhSICkgKiByYWRpYW5jZSAqIEJSREZfU3BlY3VsYXJfR0dYX0Vudmlyb25tZW50KCBnZW9tZXRyeSwgbWF0ZXJpYWwuc3BlY3VsYXJDb2xvciwgbWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3MgKTtcXG5cXHQjaWZuZGVmIFNUQU5EQVJEXFxuXFx0XFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3RTcGVjdWxhciArPSBjbGVhckNvYXRSYWRpYW5jZSAqIG1hdGVyaWFsLmNsZWFyQ29hdCAqIEJSREZfU3BlY3VsYXJfR0dYX0Vudmlyb25tZW50KCBnZW9tZXRyeSwgdmVjMyggREVGQVVMVF9TUEVDVUxBUl9DT0VGRklDSUVOVCApLCBtYXRlcmlhbC5jbGVhckNvYXRSb3VnaG5lc3MgKTtcXG5cXHQjZW5kaWZcXG59XFxuI2RlZmluZSBSRV9EaXJlY3RcXHRcXHRcXHRcXHRSRV9EaXJlY3RfUGh5c2ljYWxcXG4jZGVmaW5lIFJFX0RpcmVjdF9SZWN0QXJlYVxcdFxcdFJFX0RpcmVjdF9SZWN0QXJlYV9QaHlzaWNhbFxcbiNkZWZpbmUgUkVfSW5kaXJlY3REaWZmdXNlXFx0XFx0UkVfSW5kaXJlY3REaWZmdXNlX1BoeXNpY2FsXFxuI2RlZmluZSBSRV9JbmRpcmVjdFNwZWN1bGFyXFx0XFx0UkVfSW5kaXJlY3RTcGVjdWxhcl9QaHlzaWNhbFxcbiNkZWZpbmUgTWF0ZXJpYWxfQmxpbm5TaGluaW5lc3NFeHBvbmVudCggbWF0ZXJpYWwgKSAgIEdHWFJvdWdobmVzc1RvQmxpbm5FeHBvbmVudCggbWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3MgKVxcbiNkZWZpbmUgTWF0ZXJpYWxfQ2xlYXJDb2F0X0JsaW5uU2hpbmluZXNzRXhwb25lbnQoIG1hdGVyaWFsICkgICBHR1hSb3VnaG5lc3NUb0JsaW5uRXhwb25lbnQoIG1hdGVyaWFsLmNsZWFyQ29hdFJvdWdobmVzcyApXFxuZmxvYXQgY29tcHV0ZVNwZWN1bGFyT2NjbHVzaW9uKCBjb25zdCBpbiBmbG9hdCBkb3ROViwgY29uc3QgaW4gZmxvYXQgYW1iaWVudE9jY2x1c2lvbiwgY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzICkge1xcblxcdHJldHVybiBzYXR1cmF0ZSggcG93KCBkb3ROViArIGFtYmllbnRPY2NsdXNpb24sIGV4cDIoIC0gMTYuMCAqIHJvdWdobmVzcyAtIDEuMCApICkgLSAxLjAgKyBhbWJpZW50T2NjbHVzaW9uICk7XFxufVxcblwiLFxuICAgIGxpZ2h0c190ZW1wbGF0ZTpcIlxcbkdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnk7XFxuZ2VvbWV0cnkucG9zaXRpb24gPSAtIHZWaWV3UG9zaXRpb247XFxuZ2VvbWV0cnkubm9ybWFsID0gbm9ybWFsO1xcbmdlb21ldHJ5LnZpZXdEaXIgPSBub3JtYWxpemUoIHZWaWV3UG9zaXRpb24gKTtcXG5JbmNpZGVudExpZ2h0IGRpcmVjdExpZ2h0O1xcbiNpZiAoIE5VTV9QT0lOVF9MSUdIVFMgPiAwICkgJiYgZGVmaW5lZCggUkVfRGlyZWN0IClcXG5cXHRQb2ludExpZ2h0IHBvaW50TGlnaHQ7XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1BPSU5UX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHRwb2ludExpZ2h0ID0gcG9pbnRMaWdodHNbIGkgXTtcXG5cXHRcXHRnZXRQb2ludERpcmVjdExpZ2h0SXJyYWRpYW5jZSggcG9pbnRMaWdodCwgZ2VvbWV0cnksIGRpcmVjdExpZ2h0ICk7XFxuXFx0XFx0I2lmZGVmIFVTRV9TSEFET1dNQVBcXG5cXHRcXHRkaXJlY3RMaWdodC5jb2xvciAqPSBhbGwoIGJ2ZWMyKCBwb2ludExpZ2h0LnNoYWRvdywgZGlyZWN0TGlnaHQudmlzaWJsZSApICkgPyBnZXRQb2ludFNoYWRvdyggcG9pbnRTaGFkb3dNYXBbIGkgXSwgcG9pbnRMaWdodC5zaGFkb3dNYXBTaXplLCBwb2ludExpZ2h0LnNoYWRvd0JpYXMsIHBvaW50TGlnaHQuc2hhZG93UmFkaXVzLCB2UG9pbnRTaGFkb3dDb29yZFsgaSBdLCBwb2ludExpZ2h0LnNoYWRvd0NhbWVyYU5lYXIsIHBvaW50TGlnaHQuc2hhZG93Q2FtZXJhRmFyICkgOiAxLjA7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0UkVfRGlyZWN0KCBkaXJlY3RMaWdodCwgZ2VvbWV0cnksIG1hdGVyaWFsLCByZWZsZWN0ZWRMaWdodCApO1xcblxcdH1cXG4jZW5kaWZcXG4jaWYgKCBOVU1fU1BPVF9MSUdIVFMgPiAwICkgJiYgZGVmaW5lZCggUkVfRGlyZWN0IClcXG5cXHRTcG90TGlnaHQgc3BvdExpZ2h0O1xcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9TUE9UX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHRzcG90TGlnaHQgPSBzcG90TGlnaHRzWyBpIF07XFxuXFx0XFx0Z2V0U3BvdERpcmVjdExpZ2h0SXJyYWRpYW5jZSggc3BvdExpZ2h0LCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcXG5cXHRcXHQjaWZkZWYgVVNFX1NIQURPV01BUFxcblxcdFxcdGRpcmVjdExpZ2h0LmNvbG9yICo9IGFsbCggYnZlYzIoIHNwb3RMaWdodC5zaGFkb3csIGRpcmVjdExpZ2h0LnZpc2libGUgKSApID8gZ2V0U2hhZG93KCBzcG90U2hhZG93TWFwWyBpIF0sIHNwb3RMaWdodC5zaGFkb3dNYXBTaXplLCBzcG90TGlnaHQuc2hhZG93Qmlhcywgc3BvdExpZ2h0LnNoYWRvd1JhZGl1cywgdlNwb3RTaGFkb3dDb29yZFsgaSBdICkgOiAxLjA7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0UkVfRGlyZWN0KCBkaXJlY3RMaWdodCwgZ2VvbWV0cnksIG1hdGVyaWFsLCByZWZsZWN0ZWRMaWdodCApO1xcblxcdH1cXG4jZW5kaWZcXG4jaWYgKCBOVU1fRElSX0xJR0hUUyA+IDAgKSAmJiBkZWZpbmVkKCBSRV9EaXJlY3QgKVxcblxcdERpcmVjdGlvbmFsTGlnaHQgZGlyZWN0aW9uYWxMaWdodDtcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fRElSX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHRkaXJlY3Rpb25hbExpZ2h0ID0gZGlyZWN0aW9uYWxMaWdodHNbIGkgXTtcXG5cXHRcXHRnZXREaXJlY3Rpb25hbERpcmVjdExpZ2h0SXJyYWRpYW5jZSggZGlyZWN0aW9uYWxMaWdodCwgZ2VvbWV0cnksIGRpcmVjdExpZ2h0ICk7XFxuXFx0XFx0I2lmZGVmIFVTRV9TSEFET1dNQVBcXG5cXHRcXHRkaXJlY3RMaWdodC5jb2xvciAqPSBhbGwoIGJ2ZWMyKCBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvdywgZGlyZWN0TGlnaHQudmlzaWJsZSApICkgPyBnZXRTaGFkb3coIGRpcmVjdGlvbmFsU2hhZG93TWFwWyBpIF0sIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93TWFwU2l6ZSwgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3dCaWFzLCBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvd1JhZGl1cywgdkRpcmVjdGlvbmFsU2hhZG93Q29vcmRbIGkgXSApIDogMS4wO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdFJFX0RpcmVjdCggZGlyZWN0TGlnaHQsIGdlb21ldHJ5LCBtYXRlcmlhbCwgcmVmbGVjdGVkTGlnaHQgKTtcXG5cXHR9XFxuI2VuZGlmXFxuI2lmICggTlVNX1JFQ1RfQVJFQV9MSUdIVFMgPiAwICkgJiYgZGVmaW5lZCggUkVfRGlyZWN0X1JlY3RBcmVhIClcXG5cXHRSZWN0QXJlYUxpZ2h0IHJlY3RBcmVhTGlnaHQ7XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1JFQ1RfQVJFQV9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0cmVjdEFyZWFMaWdodCA9IHJlY3RBcmVhTGlnaHRzWyBpIF07XFxuXFx0XFx0UkVfRGlyZWN0X1JlY3RBcmVhKCByZWN0QXJlYUxpZ2h0LCBnZW9tZXRyeSwgbWF0ZXJpYWwsIHJlZmxlY3RlZExpZ2h0ICk7XFxuXFx0fVxcbiNlbmRpZlxcbiNpZiBkZWZpbmVkKCBSRV9JbmRpcmVjdERpZmZ1c2UgKVxcblxcdHZlYzMgaXJyYWRpYW5jZSA9IGdldEFtYmllbnRMaWdodElycmFkaWFuY2UoIGFtYmllbnRMaWdodENvbG9yICk7XFxuXFx0I2lmZGVmIFVTRV9MSUdIVE1BUFxcblxcdFxcdHZlYzMgbGlnaHRNYXBJcnJhZGlhbmNlID0gdGV4dHVyZTJEKCBsaWdodE1hcCwgdlV2MiApLnh5eiAqIGxpZ2h0TWFwSW50ZW5zaXR5O1xcblxcdFxcdCNpZm5kZWYgUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUU1xcblxcdFxcdFxcdGxpZ2h0TWFwSXJyYWRpYW5jZSAqPSBQSTtcXG5cXHRcXHQjZW5kaWZcXG5cXHRcXHRpcnJhZGlhbmNlICs9IGxpZ2h0TWFwSXJyYWRpYW5jZTtcXG5cXHQjZW5kaWZcXG5cXHQjaWYgKCBOVU1fSEVNSV9MSUdIVFMgPiAwIClcXG5cXHRcXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fSEVNSV9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0XFx0aXJyYWRpYW5jZSArPSBnZXRIZW1pc3BoZXJlTGlnaHRJcnJhZGlhbmNlKCBoZW1pc3BoZXJlTGlnaHRzWyBpIF0sIGdlb21ldHJ5ICk7XFxuXFx0XFx0fVxcblxcdCNlbmRpZlxcblxcdCNpZiBkZWZpbmVkKCBVU0VfRU5WTUFQICkgJiYgZGVmaW5lZCggUEhZU0lDQUwgKSAmJiBkZWZpbmVkKCBFTlZNQVBfVFlQRV9DVUJFX1VWIClcXG5cXHRcXHRpcnJhZGlhbmNlICs9IGdldExpZ2h0UHJvYmVJbmRpcmVjdElycmFkaWFuY2UoIGdlb21ldHJ5LCA4ICk7XFxuXFx0I2VuZGlmXFxuXFx0UkVfSW5kaXJlY3REaWZmdXNlKCBpcnJhZGlhbmNlLCBnZW9tZXRyeSwgbWF0ZXJpYWwsIHJlZmxlY3RlZExpZ2h0ICk7XFxuI2VuZGlmXFxuI2lmIGRlZmluZWQoIFVTRV9FTlZNQVAgKSAmJiBkZWZpbmVkKCBSRV9JbmRpcmVjdFNwZWN1bGFyIClcXG5cXHR2ZWMzIHJhZGlhbmNlID0gZ2V0TGlnaHRQcm9iZUluZGlyZWN0UmFkaWFuY2UoIGdlb21ldHJ5LCBNYXRlcmlhbF9CbGlublNoaW5pbmVzc0V4cG9uZW50KCBtYXRlcmlhbCApLCA4ICk7XFxuXFx0I2lmbmRlZiBTVEFOREFSRFxcblxcdFxcdHZlYzMgY2xlYXJDb2F0UmFkaWFuY2UgPSBnZXRMaWdodFByb2JlSW5kaXJlY3RSYWRpYW5jZSggZ2VvbWV0cnksIE1hdGVyaWFsX0NsZWFyQ29hdF9CbGlublNoaW5pbmVzc0V4cG9uZW50KCBtYXRlcmlhbCApLCA4ICk7XFxuXFx0I2Vsc2VcXG5cXHRcXHR2ZWMzIGNsZWFyQ29hdFJhZGlhbmNlID0gdmVjMyggMC4wICk7XFxuXFx0I2VuZGlmXFxuXFx0UkVfSW5kaXJlY3RTcGVjdWxhciggcmFkaWFuY2UsIGNsZWFyQ29hdFJhZGlhbmNlLCBnZW9tZXRyeSwgbWF0ZXJpYWwsIHJlZmxlY3RlZExpZ2h0ICk7XFxuI2VuZGlmXFxuXCIsXG4gICAgbG9nZGVwdGhidWZfZnJhZ21lbnQ6XCIjaWYgZGVmaW5lZCggVVNFX0xPR0RFUFRIQlVGICkgJiYgZGVmaW5lZCggVVNFX0xPR0RFUFRIQlVGX0VYVCApXFxuXFx0Z2xfRnJhZ0RlcHRoRVhUID0gbG9nMiggdkZyYWdEZXB0aCApICogbG9nRGVwdGhCdWZGQyAqIDAuNTtcXG4jZW5kaWZcIixsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9MT0dERVBUSEJVRlxcblxcdHVuaWZvcm0gZmxvYXQgbG9nRGVwdGhCdWZGQztcXG5cXHQjaWZkZWYgVVNFX0xPR0RFUFRIQlVGX0VYVFxcblxcdFxcdHZhcnlpbmcgZmxvYXQgdkZyYWdEZXB0aDtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG5cIixsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleDpcIiNpZmRlZiBVU0VfTE9HREVQVEhCVUZcXG5cXHQjaWZkZWYgVVNFX0xPR0RFUFRIQlVGX0VYVFxcblxcdFxcdHZhcnlpbmcgZmxvYXQgdkZyYWdEZXB0aDtcXG5cXHQjZW5kaWZcXG5cXHR1bmlmb3JtIGZsb2F0IGxvZ0RlcHRoQnVmRkM7XFxuI2VuZGlmXCIsbG9nZGVwdGhidWZfdmVydGV4OlwiI2lmZGVmIFVTRV9MT0dERVBUSEJVRlxcblxcdCNpZmRlZiBVU0VfTE9HREVQVEhCVUZfRVhUXFxuXFx0XFx0dkZyYWdEZXB0aCA9IDEuMCArIGdsX1Bvc2l0aW9uLnc7XFxuXFx0I2Vsc2VcXG5cXHRcXHRnbF9Qb3NpdGlvbi56ID0gbG9nMiggbWF4KCBFUFNJTE9OLCBnbF9Qb3NpdGlvbi53ICsgMS4wICkgKSAqIGxvZ0RlcHRoQnVmRkMgLSAxLjA7XFxuXFx0XFx0Z2xfUG9zaXRpb24ueiAqPSBnbF9Qb3NpdGlvbi53O1xcblxcdCNlbmRpZlxcbiNlbmRpZlxcblwiLFxuICAgIG1hcF9mcmFnbWVudDpcIiNpZmRlZiBVU0VfTUFQXFxuXFx0dmVjNCB0ZXhlbENvbG9yID0gdGV4dHVyZTJEKCBtYXAsIHZVdiApO1xcblxcdHRleGVsQ29sb3IgPSBtYXBUZXhlbFRvTGluZWFyKCB0ZXhlbENvbG9yICk7XFxuXFx0ZGlmZnVzZUNvbG9yICo9IHRleGVsQ29sb3I7XFxuI2VuZGlmXFxuXCIsbWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX01BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIG1hcDtcXG4jZW5kaWZcXG5cIixtYXBfcGFydGljbGVfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX01BUFxcblxcdHZlYzIgdXYgPSAoIHV2VHJhbnNmb3JtICogdmVjMyggZ2xfUG9pbnRDb29yZC54LCAxLjAgLSBnbF9Qb2ludENvb3JkLnksIDEgKSApLnh5O1xcblxcdHZlYzQgbWFwVGV4ZWwgPSB0ZXh0dXJlMkQoIG1hcCwgdXYgKTtcXG5cXHRkaWZmdXNlQ29sb3IgKj0gbWFwVGV4ZWxUb0xpbmVhciggbWFwVGV4ZWwgKTtcXG4jZW5kaWZcXG5cIixtYXBfcGFydGljbGVfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfTUFQXFxuXFx0dW5pZm9ybSBtYXQzIHV2VHJhbnNmb3JtO1xcblxcdHVuaWZvcm0gc2FtcGxlcjJEIG1hcDtcXG4jZW5kaWZcXG5cIixcbiAgICBtZXRhbG5lc3NtYXBfZnJhZ21lbnQ6XCJmbG9hdCBtZXRhbG5lc3NGYWN0b3IgPSBtZXRhbG5lc3M7XFxuI2lmZGVmIFVTRV9NRVRBTE5FU1NNQVBcXG5cXHR2ZWM0IHRleGVsTWV0YWxuZXNzID0gdGV4dHVyZTJEKCBtZXRhbG5lc3NNYXAsIHZVdiApO1xcblxcdG1ldGFsbmVzc0ZhY3RvciAqPSB0ZXhlbE1ldGFsbmVzcy5iO1xcbiNlbmRpZlxcblwiLG1ldGFsbmVzc21hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9NRVRBTE5FU1NNQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCBtZXRhbG5lc3NNYXA7XFxuI2VuZGlmXCIsbW9ycGhub3JtYWxfdmVydGV4OlwiI2lmZGVmIFVTRV9NT1JQSE5PUk1BTFNcXG5cXHRvYmplY3ROb3JtYWwgKz0gKCBtb3JwaE5vcm1hbDAgLSBub3JtYWwgKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMCBdO1xcblxcdG9iamVjdE5vcm1hbCArPSAoIG1vcnBoTm9ybWFsMSAtIG5vcm1hbCApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAxIF07XFxuXFx0b2JqZWN0Tm9ybWFsICs9ICggbW9ycGhOb3JtYWwyIC0gbm9ybWFsICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDIgXTtcXG5cXHRvYmplY3ROb3JtYWwgKz0gKCBtb3JwaE5vcm1hbDMgLSBub3JtYWwgKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMyBdO1xcbiNlbmRpZlxcblwiLFxuICAgIG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4OlwiI2lmZGVmIFVTRV9NT1JQSFRBUkdFVFNcXG5cXHQjaWZuZGVmIFVTRV9NT1JQSE5PUk1BTFNcXG5cXHR1bmlmb3JtIGZsb2F0IG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgOCBdO1xcblxcdCNlbHNlXFxuXFx0dW5pZm9ybSBmbG9hdCBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDQgXTtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcIixtb3JwaHRhcmdldF92ZXJ0ZXg6XCIjaWZkZWYgVVNFX01PUlBIVEFSR0VUU1xcblxcdHRyYW5zZm9ybWVkICs9ICggbW9ycGhUYXJnZXQwIC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMCBdO1xcblxcdHRyYW5zZm9ybWVkICs9ICggbW9ycGhUYXJnZXQxIC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMSBdO1xcblxcdHRyYW5zZm9ybWVkICs9ICggbW9ycGhUYXJnZXQyIC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMiBdO1xcblxcdHRyYW5zZm9ybWVkICs9ICggbW9ycGhUYXJnZXQzIC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMyBdO1xcblxcdCNpZm5kZWYgVVNFX01PUlBITk9STUFMU1xcblxcdHRyYW5zZm9ybWVkICs9ICggbW9ycGhUYXJnZXQ0IC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgNCBdO1xcblxcdHRyYW5zZm9ybWVkICs9ICggbW9ycGhUYXJnZXQ1IC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgNSBdO1xcblxcdHRyYW5zZm9ybWVkICs9ICggbW9ycGhUYXJnZXQ2IC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgNiBdO1xcblxcdHRyYW5zZm9ybWVkICs9ICggbW9ycGhUYXJnZXQ3IC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgNyBdO1xcblxcdCNlbmRpZlxcbiNlbmRpZlxcblwiLFxuICAgIG5vcm1hbF9mcmFnbWVudDpcIiNpZmRlZiBGTEFUX1NIQURFRFxcblxcdHZlYzMgZmR4ID0gdmVjMyggZEZkeCggdlZpZXdQb3NpdGlvbi54ICksIGRGZHgoIHZWaWV3UG9zaXRpb24ueSApLCBkRmR4KCB2Vmlld1Bvc2l0aW9uLnogKSApO1xcblxcdHZlYzMgZmR5ID0gdmVjMyggZEZkeSggdlZpZXdQb3NpdGlvbi54ICksIGRGZHkoIHZWaWV3UG9zaXRpb24ueSApLCBkRmR5KCB2Vmlld1Bvc2l0aW9uLnogKSApO1xcblxcdHZlYzMgbm9ybWFsID0gbm9ybWFsaXplKCBjcm9zcyggZmR4LCBmZHkgKSApO1xcbiNlbHNlXFxuXFx0dmVjMyBub3JtYWwgPSBub3JtYWxpemUoIHZOb3JtYWwgKTtcXG5cXHQjaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0XFx0bm9ybWFsID0gbm9ybWFsICogKCBmbG9hdCggZ2xfRnJvbnRGYWNpbmcgKSAqIDIuMCAtIDEuMCApO1xcblxcdCNlbmRpZlxcbiNlbmRpZlxcbiNpZmRlZiBVU0VfTk9STUFMTUFQXFxuXFx0bm9ybWFsID0gcGVydHVyYk5vcm1hbDJBcmIoIC12Vmlld1Bvc2l0aW9uLCBub3JtYWwgKTtcXG4jZWxpZiBkZWZpbmVkKCBVU0VfQlVNUE1BUCApXFxuXFx0bm9ybWFsID0gcGVydHVyYk5vcm1hbEFyYiggLXZWaWV3UG9zaXRpb24sIG5vcm1hbCwgZEhkeHlfZndkKCkgKTtcXG4jZW5kaWZcXG5cIixcbiAgICBub3JtYWxtYXBfcGFyc19mcmFnbWVudDpcIiNpZmRlZiBVU0VfTk9STUFMTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgbm9ybWFsTWFwO1xcblxcdHVuaWZvcm0gdmVjMiBub3JtYWxTY2FsZTtcXG5cXHR2ZWMzIHBlcnR1cmJOb3JtYWwyQXJiKCB2ZWMzIGV5ZV9wb3MsIHZlYzMgc3VyZl9ub3JtICkge1xcblxcdFxcdHZlYzMgcTAgPSB2ZWMzKCBkRmR4KCBleWVfcG9zLnggKSwgZEZkeCggZXllX3Bvcy55ICksIGRGZHgoIGV5ZV9wb3MueiApICk7XFxuXFx0XFx0dmVjMyBxMSA9IHZlYzMoIGRGZHkoIGV5ZV9wb3MueCApLCBkRmR5KCBleWVfcG9zLnkgKSwgZEZkeSggZXllX3Bvcy56ICkgKTtcXG5cXHRcXHR2ZWMyIHN0MCA9IGRGZHgoIHZVdi5zdCApO1xcblxcdFxcdHZlYzIgc3QxID0gZEZkeSggdlV2LnN0ICk7XFxuXFx0XFx0dmVjMyBTID0gbm9ybWFsaXplKCBxMCAqIHN0MS50IC0gcTEgKiBzdDAudCApO1xcblxcdFxcdHZlYzMgVCA9IG5vcm1hbGl6ZSggLXEwICogc3QxLnMgKyBxMSAqIHN0MC5zICk7XFxuXFx0XFx0dmVjMyBOID0gbm9ybWFsaXplKCBzdXJmX25vcm0gKTtcXG5cXHRcXHR2ZWMzIG1hcE4gPSB0ZXh0dXJlMkQoIG5vcm1hbE1hcCwgdlV2ICkueHl6ICogMi4wIC0gMS4wO1xcblxcdFxcdG1hcE4ueHkgPSBub3JtYWxTY2FsZSAqIG1hcE4ueHk7XFxuXFx0XFx0bWF0MyB0c24gPSBtYXQzKCBTLCBULCBOICk7XFxuXFx0XFx0cmV0dXJuIG5vcm1hbGl6ZSggdHNuICogbWFwTiApO1xcblxcdH1cXG4jZW5kaWZcXG5cIixcbiAgICBwYWNraW5nOlwidmVjMyBwYWNrTm9ybWFsVG9SR0IoIGNvbnN0IGluIHZlYzMgbm9ybWFsICkge1xcblxcdHJldHVybiBub3JtYWxpemUoIG5vcm1hbCApICogMC41ICsgMC41O1xcbn1cXG52ZWMzIHVucGFja1JHQlRvTm9ybWFsKCBjb25zdCBpbiB2ZWMzIHJnYiApIHtcXG5cXHRyZXR1cm4gMi4wICogcmdiLnh5eiAtIDEuMDtcXG59XFxuY29uc3QgZmxvYXQgUGFja1Vwc2NhbGUgPSAyNTYuIC8gMjU1Ljtjb25zdCBmbG9hdCBVbnBhY2tEb3duc2NhbGUgPSAyNTUuIC8gMjU2LjtcXG5jb25zdCB2ZWMzIFBhY2tGYWN0b3JzID0gdmVjMyggMjU2LiAqIDI1Ni4gKiAyNTYuLCAyNTYuICogMjU2LiwgIDI1Ni4gKTtcXG5jb25zdCB2ZWM0IFVucGFja0ZhY3RvcnMgPSBVbnBhY2tEb3duc2NhbGUgLyB2ZWM0KCBQYWNrRmFjdG9ycywgMS4gKTtcXG5jb25zdCBmbG9hdCBTaGlmdFJpZ2h0OCA9IDEuIC8gMjU2LjtcXG52ZWM0IHBhY2tEZXB0aFRvUkdCQSggY29uc3QgaW4gZmxvYXQgdiApIHtcXG5cXHR2ZWM0IHIgPSB2ZWM0KCBmcmFjdCggdiAqIFBhY2tGYWN0b3JzICksIHYgKTtcXG5cXHRyLnl6dyAtPSByLnh5eiAqIFNoaWZ0UmlnaHQ4O1xcdHJldHVybiByICogUGFja1Vwc2NhbGU7XFxufVxcbmZsb2F0IHVucGFja1JHQkFUb0RlcHRoKCBjb25zdCBpbiB2ZWM0IHYgKSB7XFxuXFx0cmV0dXJuIGRvdCggdiwgVW5wYWNrRmFjdG9ycyApO1xcbn1cXG5mbG9hdCB2aWV3WlRvT3J0aG9ncmFwaGljRGVwdGgoIGNvbnN0IGluIGZsb2F0IHZpZXdaLCBjb25zdCBpbiBmbG9hdCBuZWFyLCBjb25zdCBpbiBmbG9hdCBmYXIgKSB7XFxuXFx0cmV0dXJuICggdmlld1ogKyBuZWFyICkgLyAoIG5lYXIgLSBmYXIgKTtcXG59XFxuZmxvYXQgb3J0aG9ncmFwaGljRGVwdGhUb1ZpZXdaKCBjb25zdCBpbiBmbG9hdCBsaW5lYXJDbGlwWiwgY29uc3QgaW4gZmxvYXQgbmVhciwgY29uc3QgaW4gZmxvYXQgZmFyICkge1xcblxcdHJldHVybiBsaW5lYXJDbGlwWiAqICggbmVhciAtIGZhciApIC0gbmVhcjtcXG59XFxuZmxvYXQgdmlld1pUb1BlcnNwZWN0aXZlRGVwdGgoIGNvbnN0IGluIGZsb2F0IHZpZXdaLCBjb25zdCBpbiBmbG9hdCBuZWFyLCBjb25zdCBpbiBmbG9hdCBmYXIgKSB7XFxuXFx0cmV0dXJuICgoIG5lYXIgKyB2aWV3WiApICogZmFyICkgLyAoKCBmYXIgLSBuZWFyICkgKiB2aWV3WiApO1xcbn1cXG5mbG9hdCBwZXJzcGVjdGl2ZURlcHRoVG9WaWV3WiggY29uc3QgaW4gZmxvYXQgaW52Q2xpcFosIGNvbnN0IGluIGZsb2F0IG5lYXIsIGNvbnN0IGluIGZsb2F0IGZhciApIHtcXG5cXHRyZXR1cm4gKCBuZWFyICogZmFyICkgLyAoICggZmFyIC0gbmVhciApICogaW52Q2xpcFogLSBmYXIgKTtcXG59XFxuXCIsXG4gICAgcHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudDpcIiNpZmRlZiBQUkVNVUxUSVBMSUVEX0FMUEhBXFxuXFx0Z2xfRnJhZ0NvbG9yLnJnYiAqPSBnbF9GcmFnQ29sb3IuYTtcXG4jZW5kaWZcXG5cIixwcm9qZWN0X3ZlcnRleDpcInZlYzQgbXZQb3NpdGlvbiA9IG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIHRyYW5zZm9ybWVkLCAxLjAgKTtcXG5nbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtdlBvc2l0aW9uO1xcblwiLGRpdGhlcmluZ19mcmFnbWVudDpcIiNpZiBkZWZpbmVkKCBESVRIRVJJTkcgKVxcbiAgZ2xfRnJhZ0NvbG9yLnJnYiA9IGRpdGhlcmluZyggZ2xfRnJhZ0NvbG9yLnJnYiApO1xcbiNlbmRpZlxcblwiLGRpdGhlcmluZ19wYXJzX2ZyYWdtZW50OlwiI2lmIGRlZmluZWQoIERJVEhFUklORyApXFxuXFx0dmVjMyBkaXRoZXJpbmcoIHZlYzMgY29sb3IgKSB7XFxuXFx0XFx0ZmxvYXQgZ3JpZF9wb3NpdGlvbiA9IHJhbmQoIGdsX0ZyYWdDb29yZC54eSApO1xcblxcdFxcdHZlYzMgZGl0aGVyX3NoaWZ0X1JHQiA9IHZlYzMoIDAuMjUgLyAyNTUuMCwgLTAuMjUgLyAyNTUuMCwgMC4yNSAvIDI1NS4wICk7XFxuXFx0XFx0ZGl0aGVyX3NoaWZ0X1JHQiA9IG1peCggMi4wICogZGl0aGVyX3NoaWZ0X1JHQiwgLTIuMCAqIGRpdGhlcl9zaGlmdF9SR0IsIGdyaWRfcG9zaXRpb24gKTtcXG5cXHRcXHRyZXR1cm4gY29sb3IgKyBkaXRoZXJfc2hpZnRfUkdCO1xcblxcdH1cXG4jZW5kaWZcXG5cIixcbiAgICByb3VnaG5lc3NtYXBfZnJhZ21lbnQ6XCJmbG9hdCByb3VnaG5lc3NGYWN0b3IgPSByb3VnaG5lc3M7XFxuI2lmZGVmIFVTRV9ST1VHSE5FU1NNQVBcXG5cXHR2ZWM0IHRleGVsUm91Z2huZXNzID0gdGV4dHVyZTJEKCByb3VnaG5lc3NNYXAsIHZVdiApO1xcblxcdHJvdWdobmVzc0ZhY3RvciAqPSB0ZXhlbFJvdWdobmVzcy5nO1xcbiNlbmRpZlxcblwiLHJvdWdobmVzc21hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9ST1VHSE5FU1NNQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCByb3VnaG5lc3NNYXA7XFxuI2VuZGlmXCIsc2hhZG93bWFwX3BhcnNfZnJhZ21lbnQ6XCIjaWZkZWYgVVNFX1NIQURPV01BUFxcblxcdCNpZiBOVU1fRElSX0xJR0hUUyA+IDBcXG5cXHRcXHR1bmlmb3JtIHNhbXBsZXIyRCBkaXJlY3Rpb25hbFNoYWRvd01hcFsgTlVNX0RJUl9MSUdIVFMgXTtcXG5cXHRcXHR2YXJ5aW5nIHZlYzQgdkRpcmVjdGlvbmFsU2hhZG93Q29vcmRbIE5VTV9ESVJfTElHSFRTIF07XFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9TUE9UX0xJR0hUUyA+IDBcXG5cXHRcXHR1bmlmb3JtIHNhbXBsZXIyRCBzcG90U2hhZG93TWFwWyBOVU1fU1BPVF9MSUdIVFMgXTtcXG5cXHRcXHR2YXJ5aW5nIHZlYzQgdlNwb3RTaGFkb3dDb29yZFsgTlVNX1NQT1RfTElHSFRTIF07XFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9QT0lOVF9MSUdIVFMgPiAwXFxuXFx0XFx0dW5pZm9ybSBzYW1wbGVyMkQgcG9pbnRTaGFkb3dNYXBbIE5VTV9QT0lOVF9MSUdIVFMgXTtcXG5cXHRcXHR2YXJ5aW5nIHZlYzQgdlBvaW50U2hhZG93Q29vcmRbIE5VTV9QT0lOVF9MSUdIVFMgXTtcXG5cXHQjZW5kaWZcXG5cXHRmbG9hdCB0ZXh0dXJlMkRDb21wYXJlKCBzYW1wbGVyMkQgZGVwdGhzLCB2ZWMyIHV2LCBmbG9hdCBjb21wYXJlICkge1xcblxcdFxcdHJldHVybiBzdGVwKCBjb21wYXJlLCB1bnBhY2tSR0JBVG9EZXB0aCggdGV4dHVyZTJEKCBkZXB0aHMsIHV2ICkgKSApO1xcblxcdH1cXG5cXHRmbG9hdCB0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzYW1wbGVyMkQgZGVwdGhzLCB2ZWMyIHNpemUsIHZlYzIgdXYsIGZsb2F0IGNvbXBhcmUgKSB7XFxuXFx0XFx0Y29uc3QgdmVjMiBvZmZzZXQgPSB2ZWMyKCAwLjAsIDEuMCApO1xcblxcdFxcdHZlYzIgdGV4ZWxTaXplID0gdmVjMiggMS4wICkgLyBzaXplO1xcblxcdFxcdHZlYzIgY2VudHJvaWRVViA9IGZsb29yKCB1diAqIHNpemUgKyAwLjUgKSAvIHNpemU7XFxuXFx0XFx0ZmxvYXQgbGIgPSB0ZXh0dXJlMkRDb21wYXJlKCBkZXB0aHMsIGNlbnRyb2lkVVYgKyB0ZXhlbFNpemUgKiBvZmZzZXQueHgsIGNvbXBhcmUgKTtcXG5cXHRcXHRmbG9hdCBsdCA9IHRleHR1cmUyRENvbXBhcmUoIGRlcHRocywgY2VudHJvaWRVViArIHRleGVsU2l6ZSAqIG9mZnNldC54eSwgY29tcGFyZSApO1xcblxcdFxcdGZsb2F0IHJiID0gdGV4dHVyZTJEQ29tcGFyZSggZGVwdGhzLCBjZW50cm9pZFVWICsgdGV4ZWxTaXplICogb2Zmc2V0Lnl4LCBjb21wYXJlICk7XFxuXFx0XFx0ZmxvYXQgcnQgPSB0ZXh0dXJlMkRDb21wYXJlKCBkZXB0aHMsIGNlbnRyb2lkVVYgKyB0ZXhlbFNpemUgKiBvZmZzZXQueXksIGNvbXBhcmUgKTtcXG5cXHRcXHR2ZWMyIGYgPSBmcmFjdCggdXYgKiBzaXplICsgMC41ICk7XFxuXFx0XFx0ZmxvYXQgYSA9IG1peCggbGIsIGx0LCBmLnkgKTtcXG5cXHRcXHRmbG9hdCBiID0gbWl4KCByYiwgcnQsIGYueSApO1xcblxcdFxcdGZsb2F0IGMgPSBtaXgoIGEsIGIsIGYueCApO1xcblxcdFxcdHJldHVybiBjO1xcblxcdH1cXG5cXHRmbG9hdCBnZXRTaGFkb3coIHNhbXBsZXIyRCBzaGFkb3dNYXAsIHZlYzIgc2hhZG93TWFwU2l6ZSwgZmxvYXQgc2hhZG93QmlhcywgZmxvYXQgc2hhZG93UmFkaXVzLCB2ZWM0IHNoYWRvd0Nvb3JkICkge1xcblxcdFxcdGZsb2F0IHNoYWRvdyA9IDEuMDtcXG5cXHRcXHRzaGFkb3dDb29yZC54eXogLz0gc2hhZG93Q29vcmQudztcXG5cXHRcXHRzaGFkb3dDb29yZC56ICs9IHNoYWRvd0JpYXM7XFxuXFx0XFx0YnZlYzQgaW5GcnVzdHVtVmVjID0gYnZlYzQgKCBzaGFkb3dDb29yZC54ID49IDAuMCwgc2hhZG93Q29vcmQueCA8PSAxLjAsIHNoYWRvd0Nvb3JkLnkgPj0gMC4wLCBzaGFkb3dDb29yZC55IDw9IDEuMCApO1xcblxcdFxcdGJvb2wgaW5GcnVzdHVtID0gYWxsKCBpbkZydXN0dW1WZWMgKTtcXG5cXHRcXHRidmVjMiBmcnVzdHVtVGVzdFZlYyA9IGJ2ZWMyKCBpbkZydXN0dW0sIHNoYWRvd0Nvb3JkLnogPD0gMS4wICk7XFxuXFx0XFx0Ym9vbCBmcnVzdHVtVGVzdCA9IGFsbCggZnJ1c3R1bVRlc3RWZWMgKTtcXG5cXHRcXHRpZiAoIGZydXN0dW1UZXN0ICkge1xcblxcdFxcdCNpZiBkZWZpbmVkKCBTSEFET1dNQVBfVFlQRV9QQ0YgKVxcblxcdFxcdFxcdHZlYzIgdGV4ZWxTaXplID0gdmVjMiggMS4wICkgLyBzaGFkb3dNYXBTaXplO1xcblxcdFxcdFxcdGZsb2F0IGR4MCA9IC0gdGV4ZWxTaXplLnggKiBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0XFx0ZmxvYXQgZHkwID0gLSB0ZXhlbFNpemUueSAqIHNoYWRvd1JhZGl1cztcXG5cXHRcXHRcXHRmbG9hdCBkeDEgPSArIHRleGVsU2l6ZS54ICogc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdGZsb2F0IGR5MSA9ICsgdGV4ZWxTaXplLnkgKiBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0XFx0c2hhZG93ID0gKFxcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDAsIGR5MCApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCAwLjAsIGR5MCApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDEsIGR5MCApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDAsIDAuMCApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MSwgMC4wICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MCwgZHkxICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIDAuMCwgZHkxICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MSwgZHkxICksIHNoYWRvd0Nvb3JkLnogKVxcblxcdFxcdFxcdCkgKiAoIDEuMCAvIDkuMCApO1xcblxcdFxcdCNlbGlmIGRlZmluZWQoIFNIQURPV01BUF9UWVBFX1BDRl9TT0ZUIClcXG5cXHRcXHRcXHR2ZWMyIHRleGVsU2l6ZSA9IHZlYzIoIDEuMCApIC8gc2hhZG93TWFwU2l6ZTtcXG5cXHRcXHRcXHRmbG9hdCBkeDAgPSAtIHRleGVsU2l6ZS54ICogc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdGZsb2F0IGR5MCA9IC0gdGV4ZWxTaXplLnkgKiBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0XFx0ZmxvYXQgZHgxID0gKyB0ZXhlbFNpemUueCAqIHNoYWRvd1JhZGl1cztcXG5cXHRcXHRcXHRmbG9hdCBkeTEgPSArIHRleGVsU2l6ZS55ICogc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdHNoYWRvdyA9IChcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgwLCBkeTAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggMC4wLCBkeTAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCBkeTAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgwLCAwLjAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5LCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRFNoYWRvd0xlcnAoIHNoYWRvd01hcCwgc2hhZG93TWFwU2l6ZSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDEsIDAuMCApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRFNoYWRvd0xlcnAoIHNoYWRvd01hcCwgc2hhZG93TWFwU2l6ZSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDAsIGR5MSApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRFNoYWRvd0xlcnAoIHNoYWRvd01hcCwgc2hhZG93TWFwU2l6ZSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCAwLjAsIGR5MSApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRFNoYWRvd0xlcnAoIHNoYWRvd01hcCwgc2hhZG93TWFwU2l6ZSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDEsIGR5MSApLCBzaGFkb3dDb29yZC56IClcXG5cXHRcXHRcXHQpICogKCAxLjAgLyA5LjAgKTtcXG5cXHRcXHQjZWxzZVxcblxcdFxcdFxcdHNoYWRvdyA9IHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHksIHNoYWRvd0Nvb3JkLnogKTtcXG5cXHRcXHQjZW5kaWZcXG5cXHRcXHR9XFxuXFx0XFx0cmV0dXJuIHNoYWRvdztcXG5cXHR9XFxuXFx0dmVjMiBjdWJlVG9VViggdmVjMyB2LCBmbG9hdCB0ZXhlbFNpemVZICkge1xcblxcdFxcdHZlYzMgYWJzViA9IGFicyggdiApO1xcblxcdFxcdGZsb2F0IHNjYWxlVG9DdWJlID0gMS4wIC8gbWF4KCBhYnNWLngsIG1heCggYWJzVi55LCBhYnNWLnogKSApO1xcblxcdFxcdGFic1YgKj0gc2NhbGVUb0N1YmU7XFxuXFx0XFx0diAqPSBzY2FsZVRvQ3ViZSAqICggMS4wIC0gMi4wICogdGV4ZWxTaXplWSApO1xcblxcdFxcdHZlYzIgcGxhbmFyID0gdi54eTtcXG5cXHRcXHRmbG9hdCBhbG1vc3RBVGV4ZWwgPSAxLjUgKiB0ZXhlbFNpemVZO1xcblxcdFxcdGZsb2F0IGFsbW9zdE9uZSA9IDEuMCAtIGFsbW9zdEFUZXhlbDtcXG5cXHRcXHRpZiAoIGFic1YueiA+PSBhbG1vc3RPbmUgKSB7XFxuXFx0XFx0XFx0aWYgKCB2LnogPiAwLjAgKVxcblxcdFxcdFxcdFxcdHBsYW5hci54ID0gNC4wIC0gdi54O1xcblxcdFxcdH0gZWxzZSBpZiAoIGFic1YueCA+PSBhbG1vc3RPbmUgKSB7XFxuXFx0XFx0XFx0ZmxvYXQgc2lnblggPSBzaWduKCB2LnggKTtcXG5cXHRcXHRcXHRwbGFuYXIueCA9IHYueiAqIHNpZ25YICsgMi4wICogc2lnblg7XFxuXFx0XFx0fSBlbHNlIGlmICggYWJzVi55ID49IGFsbW9zdE9uZSApIHtcXG5cXHRcXHRcXHRmbG9hdCBzaWduWSA9IHNpZ24oIHYueSApO1xcblxcdFxcdFxcdHBsYW5hci54ID0gdi54ICsgMi4wICogc2lnblkgKyAyLjA7XFxuXFx0XFx0XFx0cGxhbmFyLnkgPSB2LnogKiBzaWduWSAtIDIuMDtcXG5cXHRcXHR9XFxuXFx0XFx0cmV0dXJuIHZlYzIoIDAuMTI1LCAwLjI1ICkgKiBwbGFuYXIgKyB2ZWMyKCAwLjM3NSwgMC43NSApO1xcblxcdH1cXG5cXHRmbG9hdCBnZXRQb2ludFNoYWRvdyggc2FtcGxlcjJEIHNoYWRvd01hcCwgdmVjMiBzaGFkb3dNYXBTaXplLCBmbG9hdCBzaGFkb3dCaWFzLCBmbG9hdCBzaGFkb3dSYWRpdXMsIHZlYzQgc2hhZG93Q29vcmQsIGZsb2F0IHNoYWRvd0NhbWVyYU5lYXIsIGZsb2F0IHNoYWRvd0NhbWVyYUZhciApIHtcXG5cXHRcXHR2ZWMyIHRleGVsU2l6ZSA9IHZlYzIoIDEuMCApIC8gKCBzaGFkb3dNYXBTaXplICogdmVjMiggNC4wLCAyLjAgKSApO1xcblxcdFxcdHZlYzMgbGlnaHRUb1Bvc2l0aW9uID0gc2hhZG93Q29vcmQueHl6O1xcblxcdFxcdGZsb2F0IGRwID0gKCBsZW5ndGgoIGxpZ2h0VG9Qb3NpdGlvbiApIC0gc2hhZG93Q2FtZXJhTmVhciApIC8gKCBzaGFkb3dDYW1lcmFGYXIgLSBzaGFkb3dDYW1lcmFOZWFyICk7XFx0XFx0ZHAgKz0gc2hhZG93QmlhcztcXG5cXHRcXHR2ZWMzIGJkM0QgPSBub3JtYWxpemUoIGxpZ2h0VG9Qb3NpdGlvbiApO1xcblxcdFxcdCNpZiBkZWZpbmVkKCBTSEFET1dNQVBfVFlQRV9QQ0YgKSB8fCBkZWZpbmVkKCBTSEFET1dNQVBfVFlQRV9QQ0ZfU09GVCApXFxuXFx0XFx0XFx0dmVjMiBvZmZzZXQgPSB2ZWMyKCAtIDEsIDEgKSAqIHNoYWRvd1JhZGl1cyAqIHRleGVsU2l6ZS55O1xcblxcdFxcdFxcdHJldHVybiAoXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC54eXksIHRleGVsU2l6ZS55ICksIGRwICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueXl5LCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnh5eCwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC55eXgsIHRleGVsU2l6ZS55ICksIGRwICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QsIHRleGVsU2l6ZS55ICksIGRwICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueHh5LCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnl4eSwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC54eHgsIHRleGVsU2l6ZS55ICksIGRwICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueXh4LCB0ZXhlbFNpemUueSApLCBkcCApXFxuXFx0XFx0XFx0KSAqICggMS4wIC8gOS4wICk7XFxuXFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHRyZXR1cm4gdGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCwgdGV4ZWxTaXplLnkgKSwgZHAgKTtcXG5cXHRcXHQjZW5kaWZcXG5cXHR9XFxuI2VuZGlmXFxuXCIsXG4gICAgc2hhZG93bWFwX3BhcnNfdmVydGV4OlwiI2lmZGVmIFVTRV9TSEFET1dNQVBcXG5cXHQjaWYgTlVNX0RJUl9MSUdIVFMgPiAwXFxuXFx0XFx0dW5pZm9ybSBtYXQ0IGRpcmVjdGlvbmFsU2hhZG93TWF0cml4WyBOVU1fRElSX0xJR0hUUyBdO1xcblxcdFxcdHZhcnlpbmcgdmVjNCB2RGlyZWN0aW9uYWxTaGFkb3dDb29yZFsgTlVNX0RJUl9MSUdIVFMgXTtcXG5cXHQjZW5kaWZcXG5cXHQjaWYgTlVNX1NQT1RfTElHSFRTID4gMFxcblxcdFxcdHVuaWZvcm0gbWF0NCBzcG90U2hhZG93TWF0cml4WyBOVU1fU1BPVF9MSUdIVFMgXTtcXG5cXHRcXHR2YXJ5aW5nIHZlYzQgdlNwb3RTaGFkb3dDb29yZFsgTlVNX1NQT1RfTElHSFRTIF07XFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9QT0lOVF9MSUdIVFMgPiAwXFxuXFx0XFx0dW5pZm9ybSBtYXQ0IHBvaW50U2hhZG93TWF0cml4WyBOVU1fUE9JTlRfTElHSFRTIF07XFxuXFx0XFx0dmFyeWluZyB2ZWM0IHZQb2ludFNoYWRvd0Nvb3JkWyBOVU1fUE9JTlRfTElHSFRTIF07XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXCIsXG4gICAgc2hhZG93bWFwX3ZlcnRleDpcIiNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuXFx0I2lmIE5VTV9ESVJfTElHSFRTID4gMFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9ESVJfTElHSFRTOyBpICsrICkge1xcblxcdFxcdHZEaXJlY3Rpb25hbFNoYWRvd0Nvb3JkWyBpIF0gPSBkaXJlY3Rpb25hbFNoYWRvd01hdHJpeFsgaSBdICogd29ybGRQb3NpdGlvbjtcXG5cXHR9XFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9TUE9UX0xJR0hUUyA+IDBcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fU1BPVF9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0dlNwb3RTaGFkb3dDb29yZFsgaSBdID0gc3BvdFNoYWRvd01hdHJpeFsgaSBdICogd29ybGRQb3NpdGlvbjtcXG5cXHR9XFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9QT0lOVF9MSUdIVFMgPiAwXFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1BPSU5UX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHR2UG9pbnRTaGFkb3dDb29yZFsgaSBdID0gcG9pbnRTaGFkb3dNYXRyaXhbIGkgXSAqIHdvcmxkUG9zaXRpb247XFxuXFx0fVxcblxcdCNlbmRpZlxcbiNlbmRpZlxcblwiLFxuICAgIHNoYWRvd21hc2tfcGFyc19mcmFnbWVudDpcImZsb2F0IGdldFNoYWRvd01hc2soKSB7XFxuXFx0ZmxvYXQgc2hhZG93ID0gMS4wO1xcblxcdCNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuXFx0I2lmIE5VTV9ESVJfTElHSFRTID4gMFxcblxcdERpcmVjdGlvbmFsTGlnaHQgZGlyZWN0aW9uYWxMaWdodDtcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fRElSX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHRkaXJlY3Rpb25hbExpZ2h0ID0gZGlyZWN0aW9uYWxMaWdodHNbIGkgXTtcXG5cXHRcXHRzaGFkb3cgKj0gYm9vbCggZGlyZWN0aW9uYWxMaWdodC5zaGFkb3cgKSA/IGdldFNoYWRvdyggZGlyZWN0aW9uYWxTaGFkb3dNYXBbIGkgXSwgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3dNYXBTaXplLCBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvd0JpYXMsIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93UmFkaXVzLCB2RGlyZWN0aW9uYWxTaGFkb3dDb29yZFsgaSBdICkgOiAxLjA7XFxuXFx0fVxcblxcdCNlbmRpZlxcblxcdCNpZiBOVU1fU1BPVF9MSUdIVFMgPiAwXFxuXFx0U3BvdExpZ2h0IHNwb3RMaWdodDtcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fU1BPVF9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0c3BvdExpZ2h0ID0gc3BvdExpZ2h0c1sgaSBdO1xcblxcdFxcdHNoYWRvdyAqPSBib29sKCBzcG90TGlnaHQuc2hhZG93ICkgPyBnZXRTaGFkb3coIHNwb3RTaGFkb3dNYXBbIGkgXSwgc3BvdExpZ2h0LnNoYWRvd01hcFNpemUsIHNwb3RMaWdodC5zaGFkb3dCaWFzLCBzcG90TGlnaHQuc2hhZG93UmFkaXVzLCB2U3BvdFNoYWRvd0Nvb3JkWyBpIF0gKSA6IDEuMDtcXG5cXHR9XFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9QT0lOVF9MSUdIVFMgPiAwXFxuXFx0UG9pbnRMaWdodCBwb2ludExpZ2h0O1xcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9QT0lOVF9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0cG9pbnRMaWdodCA9IHBvaW50TGlnaHRzWyBpIF07XFxuXFx0XFx0c2hhZG93ICo9IGJvb2woIHBvaW50TGlnaHQuc2hhZG93ICkgPyBnZXRQb2ludFNoYWRvdyggcG9pbnRTaGFkb3dNYXBbIGkgXSwgcG9pbnRMaWdodC5zaGFkb3dNYXBTaXplLCBwb2ludExpZ2h0LnNoYWRvd0JpYXMsIHBvaW50TGlnaHQuc2hhZG93UmFkaXVzLCB2UG9pbnRTaGFkb3dDb29yZFsgaSBdLCBwb2ludExpZ2h0LnNoYWRvd0NhbWVyYU5lYXIsIHBvaW50TGlnaHQuc2hhZG93Q2FtZXJhRmFyICkgOiAxLjA7XFxuXFx0fVxcblxcdCNlbmRpZlxcblxcdCNlbmRpZlxcblxcdHJldHVybiBzaGFkb3c7XFxufVxcblwiLFxuICAgIHNraW5iYXNlX3ZlcnRleDpcIiNpZmRlZiBVU0VfU0tJTk5JTkdcXG5cXHRtYXQ0IGJvbmVNYXRYID0gZ2V0Qm9uZU1hdHJpeCggc2tpbkluZGV4LnggKTtcXG5cXHRtYXQ0IGJvbmVNYXRZID0gZ2V0Qm9uZU1hdHJpeCggc2tpbkluZGV4LnkgKTtcXG5cXHRtYXQ0IGJvbmVNYXRaID0gZ2V0Qm9uZU1hdHJpeCggc2tpbkluZGV4LnogKTtcXG5cXHRtYXQ0IGJvbmVNYXRXID0gZ2V0Qm9uZU1hdHJpeCggc2tpbkluZGV4LncgKTtcXG4jZW5kaWZcIixza2lubmluZ19wYXJzX3ZlcnRleDpcIiNpZmRlZiBVU0VfU0tJTk5JTkdcXG5cXHR1bmlmb3JtIG1hdDQgYmluZE1hdHJpeDtcXG5cXHR1bmlmb3JtIG1hdDQgYmluZE1hdHJpeEludmVyc2U7XFxuXFx0I2lmZGVmIEJPTkVfVEVYVFVSRVxcblxcdFxcdHVuaWZvcm0gc2FtcGxlcjJEIGJvbmVUZXh0dXJlO1xcblxcdFxcdHVuaWZvcm0gaW50IGJvbmVUZXh0dXJlU2l6ZTtcXG5cXHRcXHRtYXQ0IGdldEJvbmVNYXRyaXgoIGNvbnN0IGluIGZsb2F0IGkgKSB7XFxuXFx0XFx0XFx0ZmxvYXQgaiA9IGkgKiA0LjA7XFxuXFx0XFx0XFx0ZmxvYXQgeCA9IG1vZCggaiwgZmxvYXQoIGJvbmVUZXh0dXJlU2l6ZSApICk7XFxuXFx0XFx0XFx0ZmxvYXQgeSA9IGZsb29yKCBqIC8gZmxvYXQoIGJvbmVUZXh0dXJlU2l6ZSApICk7XFxuXFx0XFx0XFx0ZmxvYXQgZHggPSAxLjAgLyBmbG9hdCggYm9uZVRleHR1cmVTaXplICk7XFxuXFx0XFx0XFx0ZmxvYXQgZHkgPSAxLjAgLyBmbG9hdCggYm9uZVRleHR1cmVTaXplICk7XFxuXFx0XFx0XFx0eSA9IGR5ICogKCB5ICsgMC41ICk7XFxuXFx0XFx0XFx0dmVjNCB2MSA9IHRleHR1cmUyRCggYm9uZVRleHR1cmUsIHZlYzIoIGR4ICogKCB4ICsgMC41ICksIHkgKSApO1xcblxcdFxcdFxcdHZlYzQgdjIgPSB0ZXh0dXJlMkQoIGJvbmVUZXh0dXJlLCB2ZWMyKCBkeCAqICggeCArIDEuNSApLCB5ICkgKTtcXG5cXHRcXHRcXHR2ZWM0IHYzID0gdGV4dHVyZTJEKCBib25lVGV4dHVyZSwgdmVjMiggZHggKiAoIHggKyAyLjUgKSwgeSApICk7XFxuXFx0XFx0XFx0dmVjNCB2NCA9IHRleHR1cmUyRCggYm9uZVRleHR1cmUsIHZlYzIoIGR4ICogKCB4ICsgMy41ICksIHkgKSApO1xcblxcdFxcdFxcdG1hdDQgYm9uZSA9IG1hdDQoIHYxLCB2MiwgdjMsIHY0ICk7XFxuXFx0XFx0XFx0cmV0dXJuIGJvbmU7XFxuXFx0XFx0fVxcblxcdCNlbHNlXFxuXFx0XFx0dW5pZm9ybSBtYXQ0IGJvbmVNYXRyaWNlc1sgTUFYX0JPTkVTIF07XFxuXFx0XFx0bWF0NCBnZXRCb25lTWF0cml4KCBjb25zdCBpbiBmbG9hdCBpICkge1xcblxcdFxcdFxcdG1hdDQgYm9uZSA9IGJvbmVNYXRyaWNlc1sgaW50KGkpIF07XFxuXFx0XFx0XFx0cmV0dXJuIGJvbmU7XFxuXFx0XFx0fVxcblxcdCNlbmRpZlxcbiNlbmRpZlxcblwiLFxuICAgIHNraW5uaW5nX3ZlcnRleDpcIiNpZmRlZiBVU0VfU0tJTk5JTkdcXG5cXHR2ZWM0IHNraW5WZXJ0ZXggPSBiaW5kTWF0cml4ICogdmVjNCggdHJhbnNmb3JtZWQsIDEuMCApO1xcblxcdHZlYzQgc2tpbm5lZCA9IHZlYzQoIDAuMCApO1xcblxcdHNraW5uZWQgKz0gYm9uZU1hdFggKiBza2luVmVydGV4ICogc2tpbldlaWdodC54O1xcblxcdHNraW5uZWQgKz0gYm9uZU1hdFkgKiBza2luVmVydGV4ICogc2tpbldlaWdodC55O1xcblxcdHNraW5uZWQgKz0gYm9uZU1hdFogKiBza2luVmVydGV4ICogc2tpbldlaWdodC56O1xcblxcdHNraW5uZWQgKz0gYm9uZU1hdFcgKiBza2luVmVydGV4ICogc2tpbldlaWdodC53O1xcblxcdHRyYW5zZm9ybWVkID0gKCBiaW5kTWF0cml4SW52ZXJzZSAqIHNraW5uZWQgKS54eXo7XFxuI2VuZGlmXFxuXCIsc2tpbm5vcm1hbF92ZXJ0ZXg6XCIjaWZkZWYgVVNFX1NLSU5OSU5HXFxuXFx0bWF0NCBza2luTWF0cml4ID0gbWF0NCggMC4wICk7XFxuXFx0c2tpbk1hdHJpeCArPSBza2luV2VpZ2h0LnggKiBib25lTWF0WDtcXG5cXHRza2luTWF0cml4ICs9IHNraW5XZWlnaHQueSAqIGJvbmVNYXRZO1xcblxcdHNraW5NYXRyaXggKz0gc2tpbldlaWdodC56ICogYm9uZU1hdFo7XFxuXFx0c2tpbk1hdHJpeCArPSBza2luV2VpZ2h0LncgKiBib25lTWF0VztcXG5cXHRza2luTWF0cml4ICA9IGJpbmRNYXRyaXhJbnZlcnNlICogc2tpbk1hdHJpeCAqIGJpbmRNYXRyaXg7XFxuXFx0b2JqZWN0Tm9ybWFsID0gdmVjNCggc2tpbk1hdHJpeCAqIHZlYzQoIG9iamVjdE5vcm1hbCwgMC4wICkgKS54eXo7XFxuI2VuZGlmXFxuXCIsXG4gICAgc3BlY3VsYXJtYXBfZnJhZ21lbnQ6XCJmbG9hdCBzcGVjdWxhclN0cmVuZ3RoO1xcbiNpZmRlZiBVU0VfU1BFQ1VMQVJNQVBcXG5cXHR2ZWM0IHRleGVsU3BlY3VsYXIgPSB0ZXh0dXJlMkQoIHNwZWN1bGFyTWFwLCB2VXYgKTtcXG5cXHRzcGVjdWxhclN0cmVuZ3RoID0gdGV4ZWxTcGVjdWxhci5yO1xcbiNlbHNlXFxuXFx0c3BlY3VsYXJTdHJlbmd0aCA9IDEuMDtcXG4jZW5kaWZcIixzcGVjdWxhcm1hcF9wYXJzX2ZyYWdtZW50OlwiI2lmZGVmIFVTRV9TUEVDVUxBUk1BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIHNwZWN1bGFyTWFwO1xcbiNlbmRpZlwiLHRvbmVtYXBwaW5nX2ZyYWdtZW50OlwiI2lmIGRlZmluZWQoIFRPTkVfTUFQUElORyApXFxuICBnbF9GcmFnQ29sb3IucmdiID0gdG9uZU1hcHBpbmcoIGdsX0ZyYWdDb2xvci5yZ2IgKTtcXG4jZW5kaWZcXG5cIix0b25lbWFwcGluZ19wYXJzX2ZyYWdtZW50OlwiI2lmbmRlZiBzYXR1cmF0ZVxcblxcdCNkZWZpbmUgc2F0dXJhdGUoYSkgY2xhbXAoIGEsIDAuMCwgMS4wIClcXG4jZW5kaWZcXG51bmlmb3JtIGZsb2F0IHRvbmVNYXBwaW5nRXhwb3N1cmU7XFxudW5pZm9ybSBmbG9hdCB0b25lTWFwcGluZ1doaXRlUG9pbnQ7XFxudmVjMyBMaW5lYXJUb25lTWFwcGluZyggdmVjMyBjb2xvciApIHtcXG5cXHRyZXR1cm4gdG9uZU1hcHBpbmdFeHBvc3VyZSAqIGNvbG9yO1xcbn1cXG52ZWMzIFJlaW5oYXJkVG9uZU1hcHBpbmcoIHZlYzMgY29sb3IgKSB7XFxuXFx0Y29sb3IgKj0gdG9uZU1hcHBpbmdFeHBvc3VyZTtcXG5cXHRyZXR1cm4gc2F0dXJhdGUoIGNvbG9yIC8gKCB2ZWMzKCAxLjAgKSArIGNvbG9yICkgKTtcXG59XFxuI2RlZmluZSBVbmNoYXJ0ZWQySGVscGVyKCB4ICkgbWF4KCAoICggeCAqICggMC4xNSAqIHggKyAwLjEwICogMC41MCApICsgMC4yMCAqIDAuMDIgKSAvICggeCAqICggMC4xNSAqIHggKyAwLjUwICkgKyAwLjIwICogMC4zMCApICkgLSAwLjAyIC8gMC4zMCwgdmVjMyggMC4wICkgKVxcbnZlYzMgVW5jaGFydGVkMlRvbmVNYXBwaW5nKCB2ZWMzIGNvbG9yICkge1xcblxcdGNvbG9yICo9IHRvbmVNYXBwaW5nRXhwb3N1cmU7XFxuXFx0cmV0dXJuIHNhdHVyYXRlKCBVbmNoYXJ0ZWQySGVscGVyKCBjb2xvciApIC8gVW5jaGFydGVkMkhlbHBlciggdmVjMyggdG9uZU1hcHBpbmdXaGl0ZVBvaW50ICkgKSApO1xcbn1cXG52ZWMzIE9wdGltaXplZENpbmVvblRvbmVNYXBwaW5nKCB2ZWMzIGNvbG9yICkge1xcblxcdGNvbG9yICo9IHRvbmVNYXBwaW5nRXhwb3N1cmU7XFxuXFx0Y29sb3IgPSBtYXgoIHZlYzMoIDAuMCApLCBjb2xvciAtIDAuMDA0ICk7XFxuXFx0cmV0dXJuIHBvdyggKCBjb2xvciAqICggNi4yICogY29sb3IgKyAwLjUgKSApIC8gKCBjb2xvciAqICggNi4yICogY29sb3IgKyAxLjcgKSArIDAuMDYgKSwgdmVjMyggMi4yICkgKTtcXG59XFxuXCIsXG4gICAgdXZfcGFyc19mcmFnbWVudDpcIiNpZiBkZWZpbmVkKCBVU0VfTUFQICkgfHwgZGVmaW5lZCggVVNFX0JVTVBNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTk9STUFMTUFQICkgfHwgZGVmaW5lZCggVVNFX1NQRUNVTEFSTUFQICkgfHwgZGVmaW5lZCggVVNFX0FMUEhBTUFQICkgfHwgZGVmaW5lZCggVVNFX0VNSVNTSVZFTUFQICkgfHwgZGVmaW5lZCggVVNFX1JPVUdITkVTU01BUCApIHx8IGRlZmluZWQoIFVTRV9NRVRBTE5FU1NNQVAgKVxcblxcdHZhcnlpbmcgdmVjMiB2VXY7XFxuI2VuZGlmXCIsdXZfcGFyc192ZXJ0ZXg6XCIjaWYgZGVmaW5lZCggVVNFX01BUCApIHx8IGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFVTRV9TUEVDVUxBUk1BUCApIHx8IGRlZmluZWQoIFVTRV9BTFBIQU1BUCApIHx8IGRlZmluZWQoIFVTRV9FTUlTU0lWRU1BUCApIHx8IGRlZmluZWQoIFVTRV9ST1VHSE5FU1NNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTUVUQUxORVNTTUFQIClcXG5cXHR2YXJ5aW5nIHZlYzIgdlV2O1xcblxcdHVuaWZvcm0gbWF0MyB1dlRyYW5zZm9ybTtcXG4jZW5kaWZcXG5cIixcbiAgICB1dl92ZXJ0ZXg6XCIjaWYgZGVmaW5lZCggVVNFX01BUCApIHx8IGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFVTRV9TUEVDVUxBUk1BUCApIHx8IGRlZmluZWQoIFVTRV9BTFBIQU1BUCApIHx8IGRlZmluZWQoIFVTRV9FTUlTU0lWRU1BUCApIHx8IGRlZmluZWQoIFVTRV9ST1VHSE5FU1NNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTUVUQUxORVNTTUFQIClcXG5cXHR2VXYgPSAoIHV2VHJhbnNmb3JtICogdmVjMyggdXYsIDEgKSApLnh5O1xcbiNlbmRpZlwiLHV2Ml9wYXJzX2ZyYWdtZW50OlwiI2lmIGRlZmluZWQoIFVTRV9MSUdIVE1BUCApIHx8IGRlZmluZWQoIFVTRV9BT01BUCApXFxuXFx0dmFyeWluZyB2ZWMyIHZVdjI7XFxuI2VuZGlmXCIsdXYyX3BhcnNfdmVydGV4OlwiI2lmIGRlZmluZWQoIFVTRV9MSUdIVE1BUCApIHx8IGRlZmluZWQoIFVTRV9BT01BUCApXFxuXFx0YXR0cmlidXRlIHZlYzIgdXYyO1xcblxcdHZhcnlpbmcgdmVjMiB2VXYyO1xcbiNlbmRpZlwiLFxuICAgIHV2Ml92ZXJ0ZXg6XCIjaWYgZGVmaW5lZCggVVNFX0xJR0hUTUFQICkgfHwgZGVmaW5lZCggVVNFX0FPTUFQIClcXG5cXHR2VXYyID0gdXYyO1xcbiNlbmRpZlwiLHdvcmxkcG9zX3ZlcnRleDpcIiNpZiBkZWZpbmVkKCBVU0VfRU5WTUFQICkgfHwgZGVmaW5lZCggRElTVEFOQ0UgKSB8fCBkZWZpbmVkICggVVNFX1NIQURPV01BUCApXFxuXFx0dmVjNCB3b3JsZFBvc2l0aW9uID0gbW9kZWxNYXRyaXggKiB2ZWM0KCB0cmFuc2Zvcm1lZCwgMS4wICk7XFxuI2VuZGlmXFxuXCIsY3ViZV9mcmFnOlwidW5pZm9ybSBzYW1wbGVyQ3ViZSB0Q3ViZTtcXG51bmlmb3JtIGZsb2F0IHRGbGlwO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG52YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxudm9pZCBtYWluKCkge1xcblxcdGdsX0ZyYWdDb2xvciA9IHRleHR1cmVDdWJlKCB0Q3ViZSwgdmVjMyggdEZsaXAgKiB2V29ybGRQb3NpdGlvbi54LCB2V29ybGRQb3NpdGlvbi55eiApICk7XFxuXFx0Z2xfRnJhZ0NvbG9yLmEgKj0gb3BhY2l0eTtcXG59XFxuXCIsXG4gICAgY3ViZV92ZXJ0OlwidmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uO1xcbiNpbmNsdWRlIDxjb21tb24+XFxudm9pZCBtYWluKCkge1xcblxcdHZXb3JsZFBvc2l0aW9uID0gdHJhbnNmb3JtRGlyZWN0aW9uKCBwb3NpdGlvbiwgbW9kZWxNYXRyaXggKTtcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXHRnbF9Qb3NpdGlvbi56ID0gZ2xfUG9zaXRpb24udztcXG59XFxuXCIsZGVwdGhfZnJhZzpcIiNpZiBERVBUSF9QQUNLSU5HID09IDMyMDBcXG5cXHR1bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8cGFja2luZz5cXG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxcblxcdHZlYzQgZGlmZnVzZUNvbG9yID0gdmVjNCggMS4wICk7XFxuXFx0I2lmIERFUFRIX1BBQ0tJTkcgPT0gMzIwMFxcblxcdFxcdGRpZmZ1c2VDb2xvci5hID0gb3BhY2l0eTtcXG5cXHQjZW5kaWZcXG5cXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaWYgREVQVEhfUEFDS0lORyA9PSAzMjAwXFxuXFx0XFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggdmVjMyggZ2xfRnJhZ0Nvb3JkLnogKSwgb3BhY2l0eSApO1xcblxcdCNlbGlmIERFUFRIX1BBQ0tJTkcgPT0gMzIwMVxcblxcdFxcdGdsX0ZyYWdDb2xvciA9IHBhY2tEZXB0aFRvUkdCQSggZ2xfRnJhZ0Nvb3JkLnogKTtcXG5cXHQjZW5kaWZcXG59XFxuXCIsXG4gICAgZGVwdGhfdmVydDpcIiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxcblxcdCNpZmRlZiBVU0VfRElTUExBQ0VNRU5UTUFQXFxuXFx0XFx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cXG5cXHRcXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxcblxcdFxcdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjZW5kaWZcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG59XFxuXCIsXG4gICAgZGlzdGFuY2VSR0JBX2ZyYWc6XCIjZGVmaW5lIERJU1RBTkNFXFxudW5pZm9ybSB2ZWMzIHJlZmVyZW5jZVBvc2l0aW9uO1xcbnVuaWZvcm0gZmxvYXQgbmVhckRpc3RhbmNlO1xcbnVuaWZvcm0gZmxvYXQgZmFyRGlzdGFuY2U7XFxudmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uO1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4gKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCAxLjAgKTtcXG5cXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxcblxcdGZsb2F0IGRpc3QgPSBsZW5ndGgoIHZXb3JsZFBvc2l0aW9uIC0gcmVmZXJlbmNlUG9zaXRpb24gKTtcXG5cXHRkaXN0ID0gKCBkaXN0IC0gbmVhckRpc3RhbmNlICkgLyAoIGZhckRpc3RhbmNlIC0gbmVhckRpc3RhbmNlICk7XFxuXFx0ZGlzdCA9IHNhdHVyYXRlKCBkaXN0ICk7XFxuXFx0Z2xfRnJhZ0NvbG9yID0gcGFja0RlcHRoVG9SR0JBKCBkaXN0ICk7XFxufVxcblwiLFxuICAgIGRpc3RhbmNlUkdCQV92ZXJ0OlwiI2RlZmluZSBESVNUQU5DRVxcbnZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxcblxcdCNpZmRlZiBVU0VfRElTUExBQ0VNRU5UTUFQXFxuXFx0XFx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cXG5cXHRcXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxcblxcdFxcdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjZW5kaWZcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG5cXHR2V29ybGRQb3NpdGlvbiA9IHdvcmxkUG9zaXRpb24ueHl6O1xcbn1cXG5cIixcbiAgICBlcXVpcmVjdF9mcmFnOlwidW5pZm9ybSBzYW1wbGVyMkQgdEVxdWlyZWN0O1xcbnZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbnZvaWQgbWFpbigpIHtcXG5cXHR2ZWMzIGRpcmVjdGlvbiA9IG5vcm1hbGl6ZSggdldvcmxkUG9zaXRpb24gKTtcXG5cXHR2ZWMyIHNhbXBsZVVWO1xcblxcdHNhbXBsZVVWLnkgPSBhc2luKCBjbGFtcCggZGlyZWN0aW9uLnksIC0gMS4wLCAxLjAgKSApICogUkVDSVBST0NBTF9QSSArIDAuNTtcXG5cXHRzYW1wbGVVVi54ID0gYXRhbiggZGlyZWN0aW9uLnosIGRpcmVjdGlvbi54ICkgKiBSRUNJUFJPQ0FMX1BJMiArIDAuNTtcXG5cXHRnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQoIHRFcXVpcmVjdCwgc2FtcGxlVVYgKTtcXG59XFxuXCIsZXF1aXJlY3RfdmVydDpcInZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbnZvaWQgbWFpbigpIHtcXG5cXHR2V29ybGRQb3NpdGlvbiA9IHRyYW5zZm9ybURpcmVjdGlvbiggcG9zaXRpb24sIG1vZGVsTWF0cml4ICk7XFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxufVxcblwiLFxuICAgIGxpbmVkYXNoZWRfZnJhZzpcInVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG51bmlmb3JtIGZsb2F0IGRhc2hTaXplO1xcbnVuaWZvcm0gZmxvYXQgdG90YWxTaXplO1xcbnZhcnlpbmcgZmxvYXQgdkxpbmVEaXN0YW5jZTtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0aWYgKCBtb2QoIHZMaW5lRGlzdGFuY2UsIHRvdGFsU2l6ZSApID4gZGFzaFNpemUgKSB7XFxuXFx0XFx0ZGlzY2FyZDtcXG5cXHR9XFxuXFx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gdmVjMyggMC4wICk7XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cXG5cXHRvdXRnb2luZ0xpZ2h0ID0gZGlmZnVzZUNvbG9yLnJnYjtcXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBvdXRnb2luZ0xpZ2h0LCBkaWZmdXNlQ29sb3IuYSApO1xcblxcdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XFxufVxcblwiLFxuICAgIGxpbmVkYXNoZWRfdmVydDpcInVuaWZvcm0gZmxvYXQgc2NhbGU7XFxuYXR0cmlidXRlIGZsb2F0IGxpbmVEaXN0YW5jZTtcXG52YXJ5aW5nIGZsb2F0IHZMaW5lRGlzdGFuY2U7XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNvbG9yX3ZlcnRleD5cXG5cXHR2TGluZURpc3RhbmNlID0gc2NhbGUgKiBsaW5lRGlzdGFuY2U7XFxuXFx0dmVjNCBtdlBvc2l0aW9uID0gbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApO1xcblxcdGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG12UG9zaXRpb247XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Zm9nX3ZlcnRleD5cXG59XFxuXCIsXG4gICAgbWVzaGJhc2ljX2ZyYWc6XCJ1bmlmb3JtIHZlYzMgZGlmZnVzZTtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcbiNlbmRpZlxcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YWxwaGFtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YW9tYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bGlnaHRtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8ZW52bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzcGVjdWxhcm1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHNwZWN1bGFybWFwX2ZyYWdtZW50PlxcblxcdFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ID0gUmVmbGVjdGVkTGlnaHQoIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApICk7XFxuXFx0I2lmZGVmIFVTRV9MSUdIVE1BUFxcblxcdFxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArPSB0ZXh0dXJlMkQoIGxpZ2h0TWFwLCB2VXYyICkueHl6ICogbGlnaHRNYXBJbnRlbnNpdHk7XFxuXFx0I2Vsc2VcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKz0gdmVjMyggMS4wICk7XFxuXFx0I2VuZGlmXFxuXFx0I2luY2x1ZGUgPGFvbWFwX2ZyYWdtZW50PlxcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSAqPSBkaWZmdXNlQ29sb3IucmdiO1xcblxcdHZlYzMgb3V0Z29pbmdMaWdodCA9IHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZTtcXG5cXHQjaW5jbHVkZSA8ZW52bWFwX2ZyYWdtZW50PlxcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XFxuXFx0I2luY2x1ZGUgPHByZW11bHRpcGxpZWRfYWxwaGFfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cXG59XFxuXCIsXG4gICAgbWVzaGJhc2ljX3ZlcnQ6XCIjaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxlbnZtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxmb2dfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8dXYyX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXFx0I2lmZGVmIFVTRV9FTlZNQVBcXG5cXHQjaW5jbHVkZSA8YmVnaW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaG5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkZWZhdWx0bm9ybWFsX3ZlcnRleD5cXG5cXHQjZW5kaWZcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxlbnZtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxmb2dfdmVydGV4Plxcbn1cXG5cIixcbiAgICBtZXNobGFtYmVydF9mcmFnOlwidW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XFxudW5pZm9ybSB2ZWMzIGVtaXNzaXZlO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG52YXJ5aW5nIHZlYzMgdkxpZ2h0RnJvbnQ7XFxuI2lmZGVmIERPVUJMRV9TSURFRFxcblxcdHZhcnlpbmcgdmVjMyB2TGlnaHRCYWNrO1xcbiNlbmRpZlxcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPGRpdGhlcmluZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1dl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1djJfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFvbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxpZ2h0bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVtaXNzaXZlbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVudm1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxic2Rmcz5cXG4jaW5jbHVkZSA8bGlnaHRzX3BhcnM+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c2hhZG93bWFza19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzcGVjdWxhcm1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcXG5cXHRSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCA9IFJlZmxlY3RlZExpZ2h0KCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSApO1xcblxcdHZlYzMgdG90YWxFbWlzc2l2ZVJhZGlhbmNlID0gZW1pc3NpdmU7XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxzcGVjdWxhcm1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW1pc3NpdmVtYXBfZnJhZ21lbnQ+XFxuXFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlID0gZ2V0QW1iaWVudExpZ2h0SXJyYWRpYW5jZSggYW1iaWVudExpZ2h0Q29sb3IgKTtcXG5cXHQjaW5jbHVkZSA8bGlnaHRtYXBfZnJhZ21lbnQ+XFxuXFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICo9IEJSREZfRGlmZnVzZV9MYW1iZXJ0KCBkaWZmdXNlQ29sb3IucmdiICk7XFxuXFx0I2lmZGVmIERPVUJMRV9TSURFRFxcblxcdFxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgPSAoIGdsX0Zyb250RmFjaW5nICkgPyB2TGlnaHRGcm9udCA6IHZMaWdodEJhY2s7XFxuXFx0I2Vsc2VcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlID0gdkxpZ2h0RnJvbnQ7XFxuXFx0I2VuZGlmXFxuXFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSAqPSBCUkRGX0RpZmZ1c2VfTGFtYmVydCggZGlmZnVzZUNvbG9yLnJnYiApICogZ2V0U2hhZG93TWFzaygpO1xcblxcdCNpbmNsdWRlIDxhb21hcF9mcmFnbWVudD5cXG5cXHR2ZWMzIG91dGdvaW5nTGlnaHQgPSByZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlICsgcmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICsgdG90YWxFbWlzc2l2ZVJhZGlhbmNlO1xcblxcdCNpbmNsdWRlIDxlbnZtYXBfZnJhZ21lbnQ+XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggb3V0Z29pbmdMaWdodCwgZGlmZnVzZUNvbG9yLmEgKTtcXG5cXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxkaXRoZXJpbmdfZnJhZ21lbnQ+XFxufVxcblwiLFxuICAgIG1lc2hsYW1iZXJ0X3ZlcnQ6XCIjZGVmaW5lIExBTUJFUlRcXG52YXJ5aW5nIHZlYzMgdkxpZ2h0RnJvbnQ7XFxuI2lmZGVmIERPVUJMRV9TSURFRFxcblxcdHZhcnlpbmcgdmVjMyB2TGlnaHRCYWNrO1xcbiNlbmRpZlxcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDx1djJfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGVudm1hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8YnNkZnM+XFxuI2luY2x1ZGUgPGxpZ2h0c19wYXJzPlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8dXYyX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxiZWdpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGVmYXVsdG5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZW52bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bGlnaHRzX2xhbWJlcnRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxzaGFkb3dtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxmb2dfdmVydGV4Plxcbn1cXG5cIixcbiAgICBtZXNocGhvbmdfZnJhZzpcIiNkZWZpbmUgUEhPTkdcXG51bmlmb3JtIHZlYzMgZGlmZnVzZTtcXG51bmlmb3JtIHZlYzMgZW1pc3NpdmU7XFxudW5pZm9ybSB2ZWMzIHNwZWN1bGFyO1xcbnVuaWZvcm0gZmxvYXQgc2hpbmluZXNzO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxwYWNraW5nPlxcbiNpbmNsdWRlIDxkaXRoZXJpbmdfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhb21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsaWdodG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbWlzc2l2ZW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbnZtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Z3JhZGllbnRtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGJzZGZzPlxcbiNpbmNsdWRlIDxsaWdodHNfcGFycz5cXG4jaW5jbHVkZSA8bGlnaHRzX3Bob25nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxidW1wbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG5vcm1hbG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzcGVjdWxhcm1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcXG5cXHRSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCA9IFJlZmxlY3RlZExpZ2h0KCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSApO1xcblxcdHZlYzMgdG90YWxFbWlzc2l2ZVJhZGlhbmNlID0gZW1pc3NpdmU7XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxzcGVjdWxhcm1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bm9ybWFsX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbWlzc2l2ZW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bGlnaHRzX3Bob25nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxsaWdodHNfdGVtcGxhdGU+XFxuXFx0I2luY2x1ZGUgPGFvbWFwX2ZyYWdtZW50PlxcblxcdHZlYzMgb3V0Z29pbmdMaWdodCA9IHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgKyByZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKyByZWZsZWN0ZWRMaWdodC5kaXJlY3RTcGVjdWxhciArIHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0U3BlY3VsYXIgKyB0b3RhbEVtaXNzaXZlUmFkaWFuY2U7XFxuXFx0I2luY2x1ZGUgPGVudm1hcF9mcmFnbWVudD5cXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBvdXRnb2luZ0xpZ2h0LCBkaWZmdXNlQ29sb3IuYSApO1xcblxcdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHByZW11bHRpcGxpZWRfYWxwaGFfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGRpdGhlcmluZ19mcmFnbWVudD5cXG59XFxuXCIsXG4gICAgbWVzaHBob25nX3ZlcnQ6XCIjZGVmaW5lIFBIT05HXFxudmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcbiNlbmRpZlxcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDx1djJfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZW52bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8dXYyX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxiZWdpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBobm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGVmYXVsdG5vcm1hbF92ZXJ0ZXg+XFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZOb3JtYWwgPSBub3JtYWxpemUoIHRyYW5zZm9ybWVkTm9ybWFsICk7XFxuI2VuZGlmXFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0dlZpZXdQb3NpdGlvbiA9IC0gbXZQb3NpdGlvbi54eXo7XFxuXFx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZW52bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2hhZG93bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Zm9nX3ZlcnRleD5cXG59XFxuXCIsXG4gICAgbWVzaHBoeXNpY2FsX2ZyYWc6XCIjZGVmaW5lIFBIWVNJQ0FMXFxudW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XFxudW5pZm9ybSB2ZWMzIGVtaXNzaXZlO1xcbnVuaWZvcm0gZmxvYXQgcm91Z2huZXNzO1xcbnVuaWZvcm0gZmxvYXQgbWV0YWxuZXNzO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG4jaWZuZGVmIFNUQU5EQVJEXFxuXFx0dW5pZm9ybSBmbG9hdCBjbGVhckNvYXQ7XFxuXFx0dW5pZm9ybSBmbG9hdCBjbGVhckNvYXRSb3VnaG5lc3M7XFxuI2VuZGlmXFxudmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcbiNlbmRpZlxcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPGRpdGhlcmluZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1dl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1djJfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFvbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxpZ2h0bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVtaXNzaXZlbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVudm1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YnNkZnM+XFxuI2luY2x1ZGUgPGN1YmVfdXZfcmVmbGVjdGlvbl9mcmFnbWVudD5cXG4jaW5jbHVkZSA8bGlnaHRzX3BhcnM+XFxuI2luY2x1ZGUgPGxpZ2h0c19waHlzaWNhbF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YnVtcG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxub3JtYWxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8cm91Z2huZXNzbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1ldGFsbmVzc21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcXG5cXHRSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCA9IFJlZmxlY3RlZExpZ2h0KCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSApO1xcblxcdHZlYzMgdG90YWxFbWlzc2l2ZVJhZGlhbmNlID0gZW1pc3NpdmU7XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxyb3VnaG5lc3NtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG1ldGFsbmVzc21hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bm9ybWFsX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbWlzc2l2ZW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bGlnaHRzX3BoeXNpY2FsX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxsaWdodHNfdGVtcGxhdGU+XFxuXFx0I2luY2x1ZGUgPGFvbWFwX2ZyYWdtZW50PlxcblxcdHZlYzMgb3V0Z29pbmdMaWdodCA9IHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgKyByZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKyByZWZsZWN0ZWRMaWdodC5kaXJlY3RTcGVjdWxhciArIHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0U3BlY3VsYXIgKyB0b3RhbEVtaXNzaXZlUmFkaWFuY2U7XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggb3V0Z29pbmdMaWdodCwgZGlmZnVzZUNvbG9yLmEgKTtcXG5cXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxkaXRoZXJpbmdfZnJhZ21lbnQ+XFxufVxcblwiLFxuICAgIG1lc2hwaHlzaWNhbF92ZXJ0OlwiI2RlZmluZSBQSFlTSUNBTFxcbnZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG4jZW5kaWZcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxmb2dfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8dXZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDx1djJfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkZWZhdWx0bm9ybWFsX3ZlcnRleD5cXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dk5vcm1hbCA9IG5vcm1hbGl6ZSggdHJhbnNmb3JtZWROb3JtYWwgKTtcXG4jZW5kaWZcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG5cXHR2Vmlld1Bvc2l0aW9uID0gLSBtdlBvc2l0aW9uLnh5ejtcXG5cXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxzaGFkb3dtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxmb2dfdmVydGV4Plxcbn1cXG5cIixcbiAgICBub3JtYWxfZnJhZzpcIiNkZWZpbmUgTk9STUFMXFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNpZiBkZWZpbmVkKCBGTEFUX1NIQURFRCApIHx8IGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApXFxuXFx0dmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuI2VuZGlmXFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcbiNlbmRpZlxcbiNpbmNsdWRlIDxwYWNraW5nPlxcbiNpbmNsdWRlIDx1dl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxidW1wbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG5vcm1hbG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG5vcm1hbF9mcmFnbWVudD5cXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBwYWNrTm9ybWFsVG9SR0IoIG5vcm1hbCApLCBvcGFjaXR5ICk7XFxufVxcblwiLFxuICAgIG5vcm1hbF92ZXJ0OlwiI2RlZmluZSBOT1JNQUxcXG4jaWYgZGVmaW5lZCggRkxBVF9TSEFERUQgKSB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKVxcblxcdHZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xcbiNlbmRpZlxcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG4jZW5kaWZcXG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8YmVnaW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaG5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGRlZmF1bHRub3JtYWxfdmVydGV4PlxcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2Tm9ybWFsID0gbm9ybWFsaXplKCB0cmFuc2Zvcm1lZE5vcm1hbCApO1xcbiNlbmRpZlxcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5pbmdfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxcbiNpZiBkZWZpbmVkKCBGTEFUX1NIQURFRCApIHx8IGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApXFxuXFx0dlZpZXdQb3NpdGlvbiA9IC0gbXZQb3NpdGlvbi54eXo7XFxuI2VuZGlmXFxufVxcblwiLFxuICAgIHBvaW50c19mcmFnOlwidW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1hcF9wYXJ0aWNsZV9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxcblxcdHZlYzMgb3V0Z29pbmdMaWdodCA9IHZlYzMoIDAuMCApO1xcblxcdHZlYzQgZGlmZnVzZUNvbG9yID0gdmVjNCggZGlmZnVzZSwgb3BhY2l0eSApO1xcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bWFwX3BhcnRpY2xlX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxcblxcdG91dGdvaW5nTGlnaHQgPSBkaWZmdXNlQ29sb3IucmdiO1xcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XFxuXFx0I2luY2x1ZGUgPHByZW11bHRpcGxpZWRfYWxwaGFfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cXG59XFxuXCIsXG4gICAgcG9pbnRzX3ZlcnQ6XCJ1bmlmb3JtIGZsb2F0IHNpemU7XFxudW5pZm9ybSBmbG9hdCBzY2FsZTtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2lmZGVmIFVTRV9TSVpFQVRURU5VQVRJT05cXG5cXHRcXHRnbF9Qb2ludFNpemUgPSBzaXplICogKCBzY2FsZSAvIC0gbXZQb3NpdGlvbi56ICk7XFxuXFx0I2Vsc2VcXG5cXHRcXHRnbF9Qb2ludFNpemUgPSBzaXplO1xcblxcdCNlbmRpZlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2hhZG93bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Zm9nX3ZlcnRleD5cXG59XFxuXCIsXG4gICAgc2hhZG93X2ZyYWc6XCJ1bmlmb3JtIHZlYzMgY29sb3I7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxic2Rmcz5cXG4jaW5jbHVkZSA8bGlnaHRzX3BhcnM+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXNrX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIGNvbG9yLCBvcGFjaXR5ICogKCAxLjAgLSBnZXRTaGFkb3dNYXNrKCkgKSApO1xcblxcdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XFxufVxcblwiLHNoYWRvd192ZXJ0OlwiI2luY2x1ZGUgPGZvZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxzaGFkb3dtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxmb2dfdmVydGV4Plxcbn1cXG5cIn0sXG4gICAgdGI9e2Jhc2ljOnt1bmlmb3JtczpHYS5tZXJnZShbSy5jb21tb24sSy5zcGVjdWxhcm1hcCxLLmVudm1hcCxLLmFvbWFwLEsubGlnaHRtYXAsSy5mb2ddKSx2ZXJ0ZXhTaGFkZXI6Ui5tZXNoYmFzaWNfdmVydCxmcmFnbWVudFNoYWRlcjpSLm1lc2hiYXNpY19mcmFnfSxsYW1iZXJ0Ont1bmlmb3JtczpHYS5tZXJnZShbSy5jb21tb24sSy5zcGVjdWxhcm1hcCxLLmVudm1hcCxLLmFvbWFwLEsubGlnaHRtYXAsSy5lbWlzc2l2ZW1hcCxLLmZvZyxLLmxpZ2h0cyx7ZW1pc3NpdmU6e3ZhbHVlOm5ldyBIKDApfX1dKSx2ZXJ0ZXhTaGFkZXI6Ui5tZXNobGFtYmVydF92ZXJ0LGZyYWdtZW50U2hhZGVyOlIubWVzaGxhbWJlcnRfZnJhZ30scGhvbmc6e3VuaWZvcm1zOkdhLm1lcmdlKFtLLmNvbW1vbixLLnNwZWN1bGFybWFwLEsuZW52bWFwLEsuYW9tYXAsSy5saWdodG1hcCxLLmVtaXNzaXZlbWFwLEsuYnVtcG1hcCxLLm5vcm1hbG1hcCxLLmRpc3BsYWNlbWVudG1hcCxLLmdyYWRpZW50bWFwLFxuICAgIEsuZm9nLEsubGlnaHRzLHtlbWlzc2l2ZTp7dmFsdWU6bmV3IEgoMCl9LHNwZWN1bGFyOnt2YWx1ZTpuZXcgSCgxMTE4NDgxKX0sc2hpbmluZXNzOnt2YWx1ZTozMH19XSksdmVydGV4U2hhZGVyOlIubWVzaHBob25nX3ZlcnQsZnJhZ21lbnRTaGFkZXI6Ui5tZXNocGhvbmdfZnJhZ30sc3RhbmRhcmQ6e3VuaWZvcm1zOkdhLm1lcmdlKFtLLmNvbW1vbixLLmVudm1hcCxLLmFvbWFwLEsubGlnaHRtYXAsSy5lbWlzc2l2ZW1hcCxLLmJ1bXBtYXAsSy5ub3JtYWxtYXAsSy5kaXNwbGFjZW1lbnRtYXAsSy5yb3VnaG5lc3NtYXAsSy5tZXRhbG5lc3NtYXAsSy5mb2csSy5saWdodHMse2VtaXNzaXZlOnt2YWx1ZTpuZXcgSCgwKX0scm91Z2huZXNzOnt2YWx1ZTouNX0sbWV0YWxuZXNzOnt2YWx1ZTouNX0sZW52TWFwSW50ZW5zaXR5Ont2YWx1ZToxfX1dKSx2ZXJ0ZXhTaGFkZXI6Ui5tZXNocGh5c2ljYWxfdmVydCxmcmFnbWVudFNoYWRlcjpSLm1lc2hwaHlzaWNhbF9mcmFnfSxwb2ludHM6e3VuaWZvcm1zOkdhLm1lcmdlKFtLLnBvaW50cyxcbiAgICBLLmZvZ10pLHZlcnRleFNoYWRlcjpSLnBvaW50c192ZXJ0LGZyYWdtZW50U2hhZGVyOlIucG9pbnRzX2ZyYWd9LGRhc2hlZDp7dW5pZm9ybXM6R2EubWVyZ2UoW0suY29tbW9uLEsuZm9nLHtzY2FsZTp7dmFsdWU6MX0sZGFzaFNpemU6e3ZhbHVlOjF9LHRvdGFsU2l6ZTp7dmFsdWU6Mn19XSksdmVydGV4U2hhZGVyOlIubGluZWRhc2hlZF92ZXJ0LGZyYWdtZW50U2hhZGVyOlIubGluZWRhc2hlZF9mcmFnfSxkZXB0aDp7dW5pZm9ybXM6R2EubWVyZ2UoW0suY29tbW9uLEsuZGlzcGxhY2VtZW50bWFwXSksdmVydGV4U2hhZGVyOlIuZGVwdGhfdmVydCxmcmFnbWVudFNoYWRlcjpSLmRlcHRoX2ZyYWd9LG5vcm1hbDp7dW5pZm9ybXM6R2EubWVyZ2UoW0suY29tbW9uLEsuYnVtcG1hcCxLLm5vcm1hbG1hcCxLLmRpc3BsYWNlbWVudG1hcCx7b3BhY2l0eTp7dmFsdWU6MX19XSksdmVydGV4U2hhZGVyOlIubm9ybWFsX3ZlcnQsZnJhZ21lbnRTaGFkZXI6Ui5ub3JtYWxfZnJhZ30sY3ViZTp7dW5pZm9ybXM6e3RDdWJlOnt2YWx1ZTpudWxsfSxcbiAgICB0RmxpcDp7dmFsdWU6LTF9LG9wYWNpdHk6e3ZhbHVlOjF9fSx2ZXJ0ZXhTaGFkZXI6Ui5jdWJlX3ZlcnQsZnJhZ21lbnRTaGFkZXI6Ui5jdWJlX2ZyYWd9LGVxdWlyZWN0Ont1bmlmb3Jtczp7dEVxdWlyZWN0Ont2YWx1ZTpudWxsfX0sdmVydGV4U2hhZGVyOlIuZXF1aXJlY3RfdmVydCxmcmFnbWVudFNoYWRlcjpSLmVxdWlyZWN0X2ZyYWd9LGRpc3RhbmNlUkdCQTp7dW5pZm9ybXM6R2EubWVyZ2UoW0suY29tbW9uLEsuZGlzcGxhY2VtZW50bWFwLHtyZWZlcmVuY2VQb3NpdGlvbjp7dmFsdWU6bmV3IHB9LG5lYXJEaXN0YW5jZTp7dmFsdWU6MX0sZmFyRGlzdGFuY2U6e3ZhbHVlOjFFM319XSksdmVydGV4U2hhZGVyOlIuZGlzdGFuY2VSR0JBX3ZlcnQsZnJhZ21lbnRTaGFkZXI6Ui5kaXN0YW5jZVJHQkFfZnJhZ30sc2hhZG93Ont1bmlmb3JtczpHYS5tZXJnZShbSy5saWdodHMsSy5mb2cse2NvbG9yOnt2YWx1ZTpuZXcgSCgwKX0sb3BhY2l0eTp7dmFsdWU6MX19XSksdmVydGV4U2hhZGVyOlIuc2hhZG93X3ZlcnQsXG4gICAgZnJhZ21lbnRTaGFkZXI6Ui5zaGFkb3dfZnJhZ319O3RiLnBoeXNpY2FsPXt1bmlmb3JtczpHYS5tZXJnZShbdGIuc3RhbmRhcmQudW5pZm9ybXMse2NsZWFyQ29hdDp7dmFsdWU6MH0sY2xlYXJDb2F0Um91Z2huZXNzOnt2YWx1ZTowfX1dKSx2ZXJ0ZXhTaGFkZXI6Ui5tZXNocGh5c2ljYWxfdmVydCxmcmFnbWVudFNoYWRlcjpSLm1lc2hwaHlzaWNhbF9mcmFnfTtPYmplY3QuYXNzaWduKG9kLnByb3RvdHlwZSx7c2V0OmZ1bmN0aW9uKGEsYil7dGhpcy5taW4uY29weShhKTt0aGlzLm1heC5jb3B5KGIpO3JldHVybiB0aGlzfSxzZXRGcm9tUG9pbnRzOmZ1bmN0aW9uKGEpe3RoaXMubWFrZUVtcHR5KCk7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtiPGM7YisrKXRoaXMuZXhwYW5kQnlQb2ludChhW2JdKTtyZXR1cm4gdGhpc30sc2V0RnJvbUNlbnRlckFuZFNpemU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgRDtyZXR1cm4gZnVuY3Rpb24oYixjKXtjPWEuY29weShjKS5tdWx0aXBseVNjYWxhciguNSk7XG4gICAgdGhpcy5taW4uY29weShiKS5zdWIoYyk7dGhpcy5tYXguY29weShiKS5hZGQoYyk7cmV0dXJuIHRoaXN9fSgpLGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMubWluLmNvcHkoYS5taW4pO3RoaXMubWF4LmNvcHkoYS5tYXgpO3JldHVybiB0aGlzfSxtYWtlRW1wdHk6ZnVuY3Rpb24oKXt0aGlzLm1pbi54PXRoaXMubWluLnk9SW5maW5pdHk7dGhpcy5tYXgueD10aGlzLm1heC55PS1JbmZpbml0eTtyZXR1cm4gdGhpc30saXNFbXB0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1heC54PHRoaXMubWluLnh8fHRoaXMubWF4Lnk8dGhpcy5taW4ueX0sZ2V0Q2VudGVyOmZ1bmN0aW9uKGEpe2E9YXx8bmV3IEQ7cmV0dXJuIHRoaXMuaXNFbXB0eSgpP2Euc2V0KDAsMCk6YS5hZGRWZWN0b3JzKHRoaXMubWluLHRoaXMubWF4KS5tdWx0aXBseVNjYWxhciguNSl9LGdldFNpemU6ZnVuY3Rpb24oYSl7YT1cbiAgICBhfHxuZXcgRDtyZXR1cm4gdGhpcy5pc0VtcHR5KCk/YS5zZXQoMCwwKTphLnN1YlZlY3RvcnModGhpcy5tYXgsdGhpcy5taW4pfSxleHBhbmRCeVBvaW50OmZ1bmN0aW9uKGEpe3RoaXMubWluLm1pbihhKTt0aGlzLm1heC5tYXgoYSk7cmV0dXJuIHRoaXN9LGV4cGFuZEJ5VmVjdG9yOmZ1bmN0aW9uKGEpe3RoaXMubWluLnN1YihhKTt0aGlzLm1heC5hZGQoYSk7cmV0dXJuIHRoaXN9LGV4cGFuZEJ5U2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMubWluLmFkZFNjYWxhcigtYSk7dGhpcy5tYXguYWRkU2NhbGFyKGEpO3JldHVybiB0aGlzfSxjb250YWluc1BvaW50OmZ1bmN0aW9uKGEpe3JldHVybiBhLng8dGhpcy5taW4ueHx8YS54PnRoaXMubWF4Lnh8fGEueTx0aGlzLm1pbi55fHxhLnk+dGhpcy5tYXgueT8hMTohMH0sY29udGFpbnNCb3g6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubWluLng8PWEubWluLngmJmEubWF4Lng8PXRoaXMubWF4LngmJnRoaXMubWluLnk8PWEubWluLnkmJmEubWF4Lnk8PVxuICAgIHRoaXMubWF4Lnl9LGdldFBhcmFtZXRlcjpmdW5jdGlvbihhLGIpe3JldHVybihifHxuZXcgRCkuc2V0KChhLngtdGhpcy5taW4ueCkvKHRoaXMubWF4LngtdGhpcy5taW4ueCksKGEueS10aGlzLm1pbi55KS8odGhpcy5tYXgueS10aGlzLm1pbi55KSl9LGludGVyc2VjdHNCb3g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEubWF4Lng8dGhpcy5taW4ueHx8YS5taW4ueD50aGlzLm1heC54fHxhLm1heC55PHRoaXMubWluLnl8fGEubWluLnk+dGhpcy5tYXgueT8hMTohMH0sY2xhbXBQb2ludDpmdW5jdGlvbihhLGIpe3JldHVybihifHxuZXcgRCkuY29weShhKS5jbGFtcCh0aGlzLm1pbix0aGlzLm1heCl9LGRpc3RhbmNlVG9Qb2ludDpmdW5jdGlvbigpe3ZhciBhPW5ldyBEO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYS5jb3B5KGIpLmNsYW1wKHRoaXMubWluLHRoaXMubWF4KS5zdWIoYikubGVuZ3RoKCl9fSgpLGludGVyc2VjdDpmdW5jdGlvbihhKXt0aGlzLm1pbi5tYXgoYS5taW4pO1xuICAgIHRoaXMubWF4Lm1pbihhLm1heCk7cmV0dXJuIHRoaXN9LHVuaW9uOmZ1bmN0aW9uKGEpe3RoaXMubWluLm1pbihhLm1pbik7dGhpcy5tYXgubWF4KGEubWF4KTtyZXR1cm4gdGhpc30sdHJhbnNsYXRlOmZ1bmN0aW9uKGEpe3RoaXMubWluLmFkZChhKTt0aGlzLm1heC5hZGQoYSk7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5taW4uZXF1YWxzKHRoaXMubWluKSYmYS5tYXguZXF1YWxzKHRoaXMubWF4KX19KTt0Yy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShVLnByb3RvdHlwZSk7dGMucHJvdG90eXBlLmNvbnN0cnVjdG9yPXRjO3ZhciBhZz0wO1AucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh6YS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpQLGlzTWF0ZXJpYWw6ITAsb25CZWZvcmVDb21waWxlOmZ1bmN0aW9uKCl7fSxzZXRWYWx1ZXM6ZnVuY3Rpb24oYSl7aWYodm9pZCAwIT09YSlmb3IodmFyIGIgaW4gYSl7dmFyIGM9YVtiXTtpZih2b2lkIDA9PT1cbiAgICBjKWNvbnNvbGUud2FybihcIlRIUkVFLk1hdGVyaWFsOiAnXCIrYitcIicgcGFyYW1ldGVyIGlzIHVuZGVmaW5lZC5cIik7ZWxzZSBpZihcInNoYWRpbmdcIj09PWIpY29uc29sZS53YXJuKFwiVEhSRUUuXCIrdGhpcy50eXBlK1wiOiAuc2hhZGluZyBoYXMgYmVlbiByZW1vdmVkLiBVc2UgdGhlIGJvb2xlYW4gLmZsYXRTaGFkaW5nIGluc3RlYWQuXCIpLHRoaXMuZmxhdFNoYWRpbmc9MT09PWM/ITA6ITE7ZWxzZXt2YXIgZD10aGlzW2JdO3ZvaWQgMD09PWQ/Y29uc29sZS53YXJuKFwiVEhSRUUuXCIrdGhpcy50eXBlK1wiOiAnXCIrYitcIicgaXMgbm90IGEgcHJvcGVydHkgb2YgdGhpcyBtYXRlcmlhbC5cIik6ZCYmZC5pc0NvbG9yP2Quc2V0KGMpOmQmJmQuaXNWZWN0b3IzJiZjJiZjLmlzVmVjdG9yMz9kLmNvcHkoYyk6dGhpc1tiXT1cIm92ZXJkcmF3XCI9PT1iP051bWJlcihjKTpjfX19LHRvSlNPTjpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3ZhciBiPVtdLGM7Zm9yKGMgaW4gYSl7dmFyIGQ9YVtjXTtkZWxldGUgZC5tZXRhZGF0YTtcbiAgICBiLnB1c2goZCl9cmV0dXJuIGJ9dmFyIGM9dm9pZCAwPT09YXx8XCJzdHJpbmdcIj09PXR5cGVvZiBhO2MmJihhPXt0ZXh0dXJlczp7fSxpbWFnZXM6e319KTt2YXIgZD17bWV0YWRhdGE6e3ZlcnNpb246NC41LHR5cGU6XCJNYXRlcmlhbFwiLGdlbmVyYXRvcjpcIk1hdGVyaWFsLnRvSlNPTlwifX07ZC51dWlkPXRoaXMudXVpZDtkLnR5cGU9dGhpcy50eXBlO1wiXCIhPT10aGlzLm5hbWUmJihkLm5hbWU9dGhpcy5uYW1lKTt0aGlzLmNvbG9yJiZ0aGlzLmNvbG9yLmlzQ29sb3ImJihkLmNvbG9yPXRoaXMuY29sb3IuZ2V0SGV4KCkpO3ZvaWQgMCE9PXRoaXMucm91Z2huZXNzJiYoZC5yb3VnaG5lc3M9dGhpcy5yb3VnaG5lc3MpO3ZvaWQgMCE9PXRoaXMubWV0YWxuZXNzJiYoZC5tZXRhbG5lc3M9dGhpcy5tZXRhbG5lc3MpO3RoaXMuZW1pc3NpdmUmJnRoaXMuZW1pc3NpdmUuaXNDb2xvciYmKGQuZW1pc3NpdmU9dGhpcy5lbWlzc2l2ZS5nZXRIZXgoKSk7MSE9PXRoaXMuZW1pc3NpdmVJbnRlbnNpdHkmJlxuICAgIChkLmVtaXNzaXZlSW50ZW5zaXR5PXRoaXMuZW1pc3NpdmVJbnRlbnNpdHkpO3RoaXMuc3BlY3VsYXImJnRoaXMuc3BlY3VsYXIuaXNDb2xvciYmKGQuc3BlY3VsYXI9dGhpcy5zcGVjdWxhci5nZXRIZXgoKSk7dm9pZCAwIT09dGhpcy5zaGluaW5lc3MmJihkLnNoaW5pbmVzcz10aGlzLnNoaW5pbmVzcyk7dm9pZCAwIT09dGhpcy5jbGVhckNvYXQmJihkLmNsZWFyQ29hdD10aGlzLmNsZWFyQ29hdCk7dm9pZCAwIT09dGhpcy5jbGVhckNvYXRSb3VnaG5lc3MmJihkLmNsZWFyQ29hdFJvdWdobmVzcz10aGlzLmNsZWFyQ29hdFJvdWdobmVzcyk7dGhpcy5tYXAmJnRoaXMubWFwLmlzVGV4dHVyZSYmKGQubWFwPXRoaXMubWFwLnRvSlNPTihhKS51dWlkKTt0aGlzLmFscGhhTWFwJiZ0aGlzLmFscGhhTWFwLmlzVGV4dHVyZSYmKGQuYWxwaGFNYXA9dGhpcy5hbHBoYU1hcC50b0pTT04oYSkudXVpZCk7dGhpcy5saWdodE1hcCYmdGhpcy5saWdodE1hcC5pc1RleHR1cmUmJihkLmxpZ2h0TWFwPVxuICAgIHRoaXMubGlnaHRNYXAudG9KU09OKGEpLnV1aWQpO3RoaXMuYnVtcE1hcCYmdGhpcy5idW1wTWFwLmlzVGV4dHVyZSYmKGQuYnVtcE1hcD10aGlzLmJ1bXBNYXAudG9KU09OKGEpLnV1aWQsZC5idW1wU2NhbGU9dGhpcy5idW1wU2NhbGUpO3RoaXMubm9ybWFsTWFwJiZ0aGlzLm5vcm1hbE1hcC5pc1RleHR1cmUmJihkLm5vcm1hbE1hcD10aGlzLm5vcm1hbE1hcC50b0pTT04oYSkudXVpZCxkLm5vcm1hbFNjYWxlPXRoaXMubm9ybWFsU2NhbGUudG9BcnJheSgpKTt0aGlzLmRpc3BsYWNlbWVudE1hcCYmdGhpcy5kaXNwbGFjZW1lbnRNYXAuaXNUZXh0dXJlJiYoZC5kaXNwbGFjZW1lbnRNYXA9dGhpcy5kaXNwbGFjZW1lbnRNYXAudG9KU09OKGEpLnV1aWQsZC5kaXNwbGFjZW1lbnRTY2FsZT10aGlzLmRpc3BsYWNlbWVudFNjYWxlLGQuZGlzcGxhY2VtZW50Qmlhcz10aGlzLmRpc3BsYWNlbWVudEJpYXMpO3RoaXMucm91Z2huZXNzTWFwJiZ0aGlzLnJvdWdobmVzc01hcC5pc1RleHR1cmUmJlxuICAgIChkLnJvdWdobmVzc01hcD10aGlzLnJvdWdobmVzc01hcC50b0pTT04oYSkudXVpZCk7dGhpcy5tZXRhbG5lc3NNYXAmJnRoaXMubWV0YWxuZXNzTWFwLmlzVGV4dHVyZSYmKGQubWV0YWxuZXNzTWFwPXRoaXMubWV0YWxuZXNzTWFwLnRvSlNPTihhKS51dWlkKTt0aGlzLmVtaXNzaXZlTWFwJiZ0aGlzLmVtaXNzaXZlTWFwLmlzVGV4dHVyZSYmKGQuZW1pc3NpdmVNYXA9dGhpcy5lbWlzc2l2ZU1hcC50b0pTT04oYSkudXVpZCk7dGhpcy5zcGVjdWxhck1hcCYmdGhpcy5zcGVjdWxhck1hcC5pc1RleHR1cmUmJihkLnNwZWN1bGFyTWFwPXRoaXMuc3BlY3VsYXJNYXAudG9KU09OKGEpLnV1aWQpO3RoaXMuZW52TWFwJiZ0aGlzLmVudk1hcC5pc1RleHR1cmUmJihkLmVudk1hcD10aGlzLmVudk1hcC50b0pTT04oYSkudXVpZCxkLnJlZmxlY3Rpdml0eT10aGlzLnJlZmxlY3Rpdml0eSk7dGhpcy5ncmFkaWVudE1hcCYmdGhpcy5ncmFkaWVudE1hcC5pc1RleHR1cmUmJihkLmdyYWRpZW50TWFwPVxuICAgIHRoaXMuZ3JhZGllbnRNYXAudG9KU09OKGEpLnV1aWQpO3ZvaWQgMCE9PXRoaXMuc2l6ZSYmKGQuc2l6ZT10aGlzLnNpemUpO3ZvaWQgMCE9PXRoaXMuc2l6ZUF0dGVudWF0aW9uJiYoZC5zaXplQXR0ZW51YXRpb249dGhpcy5zaXplQXR0ZW51YXRpb24pOzEhPT10aGlzLmJsZW5kaW5nJiYoZC5ibGVuZGluZz10aGlzLmJsZW5kaW5nKTshMD09PXRoaXMuZmxhdFNoYWRpbmcmJihkLmZsYXRTaGFkaW5nPXRoaXMuZmxhdFNoYWRpbmcpOzAhPT10aGlzLnNpZGUmJihkLnNpZGU9dGhpcy5zaWRlKTswIT09dGhpcy52ZXJ0ZXhDb2xvcnMmJihkLnZlcnRleENvbG9ycz10aGlzLnZlcnRleENvbG9ycyk7MT50aGlzLm9wYWNpdHkmJihkLm9wYWNpdHk9dGhpcy5vcGFjaXR5KTshMD09PXRoaXMudHJhbnNwYXJlbnQmJihkLnRyYW5zcGFyZW50PXRoaXMudHJhbnNwYXJlbnQpO2QuZGVwdGhGdW5jPXRoaXMuZGVwdGhGdW5jO2QuZGVwdGhUZXN0PXRoaXMuZGVwdGhUZXN0O2QuZGVwdGhXcml0ZT1cbiAgICB0aGlzLmRlcHRoV3JpdGU7MCE9PXRoaXMucm90YXRpb24mJihkLnJvdGF0aW9uPXRoaXMucm90YXRpb24pOzEhPT10aGlzLmxpbmV3aWR0aCYmKGQubGluZXdpZHRoPXRoaXMubGluZXdpZHRoKTt2b2lkIDAhPT10aGlzLmRhc2hTaXplJiYoZC5kYXNoU2l6ZT10aGlzLmRhc2hTaXplKTt2b2lkIDAhPT10aGlzLmdhcFNpemUmJihkLmdhcFNpemU9dGhpcy5nYXBTaXplKTt2b2lkIDAhPT10aGlzLnNjYWxlJiYoZC5zY2FsZT10aGlzLnNjYWxlKTshMD09PXRoaXMuZGl0aGVyaW5nJiYoZC5kaXRoZXJpbmc9ITApOzA8dGhpcy5hbHBoYVRlc3QmJihkLmFscGhhVGVzdD10aGlzLmFscGhhVGVzdCk7ITA9PT10aGlzLnByZW11bHRpcGxpZWRBbHBoYSYmKGQucHJlbXVsdGlwbGllZEFscGhhPXRoaXMucHJlbXVsdGlwbGllZEFscGhhKTshMD09PXRoaXMud2lyZWZyYW1lJiYoZC53aXJlZnJhbWU9dGhpcy53aXJlZnJhbWUpOzE8dGhpcy53aXJlZnJhbWVMaW5ld2lkdGgmJihkLndpcmVmcmFtZUxpbmV3aWR0aD1cbiAgICB0aGlzLndpcmVmcmFtZUxpbmV3aWR0aCk7XCJyb3VuZFwiIT09dGhpcy53aXJlZnJhbWVMaW5lY2FwJiYoZC53aXJlZnJhbWVMaW5lY2FwPXRoaXMud2lyZWZyYW1lTGluZWNhcCk7XCJyb3VuZFwiIT09dGhpcy53aXJlZnJhbWVMaW5lam9pbiYmKGQud2lyZWZyYW1lTGluZWpvaW49dGhpcy53aXJlZnJhbWVMaW5lam9pbik7ITA9PT10aGlzLm1vcnBoVGFyZ2V0cyYmKGQubW9ycGhUYXJnZXRzPSEwKTshMD09PXRoaXMuc2tpbm5pbmcmJihkLnNraW5uaW5nPSEwKTshMT09PXRoaXMudmlzaWJsZSYmKGQudmlzaWJsZT0hMSk7XCJ7fVwiIT09SlNPTi5zdHJpbmdpZnkodGhpcy51c2VyRGF0YSkmJihkLnVzZXJEYXRhPXRoaXMudXNlckRhdGEpO2MmJihjPWIoYS50ZXh0dXJlcyksYT1iKGEuaW1hZ2VzKSwwPGMubGVuZ3RoJiYoZC50ZXh0dXJlcz1jKSwwPGEubGVuZ3RoJiYoZC5pbWFnZXM9YSkpO3JldHVybiBkfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sXG4gICAgY29weTpmdW5jdGlvbihhKXt0aGlzLm5hbWU9YS5uYW1lO3RoaXMuZm9nPWEuZm9nO3RoaXMubGlnaHRzPWEubGlnaHRzO3RoaXMuYmxlbmRpbmc9YS5ibGVuZGluZzt0aGlzLnNpZGU9YS5zaWRlO3RoaXMuZmxhdFNoYWRpbmc9YS5mbGF0U2hhZGluZzt0aGlzLnZlcnRleENvbG9ycz1hLnZlcnRleENvbG9yczt0aGlzLm9wYWNpdHk9YS5vcGFjaXR5O3RoaXMudHJhbnNwYXJlbnQ9YS50cmFuc3BhcmVudDt0aGlzLmJsZW5kU3JjPWEuYmxlbmRTcmM7dGhpcy5ibGVuZERzdD1hLmJsZW5kRHN0O3RoaXMuYmxlbmRFcXVhdGlvbj1hLmJsZW5kRXF1YXRpb247dGhpcy5ibGVuZFNyY0FscGhhPWEuYmxlbmRTcmNBbHBoYTt0aGlzLmJsZW5kRHN0QWxwaGE9YS5ibGVuZERzdEFscGhhO3RoaXMuYmxlbmRFcXVhdGlvbkFscGhhPWEuYmxlbmRFcXVhdGlvbkFscGhhO3RoaXMuZGVwdGhGdW5jPWEuZGVwdGhGdW5jO3RoaXMuZGVwdGhUZXN0PWEuZGVwdGhUZXN0O3RoaXMuZGVwdGhXcml0ZT1hLmRlcHRoV3JpdGU7XG4gICAgdGhpcy5jb2xvcldyaXRlPWEuY29sb3JXcml0ZTt0aGlzLnByZWNpc2lvbj1hLnByZWNpc2lvbjt0aGlzLnBvbHlnb25PZmZzZXQ9YS5wb2x5Z29uT2Zmc2V0O3RoaXMucG9seWdvbk9mZnNldEZhY3Rvcj1hLnBvbHlnb25PZmZzZXRGYWN0b3I7dGhpcy5wb2x5Z29uT2Zmc2V0VW5pdHM9YS5wb2x5Z29uT2Zmc2V0VW5pdHM7dGhpcy5kaXRoZXJpbmc9YS5kaXRoZXJpbmc7dGhpcy5hbHBoYVRlc3Q9YS5hbHBoYVRlc3Q7dGhpcy5wcmVtdWx0aXBsaWVkQWxwaGE9YS5wcmVtdWx0aXBsaWVkQWxwaGE7dGhpcy5vdmVyZHJhdz1hLm92ZXJkcmF3O3RoaXMudmlzaWJsZT1hLnZpc2libGU7dGhpcy51c2VyRGF0YT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGEudXNlckRhdGEpKTt0aGlzLmNsaXBTaGFkb3dzPWEuY2xpcFNoYWRvd3M7dGhpcy5jbGlwSW50ZXJzZWN0aW9uPWEuY2xpcEludGVyc2VjdGlvbjthPWEuY2xpcHBpbmdQbGFuZXM7dmFyIGI9bnVsbDtpZihudWxsIT09YSlmb3IodmFyIGM9XG4gICAgYS5sZW5ndGgsYj1BcnJheShjKSxkPTA7ZCE9PWM7KytkKWJbZF09YVtkXS5jbG9uZSgpO3RoaXMuY2xpcHBpbmdQbGFuZXM9YjtyZXR1cm4gdGhpc30sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImRpc3Bvc2VcIn0pfX0pO2ViLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFAucHJvdG90eXBlKTtlYi5wcm90b3R5cGUuY29uc3RydWN0b3I9ZWI7ZWIucHJvdG90eXBlLmlzTWVzaERlcHRoTWF0ZXJpYWw9ITA7ZWIucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7UC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5kZXB0aFBhY2tpbmc9YS5kZXB0aFBhY2tpbmc7dGhpcy5za2lubmluZz1hLnNraW5uaW5nO3RoaXMubW9ycGhUYXJnZXRzPWEubW9ycGhUYXJnZXRzO3RoaXMubWFwPWEubWFwO3RoaXMuYWxwaGFNYXA9YS5hbHBoYU1hcDt0aGlzLmRpc3BsYWNlbWVudE1hcD1hLmRpc3BsYWNlbWVudE1hcDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPVxuICAgIGEuZGlzcGxhY2VtZW50U2NhbGU7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPWEuZGlzcGxhY2VtZW50Qmlhczt0aGlzLndpcmVmcmFtZT1hLndpcmVmcmFtZTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD1hLndpcmVmcmFtZUxpbmV3aWR0aDtyZXR1cm4gdGhpc307ZmIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoUC5wcm90b3R5cGUpO2ZiLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1mYjtmYi5wcm90b3R5cGUuaXNNZXNoRGlzdGFuY2VNYXRlcmlhbD0hMDtmYi5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtQLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLnJlZmVyZW5jZVBvc2l0aW9uLmNvcHkoYS5yZWZlcmVuY2VQb3NpdGlvbik7dGhpcy5uZWFyRGlzdGFuY2U9YS5uZWFyRGlzdGFuY2U7dGhpcy5mYXJEaXN0YW5jZT1hLmZhckRpc3RhbmNlO3RoaXMuc2tpbm5pbmc9YS5za2lubmluZzt0aGlzLm1vcnBoVGFyZ2V0cz1hLm1vcnBoVGFyZ2V0czt0aGlzLm1hcD1hLm1hcDt0aGlzLmFscGhhTWFwPVxuICAgIGEuYWxwaGFNYXA7dGhpcy5kaXNwbGFjZW1lbnRNYXA9YS5kaXNwbGFjZW1lbnRNYXA7dGhpcy5kaXNwbGFjZW1lbnRTY2FsZT1hLmRpc3BsYWNlbWVudFNjYWxlO3RoaXMuZGlzcGxhY2VtZW50Qmlhcz1hLmRpc3BsYWNlbWVudEJpYXM7cmV0dXJuIHRoaXN9O09iamVjdC5hc3NpZ24oWGEucHJvdG90eXBlLHtpc0JveDM6ITAsc2V0OmZ1bmN0aW9uKGEsYil7dGhpcy5taW4uY29weShhKTt0aGlzLm1heC5jb3B5KGIpO3JldHVybiB0aGlzfSxzZXRGcm9tQXJyYXk6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPUluZmluaXR5LGM9SW5maW5pdHksZD1JbmZpbml0eSxlPS1JbmZpbml0eSxmPS1JbmZpbml0eSxnPS1JbmZpbml0eSxoPTAsaz1hLmxlbmd0aDtoPGs7aCs9Myl7dmFyIG09YVtoXSxxPWFbaCsxXSxsPWFbaCsyXTttPGImJihiPW0pO3E8YyYmKGM9cSk7bDxkJiYoZD1sKTttPmUmJihlPW0pO3E+ZiYmKGY9cSk7bD5nJiYoZz1sKX10aGlzLm1pbi5zZXQoYixjLGQpO3RoaXMubWF4LnNldChlLFxuICAgIGYsZyk7cmV0dXJuIHRoaXN9LHNldEZyb21CdWZmZXJBdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPUluZmluaXR5LGM9SW5maW5pdHksZD1JbmZpbml0eSxlPS1JbmZpbml0eSxmPS1JbmZpbml0eSxnPS1JbmZpbml0eSxoPTAsaz1hLmNvdW50O2g8aztoKyspe3ZhciBtPWEuZ2V0WChoKSxxPWEuZ2V0WShoKSxsPWEuZ2V0WihoKTttPGImJihiPW0pO3E8YyYmKGM9cSk7bDxkJiYoZD1sKTttPmUmJihlPW0pO3E+ZiYmKGY9cSk7bD5nJiYoZz1sKX10aGlzLm1pbi5zZXQoYixjLGQpO3RoaXMubWF4LnNldChlLGYsZyk7cmV0dXJuIHRoaXN9LHNldEZyb21Qb2ludHM6ZnVuY3Rpb24oYSl7dGhpcy5tYWtlRW1wdHkoKTtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2I8YztiKyspdGhpcy5leHBhbmRCeVBvaW50KGFbYl0pO3JldHVybiB0aGlzfSxzZXRGcm9tQ2VudGVyQW5kU2l6ZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBwO3JldHVybiBmdW5jdGlvbihiLGMpe2M9YS5jb3B5KGMpLm11bHRpcGx5U2NhbGFyKC41KTtcbiAgICB0aGlzLm1pbi5jb3B5KGIpLnN1YihjKTt0aGlzLm1heC5jb3B5KGIpLmFkZChjKTtyZXR1cm4gdGhpc319KCksc2V0RnJvbU9iamVjdDpmdW5jdGlvbihhKXt0aGlzLm1ha2VFbXB0eSgpO3JldHVybiB0aGlzLmV4cGFuZEJ5T2JqZWN0KGEpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbihhKXt0aGlzLm1pbi5jb3B5KGEubWluKTt0aGlzLm1heC5jb3B5KGEubWF4KTtyZXR1cm4gdGhpc30sbWFrZUVtcHR5OmZ1bmN0aW9uKCl7dGhpcy5taW4ueD10aGlzLm1pbi55PXRoaXMubWluLno9SW5maW5pdHk7dGhpcy5tYXgueD10aGlzLm1heC55PXRoaXMubWF4Lno9LUluZmluaXR5O3JldHVybiB0aGlzfSxpc0VtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWF4Lng8dGhpcy5taW4ueHx8dGhpcy5tYXgueTx0aGlzLm1pbi55fHx0aGlzLm1heC56PHRoaXMubWluLnp9LGdldENlbnRlcjpmdW5jdGlvbihhKXthPVxuICAgIGF8fG5ldyBwO3JldHVybiB0aGlzLmlzRW1wdHkoKT9hLnNldCgwLDAsMCk6YS5hZGRWZWN0b3JzKHRoaXMubWluLHRoaXMubWF4KS5tdWx0aXBseVNjYWxhciguNSl9LGdldFNpemU6ZnVuY3Rpb24oYSl7YT1hfHxuZXcgcDtyZXR1cm4gdGhpcy5pc0VtcHR5KCk/YS5zZXQoMCwwLDApOmEuc3ViVmVjdG9ycyh0aGlzLm1heCx0aGlzLm1pbil9LGV4cGFuZEJ5UG9pbnQ6ZnVuY3Rpb24oYSl7dGhpcy5taW4ubWluKGEpO3RoaXMubWF4Lm1heChhKTtyZXR1cm4gdGhpc30sZXhwYW5kQnlWZWN0b3I6ZnVuY3Rpb24oYSl7dGhpcy5taW4uc3ViKGEpO3RoaXMubWF4LmFkZChhKTtyZXR1cm4gdGhpc30sZXhwYW5kQnlTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy5taW4uYWRkU2NhbGFyKC1hKTt0aGlzLm1heC5hZGRTY2FsYXIoYSk7cmV0dXJuIHRoaXN9LGV4cGFuZEJ5T2JqZWN0OmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXt2YXIgZj1hLmdlb21ldHJ5O2lmKHZvaWQgMCE9PWYpaWYoZi5pc0dlb21ldHJ5KWZvcihmPVxuICAgIGYudmVydGljZXMsYz0wLGQ9Zi5sZW5ndGg7YzxkO2MrKyllLmNvcHkoZltjXSksZS5hcHBseU1hdHJpeDQoYS5tYXRyaXhXb3JsZCksYi5leHBhbmRCeVBvaW50KGUpO2Vsc2UgaWYoZi5pc0J1ZmZlckdlb21ldHJ5JiYoZj1mLmF0dHJpYnV0ZXMucG9zaXRpb24sdm9pZCAwIT09ZikpZm9yKGM9MCxkPWYuY291bnQ7YzxkO2MrKyllLmZyb21CdWZmZXJBdHRyaWJ1dGUoZixjKS5hcHBseU1hdHJpeDQoYS5tYXRyaXhXb3JsZCksYi5leHBhbmRCeVBvaW50KGUpfXZhciBiLGMsZCxlPW5ldyBwO3JldHVybiBmdW5jdGlvbihjKXtiPXRoaXM7Yy51cGRhdGVNYXRyaXhXb3JsZCghMCk7Yy50cmF2ZXJzZShhKTtyZXR1cm4gdGhpc319KCksY29udGFpbnNQb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gYS54PHRoaXMubWluLnh8fGEueD50aGlzLm1heC54fHxhLnk8dGhpcy5taW4ueXx8YS55PnRoaXMubWF4Lnl8fGEuejx0aGlzLm1pbi56fHxhLno+dGhpcy5tYXguej8hMTohMH0sY29udGFpbnNCb3g6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubWluLng8PVxuICAgIGEubWluLngmJmEubWF4Lng8PXRoaXMubWF4LngmJnRoaXMubWluLnk8PWEubWluLnkmJmEubWF4Lnk8PXRoaXMubWF4LnkmJnRoaXMubWluLno8PWEubWluLnomJmEubWF4Lno8PXRoaXMubWF4Lnp9LGdldFBhcmFtZXRlcjpmdW5jdGlvbihhLGIpe3JldHVybihifHxuZXcgcCkuc2V0KChhLngtdGhpcy5taW4ueCkvKHRoaXMubWF4LngtdGhpcy5taW4ueCksKGEueS10aGlzLm1pbi55KS8odGhpcy5tYXgueS10aGlzLm1pbi55KSwoYS56LXRoaXMubWluLnopLyh0aGlzLm1heC56LXRoaXMubWluLnopKX0saW50ZXJzZWN0c0JveDpmdW5jdGlvbihhKXtyZXR1cm4gYS5tYXgueDx0aGlzLm1pbi54fHxhLm1pbi54PnRoaXMubWF4Lnh8fGEubWF4Lnk8dGhpcy5taW4ueXx8YS5taW4ueT50aGlzLm1heC55fHxhLm1heC56PHRoaXMubWluLnp8fGEubWluLno+dGhpcy5tYXguej8hMTohMH0saW50ZXJzZWN0c1NwaGVyZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBwO3JldHVybiBmdW5jdGlvbihiKXt0aGlzLmNsYW1wUG9pbnQoYi5jZW50ZXIsXG4gICAgYSk7cmV0dXJuIGEuZGlzdGFuY2VUb1NxdWFyZWQoYi5jZW50ZXIpPD1iLnJhZGl1cypiLnJhZGl1c319KCksaW50ZXJzZWN0c1BsYW5lOmZ1bmN0aW9uKGEpe2lmKDA8YS5ub3JtYWwueCl7dmFyIGI9YS5ub3JtYWwueCp0aGlzLm1pbi54O3ZhciBjPWEubm9ybWFsLngqdGhpcy5tYXgueH1lbHNlIGI9YS5ub3JtYWwueCp0aGlzLm1heC54LGM9YS5ub3JtYWwueCp0aGlzLm1pbi54OzA8YS5ub3JtYWwueT8oYis9YS5ub3JtYWwueSp0aGlzLm1pbi55LGMrPWEubm9ybWFsLnkqdGhpcy5tYXgueSk6KGIrPWEubm9ybWFsLnkqdGhpcy5tYXgueSxjKz1hLm5vcm1hbC55KnRoaXMubWluLnkpOzA8YS5ub3JtYWwuej8oYis9YS5ub3JtYWwueip0aGlzLm1pbi56LGMrPWEubm9ybWFsLnoqdGhpcy5tYXgueik6KGIrPWEubm9ybWFsLnoqdGhpcy5tYXgueixjKz1hLm5vcm1hbC56KnRoaXMubWluLnopO3JldHVybiBiPD1hLmNvbnN0YW50JiZjPj1hLmNvbnN0YW50fSxjbGFtcFBvaW50OmZ1bmN0aW9uKGEsXG4gICAgYil7cmV0dXJuKGJ8fG5ldyBwKS5jb3B5KGEpLmNsYW1wKHRoaXMubWluLHRoaXMubWF4KX0sZGlzdGFuY2VUb1BvaW50OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBhLmNvcHkoYikuY2xhbXAodGhpcy5taW4sdGhpcy5tYXgpLnN1YihiKS5sZW5ndGgoKX19KCksZ2V0Qm91bmRpbmdTcGhlcmU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYil7Yj1ifHxuZXcgSWE7dGhpcy5nZXRDZW50ZXIoYi5jZW50ZXIpO2IucmFkaXVzPS41KnRoaXMuZ2V0U2l6ZShhKS5sZW5ndGgoKTtyZXR1cm4gYn19KCksaW50ZXJzZWN0OmZ1bmN0aW9uKGEpe3RoaXMubWluLm1heChhLm1pbik7dGhpcy5tYXgubWluKGEubWF4KTt0aGlzLmlzRW1wdHkoKSYmdGhpcy5tYWtlRW1wdHkoKTtyZXR1cm4gdGhpc30sdW5pb246ZnVuY3Rpb24oYSl7dGhpcy5taW4ubWluKGEubWluKTt0aGlzLm1heC5tYXgoYS5tYXgpO3JldHVybiB0aGlzfSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24oKXt2YXIgYT1cbiAgICBbbmV3IHAsbmV3IHAsbmV3IHAsbmV3IHAsbmV3IHAsbmV3IHAsbmV3IHAsbmV3IHBdO3JldHVybiBmdW5jdGlvbihiKXtpZih0aGlzLmlzRW1wdHkoKSlyZXR1cm4gdGhpczthWzBdLnNldCh0aGlzLm1pbi54LHRoaXMubWluLnksdGhpcy5taW4ueikuYXBwbHlNYXRyaXg0KGIpO2FbMV0uc2V0KHRoaXMubWluLngsdGhpcy5taW4ueSx0aGlzLm1heC56KS5hcHBseU1hdHJpeDQoYik7YVsyXS5zZXQodGhpcy5taW4ueCx0aGlzLm1heC55LHRoaXMubWluLnopLmFwcGx5TWF0cml4NChiKTthWzNdLnNldCh0aGlzLm1pbi54LHRoaXMubWF4LnksdGhpcy5tYXgueikuYXBwbHlNYXRyaXg0KGIpO2FbNF0uc2V0KHRoaXMubWF4LngsdGhpcy5taW4ueSx0aGlzLm1pbi56KS5hcHBseU1hdHJpeDQoYik7YVs1XS5zZXQodGhpcy5tYXgueCx0aGlzLm1pbi55LHRoaXMubWF4LnopLmFwcGx5TWF0cml4NChiKTthWzZdLnNldCh0aGlzLm1heC54LHRoaXMubWF4LnksdGhpcy5taW4ueikuYXBwbHlNYXRyaXg0KGIpO1xuICAgIGFbN10uc2V0KHRoaXMubWF4LngsdGhpcy5tYXgueSx0aGlzLm1heC56KS5hcHBseU1hdHJpeDQoYik7dGhpcy5zZXRGcm9tUG9pbnRzKGEpO3JldHVybiB0aGlzfX0oKSx0cmFuc2xhdGU6ZnVuY3Rpb24oYSl7dGhpcy5taW4uYWRkKGEpO3RoaXMubWF4LmFkZChhKTtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLm1pbi5lcXVhbHModGhpcy5taW4pJiZhLm1heC5lcXVhbHModGhpcy5tYXgpfX0pO09iamVjdC5hc3NpZ24oSWEucHJvdG90eXBlLHtzZXQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmNlbnRlci5jb3B5KGEpO3RoaXMucmFkaXVzPWI7cmV0dXJuIHRoaXN9LHNldEZyb21Qb2ludHM6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgWGE7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7dmFyIGQ9dGhpcy5jZW50ZXI7dm9pZCAwIT09Yz9kLmNvcHkoYyk6YS5zZXRGcm9tUG9pbnRzKGIpLmdldENlbnRlcihkKTtmb3IodmFyIGU9Yz0wLGY9Yi5sZW5ndGg7ZTxmO2UrKyljPU1hdGgubWF4KGMsXG4gICAgZC5kaXN0YW5jZVRvU3F1YXJlZChiW2VdKSk7dGhpcy5yYWRpdXM9TWF0aC5zcXJ0KGMpO3JldHVybiB0aGlzfX0oKSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbihhKXt0aGlzLmNlbnRlci5jb3B5KGEuY2VudGVyKTt0aGlzLnJhZGl1cz1hLnJhZGl1cztyZXR1cm4gdGhpc30sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gMD49dGhpcy5yYWRpdXN9LGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGlzdGFuY2VUb1NxdWFyZWQodGhpcy5jZW50ZXIpPD10aGlzLnJhZGl1cyp0aGlzLnJhZGl1c30sZGlzdGFuY2VUb1BvaW50OmZ1bmN0aW9uKGEpe3JldHVybiBhLmRpc3RhbmNlVG8odGhpcy5jZW50ZXIpLXRoaXMucmFkaXVzfSxpbnRlcnNlY3RzU3BoZXJlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucmFkaXVzK2EucmFkaXVzO3JldHVybiBhLmNlbnRlci5kaXN0YW5jZVRvU3F1YXJlZCh0aGlzLmNlbnRlcik8PVxuICAgIGIqYn0saW50ZXJzZWN0c0JveDpmdW5jdGlvbihhKXtyZXR1cm4gYS5pbnRlcnNlY3RzU3BoZXJlKHRoaXMpfSxpbnRlcnNlY3RzUGxhbmU6ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGguYWJzKGEuZGlzdGFuY2VUb1BvaW50KHRoaXMuY2VudGVyKSk8PXRoaXMucmFkaXVzfSxjbGFtcFBvaW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jZW50ZXIuZGlzdGFuY2VUb1NxdWFyZWQoYSk7Yj1ifHxuZXcgcDtiLmNvcHkoYSk7Yz50aGlzLnJhZGl1cyp0aGlzLnJhZGl1cyYmKGIuc3ViKHRoaXMuY2VudGVyKS5ub3JtYWxpemUoKSxiLm11bHRpcGx5U2NhbGFyKHRoaXMucmFkaXVzKS5hZGQodGhpcy5jZW50ZXIpKTtyZXR1cm4gYn0sZ2V0Qm91bmRpbmdCb3g6ZnVuY3Rpb24oYSl7YT1hfHxuZXcgWGE7YS5zZXQodGhpcy5jZW50ZXIsdGhpcy5jZW50ZXIpO2EuZXhwYW5kQnlTY2FsYXIodGhpcy5yYWRpdXMpO3JldHVybiBhfSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24oYSl7dGhpcy5jZW50ZXIuYXBwbHlNYXRyaXg0KGEpO1xuICAgIHRoaXMucmFkaXVzKj1hLmdldE1heFNjYWxlT25BeGlzKCk7cmV0dXJuIHRoaXN9LHRyYW5zbGF0ZTpmdW5jdGlvbihhKXt0aGlzLmNlbnRlci5hZGQoYSk7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5jZW50ZXIuZXF1YWxzKHRoaXMuY2VudGVyKSYmYS5yYWRpdXM9PT10aGlzLnJhZGl1c319KTtPYmplY3QuYXNzaWduKEVhLnByb3RvdHlwZSx7c2V0OmZ1bmN0aW9uKGEsYil7dGhpcy5ub3JtYWwuY29weShhKTt0aGlzLmNvbnN0YW50PWI7cmV0dXJuIHRoaXN9LHNldENvbXBvbmVudHM6ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5ub3JtYWwuc2V0KGEsYixjKTt0aGlzLmNvbnN0YW50PWQ7cmV0dXJuIHRoaXN9LHNldEZyb21Ob3JtYWxBbmRDb3BsYW5hclBvaW50OmZ1bmN0aW9uKGEsYil7dGhpcy5ub3JtYWwuY29weShhKTt0aGlzLmNvbnN0YW50PS1iLmRvdCh0aGlzLm5vcm1hbCk7cmV0dXJuIHRoaXN9LHNldEZyb21Db3BsYW5hclBvaW50czpmdW5jdGlvbigpe3ZhciBhPVxuICAgIG5ldyBwLGI9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGMsZCxlKXtkPWEuc3ViVmVjdG9ycyhlLGQpLmNyb3NzKGIuc3ViVmVjdG9ycyhjLGQpKS5ub3JtYWxpemUoKTt0aGlzLnNldEZyb21Ob3JtYWxBbmRDb3BsYW5hclBvaW50KGQsYyk7cmV0dXJuIHRoaXN9fSgpLGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMubm9ybWFsLmNvcHkoYS5ub3JtYWwpO3RoaXMuY29uc3RhbnQ9YS5jb25zdGFudDtyZXR1cm4gdGhpc30sbm9ybWFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9MS90aGlzLm5vcm1hbC5sZW5ndGgoKTt0aGlzLm5vcm1hbC5tdWx0aXBseVNjYWxhcihhKTt0aGlzLmNvbnN0YW50Kj1hO3JldHVybiB0aGlzfSxuZWdhdGU6ZnVuY3Rpb24oKXt0aGlzLmNvbnN0YW50Kj0tMTt0aGlzLm5vcm1hbC5uZWdhdGUoKTtyZXR1cm4gdGhpc30sZGlzdGFuY2VUb1BvaW50OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm5vcm1hbC5kb3QoYSkrXG4gICAgdGhpcy5jb25zdGFudH0sZGlzdGFuY2VUb1NwaGVyZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kaXN0YW5jZVRvUG9pbnQoYS5jZW50ZXIpLWEucmFkaXVzfSxwcm9qZWN0UG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYnx8bmV3IHApLmNvcHkodGhpcy5ub3JtYWwpLm11bHRpcGx5U2NhbGFyKC10aGlzLmRpc3RhbmNlVG9Qb2ludChhKSkuYWRkKGEpfSxpbnRlcnNlY3RMaW5lOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7Yz1jfHxuZXcgcDt2YXIgZD1iLmRlbHRhKGEpLGU9dGhpcy5ub3JtYWwuZG90KGQpO2lmKDA9PT1lKXtpZigwPT09dGhpcy5kaXN0YW5jZVRvUG9pbnQoYi5zdGFydCkpcmV0dXJuIGMuY29weShiLnN0YXJ0KX1lbHNlIGlmKGU9LShiLnN0YXJ0LmRvdCh0aGlzLm5vcm1hbCkrdGhpcy5jb25zdGFudCkvZSwhKDA+ZXx8MTxlKSlyZXR1cm4gYy5jb3B5KGQpLm11bHRpcGx5U2NhbGFyKGUpLmFkZChiLnN0YXJ0KX19KCksaW50ZXJzZWN0c0xpbmU6ZnVuY3Rpb24oYSl7dmFyIGI9XG4gICAgdGhpcy5kaXN0YW5jZVRvUG9pbnQoYS5zdGFydCk7YT10aGlzLmRpc3RhbmNlVG9Qb2ludChhLmVuZCk7cmV0dXJuIDA+YiYmMDxhfHwwPmEmJjA8Yn0saW50ZXJzZWN0c0JveDpmdW5jdGlvbihhKXtyZXR1cm4gYS5pbnRlcnNlY3RzUGxhbmUodGhpcyl9LGludGVyc2VjdHNTcGhlcmU6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW50ZXJzZWN0c1BsYW5lKHRoaXMpfSxjb3BsYW5hclBvaW50OmZ1bmN0aW9uKGEpe3JldHVybihhfHxuZXcgcCkuY29weSh0aGlzLm5vcm1hbCkubXVsdGlwbHlTY2FsYXIoLXRoaXMuY29uc3RhbnQpfSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCxiPW5ldyBtYTtyZXR1cm4gZnVuY3Rpb24oYyxkKXtkPWR8fGIuZ2V0Tm9ybWFsTWF0cml4KGMpO2M9dGhpcy5jb3BsYW5hclBvaW50KGEpLmFwcGx5TWF0cml4NChjKTtkPXRoaXMubm9ybWFsLmFwcGx5TWF0cml4MyhkKS5ub3JtYWxpemUoKTt0aGlzLmNvbnN0YW50PS1jLmRvdChkKTtyZXR1cm4gdGhpc319KCksXG4gICAgdHJhbnNsYXRlOmZ1bmN0aW9uKGEpe3RoaXMuY29uc3RhbnQtPWEuZG90KHRoaXMubm9ybWFsKTtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLm5vcm1hbC5lcXVhbHModGhpcy5ub3JtYWwpJiZhLmNvbnN0YW50PT09dGhpcy5jb25zdGFudH19KTtPYmplY3QuYXNzaWduKHJkLnByb3RvdHlwZSx7c2V0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZz10aGlzLnBsYW5lcztnWzBdLmNvcHkoYSk7Z1sxXS5jb3B5KGIpO2dbMl0uY29weShjKTtnWzNdLmNvcHkoZCk7Z1s0XS5jb3B5KGUpO2dbNV0uY29weShmKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMucGxhbmVzLGM9MDs2PmM7YysrKWJbY10uY29weShhLnBsYW5lc1tjXSk7cmV0dXJuIHRoaXN9LHNldEZyb21NYXRyaXg6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5wbGFuZXMsXG4gICAgYz1hLmVsZW1lbnRzO2E9Y1swXTt2YXIgZD1jWzFdLGU9Y1syXSxmPWNbM10sZz1jWzRdLGg9Y1s1XSxrPWNbNl0sbT1jWzddLHE9Y1s4XSxsPWNbOV0scD1jWzEwXSxyPWNbMTFdLHQ9Y1sxMl0sdj1jWzEzXSx3PWNbMTRdLGM9Y1sxNV07YlswXS5zZXRDb21wb25lbnRzKGYtYSxtLWcsci1xLGMtdCkubm9ybWFsaXplKCk7YlsxXS5zZXRDb21wb25lbnRzKGYrYSxtK2cscitxLGMrdCkubm9ybWFsaXplKCk7YlsyXS5zZXRDb21wb25lbnRzKGYrZCxtK2gscitsLGMrdikubm9ybWFsaXplKCk7YlszXS5zZXRDb21wb25lbnRzKGYtZCxtLWgsci1sLGMtdikubm9ybWFsaXplKCk7Yls0XS5zZXRDb21wb25lbnRzKGYtZSxtLWssci1wLGMtdykubm9ybWFsaXplKCk7Yls1XS5zZXRDb21wb25lbnRzKGYrZSxtK2sscitwLGMrdykubm9ybWFsaXplKCk7cmV0dXJuIHRoaXN9LGludGVyc2VjdHNPYmplY3Q6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgSWE7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPVxuICAgIGIuZ2VvbWV0cnk7bnVsbD09PWMuYm91bmRpbmdTcGhlcmUmJmMuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7YS5jb3B5KGMuYm91bmRpbmdTcGhlcmUpLmFwcGx5TWF0cml4NChiLm1hdHJpeFdvcmxkKTtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzU3BoZXJlKGEpfX0oKSxpbnRlcnNlY3RzU3ByaXRlOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IElhO3JldHVybiBmdW5jdGlvbihiKXthLmNlbnRlci5zZXQoMCwwLDApO2EucmFkaXVzPS43MDcxMDY3ODExODY1NDc2O2EuYXBwbHlNYXRyaXg0KGIubWF0cml4V29ybGQpO3JldHVybiB0aGlzLmludGVyc2VjdHNTcGhlcmUoYSl9fSgpLGludGVyc2VjdHNTcGhlcmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5wbGFuZXMsYz1hLmNlbnRlcjthPS1hLnJhZGl1cztmb3IodmFyIGQ9MDs2PmQ7ZCsrKWlmKGJbZF0uZGlzdGFuY2VUb1BvaW50KGMpPGEpcmV0dXJuITE7cmV0dXJuITB9LGludGVyc2VjdHNCb3g6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCxiPVxuICAgIG5ldyBwO3JldHVybiBmdW5jdGlvbihjKXtmb3IodmFyIGQ9dGhpcy5wbGFuZXMsZT0wOzY+ZTtlKyspe3ZhciBmPWRbZV07YS54PTA8Zi5ub3JtYWwueD9jLm1pbi54OmMubWF4Lng7Yi54PTA8Zi5ub3JtYWwueD9jLm1heC54OmMubWluLng7YS55PTA8Zi5ub3JtYWwueT9jLm1pbi55OmMubWF4Lnk7Yi55PTA8Zi5ub3JtYWwueT9jLm1heC55OmMubWluLnk7YS56PTA8Zi5ub3JtYWwuej9jLm1pbi56OmMubWF4Lno7Yi56PTA8Zi5ub3JtYWwuej9jLm1heC56OmMubWluLno7dmFyIGc9Zi5kaXN0YW5jZVRvUG9pbnQoYSksZj1mLmRpc3RhbmNlVG9Qb2ludChiKTtpZigwPmcmJjA+ZilyZXR1cm4hMX1yZXR1cm4hMH19KCksY29udGFpbnNQb2ludDpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5wbGFuZXMsYz0wOzY+YztjKyspaWYoMD5iW2NdLmRpc3RhbmNlVG9Qb2ludChhKSlyZXR1cm4hMTtyZXR1cm4hMH19KTtnYi5Sb3RhdGlvbk9yZGVycz1cIlhZWiBZWlggWlhZIFhaWSBZWFogWllYXCIuc3BsaXQoXCIgXCIpO1xuICAgIGdiLkRlZmF1bHRPcmRlcj1cIlhZWlwiO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGdiLnByb3RvdHlwZSx7eDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3h9LHNldDpmdW5jdGlvbihhKXt0aGlzLl94PWE7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCl9fSx5OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5feX0sc2V0OmZ1bmN0aW9uKGEpe3RoaXMuX3k9YTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKX19LHo6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl96fSxzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5fej1hO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpfX0sb3JkZXI6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcmRlcn0sc2V0OmZ1bmN0aW9uKGEpe3RoaXMuX29yZGVyPWE7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCl9fX0pO09iamVjdC5hc3NpZ24oZ2IucHJvdG90eXBlLHtpc0V1bGVyOiEwLHNldDpmdW5jdGlvbihhLGIsYyxkKXt0aGlzLl94PWE7dGhpcy5feT1iO3RoaXMuX3o9XG4gICAgYzt0aGlzLl9vcmRlcj1kfHx0aGlzLl9vcmRlcjt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5feCx0aGlzLl95LHRoaXMuX3osdGhpcy5fb3JkZXIpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMuX3g9YS5feDt0aGlzLl95PWEuX3k7dGhpcy5fej1hLl96O3RoaXMuX29yZGVyPWEuX29yZGVyO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpO3JldHVybiB0aGlzfSxzZXRGcm9tUm90YXRpb25NYXRyaXg6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVEuY2xhbXAsZT1hLmVsZW1lbnRzO2E9ZVswXTt2YXIgZj1lWzRdLGc9ZVs4XSxoPWVbMV0saz1lWzVdLG09ZVs5XSxsPWVbMl0sbj1lWzZdLGU9ZVsxMF07Yj1ifHx0aGlzLl9vcmRlcjtcIlhZWlwiPT09Yj8odGhpcy5feT1NYXRoLmFzaW4oZChnLC0xLDEpKSwuOTk5OTk+TWF0aC5hYnMoZyk/KHRoaXMuX3g9TWF0aC5hdGFuMigtbSxlKSx0aGlzLl96PVxuICAgIE1hdGguYXRhbjIoLWYsYSkpOih0aGlzLl94PU1hdGguYXRhbjIobixrKSx0aGlzLl96PTApKTpcIllYWlwiPT09Yj8odGhpcy5feD1NYXRoLmFzaW4oLWQobSwtMSwxKSksLjk5OTk5Pk1hdGguYWJzKG0pPyh0aGlzLl95PU1hdGguYXRhbjIoZyxlKSx0aGlzLl96PU1hdGguYXRhbjIoaCxrKSk6KHRoaXMuX3k9TWF0aC5hdGFuMigtbCxhKSx0aGlzLl96PTApKTpcIlpYWVwiPT09Yj8odGhpcy5feD1NYXRoLmFzaW4oZChuLC0xLDEpKSwuOTk5OTk+TWF0aC5hYnMobik/KHRoaXMuX3k9TWF0aC5hdGFuMigtbCxlKSx0aGlzLl96PU1hdGguYXRhbjIoLWYsaykpOih0aGlzLl95PTAsdGhpcy5fej1NYXRoLmF0YW4yKGgsYSkpKTpcIlpZWFwiPT09Yj8odGhpcy5feT1NYXRoLmFzaW4oLWQobCwtMSwxKSksLjk5OTk5Pk1hdGguYWJzKGwpPyh0aGlzLl94PU1hdGguYXRhbjIobixlKSx0aGlzLl96PU1hdGguYXRhbjIoaCxhKSk6KHRoaXMuX3g9MCx0aGlzLl96PU1hdGguYXRhbjIoLWYsaykpKTpcIllaWFwiPT09XG4gICAgYj8odGhpcy5fej1NYXRoLmFzaW4oZChoLC0xLDEpKSwuOTk5OTk+TWF0aC5hYnMoaCk/KHRoaXMuX3g9TWF0aC5hdGFuMigtbSxrKSx0aGlzLl95PU1hdGguYXRhbjIoLWwsYSkpOih0aGlzLl94PTAsdGhpcy5feT1NYXRoLmF0YW4yKGcsZSkpKTpcIlhaWVwiPT09Yj8odGhpcy5fej1NYXRoLmFzaW4oLWQoZiwtMSwxKSksLjk5OTk5Pk1hdGguYWJzKGYpPyh0aGlzLl94PU1hdGguYXRhbjIobixrKSx0aGlzLl95PU1hdGguYXRhbjIoZyxhKSk6KHRoaXMuX3g9TWF0aC5hdGFuMigtbSxlKSx0aGlzLl95PTApKTpjb25zb2xlLndhcm4oXCJUSFJFRS5FdWxlcjogLnNldEZyb21Sb3RhdGlvbk1hdHJpeCgpIGdpdmVuIHVuc3VwcG9ydGVkIG9yZGVyOiBcIitiKTt0aGlzLl9vcmRlcj1iO2lmKCExIT09Yyl0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpc30sc2V0RnJvbVF1YXRlcm5pb246ZnVuY3Rpb24oKXt2YXIgYT1uZXcgTztyZXR1cm4gZnVuY3Rpb24oYixjLGQpe2EubWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24oYik7XG4gICAgcmV0dXJuIHRoaXMuc2V0RnJvbVJvdGF0aW9uTWF0cml4KGEsYyxkKX19KCksc2V0RnJvbVZlY3RvcjM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5zZXQoYS54LGEueSxhLnosYnx8dGhpcy5fb3JkZXIpfSxyZW9yZGVyOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IGhhO3JldHVybiBmdW5jdGlvbihiKXthLnNldEZyb21FdWxlcih0aGlzKTtyZXR1cm4gdGhpcy5zZXRGcm9tUXVhdGVybmlvbihhLGIpfX0oKSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuX3g9PT10aGlzLl94JiZhLl95PT09dGhpcy5feSYmYS5fej09PXRoaXMuX3omJmEuX29yZGVyPT09dGhpcy5fb3JkZXJ9LGZyb21BcnJheTpmdW5jdGlvbihhKXt0aGlzLl94PWFbMF07dGhpcy5feT1hWzFdO3RoaXMuX3o9YVsyXTt2b2lkIDAhPT1hWzNdJiYodGhpcy5fb3JkZXI9YVszXSk7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1hJiYoYT1bXSk7XG4gICAgdm9pZCAwPT09YiYmKGI9MCk7YVtiXT10aGlzLl94O2FbYisxXT10aGlzLl95O2FbYisyXT10aGlzLl96O2FbYiszXT10aGlzLl9vcmRlcjtyZXR1cm4gYX0sdG9WZWN0b3IzOmZ1bmN0aW9uKGEpe3JldHVybiBhP2Euc2V0KHRoaXMuX3gsdGhpcy5feSx0aGlzLl96KTpuZXcgcCh0aGlzLl94LHRoaXMuX3ksdGhpcy5feil9LG9uQ2hhbmdlOmZ1bmN0aW9uKGEpe3RoaXMub25DaGFuZ2VDYWxsYmFjaz1hO3JldHVybiB0aGlzfSxvbkNoYW5nZUNhbGxiYWNrOmZ1bmN0aW9uKCl7fX0pO09iamVjdC5hc3NpZ24oV2QucHJvdG90eXBlLHtzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5tYXNrPTE8PGF8MH0sZW5hYmxlOmZ1bmN0aW9uKGEpe3RoaXMubWFzaz10aGlzLm1hc2t8MTw8YXwwfSx0b2dnbGU6ZnVuY3Rpb24oYSl7dGhpcy5tYXNrXj0xPDxhfDB9LGRpc2FibGU6ZnVuY3Rpb24oYSl7dGhpcy5tYXNrJj1+KDE8PGF8MCl9LHRlc3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIDAhPT0odGhpcy5tYXNrJlxuICAgIGEubWFzayl9fSk7dmFyIGNnPTA7eC5EZWZhdWx0VXA9bmV3IHAoMCwxLDApO3guRGVmYXVsdE1hdHJpeEF1dG9VcGRhdGU9ITA7eC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHphLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOngsaXNPYmplY3QzRDohMCxvbkJlZm9yZVJlbmRlcjpmdW5jdGlvbigpe30sb25BZnRlclJlbmRlcjpmdW5jdGlvbigpe30sYXBwbHlNYXRyaXg6ZnVuY3Rpb24oYSl7dGhpcy5tYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhhLHRoaXMubWF0cml4KTt0aGlzLm1hdHJpeC5kZWNvbXBvc2UodGhpcy5wb3NpdGlvbix0aGlzLnF1YXRlcm5pb24sdGhpcy5zY2FsZSl9LGFwcGx5UXVhdGVybmlvbjpmdW5jdGlvbihhKXt0aGlzLnF1YXRlcm5pb24ucHJlbXVsdGlwbHkoYSk7cmV0dXJuIHRoaXN9LHNldFJvdGF0aW9uRnJvbUF4aXNBbmdsZTpmdW5jdGlvbihhLGIpe3RoaXMucXVhdGVybmlvbi5zZXRGcm9tQXhpc0FuZ2xlKGEsYil9LHNldFJvdGF0aW9uRnJvbUV1bGVyOmZ1bmN0aW9uKGEpe3RoaXMucXVhdGVybmlvbi5zZXRGcm9tRXVsZXIoYSxcbiAgICAhMCl9LHNldFJvdGF0aW9uRnJvbU1hdHJpeDpmdW5jdGlvbihhKXt0aGlzLnF1YXRlcm5pb24uc2V0RnJvbVJvdGF0aW9uTWF0cml4KGEpfSxzZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uOmZ1bmN0aW9uKGEpe3RoaXMucXVhdGVybmlvbi5jb3B5KGEpfSxyb3RhdGVPbkF4aXM6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgaGE7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7YS5zZXRGcm9tQXhpc0FuZ2xlKGIsYyk7dGhpcy5xdWF0ZXJuaW9uLm11bHRpcGx5KGEpO3JldHVybiB0aGlzfX0oKSxyb3RhdGVPbldvcmxkQXhpczpmdW5jdGlvbigpe3ZhciBhPW5ldyBoYTtyZXR1cm4gZnVuY3Rpb24oYixjKXthLnNldEZyb21BeGlzQW5nbGUoYixjKTt0aGlzLnF1YXRlcm5pb24ucHJlbXVsdGlwbHkoYSk7cmV0dXJuIHRoaXN9fSgpLHJvdGF0ZVg6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCgxLDAsMCk7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnJvdGF0ZU9uQXhpcyhhLGIpfX0oKSxyb3RhdGVZOmZ1bmN0aW9uKCl7dmFyIGE9XG4gICAgbmV3IHAoMCwxLDApO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5yb3RhdGVPbkF4aXMoYSxiKX19KCkscm90YXRlWjpmdW5jdGlvbigpe3ZhciBhPW5ldyBwKDAsMCwxKTtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMucm90YXRlT25BeGlzKGEsYil9fSgpLHRyYW5zbGF0ZU9uQXhpczpmdW5jdGlvbigpe3ZhciBhPW5ldyBwO3JldHVybiBmdW5jdGlvbihiLGMpe2EuY29weShiKS5hcHBseVF1YXRlcm5pb24odGhpcy5xdWF0ZXJuaW9uKTt0aGlzLnBvc2l0aW9uLmFkZChhLm11bHRpcGx5U2NhbGFyKGMpKTtyZXR1cm4gdGhpc319KCksdHJhbnNsYXRlWDpmdW5jdGlvbigpe3ZhciBhPW5ldyBwKDEsMCwwKTtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMudHJhbnNsYXRlT25BeGlzKGEsYil9fSgpLHRyYW5zbGF0ZVk6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCgwLDEsMCk7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnRyYW5zbGF0ZU9uQXhpcyhhLFxuICAgIGIpfX0oKSx0cmFuc2xhdGVaOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHAoMCwwLDEpO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy50cmFuc2xhdGVPbkF4aXMoYSxiKX19KCksbG9jYWxUb1dvcmxkOmZ1bmN0aW9uKGEpe3JldHVybiBhLmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKX0sd29ybGRUb0xvY2FsOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE87cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBiLmFwcGx5TWF0cml4NChhLmdldEludmVyc2UodGhpcy5tYXRyaXhXb3JsZCkpfX0oKSxsb29rQXQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgTyxiPW5ldyBwO3JldHVybiBmdW5jdGlvbihjLGQsZSl7Yy5pc1ZlY3RvcjM/Yi5jb3B5KGMpOmIuc2V0KGMsZCxlKTt0aGlzLmlzQ2FtZXJhP2EubG9va0F0KHRoaXMucG9zaXRpb24sYix0aGlzLnVwKTphLmxvb2tBdChiLHRoaXMucG9zaXRpb24sdGhpcy51cCk7dGhpcy5xdWF0ZXJuaW9uLnNldEZyb21Sb3RhdGlvbk1hdHJpeChhKX19KCksXG4gICAgYWRkOmZ1bmN0aW9uKGEpe2lmKDE8YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHZhciBiPTA7Yjxhcmd1bWVudHMubGVuZ3RoO2IrKyl0aGlzLmFkZChhcmd1bWVudHNbYl0pO3JldHVybiB0aGlzfWlmKGE9PT10aGlzKXJldHVybiBjb25zb2xlLmVycm9yKFwiVEhSRUUuT2JqZWN0M0QuYWRkOiBvYmplY3QgY2FuJ3QgYmUgYWRkZWQgYXMgYSBjaGlsZCBvZiBpdHNlbGYuXCIsYSksdGhpczthJiZhLmlzT2JqZWN0M0Q/KG51bGwhPT1hLnBhcmVudCYmYS5wYXJlbnQucmVtb3ZlKGEpLGEucGFyZW50PXRoaXMsYS5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiYWRkZWRcIn0pLHRoaXMuY2hpbGRyZW4ucHVzaChhKSk6Y29uc29sZS5lcnJvcihcIlRIUkVFLk9iamVjdDNELmFkZDogb2JqZWN0IG5vdCBhbiBpbnN0YW5jZSBvZiBUSFJFRS5PYmplY3QzRC5cIixhKTtyZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKGEpe2lmKDE8YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHZhciBiPTA7Yjxhcmd1bWVudHMubGVuZ3RoO2IrKyl0aGlzLnJlbW92ZShhcmd1bWVudHNbYl0pO1xuICAgIHJldHVybiB0aGlzfWI9dGhpcy5jaGlsZHJlbi5pbmRleE9mKGEpOy0xIT09YiYmKGEucGFyZW50PW51bGwsYS5kaXNwYXRjaEV2ZW50KHt0eXBlOlwicmVtb3ZlZFwifSksdGhpcy5jaGlsZHJlbi5zcGxpY2UoYiwxKSk7cmV0dXJuIHRoaXN9LGdldE9iamVjdEJ5SWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0T2JqZWN0QnlQcm9wZXJ0eShcImlkXCIsYSl9LGdldE9iamVjdEJ5TmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRPYmplY3RCeVByb3BlcnR5KFwibmFtZVwiLGEpfSxnZXRPYmplY3RCeVByb3BlcnR5OmZ1bmN0aW9uKGEsYil7aWYodGhpc1thXT09PWIpcmV0dXJuIHRoaXM7Zm9yKHZhciBjPTAsZD10aGlzLmNoaWxkcmVuLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT10aGlzLmNoaWxkcmVuW2NdLmdldE9iamVjdEJ5UHJvcGVydHkoYSxiKTtpZih2b2lkIDAhPT1lKXJldHVybiBlfX0sZ2V0V29ybGRQb3NpdGlvbjpmdW5jdGlvbihhKXthPWF8fG5ldyBwO3RoaXMudXBkYXRlTWF0cml4V29ybGQoITApO1xuICAgIHJldHVybiBhLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLm1hdHJpeFdvcmxkKX0sZ2V0V29ybGRRdWF0ZXJuaW9uOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHAsYj1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYyl7Yz1jfHxuZXcgaGE7dGhpcy51cGRhdGVNYXRyaXhXb3JsZCghMCk7dGhpcy5tYXRyaXhXb3JsZC5kZWNvbXBvc2UoYSxjLGIpO3JldHVybiBjfX0oKSxnZXRXb3JsZFJvdGF0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IGhhO3JldHVybiBmdW5jdGlvbihiKXtiPWJ8fG5ldyBnYjt0aGlzLmdldFdvcmxkUXVhdGVybmlvbihhKTtyZXR1cm4gYi5zZXRGcm9tUXVhdGVybmlvbihhLHRoaXMucm90YXRpb24ub3JkZXIsITEpfX0oKSxnZXRXb3JsZFNjYWxlOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHAsYj1uZXcgaGE7cmV0dXJuIGZ1bmN0aW9uKGMpe2M9Y3x8bmV3IHA7dGhpcy51cGRhdGVNYXRyaXhXb3JsZCghMCk7dGhpcy5tYXRyaXhXb3JsZC5kZWNvbXBvc2UoYSxiLGMpO3JldHVybiBjfX0oKSxcbiAgICBnZXRXb3JsZERpcmVjdGlvbjpmdW5jdGlvbigpe3ZhciBhPW5ldyBoYTtyZXR1cm4gZnVuY3Rpb24oYil7Yj1ifHxuZXcgcDt0aGlzLmdldFdvcmxkUXVhdGVybmlvbihhKTtyZXR1cm4gYi5zZXQoMCwwLDEpLmFwcGx5UXVhdGVybmlvbihhKX19KCkscmF5Y2FzdDpmdW5jdGlvbigpe30sdHJhdmVyc2U6ZnVuY3Rpb24oYSl7YSh0aGlzKTtmb3IodmFyIGI9dGhpcy5jaGlsZHJlbixjPTAsZD1iLmxlbmd0aDtjPGQ7YysrKWJbY10udHJhdmVyc2UoYSl9LHRyYXZlcnNlVmlzaWJsZTpmdW5jdGlvbihhKXtpZighMSE9PXRoaXMudmlzaWJsZSl7YSh0aGlzKTtmb3IodmFyIGI9dGhpcy5jaGlsZHJlbixjPTAsZD1iLmxlbmd0aDtjPGQ7YysrKWJbY10udHJhdmVyc2VWaXNpYmxlKGEpfX0sdHJhdmVyc2VBbmNlc3RvcnM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5wYXJlbnQ7bnVsbCE9PWImJihhKGIpLGIudHJhdmVyc2VBbmNlc3RvcnMoYSkpfSx1cGRhdGVNYXRyaXg6ZnVuY3Rpb24oKXt0aGlzLm1hdHJpeC5jb21wb3NlKHRoaXMucG9zaXRpb24sXG4gICAgdGhpcy5xdWF0ZXJuaW9uLHRoaXMuc2NhbGUpO3RoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMH0sdXBkYXRlTWF0cml4V29ybGQ6ZnVuY3Rpb24oYSl7dGhpcy5tYXRyaXhBdXRvVXBkYXRlJiZ0aGlzLnVwZGF0ZU1hdHJpeCgpO2lmKHRoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZXx8YSludWxsPT09dGhpcy5wYXJlbnQ/dGhpcy5tYXRyaXhXb3JsZC5jb3B5KHRoaXMubWF0cml4KTp0aGlzLm1hdHJpeFdvcmxkLm11bHRpcGx5TWF0cmljZXModGhpcy5wYXJlbnQubWF0cml4V29ybGQsdGhpcy5tYXRyaXgpLHRoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMSxhPSEwO2Zvcih2YXIgYj10aGlzLmNoaWxkcmVuLGM9MCxkPWIubGVuZ3RoO2M8ZDtjKyspYltjXS51cGRhdGVNYXRyaXhXb3JsZChhKX0sdG9KU09OOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYixjKXt2b2lkIDA9PT1iW2MudXVpZF0mJihiW2MudXVpZF09Yy50b0pTT04oYSkpO3JldHVybiBjLnV1aWR9ZnVuY3Rpb24gYyhhKXt2YXIgYj1cbiAgICBbXSxjO2ZvcihjIGluIGEpe3ZhciBkPWFbY107ZGVsZXRlIGQubWV0YWRhdGE7Yi5wdXNoKGQpfXJldHVybiBifXZhciBkPXZvaWQgMD09PWF8fFwic3RyaW5nXCI9PT10eXBlb2YgYSxlPXt9O2QmJihhPXtnZW9tZXRyaWVzOnt9LG1hdGVyaWFsczp7fSx0ZXh0dXJlczp7fSxpbWFnZXM6e30sc2hhcGVzOnt9fSxlLm1ldGFkYXRhPXt2ZXJzaW9uOjQuNSx0eXBlOlwiT2JqZWN0XCIsZ2VuZXJhdG9yOlwiT2JqZWN0M0QudG9KU09OXCJ9KTt2YXIgZj17fTtmLnV1aWQ9dGhpcy51dWlkO2YudHlwZT10aGlzLnR5cGU7XCJcIiE9PXRoaXMubmFtZSYmKGYubmFtZT10aGlzLm5hbWUpOyEwPT09dGhpcy5jYXN0U2hhZG93JiYoZi5jYXN0U2hhZG93PSEwKTshMD09PXRoaXMucmVjZWl2ZVNoYWRvdyYmKGYucmVjZWl2ZVNoYWRvdz0hMCk7ITE9PT10aGlzLnZpc2libGUmJihmLnZpc2libGU9ITEpO1wie31cIiE9PUpTT04uc3RyaW5naWZ5KHRoaXMudXNlckRhdGEpJiYoZi51c2VyRGF0YT10aGlzLnVzZXJEYXRhKTtcbiAgICBmLm1hdHJpeD10aGlzLm1hdHJpeC50b0FycmF5KCk7aWYodm9pZCAwIT09dGhpcy5nZW9tZXRyeSl7Zi5nZW9tZXRyeT1iKGEuZ2VvbWV0cmllcyx0aGlzLmdlb21ldHJ5KTt2YXIgZz10aGlzLmdlb21ldHJ5LnBhcmFtZXRlcnM7aWYodm9pZCAwIT09ZyYmdm9pZCAwIT09Zy5zaGFwZXMpaWYoZz1nLnNoYXBlcyxBcnJheS5pc0FycmF5KGcpKWZvcih2YXIgaD0wLGs9Zy5sZW5ndGg7aDxrO2grKyliKGEuc2hhcGVzLGdbaF0pO2Vsc2UgYihhLnNoYXBlcyxnKX1pZih2b2lkIDAhPT10aGlzLm1hdGVyaWFsKWlmKEFycmF5LmlzQXJyYXkodGhpcy5tYXRlcmlhbCkpe2c9W107aD0wO2ZvcihrPXRoaXMubWF0ZXJpYWwubGVuZ3RoO2g8aztoKyspZy5wdXNoKGIoYS5tYXRlcmlhbHMsdGhpcy5tYXRlcmlhbFtoXSkpO2YubWF0ZXJpYWw9Z31lbHNlIGYubWF0ZXJpYWw9YihhLm1hdGVyaWFscyx0aGlzLm1hdGVyaWFsKTtpZigwPHRoaXMuY2hpbGRyZW4ubGVuZ3RoKWZvcihmLmNoaWxkcmVuPVxuICAgIFtdLGg9MDtoPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2grKylmLmNoaWxkcmVuLnB1c2godGhpcy5jaGlsZHJlbltoXS50b0pTT04oYSkub2JqZWN0KTtpZihkKXt2YXIgZD1jKGEuZ2VvbWV0cmllcyksaD1jKGEubWF0ZXJpYWxzKSxrPWMoYS50ZXh0dXJlcyksbT1jKGEuaW1hZ2VzKTtnPWMoYS5zaGFwZXMpOzA8ZC5sZW5ndGgmJihlLmdlb21ldHJpZXM9ZCk7MDxoLmxlbmd0aCYmKGUubWF0ZXJpYWxzPWgpOzA8ay5sZW5ndGgmJihlLnRleHR1cmVzPWspOzA8bS5sZW5ndGgmJihlLmltYWdlcz1tKTswPGcubGVuZ3RoJiYoZS5zaGFwZXM9Zyl9ZS5vYmplY3Q9ZjtyZXR1cm4gZX0sY2xvbmU6ZnVuY3Rpb24oYSl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMsYSl9LGNvcHk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj0hMCk7dGhpcy5uYW1lPWEubmFtZTt0aGlzLnVwLmNvcHkoYS51cCk7dGhpcy5wb3NpdGlvbi5jb3B5KGEucG9zaXRpb24pO3RoaXMucXVhdGVybmlvbi5jb3B5KGEucXVhdGVybmlvbik7XG4gICAgdGhpcy5zY2FsZS5jb3B5KGEuc2NhbGUpO3RoaXMubWF0cml4LmNvcHkoYS5tYXRyaXgpO3RoaXMubWF0cml4V29ybGQuY29weShhLm1hdHJpeFdvcmxkKTt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9YS5tYXRyaXhBdXRvVXBkYXRlO3RoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZT1hLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU7dGhpcy5sYXllcnMubWFzaz1hLmxheWVycy5tYXNrO3RoaXMudmlzaWJsZT1hLnZpc2libGU7dGhpcy5jYXN0U2hhZG93PWEuY2FzdFNoYWRvdzt0aGlzLnJlY2VpdmVTaGFkb3c9YS5yZWNlaXZlU2hhZG93O3RoaXMuZnJ1c3R1bUN1bGxlZD1hLmZydXN0dW1DdWxsZWQ7dGhpcy5yZW5kZXJPcmRlcj1hLnJlbmRlck9yZGVyO3RoaXMudXNlckRhdGE9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhLnVzZXJEYXRhKSk7aWYoITA9PT1iKWZvcihiPTA7YjxhLmNoaWxkcmVuLmxlbmd0aDtiKyspdGhpcy5hZGQoYS5jaGlsZHJlbltiXS5jbG9uZSgpKTtyZXR1cm4gdGhpc319KTtcbiAgICBUYS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VGEsaXNDYW1lcmE6ITAsY29weTpmdW5jdGlvbihhLGIpe3gucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEsYik7dGhpcy5tYXRyaXhXb3JsZEludmVyc2UuY29weShhLm1hdHJpeFdvcmxkSW52ZXJzZSk7dGhpcy5wcm9qZWN0aW9uTWF0cml4LmNvcHkoYS5wcm9qZWN0aW9uTWF0cml4KTtyZXR1cm4gdGhpc30sZ2V0V29ybGREaXJlY3Rpb246ZnVuY3Rpb24oKXt2YXIgYT1uZXcgaGE7cmV0dXJuIGZ1bmN0aW9uKGIpe2I9Ynx8bmV3IHA7dGhpcy5nZXRXb3JsZFF1YXRlcm5pb24oYSk7cmV0dXJuIGIuc2V0KDAsMCwtMSkuYXBwbHlRdWF0ZXJuaW9uKGEpfX0oKSx1cGRhdGVNYXRyaXhXb3JsZDpmdW5jdGlvbihhKXt4LnByb3RvdHlwZS51cGRhdGVNYXRyaXhXb3JsZC5jYWxsKHRoaXMsYSk7dGhpcy5tYXRyaXhXb3JsZEludmVyc2UuZ2V0SW52ZXJzZSh0aGlzLm1hdHJpeFdvcmxkKX0sXG4gICAgY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9fSk7TGIucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUYS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpMYixpc09ydGhvZ3JhcGhpY0NhbWVyYTohMCxjb3B5OmZ1bmN0aW9uKGEsYil7VGEucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEsYik7dGhpcy5sZWZ0PWEubGVmdDt0aGlzLnJpZ2h0PWEucmlnaHQ7dGhpcy50b3A9YS50b3A7dGhpcy5ib3R0b209YS5ib3R0b207dGhpcy5uZWFyPWEubmVhcjt0aGlzLmZhcj1hLmZhcjt0aGlzLnpvb209YS56b29tO3RoaXMudmlldz1udWxsPT09YS52aWV3P251bGw6T2JqZWN0LmFzc2lnbih7fSxhLnZpZXcpO3JldHVybiB0aGlzfSxzZXRWaWV3T2Zmc2V0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXtudWxsPT09dGhpcy52aWV3JiYodGhpcy52aWV3PXtlbmFibGVkOiEwLGZ1bGxXaWR0aDoxLGZ1bGxIZWlnaHQ6MSxvZmZzZXRYOjAsXG4gICAgb2Zmc2V0WTowLHdpZHRoOjEsaGVpZ2h0OjF9KTt0aGlzLnZpZXcuZW5hYmxlZD0hMDt0aGlzLnZpZXcuZnVsbFdpZHRoPWE7dGhpcy52aWV3LmZ1bGxIZWlnaHQ9Yjt0aGlzLnZpZXcub2Zmc2V0WD1jO3RoaXMudmlldy5vZmZzZXRZPWQ7dGhpcy52aWV3LndpZHRoPWU7dGhpcy52aWV3LmhlaWdodD1mO3RoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfSxjbGVhclZpZXdPZmZzZXQ6ZnVuY3Rpb24oKXtudWxsIT09dGhpcy52aWV3JiYodGhpcy52aWV3LmVuYWJsZWQ9ITEpO3RoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfSx1cGRhdGVQcm9qZWN0aW9uTWF0cml4OmZ1bmN0aW9uKCl7dmFyIGE9KHRoaXMucmlnaHQtdGhpcy5sZWZ0KS8oMip0aGlzLnpvb20pLGI9KHRoaXMudG9wLXRoaXMuYm90dG9tKS8oMip0aGlzLnpvb20pLGM9KHRoaXMucmlnaHQrdGhpcy5sZWZ0KS8yLGQ9KHRoaXMudG9wK3RoaXMuYm90dG9tKS8yLGU9Yy1hLGM9YythLGE9ZCtiLGI9ZC1iO2lmKG51bGwhPT1cbiAgICB0aGlzLnZpZXcmJnRoaXMudmlldy5lbmFibGVkKXZhciBjPXRoaXMuem9vbS8odGhpcy52aWV3LndpZHRoL3RoaXMudmlldy5mdWxsV2lkdGgpLGI9dGhpcy56b29tLyh0aGlzLnZpZXcuaGVpZ2h0L3RoaXMudmlldy5mdWxsSGVpZ2h0KSxmPSh0aGlzLnJpZ2h0LXRoaXMubGVmdCkvdGhpcy52aWV3LndpZHRoLGQ9KHRoaXMudG9wLXRoaXMuYm90dG9tKS90aGlzLnZpZXcuaGVpZ2h0LGU9ZSt0aGlzLnZpZXcub2Zmc2V0WC9jKmYsYz1lK3RoaXMudmlldy53aWR0aC9jKmYsYT1hLXRoaXMudmlldy5vZmZzZXRZL2IqZCxiPWEtdGhpcy52aWV3LmhlaWdodC9iKmQ7dGhpcy5wcm9qZWN0aW9uTWF0cml4Lm1ha2VPcnRob2dyYXBoaWMoZSxjLGEsYix0aGlzLm5lYXIsdGhpcy5mYXIpfSx0b0pTT046ZnVuY3Rpb24oYSl7YT14LnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLGEpO2Eub2JqZWN0Lnpvb209dGhpcy56b29tO2Eub2JqZWN0LmxlZnQ9dGhpcy5sZWZ0O2Eub2JqZWN0LnJpZ2h0PVxuICAgIHRoaXMucmlnaHQ7YS5vYmplY3QudG9wPXRoaXMudG9wO2Eub2JqZWN0LmJvdHRvbT10aGlzLmJvdHRvbTthLm9iamVjdC5uZWFyPXRoaXMubmVhcjthLm9iamVjdC5mYXI9dGhpcy5mYXI7bnVsbCE9PXRoaXMudmlldyYmKGEub2JqZWN0LnZpZXc9T2JqZWN0LmFzc2lnbih7fSx0aGlzLnZpZXcpKTtyZXR1cm4gYX19KTtPYmplY3QuYXNzaWduKFlhLnByb3RvdHlwZSx7Y2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5hPWEuYTt0aGlzLmI9YS5iO3RoaXMuYz1hLmM7dGhpcy5ub3JtYWwuY29weShhLm5vcm1hbCk7dGhpcy5jb2xvci5jb3B5KGEuY29sb3IpO3RoaXMubWF0ZXJpYWxJbmRleD1hLm1hdGVyaWFsSW5kZXg7Zm9yKHZhciBiPTAsYz1hLnZlcnRleE5vcm1hbHMubGVuZ3RoO2I8YztiKyspdGhpcy52ZXJ0ZXhOb3JtYWxzW2JdPWEudmVydGV4Tm9ybWFsc1tiXS5jbG9uZSgpO2I9MDtcbiAgICBmb3IoYz1hLnZlcnRleENvbG9ycy5sZW5ndGg7YjxjO2IrKyl0aGlzLnZlcnRleENvbG9yc1tiXT1hLnZlcnRleENvbG9yc1tiXS5jbG9uZSgpO3JldHVybiB0aGlzfX0pO3ZhciBkZz0wO0wucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh6YS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpMLGlzR2VvbWV0cnk6ITAsYXBwbHlNYXRyaXg6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPShuZXcgbWEpLmdldE5vcm1hbE1hdHJpeChhKSxjPTAsZD10aGlzLnZlcnRpY2VzLmxlbmd0aDtjPGQ7YysrKXRoaXMudmVydGljZXNbY10uYXBwbHlNYXRyaXg0KGEpO2M9MDtmb3IoZD10aGlzLmZhY2VzLmxlbmd0aDtjPGQ7YysrKXthPXRoaXMuZmFjZXNbY107YS5ub3JtYWwuYXBwbHlNYXRyaXgzKGIpLm5vcm1hbGl6ZSgpO2Zvcih2YXIgZT0wLGY9YS52ZXJ0ZXhOb3JtYWxzLmxlbmd0aDtlPGY7ZSsrKWEudmVydGV4Tm9ybWFsc1tlXS5hcHBseU1hdHJpeDMoYikubm9ybWFsaXplKCl9bnVsbCE9PVxuICAgIHRoaXMuYm91bmRpbmdCb3gmJnRoaXMuY29tcHV0ZUJvdW5kaW5nQm94KCk7bnVsbCE9PXRoaXMuYm91bmRpbmdTcGhlcmUmJnRoaXMuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7dGhpcy5ub3JtYWxzTmVlZFVwZGF0ZT10aGlzLnZlcnRpY2VzTmVlZFVwZGF0ZT0hMDtyZXR1cm4gdGhpc30scm90YXRlWDpmdW5jdGlvbigpe3ZhciBhPW5ldyBPO3JldHVybiBmdW5jdGlvbihiKXthLm1ha2VSb3RhdGlvblgoYik7dGhpcy5hcHBseU1hdHJpeChhKTtyZXR1cm4gdGhpc319KCkscm90YXRlWTpmdW5jdGlvbigpe3ZhciBhPW5ldyBPO3JldHVybiBmdW5jdGlvbihiKXthLm1ha2VSb3RhdGlvblkoYik7dGhpcy5hcHBseU1hdHJpeChhKTtyZXR1cm4gdGhpc319KCkscm90YXRlWjpmdW5jdGlvbigpe3ZhciBhPW5ldyBPO3JldHVybiBmdW5jdGlvbihiKXthLm1ha2VSb3RhdGlvblooYik7dGhpcy5hcHBseU1hdHJpeChhKTtyZXR1cm4gdGhpc319KCksdHJhbnNsYXRlOmZ1bmN0aW9uKCl7dmFyIGE9XG4gICAgbmV3IE87cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXthLm1ha2VUcmFuc2xhdGlvbihiLGMsZCk7dGhpcy5hcHBseU1hdHJpeChhKTtyZXR1cm4gdGhpc319KCksc2NhbGU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgTztyZXR1cm4gZnVuY3Rpb24oYixjLGQpe2EubWFrZVNjYWxlKGIsYyxkKTt0aGlzLmFwcGx5TWF0cml4KGEpO3JldHVybiB0aGlzfX0oKSxsb29rQXQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgeDtyZXR1cm4gZnVuY3Rpb24oYil7YS5sb29rQXQoYik7YS51cGRhdGVNYXRyaXgoKTt0aGlzLmFwcGx5TWF0cml4KGEubWF0cml4KX19KCksZnJvbUJ1ZmZlckdlb21ldHJ5OmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiLGQsZSl7dmFyIGY9dm9pZCAwIT09Zz9bbFthXS5jbG9uZSgpLGxbYl0uY2xvbmUoKSxsW2RdLmNsb25lKCldOltdLHE9dm9pZCAwIT09aD9bYy5jb2xvcnNbYV0uY2xvbmUoKSxjLmNvbG9yc1tiXS5jbG9uZSgpLGMuY29sb3JzW2RdLmNsb25lKCldOltdO2U9bmV3IFlhKGEsXG4gICAgYixkLGYscSxlKTtjLmZhY2VzLnB1c2goZSk7dm9pZCAwIT09ayYmYy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW25bYV0uY2xvbmUoKSxuW2JdLmNsb25lKCksbltkXS5jbG9uZSgpXSk7dm9pZCAwIT09bSYmYy5mYWNlVmVydGV4VXZzWzFdLnB1c2goW3VbYV0uY2xvbmUoKSx1W2JdLmNsb25lKCksdVtkXS5jbG9uZSgpXSl9dmFyIGM9dGhpcyxkPW51bGwhPT1hLmluZGV4P2EuaW5kZXguYXJyYXk6dm9pZCAwLGU9YS5hdHRyaWJ1dGVzLGY9ZS5wb3NpdGlvbi5hcnJheSxnPXZvaWQgMCE9PWUubm9ybWFsP2Uubm9ybWFsLmFycmF5OnZvaWQgMCxoPXZvaWQgMCE9PWUuY29sb3I/ZS5jb2xvci5hcnJheTp2b2lkIDAsaz12b2lkIDAhPT1lLnV2P2UudXYuYXJyYXk6dm9pZCAwLG09dm9pZCAwIT09ZS51djI/ZS51djIuYXJyYXk6dm9pZCAwO3ZvaWQgMCE9PW0mJih0aGlzLmZhY2VWZXJ0ZXhVdnNbMV09W10pO2Zvcih2YXIgbD1bXSxuPVtdLHU9W10scj1lPTA7ZTxmLmxlbmd0aDtlKz0zLFxuICAgIHIrPTIpYy52ZXJ0aWNlcy5wdXNoKG5ldyBwKGZbZV0sZltlKzFdLGZbZSsyXSkpLHZvaWQgMCE9PWcmJmwucHVzaChuZXcgcChnW2VdLGdbZSsxXSxnW2UrMl0pKSx2b2lkIDAhPT1oJiZjLmNvbG9ycy5wdXNoKG5ldyBIKGhbZV0saFtlKzFdLGhbZSsyXSkpLHZvaWQgMCE9PWsmJm4ucHVzaChuZXcgRChrW3JdLGtbcisxXSkpLHZvaWQgMCE9PW0mJnUucHVzaChuZXcgRChtW3JdLG1bcisxXSkpO3ZhciB0PWEuZ3JvdXBzO2lmKDA8dC5sZW5ndGgpZm9yKGU9MDtlPHQubGVuZ3RoO2UrKylmb3IodmFyIGY9dFtlXSx2PWYuc3RhcnQsdz1mLmNvdW50LHI9dix2PXYrdztyPHY7cis9Myl2b2lkIDAhPT1kP2IoZFtyXSxkW3IrMV0sZFtyKzJdLGYubWF0ZXJpYWxJbmRleCk6YihyLHIrMSxyKzIsZi5tYXRlcmlhbEluZGV4KTtlbHNlIGlmKHZvaWQgMCE9PWQpZm9yKGU9MDtlPGQubGVuZ3RoO2UrPTMpYihkW2VdLGRbZSsxXSxkW2UrMl0pO2Vsc2UgZm9yKGU9MDtlPGYubGVuZ3RoLzM7ZSs9XG4gICAgMyliKGUsZSsxLGUrMik7dGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKTtudWxsIT09YS5ib3VuZGluZ0JveCYmKHRoaXMuYm91bmRpbmdCb3g9YS5ib3VuZGluZ0JveC5jbG9uZSgpKTtudWxsIT09YS5ib3VuZGluZ1NwaGVyZSYmKHRoaXMuYm91bmRpbmdTcGhlcmU9YS5ib3VuZGluZ1NwaGVyZS5jbG9uZSgpKTtyZXR1cm4gdGhpc30sY2VudGVyOmZ1bmN0aW9uKCl7dGhpcy5jb21wdXRlQm91bmRpbmdCb3goKTt2YXIgYT10aGlzLmJvdW5kaW5nQm94LmdldENlbnRlcigpLm5lZ2F0ZSgpO3RoaXMudHJhbnNsYXRlKGEueCxhLnksYS56KTtyZXR1cm4gYX0sbm9ybWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTt2YXIgYT10aGlzLmJvdW5kaW5nU3BoZXJlLmNlbnRlcixiPXRoaXMuYm91bmRpbmdTcGhlcmUucmFkaXVzLGI9MD09PWI/MToxL2IsYz1uZXcgTztjLnNldChiLDAsMCwtYiphLngsMCxiLDAsLWIqYS55LDAsMCxiLC1iKmEueiwwLDAsMCwxKTtcbiAgICB0aGlzLmFwcGx5TWF0cml4KGMpO3JldHVybiB0aGlzfSxjb21wdXRlRmFjZU5vcm1hbHM6ZnVuY3Rpb24oKXtmb3IodmFyIGE9bmV3IHAsYj1uZXcgcCxjPTAsZD10aGlzLmZhY2VzLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT10aGlzLmZhY2VzW2NdLGY9dGhpcy52ZXJ0aWNlc1tlLmFdLGc9dGhpcy52ZXJ0aWNlc1tlLmJdO2Euc3ViVmVjdG9ycyh0aGlzLnZlcnRpY2VzW2UuY10sZyk7Yi5zdWJWZWN0b3JzKGYsZyk7YS5jcm9zcyhiKTthLm5vcm1hbGl6ZSgpO2Uubm9ybWFsLmNvcHkoYSl9fSxjb21wdXRlVmVydGV4Tm9ybWFsczpmdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT0hMCk7dmFyIGI7dmFyIGM9QXJyYXkodGhpcy52ZXJ0aWNlcy5sZW5ndGgpO3ZhciBkPTA7Zm9yKGI9dGhpcy52ZXJ0aWNlcy5sZW5ndGg7ZDxiO2QrKyljW2RdPW5ldyBwO2lmKGEpe3ZhciBlPW5ldyBwLGY9bmV3IHA7YT0wO2ZvcihkPXRoaXMuZmFjZXMubGVuZ3RoO2E8ZDthKyspe2I9dGhpcy5mYWNlc1thXTtcbiAgICB2YXIgZz10aGlzLnZlcnRpY2VzW2IuYV07dmFyIGg9dGhpcy52ZXJ0aWNlc1tiLmJdO3ZhciBrPXRoaXMudmVydGljZXNbYi5jXTtlLnN1YlZlY3RvcnMoayxoKTtmLnN1YlZlY3RvcnMoZyxoKTtlLmNyb3NzKGYpO2NbYi5hXS5hZGQoZSk7Y1tiLmJdLmFkZChlKTtjW2IuY10uYWRkKGUpfX1lbHNlIGZvcih0aGlzLmNvbXB1dGVGYWNlTm9ybWFscygpLGE9MCxkPXRoaXMuZmFjZXMubGVuZ3RoO2E8ZDthKyspYj10aGlzLmZhY2VzW2FdLGNbYi5hXS5hZGQoYi5ub3JtYWwpLGNbYi5iXS5hZGQoYi5ub3JtYWwpLGNbYi5jXS5hZGQoYi5ub3JtYWwpO2Q9MDtmb3IoYj10aGlzLnZlcnRpY2VzLmxlbmd0aDtkPGI7ZCsrKWNbZF0ubm9ybWFsaXplKCk7YT0wO2ZvcihkPXRoaXMuZmFjZXMubGVuZ3RoO2E8ZDthKyspYj10aGlzLmZhY2VzW2FdLGc9Yi52ZXJ0ZXhOb3JtYWxzLDM9PT1nLmxlbmd0aD8oZ1swXS5jb3B5KGNbYi5hXSksZ1sxXS5jb3B5KGNbYi5iXSksZ1syXS5jb3B5KGNbYi5jXSkpOlxuICAgIChnWzBdPWNbYi5hXS5jbG9uZSgpLGdbMV09Y1tiLmJdLmNsb25lKCksZ1syXT1jW2IuY10uY2xvbmUoKSk7MDx0aGlzLmZhY2VzLmxlbmd0aCYmKHRoaXMubm9ybWFsc05lZWRVcGRhdGU9ITApfSxjb21wdXRlRmxhdFZlcnRleE5vcm1hbHM6ZnVuY3Rpb24oKXt2YXIgYTt0aGlzLmNvbXB1dGVGYWNlTm9ybWFscygpO3ZhciBiPTA7Zm9yKGE9dGhpcy5mYWNlcy5sZW5ndGg7YjxhO2IrKyl7dmFyIGM9dGhpcy5mYWNlc1tiXTt2YXIgZD1jLnZlcnRleE5vcm1hbHM7Mz09PWQubGVuZ3RoPyhkWzBdLmNvcHkoYy5ub3JtYWwpLGRbMV0uY29weShjLm5vcm1hbCksZFsyXS5jb3B5KGMubm9ybWFsKSk6KGRbMF09Yy5ub3JtYWwuY2xvbmUoKSxkWzFdPWMubm9ybWFsLmNsb25lKCksZFsyXT1jLm5vcm1hbC5jbG9uZSgpKX0wPHRoaXMuZmFjZXMubGVuZ3RoJiYodGhpcy5ub3JtYWxzTmVlZFVwZGF0ZT0hMCl9LGNvbXB1dGVNb3JwaE5vcm1hbHM6ZnVuY3Rpb24oKXt2YXIgYSxiO3ZhciBjPVxuICAgIDA7Zm9yKGI9dGhpcy5mYWNlcy5sZW5ndGg7YzxiO2MrKyl7dmFyIGQ9dGhpcy5mYWNlc1tjXTtkLl9fb3JpZ2luYWxGYWNlTm9ybWFsP2QuX19vcmlnaW5hbEZhY2VOb3JtYWwuY29weShkLm5vcm1hbCk6ZC5fX29yaWdpbmFsRmFjZU5vcm1hbD1kLm5vcm1hbC5jbG9uZSgpO2QuX19vcmlnaW5hbFZlcnRleE5vcm1hbHN8fChkLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzPVtdKTt2YXIgZT0wO2ZvcihhPWQudmVydGV4Tm9ybWFscy5sZW5ndGg7ZTxhO2UrKylkLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzW2VdP2QuX19vcmlnaW5hbFZlcnRleE5vcm1hbHNbZV0uY29weShkLnZlcnRleE5vcm1hbHNbZV0pOmQuX19vcmlnaW5hbFZlcnRleE5vcm1hbHNbZV09ZC52ZXJ0ZXhOb3JtYWxzW2VdLmNsb25lKCl9dmFyIGY9bmV3IEw7Zi5mYWNlcz10aGlzLmZhY2VzO2U9MDtmb3IoYT10aGlzLm1vcnBoVGFyZ2V0cy5sZW5ndGg7ZTxhO2UrKyl7aWYoIXRoaXMubW9ycGhOb3JtYWxzW2VdKXt0aGlzLm1vcnBoTm9ybWFsc1tlXT1cbiAgICB7fTt0aGlzLm1vcnBoTm9ybWFsc1tlXS5mYWNlTm9ybWFscz1bXTt0aGlzLm1vcnBoTm9ybWFsc1tlXS52ZXJ0ZXhOb3JtYWxzPVtdO2Q9dGhpcy5tb3JwaE5vcm1hbHNbZV0uZmFjZU5vcm1hbHM7dmFyIGc9dGhpcy5tb3JwaE5vcm1hbHNbZV0udmVydGV4Tm9ybWFscztjPTA7Zm9yKGI9dGhpcy5mYWNlcy5sZW5ndGg7YzxiO2MrKyl7dmFyIGg9bmV3IHA7dmFyIGs9e2E6bmV3IHAsYjpuZXcgcCxjOm5ldyBwfTtkLnB1c2goaCk7Zy5wdXNoKGspfX1nPXRoaXMubW9ycGhOb3JtYWxzW2VdO2YudmVydGljZXM9dGhpcy5tb3JwaFRhcmdldHNbZV0udmVydGljZXM7Zi5jb21wdXRlRmFjZU5vcm1hbHMoKTtmLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCk7Yz0wO2ZvcihiPXRoaXMuZmFjZXMubGVuZ3RoO2M8YjtjKyspZD10aGlzLmZhY2VzW2NdLGg9Zy5mYWNlTm9ybWFsc1tjXSxrPWcudmVydGV4Tm9ybWFsc1tjXSxoLmNvcHkoZC5ub3JtYWwpLGsuYS5jb3B5KGQudmVydGV4Tm9ybWFsc1swXSksXG4gICAgay5iLmNvcHkoZC52ZXJ0ZXhOb3JtYWxzWzFdKSxrLmMuY29weShkLnZlcnRleE5vcm1hbHNbMl0pfWM9MDtmb3IoYj10aGlzLmZhY2VzLmxlbmd0aDtjPGI7YysrKWQ9dGhpcy5mYWNlc1tjXSxkLm5vcm1hbD1kLl9fb3JpZ2luYWxGYWNlTm9ybWFsLGQudmVydGV4Tm9ybWFscz1kLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzfSxjb21wdXRlTGluZURpc3RhbmNlczpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9dGhpcy52ZXJ0aWNlcyxjPTAsZD1iLmxlbmd0aDtjPGQ7YysrKTA8YyYmKGErPWJbY10uZGlzdGFuY2VUbyhiW2MtMV0pKSx0aGlzLmxpbmVEaXN0YW5jZXNbY109YX0sY29tcHV0ZUJvdW5kaW5nQm94OmZ1bmN0aW9uKCl7bnVsbD09PXRoaXMuYm91bmRpbmdCb3gmJih0aGlzLmJvdW5kaW5nQm94PW5ldyBYYSk7dGhpcy5ib3VuZGluZ0JveC5zZXRGcm9tUG9pbnRzKHRoaXMudmVydGljZXMpfSxjb21wdXRlQm91bmRpbmdTcGhlcmU6ZnVuY3Rpb24oKXtudWxsPT09dGhpcy5ib3VuZGluZ1NwaGVyZSYmXG4gICAgKHRoaXMuYm91bmRpbmdTcGhlcmU9bmV3IElhKTt0aGlzLmJvdW5kaW5nU3BoZXJlLnNldEZyb21Qb2ludHModGhpcy52ZXJ0aWNlcyl9LG1lcmdlOmZ1bmN0aW9uKGEsYixjKXtpZihhJiZhLmlzR2VvbWV0cnkpe3ZhciBkLGU9dGhpcy52ZXJ0aWNlcy5sZW5ndGgsZj10aGlzLnZlcnRpY2VzLGc9YS52ZXJ0aWNlcyxoPXRoaXMuZmFjZXMsaz1hLmZhY2VzLG09dGhpcy5mYWNlVmVydGV4VXZzWzBdLGw9YS5mYWNlVmVydGV4VXZzWzBdLG49dGhpcy5jb2xvcnMscD1hLmNvbG9yczt2b2lkIDA9PT1jJiYoYz0wKTt2b2lkIDAhPT1iJiYoZD0obmV3IG1hKS5nZXROb3JtYWxNYXRyaXgoYikpO2E9MDtmb3IodmFyIHI9Zy5sZW5ndGg7YTxyO2ErKyl7dmFyIHQ9Z1thXS5jbG9uZSgpO3ZvaWQgMCE9PWImJnQuYXBwbHlNYXRyaXg0KGIpO2YucHVzaCh0KX1hPTA7Zm9yKHI9cC5sZW5ndGg7YTxyO2ErKyluLnB1c2gocFthXS5jbG9uZSgpKTthPTA7Zm9yKHI9ay5sZW5ndGg7YTxyO2ErKyl7dmFyIGc9XG4gICAga1thXSx2PWcudmVydGV4Tm9ybWFscyxwPWcudmVydGV4Q29sb3JzLG49bmV3IFlhKGcuYStlLGcuYitlLGcuYytlKTtuLm5vcm1hbC5jb3B5KGcubm9ybWFsKTt2b2lkIDAhPT1kJiZuLm5vcm1hbC5hcHBseU1hdHJpeDMoZCkubm9ybWFsaXplKCk7Yj0wO2ZvcihmPXYubGVuZ3RoO2I8ZjtiKyspdD12W2JdLmNsb25lKCksdm9pZCAwIT09ZCYmdC5hcHBseU1hdHJpeDMoZCkubm9ybWFsaXplKCksbi52ZXJ0ZXhOb3JtYWxzLnB1c2godCk7bi5jb2xvci5jb3B5KGcuY29sb3IpO2I9MDtmb3IoZj1wLmxlbmd0aDtiPGY7YisrKXQ9cFtiXSxuLnZlcnRleENvbG9ycy5wdXNoKHQuY2xvbmUoKSk7bi5tYXRlcmlhbEluZGV4PWcubWF0ZXJpYWxJbmRleCtjO2gucHVzaChuKX1hPTA7Zm9yKHI9bC5sZW5ndGg7YTxyO2ErKylpZihjPWxbYV0sZD1bXSx2b2lkIDAhPT1jKXtiPTA7Zm9yKGY9Yy5sZW5ndGg7YjxmO2IrKylkLnB1c2goY1tiXS5jbG9uZSgpKTttLnB1c2goZCl9fWVsc2UgY29uc29sZS5lcnJvcihcIlRIUkVFLkdlb21ldHJ5Lm1lcmdlKCk6IGdlb21ldHJ5IG5vdCBhbiBpbnN0YW5jZSBvZiBUSFJFRS5HZW9tZXRyeS5cIixcbiAgICBhKX0sbWVyZ2VNZXNoOmZ1bmN0aW9uKGEpe2EmJmEuaXNNZXNoPyhhLm1hdHJpeEF1dG9VcGRhdGUmJmEudXBkYXRlTWF0cml4KCksdGhpcy5tZXJnZShhLmdlb21ldHJ5LGEubWF0cml4KSk6Y29uc29sZS5lcnJvcihcIlRIUkVFLkdlb21ldHJ5Lm1lcmdlTWVzaCgpOiBtZXNoIG5vdCBhbiBpbnN0YW5jZSBvZiBUSFJFRS5NZXNoLlwiLGEpfSxtZXJnZVZlcnRpY2VzOmZ1bmN0aW9uKCl7dmFyIGE9e30sYj1bXSxjPVtdLGQ9TWF0aC5wb3coMTAsNCksZTt2YXIgZj0wO2ZvcihlPXRoaXMudmVydGljZXMubGVuZ3RoO2Y8ZTtmKyspe3ZhciBnPXRoaXMudmVydGljZXNbZl07Zz1NYXRoLnJvdW5kKGcueCpkKStcIl9cIitNYXRoLnJvdW5kKGcueSpkKStcIl9cIitNYXRoLnJvdW5kKGcueipkKTt2b2lkIDA9PT1hW2ddPyhhW2ddPWYsYi5wdXNoKHRoaXMudmVydGljZXNbZl0pLGNbZl09Yi5sZW5ndGgtMSk6Y1tmXT1jW2FbZ11dfWE9W107Zj0wO2ZvcihlPXRoaXMuZmFjZXMubGVuZ3RoO2Y8ZTtmKyspZm9yKGQ9XG4gICAgdGhpcy5mYWNlc1tmXSxkLmE9Y1tkLmFdLGQuYj1jW2QuYl0sZC5jPWNbZC5jXSxkPVtkLmEsZC5iLGQuY10sZz0wOzM+ZztnKyspaWYoZFtnXT09PWRbKGcrMSklM10pe2EucHVzaChmKTticmVha31mb3IoZj1hLmxlbmd0aC0xOzA8PWY7Zi0tKWZvcihkPWFbZl0sdGhpcy5mYWNlcy5zcGxpY2UoZCwxKSxjPTAsZT10aGlzLmZhY2VWZXJ0ZXhVdnMubGVuZ3RoO2M8ZTtjKyspdGhpcy5mYWNlVmVydGV4VXZzW2NdLnNwbGljZShkLDEpO2Y9dGhpcy52ZXJ0aWNlcy5sZW5ndGgtYi5sZW5ndGg7dGhpcy52ZXJ0aWNlcz1iO3JldHVybiBmfSxzZXRGcm9tUG9pbnRzOmZ1bmN0aW9uKGEpe3RoaXMudmVydGljZXM9W107Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtiPGM7YisrKXt2YXIgZD1hW2JdO3RoaXMudmVydGljZXMucHVzaChuZXcgcChkLngsZC55LGQuenx8MCkpfXJldHVybiB0aGlzfSxzb3J0RmFjZXNCeU1hdGVyaWFsSW5kZXg6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5mYWNlcyxcbiAgICBiPWEubGVuZ3RoLGM9MDtjPGI7YysrKWFbY10uX2lkPWM7YS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEubWF0ZXJpYWxJbmRleC1iLm1hdGVyaWFsSW5kZXh9KTt2YXIgZD10aGlzLmZhY2VWZXJ0ZXhVdnNbMF0sZT10aGlzLmZhY2VWZXJ0ZXhVdnNbMV0sZixnO2QmJmQubGVuZ3RoPT09YiYmKGY9W10pO2UmJmUubGVuZ3RoPT09YiYmKGc9W10pO2ZvcihjPTA7YzxiO2MrKyl7dmFyIGg9YVtjXS5faWQ7ZiYmZi5wdXNoKGRbaF0pO2cmJmcucHVzaChlW2hdKX1mJiYodGhpcy5mYWNlVmVydGV4VXZzWzBdPWYpO2cmJih0aGlzLmZhY2VWZXJ0ZXhVdnNbMV09Zyl9LHRvSlNPTjpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxiLGMpe3JldHVybiBjP2F8MTw8YjphJn4oMTw8Yil9ZnVuY3Rpb24gYihhKXt2YXIgYj1hLngudG9TdHJpbmcoKSthLnkudG9TdHJpbmcoKSthLnoudG9TdHJpbmcoKTtpZih2b2lkIDAhPT1tW2JdKXJldHVybiBtW2JdO21bYl09ay5sZW5ndGgvMztrLnB1c2goYS54LFxuICAgIGEueSxhLnopO3JldHVybiBtW2JdfWZ1bmN0aW9uIGMoYSl7dmFyIGI9YS5yLnRvU3RyaW5nKCkrYS5nLnRvU3RyaW5nKCkrYS5iLnRvU3RyaW5nKCk7aWYodm9pZCAwIT09bltiXSlyZXR1cm4gbltiXTtuW2JdPWwubGVuZ3RoO2wucHVzaChhLmdldEhleCgpKTtyZXR1cm4gbltiXX1mdW5jdGlvbiBkKGEpe3ZhciBiPWEueC50b1N0cmluZygpK2EueS50b1N0cmluZygpO2lmKHZvaWQgMCE9PXJbYl0pcmV0dXJuIHJbYl07cltiXT1wLmxlbmd0aC8yO3AucHVzaChhLngsYS55KTtyZXR1cm4gcltiXX12YXIgZT17bWV0YWRhdGE6e3ZlcnNpb246NC41LHR5cGU6XCJHZW9tZXRyeVwiLGdlbmVyYXRvcjpcIkdlb21ldHJ5LnRvSlNPTlwifX07ZS51dWlkPXRoaXMudXVpZDtlLnR5cGU9dGhpcy50eXBlO1wiXCIhPT10aGlzLm5hbWUmJihlLm5hbWU9dGhpcy5uYW1lKTtpZih2b2lkIDAhPT10aGlzLnBhcmFtZXRlcnMpe3ZhciBmPXRoaXMucGFyYW1ldGVycyxnO2ZvcihnIGluIGYpdm9pZCAwIT09ZltnXSYmXG4gICAgKGVbZ109ZltnXSk7cmV0dXJuIGV9Zj1bXTtmb3IoZz0wO2c8dGhpcy52ZXJ0aWNlcy5sZW5ndGg7ZysrKXt2YXIgaD10aGlzLnZlcnRpY2VzW2ddO2YucHVzaChoLngsaC55LGgueil9dmFyIGg9W10saz1bXSxtPXt9LGw9W10sbj17fSxwPVtdLHI9e307Zm9yKGc9MDtnPHRoaXMuZmFjZXMubGVuZ3RoO2crKyl7dmFyIHQ9dGhpcy5mYWNlc1tnXSx2PXZvaWQgMCE9PXRoaXMuZmFjZVZlcnRleFV2c1swXVtnXSx3PTA8dC5ub3JtYWwubGVuZ3RoKCksej0wPHQudmVydGV4Tm9ybWFscy5sZW5ndGgseT0xIT09dC5jb2xvci5yfHwxIT09dC5jb2xvci5nfHwxIT09dC5jb2xvci5iLHg9MDx0LnZlcnRleENvbG9ycy5sZW5ndGgsQT0wLEE9YShBLDAsMCksQT1hKEEsMSwhMCksQT1hKEEsMiwhMSksQT1hKEEsMyx2KSxBPWEoQSw0LHcpLEE9YShBLDUseiksQT1hKEEsNix5KSxBPWEoQSw3LHgpO2gucHVzaChBKTtoLnB1c2godC5hLHQuYix0LmMpO2gucHVzaCh0Lm1hdGVyaWFsSW5kZXgpO1xuICAgIHYmJih2PXRoaXMuZmFjZVZlcnRleFV2c1swXVtnXSxoLnB1c2goZCh2WzBdKSxkKHZbMV0pLGQodlsyXSkpKTt3JiZoLnB1c2goYih0Lm5vcm1hbCkpO3omJih3PXQudmVydGV4Tm9ybWFscyxoLnB1c2goYih3WzBdKSxiKHdbMV0pLGIod1syXSkpKTt5JiZoLnB1c2goYyh0LmNvbG9yKSk7eCYmKHQ9dC52ZXJ0ZXhDb2xvcnMsaC5wdXNoKGModFswXSksYyh0WzFdKSxjKHRbMl0pKSl9ZS5kYXRhPXt9O2UuZGF0YS52ZXJ0aWNlcz1mO2UuZGF0YS5ub3JtYWxzPWs7MDxsLmxlbmd0aCYmKGUuZGF0YS5jb2xvcnM9bCk7MDxwLmxlbmd0aCYmKGUuZGF0YS51dnM9W3BdKTtlLmRhdGEuZmFjZXM9aDtyZXR1cm4gZX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IEwpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkO3RoaXMudmVydGljZXM9W107dGhpcy5jb2xvcnM9W107dGhpcy5mYWNlcz1bXTt0aGlzLmZhY2VWZXJ0ZXhVdnM9W1tdXTt0aGlzLm1vcnBoVGFyZ2V0cz1cbiAgICBbXTt0aGlzLm1vcnBoTm9ybWFscz1bXTt0aGlzLnNraW5XZWlnaHRzPVtdO3RoaXMuc2tpbkluZGljZXM9W107dGhpcy5saW5lRGlzdGFuY2VzPVtdO3RoaXMuYm91bmRpbmdTcGhlcmU9dGhpcy5ib3VuZGluZ0JveD1udWxsO3RoaXMubmFtZT1hLm5hbWU7dmFyIGU9YS52ZXJ0aWNlczt2YXIgZj0wO2ZvcihiPWUubGVuZ3RoO2Y8YjtmKyspdGhpcy52ZXJ0aWNlcy5wdXNoKGVbZl0uY2xvbmUoKSk7ZT1hLmNvbG9ycztmPTA7Zm9yKGI9ZS5sZW5ndGg7ZjxiO2YrKyl0aGlzLmNvbG9ycy5wdXNoKGVbZl0uY2xvbmUoKSk7ZT1hLmZhY2VzO2Y9MDtmb3IoYj1lLmxlbmd0aDtmPGI7ZisrKXRoaXMuZmFjZXMucHVzaChlW2ZdLmNsb25lKCkpO2Y9MDtmb3IoYj1hLmZhY2VWZXJ0ZXhVdnMubGVuZ3RoO2Y8YjtmKyspe3ZhciBnPWEuZmFjZVZlcnRleFV2c1tmXTt2b2lkIDA9PT10aGlzLmZhY2VWZXJ0ZXhVdnNbZl0mJih0aGlzLmZhY2VWZXJ0ZXhVdnNbZl09W10pO2U9MDtmb3IoYz1nLmxlbmd0aDtlPFxuICAgIGM7ZSsrKXt2YXIgaD1nW2VdLGs9W107dmFyIG09MDtmb3IoZD1oLmxlbmd0aDttPGQ7bSsrKWsucHVzaChoW21dLmNsb25lKCkpO3RoaXMuZmFjZVZlcnRleFV2c1tmXS5wdXNoKGspfX1tPWEubW9ycGhUYXJnZXRzO2Y9MDtmb3IoYj1tLmxlbmd0aDtmPGI7ZisrKXtkPXt9O2QubmFtZT1tW2ZdLm5hbWU7aWYodm9pZCAwIT09bVtmXS52ZXJ0aWNlcylmb3IoZC52ZXJ0aWNlcz1bXSxlPTAsYz1tW2ZdLnZlcnRpY2VzLmxlbmd0aDtlPGM7ZSsrKWQudmVydGljZXMucHVzaChtW2ZdLnZlcnRpY2VzW2VdLmNsb25lKCkpO2lmKHZvaWQgMCE9PW1bZl0ubm9ybWFscylmb3IoZC5ub3JtYWxzPVtdLGU9MCxjPW1bZl0ubm9ybWFscy5sZW5ndGg7ZTxjO2UrKylkLm5vcm1hbHMucHVzaChtW2ZdLm5vcm1hbHNbZV0uY2xvbmUoKSk7dGhpcy5tb3JwaFRhcmdldHMucHVzaChkKX1tPWEubW9ycGhOb3JtYWxzO2Y9MDtmb3IoYj1tLmxlbmd0aDtmPGI7ZisrKXtkPXt9O2lmKHZvaWQgMCE9PW1bZl0udmVydGV4Tm9ybWFscylmb3IoZC52ZXJ0ZXhOb3JtYWxzPVxuICAgIFtdLGU9MCxjPW1bZl0udmVydGV4Tm9ybWFscy5sZW5ndGg7ZTxjO2UrKylnPW1bZl0udmVydGV4Tm9ybWFsc1tlXSxoPXt9LGguYT1nLmEuY2xvbmUoKSxoLmI9Zy5iLmNsb25lKCksaC5jPWcuYy5jbG9uZSgpLGQudmVydGV4Tm9ybWFscy5wdXNoKGgpO2lmKHZvaWQgMCE9PW1bZl0uZmFjZU5vcm1hbHMpZm9yKGQuZmFjZU5vcm1hbHM9W10sZT0wLGM9bVtmXS5mYWNlTm9ybWFscy5sZW5ndGg7ZTxjO2UrKylkLmZhY2VOb3JtYWxzLnB1c2gobVtmXS5mYWNlTm9ybWFsc1tlXS5jbG9uZSgpKTt0aGlzLm1vcnBoTm9ybWFscy5wdXNoKGQpfWU9YS5za2luV2VpZ2h0cztmPTA7Zm9yKGI9ZS5sZW5ndGg7ZjxiO2YrKyl0aGlzLnNraW5XZWlnaHRzLnB1c2goZVtmXS5jbG9uZSgpKTtlPWEuc2tpbkluZGljZXM7Zj0wO2ZvcihiPWUubGVuZ3RoO2Y8YjtmKyspdGhpcy5za2luSW5kaWNlcy5wdXNoKGVbZl0uY2xvbmUoKSk7ZT1hLmxpbmVEaXN0YW5jZXM7Zj0wO2ZvcihiPWUubGVuZ3RoO2Y8XG4gICAgYjtmKyspdGhpcy5saW5lRGlzdGFuY2VzLnB1c2goZVtmXSk7Zj1hLmJvdW5kaW5nQm94O251bGwhPT1mJiYodGhpcy5ib3VuZGluZ0JveD1mLmNsb25lKCkpO2Y9YS5ib3VuZGluZ1NwaGVyZTtudWxsIT09ZiYmKHRoaXMuYm91bmRpbmdTcGhlcmU9Zi5jbG9uZSgpKTt0aGlzLmVsZW1lbnRzTmVlZFVwZGF0ZT1hLmVsZW1lbnRzTmVlZFVwZGF0ZTt0aGlzLnZlcnRpY2VzTmVlZFVwZGF0ZT1hLnZlcnRpY2VzTmVlZFVwZGF0ZTt0aGlzLnV2c05lZWRVcGRhdGU9YS51dnNOZWVkVXBkYXRlO3RoaXMubm9ybWFsc05lZWRVcGRhdGU9YS5ub3JtYWxzTmVlZFVwZGF0ZTt0aGlzLmNvbG9yc05lZWRVcGRhdGU9YS5jb2xvcnNOZWVkVXBkYXRlO3RoaXMubGluZURpc3RhbmNlc05lZWRVcGRhdGU9YS5saW5lRGlzdGFuY2VzTmVlZFVwZGF0ZTt0aGlzLmdyb3Vwc05lZWRVcGRhdGU9YS5ncm91cHNOZWVkVXBkYXRlO3JldHVybiB0aGlzfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZGlzcG9zZVwifSl9fSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE0ucHJvdG90eXBlLFwibmVlZHNVcGRhdGVcIix7c2V0OmZ1bmN0aW9uKGEpeyEwPT09YSYmdGhpcy52ZXJzaW9uKyt9fSk7T2JqZWN0LmFzc2lnbihNLnByb3RvdHlwZSx7aXNCdWZmZXJBdHRyaWJ1dGU6ITAsc2V0QXJyYXk6ZnVuY3Rpb24oYSl7aWYoQXJyYXkuaXNBcnJheShhKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVEhSRUUuQnVmZmVyQXR0cmlidXRlOiBhcnJheSBzaG91bGQgYmUgYSBUeXBlZCBBcnJheS5cIik7dGhpcy5jb3VudD12b2lkIDAhPT1hP2EubGVuZ3RoL3RoaXMuaXRlbVNpemU6MDt0aGlzLmFycmF5PWF9LHNldER5bmFtaWM6ZnVuY3Rpb24oYSl7dGhpcy5keW5hbWljPWE7cmV0dXJuIHRoaXN9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5hcnJheT1uZXcgYS5hcnJheS5jb25zdHJ1Y3RvcihhLmFycmF5KTt0aGlzLml0ZW1TaXplPWEuaXRlbVNpemU7dGhpcy5jb3VudD1hLmNvdW50O3RoaXMubm9ybWFsaXplZD1hLm5vcm1hbGl6ZWQ7XG4gICAgdGhpcy5keW5hbWljPWEuZHluYW1pYztyZXR1cm4gdGhpc30sY29weUF0OmZ1bmN0aW9uKGEsYixjKXthKj10aGlzLml0ZW1TaXplO2MqPWIuaXRlbVNpemU7Zm9yKHZhciBkPTAsZT10aGlzLml0ZW1TaXplO2Q8ZTtkKyspdGhpcy5hcnJheVthK2RdPWIuYXJyYXlbYytkXTtyZXR1cm4gdGhpc30sY29weUFycmF5OmZ1bmN0aW9uKGEpe3RoaXMuYXJyYXkuc2V0KGEpO3JldHVybiB0aGlzfSxjb3B5Q29sb3JzQXJyYXk6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuYXJyYXksYz0wLGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPWFbZF07dm9pZCAwPT09ZiYmKGNvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckF0dHJpYnV0ZS5jb3B5Q29sb3JzQXJyYXkoKTogY29sb3IgaXMgdW5kZWZpbmVkXCIsZCksZj1uZXcgSCk7YltjKytdPWYucjtiW2MrK109Zi5nO2JbYysrXT1mLmJ9cmV0dXJuIHRoaXN9LGNvcHlJbmRpY2VzQXJyYXk6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuYXJyYXksXG4gICAgYz0wLGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPWFbZF07YltjKytdPWYuYTtiW2MrK109Zi5iO2JbYysrXT1mLmN9cmV0dXJuIHRoaXN9LGNvcHlWZWN0b3Iyc0FycmF5OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmFycmF5LGM9MCxkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKXt2YXIgZj1hW2RdO3ZvaWQgMD09PWYmJihjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJBdHRyaWJ1dGUuY29weVZlY3RvcjJzQXJyYXkoKTogdmVjdG9yIGlzIHVuZGVmaW5lZFwiLGQpLGY9bmV3IEQpO2JbYysrXT1mLng7YltjKytdPWYueX1yZXR1cm4gdGhpc30sY29weVZlY3RvcjNzQXJyYXk6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuYXJyYXksYz0wLGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPWFbZF07dm9pZCAwPT09ZiYmKGNvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckF0dHJpYnV0ZS5jb3B5VmVjdG9yM3NBcnJheSgpOiB2ZWN0b3IgaXMgdW5kZWZpbmVkXCIsZCksZj1uZXcgcCk7XG4gICAgYltjKytdPWYueDtiW2MrK109Zi55O2JbYysrXT1mLnp9cmV0dXJuIHRoaXN9LGNvcHlWZWN0b3I0c0FycmF5OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmFycmF5LGM9MCxkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKXt2YXIgZj1hW2RdO3ZvaWQgMD09PWYmJihjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJBdHRyaWJ1dGUuY29weVZlY3RvcjRzQXJyYXkoKTogdmVjdG9yIGlzIHVuZGVmaW5lZFwiLGQpLGY9bmV3IGFhKTtiW2MrK109Zi54O2JbYysrXT1mLnk7YltjKytdPWYuejtiW2MrK109Zi53fXJldHVybiB0aGlzfSxzZXQ6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj0wKTt0aGlzLmFycmF5LnNldChhLGIpO3JldHVybiB0aGlzfSxnZXRYOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFycmF5W2EqdGhpcy5pdGVtU2l6ZV19LHNldFg6ZnVuY3Rpb24oYSxiKXt0aGlzLmFycmF5W2EqdGhpcy5pdGVtU2l6ZV09YjtyZXR1cm4gdGhpc30sZ2V0WTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hcnJheVthKlxuICAgIHRoaXMuaXRlbVNpemUrMV19LHNldFk6ZnVuY3Rpb24oYSxiKXt0aGlzLmFycmF5W2EqdGhpcy5pdGVtU2l6ZSsxXT1iO3JldHVybiB0aGlzfSxnZXRaOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFycmF5W2EqdGhpcy5pdGVtU2l6ZSsyXX0sc2V0WjpmdW5jdGlvbihhLGIpe3RoaXMuYXJyYXlbYSp0aGlzLml0ZW1TaXplKzJdPWI7cmV0dXJuIHRoaXN9LGdldFc6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYXJyYXlbYSp0aGlzLml0ZW1TaXplKzNdfSxzZXRXOmZ1bmN0aW9uKGEsYil7dGhpcy5hcnJheVthKnRoaXMuaXRlbVNpemUrM109YjtyZXR1cm4gdGhpc30sc2V0WFk6ZnVuY3Rpb24oYSxiLGMpe2EqPXRoaXMuaXRlbVNpemU7dGhpcy5hcnJheVthKzBdPWI7dGhpcy5hcnJheVthKzFdPWM7cmV0dXJuIHRoaXN9LHNldFhZWjpmdW5jdGlvbihhLGIsYyxkKXthKj10aGlzLml0ZW1TaXplO3RoaXMuYXJyYXlbYSswXT1iO3RoaXMuYXJyYXlbYSsxXT1jO3RoaXMuYXJyYXlbYSsyXT1cbiAgICBkO3JldHVybiB0aGlzfSxzZXRYWVpXOmZ1bmN0aW9uKGEsYixjLGQsZSl7YSo9dGhpcy5pdGVtU2l6ZTt0aGlzLmFycmF5W2ErMF09Yjt0aGlzLmFycmF5W2ErMV09Yzt0aGlzLmFycmF5W2ErMl09ZDt0aGlzLmFycmF5W2ErM109ZTtyZXR1cm4gdGhpc30sb25VcGxvYWQ6ZnVuY3Rpb24oYSl7dGhpcy5vblVwbG9hZENhbGxiYWNrPWE7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuYXJyYXksdGhpcy5pdGVtU2l6ZSkpLmNvcHkodGhpcyl9fSk7dWMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTS5wcm90b3R5cGUpO3VjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj11Yzt2Yy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShNLnByb3RvdHlwZSk7dmMucHJvdG90eXBlLmNvbnN0cnVjdG9yPXZjO3djLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKE0ucHJvdG90eXBlKTt3Yy5wcm90b3R5cGUuY29uc3RydWN0b3I9d2M7eGMucHJvdG90eXBlPVxuICAgIE9iamVjdC5jcmVhdGUoTS5wcm90b3R5cGUpO3hjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj14YztvYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShNLnByb3RvdHlwZSk7b2IucHJvdG90eXBlLmNvbnN0cnVjdG9yPW9iO3ljLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKE0ucHJvdG90eXBlKTt5Yy5wcm90b3R5cGUuY29uc3RydWN0b3I9eWM7cGIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTS5wcm90b3R5cGUpO3BiLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1wYjtCLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKE0ucHJvdG90eXBlKTtCLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1CO3pjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKE0ucHJvdG90eXBlKTt6Yy5wcm90b3R5cGUuY29uc3RydWN0b3I9emM7T2JqZWN0LmFzc2lnbihWZS5wcm90b3R5cGUse2NvbXB1dGVHcm91cHM6ZnVuY3Rpb24oYSl7dmFyIGI9W10sYz12b2lkIDA7YT1hLmZhY2VzO2Zvcih2YXIgZD0wO2Q8YS5sZW5ndGg7ZCsrKXt2YXIgZT1cbiAgICBhW2RdO2lmKGUubWF0ZXJpYWxJbmRleCE9PWMpe2M9ZS5tYXRlcmlhbEluZGV4O3ZvaWQgMCE9PWYmJihmLmNvdW50PTMqZC1mLnN0YXJ0LGIucHVzaChmKSk7dmFyIGY9e3N0YXJ0OjMqZCxtYXRlcmlhbEluZGV4OmN9fX12b2lkIDAhPT1mJiYoZi5jb3VudD0zKmQtZi5zdGFydCxiLnB1c2goZikpO3RoaXMuZ3JvdXBzPWJ9LGZyb21HZW9tZXRyeTpmdW5jdGlvbihhKXt2YXIgYj1hLmZhY2VzLGM9YS52ZXJ0aWNlcyxkPWEuZmFjZVZlcnRleFV2cyxlPWRbMF0mJjA8ZFswXS5sZW5ndGgsZj1kWzFdJiYwPGRbMV0ubGVuZ3RoLGc9YS5tb3JwaFRhcmdldHMsaD1nLmxlbmd0aDtpZigwPGgpe3ZhciBrPVtdO2Zvcih2YXIgbT0wO208aDttKyspa1ttXT1bXTt0aGlzLm1vcnBoVGFyZ2V0cy5wb3NpdGlvbj1rfXZhciBsPWEubW9ycGhOb3JtYWxzLG49bC5sZW5ndGg7aWYoMDxuKXt2YXIgcD1bXTtmb3IobT0wO208bjttKyspcFttXT1bXTt0aGlzLm1vcnBoVGFyZ2V0cy5ub3JtYWw9cH1mb3IodmFyIHI9XG4gICAgYS5za2luSW5kaWNlcyx0PWEuc2tpbldlaWdodHMsdj1yLmxlbmd0aD09PWMubGVuZ3RoLHc9dC5sZW5ndGg9PT1jLmxlbmd0aCxtPTA7bTxiLmxlbmd0aDttKyspe3ZhciB6PWJbbV07dGhpcy52ZXJ0aWNlcy5wdXNoKGNbei5hXSxjW3ouYl0sY1t6LmNdKTt2YXIgeT16LnZlcnRleE5vcm1hbHM7Mz09PXkubGVuZ3RoP3RoaXMubm9ybWFscy5wdXNoKHlbMF0seVsxXSx5WzJdKTooeT16Lm5vcm1hbCx0aGlzLm5vcm1hbHMucHVzaCh5LHkseSkpO3k9ei52ZXJ0ZXhDb2xvcnM7Mz09PXkubGVuZ3RoP3RoaXMuY29sb3JzLnB1c2goeVswXSx5WzFdLHlbMl0pOih5PXouY29sb3IsdGhpcy5jb2xvcnMucHVzaCh5LHkseSkpOyEwPT09ZSYmKHk9ZFswXVttXSx2b2lkIDAhPT15P3RoaXMudXZzLnB1c2goeVswXSx5WzFdLHlbMl0pOihjb25zb2xlLndhcm4oXCJUSFJFRS5EaXJlY3RHZW9tZXRyeS5mcm9tR2VvbWV0cnkoKTogVW5kZWZpbmVkIHZlcnRleFV2IFwiLG0pLHRoaXMudXZzLnB1c2gobmV3IEQsXG4gICAgbmV3IEQsbmV3IEQpKSk7ITA9PT1mJiYoeT1kWzFdW21dLHZvaWQgMCE9PXk/dGhpcy51dnMyLnB1c2goeVswXSx5WzFdLHlbMl0pOihjb25zb2xlLndhcm4oXCJUSFJFRS5EaXJlY3RHZW9tZXRyeS5mcm9tR2VvbWV0cnkoKTogVW5kZWZpbmVkIHZlcnRleFV2MiBcIixtKSx0aGlzLnV2czIucHVzaChuZXcgRCxuZXcgRCxuZXcgRCkpKTtmb3IoeT0wO3k8aDt5Kyspe3ZhciB4PWdbeV0udmVydGljZXM7a1t5XS5wdXNoKHhbei5hXSx4W3ouYl0seFt6LmNdKX1mb3IoeT0wO3k8bjt5KyspeD1sW3ldLnZlcnRleE5vcm1hbHNbbV0scFt5XS5wdXNoKHguYSx4LmIseC5jKTt2JiZ0aGlzLnNraW5JbmRpY2VzLnB1c2goclt6LmFdLHJbei5iXSxyW3ouY10pO3cmJnRoaXMuc2tpbldlaWdodHMucHVzaCh0W3ouYV0sdFt6LmJdLHRbei5jXSl9dGhpcy5jb21wdXRlR3JvdXBzKGEpO3RoaXMudmVydGljZXNOZWVkVXBkYXRlPWEudmVydGljZXNOZWVkVXBkYXRlO3RoaXMubm9ybWFsc05lZWRVcGRhdGU9XG4gICAgYS5ub3JtYWxzTmVlZFVwZGF0ZTt0aGlzLmNvbG9yc05lZWRVcGRhdGU9YS5jb2xvcnNOZWVkVXBkYXRlO3RoaXMudXZzTmVlZFVwZGF0ZT1hLnV2c05lZWRVcGRhdGU7dGhpcy5ncm91cHNOZWVkVXBkYXRlPWEuZ3JvdXBzTmVlZFVwZGF0ZTtyZXR1cm4gdGhpc319KTt2YXIgZWc9MTtFLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoemEucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6RSxpc0J1ZmZlckdlb21ldHJ5OiEwLGdldEluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5kZXh9LHNldEluZGV4OmZ1bmN0aW9uKGEpe0FycmF5LmlzQXJyYXkoYSk/dGhpcy5pbmRleD1uZXcgKDY1NTM1PFhkKGEpP3BiOm9iKShhLDEpOnRoaXMuaW5kZXg9YX0sYWRkQXR0cmlidXRlOmZ1bmN0aW9uKGEsYixjKXtpZihiJiZiLmlzQnVmZmVyQXR0cmlidXRlfHxiJiZiLmlzSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUpaWYoXCJpbmRleFwiPT09YSljb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeS5hZGRBdHRyaWJ1dGU6IFVzZSAuc2V0SW5kZXgoKSBmb3IgaW5kZXggYXR0cmlidXRlLlwiKSxcbiAgICB0aGlzLnNldEluZGV4KGIpO2Vsc2UgcmV0dXJuIHRoaXMuYXR0cmlidXRlc1thXT1iLHRoaXM7ZWxzZSBjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmFkZEF0dHJpYnV0ZSgpIG5vdyBleHBlY3RzICggbmFtZSwgYXR0cmlidXRlICkuXCIpLHRoaXMuYWRkQXR0cmlidXRlKGEsbmV3IE0oYixjKSl9LGdldEF0dHJpYnV0ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW2FdfSxyZW1vdmVBdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7ZGVsZXRlIHRoaXMuYXR0cmlidXRlc1thXTtyZXR1cm4gdGhpc30sYWRkR3JvdXA6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuZ3JvdXBzLnB1c2goe3N0YXJ0OmEsY291bnQ6YixtYXRlcmlhbEluZGV4OnZvaWQgMCE9PWM/YzowfSl9LGNsZWFyR3JvdXBzOmZ1bmN0aW9uKCl7dGhpcy5ncm91cHM9W119LHNldERyYXdSYW5nZTpmdW5jdGlvbihhLGIpe3RoaXMuZHJhd1JhbmdlLnN0YXJ0PWE7dGhpcy5kcmF3UmFuZ2UuY291bnQ9Yn0sXG4gICAgYXBwbHlNYXRyaXg6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uO3ZvaWQgMCE9PWImJihhLmFwcGx5VG9CdWZmZXJBdHRyaWJ1dGUoYiksYi5uZWVkc1VwZGF0ZT0hMCk7Yj10aGlzLmF0dHJpYnV0ZXMubm9ybWFsO3ZvaWQgMCE9PWImJigobmV3IG1hKS5nZXROb3JtYWxNYXRyaXgoYSkuYXBwbHlUb0J1ZmZlckF0dHJpYnV0ZShiKSxiLm5lZWRzVXBkYXRlPSEwKTtudWxsIT09dGhpcy5ib3VuZGluZ0JveCYmdGhpcy5jb21wdXRlQm91bmRpbmdCb3goKTtudWxsIT09dGhpcy5ib3VuZGluZ1NwaGVyZSYmdGhpcy5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTtyZXR1cm4gdGhpc30scm90YXRlWDpmdW5jdGlvbigpe3ZhciBhPW5ldyBPO3JldHVybiBmdW5jdGlvbihiKXthLm1ha2VSb3RhdGlvblgoYik7dGhpcy5hcHBseU1hdHJpeChhKTtyZXR1cm4gdGhpc319KCkscm90YXRlWTpmdW5jdGlvbigpe3ZhciBhPW5ldyBPO3JldHVybiBmdW5jdGlvbihiKXthLm1ha2VSb3RhdGlvblkoYik7XG4gICAgdGhpcy5hcHBseU1hdHJpeChhKTtyZXR1cm4gdGhpc319KCkscm90YXRlWjpmdW5jdGlvbigpe3ZhciBhPW5ldyBPO3JldHVybiBmdW5jdGlvbihiKXthLm1ha2VSb3RhdGlvblooYik7dGhpcy5hcHBseU1hdHJpeChhKTtyZXR1cm4gdGhpc319KCksdHJhbnNsYXRlOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE87cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXthLm1ha2VUcmFuc2xhdGlvbihiLGMsZCk7dGhpcy5hcHBseU1hdHJpeChhKTtyZXR1cm4gdGhpc319KCksc2NhbGU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgTztyZXR1cm4gZnVuY3Rpb24oYixjLGQpe2EubWFrZVNjYWxlKGIsYyxkKTt0aGlzLmFwcGx5TWF0cml4KGEpO3JldHVybiB0aGlzfX0oKSxsb29rQXQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgeDtyZXR1cm4gZnVuY3Rpb24oYil7YS5sb29rQXQoYik7YS51cGRhdGVNYXRyaXgoKTt0aGlzLmFwcGx5TWF0cml4KGEubWF0cml4KX19KCksY2VudGVyOmZ1bmN0aW9uKCl7dGhpcy5jb21wdXRlQm91bmRpbmdCb3goKTtcbiAgICB2YXIgYT10aGlzLmJvdW5kaW5nQm94LmdldENlbnRlcigpLm5lZ2F0ZSgpO3RoaXMudHJhbnNsYXRlKGEueCxhLnksYS56KTtyZXR1cm4gYX0sc2V0RnJvbU9iamVjdDpmdW5jdGlvbihhKXt2YXIgYj1hLmdlb21ldHJ5O2lmKGEuaXNQb2ludHN8fGEuaXNMaW5lKXthPW5ldyBCKDMqYi52ZXJ0aWNlcy5sZW5ndGgsMyk7dmFyIGM9bmV3IEIoMypiLmNvbG9ycy5sZW5ndGgsMyk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLGEuY29weVZlY3RvcjNzQXJyYXkoYi52ZXJ0aWNlcykpO3RoaXMuYWRkQXR0cmlidXRlKFwiY29sb3JcIixjLmNvcHlDb2xvcnNBcnJheShiLmNvbG9ycykpO2IubGluZURpc3RhbmNlcyYmYi5saW5lRGlzdGFuY2VzLmxlbmd0aD09PWIudmVydGljZXMubGVuZ3RoJiYoYT1uZXcgQihiLmxpbmVEaXN0YW5jZXMubGVuZ3RoLDEpLHRoaXMuYWRkQXR0cmlidXRlKFwibGluZURpc3RhbmNlXCIsYS5jb3B5QXJyYXkoYi5saW5lRGlzdGFuY2VzKSkpO251bGwhPT1iLmJvdW5kaW5nU3BoZXJlJiZcbiAgICAodGhpcy5ib3VuZGluZ1NwaGVyZT1iLmJvdW5kaW5nU3BoZXJlLmNsb25lKCkpO251bGwhPT1iLmJvdW5kaW5nQm94JiYodGhpcy5ib3VuZGluZ0JveD1iLmJvdW5kaW5nQm94LmNsb25lKCkpfWVsc2UgYS5pc01lc2gmJmImJmIuaXNHZW9tZXRyeSYmdGhpcy5mcm9tR2VvbWV0cnkoYik7cmV0dXJuIHRoaXN9LHNldEZyb21Qb2ludHM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPWFbY107Yi5wdXNoKGUueCxlLnksZS56fHwwKX10aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEIoYiwzKSk7cmV0dXJuIHRoaXN9LHVwZGF0ZUZyb21PYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZW9tZXRyeTtpZihhLmlzTWVzaCl7dmFyIGM9Yi5fX2RpcmVjdEdlb21ldHJ5OyEwPT09Yi5lbGVtZW50c05lZWRVcGRhdGUmJihjPXZvaWQgMCxiLmVsZW1lbnRzTmVlZFVwZGF0ZT0hMSk7aWYodm9pZCAwPT09YylyZXR1cm4gdGhpcy5mcm9tR2VvbWV0cnkoYik7XG4gICAgYy52ZXJ0aWNlc05lZWRVcGRhdGU9Yi52ZXJ0aWNlc05lZWRVcGRhdGU7Yy5ub3JtYWxzTmVlZFVwZGF0ZT1iLm5vcm1hbHNOZWVkVXBkYXRlO2MuY29sb3JzTmVlZFVwZGF0ZT1iLmNvbG9yc05lZWRVcGRhdGU7Yy51dnNOZWVkVXBkYXRlPWIudXZzTmVlZFVwZGF0ZTtjLmdyb3Vwc05lZWRVcGRhdGU9Yi5ncm91cHNOZWVkVXBkYXRlO2IudmVydGljZXNOZWVkVXBkYXRlPSExO2Iubm9ybWFsc05lZWRVcGRhdGU9ITE7Yi5jb2xvcnNOZWVkVXBkYXRlPSExO2IudXZzTmVlZFVwZGF0ZT0hMTtiLmdyb3Vwc05lZWRVcGRhdGU9ITE7Yj1jfSEwPT09Yi52ZXJ0aWNlc05lZWRVcGRhdGUmJihjPXRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbix2b2lkIDAhPT1jJiYoYy5jb3B5VmVjdG9yM3NBcnJheShiLnZlcnRpY2VzKSxjLm5lZWRzVXBkYXRlPSEwKSxiLnZlcnRpY2VzTmVlZFVwZGF0ZT0hMSk7ITA9PT1iLm5vcm1hbHNOZWVkVXBkYXRlJiYoYz10aGlzLmF0dHJpYnV0ZXMubm9ybWFsLHZvaWQgMCE9PVxuICAgIGMmJihjLmNvcHlWZWN0b3Izc0FycmF5KGIubm9ybWFscyksYy5uZWVkc1VwZGF0ZT0hMCksYi5ub3JtYWxzTmVlZFVwZGF0ZT0hMSk7ITA9PT1iLmNvbG9yc05lZWRVcGRhdGUmJihjPXRoaXMuYXR0cmlidXRlcy5jb2xvcix2b2lkIDAhPT1jJiYoYy5jb3B5Q29sb3JzQXJyYXkoYi5jb2xvcnMpLGMubmVlZHNVcGRhdGU9ITApLGIuY29sb3JzTmVlZFVwZGF0ZT0hMSk7Yi51dnNOZWVkVXBkYXRlJiYoYz10aGlzLmF0dHJpYnV0ZXMudXYsdm9pZCAwIT09YyYmKGMuY29weVZlY3RvcjJzQXJyYXkoYi51dnMpLGMubmVlZHNVcGRhdGU9ITApLGIudXZzTmVlZFVwZGF0ZT0hMSk7Yi5saW5lRGlzdGFuY2VzTmVlZFVwZGF0ZSYmKGM9dGhpcy5hdHRyaWJ1dGVzLmxpbmVEaXN0YW5jZSx2b2lkIDAhPT1jJiYoYy5jb3B5QXJyYXkoYi5saW5lRGlzdGFuY2VzKSxjLm5lZWRzVXBkYXRlPSEwKSxiLmxpbmVEaXN0YW5jZXNOZWVkVXBkYXRlPSExKTtiLmdyb3Vwc05lZWRVcGRhdGUmJihiLmNvbXB1dGVHcm91cHMoYS5nZW9tZXRyeSksXG4gICAgdGhpcy5ncm91cHM9Yi5ncm91cHMsYi5ncm91cHNOZWVkVXBkYXRlPSExKTtyZXR1cm4gdGhpc30sZnJvbUdlb21ldHJ5OmZ1bmN0aW9uKGEpe2EuX19kaXJlY3RHZW9tZXRyeT0obmV3IFZlKS5mcm9tR2VvbWV0cnkoYSk7cmV0dXJuIHRoaXMuZnJvbURpcmVjdEdlb21ldHJ5KGEuX19kaXJlY3RHZW9tZXRyeSl9LGZyb21EaXJlY3RHZW9tZXRyeTpmdW5jdGlvbihhKXt2YXIgYj1uZXcgRmxvYXQzMkFycmF5KDMqYS52ZXJ0aWNlcy5sZW5ndGgpO3RoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIiwobmV3IE0oYiwzKSkuY29weVZlY3RvcjNzQXJyYXkoYS52ZXJ0aWNlcykpOzA8YS5ub3JtYWxzLmxlbmd0aCYmKGI9bmV3IEZsb2F0MzJBcnJheSgzKmEubm9ybWFscy5sZW5ndGgpLHRoaXMuYWRkQXR0cmlidXRlKFwibm9ybWFsXCIsKG5ldyBNKGIsMykpLmNvcHlWZWN0b3Izc0FycmF5KGEubm9ybWFscykpKTswPGEuY29sb3JzLmxlbmd0aCYmKGI9bmV3IEZsb2F0MzJBcnJheSgzKmEuY29sb3JzLmxlbmd0aCksXG4gICAgdGhpcy5hZGRBdHRyaWJ1dGUoXCJjb2xvclwiLChuZXcgTShiLDMpKS5jb3B5Q29sb3JzQXJyYXkoYS5jb2xvcnMpKSk7MDxhLnV2cy5sZW5ndGgmJihiPW5ldyBGbG9hdDMyQXJyYXkoMiphLnV2cy5sZW5ndGgpLHRoaXMuYWRkQXR0cmlidXRlKFwidXZcIiwobmV3IE0oYiwyKSkuY29weVZlY3RvcjJzQXJyYXkoYS51dnMpKSk7MDxhLnV2czIubGVuZ3RoJiYoYj1uZXcgRmxvYXQzMkFycmF5KDIqYS51dnMyLmxlbmd0aCksdGhpcy5hZGRBdHRyaWJ1dGUoXCJ1djJcIiwobmV3IE0oYiwyKSkuY29weVZlY3RvcjJzQXJyYXkoYS51dnMyKSkpOzA8YS5pbmRpY2VzLmxlbmd0aCYmKGI9bmV3ICg2NTUzNTxYZChhLmluZGljZXMpP1VpbnQzMkFycmF5OlVpbnQxNkFycmF5KSgzKmEuaW5kaWNlcy5sZW5ndGgpLHRoaXMuc2V0SW5kZXgoKG5ldyBNKGIsMSkpLmNvcHlJbmRpY2VzQXJyYXkoYS5pbmRpY2VzKSkpO3RoaXMuZ3JvdXBzPWEuZ3JvdXBzO2Zvcih2YXIgYyBpbiBhLm1vcnBoVGFyZ2V0cyl7Zm9yKHZhciBiPVxuICAgIFtdLGQ9YS5tb3JwaFRhcmdldHNbY10sZT0wLGY9ZC5sZW5ndGg7ZTxmO2UrKyl7dmFyIGc9ZFtlXSxoPW5ldyBCKDMqZy5sZW5ndGgsMyk7Yi5wdXNoKGguY29weVZlY3RvcjNzQXJyYXkoZykpfXRoaXMubW9ycGhBdHRyaWJ1dGVzW2NdPWJ9MDxhLnNraW5JbmRpY2VzLmxlbmd0aCYmKGM9bmV3IEIoNCphLnNraW5JbmRpY2VzLmxlbmd0aCw0KSx0aGlzLmFkZEF0dHJpYnV0ZShcInNraW5JbmRleFwiLGMuY29weVZlY3RvcjRzQXJyYXkoYS5za2luSW5kaWNlcykpKTswPGEuc2tpbldlaWdodHMubGVuZ3RoJiYoYz1uZXcgQig0KmEuc2tpbldlaWdodHMubGVuZ3RoLDQpLHRoaXMuYWRkQXR0cmlidXRlKFwic2tpbldlaWdodFwiLGMuY29weVZlY3RvcjRzQXJyYXkoYS5za2luV2VpZ2h0cykpKTtudWxsIT09YS5ib3VuZGluZ1NwaGVyZSYmKHRoaXMuYm91bmRpbmdTcGhlcmU9YS5ib3VuZGluZ1NwaGVyZS5jbG9uZSgpKTtudWxsIT09YS5ib3VuZGluZ0JveCYmKHRoaXMuYm91bmRpbmdCb3g9XG4gICAgYS5ib3VuZGluZ0JveC5jbG9uZSgpKTtyZXR1cm4gdGhpc30sY29tcHV0ZUJvdW5kaW5nQm94OmZ1bmN0aW9uKCl7bnVsbD09PXRoaXMuYm91bmRpbmdCb3gmJih0aGlzLmJvdW5kaW5nQm94PW5ldyBYYSk7dmFyIGE9dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uO3ZvaWQgMCE9PWE/dGhpcy5ib3VuZGluZ0JveC5zZXRGcm9tQnVmZmVyQXR0cmlidXRlKGEpOnRoaXMuYm91bmRpbmdCb3gubWFrZUVtcHR5KCk7KGlzTmFOKHRoaXMuYm91bmRpbmdCb3gubWluLngpfHxpc05hTih0aGlzLmJvdW5kaW5nQm94Lm1pbi55KXx8aXNOYU4odGhpcy5ib3VuZGluZ0JveC5taW4ueikpJiZjb25zb2xlLmVycm9yKCdUSFJFRS5CdWZmZXJHZW9tZXRyeS5jb21wdXRlQm91bmRpbmdCb3g6IENvbXB1dGVkIG1pbi9tYXggaGF2ZSBOYU4gdmFsdWVzLiBUaGUgXCJwb3NpdGlvblwiIGF0dHJpYnV0ZSBpcyBsaWtlbHkgdG8gaGF2ZSBOYU4gdmFsdWVzLicsdGhpcyl9LGNvbXB1dGVCb3VuZGluZ1NwaGVyZTpmdW5jdGlvbigpe3ZhciBhPVxuICAgIG5ldyBYYSxiPW5ldyBwO3JldHVybiBmdW5jdGlvbigpe251bGw9PT10aGlzLmJvdW5kaW5nU3BoZXJlJiYodGhpcy5ib3VuZGluZ1NwaGVyZT1uZXcgSWEpO3ZhciBjPXRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbjtpZihjKXt2YXIgZD10aGlzLmJvdW5kaW5nU3BoZXJlLmNlbnRlcjthLnNldEZyb21CdWZmZXJBdHRyaWJ1dGUoYyk7YS5nZXRDZW50ZXIoZCk7Zm9yKHZhciBlPTAsZj0wLGc9Yy5jb3VudDtmPGc7ZisrKWIueD1jLmdldFgoZiksYi55PWMuZ2V0WShmKSxiLno9Yy5nZXRaKGYpLGU9TWF0aC5tYXgoZSxkLmRpc3RhbmNlVG9TcXVhcmVkKGIpKTt0aGlzLmJvdW5kaW5nU3BoZXJlLnJhZGl1cz1NYXRoLnNxcnQoZSk7aXNOYU4odGhpcy5ib3VuZGluZ1NwaGVyZS5yYWRpdXMpJiZjb25zb2xlLmVycm9yKCdUSFJFRS5CdWZmZXJHZW9tZXRyeS5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTogQ29tcHV0ZWQgcmFkaXVzIGlzIE5hTi4gVGhlIFwicG9zaXRpb25cIiBhdHRyaWJ1dGUgaXMgbGlrZWx5IHRvIGhhdmUgTmFOIHZhbHVlcy4nLFxuICAgIHRoaXMpfX19KCksY29tcHV0ZUZhY2VOb3JtYWxzOmZ1bmN0aW9uKCl7fSxjb21wdXRlVmVydGV4Tm9ybWFsczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuaW5kZXgsYj10aGlzLmF0dHJpYnV0ZXMsYz10aGlzLmdyb3VwcztpZihiLnBvc2l0aW9uKXt2YXIgZD1iLnBvc2l0aW9uLmFycmF5O2lmKHZvaWQgMD09PWIubm9ybWFsKXRoaXMuYWRkQXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IE0obmV3IEZsb2F0MzJBcnJheShkLmxlbmd0aCksMykpO2Vsc2UgZm9yKHZhciBlPWIubm9ybWFsLmFycmF5LGY9MCxnPWUubGVuZ3RoO2Y8ZztmKyspZVtmXT0wO3ZhciBlPWIubm9ybWFsLmFycmF5LGg9bmV3IHAsaz1uZXcgcCxtPW5ldyBwLGw9bmV3IHAsbj1uZXcgcDtpZihhKXthPWEuYXJyYXk7MD09PWMubGVuZ3RoJiZ0aGlzLmFkZEdyb3VwKDAsYS5sZW5ndGgpO2Zvcih2YXIgdT0wLHI9Yy5sZW5ndGg7dTxyOysrdSl7Zj1jW3VdO2c9Zi5zdGFydDt2YXIgdD1mLmNvdW50O2Y9Zztmb3IoZys9dDtmPFxuICAgIGc7Zis9Myl7dD0zKmFbZiswXTt2YXIgdj0zKmFbZisxXTt2YXIgdz0zKmFbZisyXTtoLmZyb21BcnJheShkLHQpO2suZnJvbUFycmF5KGQsdik7bS5mcm9tQXJyYXkoZCx3KTtsLnN1YlZlY3RvcnMobSxrKTtuLnN1YlZlY3RvcnMoaCxrKTtsLmNyb3NzKG4pO2VbdF0rPWwueDtlW3QrMV0rPWwueTtlW3QrMl0rPWwuejtlW3ZdKz1sLng7ZVt2KzFdKz1sLnk7ZVt2KzJdKz1sLno7ZVt3XSs9bC54O2VbdysxXSs9bC55O2VbdysyXSs9bC56fX19ZWxzZSBmb3IoZj0wLGc9ZC5sZW5ndGg7ZjxnO2YrPTkpaC5mcm9tQXJyYXkoZCxmKSxrLmZyb21BcnJheShkLGYrMyksbS5mcm9tQXJyYXkoZCxmKzYpLGwuc3ViVmVjdG9ycyhtLGspLG4uc3ViVmVjdG9ycyhoLGspLGwuY3Jvc3MobiksZVtmXT1sLngsZVtmKzFdPWwueSxlW2YrMl09bC56LGVbZiszXT1sLngsZVtmKzRdPWwueSxlW2YrNV09bC56LGVbZis2XT1sLngsZVtmKzddPWwueSxlW2YrOF09bC56O3RoaXMubm9ybWFsaXplTm9ybWFscygpO1xuICAgIGIubm9ybWFsLm5lZWRzVXBkYXRlPSEwfX0sbWVyZ2U6ZnVuY3Rpb24oYSxiKXtpZihhJiZhLmlzQnVmZmVyR2VvbWV0cnkpe3ZvaWQgMD09PWImJihiPTApO3ZhciBjPXRoaXMuYXR0cmlidXRlcyxkO2ZvcihkIGluIGMpaWYodm9pZCAwIT09YS5hdHRyaWJ1dGVzW2RdKWZvcih2YXIgZT1jW2RdLmFycmF5LGY9YS5hdHRyaWJ1dGVzW2RdLGc9Zi5hcnJheSxoPTAsZj1mLml0ZW1TaXplKmI7aDxnLmxlbmd0aDtoKyssZisrKWVbZl09Z1toXTtyZXR1cm4gdGhpc31jb25zb2xlLmVycm9yKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnkubWVyZ2UoKTogZ2VvbWV0cnkgbm90IGFuIGluc3RhbmNlIG9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5LlwiLGEpfSxub3JtYWxpemVOb3JtYWxzOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciBiPXRoaXMuYXR0cmlidXRlcy5ub3JtYWwsYz0wLGQ9Yi5jb3VudDtjPGQ7YysrKWEueD1iLmdldFgoYyksYS55PWIuZ2V0WShjKSxcbiAgICBhLno9Yi5nZXRaKGMpLGEubm9ybWFsaXplKCksYi5zZXRYWVooYyxhLngsYS55LGEueil9fSgpLHRvTm9uSW5kZXhlZDpmdW5jdGlvbigpe2lmKG51bGw9PT10aGlzLmluZGV4KXJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeS50b05vbkluZGV4ZWQoKTogR2VvbWV0cnkgaXMgYWxyZWFkeSBub24taW5kZXhlZC5cIiksdGhpczt2YXIgYT1uZXcgRSxiPXRoaXMuaW5kZXguYXJyYXksYz10aGlzLmF0dHJpYnV0ZXMsZDtmb3IoZCBpbiBjKXtmb3IodmFyIGU9Y1tkXSxmPWUuYXJyYXksZT1lLml0ZW1TaXplLGc9bmV3IGYuY29uc3RydWN0b3IoYi5sZW5ndGgqZSksaCxrPTAsbT0wLGw9Yi5sZW5ndGg7bTxsO20rKyl7aD1iW21dKmU7Zm9yKHZhciBuPTA7bjxlO24rKylnW2srK109ZltoKytdfWEuYWRkQXR0cmlidXRlKGQsbmV3IE0oZyxlKSl9cmV0dXJuIGF9LHRvSlNPTjpmdW5jdGlvbigpe3ZhciBhPXttZXRhZGF0YTp7dmVyc2lvbjo0LjUsdHlwZTpcIkJ1ZmZlckdlb21ldHJ5XCIsXG4gICAgZ2VuZXJhdG9yOlwiQnVmZmVyR2VvbWV0cnkudG9KU09OXCJ9fTthLnV1aWQ9dGhpcy51dWlkO2EudHlwZT10aGlzLnR5cGU7XCJcIiE9PXRoaXMubmFtZSYmKGEubmFtZT10aGlzLm5hbWUpO2lmKHZvaWQgMCE9PXRoaXMucGFyYW1ldGVycyl7dmFyIGI9dGhpcy5wYXJhbWV0ZXJzO2Zvcih2YXIgYyBpbiBiKXZvaWQgMCE9PWJbY10mJihhW2NdPWJbY10pO3JldHVybiBhfWEuZGF0YT17YXR0cmlidXRlczp7fX07dmFyIGQ9dGhpcy5pbmRleDtudWxsIT09ZCYmKGI9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZC5hcnJheSksYS5kYXRhLmluZGV4PXt0eXBlOmQuYXJyYXkuY29uc3RydWN0b3IubmFtZSxhcnJheTpifSk7ZD10aGlzLmF0dHJpYnV0ZXM7Zm9yKGMgaW4gZCl7dmFyIGU9ZFtjXTtiPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUuYXJyYXkpO2EuZGF0YS5hdHRyaWJ1dGVzW2NdPXtpdGVtU2l6ZTplLml0ZW1TaXplLHR5cGU6ZS5hcnJheS5jb25zdHJ1Y3Rvci5uYW1lLFxuICAgIGFycmF5OmIsbm9ybWFsaXplZDplLm5vcm1hbGl6ZWR9fWM9dGhpcy5ncm91cHM7MDxjLmxlbmd0aCYmKGEuZGF0YS5ncm91cHM9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjKSkpO2M9dGhpcy5ib3VuZGluZ1NwaGVyZTtudWxsIT09YyYmKGEuZGF0YS5ib3VuZGluZ1NwaGVyZT17Y2VudGVyOmMuY2VudGVyLnRvQXJyYXkoKSxyYWRpdXM6Yy5yYWRpdXN9KTtyZXR1cm4gYX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IEUpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oYSl7dmFyIGI7dGhpcy5pbmRleD1udWxsO3RoaXMuYXR0cmlidXRlcz17fTt0aGlzLm1vcnBoQXR0cmlidXRlcz17fTt0aGlzLmdyb3Vwcz1bXTt0aGlzLmJvdW5kaW5nU3BoZXJlPXRoaXMuYm91bmRpbmdCb3g9bnVsbDt0aGlzLm5hbWU9YS5uYW1lO3ZhciBjPWEuaW5kZXg7bnVsbCE9PWMmJnRoaXMuc2V0SW5kZXgoYy5jbG9uZSgpKTtjPWEuYXR0cmlidXRlcztmb3IoZyBpbiBjKXRoaXMuYWRkQXR0cmlidXRlKGcsXG4gICAgY1tnXS5jbG9uZSgpKTt2YXIgZD1hLm1vcnBoQXR0cmlidXRlcztmb3IoZyBpbiBkKXt2YXIgZT1bXSxmPWRbZ107Yz0wO2ZvcihiPWYubGVuZ3RoO2M8YjtjKyspZS5wdXNoKGZbY10uY2xvbmUoKSk7dGhpcy5tb3JwaEF0dHJpYnV0ZXNbZ109ZX12YXIgZz1hLmdyb3VwcztjPTA7Zm9yKGI9Zy5sZW5ndGg7YzxiO2MrKylkPWdbY10sdGhpcy5hZGRHcm91cChkLnN0YXJ0LGQuY291bnQsZC5tYXRlcmlhbEluZGV4KTtnPWEuYm91bmRpbmdCb3g7bnVsbCE9PWcmJih0aGlzLmJvdW5kaW5nQm94PWcuY2xvbmUoKSk7Zz1hLmJvdW5kaW5nU3BoZXJlO251bGwhPT1nJiYodGhpcy5ib3VuZGluZ1NwaGVyZT1nLmNsb25lKCkpO3RoaXMuZHJhd1JhbmdlLnN0YXJ0PWEuZHJhd1JhbmdlLnN0YXJ0O3RoaXMuZHJhd1JhbmdlLmNvdW50PWEuZHJhd1JhbmdlLmNvdW50O3JldHVybiB0aGlzfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZGlzcG9zZVwifSl9fSk7XG4gICAgTWIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTC5wcm90b3R5cGUpO01iLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1NYjtxYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFLnByb3RvdHlwZSk7cWIucHJvdG90eXBlLmNvbnN0cnVjdG9yPXFiO0FjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEwucHJvdG90eXBlKTtBYy5wcm90b3R5cGUuY29uc3RydWN0b3I9QWM7cmIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRS5wcm90b3R5cGUpO3JiLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1yYjtBYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShQLnByb3RvdHlwZSk7QWEucHJvdG90eXBlLmNvbnN0cnVjdG9yPUFhO0FhLnByb3RvdHlwZS5pc01lc2hCYXNpY01hdGVyaWFsPSEwO0FhLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe1AucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuY29sb3IuY29weShhLmNvbG9yKTt0aGlzLm1hcD1hLm1hcDt0aGlzLmxpZ2h0TWFwPWEubGlnaHRNYXA7XG4gICAgdGhpcy5saWdodE1hcEludGVuc2l0eT1hLmxpZ2h0TWFwSW50ZW5zaXR5O3RoaXMuYW9NYXA9YS5hb01hcDt0aGlzLmFvTWFwSW50ZW5zaXR5PWEuYW9NYXBJbnRlbnNpdHk7dGhpcy5zcGVjdWxhck1hcD1hLnNwZWN1bGFyTWFwO3RoaXMuYWxwaGFNYXA9YS5hbHBoYU1hcDt0aGlzLmVudk1hcD1hLmVudk1hcDt0aGlzLmNvbWJpbmU9YS5jb21iaW5lO3RoaXMucmVmbGVjdGl2aXR5PWEucmVmbGVjdGl2aXR5O3RoaXMucmVmcmFjdGlvblJhdGlvPWEucmVmcmFjdGlvblJhdGlvO3RoaXMud2lyZWZyYW1lPWEud2lyZWZyYW1lO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPWEud2lyZWZyYW1lTGluZXdpZHRoO3RoaXMud2lyZWZyYW1lTGluZWNhcD1hLndpcmVmcmFtZUxpbmVjYXA7dGhpcy53aXJlZnJhbWVMaW5lam9pbj1hLndpcmVmcmFtZUxpbmVqb2luO3RoaXMuc2tpbm5pbmc9YS5za2lubmluZzt0aGlzLm1vcnBoVGFyZ2V0cz1hLm1vcnBoVGFyZ2V0cztyZXR1cm4gdGhpc307RmEucHJvdG90eXBlPVxuICAgIE9iamVjdC5jcmVhdGUoUC5wcm90b3R5cGUpO0ZhLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1GYTtGYS5wcm90b3R5cGUuaXNTaGFkZXJNYXRlcmlhbD0hMDtGYS5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtQLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmZyYWdtZW50U2hhZGVyPWEuZnJhZ21lbnRTaGFkZXI7dGhpcy52ZXJ0ZXhTaGFkZXI9YS52ZXJ0ZXhTaGFkZXI7dGhpcy51bmlmb3Jtcz1HYS5jbG9uZShhLnVuaWZvcm1zKTt0aGlzLmRlZmluZXM9YS5kZWZpbmVzO3RoaXMud2lyZWZyYW1lPWEud2lyZWZyYW1lO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPWEud2lyZWZyYW1lTGluZXdpZHRoO3RoaXMubGlnaHRzPWEubGlnaHRzO3RoaXMuY2xpcHBpbmc9YS5jbGlwcGluZzt0aGlzLnNraW5uaW5nPWEuc2tpbm5pbmc7dGhpcy5tb3JwaFRhcmdldHM9YS5tb3JwaFRhcmdldHM7dGhpcy5tb3JwaE5vcm1hbHM9YS5tb3JwaE5vcm1hbHM7dGhpcy5leHRlbnNpb25zPVxuICAgIGEuZXh0ZW5zaW9ucztyZXR1cm4gdGhpc307RmEucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbihhKXthPVAucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsYSk7YS51bmlmb3Jtcz10aGlzLnVuaWZvcm1zO2EudmVydGV4U2hhZGVyPXRoaXMudmVydGV4U2hhZGVyO2EuZnJhZ21lbnRTaGFkZXI9dGhpcy5mcmFnbWVudFNoYWRlcjtyZXR1cm4gYX07T2JqZWN0LmFzc2lnbihzYi5wcm90b3R5cGUse3NldDpmdW5jdGlvbihhLGIpe3RoaXMub3JpZ2luLmNvcHkoYSk7dGhpcy5kaXJlY3Rpb24uY29weShiKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5vcmlnaW4uY29weShhLm9yaWdpbik7dGhpcy5kaXJlY3Rpb24uY29weShhLmRpcmVjdGlvbik7cmV0dXJuIHRoaXN9LGF0OmZ1bmN0aW9uKGEsYil7cmV0dXJuKGJ8fG5ldyBwKS5jb3B5KHRoaXMuZGlyZWN0aW9uKS5tdWx0aXBseVNjYWxhcihhKS5hZGQodGhpcy5vcmlnaW4pfSxcbiAgICBsb29rQXQ6ZnVuY3Rpb24oYSl7dGhpcy5kaXJlY3Rpb24uY29weShhKS5zdWIodGhpcy5vcmlnaW4pLm5vcm1hbGl6ZSgpO3JldHVybiB0aGlzfSxyZWNhc3Q6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYil7dGhpcy5vcmlnaW4uY29weSh0aGlzLmF0KGIsYSkpO3JldHVybiB0aGlzfX0oKSxjbG9zZXN0UG9pbnRUb1BvaW50OmZ1bmN0aW9uKGEsYil7Yj1ifHxuZXcgcDtiLnN1YlZlY3RvcnMoYSx0aGlzLm9yaWdpbik7YT1iLmRvdCh0aGlzLmRpcmVjdGlvbik7cmV0dXJuIDA+YT9iLmNvcHkodGhpcy5vcmlnaW4pOmIuY29weSh0aGlzLmRpcmVjdGlvbikubXVsdGlwbHlTY2FsYXIoYSkuYWRkKHRoaXMub3JpZ2luKX0sZGlzdGFuY2VUb1BvaW50OmZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLnNxcnQodGhpcy5kaXN0YW5jZVNxVG9Qb2ludChhKSl9LGRpc3RhbmNlU3FUb1BvaW50OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPVxuICAgIGEuc3ViVmVjdG9ycyhiLHRoaXMub3JpZ2luKS5kb3QodGhpcy5kaXJlY3Rpb24pO2lmKDA+YylyZXR1cm4gdGhpcy5vcmlnaW4uZGlzdGFuY2VUb1NxdWFyZWQoYik7YS5jb3B5KHRoaXMuZGlyZWN0aW9uKS5tdWx0aXBseVNjYWxhcihjKS5hZGQodGhpcy5vcmlnaW4pO3JldHVybiBhLmRpc3RhbmNlVG9TcXVhcmVkKGIpfX0oKSxkaXN0YW5jZVNxVG9TZWdtZW50OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHAsYj1uZXcgcCxjPW5ldyBwO3JldHVybiBmdW5jdGlvbihkLGUsZixnKXthLmNvcHkoZCkuYWRkKGUpLm11bHRpcGx5U2NhbGFyKC41KTtiLmNvcHkoZSkuc3ViKGQpLm5vcm1hbGl6ZSgpO2MuY29weSh0aGlzLm9yaWdpbikuc3ViKGEpO3ZhciBoPS41KmQuZGlzdGFuY2VUbyhlKSxrPS10aGlzLmRpcmVjdGlvbi5kb3QoYiksbT1jLmRvdCh0aGlzLmRpcmVjdGlvbiksbD0tYy5kb3QoYiksbj1jLmxlbmd0aFNxKCkscD1NYXRoLmFicygxLWsqayk7aWYoMDxwKXtkPWsqbC1tO2U9aypcbiAgICBtLWw7dmFyIHI9aCpwOzA8PWQ/ZT49LXI/ZTw9cj8oaD0xL3AsZCo9aCxlKj1oLGs9ZCooZCtrKmUrMiptKStlKihrKmQrZSsyKmwpK24pOihlPWgsZD1NYXRoLm1heCgwLC0oayplK20pKSxrPS1kKmQrZSooZSsyKmwpK24pOihlPS1oLGQ9TWF0aC5tYXgoMCwtKGsqZSttKSksaz0tZCpkK2UqKGUrMipsKStuKTplPD0tcj8oZD1NYXRoLm1heCgwLC0oLWsqaCttKSksZT0wPGQ/LWg6TWF0aC5taW4oTWF0aC5tYXgoLWgsLWwpLGgpLGs9LWQqZCtlKihlKzIqbCkrbik6ZTw9cj8oZD0wLGU9TWF0aC5taW4oTWF0aC5tYXgoLWgsLWwpLGgpLGs9ZSooZSsyKmwpK24pOihkPU1hdGgubWF4KDAsLShrKmgrbSkpLGU9MDxkP2g6TWF0aC5taW4oTWF0aC5tYXgoLWgsLWwpLGgpLGs9LWQqZCtlKihlKzIqbCkrbil9ZWxzZSBlPTA8az8taDpoLGQ9TWF0aC5tYXgoMCwtKGsqZSttKSksaz0tZCpkK2UqKGUrMipsKStuO2YmJmYuY29weSh0aGlzLmRpcmVjdGlvbikubXVsdGlwbHlTY2FsYXIoZCkuYWRkKHRoaXMub3JpZ2luKTtcbiAgICBnJiZnLmNvcHkoYikubXVsdGlwbHlTY2FsYXIoZSkuYWRkKGEpO3JldHVybiBrfX0oKSxpbnRlcnNlY3RTcGhlcmU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYixjKXthLnN1YlZlY3RvcnMoYi5jZW50ZXIsdGhpcy5vcmlnaW4pO3ZhciBkPWEuZG90KHRoaXMuZGlyZWN0aW9uKSxlPWEuZG90KGEpLWQqZDtiPWIucmFkaXVzKmIucmFkaXVzO2lmKGU+YilyZXR1cm4gbnVsbDtiPU1hdGguc3FydChiLWUpO2U9ZC1iO2QrPWI7cmV0dXJuIDA+ZSYmMD5kP251bGw6MD5lP3RoaXMuYXQoZCxjKTp0aGlzLmF0KGUsYyl9fSgpLGludGVyc2VjdHNTcGhlcmU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZGlzdGFuY2VUb1BvaW50KGEuY2VudGVyKTw9YS5yYWRpdXN9LGRpc3RhbmNlVG9QbGFuZTpmdW5jdGlvbihhKXt2YXIgYj1hLm5vcm1hbC5kb3QodGhpcy5kaXJlY3Rpb24pO2lmKDA9PT1iKXJldHVybiAwPT09YS5kaXN0YW5jZVRvUG9pbnQodGhpcy5vcmlnaW4pP1xuICAgIDA6bnVsbDthPS0odGhpcy5vcmlnaW4uZG90KGEubm9ybWFsKSthLmNvbnN0YW50KS9iO3JldHVybiAwPD1hP2E6bnVsbH0saW50ZXJzZWN0UGxhbmU6ZnVuY3Rpb24oYSxiKXthPXRoaXMuZGlzdGFuY2VUb1BsYW5lKGEpO3JldHVybiBudWxsPT09YT9udWxsOnRoaXMuYXQoYSxiKX0saW50ZXJzZWN0c1BsYW5lOmZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzdGFuY2VUb1BvaW50KHRoaXMub3JpZ2luKTtyZXR1cm4gMD09PWJ8fDA+YS5ub3JtYWwuZG90KHRoaXMuZGlyZWN0aW9uKSpiPyEwOiExfSxpbnRlcnNlY3RCb3g6ZnVuY3Rpb24oYSxiKXt2YXIgYz0xL3RoaXMuZGlyZWN0aW9uLng7dmFyIGQ9MS90aGlzLmRpcmVjdGlvbi55O3ZhciBlPTEvdGhpcy5kaXJlY3Rpb24ueixmPXRoaXMub3JpZ2luO2lmKDA8PWMpe3ZhciBnPShhLm1pbi54LWYueCkqYztjKj1hLm1heC54LWYueH1lbHNlIGc9KGEubWF4LngtZi54KSpjLGMqPWEubWluLngtZi54O2lmKDA8PWQpe3ZhciBoPShhLm1pbi55LVxuICAgIGYueSkqZDtkKj1hLm1heC55LWYueX1lbHNlIGg9KGEubWF4LnktZi55KSpkLGQqPWEubWluLnktZi55O2lmKGc+ZHx8aD5jKXJldHVybiBudWxsO2lmKGg+Z3x8ZyE9PWcpZz1oO2lmKGQ8Y3x8YyE9PWMpYz1kOzA8PWU/KGg9KGEubWluLnotZi56KSplLGE9KGEubWF4LnotZi56KSplKTooaD0oYS5tYXguei1mLnopKmUsYT0oYS5taW4uei1mLnopKmUpO2lmKGc+YXx8aD5jKXJldHVybiBudWxsO2lmKGg+Z3x8ZyE9PWcpZz1oO2lmKGE8Y3x8YyE9PWMpYz1hO3JldHVybiAwPmM/bnVsbDp0aGlzLmF0KDA8PWc/ZzpjLGIpfSxpbnRlcnNlY3RzQm94OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBudWxsIT09dGhpcy5pbnRlcnNlY3RCb3goYixhKX19KCksaW50ZXJzZWN0VHJpYW5nbGU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCxiPW5ldyBwLGM9bmV3IHAsZD1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oZSxmLGcsaCxrKXtiLnN1YlZlY3RvcnMoZixcbiAgICBlKTtjLnN1YlZlY3RvcnMoZyxlKTtkLmNyb3NzVmVjdG9ycyhiLGMpO2Y9dGhpcy5kaXJlY3Rpb24uZG90KGQpO2lmKDA8Zil7aWYoaClyZXR1cm4gbnVsbDtoPTF9ZWxzZSBpZigwPmYpaD0tMSxmPS1mO2Vsc2UgcmV0dXJuIG51bGw7YS5zdWJWZWN0b3JzKHRoaXMub3JpZ2luLGUpO2U9aCp0aGlzLmRpcmVjdGlvbi5kb3QoYy5jcm9zc1ZlY3RvcnMoYSxjKSk7aWYoMD5lKXJldHVybiBudWxsO2c9aCp0aGlzLmRpcmVjdGlvbi5kb3QoYi5jcm9zcyhhKSk7aWYoMD5nfHxlK2c+ZilyZXR1cm4gbnVsbDtlPS1oKmEuZG90KGQpO3JldHVybiAwPmU/bnVsbDp0aGlzLmF0KGUvZixrKX19KCksYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKGEpe3RoaXMub3JpZ2luLmFwcGx5TWF0cml4NChhKTt0aGlzLmRpcmVjdGlvbi50cmFuc2Zvcm1EaXJlY3Rpb24oYSk7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5vcmlnaW4uZXF1YWxzKHRoaXMub3JpZ2luKSYmYS5kaXJlY3Rpb24uZXF1YWxzKHRoaXMuZGlyZWN0aW9uKX19KTtcbiAgICBPYmplY3QuYXNzaWduKE5iLnByb3RvdHlwZSx7c2V0OmZ1bmN0aW9uKGEsYil7dGhpcy5zdGFydC5jb3B5KGEpO3RoaXMuZW5kLmNvcHkoYik7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMuc3RhcnQuY29weShhLnN0YXJ0KTt0aGlzLmVuZC5jb3B5KGEuZW5kKTtyZXR1cm4gdGhpc30sZ2V0Q2VudGVyOmZ1bmN0aW9uKGEpe3JldHVybihhfHxuZXcgcCkuYWRkVmVjdG9ycyh0aGlzLnN0YXJ0LHRoaXMuZW5kKS5tdWx0aXBseVNjYWxhciguNSl9LGRlbHRhOmZ1bmN0aW9uKGEpe3JldHVybihhfHxuZXcgcCkuc3ViVmVjdG9ycyh0aGlzLmVuZCx0aGlzLnN0YXJ0KX0sZGlzdGFuY2VTcTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXJ0LmRpc3RhbmNlVG9TcXVhcmVkKHRoaXMuZW5kKX0sZGlzdGFuY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydC5kaXN0YW5jZVRvKHRoaXMuZW5kKX0sXG4gICAgYXQ6ZnVuY3Rpb24oYSxiKXtiPWJ8fG5ldyBwO3JldHVybiB0aGlzLmRlbHRhKGIpLm11bHRpcGx5U2NhbGFyKGEpLmFkZCh0aGlzLnN0YXJ0KX0sY2xvc2VzdFBvaW50VG9Qb2ludFBhcmFtZXRlcjpmdW5jdGlvbigpe3ZhciBhPW5ldyBwLGI9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7YS5zdWJWZWN0b3JzKGMsdGhpcy5zdGFydCk7Yi5zdWJWZWN0b3JzKHRoaXMuZW5kLHRoaXMuc3RhcnQpO2M9Yi5kb3QoYik7Yz1iLmRvdChhKS9jO2QmJihjPVEuY2xhbXAoYywwLDEpKTtyZXR1cm4gY319KCksY2xvc2VzdFBvaW50VG9Qb2ludDpmdW5jdGlvbihhLGIsYyl7YT10aGlzLmNsb3Nlc3RQb2ludFRvUG9pbnRQYXJhbWV0ZXIoYSxiKTtjPWN8fG5ldyBwO3JldHVybiB0aGlzLmRlbHRhKGMpLm11bHRpcGx5U2NhbGFyKGEpLmFkZCh0aGlzLnN0YXJ0KX0sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKGEpe3RoaXMuc3RhcnQuYXBwbHlNYXRyaXg0KGEpO3RoaXMuZW5kLmFwcGx5TWF0cml4NChhKTtcbiAgICByZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLnN0YXJ0LmVxdWFscyh0aGlzLnN0YXJ0KSYmYS5lbmQuZXF1YWxzKHRoaXMuZW5kKX19KTtPYmplY3QuYXNzaWduKFphLHtub3JtYWw6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYixjLGQsZSl7ZT1lfHxuZXcgcDtlLnN1YlZlY3RvcnMoZCxjKTthLnN1YlZlY3RvcnMoYixjKTtlLmNyb3NzKGEpO2I9ZS5sZW5ndGhTcSgpO3JldHVybiAwPGI/ZS5tdWx0aXBseVNjYWxhcigxL01hdGguc3FydChiKSk6ZS5zZXQoMCwwLDApfX0oKSxiYXJ5Y29vcmRGcm9tUG9pbnQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCxiPW5ldyBwLGM9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGQsZSxmLGcsaCl7YS5zdWJWZWN0b3JzKGcsZSk7Yi5zdWJWZWN0b3JzKGYsZSk7Yy5zdWJWZWN0b3JzKGQsZSk7ZD1hLmRvdChhKTtlPWEuZG90KGIpO2Y9YS5kb3QoYyk7dmFyIGs9Yi5kb3QoYik7Zz1iLmRvdChjKTt2YXIgbT1cbiAgICBkKmstZSplO2g9aHx8bmV3IHA7aWYoMD09PW0pcmV0dXJuIGguc2V0KC0yLC0xLC0xKTttPTEvbTtrPShrKmYtZSpnKSptO2Q9KGQqZy1lKmYpKm07cmV0dXJuIGguc2V0KDEtay1kLGQsayl9fSgpLGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oYixjLGQsZSl7Yj1aYS5iYXJ5Y29vcmRGcm9tUG9pbnQoYixjLGQsZSxhKTtyZXR1cm4gMDw9Yi54JiYwPD1iLnkmJjE+PWIueCtiLnl9fSgpfSk7T2JqZWN0LmFzc2lnbihaYS5wcm90b3R5cGUse3NldDpmdW5jdGlvbihhLGIsYyl7dGhpcy5hLmNvcHkoYSk7dGhpcy5iLmNvcHkoYik7dGhpcy5jLmNvcHkoYyk7cmV0dXJuIHRoaXN9LHNldEZyb21Qb2ludHNBbmRJbmRpY2VzOmZ1bmN0aW9uKGEsYixjLGQpe3RoaXMuYS5jb3B5KGFbYl0pO3RoaXMuYi5jb3B5KGFbY10pO3RoaXMuYy5jb3B5KGFbZF0pO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sXG4gICAgY29weTpmdW5jdGlvbihhKXt0aGlzLmEuY29weShhLmEpO3RoaXMuYi5jb3B5KGEuYik7dGhpcy5jLmNvcHkoYS5jKTtyZXR1cm4gdGhpc30sYXJlYTpmdW5jdGlvbigpe3ZhciBhPW5ldyBwLGI9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKCl7YS5zdWJWZWN0b3JzKHRoaXMuYyx0aGlzLmIpO2Iuc3ViVmVjdG9ycyh0aGlzLmEsdGhpcy5iKTtyZXR1cm4uNSphLmNyb3NzKGIpLmxlbmd0aCgpfX0oKSxtaWRwb2ludDpmdW5jdGlvbihhKXtyZXR1cm4oYXx8bmV3IHApLmFkZFZlY3RvcnModGhpcy5hLHRoaXMuYikuYWRkKHRoaXMuYykubXVsdGlwbHlTY2FsYXIoMS8zKX0sbm9ybWFsOmZ1bmN0aW9uKGEpe3JldHVybiBaYS5ub3JtYWwodGhpcy5hLHRoaXMuYix0aGlzLmMsYSl9LHBsYW5lOmZ1bmN0aW9uKGEpe3JldHVybihhfHxuZXcgRWEpLnNldEZyb21Db3BsYW5hclBvaW50cyh0aGlzLmEsdGhpcy5iLHRoaXMuYyl9LGJhcnljb29yZEZyb21Qb2ludDpmdW5jdGlvbihhLGIpe3JldHVybiBaYS5iYXJ5Y29vcmRGcm9tUG9pbnQoYSxcbiAgICB0aGlzLmEsdGhpcy5iLHRoaXMuYyxiKX0sY29udGFpbnNQb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gWmEuY29udGFpbnNQb2ludChhLHRoaXMuYSx0aGlzLmIsdGhpcy5jKX0sY2xvc2VzdFBvaW50VG9Qb2ludDpmdW5jdGlvbigpe3ZhciBhPW5ldyBFYSxiPVtuZXcgTmIsbmV3IE5iLG5ldyBOYl0sYz1uZXcgcCxkPW5ldyBwO3JldHVybiBmdW5jdGlvbihlLGYpe2Y9Znx8bmV3IHA7dmFyIGc9SW5maW5pdHk7YS5zZXRGcm9tQ29wbGFuYXJQb2ludHModGhpcy5hLHRoaXMuYix0aGlzLmMpO2EucHJvamVjdFBvaW50KGUsYyk7aWYoITA9PT10aGlzLmNvbnRhaW5zUG9pbnQoYykpZi5jb3B5KGMpO2Vsc2UgZm9yKGJbMF0uc2V0KHRoaXMuYSx0aGlzLmIpLGJbMV0uc2V0KHRoaXMuYix0aGlzLmMpLGJbMl0uc2V0KHRoaXMuYyx0aGlzLmEpLGU9MDtlPGIubGVuZ3RoO2UrKyl7YltlXS5jbG9zZXN0UG9pbnRUb1BvaW50KGMsITAsZCk7dmFyIGg9Yy5kaXN0YW5jZVRvU3F1YXJlZChkKTtcbiAgICBoPGcmJihnPWgsZi5jb3B5KGQpKX1yZXR1cm4gZn19KCksZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLmEuZXF1YWxzKHRoaXMuYSkmJmEuYi5lcXVhbHModGhpcy5iKSYmYS5jLmVxdWFscyh0aGlzLmMpfX0pO3JhLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoeC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpyYSxpc01lc2g6ITAsc2V0RHJhd01vZGU6ZnVuY3Rpb24oYSl7dGhpcy5kcmF3TW9kZT1hfSxjb3B5OmZ1bmN0aW9uKGEpe3gucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuZHJhd01vZGU9YS5kcmF3TW9kZTt2b2lkIDAhPT1hLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcyYmKHRoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzPWEubW9ycGhUYXJnZXRJbmZsdWVuY2VzLnNsaWNlKCkpO3ZvaWQgMCE9PWEubW9ycGhUYXJnZXREaWN0aW9uYXJ5JiYodGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnk9T2JqZWN0LmFzc2lnbih7fSxhLm1vcnBoVGFyZ2V0RGljdGlvbmFyeSkpO1xuICAgIHJldHVybiB0aGlzfSx1cGRhdGVNb3JwaFRhcmdldHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdlb21ldHJ5O2lmKGEuaXNCdWZmZXJHZW9tZXRyeSl7YT1hLm1vcnBoQXR0cmlidXRlczt2YXIgYj1PYmplY3Qua2V5cyhhKTtpZigwPGIubGVuZ3RoKXt2YXIgYz1hW2JbMF1dO2lmKHZvaWQgMCE9PWMpZm9yKHRoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzPVtdLHRoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5PXt9LGE9MCxiPWMubGVuZ3RoO2E8YjthKyspe3ZhciBkPWNbYV0ubmFtZXx8U3RyaW5nKGEpO3RoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzLnB1c2goMCk7dGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnlbZF09YX19fWVsc2UgaWYoYz1hLm1vcnBoVGFyZ2V0cyx2b2lkIDAhPT1jJiYwPGMubGVuZ3RoKWZvcih0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcz1bXSx0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeT17fSxhPTAsYj1jLmxlbmd0aDthPGI7YSsrKWQ9Y1thXS5uYW1lfHxcbiAgICBTdHJpbmcoYSksdGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXMucHVzaCgwKSx0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeVtkXT1hfSxyYXljYXN0OmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIsYyxkLGUsZixnKXtaYS5iYXJ5Y29vcmRGcm9tUG9pbnQoYSxiLGMsZCx2KTtlLm11bHRpcGx5U2NhbGFyKHYueCk7Zi5tdWx0aXBseVNjYWxhcih2LnkpO2cubXVsdGlwbHlTY2FsYXIodi56KTtlLmFkZChmKS5hZGQoZyk7cmV0dXJuIGUuY2xvbmUoKX1mdW5jdGlvbiBiKGEsYixjLGQsZSxmLGcsaCl7aWYobnVsbD09PSgxPT09Yi5zaWRlP2QuaW50ZXJzZWN0VHJpYW5nbGUoZyxmLGUsITAsaCk6ZC5pbnRlcnNlY3RUcmlhbmdsZShlLGYsZywyIT09Yi5zaWRlLGgpKSlyZXR1cm4gbnVsbDt6LmNvcHkoaCk7ei5hcHBseU1hdHJpeDQoYS5tYXRyaXhXb3JsZCk7Yj1jLnJheS5vcmlnaW4uZGlzdGFuY2VUbyh6KTtyZXR1cm4gYjxjLm5lYXJ8fGI+Yy5mYXI/bnVsbDp7ZGlzdGFuY2U6YixcbiAgICBwb2ludDp6LmNsb25lKCksb2JqZWN0OmF9fWZ1bmN0aW9uIGMoYyxkLGUsZixtLGwscSxuKXtnLmZyb21CdWZmZXJBdHRyaWJ1dGUoZixsKTtoLmZyb21CdWZmZXJBdHRyaWJ1dGUoZixxKTtrLmZyb21CdWZmZXJBdHRyaWJ1dGUoZixuKTtpZihjPWIoYyxjLm1hdGVyaWFsLGQsZSxnLGgsayx3KSltJiYodS5mcm9tQnVmZmVyQXR0cmlidXRlKG0sbCksci5mcm9tQnVmZmVyQXR0cmlidXRlKG0scSksdC5mcm9tQnVmZmVyQXR0cmlidXRlKG0sbiksYy51dj1hKHcsZyxoLGssdSxyLHQpKSxjLmZhY2U9bmV3IFlhKGwscSxuLFphLm5vcm1hbChnLGgsaykpLGMuZmFjZUluZGV4PWw7cmV0dXJuIGN9dmFyIGQ9bmV3IE8sZT1uZXcgc2IsZj1uZXcgSWEsZz1uZXcgcCxoPW5ldyBwLGs9bmV3IHAsbT1uZXcgcCxsPW5ldyBwLG49bmV3IHAsdT1uZXcgRCxyPW5ldyBELHQ9bmV3IEQsdj1uZXcgcCx3PW5ldyBwLHo9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKHEscCl7dmFyIHY9dGhpcy5nZW9tZXRyeSxcbiAgICB6PXRoaXMubWF0ZXJpYWwseT10aGlzLm1hdHJpeFdvcmxkO2lmKHZvaWQgMCE9PXomJihudWxsPT09di5ib3VuZGluZ1NwaGVyZSYmdi5jb21wdXRlQm91bmRpbmdTcGhlcmUoKSxmLmNvcHkodi5ib3VuZGluZ1NwaGVyZSksZi5hcHBseU1hdHJpeDQoeSksITEhPT1xLnJheS5pbnRlcnNlY3RzU3BoZXJlKGYpJiYoZC5nZXRJbnZlcnNlKHkpLGUuY29weShxLnJheSkuYXBwbHlNYXRyaXg0KGQpLG51bGw9PT12LmJvdW5kaW5nQm94fHwhMSE9PWUuaW50ZXJzZWN0c0JveCh2LmJvdW5kaW5nQm94KSkpKXt2YXIgeDtpZih2LmlzQnVmZmVyR2VvbWV0cnkpe3ZhciB6PXYuaW5kZXgsQj12LmF0dHJpYnV0ZXMucG9zaXRpb24seT12LmF0dHJpYnV0ZXMudXYsRDtpZihudWxsIT09eil7dmFyIEM9MDtmb3IoRD16LmNvdW50O0M8RDtDKz0zKXt2PXouZ2V0WChDKTt2YXIgST16LmdldFgoQysxKTt2YXIgRT16LmdldFgoQysyKTtpZih4PWModGhpcyxxLGUsQix5LHYsSSxFKSl4LmZhY2VJbmRleD1cbiAgICBNYXRoLmZsb29yKEMvMykscC5wdXNoKHgpfX1lbHNlIGlmKHZvaWQgMCE9PUIpZm9yKEM9MCxEPUIuY291bnQ7QzxEO0MrPTMpaWYodj1DLEk9QysxLEU9QysyLHg9Yyh0aGlzLHEsZSxCLHksdixJLEUpKXguaW5kZXg9dixwLnB1c2goeCl9ZWxzZSBpZih2LmlzR2VvbWV0cnkpe3ZhciB5PUFycmF5LmlzQXJyYXkoeik7Qz12LnZlcnRpY2VzO0Q9di5mYWNlcztJPXYuZmFjZVZlcnRleFV2c1swXTswPEkubGVuZ3RoJiYoQj1JKTtmb3IodmFyIEg9MCxLPUQubGVuZ3RoO0g8SztIKyspe3ZhciBOPURbSF07eD15P3pbTi5tYXRlcmlhbEluZGV4XTp6O2lmKHZvaWQgMCE9PXgpe0k9Q1tOLmFdO0U9Q1tOLmJdO3ZhciBMPUNbTi5jXTtpZighMD09PXgubW9ycGhUYXJnZXRzKXt2YXIgTT12Lm1vcnBoVGFyZ2V0cyxPPXRoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzO2cuc2V0KDAsMCwwKTtoLnNldCgwLDAsMCk7ay5zZXQoMCwwLDApO2Zvcih2YXIgUD0wLFE9TS5sZW5ndGg7UDxRO1ArKyl7dmFyIFI9XG4gICAgT1tQXTtpZigwIT09Uil7dmFyIFU9TVtQXS52ZXJ0aWNlcztnLmFkZFNjYWxlZFZlY3RvcihtLnN1YlZlY3RvcnMoVVtOLmFdLEkpLFIpO2guYWRkU2NhbGVkVmVjdG9yKGwuc3ViVmVjdG9ycyhVW04uYl0sRSksUik7ay5hZGRTY2FsZWRWZWN0b3Iobi5zdWJWZWN0b3JzKFVbTi5jXSxMKSxSKX19Zy5hZGQoSSk7aC5hZGQoRSk7ay5hZGQoTCk7ST1nO0U9aDtMPWt9aWYoeD1iKHRoaXMseCxxLGUsSSxFLEwsdykpQiYmQltIXSYmKE09QltIXSx1LmNvcHkoTVswXSksci5jb3B5KE1bMV0pLHQuY29weShNWzJdKSx4LnV2PWEodyxJLEUsTCx1LHIsdCkpLHguZmFjZT1OLHguZmFjZUluZGV4PUgscC5wdXNoKHgpfX19fX19KCksY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5nZW9tZXRyeSx0aGlzLm1hdGVyaWFsKSkuY29weSh0aGlzKX19KTt2YXIgeWc9MDtiYS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRhLnByb3RvdHlwZSksXG4gICAge2NvbnN0cnVjdG9yOmJhLGlzUGVyc3BlY3RpdmVDYW1lcmE6ITAsY29weTpmdW5jdGlvbihhLGIpe1RhLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhLGIpO3RoaXMuZm92PWEuZm92O3RoaXMuem9vbT1hLnpvb207dGhpcy5uZWFyPWEubmVhcjt0aGlzLmZhcj1hLmZhcjt0aGlzLmZvY3VzPWEuZm9jdXM7dGhpcy5hc3BlY3Q9YS5hc3BlY3Q7dGhpcy52aWV3PW51bGw9PT1hLnZpZXc/bnVsbDpPYmplY3QuYXNzaWduKHt9LGEudmlldyk7dGhpcy5maWxtR2F1Z2U9YS5maWxtR2F1Z2U7dGhpcy5maWxtT2Zmc2V0PWEuZmlsbU9mZnNldDtyZXR1cm4gdGhpc30sc2V0Rm9jYWxMZW5ndGg6ZnVuY3Rpb24oYSl7YT0uNSp0aGlzLmdldEZpbG1IZWlnaHQoKS9hO3RoaXMuZm92PTIqUS5SQUQyREVHKk1hdGguYXRhbihhKTt0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX0sZ2V0Rm9jYWxMZW5ndGg6ZnVuY3Rpb24oKXt2YXIgYT1NYXRoLnRhbiguNSpRLkRFRzJSQUQqdGhpcy5mb3YpO1xuICAgIHJldHVybi41KnRoaXMuZ2V0RmlsbUhlaWdodCgpL2F9LGdldEVmZmVjdGl2ZUZPVjpmdW5jdGlvbigpe3JldHVybiAyKlEuUkFEMkRFRypNYXRoLmF0YW4oTWF0aC50YW4oLjUqUS5ERUcyUkFEKnRoaXMuZm92KS90aGlzLnpvb20pfSxnZXRGaWxtV2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWxtR2F1Z2UqTWF0aC5taW4odGhpcy5hc3BlY3QsMSl9LGdldEZpbG1IZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWxtR2F1Z2UvTWF0aC5tYXgodGhpcy5hc3BlY3QsMSl9LHNldFZpZXdPZmZzZXQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMuYXNwZWN0PWEvYjtudWxsPT09dGhpcy52aWV3JiYodGhpcy52aWV3PXtlbmFibGVkOiEwLGZ1bGxXaWR0aDoxLGZ1bGxIZWlnaHQ6MSxvZmZzZXRYOjAsb2Zmc2V0WTowLHdpZHRoOjEsaGVpZ2h0OjF9KTt0aGlzLnZpZXcuZW5hYmxlZD0hMDt0aGlzLnZpZXcuZnVsbFdpZHRoPWE7dGhpcy52aWV3LmZ1bGxIZWlnaHQ9Yjt0aGlzLnZpZXcub2Zmc2V0WD1cbiAgICBjO3RoaXMudmlldy5vZmZzZXRZPWQ7dGhpcy52aWV3LndpZHRoPWU7dGhpcy52aWV3LmhlaWdodD1mO3RoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfSxjbGVhclZpZXdPZmZzZXQ6ZnVuY3Rpb24oKXtudWxsIT09dGhpcy52aWV3JiYodGhpcy52aWV3LmVuYWJsZWQ9ITEpO3RoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfSx1cGRhdGVQcm9qZWN0aW9uTWF0cml4OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5uZWFyLGI9YSpNYXRoLnRhbiguNSpRLkRFRzJSQUQqdGhpcy5mb3YpL3RoaXMuem9vbSxjPTIqYixkPXRoaXMuYXNwZWN0KmMsZT0tLjUqZCxmPXRoaXMudmlldztpZihudWxsIT09dGhpcy52aWV3JiZ0aGlzLnZpZXcuZW5hYmxlZCl2YXIgZz1mLmZ1bGxXaWR0aCxoPWYuZnVsbEhlaWdodCxlPWUrZi5vZmZzZXRYKmQvZyxiPWItZi5vZmZzZXRZKmMvaCxkPWYud2lkdGgvZypkLGM9Zi5oZWlnaHQvaCpjO2Y9dGhpcy5maWxtT2Zmc2V0OzAhPT1mJiYoZSs9YSpmL3RoaXMuZ2V0RmlsbVdpZHRoKCkpO1xuICAgIHRoaXMucHJvamVjdGlvbk1hdHJpeC5tYWtlUGVyc3BlY3RpdmUoZSxlK2QsYixiLWMsYSx0aGlzLmZhcil9LHRvSlNPTjpmdW5jdGlvbihhKXthPXgucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsYSk7YS5vYmplY3QuZm92PXRoaXMuZm92O2Eub2JqZWN0Lnpvb209dGhpcy56b29tO2Eub2JqZWN0Lm5lYXI9dGhpcy5uZWFyO2Eub2JqZWN0LmZhcj10aGlzLmZhcjthLm9iamVjdC5mb2N1cz10aGlzLmZvY3VzO2Eub2JqZWN0LmFzcGVjdD10aGlzLmFzcGVjdDtudWxsIT09dGhpcy52aWV3JiYoYS5vYmplY3Qudmlldz1PYmplY3QuYXNzaWduKHt9LHRoaXMudmlldykpO2Eub2JqZWN0LmZpbG1HYXVnZT10aGlzLmZpbG1HYXVnZTthLm9iamVjdC5maWxtT2Zmc2V0PXRoaXMuZmlsbU9mZnNldDtyZXR1cm4gYX19KTt1ZC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGJhLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOnVkLGlzQXJyYXlDYW1lcmE6ITB9KTtQYi5wcm90b3R5cGUuaXNGb2dFeHAyPVxuICAgICEwO1BiLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgUGIodGhpcy5jb2xvci5nZXRIZXgoKSx0aGlzLmRlbnNpdHkpfTtQYi5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue3R5cGU6XCJGb2dFeHAyXCIsY29sb3I6dGhpcy5jb2xvci5nZXRIZXgoKSxkZW5zaXR5OnRoaXMuZGVuc2l0eX19O1FiLnByb3RvdHlwZS5pc0ZvZz0hMDtRYi5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFFiKHRoaXMuY29sb3IuZ2V0SGV4KCksdGhpcy5uZWFyLHRoaXMuZmFyKX07UWIucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnt0eXBlOlwiRm9nXCIsY29sb3I6dGhpcy5jb2xvci5nZXRIZXgoKSxuZWFyOnRoaXMubmVhcixmYXI6dGhpcy5mYXJ9fTt2ZC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6dmQsY29weTpmdW5jdGlvbihhLGIpe3gucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLFxuICAgIGEsYik7bnVsbCE9PWEuYmFja2dyb3VuZCYmKHRoaXMuYmFja2dyb3VuZD1hLmJhY2tncm91bmQuY2xvbmUoKSk7bnVsbCE9PWEuZm9nJiYodGhpcy5mb2c9YS5mb2cuY2xvbmUoKSk7bnVsbCE9PWEub3ZlcnJpZGVNYXRlcmlhbCYmKHRoaXMub3ZlcnJpZGVNYXRlcmlhbD1hLm92ZXJyaWRlTWF0ZXJpYWwuY2xvbmUoKSk7dGhpcy5hdXRvVXBkYXRlPWEuYXV0b1VwZGF0ZTt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9YS5tYXRyaXhBdXRvVXBkYXRlO3JldHVybiB0aGlzfSx0b0pTT046ZnVuY3Rpb24oYSl7dmFyIGI9eC5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyxhKTtudWxsIT09dGhpcy5iYWNrZ3JvdW5kJiYoYi5vYmplY3QuYmFja2dyb3VuZD10aGlzLmJhY2tncm91bmQudG9KU09OKGEpKTtudWxsIT09dGhpcy5mb2cmJihiLm9iamVjdC5mb2c9dGhpcy5mb2cudG9KU09OKCkpO3JldHVybiBifX0pO2RlLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoeC5wcm90b3R5cGUpLFxuICAgIHtjb25zdHJ1Y3RvcjpkZSxpc0xlbnNGbGFyZTohMCxjb3B5OmZ1bmN0aW9uKGEpe3gucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMucG9zaXRpb25TY3JlZW4uY29weShhLnBvc2l0aW9uU2NyZWVuKTt0aGlzLmN1c3RvbVVwZGF0ZUNhbGxiYWNrPWEuY3VzdG9tVXBkYXRlQ2FsbGJhY2s7Zm9yKHZhciBiPTAsYz1hLmxlbnNGbGFyZXMubGVuZ3RoO2I8YztiKyspdGhpcy5sZW5zRmxhcmVzLnB1c2goYS5sZW5zRmxhcmVzW2JdKTtyZXR1cm4gdGhpc30sYWRkOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2b2lkIDA9PT1iJiYoYj0tMSk7dm9pZCAwPT09YyYmKGM9MCk7dm9pZCAwPT09ZiYmKGY9MSk7dm9pZCAwPT09ZSYmKGU9bmV3IEgoMTY3NzcyMTUpKTt2b2lkIDA9PT1kJiYoZD0xKTtjPU1hdGgubWluKGMsTWF0aC5tYXgoMCxjKSk7dGhpcy5sZW5zRmxhcmVzLnB1c2goe3RleHR1cmU6YSxzaXplOmIsZGlzdGFuY2U6Yyx4OjAseTowLHo6MCxzY2FsZToxLHJvdGF0aW9uOjAsXG4gICAgb3BhY2l0eTpmLGNvbG9yOmUsYmxlbmRpbmc6ZH0pfSx1cGRhdGVMZW5zRmxhcmVzOmZ1bmN0aW9uKCl7dmFyIGEsYj10aGlzLmxlbnNGbGFyZXMubGVuZ3RoLGM9MiotdGhpcy5wb3NpdGlvblNjcmVlbi54LGQ9MiotdGhpcy5wb3NpdGlvblNjcmVlbi55O2ZvcihhPTA7YTxiO2ErKyl7dmFyIGU9dGhpcy5sZW5zRmxhcmVzW2FdO2UueD10aGlzLnBvc2l0aW9uU2NyZWVuLngrYyplLmRpc3RhbmNlO2UueT10aGlzLnBvc2l0aW9uU2NyZWVuLnkrZCplLmRpc3RhbmNlO2Uud2FudGVkUm90YXRpb249ZS54Kk1hdGguUEkqLjI1O2Uucm90YXRpb24rPS4yNSooZS53YW50ZWRSb3RhdGlvbi1lLnJvdGF0aW9uKX19fSk7aGIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoUC5wcm90b3R5cGUpO2hiLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1oYjtoYi5wcm90b3R5cGUuaXNTcHJpdGVNYXRlcmlhbD0hMDtoYi5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtQLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxcbiAgICBhKTt0aGlzLmNvbG9yLmNvcHkoYS5jb2xvcik7dGhpcy5tYXA9YS5tYXA7dGhpcy5yb3RhdGlvbj1hLnJvdGF0aW9uO3JldHVybiB0aGlzfTtDYy5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6Q2MsaXNTcHJpdGU6ITAscmF5Y2FzdDpmdW5jdGlvbigpe3ZhciBhPW5ldyBwLGI9bmV3IHAsYz1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oZCxlKXtiLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLm1hdHJpeFdvcmxkKTtkLnJheS5jbG9zZXN0UG9pbnRUb1BvaW50KGIsYSk7Yy5zZXRGcm9tTWF0cml4U2NhbGUodGhpcy5tYXRyaXhXb3JsZCk7dmFyIGY9Yy54KmMueS80O2IuZGlzdGFuY2VUb1NxdWFyZWQoYSk+Znx8KGY9ZC5yYXkub3JpZ2luLmRpc3RhbmNlVG8oYSksZjxkLm5lYXJ8fGY+ZC5mYXJ8fGUucHVzaCh7ZGlzdGFuY2U6Zixwb2ludDphLmNsb25lKCksZmFjZTpudWxsLG9iamVjdDp0aGlzfSkpfX0oKSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLm1hdGVyaWFsKSkuY29weSh0aGlzKX19KTtcbiAgICBEYy5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6RGMsY29weTpmdW5jdGlvbihhKXt4LnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhLCExKTthPWEubGV2ZWxzO2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjO2IrKyl7dmFyIGQ9YVtiXTt0aGlzLmFkZExldmVsKGQub2JqZWN0LmNsb25lKCksZC5kaXN0YW5jZSl9cmV0dXJuIHRoaXN9LGFkZExldmVsOmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9MCk7Yj1NYXRoLmFicyhiKTtmb3IodmFyIGM9dGhpcy5sZXZlbHMsZD0wO2Q8Yy5sZW5ndGgmJiEoYjxjW2RdLmRpc3RhbmNlKTtkKyspO2Muc3BsaWNlKGQsMCx7ZGlzdGFuY2U6YixvYmplY3Q6YX0pO3RoaXMuYWRkKGEpfSxnZXRPYmplY3RGb3JEaXN0YW5jZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5sZXZlbHMsYz0xLGQ9Yi5sZW5ndGg7YzxkJiYhKGE8YltjXS5kaXN0YW5jZSk7YysrKTtyZXR1cm4gYltjLVxuICAgIDFdLm9iamVjdH0scmF5Y2FzdDpmdW5jdGlvbigpe3ZhciBhPW5ldyBwO3JldHVybiBmdW5jdGlvbihiLGMpe2Euc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubWF0cml4V29ybGQpO3ZhciBkPWIucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKGEpO3RoaXMuZ2V0T2JqZWN0Rm9yRGlzdGFuY2UoZCkucmF5Y2FzdChiLGMpfX0oKSx1cGRhdGU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCxiPW5ldyBwO3JldHVybiBmdW5jdGlvbihjKXt2YXIgZD10aGlzLmxldmVscztpZigxPGQubGVuZ3RoKXthLnNldEZyb21NYXRyaXhQb3NpdGlvbihjLm1hdHJpeFdvcmxkKTtiLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLm1hdHJpeFdvcmxkKTtjPWEuZGlzdGFuY2VUbyhiKTtkWzBdLm9iamVjdC52aXNpYmxlPSEwO2Zvcih2YXIgZT0xLGY9ZC5sZW5ndGg7ZTxmO2UrKylpZihjPj1kW2VdLmRpc3RhbmNlKWRbZS0xXS5vYmplY3QudmlzaWJsZT0hMSxkW2VdLm9iamVjdC52aXNpYmxlPSEwO2Vsc2UgYnJlYWs7XG4gICAgZm9yKDtlPGY7ZSsrKWRbZV0ub2JqZWN0LnZpc2libGU9ITF9fX0oKSx0b0pTT046ZnVuY3Rpb24oYSl7YT14LnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLGEpO2Eub2JqZWN0LmxldmVscz1bXTtmb3IodmFyIGI9dGhpcy5sZXZlbHMsYz0wLGQ9Yi5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9YltjXTthLm9iamVjdC5sZXZlbHMucHVzaCh7b2JqZWN0OmUub2JqZWN0LnV1aWQsZGlzdGFuY2U6ZS5kaXN0YW5jZX0pfXJldHVybiBhfX0pO09iamVjdC5hc3NpZ24oRWMucHJvdG90eXBlLHtjYWxjdWxhdGVJbnZlcnNlczpmdW5jdGlvbigpe3RoaXMuYm9uZUludmVyc2VzPVtdO2Zvcih2YXIgYT0wLGI9dGhpcy5ib25lcy5sZW5ndGg7YTxiO2ErKyl7dmFyIGM9bmV3IE87dGhpcy5ib25lc1thXSYmYy5nZXRJbnZlcnNlKHRoaXMuYm9uZXNbYV0ubWF0cml4V29ybGQpO3RoaXMuYm9uZUludmVyc2VzLnB1c2goYyl9fSxwb3NlOmZ1bmN0aW9uKCl7dmFyIGEsYjt2YXIgYz0wO2ZvcihiPXRoaXMuYm9uZXMubGVuZ3RoO2M8XG4gICAgYjtjKyspKGE9dGhpcy5ib25lc1tjXSkmJmEubWF0cml4V29ybGQuZ2V0SW52ZXJzZSh0aGlzLmJvbmVJbnZlcnNlc1tjXSk7Yz0wO2ZvcihiPXRoaXMuYm9uZXMubGVuZ3RoO2M8YjtjKyspaWYoYT10aGlzLmJvbmVzW2NdKWEucGFyZW50JiZhLnBhcmVudC5pc0JvbmU/KGEubWF0cml4LmdldEludmVyc2UoYS5wYXJlbnQubWF0cml4V29ybGQpLGEubWF0cml4Lm11bHRpcGx5KGEubWF0cml4V29ybGQpKTphLm1hdHJpeC5jb3B5KGEubWF0cml4V29ybGQpLGEubWF0cml4LmRlY29tcG9zZShhLnBvc2l0aW9uLGEucXVhdGVybmlvbixhLnNjYWxlKX0sdXBkYXRlOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE8sYj1uZXcgTztyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIGM9dGhpcy5ib25lcyxkPXRoaXMuYm9uZUludmVyc2VzLGU9dGhpcy5ib25lTWF0cmljZXMsZj10aGlzLmJvbmVUZXh0dXJlLGc9MCxoPWMubGVuZ3RoO2c8aDtnKyspYS5tdWx0aXBseU1hdHJpY2VzKGNbZ10/Y1tnXS5tYXRyaXhXb3JsZDpcbiAgICBiLGRbZ10pLGEudG9BcnJheShlLDE2KmcpO3ZvaWQgMCE9PWYmJihmLm5lZWRzVXBkYXRlPSEwKX19KCksY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEVjKHRoaXMuYm9uZXMsdGhpcy5ib25lSW52ZXJzZXMpfX0pO3dkLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoeC5wcm90b3R5cGUpLHtjb25zdHJ1Y3Rvcjp3ZCxpc0JvbmU6ITB9KTt4ZC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHJhLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOnhkLGlzU2tpbm5lZE1lc2g6ITAsaW5pdEJvbmVzOmZ1bmN0aW9uKCl7dmFyIGE9W10sYjtpZih0aGlzLmdlb21ldHJ5JiZ2b2lkIDAhPT10aGlzLmdlb21ldHJ5LmJvbmVzKXt2YXIgYz0wO2ZvcihiPXRoaXMuZ2VvbWV0cnkuYm9uZXMubGVuZ3RoO2M8YjtjKyspe3ZhciBkPXRoaXMuZ2VvbWV0cnkuYm9uZXNbY107dmFyIGU9bmV3IHdkO2EucHVzaChlKTtlLm5hbWU9ZC5uYW1lO2UucG9zaXRpb24uZnJvbUFycmF5KGQucG9zKTtcbiAgICBlLnF1YXRlcm5pb24uZnJvbUFycmF5KGQucm90cSk7dm9pZCAwIT09ZC5zY2wmJmUuc2NhbGUuZnJvbUFycmF5KGQuc2NsKX1jPTA7Zm9yKGI9dGhpcy5nZW9tZXRyeS5ib25lcy5sZW5ndGg7YzxiO2MrKylkPXRoaXMuZ2VvbWV0cnkuYm9uZXNbY10sLTEhPT1kLnBhcmVudCYmbnVsbCE9PWQucGFyZW50JiZ2b2lkIDAhPT1hW2QucGFyZW50XT9hW2QucGFyZW50XS5hZGQoYVtjXSk6dGhpcy5hZGQoYVtjXSl9dGhpcy51cGRhdGVNYXRyaXhXb3JsZCghMCk7cmV0dXJuIGF9LGJpbmQ6ZnVuY3Rpb24oYSxiKXt0aGlzLnNrZWxldG9uPWE7dm9pZCAwPT09YiYmKHRoaXMudXBkYXRlTWF0cml4V29ybGQoITApLHRoaXMuc2tlbGV0b24uY2FsY3VsYXRlSW52ZXJzZXMoKSxiPXRoaXMubWF0cml4V29ybGQpO3RoaXMuYmluZE1hdHJpeC5jb3B5KGIpO3RoaXMuYmluZE1hdHJpeEludmVyc2UuZ2V0SW52ZXJzZShiKX0scG9zZTpmdW5jdGlvbigpe3RoaXMuc2tlbGV0b24ucG9zZSgpfSxub3JtYWxpemVTa2luV2VpZ2h0czpmdW5jdGlvbigpe3ZhciBhO1xuICAgIGlmKHRoaXMuZ2VvbWV0cnkmJnRoaXMuZ2VvbWV0cnkuaXNHZW9tZXRyeSlmb3IoYT0wO2E8dGhpcy5nZW9tZXRyeS5za2luV2VpZ2h0cy5sZW5ndGg7YSsrKXt2YXIgYj10aGlzLmdlb21ldHJ5LnNraW5XZWlnaHRzW2FdO3ZhciBjPTEvYi5tYW5oYXR0YW5MZW5ndGgoKTtJbmZpbml0eSE9PWM/Yi5tdWx0aXBseVNjYWxhcihjKTpiLnNldCgxLDAsMCwwKX1lbHNlIGlmKHRoaXMuZ2VvbWV0cnkmJnRoaXMuZ2VvbWV0cnkuaXNCdWZmZXJHZW9tZXRyeSl7dmFyIGI9bmV3IGFhLGQ9dGhpcy5nZW9tZXRyeS5hdHRyaWJ1dGVzLnNraW5XZWlnaHQ7Zm9yKGE9MDthPGQuY291bnQ7YSsrKWIueD1kLmdldFgoYSksYi55PWQuZ2V0WShhKSxiLno9ZC5nZXRaKGEpLGIudz1kLmdldFcoYSksYz0xL2IubWFuaGF0dGFuTGVuZ3RoKCksSW5maW5pdHkhPT1jP2IubXVsdGlwbHlTY2FsYXIoYyk6Yi5zZXQoMSwwLDAsMCksZC5zZXRYWVpXKGEsYi54LGIueSxiLnosYi53KX19LHVwZGF0ZU1hdHJpeFdvcmxkOmZ1bmN0aW9uKGEpe3JhLnByb3RvdHlwZS51cGRhdGVNYXRyaXhXb3JsZC5jYWxsKHRoaXMsXG4gICAgYSk7XCJhdHRhY2hlZFwiPT09dGhpcy5iaW5kTW9kZT90aGlzLmJpbmRNYXRyaXhJbnZlcnNlLmdldEludmVyc2UodGhpcy5tYXRyaXhXb3JsZCk6XCJkZXRhY2hlZFwiPT09dGhpcy5iaW5kTW9kZT90aGlzLmJpbmRNYXRyaXhJbnZlcnNlLmdldEludmVyc2UodGhpcy5iaW5kTWF0cml4KTpjb25zb2xlLndhcm4oXCJUSFJFRS5Ta2lubmVkTWVzaDogVW5yZWNvZ25pemVkIGJpbmRNb2RlOiBcIit0aGlzLmJpbmRNb2RlKX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5nZW9tZXRyeSx0aGlzLm1hdGVyaWFsKSkuY29weSh0aGlzKX19KTtXLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFAucHJvdG90eXBlKTtXLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1XO1cucHJvdG90eXBlLmlzTGluZUJhc2ljTWF0ZXJpYWw9ITA7Vy5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtQLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmNvbG9yLmNvcHkoYS5jb2xvcik7XG4gICAgdGhpcy5saW5ld2lkdGg9YS5saW5ld2lkdGg7dGhpcy5saW5lY2FwPWEubGluZWNhcDt0aGlzLmxpbmVqb2luPWEubGluZWpvaW47cmV0dXJuIHRoaXN9O3NhLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoeC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpzYSxpc0xpbmU6ITAscmF5Y2FzdDpmdW5jdGlvbigpe3ZhciBhPW5ldyBPLGI9bmV3IHNiLGM9bmV3IElhO3JldHVybiBmdW5jdGlvbihkLGUpe3ZhciBmPWQubGluZVByZWNpc2lvbixmPWYqZixnPXRoaXMuZ2VvbWV0cnksaD10aGlzLm1hdHJpeFdvcmxkO251bGw9PT1nLmJvdW5kaW5nU3BoZXJlJiZnLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO2MuY29weShnLmJvdW5kaW5nU3BoZXJlKTtjLmFwcGx5TWF0cml4NChoKTtpZighMSE9PWQucmF5LmludGVyc2VjdHNTcGhlcmUoYykpe2EuZ2V0SW52ZXJzZShoKTtiLmNvcHkoZC5yYXkpLmFwcGx5TWF0cml4NChhKTt2YXIgaz1uZXcgcCxtPW5ldyBwLGg9bmV3IHAsXG4gICAgbD1uZXcgcCxuPXRoaXMmJnRoaXMuaXNMaW5lU2VnbWVudHM/MjoxO2lmKGcuaXNCdWZmZXJHZW9tZXRyeSl7dmFyIHU9Zy5pbmRleDt2YXIgcj1nLmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXk7aWYobnVsbCE9PXUpZm9yKHZhciB0PXUuYXJyYXksZz0wLHY9dC5sZW5ndGgtMTtnPHY7Zys9bil1PXRbZysxXSxrLmZyb21BcnJheShyLDMqdFtnXSksbS5mcm9tQXJyYXkociwzKnUpLHU9Yi5kaXN0YW5jZVNxVG9TZWdtZW50KGssbSxsLGgpLHU+Znx8KGwuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpLHU9ZC5yYXkub3JpZ2luLmRpc3RhbmNlVG8obCksdTxkLm5lYXJ8fHU+ZC5mYXJ8fGUucHVzaCh7ZGlzdGFuY2U6dSxwb2ludDpoLmNsb25lKCkuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpLGluZGV4OmcsZmFjZTpudWxsLGZhY2VJbmRleDpudWxsLG9iamVjdDp0aGlzfSkpO2Vsc2UgZm9yKGc9MCx2PXIubGVuZ3RoLzMtMTtnPHY7Zys9bilrLmZyb21BcnJheShyLFxuICAgIDMqZyksbS5mcm9tQXJyYXkociwzKmcrMyksdT1iLmRpc3RhbmNlU3FUb1NlZ21lbnQoayxtLGwsaCksdT5mfHwobC5hcHBseU1hdHJpeDQodGhpcy5tYXRyaXhXb3JsZCksdT1kLnJheS5vcmlnaW4uZGlzdGFuY2VUbyhsKSx1PGQubmVhcnx8dT5kLmZhcnx8ZS5wdXNoKHtkaXN0YW5jZTp1LHBvaW50OmguY2xvbmUoKS5hcHBseU1hdHJpeDQodGhpcy5tYXRyaXhXb3JsZCksaW5kZXg6ZyxmYWNlOm51bGwsZmFjZUluZGV4Om51bGwsb2JqZWN0OnRoaXN9KSl9ZWxzZSBpZihnLmlzR2VvbWV0cnkpZm9yKGs9Zy52ZXJ0aWNlcyxtPWsubGVuZ3RoLGc9MDtnPG0tMTtnKz1uKXU9Yi5kaXN0YW5jZVNxVG9TZWdtZW50KGtbZ10sa1tnKzFdLGwsaCksdT5mfHwobC5hcHBseU1hdHJpeDQodGhpcy5tYXRyaXhXb3JsZCksdT1kLnJheS5vcmlnaW4uZGlzdGFuY2VUbyhsKSx1PGQubmVhcnx8dT5kLmZhcnx8ZS5wdXNoKHtkaXN0YW5jZTp1LHBvaW50OmguY2xvbmUoKS5hcHBseU1hdHJpeDQodGhpcy5tYXRyaXhXb3JsZCksXG4gICAgaW5kZXg6ZyxmYWNlOm51bGwsZmFjZUluZGV4Om51bGwsb2JqZWN0OnRoaXN9KSl9fX0oKSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLmdlb21ldHJ5LHRoaXMubWF0ZXJpYWwpKS5jb3B5KHRoaXMpfX0pO1gucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShzYS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpYLGlzTGluZVNlZ21lbnRzOiEwfSk7eWQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShzYS5wcm90b3R5cGUpLHtjb25zdHJ1Y3Rvcjp5ZCxpc0xpbmVMb29wOiEwfSk7S2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoUC5wcm90b3R5cGUpO0thLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1LYTtLYS5wcm90b3R5cGUuaXNQb2ludHNNYXRlcmlhbD0hMDtLYS5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtQLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmNvbG9yLmNvcHkoYS5jb2xvcik7XG4gICAgdGhpcy5tYXA9YS5tYXA7dGhpcy5zaXplPWEuc2l6ZTt0aGlzLnNpemVBdHRlbnVhdGlvbj1hLnNpemVBdHRlbnVhdGlvbjtyZXR1cm4gdGhpc307UmIucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh4LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlJiLGlzUG9pbnRzOiEwLHJheWNhc3Q6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgTyxiPW5ldyBzYixjPW5ldyBJYTtyZXR1cm4gZnVuY3Rpb24oZCxlKXtmdW5jdGlvbiBmKGEsYyl7dmFyIGY9Yi5kaXN0YW5jZVNxVG9Qb2ludChhKTtpZihmPGwpe2E9Yi5jbG9zZXN0UG9pbnRUb1BvaW50KGEpO2EuYXBwbHlNYXRyaXg0KGspO3ZhciBoPWQucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKGEpO2g8ZC5uZWFyfHxoPmQuZmFyfHxlLnB1c2goe2Rpc3RhbmNlOmgsZGlzdGFuY2VUb1JheTpNYXRoLnNxcnQoZikscG9pbnQ6YS5jbG9uZSgpLGluZGV4OmMsZmFjZTpudWxsLG9iamVjdDpnfSl9fXZhciBnPXRoaXMsaD10aGlzLmdlb21ldHJ5LFxuICAgIGs9dGhpcy5tYXRyaXhXb3JsZCxtPWQucGFyYW1zLlBvaW50cy50aHJlc2hvbGQ7bnVsbD09PWguYm91bmRpbmdTcGhlcmUmJmguY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7Yy5jb3B5KGguYm91bmRpbmdTcGhlcmUpO2MuYXBwbHlNYXRyaXg0KGspO2MucmFkaXVzKz1tO2lmKCExIT09ZC5yYXkuaW50ZXJzZWN0c1NwaGVyZShjKSl7YS5nZXRJbnZlcnNlKGspO2IuY29weShkLnJheSkuYXBwbHlNYXRyaXg0KGEpO3ZhciBtPW0vKCh0aGlzLnNjYWxlLngrdGhpcy5zY2FsZS55K3RoaXMuc2NhbGUueikvMyksbD1tKm0sbT1uZXcgcDtpZihoLmlzQnVmZmVyR2VvbWV0cnkpe3ZhciBuPWguaW5kZXgsaD1oLmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXk7aWYobnVsbCE9PW4pZm9yKHZhciB1PW4uYXJyYXksbj0wLHI9dS5sZW5ndGg7bjxyO24rKyl7dmFyIHQ9dVtuXTttLmZyb21BcnJheShoLDMqdCk7ZihtLHQpfWVsc2UgZm9yKG49MCx1PWgubGVuZ3RoLzM7bjx1O24rKyltLmZyb21BcnJheShoLFxuICAgIDMqbiksZihtLG4pfWVsc2UgZm9yKG09aC52ZXJ0aWNlcyxuPTAsdT1tLmxlbmd0aDtuPHU7bisrKWYobVtuXSxuKX19fSgpLGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuZ2VvbWV0cnksdGhpcy5tYXRlcmlhbCkpLmNvcHkodGhpcyl9fSk7RmMucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh4LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkZjLGlzR3JvdXA6ITB9KTtlZS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFUucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6ZWUsaXNWaWRlb1RleHR1cmU6ITAsdXBkYXRlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pbWFnZTthLnJlYWR5U3RhdGU+PWEuSEFWRV9DVVJSRU5UX0RBVEEmJih0aGlzLm5lZWRzVXBkYXRlPSEwKX19KTtTYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShVLnByb3RvdHlwZSk7U2IucHJvdG90eXBlLmNvbnN0cnVjdG9yPVNiO1NiLnByb3RvdHlwZS5pc0NvbXByZXNzZWRUZXh0dXJlPVxuICAgICEwO0djLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFUucHJvdG90eXBlKTtHYy5wcm90b3R5cGUuY29uc3RydWN0b3I9R2M7R2MucHJvdG90eXBlLmlzRGVwdGhUZXh0dXJlPSEwO1RiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEUucHJvdG90eXBlKTtUYi5wcm90b3R5cGUuY29uc3RydWN0b3I9VGI7SGMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTC5wcm90b3R5cGUpO0hjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1IYztVYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFLnByb3RvdHlwZSk7VWIucHJvdG90eXBlLmNvbnN0cnVjdG9yPVViO0ljLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEwucHJvdG90eXBlKTtJYy5wcm90b3R5cGUuY29uc3RydWN0b3I9SWM7amEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRS5wcm90b3R5cGUpO2phLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1qYTtKYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShMLnByb3RvdHlwZSk7SmMucHJvdG90eXBlLmNvbnN0cnVjdG9yPVxuICAgIEpjO1ZiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGphLnByb3RvdHlwZSk7VmIucHJvdG90eXBlLmNvbnN0cnVjdG9yPVZiO0tjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEwucHJvdG90eXBlKTtLYy5wcm90b3R5cGUuY29uc3RydWN0b3I9S2M7dWIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoamEucHJvdG90eXBlKTt1Yi5wcm90b3R5cGUuY29uc3RydWN0b3I9dWI7TGMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTC5wcm90b3R5cGUpO0xjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1MYztXYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShqYS5wcm90b3R5cGUpO1diLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1XYjtNYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShMLnByb3RvdHlwZSk7TWMucHJvdG90eXBlLmNvbnN0cnVjdG9yPU1jO1hiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGphLnByb3RvdHlwZSk7WGIucHJvdG90eXBlLmNvbnN0cnVjdG9yPVhiO05jLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEwucHJvdG90eXBlKTtcbiAgICBOYy5wcm90b3R5cGUuY29uc3RydWN0b3I9TmM7WWIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRS5wcm90b3R5cGUpO1liLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1ZYjtPYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShMLnByb3RvdHlwZSk7T2MucHJvdG90eXBlLmNvbnN0cnVjdG9yPU9jO1piLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEUucHJvdG90eXBlKTtaYi5wcm90b3R5cGUuY29uc3RydWN0b3I9WmI7UGMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTC5wcm90b3R5cGUpO1BjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1QYzskYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFLnByb3RvdHlwZSk7JGIucHJvdG90eXBlLmNvbnN0cnVjdG9yPSRiO3ZhciBMZz17dHJpYW5ndWxhdGU6ZnVuY3Rpb24oYSxiLGMpe2M9Y3x8Mjt2YXIgZD1iJiZiLmxlbmd0aCxlPWQ/YlswXSpjOmEubGVuZ3RoLGY9YmYoYSwwLGUsYywhMCksZz1bXTtpZighZilyZXR1cm4gZzt2YXIgaDtpZihkKXt2YXIgaz1cbiAgICBjLGQ9W10sbTt2YXIgbD0wO2ZvcihtPWIubGVuZ3RoO2w8bTtsKyspe3ZhciBuPWJbbF0qazt2YXIgcD1sPG0tMT9iW2wrMV0qazphLmxlbmd0aDtuPWJmKGEsbixwLGssITEpO249PT1uLm5leHQmJihuLnN0ZWluZXI9ITApO2QucHVzaChKZyhuKSl9ZC5zb3J0KEhnKTtmb3IobD0wO2w8ZC5sZW5ndGg7bCsrKXtiPWRbbF07az1mO2lmKGs9SWcoYixrKSliPWVmKGssYiksUmMoYixiLm5leHQpO2Y9UmMoZixmLm5leHQpfX1pZihhLmxlbmd0aD44MCpjKXt2YXIgcj1oPWFbMF07dmFyIHQ9ZD1hWzFdO2ZvcihrPWM7azxlO2srPWMpbD1hW2tdLGI9YVtrKzFdLGw8ciYmKHI9bCksYjx0JiYodD1iKSxsPmgmJihoPWwpLGI+ZCYmKGQ9Yik7aD1NYXRoLm1heChoLXIsZC10KTtoPTAhPT1oPzEvaDowfVNjKGYsZyxjLHIsdCxoKTtyZXR1cm4gZ319LCRhPXthcmVhOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aCxjPTAsZD1iLTEsZT0wO2U8YjtkPWUrKyljKz1hW2RdLngqYVtlXS55LVxuICAgIGFbZV0ueCphW2RdLnk7cmV0dXJuLjUqY30saXNDbG9ja1dpc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIDA+JGEuYXJlYShhKX0sdHJpYW5ndWxhdGVTaGFwZTpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7dmFyIGI9YS5sZW5ndGg7MjxiJiZhW2ItMV0uZXF1YWxzKGFbMF0pJiZhLnBvcCgpfWZ1bmN0aW9uIGQoYSxiKXtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKylhLnB1c2goYltjXS54KSxhLnB1c2goYltjXS55KX12YXIgZT1bXSxmPVtdLGc9W107YyhhKTtkKGUsYSk7dmFyIGg9YS5sZW5ndGg7Yi5mb3JFYWNoKGMpO2ZvcihhPTA7YTxiLmxlbmd0aDthKyspZi5wdXNoKGgpLGgrPWJbYV0ubGVuZ3RoLGQoZSxiW2FdKTtiPUxnLnRyaWFuZ3VsYXRlKGUsZik7Zm9yKGE9MDthPGIubGVuZ3RoO2ErPTMpZy5wdXNoKGIuc2xpY2UoYSxhKzMpKTtyZXR1cm4gZ319O2liLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEwucHJvdG90eXBlKTtpYi5wcm90b3R5cGUuY29uc3RydWN0b3I9aWI7XG4gICAgTGEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRS5wcm90b3R5cGUpO0xhLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1MYTtMYS5wcm90b3R5cGUuZ2V0QXJyYXlzPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiKSxhPWE/QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYS5hcnJheSk6W10sYj10aGlzLmdldEF0dHJpYnV0ZShcInV2XCIpLGI9Yj9BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChiLmFycmF5KTpbXSxjPXRoaXMuaW5kZXgsYz1jP0FycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGMuYXJyYXkpOltdO3JldHVybntwb3NpdGlvbjphLHV2OmIsaW5kZXg6Y319O0xhLnByb3RvdHlwZS5hZGRTaGFwZUxpc3Q9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmxlbmd0aDtiLmFycmF5cz10aGlzLmdldEFycmF5cygpO2Zvcih2YXIgZD0wO2Q8YztkKyspdGhpcy5hZGRTaGFwZShhW2RdLGIpO3RoaXMuc2V0SW5kZXgoYi5hcnJheXMuaW5kZXgpO3RoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixcbiAgICBuZXcgQihiLmFycmF5cy5wb3NpdGlvbiwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBCKGIuYXJyYXlzLnV2LDIpKX07TGEucHJvdG90eXBlLmFkZFNoYXBlPWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhLGIsYyl7Ynx8Y29uc29sZS5lcnJvcihcIlRIUkVFLkV4dHJ1ZGVHZW9tZXRyeTogdmVjIGRvZXMgbm90IGV4aXN0XCIpO3JldHVybiBiLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoYykuYWRkKGEpfWZ1bmN0aW9uIGQoYSxiLGMpe3ZhciBkPWEueC1iLng7dmFyIGU9YS55LWIueTt2YXIgZj1jLngtYS54O3ZhciBnPWMueS1hLnksaD1kKmQrZSplO2lmKE1hdGguYWJzKGQqZy1lKmYpPk51bWJlci5FUFNJTE9OKXt2YXIgaz1NYXRoLnNxcnQoaCksbT1NYXRoLnNxcnQoZipmK2cqZyksaD1iLngtZS9rO2I9Yi55K2QvaztnPSgoYy54LWcvbS1oKSpnLShjLnkrZi9tLWIpKmYpLyhkKmctZSpmKTtmPWgrZCpnLWEueDtkPWIrZSpnLWEueTtlPWYqZitkKmQ7aWYoMj49ZSlyZXR1cm4gbmV3IEQoZixcbiAgICBkKTtlPU1hdGguc3FydChlLzIpfWVsc2UgYT0hMSxkPk51bWJlci5FUFNJTE9OP2Y+TnVtYmVyLkVQU0lMT04mJihhPSEwKTpkPC1OdW1iZXIuRVBTSUxPTj9mPC1OdW1iZXIuRVBTSUxPTiYmKGE9ITApOk1hdGguc2lnbihlKT09PU1hdGguc2lnbihnKSYmKGE9ITApLGE/KGY9LWUsZT1NYXRoLnNxcnQoaCkpOihmPWQsZD1lLGU9TWF0aC5zcXJ0KGgvMikpO3JldHVybiBuZXcgRChmL2UsZC9lKX1mdW5jdGlvbiBlKGEsYil7Zm9yKEc9YS5sZW5ndGg7MDw9LS1HOyl7dmFyIGM9Rzt2YXIgZD1HLTE7MD5kJiYoZD1hLmxlbmd0aC0xKTt2YXIgZSxmPXgrMip3O2ZvcihlPTA7ZTxmO2UrKyl7dmFyIGc9WCplLG09WCooZSsxKSxuPWIrZCtnLHE9YitkK20sbT1iK2MrbTtoKGIrYytnKTtoKG4pO2gobSk7aChuKTtoKHEpO2gobSk7Zz1sLmxlbmd0aC8zO2c9RS5nZW5lcmF0ZVNpZGVXYWxsVVYoUyxsLGctNixnLTMsZy0yLGctMSk7ayhnWzBdKTtrKGdbMV0pO2soZ1szXSk7ayhnWzFdKTtcbiAgICBrKGdbMl0pO2soZ1szXSl9fX1mdW5jdGlvbiBmKGEsYixjKXtyLnB1c2goYSk7ci5wdXNoKGIpO3IucHVzaChjKX1mdW5jdGlvbiBnKGEsYixjKXtoKGEpO2goYik7aChjKTthPWwubGVuZ3RoLzM7YT1FLmdlbmVyYXRlVG9wVVYoUyxsLGEtMyxhLTIsYS0xKTtrKGFbMF0pO2soYVsxXSk7ayhhWzJdKX1mdW5jdGlvbiBoKGEpe24ucHVzaChsLmxlbmd0aC8zKTtsLnB1c2goclszKmErMF0pO2wucHVzaChyWzMqYSsxXSk7bC5wdXNoKHJbMyphKzJdKX1mdW5jdGlvbiBrKGEpe3UucHVzaChhLngpO3UucHVzaChhLnkpfXZhciBtPWIuYXJyYXlzP2IuYXJyYXlzOnRoaXMuZ2V0QXJyYXlzKCksbD1tLnBvc2l0aW9uLG49bS5pbmRleCx1PW0udXYscj1bXSxtPXZvaWQgMCE9PWIuYW1vdW50P2IuYW1vdW50OjEwMCx0PXZvaWQgMCE9PWIuYmV2ZWxUaGlja25lc3M/Yi5iZXZlbFRoaWNrbmVzczo2LHY9dm9pZCAwIT09Yi5iZXZlbFNpemU/Yi5iZXZlbFNpemU6dC0yLHc9dm9pZCAwIT09Yi5iZXZlbFNlZ21lbnRzP1xuICAgIGIuYmV2ZWxTZWdtZW50czozLHo9dm9pZCAwIT09Yi5iZXZlbEVuYWJsZWQ/Yi5iZXZlbEVuYWJsZWQ6ITAseT12b2lkIDAhPT1iLmN1cnZlU2VnbWVudHM/Yi5jdXJ2ZVNlZ21lbnRzOjEyLHg9dm9pZCAwIT09Yi5zdGVwcz9iLnN0ZXBzOjEsQT1iLmV4dHJ1ZGVQYXRoLEM9ITEsRT12b2lkIDAhPT1iLlVWR2VuZXJhdG9yP2IuVVZHZW5lcmF0b3I6aWIuV29ybGRVVkdlbmVyYXRvcjtpZihBKXt2YXIgSD1BLmdldFNwYWNlZFBvaW50cyh4KTtDPSEwO3o9ITE7dmFyIEs9dm9pZCAwIT09Yi5mcmFtZXM/Yi5mcmFtZXM6QS5jb21wdXRlRnJlbmV0RnJhbWVzKHgsITEpO3ZhciBMPW5ldyBwO3ZhciBNPW5ldyBwO3ZhciBQPW5ldyBwfXp8fCh2PXQ9dz0wKTt2YXIgTyxTPXRoaXMseT1hLmV4dHJhY3RQb2ludHMoeSk7YT15LnNoYXBlO3ZhciBRPXkuaG9sZXM7aWYoISRhLmlzQ2xvY2tXaXNlKGEpKXthPWEucmV2ZXJzZSgpO3ZhciBOPTA7Zm9yKE89US5sZW5ndGg7TjxPO04rKyl7dmFyIFI9XG4gICAgUVtOXTskYS5pc0Nsb2NrV2lzZShSKSYmKFFbTl09Ui5yZXZlcnNlKCkpfX12YXIgVT0kYS50cmlhbmd1bGF0ZVNoYXBlKGEsUSksVz1hO049MDtmb3IoTz1RLmxlbmd0aDtOPE87TisrKVI9UVtOXSxhPWEuY29uY2F0KFIpO3ZhciBWLFg9YS5sZW5ndGgsVCxiYT1VLmxlbmd0aCx5PVtdLEc9MDt2YXIgWT1XLmxlbmd0aDt2YXIgZWE9WS0xO2ZvcihWPUcrMTtHPFk7RysrLGVhKyssVisrKWVhPT09WSYmKGVhPTApLFY9PT1ZJiYoVj0wKSx5W0ddPWQoV1tHXSxXW2VhXSxXW1ZdKTt2YXIgQT1bXSxjYT15LmNvbmNhdCgpO049MDtmb3IoTz1RLmxlbmd0aDtOPE87TisrKXtSPVFbTl07dmFyIGFhPVtdO0c9MDtZPVIubGVuZ3RoO2VhPVktMTtmb3IoVj1HKzE7RzxZO0crKyxlYSsrLFYrKyllYT09PVkmJihlYT0wKSxWPT09WSYmKFY9MCksYWFbR109ZChSW0ddLFJbZWFdLFJbVl0pO0EucHVzaChhYSk7Y2E9Y2EuY29uY2F0KGFhKX1mb3IoZWE9MDtlYTx3O2VhKyspe1k9ZWEvdzt2YXIgZGE9XG4gICAgdCpNYXRoLmNvcyhZKk1hdGguUEkvMik7Vj12Kk1hdGguc2luKFkqTWF0aC5QSS8yKTtHPTA7Zm9yKFk9Vy5sZW5ndGg7RzxZO0crKyl7dmFyIGZhPWMoV1tHXSx5W0ddLFYpO2YoZmEueCxmYS55LC1kYSl9Tj0wO2ZvcihPPVEubGVuZ3RoO048TztOKyspZm9yKFI9UVtOXSxhYT1BW05dLEc9MCxZPVIubGVuZ3RoO0c8WTtHKyspZmE9YyhSW0ddLGFhW0ddLFYpLGYoZmEueCxmYS55LC1kYSl9Vj12O2ZvcihHPTA7RzxYO0crKylmYT16P2MoYVtHXSxjYVtHXSxWKTphW0ddLEM/KE0uY29weShLLm5vcm1hbHNbMF0pLm11bHRpcGx5U2NhbGFyKGZhLngpLEwuY29weShLLmJpbm9ybWFsc1swXSkubXVsdGlwbHlTY2FsYXIoZmEueSksUC5jb3B5KEhbMF0pLmFkZChNKS5hZGQoTCksZihQLngsUC55LFAueikpOmYoZmEueCxmYS55LDApO2ZvcihZPTE7WTw9eDtZKyspZm9yKEc9MDtHPFg7RysrKWZhPXo/YyhhW0ddLGNhW0ddLFYpOmFbR10sQz8oTS5jb3B5KEsubm9ybWFsc1tZXSkubXVsdGlwbHlTY2FsYXIoZmEueCksXG4gICAgTC5jb3B5KEsuYmlub3JtYWxzW1ldKS5tdWx0aXBseVNjYWxhcihmYS55KSxQLmNvcHkoSFtZXSkuYWRkKE0pLmFkZChMKSxmKFAueCxQLnksUC56KSk6ZihmYS54LGZhLnksbS94KlkpO2ZvcihlYT13LTE7MDw9ZWE7ZWEtLSl7WT1lYS93O2RhPXQqTWF0aC5jb3MoWSpNYXRoLlBJLzIpO1Y9dipNYXRoLnNpbihZKk1hdGguUEkvMik7Rz0wO2ZvcihZPVcubGVuZ3RoO0c8WTtHKyspZmE9YyhXW0ddLHlbR10sViksZihmYS54LGZhLnksbStkYSk7Tj0wO2ZvcihPPVEubGVuZ3RoO048TztOKyspZm9yKFI9UVtOXSxhYT1BW05dLEc9MCxZPVIubGVuZ3RoO0c8WTtHKyspZmE9YyhSW0ddLGFhW0ddLFYpLEM/ZihmYS54LGZhLnkrSFt4LTFdLnksSFt4LTFdLngrZGEpOmYoZmEueCxmYS55LG0rZGEpfShmdW5jdGlvbigpe3ZhciBhPWwubGVuZ3RoLzM7aWYoeil7dmFyIGM9MCpYO2ZvcihHPTA7RzxiYTtHKyspVD1VW0ddLGcoVFsyXStjLFRbMV0rYyxUWzBdK2MpO2M9WCooeCsyKncpO2ZvcihHPVxuICAgIDA7RzxiYTtHKyspVD1VW0ddLGcoVFswXStjLFRbMV0rYyxUWzJdK2MpfWVsc2V7Zm9yKEc9MDtHPGJhO0crKylUPVVbR10sZyhUWzJdLFRbMV0sVFswXSk7Zm9yKEc9MDtHPGJhO0crKylUPVVbR10sZyhUWzBdK1gqeCxUWzFdK1gqeCxUWzJdK1gqeCl9Uy5hZGRHcm91cChhLGwubGVuZ3RoLzMtYSx2b2lkIDAhPT1iLm1hdGVyaWFsP2IubWF0ZXJpYWw6MCl9KSgpOyhmdW5jdGlvbigpe3ZhciBhPWwubGVuZ3RoLzMsYz0wO2UoVyxjKTtjKz1XLmxlbmd0aDtOPTA7Zm9yKE89US5sZW5ndGg7TjxPO04rKylSPVFbTl0sZShSLGMpLGMrPVIubGVuZ3RoO1MuYWRkR3JvdXAoYSxsLmxlbmd0aC8zLWEsdm9pZCAwIT09Yi5leHRydWRlTWF0ZXJpYWw/Yi5leHRydWRlTWF0ZXJpYWw6MSl9KSgpO2IuYXJyYXlzfHwodGhpcy5zZXRJbmRleChuKSx0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IEIobCwzKSksdGhpcy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBCKHUsMikpKX07aWIuV29ybGRVVkdlbmVyYXRvcj1cbiAgICB7Z2VuZXJhdGVUb3BVVjpmdW5jdGlvbihhLGIsYyxkLGUpe2E9YlszKmRdO2Q9YlszKmQrMV07dmFyIGY9YlszKmVdO2U9YlszKmUrMV07cmV0dXJuW25ldyBEKGJbMypjXSxiWzMqYysxXSksbmV3IEQoYSxkKSxuZXcgRChmLGUpXX0sZ2VuZXJhdGVTaWRlV2FsbFVWOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXthPWJbMypjXTt2YXIgZz1iWzMqYysxXTtjPWJbMypjKzJdO3ZhciBoPWJbMypkXSxrPWJbMypkKzFdO2Q9YlszKmQrMl07dmFyIG09YlszKmVdLGw9YlszKmUrMV07ZT1iWzMqZSsyXTt2YXIgbj1iWzMqZl0scD1iWzMqZisxXTtiPWJbMypmKzJdO3JldHVybi4wMT5NYXRoLmFicyhnLWspP1tuZXcgRChhLDEtYyksbmV3IEQoaCwxLWQpLG5ldyBEKG0sMS1lKSxuZXcgRChuLDEtYildOltuZXcgRChnLDEtYyksbmV3IEQoaywxLWQpLG5ldyBEKGwsMS1lKSxuZXcgRChwLDEtYildfX07VWMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTC5wcm90b3R5cGUpO1VjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1cbiAgICBVYzthYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShMYS5wcm90b3R5cGUpO2FjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1hYztWYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShMLnByb3RvdHlwZSk7VmMucHJvdG90eXBlLmNvbnN0cnVjdG9yPVZjO3diLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEUucHJvdG90eXBlKTt3Yi5wcm90b3R5cGUuY29uc3RydWN0b3I9d2I7V2MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTC5wcm90b3R5cGUpO1djLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1XYztiYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFLnByb3RvdHlwZSk7YmMucHJvdG90eXBlLmNvbnN0cnVjdG9yPWJjO1hjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEwucHJvdG90eXBlKTtYYy5wcm90b3R5cGUuY29uc3RydWN0b3I9WGM7Y2MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRS5wcm90b3R5cGUpO2NjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1jYzt4Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShMLnByb3RvdHlwZSk7XG4gICAgeGIucHJvdG90eXBlLmNvbnN0cnVjdG9yPXhiO3hiLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgYT1MLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtyZXR1cm4gZmYodGhpcy5wYXJhbWV0ZXJzLnNoYXBlcyxhKX07eWIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRS5wcm90b3R5cGUpO3liLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj15Yjt5Yi5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGE9RS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7cmV0dXJuIGZmKHRoaXMucGFyYW1ldGVycy5zaGFwZXMsYSl9O2RjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEUucHJvdG90eXBlKTtkYy5wcm90b3R5cGUuY29uc3RydWN0b3I9ZGM7emIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoTC5wcm90b3R5cGUpO3piLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj16YjthYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFLnByb3RvdHlwZSk7YWIucHJvdG90eXBlLmNvbnN0cnVjdG9yPVxuICAgIGFiO1ljLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHpiLnByb3RvdHlwZSk7WWMucHJvdG90eXBlLmNvbnN0cnVjdG9yPVljO1pjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGFiLnByb3RvdHlwZSk7WmMucHJvdG90eXBlLmNvbnN0cnVjdG9yPVpjOyRjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEwucHJvdG90eXBlKTskYy5wcm90b3R5cGUuY29uc3RydWN0b3I9JGM7ZWMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRS5wcm90b3R5cGUpO2VjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lYzt2YXIga2E9T2JqZWN0LmZyZWV6ZSh7V2lyZWZyYW1lR2VvbWV0cnk6VGIsUGFyYW1ldHJpY0dlb21ldHJ5OkhjLFBhcmFtZXRyaWNCdWZmZXJHZW9tZXRyeTpVYixUZXRyYWhlZHJvbkdlb21ldHJ5OkpjLFRldHJhaGVkcm9uQnVmZmVyR2VvbWV0cnk6VmIsT2N0YWhlZHJvbkdlb21ldHJ5OktjLE9jdGFoZWRyb25CdWZmZXJHZW9tZXRyeTp1YixJY29zYWhlZHJvbkdlb21ldHJ5OkxjLEljb3NhaGVkcm9uQnVmZmVyR2VvbWV0cnk6V2IsXG4gICAgRG9kZWNhaGVkcm9uR2VvbWV0cnk6TWMsRG9kZWNhaGVkcm9uQnVmZmVyR2VvbWV0cnk6WGIsUG9seWhlZHJvbkdlb21ldHJ5OkljLFBvbHloZWRyb25CdWZmZXJHZW9tZXRyeTpqYSxUdWJlR2VvbWV0cnk6TmMsVHViZUJ1ZmZlckdlb21ldHJ5OlliLFRvcnVzS25vdEdlb21ldHJ5Ok9jLFRvcnVzS25vdEJ1ZmZlckdlb21ldHJ5OlpiLFRvcnVzR2VvbWV0cnk6UGMsVG9ydXNCdWZmZXJHZW9tZXRyeTokYixUZXh0R2VvbWV0cnk6VWMsVGV4dEJ1ZmZlckdlb21ldHJ5OmFjLFNwaGVyZUdlb21ldHJ5OlZjLFNwaGVyZUJ1ZmZlckdlb21ldHJ5OndiLFJpbmdHZW9tZXRyeTpXYyxSaW5nQnVmZmVyR2VvbWV0cnk6YmMsUGxhbmVHZW9tZXRyeTpBYyxQbGFuZUJ1ZmZlckdlb21ldHJ5OnJiLExhdGhlR2VvbWV0cnk6WGMsTGF0aGVCdWZmZXJHZW9tZXRyeTpjYyxTaGFwZUdlb21ldHJ5OnhiLFNoYXBlQnVmZmVyR2VvbWV0cnk6eWIsRXh0cnVkZUdlb21ldHJ5OmliLEV4dHJ1ZGVCdWZmZXJHZW9tZXRyeTpMYSxcbiAgICBFZGdlc0dlb21ldHJ5OmRjLENvbmVHZW9tZXRyeTpZYyxDb25lQnVmZmVyR2VvbWV0cnk6WmMsQ3lsaW5kZXJHZW9tZXRyeTp6YixDeWxpbmRlckJ1ZmZlckdlb21ldHJ5OmFiLENpcmNsZUdlb21ldHJ5OiRjLENpcmNsZUJ1ZmZlckdlb21ldHJ5OmVjLEJveEdlb21ldHJ5Ok1iLEJveEJ1ZmZlckdlb21ldHJ5OnFifSk7ZmMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoUC5wcm90b3R5cGUpO2ZjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1mYztmYy5wcm90b3R5cGUuaXNTaGFkb3dNYXRlcmlhbD0hMDtnYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShGYS5wcm90b3R5cGUpO2djLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1nYztnYy5wcm90b3R5cGUuaXNSYXdTaGFkZXJNYXRlcmlhbD0hMDtVYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShQLnByb3RvdHlwZSk7VWEucHJvdG90eXBlLmNvbnN0cnVjdG9yPVVhO1VhLnByb3RvdHlwZS5pc01lc2hTdGFuZGFyZE1hdGVyaWFsPSEwO1VhLnByb3RvdHlwZS5jb3B5PVxuICAgIGZ1bmN0aW9uKGEpe1AucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuZGVmaW5lcz17U1RBTkRBUkQ6XCJcIn07dGhpcy5jb2xvci5jb3B5KGEuY29sb3IpO3RoaXMucm91Z2huZXNzPWEucm91Z2huZXNzO3RoaXMubWV0YWxuZXNzPWEubWV0YWxuZXNzO3RoaXMubWFwPWEubWFwO3RoaXMubGlnaHRNYXA9YS5saWdodE1hcDt0aGlzLmxpZ2h0TWFwSW50ZW5zaXR5PWEubGlnaHRNYXBJbnRlbnNpdHk7dGhpcy5hb01hcD1hLmFvTWFwO3RoaXMuYW9NYXBJbnRlbnNpdHk9YS5hb01hcEludGVuc2l0eTt0aGlzLmVtaXNzaXZlLmNvcHkoYS5lbWlzc2l2ZSk7dGhpcy5lbWlzc2l2ZU1hcD1hLmVtaXNzaXZlTWFwO3RoaXMuZW1pc3NpdmVJbnRlbnNpdHk9YS5lbWlzc2l2ZUludGVuc2l0eTt0aGlzLmJ1bXBNYXA9YS5idW1wTWFwO3RoaXMuYnVtcFNjYWxlPWEuYnVtcFNjYWxlO3RoaXMubm9ybWFsTWFwPWEubm9ybWFsTWFwO3RoaXMubm9ybWFsU2NhbGUuY29weShhLm5vcm1hbFNjYWxlKTtcbiAgICB0aGlzLmRpc3BsYWNlbWVudE1hcD1hLmRpc3BsYWNlbWVudE1hcDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPWEuZGlzcGxhY2VtZW50U2NhbGU7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPWEuZGlzcGxhY2VtZW50Qmlhczt0aGlzLnJvdWdobmVzc01hcD1hLnJvdWdobmVzc01hcDt0aGlzLm1ldGFsbmVzc01hcD1hLm1ldGFsbmVzc01hcDt0aGlzLmFscGhhTWFwPWEuYWxwaGFNYXA7dGhpcy5lbnZNYXA9YS5lbnZNYXA7dGhpcy5lbnZNYXBJbnRlbnNpdHk9YS5lbnZNYXBJbnRlbnNpdHk7dGhpcy5yZWZyYWN0aW9uUmF0aW89YS5yZWZyYWN0aW9uUmF0aW87dGhpcy53aXJlZnJhbWU9YS53aXJlZnJhbWU7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9YS53aXJlZnJhbWVMaW5ld2lkdGg7dGhpcy53aXJlZnJhbWVMaW5lY2FwPWEud2lyZWZyYW1lTGluZWNhcDt0aGlzLndpcmVmcmFtZUxpbmVqb2luPWEud2lyZWZyYW1lTGluZWpvaW47dGhpcy5za2lubmluZz1hLnNraW5uaW5nO3RoaXMubW9ycGhUYXJnZXRzPVxuICAgIGEubW9ycGhUYXJnZXRzO3RoaXMubW9ycGhOb3JtYWxzPWEubW9ycGhOb3JtYWxzO3JldHVybiB0aGlzfTtBYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShVYS5wcm90b3R5cGUpO0FiLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1BYjtBYi5wcm90b3R5cGUuaXNNZXNoUGh5c2ljYWxNYXRlcmlhbD0hMDtBYi5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtVYS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5kZWZpbmVzPXtQSFlTSUNBTDpcIlwifTt0aGlzLnJlZmxlY3Rpdml0eT1hLnJlZmxlY3Rpdml0eTt0aGlzLmNsZWFyQ29hdD1hLmNsZWFyQ29hdDt0aGlzLmNsZWFyQ29hdFJvdWdobmVzcz1hLmNsZWFyQ29hdFJvdWdobmVzcztyZXR1cm4gdGhpc307TWEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoUC5wcm90b3R5cGUpO01hLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1NYTtNYS5wcm90b3R5cGUuaXNNZXNoUGhvbmdNYXRlcmlhbD0hMDtNYS5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtQLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxcbiAgICBhKTt0aGlzLmNvbG9yLmNvcHkoYS5jb2xvcik7dGhpcy5zcGVjdWxhci5jb3B5KGEuc3BlY3VsYXIpO3RoaXMuc2hpbmluZXNzPWEuc2hpbmluZXNzO3RoaXMubWFwPWEubWFwO3RoaXMubGlnaHRNYXA9YS5saWdodE1hcDt0aGlzLmxpZ2h0TWFwSW50ZW5zaXR5PWEubGlnaHRNYXBJbnRlbnNpdHk7dGhpcy5hb01hcD1hLmFvTWFwO3RoaXMuYW9NYXBJbnRlbnNpdHk9YS5hb01hcEludGVuc2l0eTt0aGlzLmVtaXNzaXZlLmNvcHkoYS5lbWlzc2l2ZSk7dGhpcy5lbWlzc2l2ZU1hcD1hLmVtaXNzaXZlTWFwO3RoaXMuZW1pc3NpdmVJbnRlbnNpdHk9YS5lbWlzc2l2ZUludGVuc2l0eTt0aGlzLmJ1bXBNYXA9YS5idW1wTWFwO3RoaXMuYnVtcFNjYWxlPWEuYnVtcFNjYWxlO3RoaXMubm9ybWFsTWFwPWEubm9ybWFsTWFwO3RoaXMubm9ybWFsU2NhbGUuY29weShhLm5vcm1hbFNjYWxlKTt0aGlzLmRpc3BsYWNlbWVudE1hcD1hLmRpc3BsYWNlbWVudE1hcDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPVxuICAgIGEuZGlzcGxhY2VtZW50U2NhbGU7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPWEuZGlzcGxhY2VtZW50Qmlhczt0aGlzLnNwZWN1bGFyTWFwPWEuc3BlY3VsYXJNYXA7dGhpcy5hbHBoYU1hcD1hLmFscGhhTWFwO3RoaXMuZW52TWFwPWEuZW52TWFwO3RoaXMuY29tYmluZT1hLmNvbWJpbmU7dGhpcy5yZWZsZWN0aXZpdHk9YS5yZWZsZWN0aXZpdHk7dGhpcy5yZWZyYWN0aW9uUmF0aW89YS5yZWZyYWN0aW9uUmF0aW87dGhpcy53aXJlZnJhbWU9YS53aXJlZnJhbWU7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9YS53aXJlZnJhbWVMaW5ld2lkdGg7dGhpcy53aXJlZnJhbWVMaW5lY2FwPWEud2lyZWZyYW1lTGluZWNhcDt0aGlzLndpcmVmcmFtZUxpbmVqb2luPWEud2lyZWZyYW1lTGluZWpvaW47dGhpcy5za2lubmluZz1hLnNraW5uaW5nO3RoaXMubW9ycGhUYXJnZXRzPWEubW9ycGhUYXJnZXRzO3RoaXMubW9ycGhOb3JtYWxzPWEubW9ycGhOb3JtYWxzO3JldHVybiB0aGlzfTtCYi5wcm90b3R5cGU9XG4gICAgT2JqZWN0LmNyZWF0ZShNYS5wcm90b3R5cGUpO0JiLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1CYjtCYi5wcm90b3R5cGUuaXNNZXNoVG9vbk1hdGVyaWFsPSEwO0JiLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe01hLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmdyYWRpZW50TWFwPWEuZ3JhZGllbnRNYXA7cmV0dXJuIHRoaXN9O0NiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFAucHJvdG90eXBlKTtDYi5wcm90b3R5cGUuY29uc3RydWN0b3I9Q2I7Q2IucHJvdG90eXBlLmlzTWVzaE5vcm1hbE1hdGVyaWFsPSEwO0NiLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe1AucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuYnVtcE1hcD1hLmJ1bXBNYXA7dGhpcy5idW1wU2NhbGU9YS5idW1wU2NhbGU7dGhpcy5ub3JtYWxNYXA9YS5ub3JtYWxNYXA7dGhpcy5ub3JtYWxTY2FsZS5jb3B5KGEubm9ybWFsU2NhbGUpO3RoaXMuZGlzcGxhY2VtZW50TWFwPWEuZGlzcGxhY2VtZW50TWFwO1xuICAgIHRoaXMuZGlzcGxhY2VtZW50U2NhbGU9YS5kaXNwbGFjZW1lbnRTY2FsZTt0aGlzLmRpc3BsYWNlbWVudEJpYXM9YS5kaXNwbGFjZW1lbnRCaWFzO3RoaXMud2lyZWZyYW1lPWEud2lyZWZyYW1lO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPWEud2lyZWZyYW1lTGluZXdpZHRoO3RoaXMuc2tpbm5pbmc9YS5za2lubmluZzt0aGlzLm1vcnBoVGFyZ2V0cz1hLm1vcnBoVGFyZ2V0czt0aGlzLm1vcnBoTm9ybWFscz1hLm1vcnBoTm9ybWFscztyZXR1cm4gdGhpc307RGIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoUC5wcm90b3R5cGUpO0RiLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1EYjtEYi5wcm90b3R5cGUuaXNNZXNoTGFtYmVydE1hdGVyaWFsPSEwO0RiLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe1AucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuY29sb3IuY29weShhLmNvbG9yKTt0aGlzLm1hcD1hLm1hcDt0aGlzLmxpZ2h0TWFwPWEubGlnaHRNYXA7dGhpcy5saWdodE1hcEludGVuc2l0eT1cbiAgICBhLmxpZ2h0TWFwSW50ZW5zaXR5O3RoaXMuYW9NYXA9YS5hb01hcDt0aGlzLmFvTWFwSW50ZW5zaXR5PWEuYW9NYXBJbnRlbnNpdHk7dGhpcy5lbWlzc2l2ZS5jb3B5KGEuZW1pc3NpdmUpO3RoaXMuZW1pc3NpdmVNYXA9YS5lbWlzc2l2ZU1hcDt0aGlzLmVtaXNzaXZlSW50ZW5zaXR5PWEuZW1pc3NpdmVJbnRlbnNpdHk7dGhpcy5zcGVjdWxhck1hcD1hLnNwZWN1bGFyTWFwO3RoaXMuYWxwaGFNYXA9YS5hbHBoYU1hcDt0aGlzLmVudk1hcD1hLmVudk1hcDt0aGlzLmNvbWJpbmU9YS5jb21iaW5lO3RoaXMucmVmbGVjdGl2aXR5PWEucmVmbGVjdGl2aXR5O3RoaXMucmVmcmFjdGlvblJhdGlvPWEucmVmcmFjdGlvblJhdGlvO3RoaXMud2lyZWZyYW1lPWEud2lyZWZyYW1lO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPWEud2lyZWZyYW1lTGluZXdpZHRoO3RoaXMud2lyZWZyYW1lTGluZWNhcD1hLndpcmVmcmFtZUxpbmVjYXA7dGhpcy53aXJlZnJhbWVMaW5lam9pbj1hLndpcmVmcmFtZUxpbmVqb2luO1xuICAgIHRoaXMuc2tpbm5pbmc9YS5za2lubmluZzt0aGlzLm1vcnBoVGFyZ2V0cz1hLm1vcnBoVGFyZ2V0czt0aGlzLm1vcnBoTm9ybWFscz1hLm1vcnBoTm9ybWFscztyZXR1cm4gdGhpc307RWIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVy5wcm90b3R5cGUpO0ViLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1FYjtFYi5wcm90b3R5cGUuaXNMaW5lRGFzaGVkTWF0ZXJpYWw9ITA7RWIucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7Vy5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5zY2FsZT1hLnNjYWxlO3RoaXMuZGFzaFNpemU9YS5kYXNoU2l6ZTt0aGlzLmdhcFNpemU9YS5nYXBTaXplO3JldHVybiB0aGlzfTt2YXIgTWc9T2JqZWN0LmZyZWV6ZSh7U2hhZG93TWF0ZXJpYWw6ZmMsU3ByaXRlTWF0ZXJpYWw6aGIsUmF3U2hhZGVyTWF0ZXJpYWw6Z2MsU2hhZGVyTWF0ZXJpYWw6RmEsUG9pbnRzTWF0ZXJpYWw6S2EsTWVzaFBoeXNpY2FsTWF0ZXJpYWw6QWIsTWVzaFN0YW5kYXJkTWF0ZXJpYWw6VWEsXG4gICAgTWVzaFBob25nTWF0ZXJpYWw6TWEsTWVzaFRvb25NYXRlcmlhbDpCYixNZXNoTm9ybWFsTWF0ZXJpYWw6Q2IsTWVzaExhbWJlcnRNYXRlcmlhbDpEYixNZXNoRGVwdGhNYXRlcmlhbDplYixNZXNoRGlzdGFuY2VNYXRlcmlhbDpmYixNZXNoQmFzaWNNYXRlcmlhbDpBYSxMaW5lRGFzaGVkTWF0ZXJpYWw6RWIsTGluZUJhc2ljTWF0ZXJpYWw6VyxNYXRlcmlhbDpQfSksSWI9e2VuYWJsZWQ6ITEsZmlsZXM6e30sYWRkOmZ1bmN0aW9uKGEsYil7ITEhPT10aGlzLmVuYWJsZWQmJih0aGlzLmZpbGVzW2FdPWIpfSxnZXQ6ZnVuY3Rpb24oYSl7aWYoITEhPT10aGlzLmVuYWJsZWQpcmV0dXJuIHRoaXMuZmlsZXNbYV19LHJlbW92ZTpmdW5jdGlvbihhKXtkZWxldGUgdGhpcy5maWxlc1thXX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLmZpbGVzPXt9fX0seGE9bmV3IGhlLGNiPXt9O09iamVjdC5hc3NpZ24oTmEucHJvdG90eXBlLHtsb2FkOmZ1bmN0aW9uKGEsYixjLGQpe3ZvaWQgMD09PWEmJihhPVxuICAgIFwiXCIpO3ZvaWQgMCE9PXRoaXMucGF0aCYmKGE9dGhpcy5wYXRoK2EpO2E9dGhpcy5tYW5hZ2VyLnJlc29sdmVVUkwoYSk7dmFyIGU9dGhpcyxmPUliLmdldChhKTtpZih2b2lkIDAhPT1mKXJldHVybiBlLm1hbmFnZXIuaXRlbVN0YXJ0KGEpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiJiZiKGYpO2UubWFuYWdlci5pdGVtRW5kKGEpfSwwKSxmO2lmKHZvaWQgMCE9PWNiW2FdKWNiW2FdLnB1c2goe29uTG9hZDpiLG9uUHJvZ3Jlc3M6YyxvbkVycm9yOmR9KTtlbHNle3ZhciBnPWEubWF0Y2goL15kYXRhOiguKj8pKDtiYXNlNjQpPywoLiopJC8pO2lmKGcpe2M9Z1sxXTt2YXIgaD0hIWdbMl0sZz1nWzNdLGc9d2luZG93LmRlY29kZVVSSUNvbXBvbmVudChnKTtoJiYoZz13aW5kb3cuYXRvYihnKSk7dHJ5e3ZhciBrPSh0aGlzLnJlc3BvbnNlVHlwZXx8XCJcIikudG9Mb3dlckNhc2UoKTtzd2l0Y2goayl7Y2FzZSBcImFycmF5YnVmZmVyXCI6Y2FzZSBcImJsb2JcIjpmb3IodmFyIG09bmV3IFVpbnQ4QXJyYXkoZy5sZW5ndGgpLFxuICAgIGg9MDtoPGcubGVuZ3RoO2grKyltW2hdPWcuY2hhckNvZGVBdChoKTt2YXIgbD1cImJsb2JcIj09PWs/bmV3IEJsb2IoW20uYnVmZmVyXSx7dHlwZTpjfSk6bS5idWZmZXI7YnJlYWs7Y2FzZSBcImRvY3VtZW50XCI6bD0obmV3IERPTVBhcnNlcikucGFyc2VGcm9tU3RyaW5nKGcsYyk7YnJlYWs7Y2FzZSBcImpzb25cIjpsPUpTT04ucGFyc2UoZyk7YnJlYWs7ZGVmYXVsdDpsPWd9d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtiJiZiKGwpO2UubWFuYWdlci5pdGVtRW5kKGEpfSwwKX1jYXRjaCh1KXt3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2QmJmQodSk7ZS5tYW5hZ2VyLml0ZW1FbmQoYSk7ZS5tYW5hZ2VyLml0ZW1FcnJvcihhKX0sMCl9fWVsc2V7Y2JbYV09W107Y2JbYV0ucHVzaCh7b25Mb2FkOmIsb25Qcm9ncmVzczpjLG9uRXJyb3I6ZH0pO3ZhciBuPW5ldyBYTUxIdHRwUmVxdWVzdDtuLm9wZW4oXCJHRVRcIixhLCEwKTtuLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsZnVuY3Rpb24oYil7dmFyIGM9XG4gICAgdGhpcy5yZXNwb25zZTtJYi5hZGQoYSxjKTt2YXIgZD1jYlthXTtkZWxldGUgY2JbYV07aWYoMjAwPT09dGhpcy5zdGF0dXMpe2Zvcih2YXIgZj0wLGc9ZC5sZW5ndGg7ZjxnO2YrKyl7dmFyIGg9ZFtmXTtpZihoLm9uTG9hZCloLm9uTG9hZChjKX1lLm1hbmFnZXIuaXRlbUVuZChhKX1lbHNlIGlmKDA9PT10aGlzLnN0YXR1cyl7Y29uc29sZS53YXJuKFwiVEhSRUUuRmlsZUxvYWRlcjogSFRUUCBTdGF0dXMgMCByZWNlaXZlZC5cIik7Zj0wO2ZvcihnPWQubGVuZ3RoO2Y8ZztmKyspaWYoaD1kW2ZdLGgub25Mb2FkKWgub25Mb2FkKGMpO2UubWFuYWdlci5pdGVtRW5kKGEpfWVsc2V7Zj0wO2ZvcihnPWQubGVuZ3RoO2Y8ZztmKyspaWYoaD1kW2ZdLGgub25FcnJvciloLm9uRXJyb3IoYik7ZS5tYW5hZ2VyLml0ZW1FbmQoYSk7ZS5tYW5hZ2VyLml0ZW1FcnJvcihhKX19LCExKTtuLmFkZEV2ZW50TGlzdGVuZXIoXCJwcm9ncmVzc1wiLGZ1bmN0aW9uKGIpe2Zvcih2YXIgYz1jYlthXSxkPTAsZT1cbiAgICBjLmxlbmd0aDtkPGU7ZCsrKXt2YXIgZj1jW2RdO2lmKGYub25Qcm9ncmVzcylmLm9uUHJvZ3Jlc3MoYil9fSwhMSk7bi5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIixmdW5jdGlvbihiKXt2YXIgYz1jYlthXTtkZWxldGUgY2JbYV07Zm9yKHZhciBkPTAsZj1jLmxlbmd0aDtkPGY7ZCsrKXt2YXIgZz1jW2RdO2lmKGcub25FcnJvcilnLm9uRXJyb3IoYil9ZS5tYW5hZ2VyLml0ZW1FbmQoYSk7ZS5tYW5hZ2VyLml0ZW1FcnJvcihhKX0sITEpO3ZvaWQgMCE9PXRoaXMucmVzcG9uc2VUeXBlJiYobi5yZXNwb25zZVR5cGU9dGhpcy5yZXNwb25zZVR5cGUpO3ZvaWQgMCE9PXRoaXMud2l0aENyZWRlbnRpYWxzJiYobi53aXRoQ3JlZGVudGlhbHM9dGhpcy53aXRoQ3JlZGVudGlhbHMpO24ub3ZlcnJpZGVNaW1lVHlwZSYmbi5vdmVycmlkZU1pbWVUeXBlKHZvaWQgMCE9PXRoaXMubWltZVR5cGU/dGhpcy5taW1lVHlwZTpcInRleHQvcGxhaW5cIik7Zm9yKGggaW4gdGhpcy5yZXF1ZXN0SGVhZGVyKW4uc2V0UmVxdWVzdEhlYWRlcihoLFxuICAgIHRoaXMucmVxdWVzdEhlYWRlcltoXSk7bi5zZW5kKG51bGwpfWUubWFuYWdlci5pdGVtU3RhcnQoYSk7cmV0dXJuIG59fSxzZXRQYXRoOmZ1bmN0aW9uKGEpe3RoaXMucGF0aD1hO3JldHVybiB0aGlzfSxzZXRSZXNwb25zZVR5cGU6ZnVuY3Rpb24oYSl7dGhpcy5yZXNwb25zZVR5cGU9YTtyZXR1cm4gdGhpc30sc2V0V2l0aENyZWRlbnRpYWxzOmZ1bmN0aW9uKGEpe3RoaXMud2l0aENyZWRlbnRpYWxzPWE7cmV0dXJuIHRoaXN9LHNldE1pbWVUeXBlOmZ1bmN0aW9uKGEpe3RoaXMubWltZVR5cGU9YTtyZXR1cm4gdGhpc30sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbihhKXt0aGlzLnJlcXVlc3RIZWFkZXI9YTtyZXR1cm4gdGhpc319KTtPYmplY3QuYXNzaWduKGdmLnByb3RvdHlwZSx7bG9hZDpmdW5jdGlvbihhLGIsYyxkKXtmdW5jdGlvbiBlKGUpe20ubG9hZChhW2VdLGZ1bmN0aW9uKGEpe2E9Zy5fcGFyc2VyKGEsITApO2hbZV09e3dpZHRoOmEud2lkdGgsaGVpZ2h0OmEuaGVpZ2h0LFxuICAgIGZvcm1hdDphLmZvcm1hdCxtaXBtYXBzOmEubWlwbWFwc307Zis9MTs2PT09ZiYmKDE9PT1hLm1pcG1hcENvdW50JiYoay5taW5GaWx0ZXI9MTAwNiksay5mb3JtYXQ9YS5mb3JtYXQsay5uZWVkc1VwZGF0ZT0hMCxiJiZiKGspKX0sYyxkKX12YXIgZixnPXRoaXMsaD1bXSxrPW5ldyBTYjtrLmltYWdlPWg7dmFyIG09bmV3IE5hKHRoaXMubWFuYWdlcik7bS5zZXRQYXRoKHRoaXMucGF0aCk7bS5zZXRSZXNwb25zZVR5cGUoXCJhcnJheWJ1ZmZlclwiKTtpZihBcnJheS5pc0FycmF5KGEpKWZvcih2YXIgbD1mPTAsbj1hLmxlbmd0aDtsPG47KytsKWUobCk7ZWxzZSBtLmxvYWQoYSxmdW5jdGlvbihhKXthPWcuX3BhcnNlcihhLCEwKTtpZihhLmlzQ3ViZW1hcClmb3IodmFyIGM9YS5taXBtYXBzLmxlbmd0aC9hLm1pcG1hcENvdW50LGQ9MDtkPGM7ZCsrKXtoW2RdPXttaXBtYXBzOltdfTtmb3IodmFyIGU9MDtlPGEubWlwbWFwQ291bnQ7ZSsrKWhbZF0ubWlwbWFwcy5wdXNoKGEubWlwbWFwc1tkKlxuICAgIGEubWlwbWFwQ291bnQrZV0pLGhbZF0uZm9ybWF0PWEuZm9ybWF0LGhbZF0ud2lkdGg9YS53aWR0aCxoW2RdLmhlaWdodD1hLmhlaWdodH1lbHNlIGsuaW1hZ2Uud2lkdGg9YS53aWR0aCxrLmltYWdlLmhlaWdodD1hLmhlaWdodCxrLm1pcG1hcHM9YS5taXBtYXBzOzE9PT1hLm1pcG1hcENvdW50JiYoay5taW5GaWx0ZXI9MTAwNik7ay5mb3JtYXQ9YS5mb3JtYXQ7ay5uZWVkc1VwZGF0ZT0hMDtiJiZiKGspfSxjLGQpO3JldHVybiBrfSxzZXRQYXRoOmZ1bmN0aW9uKGEpe3RoaXMucGF0aD1hO3JldHVybiB0aGlzfX0pO09iamVjdC5hc3NpZ24oaWUucHJvdG90eXBlLHtsb2FkOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMsZj1uZXcgbGIsZz1uZXcgTmEodGhpcy5tYW5hZ2VyKTtnLnNldFJlc3BvbnNlVHlwZShcImFycmF5YnVmZmVyXCIpO2cubG9hZChhLGZ1bmN0aW9uKGEpe2lmKGE9ZS5fcGFyc2VyKGEpKXZvaWQgMCE9PWEuaW1hZ2U/Zi5pbWFnZT1hLmltYWdlOnZvaWQgMCE9PVxuICAgIGEuZGF0YSYmKGYuaW1hZ2Uud2lkdGg9YS53aWR0aCxmLmltYWdlLmhlaWdodD1hLmhlaWdodCxmLmltYWdlLmRhdGE9YS5kYXRhKSxmLndyYXBTPXZvaWQgMCE9PWEud3JhcFM/YS53cmFwUzoxMDAxLGYud3JhcFQ9dm9pZCAwIT09YS53cmFwVD9hLndyYXBUOjEwMDEsZi5tYWdGaWx0ZXI9dm9pZCAwIT09YS5tYWdGaWx0ZXI/YS5tYWdGaWx0ZXI6MTAwNixmLm1pbkZpbHRlcj12b2lkIDAhPT1hLm1pbkZpbHRlcj9hLm1pbkZpbHRlcjoxMDA4LGYuYW5pc290cm9weT12b2lkIDAhPT1hLmFuaXNvdHJvcHk/YS5hbmlzb3Ryb3B5OjEsdm9pZCAwIT09YS5mb3JtYXQmJihmLmZvcm1hdD1hLmZvcm1hdCksdm9pZCAwIT09YS50eXBlJiYoZi50eXBlPWEudHlwZSksdm9pZCAwIT09YS5taXBtYXBzJiYoZi5taXBtYXBzPWEubWlwbWFwcyksMT09PWEubWlwbWFwQ291bnQmJihmLm1pbkZpbHRlcj0xMDA2KSxmLm5lZWRzVXBkYXRlPSEwLGImJmIoZixhKX0sYyxkKTtyZXR1cm4gZn19KTtPYmplY3QuYXNzaWduKGFkLnByb3RvdHlwZSxcbiAgICB7Y3Jvc3NPcmlnaW46XCJBbm9ueW1vdXNcIixsb2FkOmZ1bmN0aW9uKGEsYixjLGQpe3ZvaWQgMD09PWEmJihhPVwiXCIpO3ZvaWQgMCE9PXRoaXMucGF0aCYmKGE9dGhpcy5wYXRoK2EpO2E9dGhpcy5tYW5hZ2VyLnJlc29sdmVVUkwoYSk7dmFyIGU9dGhpcyxmPUliLmdldChhKTtpZih2b2lkIDAhPT1mKXJldHVybiBlLm1hbmFnZXIuaXRlbVN0YXJ0KGEpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiJiZiKGYpO2UubWFuYWdlci5pdGVtRW5kKGEpfSwwKSxmO2M9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLFwiaW1nXCIpO2MuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixmdW5jdGlvbigpe0liLmFkZChhLHRoaXMpO2ImJmIodGhpcyk7ZS5tYW5hZ2VyLml0ZW1FbmQoYSl9LCExKTtjLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLGZ1bmN0aW9uKGIpe2QmJmQoYik7ZS5tYW5hZ2VyLml0ZW1FbmQoYSk7ZS5tYW5hZ2VyLml0ZW1FcnJvcihhKX0sXG4gICAgITEpO1wiZGF0YTpcIiE9PWEuc3Vic3RyKDAsNSkmJnZvaWQgMCE9PXRoaXMuY3Jvc3NPcmlnaW4mJihjLmNyb3NzT3JpZ2luPXRoaXMuY3Jvc3NPcmlnaW4pO2UubWFuYWdlci5pdGVtU3RhcnQoYSk7Yy5zcmM9YTtyZXR1cm4gY30sc2V0Q3Jvc3NPcmlnaW46ZnVuY3Rpb24oYSl7dGhpcy5jcm9zc09yaWdpbj1hO3JldHVybiB0aGlzfSxzZXRQYXRoOmZ1bmN0aW9uKGEpe3RoaXMucGF0aD1hO3JldHVybiB0aGlzfX0pO09iamVjdC5hc3NpZ24oamUucHJvdG90eXBlLHtjcm9zc09yaWdpbjpcIkFub255bW91c1wiLGxvYWQ6ZnVuY3Rpb24oYSxiLGMsZCl7ZnVuY3Rpb24gZShjKXtnLmxvYWQoYVtjXSxmdW5jdGlvbihhKXtmLmltYWdlc1tjXT1hO2grKzs2PT09aCYmKGYubmVlZHNVcGRhdGU9ITAsYiYmYihmKSl9LHZvaWQgMCxkKX12YXIgZj1uZXcgZGIsZz1uZXcgYWQodGhpcy5tYW5hZ2VyKTtnLnNldENyb3NzT3JpZ2luKHRoaXMuY3Jvc3NPcmlnaW4pO2cuc2V0UGF0aCh0aGlzLnBhdGgpO1xuICAgIHZhciBoPTA7Zm9yKGM9MDtjPGEubGVuZ3RoOysrYyllKGMpO3JldHVybiBmfSxzZXRDcm9zc09yaWdpbjpmdW5jdGlvbihhKXt0aGlzLmNyb3NzT3JpZ2luPWE7cmV0dXJuIHRoaXN9LHNldFBhdGg6ZnVuY3Rpb24oYSl7dGhpcy5wYXRoPWE7cmV0dXJuIHRoaXN9fSk7T2JqZWN0LmFzc2lnbihBZC5wcm90b3R5cGUse2Nyb3NzT3JpZ2luOlwiQW5vbnltb3VzXCIsbG9hZDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uZXcgVSxmPW5ldyBhZCh0aGlzLm1hbmFnZXIpO2Yuc2V0Q3Jvc3NPcmlnaW4odGhpcy5jcm9zc09yaWdpbik7Zi5zZXRQYXRoKHRoaXMucGF0aCk7Zi5sb2FkKGEsZnVuY3Rpb24oYyl7ZS5pbWFnZT1jO2M9MDxhLnNlYXJjaCgvXFwuKGpwZ3xqcGVnKSQvKXx8MD09PWEuc2VhcmNoKC9eZGF0YVxcOmltYWdlXFwvanBlZy8pO2UuZm9ybWF0PWM/MTAyMjoxMDIzO2UubmVlZHNVcGRhdGU9ITA7dm9pZCAwIT09YiYmYihlKX0sYyxkKTtyZXR1cm4gZX0sc2V0Q3Jvc3NPcmlnaW46ZnVuY3Rpb24oYSl7dGhpcy5jcm9zc09yaWdpbj1cbiAgICBhO3JldHVybiB0aGlzfSxzZXRQYXRoOmZ1bmN0aW9uKGEpe3RoaXMucGF0aD1hO3JldHVybiB0aGlzfX0pO09iamVjdC5hc3NpZ24oQy5wcm90b3R5cGUse2dldFBvaW50OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuQ3VydmU6IC5nZXRQb2ludCgpIG5vdCBpbXBsZW1lbnRlZC5cIik7cmV0dXJuIG51bGx9LGdldFBvaW50QXQ6ZnVuY3Rpb24oYSxiKXthPXRoaXMuZ2V0VXRvVG1hcHBpbmcoYSk7cmV0dXJuIHRoaXMuZ2V0UG9pbnQoYSxiKX0sZ2V0UG9pbnRzOmZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEmJihhPTUpO2Zvcih2YXIgYj1bXSxjPTA7Yzw9YTtjKyspYi5wdXNoKHRoaXMuZ2V0UG9pbnQoYy9hKSk7cmV0dXJuIGJ9LGdldFNwYWNlZFBvaW50czpmdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT01KTtmb3IodmFyIGI9W10sYz0wO2M8PWE7YysrKWIucHVzaCh0aGlzLmdldFBvaW50QXQoYy9hKSk7cmV0dXJuIGJ9LGdldExlbmd0aDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0TGVuZ3RocygpO1xuICAgIHJldHVybiBhW2EubGVuZ3RoLTFdfSxnZXRMZW5ndGhzOmZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEmJihhPXRoaXMuYXJjTGVuZ3RoRGl2aXNpb25zKTtpZih0aGlzLmNhY2hlQXJjTGVuZ3RocyYmdGhpcy5jYWNoZUFyY0xlbmd0aHMubGVuZ3RoPT09YSsxJiYhdGhpcy5uZWVkc1VwZGF0ZSlyZXR1cm4gdGhpcy5jYWNoZUFyY0xlbmd0aHM7dGhpcy5uZWVkc1VwZGF0ZT0hMTt2YXIgYj1bXSxjPXRoaXMuZ2V0UG9pbnQoMCksZCxlPTA7Yi5wdXNoKDApO2ZvcihkPTE7ZDw9YTtkKyspe3ZhciBmPXRoaXMuZ2V0UG9pbnQoZC9hKTtlKz1mLmRpc3RhbmNlVG8oYyk7Yi5wdXNoKGUpO2M9Zn1yZXR1cm4gdGhpcy5jYWNoZUFyY0xlbmd0aHM9Yn0sdXBkYXRlQXJjTGVuZ3RoczpmdW5jdGlvbigpe3RoaXMubmVlZHNVcGRhdGU9ITA7dGhpcy5nZXRMZW5ndGhzKCl9LGdldFV0b1RtYXBwaW5nOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRMZW5ndGhzKCksZD1jLmxlbmd0aDtiPWI/YjphKlxuICAgIGNbZC0xXTtmb3IodmFyIGU9MCxmPWQtMSxnO2U8PWY7KWlmKGE9TWF0aC5mbG9vcihlKyhmLWUpLzIpLGc9Y1thXS1iLDA+ZyllPWErMTtlbHNlIGlmKDA8ZylmPWEtMTtlbHNle2Y9YTticmVha31hPWY7aWYoY1thXT09PWIpcmV0dXJuIGEvKGQtMSk7ZT1jW2FdO3JldHVybihhKyhiLWUpLyhjW2ErMV0tZSkpLyhkLTEpfSxnZXRUYW5nZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEtMUUtNDthKz0xRS00OzA+YiYmKGI9MCk7MTxhJiYoYT0xKTtiPXRoaXMuZ2V0UG9pbnQoYik7cmV0dXJuIHRoaXMuZ2V0UG9pbnQoYSkuY2xvbmUoKS5zdWIoYikubm9ybWFsaXplKCl9LGdldFRhbmdlbnRBdDpmdW5jdGlvbihhKXthPXRoaXMuZ2V0VXRvVG1hcHBpbmcoYSk7cmV0dXJuIHRoaXMuZ2V0VGFuZ2VudChhKX0sY29tcHV0ZUZyZW5ldEZyYW1lczpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBwLGQ9W10sZT1bXSxmPVtdLGc9bmV3IHAsaD1uZXcgTyxrO2ZvcihrPTA7azw9YTtrKyspe3ZhciBtPVxuICAgIGsvYTtkW2tdPXRoaXMuZ2V0VGFuZ2VudEF0KG0pO2Rba10ubm9ybWFsaXplKCl9ZVswXT1uZXcgcDtmWzBdPW5ldyBwO2s9TnVtYmVyLk1BWF9WQUxVRTttPU1hdGguYWJzKGRbMF0ueCk7dmFyIGw9TWF0aC5hYnMoZFswXS55KSxuPU1hdGguYWJzKGRbMF0ueik7bTw9ayYmKGs9bSxjLnNldCgxLDAsMCkpO2w8PWsmJihrPWwsYy5zZXQoMCwxLDApKTtuPD1rJiZjLnNldCgwLDAsMSk7Zy5jcm9zc1ZlY3RvcnMoZFswXSxjKS5ub3JtYWxpemUoKTtlWzBdLmNyb3NzVmVjdG9ycyhkWzBdLGcpO2ZbMF0uY3Jvc3NWZWN0b3JzKGRbMF0sZVswXSk7Zm9yKGs9MTtrPD1hO2srKyllW2tdPWVbay0xXS5jbG9uZSgpLGZba109ZltrLTFdLmNsb25lKCksZy5jcm9zc1ZlY3RvcnMoZFtrLTFdLGRba10pLGcubGVuZ3RoKCk+TnVtYmVyLkVQU0lMT04mJihnLm5vcm1hbGl6ZSgpLGM9TWF0aC5hY29zKFEuY2xhbXAoZFtrLTFdLmRvdChkW2tdKSwtMSwxKSksZVtrXS5hcHBseU1hdHJpeDQoaC5tYWtlUm90YXRpb25BeGlzKGcsXG4gICAgYykpKSxmW2tdLmNyb3NzVmVjdG9ycyhkW2tdLGVba10pO2lmKCEwPT09Yilmb3IoYz1NYXRoLmFjb3MoUS5jbGFtcChlWzBdLmRvdChlW2FdKSwtMSwxKSksYy89YSwwPGRbMF0uZG90KGcuY3Jvc3NWZWN0b3JzKGVbMF0sZVthXSkpJiYoYz0tYyksaz0xO2s8PWE7aysrKWVba10uYXBwbHlNYXRyaXg0KGgubWFrZVJvdGF0aW9uQXhpcyhkW2tdLGMqaykpLGZba10uY3Jvc3NWZWN0b3JzKGRba10sZVtrXSk7cmV0dXJue3RhbmdlbnRzOmQsbm9ybWFsczplLGJpbm9ybWFsczpmfX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5hcmNMZW5ndGhEaXZpc2lvbnM9YS5hcmNMZW5ndGhEaXZpc2lvbnM7cmV0dXJuIHRoaXN9LHRvSlNPTjpmdW5jdGlvbigpe3ZhciBhPXttZXRhZGF0YTp7dmVyc2lvbjo0LjUsdHlwZTpcIkN1cnZlXCIsZ2VuZXJhdG9yOlwiQ3VydmUudG9KU09OXCJ9fTthLmFyY0xlbmd0aERpdmlzaW9ucz1cbiAgICB0aGlzLmFyY0xlbmd0aERpdmlzaW9uczthLnR5cGU9dGhpcy50eXBlO3JldHVybiBhfSxmcm9tSlNPTjpmdW5jdGlvbihhKXt0aGlzLmFyY0xlbmd0aERpdmlzaW9ucz1hLmFyY0xlbmd0aERpdmlzaW9ucztyZXR1cm4gdGhpc319KTtCYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShDLnByb3RvdHlwZSk7QmEucHJvdG90eXBlLmNvbnN0cnVjdG9yPUJhO0JhLnByb3RvdHlwZS5pc0VsbGlwc2VDdXJ2ZT0hMDtCYS5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24oYSxiKXtiPWJ8fG5ldyBEO2Zvcih2YXIgYz0yKk1hdGguUEksZD10aGlzLmFFbmRBbmdsZS10aGlzLmFTdGFydEFuZ2xlLGU9TWF0aC5hYnMoZCk8TnVtYmVyLkVQU0lMT047MD5kOylkKz1jO2Zvcig7ZD5jOylkLT1jO2Q8TnVtYmVyLkVQU0lMT04mJihkPWU/MDpjKTshMCE9PXRoaXMuYUNsb2Nrd2lzZXx8ZXx8KGQ9ZD09PWM/LWM6ZC1jKTtjPXRoaXMuYVN0YXJ0QW5nbGUrYSpkO2E9dGhpcy5hWCt0aGlzLnhSYWRpdXMqXG4gICAgTWF0aC5jb3MoYyk7dmFyIGY9dGhpcy5hWSt0aGlzLnlSYWRpdXMqTWF0aC5zaW4oYyk7MCE9PXRoaXMuYVJvdGF0aW9uJiYoYz1NYXRoLmNvcyh0aGlzLmFSb3RhdGlvbiksZD1NYXRoLnNpbih0aGlzLmFSb3RhdGlvbiksZT1hLXRoaXMuYVgsZi09dGhpcy5hWSxhPWUqYy1mKmQrdGhpcy5hWCxmPWUqZCtmKmMrdGhpcy5hWSk7cmV0dXJuIGIuc2V0KGEsZil9O0JhLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe0MucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuYVg9YS5hWDt0aGlzLmFZPWEuYVk7dGhpcy54UmFkaXVzPWEueFJhZGl1czt0aGlzLnlSYWRpdXM9YS55UmFkaXVzO3RoaXMuYVN0YXJ0QW5nbGU9YS5hU3RhcnRBbmdsZTt0aGlzLmFFbmRBbmdsZT1hLmFFbmRBbmdsZTt0aGlzLmFDbG9ja3dpc2U9YS5hQ2xvY2t3aXNlO3RoaXMuYVJvdGF0aW9uPWEuYVJvdGF0aW9uO3JldHVybiB0aGlzfTtCYS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGE9XG4gICAgQy5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7YS5hWD10aGlzLmFYO2EuYVk9dGhpcy5hWTthLnhSYWRpdXM9dGhpcy54UmFkaXVzO2EueVJhZGl1cz10aGlzLnlSYWRpdXM7YS5hU3RhcnRBbmdsZT10aGlzLmFTdGFydEFuZ2xlO2EuYUVuZEFuZ2xlPXRoaXMuYUVuZEFuZ2xlO2EuYUNsb2Nrd2lzZT10aGlzLmFDbG9ja3dpc2U7YS5hUm90YXRpb249dGhpcy5hUm90YXRpb247cmV0dXJuIGF9O0JhLnByb3RvdHlwZS5mcm9tSlNPTj1mdW5jdGlvbihhKXtDLnByb3RvdHlwZS5mcm9tSlNPTi5jYWxsKHRoaXMsYSk7dGhpcy5hWD1hLmFYO3RoaXMuYVk9YS5hWTt0aGlzLnhSYWRpdXM9YS54UmFkaXVzO3RoaXMueVJhZGl1cz1hLnlSYWRpdXM7dGhpcy5hU3RhcnRBbmdsZT1hLmFTdGFydEFuZ2xlO3RoaXMuYUVuZEFuZ2xlPWEuYUVuZEFuZ2xlO3RoaXMuYUNsb2Nrd2lzZT1hLmFDbG9ja3dpc2U7dGhpcy5hUm90YXRpb249YS5hUm90YXRpb247cmV0dXJuIHRoaXN9O2hjLnByb3RvdHlwZT1cbiAgICBPYmplY3QuY3JlYXRlKEJhLnByb3RvdHlwZSk7aGMucHJvdG90eXBlLmNvbnN0cnVjdG9yPWhjO2hjLnByb3RvdHlwZS5pc0FyY0N1cnZlPSEwO3ZhciBUZD1uZXcgcCxFZT1uZXcga2UsRmU9bmV3IGtlLEdlPW5ldyBrZTtjYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShDLnByb3RvdHlwZSk7Y2EucHJvdG90eXBlLmNvbnN0cnVjdG9yPWNhO2NhLnByb3RvdHlwZS5pc0NhdG11bGxSb21DdXJ2ZTM9ITA7Y2EucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKGEsYil7Yj1ifHxuZXcgcDt2YXIgYz10aGlzLnBvaW50cyxkPWMubGVuZ3RoO2EqPWQtKHRoaXMuY2xvc2VkPzA6MSk7dmFyIGU9TWF0aC5mbG9vcihhKTthLT1lO3RoaXMuY2xvc2VkP2UrPTA8ZT8wOihNYXRoLmZsb29yKE1hdGguYWJzKGUpL2MubGVuZ3RoKSsxKSpjLmxlbmd0aDowPT09YSYmZT09PWQtMSYmKGU9ZC0yLGE9MSk7aWYodGhpcy5jbG9zZWR8fDA8ZSl2YXIgZj1jWyhlLTEpJWRdO2Vsc2UgVGQuc3ViVmVjdG9ycyhjWzBdLFxuICAgIGNbMV0pLmFkZChjWzBdKSxmPVRkO3ZhciBnPWNbZSVkXTt2YXIgaD1jWyhlKzEpJWRdO3RoaXMuY2xvc2VkfHxlKzI8ZD9jPWNbKGUrMiklZF06KFRkLnN1YlZlY3RvcnMoY1tkLTFdLGNbZC0yXSkuYWRkKGNbZC0xXSksYz1UZCk7aWYoXCJjZW50cmlwZXRhbFwiPT09dGhpcy5jdXJ2ZVR5cGV8fFwiY2hvcmRhbFwiPT09dGhpcy5jdXJ2ZVR5cGUpe3ZhciBrPVwiY2hvcmRhbFwiPT09dGhpcy5jdXJ2ZVR5cGU/LjU6LjI1LGQ9TWF0aC5wb3coZi5kaXN0YW5jZVRvU3F1YXJlZChnKSxrKSxlPU1hdGgucG93KGcuZGlzdGFuY2VUb1NxdWFyZWQoaCksayksaz1NYXRoLnBvdyhoLmRpc3RhbmNlVG9TcXVhcmVkKGMpLGspOzFFLTQ+ZSYmKGU9MSk7MUUtND5kJiYoZD1lKTsxRS00PmsmJihrPWUpO0VlLmluaXROb251bmlmb3JtQ2F0bXVsbFJvbShmLngsZy54LGgueCxjLngsZCxlLGspO0ZlLmluaXROb251bmlmb3JtQ2F0bXVsbFJvbShmLnksZy55LGgueSxjLnksZCxlLGspO0dlLmluaXROb251bmlmb3JtQ2F0bXVsbFJvbShmLnosXG4gICAgZy56LGgueixjLnosZCxlLGspfWVsc2VcImNhdG11bGxyb21cIj09PXRoaXMuY3VydmVUeXBlJiYoRWUuaW5pdENhdG11bGxSb20oZi54LGcueCxoLngsYy54LHRoaXMudGVuc2lvbiksRmUuaW5pdENhdG11bGxSb20oZi55LGcueSxoLnksYy55LHRoaXMudGVuc2lvbiksR2UuaW5pdENhdG11bGxSb20oZi56LGcueixoLnosYy56LHRoaXMudGVuc2lvbikpO2Iuc2V0KEVlLmNhbGMoYSksRmUuY2FsYyhhKSxHZS5jYWxjKGEpKTtyZXR1cm4gYn07Y2EucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7Qy5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5wb2ludHM9W107Zm9yKHZhciBiPTAsYz1hLnBvaW50cy5sZW5ndGg7YjxjO2IrKyl0aGlzLnBvaW50cy5wdXNoKGEucG9pbnRzW2JdLmNsb25lKCkpO3RoaXMuY2xvc2VkPWEuY2xvc2VkO3RoaXMuY3VydmVUeXBlPWEuY3VydmVUeXBlO3RoaXMudGVuc2lvbj1hLnRlbnNpb247cmV0dXJuIHRoaXN9O2NhLnByb3RvdHlwZS50b0pTT049XG4gICAgZnVuY3Rpb24oKXt2YXIgYT1DLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTthLnBvaW50cz1bXTtmb3IodmFyIGI9MCxjPXRoaXMucG9pbnRzLmxlbmd0aDtiPGM7YisrKWEucG9pbnRzLnB1c2godGhpcy5wb2ludHNbYl0udG9BcnJheSgpKTthLmNsb3NlZD10aGlzLmNsb3NlZDthLmN1cnZlVHlwZT10aGlzLmN1cnZlVHlwZTthLnRlbnNpb249dGhpcy50ZW5zaW9uO3JldHVybiBhfTtjYS5wcm90b3R5cGUuZnJvbUpTT049ZnVuY3Rpb24oYSl7Qy5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLGEpO3RoaXMucG9pbnRzPVtdO2Zvcih2YXIgYj0wLGM9YS5wb2ludHMubGVuZ3RoO2I8YztiKyspe3ZhciBkPWEucG9pbnRzW2JdO3RoaXMucG9pbnRzLnB1c2goKG5ldyBwKS5mcm9tQXJyYXkoZCkpfXRoaXMuY2xvc2VkPWEuY2xvc2VkO3RoaXMuY3VydmVUeXBlPWEuY3VydmVUeXBlO3RoaXMudGVuc2lvbj1hLnRlbnNpb247cmV0dXJuIHRoaXN9O09hLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEMucHJvdG90eXBlKTtcbiAgICBPYS5wcm90b3R5cGUuY29uc3RydWN0b3I9T2E7T2EucHJvdG90eXBlLmlzQ3ViaWNCZXppZXJDdXJ2ZT0hMDtPYS5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24oYSxiKXtiPWJ8fG5ldyBEO3ZhciBjPXRoaXMudjAsZD10aGlzLnYxLGU9dGhpcy52MixmPXRoaXMudjM7Yi5zZXQoY2QoYSxjLngsZC54LGUueCxmLngpLGNkKGEsYy55LGQueSxlLnksZi55KSk7cmV0dXJuIGJ9O09hLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe0MucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMudjAuY29weShhLnYwKTt0aGlzLnYxLmNvcHkoYS52MSk7dGhpcy52Mi5jb3B5KGEudjIpO3RoaXMudjMuY29weShhLnYzKTtyZXR1cm4gdGhpc307T2EucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBhPUMucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO2EudjA9dGhpcy52MC50b0FycmF5KCk7YS52MT10aGlzLnYxLnRvQXJyYXkoKTthLnYyPXRoaXMudjIudG9BcnJheSgpO2EudjM9XG4gICAgdGhpcy52My50b0FycmF5KCk7cmV0dXJuIGF9O09hLnByb3RvdHlwZS5mcm9tSlNPTj1mdW5jdGlvbihhKXtDLnByb3RvdHlwZS5mcm9tSlNPTi5jYWxsKHRoaXMsYSk7dGhpcy52MC5mcm9tQXJyYXkoYS52MCk7dGhpcy52MS5mcm9tQXJyYXkoYS52MSk7dGhpcy52Mi5mcm9tQXJyYXkoYS52Mik7dGhpcy52My5mcm9tQXJyYXkoYS52Myk7cmV0dXJuIHRoaXN9O1ZhLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEMucHJvdG90eXBlKTtWYS5wcm90b3R5cGUuY29uc3RydWN0b3I9VmE7VmEucHJvdG90eXBlLmlzQ3ViaWNCZXppZXJDdXJ2ZTM9ITA7VmEucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKGEsYil7Yj1ifHxuZXcgcDt2YXIgYz10aGlzLnYwLGQ9dGhpcy52MSxlPXRoaXMudjIsZj10aGlzLnYzO2Iuc2V0KGNkKGEsYy54LGQueCxlLngsZi54KSxjZChhLGMueSxkLnksZS55LGYueSksY2QoYSxjLnosZC56LGUueixmLnopKTtyZXR1cm4gYn07VmEucHJvdG90eXBlLmNvcHk9XG4gICAgZnVuY3Rpb24oYSl7Qy5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy52MC5jb3B5KGEudjApO3RoaXMudjEuY29weShhLnYxKTt0aGlzLnYyLmNvcHkoYS52Mik7dGhpcy52My5jb3B5KGEudjMpO3JldHVybiB0aGlzfTtWYS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGE9Qy5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7YS52MD10aGlzLnYwLnRvQXJyYXkoKTthLnYxPXRoaXMudjEudG9BcnJheSgpO2EudjI9dGhpcy52Mi50b0FycmF5KCk7YS52Mz10aGlzLnYzLnRvQXJyYXkoKTtyZXR1cm4gYX07VmEucHJvdG90eXBlLmZyb21KU09OPWZ1bmN0aW9uKGEpe0MucHJvdG90eXBlLmZyb21KU09OLmNhbGwodGhpcyxhKTt0aGlzLnYwLmZyb21BcnJheShhLnYwKTt0aGlzLnYxLmZyb21BcnJheShhLnYxKTt0aGlzLnYyLmZyb21BcnJheShhLnYyKTt0aGlzLnYzLmZyb21BcnJheShhLnYzKTtyZXR1cm4gdGhpc307eWEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoQy5wcm90b3R5cGUpO1xuICAgIHlhLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj15YTt5YS5wcm90b3R5cGUuaXNMaW5lQ3VydmU9ITA7eWEucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKGEsYil7Yj1ifHxuZXcgRDsxPT09YT9iLmNvcHkodGhpcy52Mik6KGIuY29weSh0aGlzLnYyKS5zdWIodGhpcy52MSksYi5tdWx0aXBseVNjYWxhcihhKS5hZGQodGhpcy52MSkpO3JldHVybiBifTt5YS5wcm90b3R5cGUuZ2V0UG9pbnRBdD1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmdldFBvaW50KGEsYil9O3lhLnByb3RvdHlwZS5nZXRUYW5nZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudjIuY2xvbmUoKS5zdWIodGhpcy52MSkubm9ybWFsaXplKCl9O3lhLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe0MucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMudjEuY29weShhLnYxKTt0aGlzLnYyLmNvcHkoYS52Mik7cmV0dXJuIHRoaXN9O3lhLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgYT1DLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtcbiAgICBhLnYxPXRoaXMudjEudG9BcnJheSgpO2EudjI9dGhpcy52Mi50b0FycmF5KCk7cmV0dXJuIGF9O3lhLnByb3RvdHlwZS5mcm9tSlNPTj1mdW5jdGlvbihhKXtDLnByb3RvdHlwZS5mcm9tSlNPTi5jYWxsKHRoaXMsYSk7dGhpcy52MS5mcm9tQXJyYXkoYS52MSk7dGhpcy52Mi5mcm9tQXJyYXkoYS52Mik7cmV0dXJuIHRoaXN9O1BhLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEMucHJvdG90eXBlKTtQYS5wcm90b3R5cGUuY29uc3RydWN0b3I9UGE7UGEucHJvdG90eXBlLmlzTGluZUN1cnZlMz0hMDtQYS5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24oYSxiKXtiPWJ8fG5ldyBwOzE9PT1hP2IuY29weSh0aGlzLnYyKTooYi5jb3B5KHRoaXMudjIpLnN1Yih0aGlzLnYxKSxiLm11bHRpcGx5U2NhbGFyKGEpLmFkZCh0aGlzLnYxKSk7cmV0dXJuIGJ9O1BhLnByb3RvdHlwZS5nZXRQb2ludEF0PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZ2V0UG9pbnQoYSxiKX07UGEucHJvdG90eXBlLmNvcHk9XG4gICAgZnVuY3Rpb24oYSl7Qy5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy52MS5jb3B5KGEudjEpO3RoaXMudjIuY29weShhLnYyKTtyZXR1cm4gdGhpc307UGEucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBhPUMucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO2EudjE9dGhpcy52MS50b0FycmF5KCk7YS52Mj10aGlzLnYyLnRvQXJyYXkoKTtyZXR1cm4gYX07UGEucHJvdG90eXBlLmZyb21KU09OPWZ1bmN0aW9uKGEpe0MucHJvdG90eXBlLmZyb21KU09OLmNhbGwodGhpcyxhKTt0aGlzLnYxLmZyb21BcnJheShhLnYxKTt0aGlzLnYyLmZyb21BcnJheShhLnYyKTtyZXR1cm4gdGhpc307UWEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoQy5wcm90b3R5cGUpO1FhLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1RYTtRYS5wcm90b3R5cGUuaXNRdWFkcmF0aWNCZXppZXJDdXJ2ZT0hMDtRYS5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24oYSxiKXtiPWJ8fG5ldyBEO3ZhciBjPVxuICAgIHRoaXMudjAsZD10aGlzLnYxLGU9dGhpcy52MjtiLnNldChiZChhLGMueCxkLngsZS54KSxiZChhLGMueSxkLnksZS55KSk7cmV0dXJuIGJ9O1FhLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe0MucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMudjAuY29weShhLnYwKTt0aGlzLnYxLmNvcHkoYS52MSk7dGhpcy52Mi5jb3B5KGEudjIpO3JldHVybiB0aGlzfTtRYS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGE9Qy5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7YS52MD10aGlzLnYwLnRvQXJyYXkoKTthLnYxPXRoaXMudjEudG9BcnJheSgpO2EudjI9dGhpcy52Mi50b0FycmF5KCk7cmV0dXJuIGF9O1FhLnByb3RvdHlwZS5mcm9tSlNPTj1mdW5jdGlvbihhKXtDLnByb3RvdHlwZS5mcm9tSlNPTi5jYWxsKHRoaXMsYSk7dGhpcy52MC5mcm9tQXJyYXkoYS52MCk7dGhpcy52MS5mcm9tQXJyYXkoYS52MSk7dGhpcy52Mi5mcm9tQXJyYXkoYS52Mik7cmV0dXJuIHRoaXN9O1xuICAgIFdhLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEMucHJvdG90eXBlKTtXYS5wcm90b3R5cGUuY29uc3RydWN0b3I9V2E7V2EucHJvdG90eXBlLmlzUXVhZHJhdGljQmV6aWVyQ3VydmUzPSEwO1dhLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbihhLGIpe2I9Ynx8bmV3IHA7dmFyIGM9dGhpcy52MCxkPXRoaXMudjEsZT10aGlzLnYyO2Iuc2V0KGJkKGEsYy54LGQueCxlLngpLGJkKGEsYy55LGQueSxlLnkpLGJkKGEsYy56LGQueixlLnopKTtyZXR1cm4gYn07V2EucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7Qy5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy52MC5jb3B5KGEudjApO3RoaXMudjEuY29weShhLnYxKTt0aGlzLnYyLmNvcHkoYS52Mik7cmV0dXJuIHRoaXN9O1dhLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgYT1DLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTthLnYwPXRoaXMudjAudG9BcnJheSgpO2EudjE9dGhpcy52MS50b0FycmF5KCk7XG4gICAgYS52Mj10aGlzLnYyLnRvQXJyYXkoKTtyZXR1cm4gYX07V2EucHJvdG90eXBlLmZyb21KU09OPWZ1bmN0aW9uKGEpe0MucHJvdG90eXBlLmZyb21KU09OLmNhbGwodGhpcyxhKTt0aGlzLnYwLmZyb21BcnJheShhLnYwKTt0aGlzLnYxLmZyb21BcnJheShhLnYxKTt0aGlzLnYyLmZyb21BcnJheShhLnYyKTtyZXR1cm4gdGhpc307UmEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoQy5wcm90b3R5cGUpO1JhLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1SYTtSYS5wcm90b3R5cGUuaXNTcGxpbmVDdXJ2ZT0hMDtSYS5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24oYSxiKXtiPWJ8fG5ldyBEO3ZhciBjPXRoaXMucG9pbnRzLGQ9KGMubGVuZ3RoLTEpKmE7YT1NYXRoLmZsb29yKGQpO3ZhciBkPWQtYSxlPWNbMD09PWE/YTphLTFdLGY9Y1thXSxnPWNbYT5jLmxlbmd0aC0yP2MubGVuZ3RoLTE6YSsxXSxjPWNbYT5jLmxlbmd0aC0zP2MubGVuZ3RoLTE6YSsyXTtiLnNldChoZihkLGUueCxmLngsXG4gICAgZy54LGMueCksaGYoZCxlLnksZi55LGcueSxjLnkpKTtyZXR1cm4gYn07UmEucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7Qy5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5wb2ludHM9W107Zm9yKHZhciBiPTAsYz1hLnBvaW50cy5sZW5ndGg7YjxjO2IrKyl0aGlzLnBvaW50cy5wdXNoKGEucG9pbnRzW2JdLmNsb25lKCkpO3JldHVybiB0aGlzfTtSYS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGE9Qy5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7YS5wb2ludHM9W107Zm9yKHZhciBiPTAsYz10aGlzLnBvaW50cy5sZW5ndGg7YjxjO2IrKylhLnBvaW50cy5wdXNoKHRoaXMucG9pbnRzW2JdLnRvQXJyYXkoKSk7cmV0dXJuIGF9O1JhLnByb3RvdHlwZS5mcm9tSlNPTj1mdW5jdGlvbihhKXtDLnByb3RvdHlwZS5mcm9tSlNPTi5jYWxsKHRoaXMsYSk7dGhpcy5wb2ludHM9W107Zm9yKHZhciBiPTAsYz1hLnBvaW50cy5sZW5ndGg7YjxjO2IrKyl7dmFyIGQ9XG4gICAgYS5wb2ludHNbYl07dGhpcy5wb2ludHMucHVzaCgobmV3IEQpLmZyb21BcnJheShkKSl9cmV0dXJuIHRoaXN9O3ZhciBOZz1PYmplY3QuZnJlZXplKHtBcmNDdXJ2ZTpoYyxDYXRtdWxsUm9tQ3VydmUzOmNhLEN1YmljQmV6aWVyQ3VydmU6T2EsQ3ViaWNCZXppZXJDdXJ2ZTM6VmEsRWxsaXBzZUN1cnZlOkJhLExpbmVDdXJ2ZTp5YSxMaW5lQ3VydmUzOlBhLFF1YWRyYXRpY0JlemllckN1cnZlOlFhLFF1YWRyYXRpY0JlemllckN1cnZlMzpXYSxTcGxpbmVDdXJ2ZTpSYX0pO2JiLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoQy5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpiYixhZGQ6ZnVuY3Rpb24oYSl7dGhpcy5jdXJ2ZXMucHVzaChhKX0sY2xvc2VQYXRoOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jdXJ2ZXNbMF0uZ2V0UG9pbnQoMCksYj10aGlzLmN1cnZlc1t0aGlzLmN1cnZlcy5sZW5ndGgtMV0uZ2V0UG9pbnQoMSk7YS5lcXVhbHMoYil8fHRoaXMuY3VydmVzLnB1c2gobmV3IHlhKGIsXG4gICAgYSkpfSxnZXRQb2ludDpmdW5jdGlvbihhKXt2YXIgYj1hKnRoaXMuZ2V0TGVuZ3RoKCksYz10aGlzLmdldEN1cnZlTGVuZ3RocygpO2ZvcihhPTA7YTxjLmxlbmd0aDspe2lmKGNbYV0+PWIpcmV0dXJuIGI9Y1thXS1iLGE9dGhpcy5jdXJ2ZXNbYV0sYz1hLmdldExlbmd0aCgpLGEuZ2V0UG9pbnRBdCgwPT09Yz8wOjEtYi9jKTthKyt9cmV0dXJuIG51bGx9LGdldExlbmd0aDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0Q3VydmVMZW5ndGhzKCk7cmV0dXJuIGFbYS5sZW5ndGgtMV19LHVwZGF0ZUFyY0xlbmd0aHM6ZnVuY3Rpb24oKXt0aGlzLm5lZWRzVXBkYXRlPSEwO3RoaXMuY2FjaGVMZW5ndGhzPW51bGw7dGhpcy5nZXRDdXJ2ZUxlbmd0aHMoKX0sZ2V0Q3VydmVMZW5ndGhzOmZ1bmN0aW9uKCl7aWYodGhpcy5jYWNoZUxlbmd0aHMmJnRoaXMuY2FjaGVMZW5ndGhzLmxlbmd0aD09PXRoaXMuY3VydmVzLmxlbmd0aClyZXR1cm4gdGhpcy5jYWNoZUxlbmd0aHM7Zm9yKHZhciBhPVtdLFxuICAgIGI9MCxjPTAsZD10aGlzLmN1cnZlcy5sZW5ndGg7YzxkO2MrKyliKz10aGlzLmN1cnZlc1tjXS5nZXRMZW5ndGgoKSxhLnB1c2goYik7cmV0dXJuIHRoaXMuY2FjaGVMZW5ndGhzPWF9LGdldFNwYWNlZFBvaW50czpmdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT00MCk7Zm9yKHZhciBiPVtdLGM9MDtjPD1hO2MrKyliLnB1c2godGhpcy5nZXRQb2ludChjL2EpKTt0aGlzLmF1dG9DbG9zZSYmYi5wdXNoKGJbMF0pO3JldHVybiBifSxnZXRQb2ludHM6ZnVuY3Rpb24oYSl7YT1hfHwxMjtmb3IodmFyIGI9W10sYyxkPTAsZT10aGlzLmN1cnZlcztkPGUubGVuZ3RoO2QrKylmb3IodmFyIGY9ZVtkXSxmPWYuZ2V0UG9pbnRzKGYmJmYuaXNFbGxpcHNlQ3VydmU/MiphOmYmJmYuaXNMaW5lQ3VydmU/MTpmJiZmLmlzU3BsaW5lQ3VydmU/YSpmLnBvaW50cy5sZW5ndGg6YSksZz0wO2c8Zi5sZW5ndGg7ZysrKXt2YXIgaD1mW2ddO2MmJmMuZXF1YWxzKGgpfHwoYi5wdXNoKGgpLGM9aCl9dGhpcy5hdXRvQ2xvc2UmJlxuICAgIDE8Yi5sZW5ndGgmJiFiW2IubGVuZ3RoLTFdLmVxdWFscyhiWzBdKSYmYi5wdXNoKGJbMF0pO3JldHVybiBifSxjb3B5OmZ1bmN0aW9uKGEpe0MucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuY3VydmVzPVtdO2Zvcih2YXIgYj0wLGM9YS5jdXJ2ZXMubGVuZ3RoO2I8YztiKyspdGhpcy5jdXJ2ZXMucHVzaChhLmN1cnZlc1tiXS5jbG9uZSgpKTt0aGlzLmF1dG9DbG9zZT1hLmF1dG9DbG9zZTtyZXR1cm4gdGhpc30sdG9KU09OOmZ1bmN0aW9uKCl7dmFyIGE9Qy5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7YS5hdXRvQ2xvc2U9dGhpcy5hdXRvQ2xvc2U7YS5jdXJ2ZXM9W107Zm9yKHZhciBiPTAsYz10aGlzLmN1cnZlcy5sZW5ndGg7YjxjO2IrKylhLmN1cnZlcy5wdXNoKHRoaXMuY3VydmVzW2JdLnRvSlNPTigpKTtyZXR1cm4gYX0sZnJvbUpTT046ZnVuY3Rpb24oYSl7Qy5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLGEpO3RoaXMuYXV0b0Nsb3NlPWEuYXV0b0Nsb3NlO1xuICAgIHRoaXMuY3VydmVzPVtdO2Zvcih2YXIgYj0wLGM9YS5jdXJ2ZXMubGVuZ3RoO2I8YztiKyspe3ZhciBkPWEuY3VydmVzW2JdO3RoaXMuY3VydmVzLnB1c2goKG5ldyBOZ1tkLnR5cGVdKS5mcm9tSlNPTihkKSl9cmV0dXJuIHRoaXN9fSk7U2EucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShiYi5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpTYSxzZXRGcm9tUG9pbnRzOmZ1bmN0aW9uKGEpe3RoaXMubW92ZVRvKGFbMF0ueCxhWzBdLnkpO2Zvcih2YXIgYj0xLGM9YS5sZW5ndGg7YjxjO2IrKyl0aGlzLmxpbmVUbyhhW2JdLngsYVtiXS55KX0sbW92ZVRvOmZ1bmN0aW9uKGEsYil7dGhpcy5jdXJyZW50UG9pbnQuc2V0KGEsYil9LGxpbmVUbzpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyB5YSh0aGlzLmN1cnJlbnRQb2ludC5jbG9uZSgpLG5ldyBEKGEsYikpO3RoaXMuY3VydmVzLnB1c2goYyk7dGhpcy5jdXJyZW50UG9pbnQuc2V0KGEsYil9LHF1YWRyYXRpY0N1cnZlVG86ZnVuY3Rpb24oYSxcbiAgICBiLGMsZCl7YT1uZXcgUWEodGhpcy5jdXJyZW50UG9pbnQuY2xvbmUoKSxuZXcgRChhLGIpLG5ldyBEKGMsZCkpO3RoaXMuY3VydmVzLnB1c2goYSk7dGhpcy5jdXJyZW50UG9pbnQuc2V0KGMsZCl9LGJlemllckN1cnZlVG86ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2E9bmV3IE9hKHRoaXMuY3VycmVudFBvaW50LmNsb25lKCksbmV3IEQoYSxiKSxuZXcgRChjLGQpLG5ldyBEKGUsZikpO3RoaXMuY3VydmVzLnB1c2goYSk7dGhpcy5jdXJyZW50UG9pbnQuc2V0KGUsZil9LHNwbGluZVRocnU6ZnVuY3Rpb24oYSl7dmFyIGI9W3RoaXMuY3VycmVudFBvaW50LmNsb25lKCldLmNvbmNhdChhKSxiPW5ldyBSYShiKTt0aGlzLmN1cnZlcy5wdXNoKGIpO3RoaXMuY3VycmVudFBvaW50LmNvcHkoYVthLmxlbmd0aC0xXSl9LGFyYzpmdW5jdGlvbihhLGIsYyxkLGUsZil7dGhpcy5hYnNhcmMoYSt0aGlzLmN1cnJlbnRQb2ludC54LGIrdGhpcy5jdXJyZW50UG9pbnQueSxjLGQsZSxmKX0sYWJzYXJjOmZ1bmN0aW9uKGEsXG4gICAgYixjLGQsZSxmKXt0aGlzLmFic2VsbGlwc2UoYSxiLGMsYyxkLGUsZil9LGVsbGlwc2U6ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoKXt0aGlzLmFic2VsbGlwc2UoYSt0aGlzLmN1cnJlbnRQb2ludC54LGIrdGhpcy5jdXJyZW50UG9pbnQueSxjLGQsZSxmLGcsaCl9LGFic2VsbGlwc2U6ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoKXthPW5ldyBCYShhLGIsYyxkLGUsZixnLGgpOzA8dGhpcy5jdXJ2ZXMubGVuZ3RoJiYoYj1hLmdldFBvaW50KDApLGIuZXF1YWxzKHRoaXMuY3VycmVudFBvaW50KXx8dGhpcy5saW5lVG8oYi54LGIueSkpO3RoaXMuY3VydmVzLnB1c2goYSk7YT1hLmdldFBvaW50KDEpO3RoaXMuY3VycmVudFBvaW50LmNvcHkoYSl9LGNvcHk6ZnVuY3Rpb24oYSl7YmIucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuY3VycmVudFBvaW50LmNvcHkoYS5jdXJyZW50UG9pbnQpO3JldHVybiB0aGlzfSx0b0pTT046ZnVuY3Rpb24oKXt2YXIgYT1iYi5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7XG4gICAgYS5jdXJyZW50UG9pbnQ9dGhpcy5jdXJyZW50UG9pbnQudG9BcnJheSgpO3JldHVybiBhfSxmcm9tSlNPTjpmdW5jdGlvbihhKXtiYi5wcm90b3R5cGUuZnJvbUpTT04uY2FsbCh0aGlzLGEpO3RoaXMuY3VycmVudFBvaW50LmZyb21BcnJheShhLmN1cnJlbnRQb2ludCk7cmV0dXJuIHRoaXN9fSk7amIucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShTYS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpqYixnZXRQb2ludHNIb2xlczpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz0wLGQ9dGhpcy5ob2xlcy5sZW5ndGg7YzxkO2MrKyliW2NdPXRoaXMuaG9sZXNbY10uZ2V0UG9pbnRzKGEpO3JldHVybiBifSxleHRyYWN0UG9pbnRzOmZ1bmN0aW9uKGEpe3JldHVybntzaGFwZTp0aGlzLmdldFBvaW50cyhhKSxob2xlczp0aGlzLmdldFBvaW50c0hvbGVzKGEpfX0sY29weTpmdW5jdGlvbihhKXtTYS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5ob2xlcz1bXTtcbiAgICBmb3IodmFyIGI9MCxjPWEuaG9sZXMubGVuZ3RoO2I8YztiKyspdGhpcy5ob2xlcy5wdXNoKGEuaG9sZXNbYl0uY2xvbmUoKSk7cmV0dXJuIHRoaXN9LHRvSlNPTjpmdW5jdGlvbigpe3ZhciBhPVNhLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTthLnV1aWQ9dGhpcy51dWlkO2EuaG9sZXM9W107Zm9yKHZhciBiPTAsYz10aGlzLmhvbGVzLmxlbmd0aDtiPGM7YisrKWEuaG9sZXMucHVzaCh0aGlzLmhvbGVzW2JdLnRvSlNPTigpKTtyZXR1cm4gYX0sZnJvbUpTT046ZnVuY3Rpb24oYSl7U2EucHJvdG90eXBlLmZyb21KU09OLmNhbGwodGhpcyxhKTt0aGlzLnV1aWQ9YS51dWlkO3RoaXMuaG9sZXM9W107Zm9yKHZhciBiPTAsYz1hLmhvbGVzLmxlbmd0aDtiPGM7YisrKXt2YXIgZD1hLmhvbGVzW2JdO3RoaXMuaG9sZXMucHVzaCgobmV3IFNhKS5mcm9tSlNPTihkKSl9cmV0dXJuIHRoaXN9fSk7ZGEucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh4LnByb3RvdHlwZSksXG4gICAge2NvbnN0cnVjdG9yOmRhLGlzTGlnaHQ6ITAsY29weTpmdW5jdGlvbihhKXt4LnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmNvbG9yLmNvcHkoYS5jb2xvcik7dGhpcy5pbnRlbnNpdHk9YS5pbnRlbnNpdHk7cmV0dXJuIHRoaXN9LHRvSlNPTjpmdW5jdGlvbihhKXthPXgucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsYSk7YS5vYmplY3QuY29sb3I9dGhpcy5jb2xvci5nZXRIZXgoKTthLm9iamVjdC5pbnRlbnNpdHk9dGhpcy5pbnRlbnNpdHk7dm9pZCAwIT09dGhpcy5ncm91bmRDb2xvciYmKGEub2JqZWN0Lmdyb3VuZENvbG9yPXRoaXMuZ3JvdW5kQ29sb3IuZ2V0SGV4KCkpO3ZvaWQgMCE9PXRoaXMuZGlzdGFuY2UmJihhLm9iamVjdC5kaXN0YW5jZT10aGlzLmRpc3RhbmNlKTt2b2lkIDAhPT10aGlzLmFuZ2xlJiYoYS5vYmplY3QuYW5nbGU9dGhpcy5hbmdsZSk7dm9pZCAwIT09dGhpcy5kZWNheSYmKGEub2JqZWN0LmRlY2F5PXRoaXMuZGVjYXkpO3ZvaWQgMCE9PVxuICAgIHRoaXMucGVudW1icmEmJihhLm9iamVjdC5wZW51bWJyYT10aGlzLnBlbnVtYnJhKTt2b2lkIDAhPT10aGlzLnNoYWRvdyYmKGEub2JqZWN0LnNoYWRvdz10aGlzLnNoYWRvdy50b0pTT04oKSk7cmV0dXJuIGF9fSk7QmQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShkYS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpCZCxpc0hlbWlzcGhlcmVMaWdodDohMCxjb3B5OmZ1bmN0aW9uKGEpe2RhLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmdyb3VuZENvbG9yLmNvcHkoYS5ncm91bmRDb2xvcik7cmV0dXJuIHRoaXN9fSk7T2JqZWN0LmFzc2lnbihGYi5wcm90b3R5cGUse2NvcHk6ZnVuY3Rpb24oYSl7dGhpcy5jYW1lcmE9YS5jYW1lcmEuY2xvbmUoKTt0aGlzLmJpYXM9YS5iaWFzO3RoaXMucmFkaXVzPWEucmFkaXVzO3RoaXMubWFwU2l6ZS5jb3B5KGEubWFwU2l6ZSk7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxcbiAgICB0b0pTT046ZnVuY3Rpb24oKXt2YXIgYT17fTswIT09dGhpcy5iaWFzJiYoYS5iaWFzPXRoaXMuYmlhcyk7MSE9PXRoaXMucmFkaXVzJiYoYS5yYWRpdXM9dGhpcy5yYWRpdXMpO2lmKDUxMiE9PXRoaXMubWFwU2l6ZS54fHw1MTIhPT10aGlzLm1hcFNpemUueSlhLm1hcFNpemU9dGhpcy5tYXBTaXplLnRvQXJyYXkoKTthLmNhbWVyYT10aGlzLmNhbWVyYS50b0pTT04oITEpLm9iamVjdDtkZWxldGUgYS5jYW1lcmEubWF0cml4O3JldHVybiBhfX0pO0NkLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoRmIucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6Q2QsaXNTcG90TGlnaHRTaGFkb3c6ITAsdXBkYXRlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY2FtZXJhLGM9MipRLlJBRDJERUcqYS5hbmdsZSxkPXRoaXMubWFwU2l6ZS53aWR0aC90aGlzLm1hcFNpemUuaGVpZ2h0O2E9YS5kaXN0YW5jZXx8Yi5mYXI7aWYoYyE9PWIuZm92fHxkIT09Yi5hc3BlY3R8fGEhPT1iLmZhciliLmZvdj1cbiAgICBjLGIuYXNwZWN0PWQsYi5mYXI9YSxiLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX19KTtEZC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGRhLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkRkLGlzU3BvdExpZ2h0OiEwLGNvcHk6ZnVuY3Rpb24oYSl7ZGEucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuZGlzdGFuY2U9YS5kaXN0YW5jZTt0aGlzLmFuZ2xlPWEuYW5nbGU7dGhpcy5wZW51bWJyYT1hLnBlbnVtYnJhO3RoaXMuZGVjYXk9YS5kZWNheTt0aGlzLnRhcmdldD1hLnRhcmdldC5jbG9uZSgpO3RoaXMuc2hhZG93PWEuc2hhZG93LmNsb25lKCk7cmV0dXJuIHRoaXN9fSk7RWQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShkYS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpFZCxpc1BvaW50TGlnaHQ6ITAsY29weTpmdW5jdGlvbihhKXtkYS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5kaXN0YW5jZT1hLmRpc3RhbmNlO1xuICAgIHRoaXMuZGVjYXk9YS5kZWNheTt0aGlzLnNoYWRvdz1hLnNoYWRvdy5jbG9uZSgpO3JldHVybiB0aGlzfX0pO0ZkLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoRmIucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6RmR9KTtHZC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGRhLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkdkLGlzRGlyZWN0aW9uYWxMaWdodDohMCxjb3B5OmZ1bmN0aW9uKGEpe2RhLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLnRhcmdldD1hLnRhcmdldC5jbG9uZSgpO3RoaXMuc2hhZG93PWEuc2hhZG93LmNsb25lKCk7cmV0dXJuIHRoaXN9fSk7SGQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShkYS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpIZCxpc0FtYmllbnRMaWdodDohMH0pO0lkLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoZGEucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6SWQsXG4gICAgaXNSZWN0QXJlYUxpZ2h0OiEwLGNvcHk6ZnVuY3Rpb24oYSl7ZGEucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMud2lkdGg9YS53aWR0aDt0aGlzLmhlaWdodD1hLmhlaWdodDtyZXR1cm4gdGhpc30sdG9KU09OOmZ1bmN0aW9uKGEpe2E9ZGEucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsYSk7YS5vYmplY3Qud2lkdGg9dGhpcy53aWR0aDthLm9iamVjdC5oZWlnaHQ9dGhpcy5oZWlnaHQ7cmV0dXJuIGF9fSk7SmQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShULnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOkpkLFZhbHVlVHlwZU5hbWU6XCJzdHJpbmdcIixWYWx1ZUJ1ZmZlclR5cGU6QXJyYXksRGVmYXVsdEludGVycG9sYXRpb246MjMwMCxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RMaW5lYXI6dm9pZCAwLEludGVycG9sYW50RmFjdG9yeU1ldGhvZFNtb290aDp2b2lkIDB9KTtLZC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFQucHJvdG90eXBlKSxcbiAgICB7Y29uc3RydWN0b3I6S2QsVmFsdWVUeXBlTmFtZTpcImJvb2xcIixWYWx1ZUJ1ZmZlclR5cGU6QXJyYXksRGVmYXVsdEludGVycG9sYXRpb246MjMwMCxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RMaW5lYXI6dm9pZCAwLEludGVycG9sYW50RmFjdG9yeU1ldGhvZFNtb290aDp2b2lkIDB9KTtPYmplY3QuYXNzaWduKHBhLnByb3RvdHlwZSx7ZXZhbHVhdGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5wYXJhbWV0ZXJQb3NpdGlvbnMsYz10aGlzLl9jYWNoZWRJbmRleCxkPWJbY10sZT1iW2MtMV07YTp7Yjp7Yzp7ZDppZighKGE8ZCkpe2Zvcih2YXIgZj1jKzI7Oyl7aWYodm9pZCAwPT09ZCl7aWYoYTxlKWJyZWFrIGQ7dGhpcy5fY2FjaGVkSW5kZXg9Yz1iLmxlbmd0aDtyZXR1cm4gdGhpcy5hZnRlckVuZF8oYy0xLGEsZSl9aWYoYz09PWYpYnJlYWs7ZT1kO2Q9YlsrK2NdO2lmKGE8ZClicmVhayBifWQ9Yi5sZW5ndGg7YnJlYWsgY31pZihhPj1lKWJyZWFrIGE7ZWxzZXtmPWJbMV07YTxmJiZcbiAgICAoYz0yLGU9Zik7Zm9yKGY9Yy0yOzspe2lmKHZvaWQgMD09PWUpcmV0dXJuIHRoaXMuX2NhY2hlZEluZGV4PTAsdGhpcy5iZWZvcmVTdGFydF8oMCxhLGQpO2lmKGM9PT1mKWJyZWFrO2Q9ZTtlPWJbLS1jLTFdO2lmKGE+PWUpYnJlYWsgYn1kPWM7Yz0wfX1mb3IoO2M8ZDspZT1jK2Q+Pj4xLGE8YltlXT9kPWU6Yz1lKzE7ZD1iW2NdO2U9YltjLTFdO2lmKHZvaWQgMD09PWUpcmV0dXJuIHRoaXMuX2NhY2hlZEluZGV4PTAsdGhpcy5iZWZvcmVTdGFydF8oMCxhLGQpO2lmKHZvaWQgMD09PWQpcmV0dXJuIHRoaXMuX2NhY2hlZEluZGV4PWM9Yi5sZW5ndGgsdGhpcy5hZnRlckVuZF8oYy0xLGUsYSl9dGhpcy5fY2FjaGVkSW5kZXg9Yzt0aGlzLmludGVydmFsQ2hhbmdlZF8oYyxlLGQpfXJldHVybiB0aGlzLmludGVycG9sYXRlXyhjLGUsYSxkKX0sc2V0dGluZ3M6bnVsbCxEZWZhdWx0U2V0dGluZ3NfOnt9LGdldFNldHRpbmdzXzpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNldHRpbmdzfHxcbiAgICB0aGlzLkRlZmF1bHRTZXR0aW5nc199LGNvcHlTYW1wbGVWYWx1ZV86ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5yZXN1bHRCdWZmZXIsYz10aGlzLnNhbXBsZVZhbHVlcyxkPXRoaXMudmFsdWVTaXplO2EqPWQ7Zm9yKHZhciBlPTA7ZSE9PWQ7KytlKWJbZV09Y1thK2VdO3JldHVybiBifSxpbnRlcnBvbGF0ZV86ZnVuY3Rpb24oKXt0aHJvdyBFcnJvcihcImNhbGwgdG8gYWJzdHJhY3QgbWV0aG9kXCIpO30saW50ZXJ2YWxDaGFuZ2VkXzpmdW5jdGlvbigpe319KTtPYmplY3QuYXNzaWduKHBhLnByb3RvdHlwZSx7YmVmb3JlU3RhcnRfOnBhLnByb3RvdHlwZS5jb3B5U2FtcGxlVmFsdWVfLGFmdGVyRW5kXzpwYS5wcm90b3R5cGUuY29weVNhbXBsZVZhbHVlX30pO0xkLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUocGEucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6TGQsaW50ZXJwb2xhdGVfOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMucmVzdWx0QnVmZmVyLGY9dGhpcy5zYW1wbGVWYWx1ZXMsXG4gICAgZz10aGlzLnZhbHVlU2l6ZTthKj1nO2I9KGMtYikvKGQtYik7Zm9yKGM9YStnO2EhPT1jO2ErPTQpaGEuc2xlcnBGbGF0KGUsMCxmLGEtZyxmLGEsYik7cmV0dXJuIGV9fSk7ZGQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShULnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOmRkLFZhbHVlVHlwZU5hbWU6XCJxdWF0ZXJuaW9uXCIsRGVmYXVsdEludGVycG9sYXRpb246MjMwMSxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RMaW5lYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBMZCh0aGlzLnRpbWVzLHRoaXMudmFsdWVzLHRoaXMuZ2V0VmFsdWVTaXplKCksYSl9LEludGVycG9sYW50RmFjdG9yeU1ldGhvZFNtb290aDp2b2lkIDB9KTtNZC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFQucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6TWQsVmFsdWVUeXBlTmFtZTpcImNvbG9yXCJ9KTtpYy5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFQucHJvdG90eXBlKSxcbiAgICB7Y29uc3RydWN0b3I6aWMsVmFsdWVUeXBlTmFtZTpcIm51bWJlclwifSk7TmQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShwYS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpOZCxEZWZhdWx0U2V0dGluZ3NfOntlbmRpbmdTdGFydDoyNDAwLGVuZGluZ0VuZDoyNDAwfSxpbnRlcnZhbENoYW5nZWRfOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLnBhcmFtZXRlclBvc2l0aW9ucyxlPWEtMixmPWErMSxnPWRbZV0saD1kW2ZdO2lmKHZvaWQgMD09PWcpc3dpdGNoKHRoaXMuZ2V0U2V0dGluZ3NfKCkuZW5kaW5nU3RhcnQpe2Nhc2UgMjQwMTplPWE7Zz0yKmItYzticmVhaztjYXNlIDI0MDI6ZT1kLmxlbmd0aC0yO2c9YitkW2VdLWRbZSsxXTticmVhaztkZWZhdWx0OmU9YSxnPWN9aWYodm9pZCAwPT09aClzd2l0Y2godGhpcy5nZXRTZXR0aW5nc18oKS5lbmRpbmdFbmQpe2Nhc2UgMjQwMTpmPWE7aD0yKmMtYjticmVhaztjYXNlIDI0MDI6Zj0xO2g9YytkWzFdLWRbMF07XG4gICAgYnJlYWs7ZGVmYXVsdDpmPWEtMSxoPWJ9YT0uNSooYy1iKTtkPXRoaXMudmFsdWVTaXplO3RoaXMuX3dlaWdodFByZXY9YS8oYi1nKTt0aGlzLl93ZWlnaHROZXh0PWEvKGgtYyk7dGhpcy5fb2Zmc2V0UHJldj1lKmQ7dGhpcy5fb2Zmc2V0TmV4dD1mKmR9LGludGVycG9sYXRlXzpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLnJlc3VsdEJ1ZmZlcixmPXRoaXMuc2FtcGxlVmFsdWVzLGc9dGhpcy52YWx1ZVNpemU7YSo9Zzt2YXIgaD1hLWcsaz10aGlzLl9vZmZzZXRQcmV2LG09dGhpcy5fb2Zmc2V0TmV4dCxsPXRoaXMuX3dlaWdodFByZXYsbj10aGlzLl93ZWlnaHROZXh0LHA9KGMtYikvKGQtYik7Yz1wKnA7ZD1jKnA7Yj0tbCpkKzIqbCpjLWwqcDtsPSgxK2wpKmQrKC0xLjUtMipsKSpjKygtLjUrbCkqcCsxO3A9KC0xLW4pKmQrKDEuNStuKSpjKy41KnA7bj1uKmQtbipjO2ZvcihjPTA7YyE9PWc7KytjKWVbY109YipmW2srY10rbCpmW2grY10rcCpmW2ErY10rbipmW20rY107XG4gICAgcmV0dXJuIGV9fSk7ZWQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShwYS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjplZCxpbnRlcnBvbGF0ZV86ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcy5yZXN1bHRCdWZmZXIsZj10aGlzLnNhbXBsZVZhbHVlcyxnPXRoaXMudmFsdWVTaXplO2EqPWc7dmFyIGg9YS1nO2I9KGMtYikvKGQtYik7Yz0xLWI7Zm9yKGQ9MDtkIT09ZzsrK2QpZVtkXT1mW2grZF0qYytmW2ErZF0qYjtyZXR1cm4gZX19KTtPZC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHBhLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOk9kLGludGVycG9sYXRlXzpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jb3B5U2FtcGxlVmFsdWVfKGEtMSl9fSk7dmFyIGdhPXthcnJheVNsaWNlOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZ2EuaXNUeXBlZEFycmF5KGEpP25ldyBhLmNvbnN0cnVjdG9yKGEuc3ViYXJyYXkoYix2b2lkIDAhPT1jP2M6XG4gICAgYS5sZW5ndGgpKTphLnNsaWNlKGIsYyl9LGNvbnZlcnRBcnJheTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIWF8fCFjJiZhLmNvbnN0cnVjdG9yPT09Yj9hOlwibnVtYmVyXCI9PT10eXBlb2YgYi5CWVRFU19QRVJfRUxFTUVOVD9uZXcgYihhKTpBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhKX0saXNUeXBlZEFycmF5OmZ1bmN0aW9uKGEpe3JldHVybiBBcnJheUJ1ZmZlci5pc1ZpZXcoYSkmJiEoYSBpbnN0YW5jZW9mIERhdGFWaWV3KX0sZ2V0S2V5ZnJhbWVPcmRlcjpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5sZW5ndGgsYz1BcnJheShiKSxkPTA7ZCE9PWI7KytkKWNbZF09ZDtjLnNvcnQoZnVuY3Rpb24oYixjKXtyZXR1cm4gYVtiXS1hW2NdfSk7cmV0dXJuIGN9LHNvcnRlZEFycmF5OmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9YS5sZW5ndGgsZT1uZXcgYS5jb25zdHJ1Y3RvcihkKSxmPTAsZz0wO2chPT1kOysrZilmb3IodmFyIGg9Y1tmXSpiLGs9MDtrIT09YjsrK2spZVtnKytdPVxuICAgIGFbaCtrXTtyZXR1cm4gZX0sZmxhdHRlbkpTT046ZnVuY3Rpb24oYSxiLGMsZCl7Zm9yKHZhciBlPTEsZj1hWzBdO3ZvaWQgMCE9PWYmJnZvaWQgMD09PWZbZF07KWY9YVtlKytdO2lmKHZvaWQgMCE9PWYpe3ZhciBnPWZbZF07aWYodm9pZCAwIT09ZylpZihBcnJheS5pc0FycmF5KGcpKXtkbyBnPWZbZF0sdm9pZCAwIT09ZyYmKGIucHVzaChmLnRpbWUpLGMucHVzaC5hcHBseShjLGcpKSxmPWFbZSsrXTt3aGlsZSh2b2lkIDAhPT1mKX1lbHNlIGlmKHZvaWQgMCE9PWcudG9BcnJheSl7ZG8gZz1mW2RdLHZvaWQgMCE9PWcmJihiLnB1c2goZi50aW1lKSxnLnRvQXJyYXkoYyxjLmxlbmd0aCkpLGY9YVtlKytdO3doaWxlKHZvaWQgMCE9PWYpfWVsc2V7ZG8gZz1mW2RdLHZvaWQgMCE9PWcmJihiLnB1c2goZi50aW1lKSxjLnB1c2goZykpLGY9YVtlKytdO3doaWxlKHZvaWQgMCE9PWYpfX19fTtPYmplY3QuYXNzaWduKFQse3BhcnNlOmZ1bmN0aW9uKGEpe2lmKHZvaWQgMD09PWEudHlwZSl0aHJvdyBFcnJvcihcIlRIUkVFLktleWZyYW1lVHJhY2s6IHRyYWNrIHR5cGUgdW5kZWZpbmVkLCBjYW4gbm90IHBhcnNlXCIpO1xuICAgIHZhciBiPVQuX2dldFRyYWNrVHlwZUZvclZhbHVlVHlwZU5hbWUoYS50eXBlKTtpZih2b2lkIDA9PT1hLnRpbWVzKXt2YXIgYz1bXSxkPVtdO2dhLmZsYXR0ZW5KU09OKGEua2V5cyxjLGQsXCJ2YWx1ZVwiKTthLnRpbWVzPWM7YS52YWx1ZXM9ZH1yZXR1cm4gdm9pZCAwIT09Yi5wYXJzZT9iLnBhcnNlKGEpOm5ldyBiKGEubmFtZSxhLnRpbWVzLGEudmFsdWVzLGEuaW50ZXJwb2xhdGlvbil9LHRvSlNPTjpmdW5jdGlvbihhKXt2YXIgYj1hLmNvbnN0cnVjdG9yO2lmKHZvaWQgMCE9PWIudG9KU09OKWI9Yi50b0pTT04oYSk7ZWxzZXt2YXIgYj17bmFtZTphLm5hbWUsdGltZXM6Z2EuY29udmVydEFycmF5KGEudGltZXMsQXJyYXkpLHZhbHVlczpnYS5jb252ZXJ0QXJyYXkoYS52YWx1ZXMsQXJyYXkpfSxjPWEuZ2V0SW50ZXJwb2xhdGlvbigpO2MhPT1hLkRlZmF1bHRJbnRlcnBvbGF0aW9uJiYoYi5pbnRlcnBvbGF0aW9uPWMpfWIudHlwZT1hLlZhbHVlVHlwZU5hbWU7cmV0dXJuIGJ9LF9nZXRUcmFja1R5cGVGb3JWYWx1ZVR5cGVOYW1lOmZ1bmN0aW9uKGEpe3N3aXRjaChhLnRvTG93ZXJDYXNlKCkpe2Nhc2UgXCJzY2FsYXJcIjpjYXNlIFwiZG91YmxlXCI6Y2FzZSBcImZsb2F0XCI6Y2FzZSBcIm51bWJlclwiOmNhc2UgXCJpbnRlZ2VyXCI6cmV0dXJuIGljO1xuICAgIGNhc2UgXCJ2ZWN0b3JcIjpjYXNlIFwidmVjdG9yMlwiOmNhc2UgXCJ2ZWN0b3IzXCI6Y2FzZSBcInZlY3RvcjRcIjpyZXR1cm4gamM7Y2FzZSBcImNvbG9yXCI6cmV0dXJuIE1kO2Nhc2UgXCJxdWF0ZXJuaW9uXCI6cmV0dXJuIGRkO2Nhc2UgXCJib29sXCI6Y2FzZSBcImJvb2xlYW5cIjpyZXR1cm4gS2Q7Y2FzZSBcInN0cmluZ1wiOnJldHVybiBKZH10aHJvdyBFcnJvcihcIlRIUkVFLktleWZyYW1lVHJhY2s6IFVuc3VwcG9ydGVkIHR5cGVOYW1lOiBcIithKTt9fSk7T2JqZWN0LmFzc2lnbihULnByb3RvdHlwZSx7Y29uc3RydWN0b3I6VCxUaW1lQnVmZmVyVHlwZTpGbG9hdDMyQXJyYXksVmFsdWVCdWZmZXJUeXBlOkZsb2F0MzJBcnJheSxEZWZhdWx0SW50ZXJwb2xhdGlvbjoyMzAxLEludGVycG9sYW50RmFjdG9yeU1ldGhvZERpc2NyZXRlOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgT2QodGhpcy50aW1lcyx0aGlzLnZhbHVlcyx0aGlzLmdldFZhbHVlU2l6ZSgpLGEpfSxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RMaW5lYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBlZCh0aGlzLnRpbWVzLFxuICAgIHRoaXMudmFsdWVzLHRoaXMuZ2V0VmFsdWVTaXplKCksYSl9LEludGVycG9sYW50RmFjdG9yeU1ldGhvZFNtb290aDpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IE5kKHRoaXMudGltZXMsdGhpcy52YWx1ZXMsdGhpcy5nZXRWYWx1ZVNpemUoKSxhKX0sc2V0SW50ZXJwb2xhdGlvbjpmdW5jdGlvbihhKXtzd2l0Y2goYSl7Y2FzZSAyMzAwOnZhciBiPXRoaXMuSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kRGlzY3JldGU7YnJlYWs7Y2FzZSAyMzAxOmI9dGhpcy5JbnRlcnBvbGFudEZhY3RvcnlNZXRob2RMaW5lYXI7YnJlYWs7Y2FzZSAyMzAyOmI9dGhpcy5JbnRlcnBvbGFudEZhY3RvcnlNZXRob2RTbW9vdGh9aWYodm9pZCAwPT09Yil7Yj1cInVuc3VwcG9ydGVkIGludGVycG9sYXRpb24gZm9yIFwiK3RoaXMuVmFsdWVUeXBlTmFtZStcIiBrZXlmcmFtZSB0cmFjayBuYW1lZCBcIit0aGlzLm5hbWU7aWYodm9pZCAwPT09dGhpcy5jcmVhdGVJbnRlcnBvbGFudClpZihhIT09dGhpcy5EZWZhdWx0SW50ZXJwb2xhdGlvbil0aGlzLnNldEludGVycG9sYXRpb24odGhpcy5EZWZhdWx0SW50ZXJwb2xhdGlvbik7XG4gICAgZWxzZSB0aHJvdyBFcnJvcihiKTtjb25zb2xlLndhcm4oXCJUSFJFRS5LZXlmcmFtZVRyYWNrOlwiLGIpfWVsc2UgdGhpcy5jcmVhdGVJbnRlcnBvbGFudD1ifSxnZXRJbnRlcnBvbGF0aW9uOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuY3JlYXRlSW50ZXJwb2xhbnQpe2Nhc2UgdGhpcy5JbnRlcnBvbGFudEZhY3RvcnlNZXRob2REaXNjcmV0ZTpyZXR1cm4gMjMwMDtjYXNlIHRoaXMuSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kTGluZWFyOnJldHVybiAyMzAxO2Nhc2UgdGhpcy5JbnRlcnBvbGFudEZhY3RvcnlNZXRob2RTbW9vdGg6cmV0dXJuIDIzMDJ9fSxnZXRWYWx1ZVNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZXMubGVuZ3RoL3RoaXMudGltZXMubGVuZ3RofSxzaGlmdDpmdW5jdGlvbihhKXtpZigwIT09YSlmb3IodmFyIGI9dGhpcy50aW1lcyxjPTAsZD1iLmxlbmd0aDtjIT09ZDsrK2MpYltjXSs9YTtyZXR1cm4gdGhpc30sc2NhbGU6ZnVuY3Rpb24oYSl7aWYoMSE9PWEpZm9yKHZhciBiPVxuICAgIHRoaXMudGltZXMsYz0wLGQ9Yi5sZW5ndGg7YyE9PWQ7KytjKWJbY10qPWE7cmV0dXJuIHRoaXN9LHRyaW06ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy50aW1lcyxkPWMubGVuZ3RoLGU9MCxmPWQtMTtlIT09ZCYmY1tlXTxhOykrK2U7Zm9yKDstMSE9PWYmJmNbZl0+YjspLS1mOysrZjtpZigwIT09ZXx8ZiE9PWQpZT49ZiYmKGY9TWF0aC5tYXgoZiwxKSxlPWYtMSksYT10aGlzLmdldFZhbHVlU2l6ZSgpLHRoaXMudGltZXM9Z2EuYXJyYXlTbGljZShjLGUsZiksdGhpcy52YWx1ZXM9Z2EuYXJyYXlTbGljZSh0aGlzLnZhbHVlcyxlKmEsZiphKTtyZXR1cm4gdGhpc30sdmFsaWRhdGU6ZnVuY3Rpb24oKXt2YXIgYT0hMCxiPXRoaXMuZ2V0VmFsdWVTaXplKCk7MCE9PWItTWF0aC5mbG9vcihiKSYmKGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5LZXlmcmFtZVRyYWNrOiBJbnZhbGlkIHZhbHVlIHNpemUgaW4gdHJhY2suXCIsdGhpcyksYT0hMSk7dmFyIGM9dGhpcy50aW1lcyxiPXRoaXMudmFsdWVzLFxuICAgIGQ9Yy5sZW5ndGg7MD09PWQmJihjb25zb2xlLmVycm9yKFwiVEhSRUUuS2V5ZnJhbWVUcmFjazogVHJhY2sgaXMgZW1wdHkuXCIsdGhpcyksYT0hMSk7Zm9yKHZhciBlPW51bGwsZj0wO2YhPT1kO2YrKyl7dmFyIGc9Y1tmXTtpZihcIm51bWJlclwiPT09dHlwZW9mIGcmJmlzTmFOKGcpKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuS2V5ZnJhbWVUcmFjazogVGltZSBpcyBub3QgYSB2YWxpZCBudW1iZXIuXCIsdGhpcyxmLGcpO2E9ITE7YnJlYWt9aWYobnVsbCE9PWUmJmU+Zyl7Y29uc29sZS5lcnJvcihcIlRIUkVFLktleWZyYW1lVHJhY2s6IE91dCBvZiBvcmRlciBrZXlzLlwiLHRoaXMsZixnLGUpO2E9ITE7YnJlYWt9ZT1nfWlmKHZvaWQgMCE9PWImJmdhLmlzVHlwZWRBcnJheShiKSlmb3IoZj0wLGM9Yi5sZW5ndGg7ZiE9PWM7KytmKWlmKGQ9YltmXSxpc05hTihkKSl7Y29uc29sZS5lcnJvcihcIlRIUkVFLktleWZyYW1lVHJhY2s6IFZhbHVlIGlzIG5vdCBhIHZhbGlkIG51bWJlci5cIix0aGlzLGYsXG4gICAgZCk7YT0hMTticmVha31yZXR1cm4gYX0sb3B0aW1pemU6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYixjPXRoaXMudGltZXMsZD10aGlzLnZhbHVlcyxlPXRoaXMuZ2V0VmFsdWVTaXplKCksZj0yMzAyPT09dGhpcy5nZXRJbnRlcnBvbGF0aW9uKCksZz0xLGg9Yy5sZW5ndGgtMSxrPTE7azxoOysrayl7YT0hMTt2YXIgbT1jW2tdO2lmKG0hPT1jW2srMV0mJigxIT09a3x8bSE9PW1bMF0pKWlmKGYpYT0hMDtlbHNle2I9ayplO2Zvcih2YXIgbD1iLWUsbj1iK2UsbT0wO20hPT1lOysrbSl7dmFyIHA9ZFtiK21dO2lmKHAhPT1kW2wrbV18fHAhPT1kW24rbV0pe2E9ITA7YnJlYWt9fX1pZihhKXtpZihrIT09Zylmb3IoY1tnXT1jW2tdLGI9ayplLGE9ZyplLG09MDttIT09ZTsrK20pZFthK21dPWRbYittXTsrK2d9fWlmKDA8aCl7Y1tnXT1jW2hdO2I9aCplO2E9ZyplO2ZvcihtPTA7bSE9PWU7KyttKWRbYSttXT1kW2IrbV07KytnfWchPT1jLmxlbmd0aCYmKHRoaXMudGltZXM9Z2EuYXJyYXlTbGljZShjLFxuICAgIDAsZyksdGhpcy52YWx1ZXM9Z2EuYXJyYXlTbGljZShkLDAsZyplKSk7cmV0dXJuIHRoaXN9fSk7amMucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShULnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOmpjLFZhbHVlVHlwZU5hbWU6XCJ2ZWN0b3JcIn0pO09iamVjdC5hc3NpZ24oQ2Ese3BhcnNlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPWEudHJhY2tzLGQ9MS8oYS5mcHN8fDEpLGU9MCxmPWMubGVuZ3RoO2UhPT1mOysrZSliLnB1c2goVC5wYXJzZShjW2VdKS5zY2FsZShkKSk7cmV0dXJuIG5ldyBDYShhLm5hbWUsYS5kdXJhdGlvbixiKX0sdG9KU09OOmZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9YS50cmFja3M7YT17bmFtZTphLm5hbWUsZHVyYXRpb246YS5kdXJhdGlvbix0cmFja3M6Yn07Zm9yKHZhciBkPTAsZT1jLmxlbmd0aDtkIT09ZTsrK2QpYi5wdXNoKFQudG9KU09OKGNbZF0pKTtyZXR1cm4gYX0sQ3JlYXRlRnJvbU1vcnBoVGFyZ2V0U2VxdWVuY2U6ZnVuY3Rpb24oYSxcbiAgICBiLGMsZCl7Zm9yKHZhciBlPWIubGVuZ3RoLGY9W10sZz0wO2c8ZTtnKyspe3ZhciBoPVtdLGs9W107aC5wdXNoKChnK2UtMSklZSxnLChnKzEpJWUpO2sucHVzaCgwLDEsMCk7dmFyIG09Z2EuZ2V0S2V5ZnJhbWVPcmRlcihoKSxoPWdhLnNvcnRlZEFycmF5KGgsMSxtKSxrPWdhLnNvcnRlZEFycmF5KGssMSxtKTtkfHwwIT09aFswXXx8KGgucHVzaChlKSxrLnB1c2goa1swXSkpO2YucHVzaCgobmV3IGljKFwiLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1tcIitiW2ddLm5hbWUrXCJdXCIsaCxrKSkuc2NhbGUoMS9jKSl9cmV0dXJuIG5ldyBDYShhLC0xLGYpfSxmaW5kQnlOYW1lOmZ1bmN0aW9uKGEsYil7dmFyIGM9YTtBcnJheS5pc0FycmF5KGEpfHwoYz1hLmdlb21ldHJ5JiZhLmdlb21ldHJ5LmFuaW1hdGlvbnN8fGEuYW5pbWF0aW9ucyk7Zm9yKGE9MDthPGMubGVuZ3RoO2ErKylpZihjW2FdLm5hbWU9PT1iKXJldHVybiBjW2FdO3JldHVybiBudWxsfSxDcmVhdGVDbGlwc0Zyb21Nb3JwaFRhcmdldFNlcXVlbmNlczpmdW5jdGlvbihhLFxuICAgIGIsYyl7Zm9yKHZhciBkLGU9e30sZj0vXihbXFx3LV0qPykoW1xcZF0rKSQvLGc9MCxoPWEubGVuZ3RoO2c8aDtnKyspe3ZhciBrPWFbZ10sbT1rLm5hbWUubWF0Y2goZik7bSYmMTxtLmxlbmd0aCYmKGQ9bVsxXSwobT1lW2RdKXx8KGVbZF09bT1bXSksbS5wdXNoKGspKX1hPVtdO2ZvcihkIGluIGUpYS5wdXNoKENhLkNyZWF0ZUZyb21Nb3JwaFRhcmdldFNlcXVlbmNlKGQsZVtkXSxiLGMpKTtyZXR1cm4gYX0scGFyc2VBbmltYXRpb246ZnVuY3Rpb24oYSxiKXtpZighYSlyZXR1cm4gY29uc29sZS5lcnJvcihcIlRIUkVFLkFuaW1hdGlvbkNsaXA6IE5vIGFuaW1hdGlvbiBpbiBKU09OTG9hZGVyIGRhdGEuXCIpLG51bGw7dmFyIGM9ZnVuY3Rpb24oYSxiLGMsZCxlKXtpZigwIT09Yy5sZW5ndGgpe3ZhciBmPVtdLGc9W107Z2EuZmxhdHRlbkpTT04oYyxmLGcsZCk7MCE9PWYubGVuZ3RoJiZlLnB1c2gobmV3IGEoYixmLGcpKX19LGQ9W10sZT1hLm5hbWV8fFwiZGVmYXVsdFwiLGY9YS5sZW5ndGh8fFxuICAgIC0xLGc9YS5mcHN8fDMwO2E9YS5oaWVyYXJjaHl8fFtdO2Zvcih2YXIgaD0wO2g8YS5sZW5ndGg7aCsrKXt2YXIgaz1hW2hdLmtleXM7aWYoayYmMCE9PWsubGVuZ3RoKWlmKGtbMF0ubW9ycGhUYXJnZXRzKXtmb3IodmFyIGY9e30sbT0wO208ay5sZW5ndGg7bSsrKWlmKGtbbV0ubW9ycGhUYXJnZXRzKWZvcih2YXIgbD0wO2w8a1ttXS5tb3JwaFRhcmdldHMubGVuZ3RoO2wrKylmW2tbbV0ubW9ycGhUYXJnZXRzW2xdXT0tMTtmb3IodmFyIG4gaW4gZil7Zm9yKHZhciBwPVtdLHI9W10sbD0wO2whPT1rW21dLm1vcnBoVGFyZ2V0cy5sZW5ndGg7KytsKXt2YXIgdD1rW21dO3AucHVzaCh0LnRpbWUpO3IucHVzaCh0Lm1vcnBoVGFyZ2V0PT09bj8xOjApfWQucHVzaChuZXcgaWMoXCIubW9ycGhUYXJnZXRJbmZsdWVuY2VbXCIrbitcIl1cIixwLHIpKX1mPWYubGVuZ3RoKihnfHwxKX1lbHNlIG09XCIuYm9uZXNbXCIrYltoXS5uYW1lK1wiXVwiLGMoamMsbStcIi5wb3NpdGlvblwiLGssXCJwb3NcIixkKSxjKGRkLFxuICAgIG0rXCIucXVhdGVybmlvblwiLGssXCJyb3RcIixkKSxjKGpjLG0rXCIuc2NhbGVcIixrLFwic2NsXCIsZCl9cmV0dXJuIDA9PT1kLmxlbmd0aD9udWxsOm5ldyBDYShlLGYsZCl9fSk7T2JqZWN0LmFzc2lnbihDYS5wcm90b3R5cGUse3Jlc2V0RHVyYXRpb246ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPTAsYz10aGlzLnRyYWNrcy5sZW5ndGg7YiE9PWM7KytiKXZhciBkPXRoaXMudHJhY2tzW2JdLGE9TWF0aC5tYXgoYSxkLnRpbWVzW2QudGltZXMubGVuZ3RoLTFdKTt0aGlzLmR1cmF0aW9uPWF9LHRyaW06ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPHRoaXMudHJhY2tzLmxlbmd0aDthKyspdGhpcy50cmFja3NbYV0udHJpbSgwLHRoaXMuZHVyYXRpb24pO3JldHVybiB0aGlzfSxvcHRpbWl6ZTpmdW5jdGlvbigpe2Zvcih2YXIgYT0wO2E8dGhpcy50cmFja3MubGVuZ3RoO2ErKyl0aGlzLnRyYWNrc1thXS5vcHRpbWl6ZSgpO3JldHVybiB0aGlzfX0pO09iamVjdC5hc3NpZ24oUGQucHJvdG90eXBlLFxuICAgIHtsb2FkOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXM7KG5ldyBOYShlLm1hbmFnZXIpKS5sb2FkKGEsZnVuY3Rpb24oYSl7YihlLnBhcnNlKEpTT04ucGFyc2UoYSkpKX0sYyxkKX0sc2V0VGV4dHVyZXM6ZnVuY3Rpb24oYSl7dGhpcy50ZXh0dXJlcz1hfSxwYXJzZTpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3ZvaWQgMD09PWNbYV0mJmNvbnNvbGUud2FybihcIlRIUkVFLk1hdGVyaWFsTG9hZGVyOiBVbmRlZmluZWQgdGV4dHVyZVwiLGEpO3JldHVybiBjW2FdfXZhciBjPXRoaXMudGV4dHVyZXMsZD1uZXcgTWdbYS50eXBlXTt2b2lkIDAhPT1hLnV1aWQmJihkLnV1aWQ9YS51dWlkKTt2b2lkIDAhPT1hLm5hbWUmJihkLm5hbWU9YS5uYW1lKTt2b2lkIDAhPT1hLmNvbG9yJiZkLmNvbG9yLnNldEhleChhLmNvbG9yKTt2b2lkIDAhPT1hLnJvdWdobmVzcyYmKGQucm91Z2huZXNzPWEucm91Z2huZXNzKTt2b2lkIDAhPT1hLm1ldGFsbmVzcyYmKGQubWV0YWxuZXNzPWEubWV0YWxuZXNzKTtcbiAgICB2b2lkIDAhPT1hLmVtaXNzaXZlJiZkLmVtaXNzaXZlLnNldEhleChhLmVtaXNzaXZlKTt2b2lkIDAhPT1hLnNwZWN1bGFyJiZkLnNwZWN1bGFyLnNldEhleChhLnNwZWN1bGFyKTt2b2lkIDAhPT1hLnNoaW5pbmVzcyYmKGQuc2hpbmluZXNzPWEuc2hpbmluZXNzKTt2b2lkIDAhPT1hLmNsZWFyQ29hdCYmKGQuY2xlYXJDb2F0PWEuY2xlYXJDb2F0KTt2b2lkIDAhPT1hLmNsZWFyQ29hdFJvdWdobmVzcyYmKGQuY2xlYXJDb2F0Um91Z2huZXNzPWEuY2xlYXJDb2F0Um91Z2huZXNzKTt2b2lkIDAhPT1hLnVuaWZvcm1zJiYoZC51bmlmb3Jtcz1hLnVuaWZvcm1zKTt2b2lkIDAhPT1hLnZlcnRleFNoYWRlciYmKGQudmVydGV4U2hhZGVyPWEudmVydGV4U2hhZGVyKTt2b2lkIDAhPT1hLmZyYWdtZW50U2hhZGVyJiYoZC5mcmFnbWVudFNoYWRlcj1hLmZyYWdtZW50U2hhZGVyKTt2b2lkIDAhPT1hLnZlcnRleENvbG9ycyYmKGQudmVydGV4Q29sb3JzPWEudmVydGV4Q29sb3JzKTt2b2lkIDAhPT1cbiAgICBhLmZvZyYmKGQuZm9nPWEuZm9nKTt2b2lkIDAhPT1hLmZsYXRTaGFkaW5nJiYoZC5mbGF0U2hhZGluZz1hLmZsYXRTaGFkaW5nKTt2b2lkIDAhPT1hLmJsZW5kaW5nJiYoZC5ibGVuZGluZz1hLmJsZW5kaW5nKTt2b2lkIDAhPT1hLnNpZGUmJihkLnNpZGU9YS5zaWRlKTt2b2lkIDAhPT1hLm9wYWNpdHkmJihkLm9wYWNpdHk9YS5vcGFjaXR5KTt2b2lkIDAhPT1hLnRyYW5zcGFyZW50JiYoZC50cmFuc3BhcmVudD1hLnRyYW5zcGFyZW50KTt2b2lkIDAhPT1hLmFscGhhVGVzdCYmKGQuYWxwaGFUZXN0PWEuYWxwaGFUZXN0KTt2b2lkIDAhPT1hLmRlcHRoVGVzdCYmKGQuZGVwdGhUZXN0PWEuZGVwdGhUZXN0KTt2b2lkIDAhPT1hLmRlcHRoV3JpdGUmJihkLmRlcHRoV3JpdGU9YS5kZXB0aFdyaXRlKTt2b2lkIDAhPT1hLmNvbG9yV3JpdGUmJihkLmNvbG9yV3JpdGU9YS5jb2xvcldyaXRlKTt2b2lkIDAhPT1hLndpcmVmcmFtZSYmKGQud2lyZWZyYW1lPWEud2lyZWZyYW1lKTt2b2lkIDAhPT1cbiAgICBhLndpcmVmcmFtZUxpbmV3aWR0aCYmKGQud2lyZWZyYW1lTGluZXdpZHRoPWEud2lyZWZyYW1lTGluZXdpZHRoKTt2b2lkIDAhPT1hLndpcmVmcmFtZUxpbmVjYXAmJihkLndpcmVmcmFtZUxpbmVjYXA9YS53aXJlZnJhbWVMaW5lY2FwKTt2b2lkIDAhPT1hLndpcmVmcmFtZUxpbmVqb2luJiYoZC53aXJlZnJhbWVMaW5lam9pbj1hLndpcmVmcmFtZUxpbmVqb2luKTt2b2lkIDAhPT1hLnJvdGF0aW9uJiYoZC5yb3RhdGlvbj1hLnJvdGF0aW9uKTsxIT09YS5saW5ld2lkdGgmJihkLmxpbmV3aWR0aD1hLmxpbmV3aWR0aCk7dm9pZCAwIT09YS5kYXNoU2l6ZSYmKGQuZGFzaFNpemU9YS5kYXNoU2l6ZSk7dm9pZCAwIT09YS5nYXBTaXplJiYoZC5nYXBTaXplPWEuZ2FwU2l6ZSk7dm9pZCAwIT09YS5zY2FsZSYmKGQuc2NhbGU9YS5zY2FsZSk7dm9pZCAwIT09YS5za2lubmluZyYmKGQuc2tpbm5pbmc9YS5za2lubmluZyk7dm9pZCAwIT09YS5tb3JwaFRhcmdldHMmJihkLm1vcnBoVGFyZ2V0cz1cbiAgICBhLm1vcnBoVGFyZ2V0cyk7dm9pZCAwIT09YS5kaXRoZXJpbmcmJihkLmRpdGhlcmluZz1hLmRpdGhlcmluZyk7dm9pZCAwIT09YS52aXNpYmxlJiYoZC52aXNpYmxlPWEudmlzaWJsZSk7dm9pZCAwIT09YS51c2VyRGF0YSYmKGQudXNlckRhdGE9YS51c2VyRGF0YSk7dm9pZCAwIT09YS5zaGFkaW5nJiYoZC5mbGF0U2hhZGluZz0xPT09YS5zaGFkaW5nKTt2b2lkIDAhPT1hLnNpemUmJihkLnNpemU9YS5zaXplKTt2b2lkIDAhPT1hLnNpemVBdHRlbnVhdGlvbiYmKGQuc2l6ZUF0dGVudWF0aW9uPWEuc2l6ZUF0dGVudWF0aW9uKTt2b2lkIDAhPT1hLm1hcCYmKGQubWFwPWIoYS5tYXApKTt2b2lkIDAhPT1hLmFscGhhTWFwJiYoZC5hbHBoYU1hcD1iKGEuYWxwaGFNYXApLGQudHJhbnNwYXJlbnQ9ITApO3ZvaWQgMCE9PWEuYnVtcE1hcCYmKGQuYnVtcE1hcD1iKGEuYnVtcE1hcCkpO3ZvaWQgMCE9PWEuYnVtcFNjYWxlJiYoZC5idW1wU2NhbGU9YS5idW1wU2NhbGUpO3ZvaWQgMCE9PWEubm9ybWFsTWFwJiZcbiAgICAoZC5ub3JtYWxNYXA9YihhLm5vcm1hbE1hcCkpO2lmKHZvaWQgMCE9PWEubm9ybWFsU2NhbGUpe3ZhciBlPWEubm9ybWFsU2NhbGU7ITE9PT1BcnJheS5pc0FycmF5KGUpJiYoZT1bZSxlXSk7ZC5ub3JtYWxTY2FsZT0obmV3IEQpLmZyb21BcnJheShlKX12b2lkIDAhPT1hLmRpc3BsYWNlbWVudE1hcCYmKGQuZGlzcGxhY2VtZW50TWFwPWIoYS5kaXNwbGFjZW1lbnRNYXApKTt2b2lkIDAhPT1hLmRpc3BsYWNlbWVudFNjYWxlJiYoZC5kaXNwbGFjZW1lbnRTY2FsZT1hLmRpc3BsYWNlbWVudFNjYWxlKTt2b2lkIDAhPT1hLmRpc3BsYWNlbWVudEJpYXMmJihkLmRpc3BsYWNlbWVudEJpYXM9YS5kaXNwbGFjZW1lbnRCaWFzKTt2b2lkIDAhPT1hLnJvdWdobmVzc01hcCYmKGQucm91Z2huZXNzTWFwPWIoYS5yb3VnaG5lc3NNYXApKTt2b2lkIDAhPT1hLm1ldGFsbmVzc01hcCYmKGQubWV0YWxuZXNzTWFwPWIoYS5tZXRhbG5lc3NNYXApKTt2b2lkIDAhPT1hLmVtaXNzaXZlTWFwJiYoZC5lbWlzc2l2ZU1hcD1cbiAgICBiKGEuZW1pc3NpdmVNYXApKTt2b2lkIDAhPT1hLmVtaXNzaXZlSW50ZW5zaXR5JiYoZC5lbWlzc2l2ZUludGVuc2l0eT1hLmVtaXNzaXZlSW50ZW5zaXR5KTt2b2lkIDAhPT1hLnNwZWN1bGFyTWFwJiYoZC5zcGVjdWxhck1hcD1iKGEuc3BlY3VsYXJNYXApKTt2b2lkIDAhPT1hLmVudk1hcCYmKGQuZW52TWFwPWIoYS5lbnZNYXApKTt2b2lkIDAhPT1hLnJlZmxlY3Rpdml0eSYmKGQucmVmbGVjdGl2aXR5PWEucmVmbGVjdGl2aXR5KTt2b2lkIDAhPT1hLmxpZ2h0TWFwJiYoZC5saWdodE1hcD1iKGEubGlnaHRNYXApKTt2b2lkIDAhPT1hLmxpZ2h0TWFwSW50ZW5zaXR5JiYoZC5saWdodE1hcEludGVuc2l0eT1hLmxpZ2h0TWFwSW50ZW5zaXR5KTt2b2lkIDAhPT1hLmFvTWFwJiYoZC5hb01hcD1iKGEuYW9NYXApKTt2b2lkIDAhPT1hLmFvTWFwSW50ZW5zaXR5JiYoZC5hb01hcEludGVuc2l0eT1hLmFvTWFwSW50ZW5zaXR5KTt2b2lkIDAhPT1hLmdyYWRpZW50TWFwJiYoZC5ncmFkaWVudE1hcD1cbiAgICBiKGEuZ3JhZGllbnRNYXApKTtyZXR1cm4gZH19KTtPYmplY3QuYXNzaWduKGxlLnByb3RvdHlwZSx7bG9hZDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzOyhuZXcgTmEoZS5tYW5hZ2VyKSkubG9hZChhLGZ1bmN0aW9uKGEpe2IoZS5wYXJzZShKU09OLnBhcnNlKGEpKSl9LGMsZCl9LHBhcnNlOmZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBFO3ZhciBjPWEuZGF0YS5pbmRleDt2b2lkIDAhPT1jJiYoYz1uZXcgeGZbYy50eXBlXShjLmFycmF5KSxiLnNldEluZGV4KG5ldyBNKGMsMSkpKTt2YXIgZD1hLmRhdGEuYXR0cmlidXRlcztmb3IoZiBpbiBkKXt2YXIgZT1kW2ZdO2M9bmV3IHhmW2UudHlwZV0oZS5hcnJheSk7Yi5hZGRBdHRyaWJ1dGUoZixuZXcgTShjLGUuaXRlbVNpemUsZS5ub3JtYWxpemVkKSl9dmFyIGY9YS5kYXRhLmdyb3Vwc3x8YS5kYXRhLmRyYXdjYWxsc3x8YS5kYXRhLm9mZnNldHM7aWYodm9pZCAwIT09Zilmb3IoYz0wLGQ9Zi5sZW5ndGg7YyE9PWQ7KytjKWU9ZltjXSxcbiAgICBiLmFkZEdyb3VwKGUuc3RhcnQsZS5jb3VudCxlLm1hdGVyaWFsSW5kZXgpO2E9YS5kYXRhLmJvdW5kaW5nU3BoZXJlO3ZvaWQgMCE9PWEmJihmPW5ldyBwLHZvaWQgMCE9PWEuY2VudGVyJiZmLmZyb21BcnJheShhLmNlbnRlciksYi5ib3VuZGluZ1NwaGVyZT1uZXcgSWEoZixhLnJhZGl1cykpO3JldHVybiBifX0pO3ZhciB4Zj17SW50OEFycmF5OkludDhBcnJheSxVaW50OEFycmF5OlVpbnQ4QXJyYXksVWludDhDbGFtcGVkQXJyYXk6XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBVaW50OENsYW1wZWRBcnJheT9VaW50OENsYW1wZWRBcnJheTpVaW50OEFycmF5LEludDE2QXJyYXk6SW50MTZBcnJheSxVaW50MTZBcnJheTpVaW50MTZBcnJheSxJbnQzMkFycmF5OkludDMyQXJyYXksVWludDMyQXJyYXk6VWludDMyQXJyYXksRmxvYXQzMkFycmF5OkZsb2F0MzJBcnJheSxGbG9hdDY0QXJyYXk6RmxvYXQ2NEFycmF5fTtrYy5IYW5kbGVycz17aGFuZGxlcnM6W10sYWRkOmZ1bmN0aW9uKGEsYil7dGhpcy5oYW5kbGVycy5wdXNoKGEsXG4gICAgYil9LGdldDpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5oYW5kbGVycyxjPTAsZD1iLmxlbmd0aDtjPGQ7Yys9Mil7dmFyIGU9YltjKzFdO2lmKGJbY10udGVzdChhKSlyZXR1cm4gZX1yZXR1cm4gbnVsbH19O09iamVjdC5hc3NpZ24oa2MucHJvdG90eXBlLHtjcm9zc09yaWdpbjp2b2lkIDAsaW5pdE1hdGVyaWFsczpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPVtdLGU9MDtlPGEubGVuZ3RoOysrZSlkW2VdPXRoaXMuY3JlYXRlTWF0ZXJpYWwoYVtlXSxiLGMpO3JldHVybiBkfSxjcmVhdGVNYXRlcmlhbDpmdW5jdGlvbigpe3ZhciBhPXtOb0JsZW5kaW5nOjAsTm9ybWFsQmxlbmRpbmc6MSxBZGRpdGl2ZUJsZW5kaW5nOjIsU3VidHJhY3RpdmVCbGVuZGluZzozLE11bHRpcGx5QmxlbmRpbmc6NCxDdXN0b21CbGVuZGluZzo1fSxiPW5ldyBILGM9bmV3IEFkLGQ9bmV3IFBkO3JldHVybiBmdW5jdGlvbihlLGYsZyl7ZnVuY3Rpb24gaChhLGIsZCxlLGgpe2E9ZithO3ZhciBtPWtjLkhhbmRsZXJzLmdldChhKTtcbiAgICBudWxsIT09bT9hPW0ubG9hZChhKTooYy5zZXRDcm9zc09yaWdpbihnKSxhPWMubG9hZChhKSk7dm9pZCAwIT09YiYmKGEucmVwZWF0LmZyb21BcnJheShiKSwxIT09YlswXSYmKGEud3JhcFM9MUUzKSwxIT09YlsxXSYmKGEud3JhcFQ9MUUzKSk7dm9pZCAwIT09ZCYmYS5vZmZzZXQuZnJvbUFycmF5KGQpO3ZvaWQgMCE9PWUmJihcInJlcGVhdFwiPT09ZVswXSYmKGEud3JhcFM9MUUzKSxcIm1pcnJvclwiPT09ZVswXSYmKGEud3JhcFM9MTAwMiksXCJyZXBlYXRcIj09PWVbMV0mJihhLndyYXBUPTFFMyksXCJtaXJyb3JcIj09PWVbMV0mJihhLndyYXBUPTEwMDIpKTt2b2lkIDAhPT1oJiYoYS5hbmlzb3Ryb3B5PWgpO2I9US5nZW5lcmF0ZVVVSUQoKTtrW2JdPWE7cmV0dXJuIGJ9dmFyIGs9e30sbT17dXVpZDpRLmdlbmVyYXRlVVVJRCgpLHR5cGU6XCJNZXNoTGFtYmVydE1hdGVyaWFsXCJ9LGw7Zm9yKGwgaW4gZSl7dmFyIG49ZVtsXTtzd2l0Y2gobCl7Y2FzZSBcIkRiZ0NvbG9yXCI6Y2FzZSBcIkRiZ0luZGV4XCI6Y2FzZSBcIm9wdGljYWxEZW5zaXR5XCI6Y2FzZSBcImlsbHVtaW5hdGlvblwiOmJyZWFrO1xuICAgIGNhc2UgXCJEYmdOYW1lXCI6bS5uYW1lPW47YnJlYWs7Y2FzZSBcImJsZW5kaW5nXCI6bS5ibGVuZGluZz1hW25dO2JyZWFrO2Nhc2UgXCJjb2xvckFtYmllbnRcIjpjYXNlIFwibWFwQW1iaWVudFwiOmNvbnNvbGUud2FybihcIlRIUkVFLkxvYWRlci5jcmVhdGVNYXRlcmlhbDpcIixsLFwiaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZC5cIik7YnJlYWs7Y2FzZSBcImNvbG9yRGlmZnVzZVwiOm0uY29sb3I9Yi5mcm9tQXJyYXkobikuZ2V0SGV4KCk7YnJlYWs7Y2FzZSBcImNvbG9yU3BlY3VsYXJcIjptLnNwZWN1bGFyPWIuZnJvbUFycmF5KG4pLmdldEhleCgpO2JyZWFrO2Nhc2UgXCJjb2xvckVtaXNzaXZlXCI6bS5lbWlzc2l2ZT1iLmZyb21BcnJheShuKS5nZXRIZXgoKTticmVhaztjYXNlIFwic3BlY3VsYXJDb2VmXCI6bS5zaGluaW5lc3M9bjticmVhaztjYXNlIFwic2hhZGluZ1wiOlwiYmFzaWNcIj09PW4udG9Mb3dlckNhc2UoKSYmKG0udHlwZT1cIk1lc2hCYXNpY01hdGVyaWFsXCIpO1wicGhvbmdcIj09PW4udG9Mb3dlckNhc2UoKSYmXG4gICAgKG0udHlwZT1cIk1lc2hQaG9uZ01hdGVyaWFsXCIpO1wic3RhbmRhcmRcIj09PW4udG9Mb3dlckNhc2UoKSYmKG0udHlwZT1cIk1lc2hTdGFuZGFyZE1hdGVyaWFsXCIpO2JyZWFrO2Nhc2UgXCJtYXBEaWZmdXNlXCI6bS5tYXA9aChuLGUubWFwRGlmZnVzZVJlcGVhdCxlLm1hcERpZmZ1c2VPZmZzZXQsZS5tYXBEaWZmdXNlV3JhcCxlLm1hcERpZmZ1c2VBbmlzb3Ryb3B5KTticmVhaztjYXNlIFwibWFwRGlmZnVzZVJlcGVhdFwiOmNhc2UgXCJtYXBEaWZmdXNlT2Zmc2V0XCI6Y2FzZSBcIm1hcERpZmZ1c2VXcmFwXCI6Y2FzZSBcIm1hcERpZmZ1c2VBbmlzb3Ryb3B5XCI6YnJlYWs7Y2FzZSBcIm1hcEVtaXNzaXZlXCI6bS5lbWlzc2l2ZU1hcD1oKG4sZS5tYXBFbWlzc2l2ZVJlcGVhdCxlLm1hcEVtaXNzaXZlT2Zmc2V0LGUubWFwRW1pc3NpdmVXcmFwLGUubWFwRW1pc3NpdmVBbmlzb3Ryb3B5KTticmVhaztjYXNlIFwibWFwRW1pc3NpdmVSZXBlYXRcIjpjYXNlIFwibWFwRW1pc3NpdmVPZmZzZXRcIjpjYXNlIFwibWFwRW1pc3NpdmVXcmFwXCI6Y2FzZSBcIm1hcEVtaXNzaXZlQW5pc290cm9weVwiOmJyZWFrO1xuICAgIGNhc2UgXCJtYXBMaWdodFwiOm0ubGlnaHRNYXA9aChuLGUubWFwTGlnaHRSZXBlYXQsZS5tYXBMaWdodE9mZnNldCxlLm1hcExpZ2h0V3JhcCxlLm1hcExpZ2h0QW5pc290cm9weSk7YnJlYWs7Y2FzZSBcIm1hcExpZ2h0UmVwZWF0XCI6Y2FzZSBcIm1hcExpZ2h0T2Zmc2V0XCI6Y2FzZSBcIm1hcExpZ2h0V3JhcFwiOmNhc2UgXCJtYXBMaWdodEFuaXNvdHJvcHlcIjpicmVhaztjYXNlIFwibWFwQU9cIjptLmFvTWFwPWgobixlLm1hcEFPUmVwZWF0LGUubWFwQU9PZmZzZXQsZS5tYXBBT1dyYXAsZS5tYXBBT0FuaXNvdHJvcHkpO2JyZWFrO2Nhc2UgXCJtYXBBT1JlcGVhdFwiOmNhc2UgXCJtYXBBT09mZnNldFwiOmNhc2UgXCJtYXBBT1dyYXBcIjpjYXNlIFwibWFwQU9Bbmlzb3Ryb3B5XCI6YnJlYWs7Y2FzZSBcIm1hcEJ1bXBcIjptLmJ1bXBNYXA9aChuLGUubWFwQnVtcFJlcGVhdCxlLm1hcEJ1bXBPZmZzZXQsZS5tYXBCdW1wV3JhcCxlLm1hcEJ1bXBBbmlzb3Ryb3B5KTticmVhaztjYXNlIFwibWFwQnVtcFNjYWxlXCI6bS5idW1wU2NhbGU9XG4gICAgbjticmVhaztjYXNlIFwibWFwQnVtcFJlcGVhdFwiOmNhc2UgXCJtYXBCdW1wT2Zmc2V0XCI6Y2FzZSBcIm1hcEJ1bXBXcmFwXCI6Y2FzZSBcIm1hcEJ1bXBBbmlzb3Ryb3B5XCI6YnJlYWs7Y2FzZSBcIm1hcE5vcm1hbFwiOm0ubm9ybWFsTWFwPWgobixlLm1hcE5vcm1hbFJlcGVhdCxlLm1hcE5vcm1hbE9mZnNldCxlLm1hcE5vcm1hbFdyYXAsZS5tYXBOb3JtYWxBbmlzb3Ryb3B5KTticmVhaztjYXNlIFwibWFwTm9ybWFsRmFjdG9yXCI6bS5ub3JtYWxTY2FsZT1bbixuXTticmVhaztjYXNlIFwibWFwTm9ybWFsUmVwZWF0XCI6Y2FzZSBcIm1hcE5vcm1hbE9mZnNldFwiOmNhc2UgXCJtYXBOb3JtYWxXcmFwXCI6Y2FzZSBcIm1hcE5vcm1hbEFuaXNvdHJvcHlcIjpicmVhaztjYXNlIFwibWFwU3BlY3VsYXJcIjptLnNwZWN1bGFyTWFwPWgobixlLm1hcFNwZWN1bGFyUmVwZWF0LGUubWFwU3BlY3VsYXJPZmZzZXQsZS5tYXBTcGVjdWxhcldyYXAsZS5tYXBTcGVjdWxhckFuaXNvdHJvcHkpO2JyZWFrO2Nhc2UgXCJtYXBTcGVjdWxhclJlcGVhdFwiOmNhc2UgXCJtYXBTcGVjdWxhck9mZnNldFwiOmNhc2UgXCJtYXBTcGVjdWxhcldyYXBcIjpjYXNlIFwibWFwU3BlY3VsYXJBbmlzb3Ryb3B5XCI6YnJlYWs7XG4gICAgY2FzZSBcIm1hcE1ldGFsbmVzc1wiOm0ubWV0YWxuZXNzTWFwPWgobixlLm1hcE1ldGFsbmVzc1JlcGVhdCxlLm1hcE1ldGFsbmVzc09mZnNldCxlLm1hcE1ldGFsbmVzc1dyYXAsZS5tYXBNZXRhbG5lc3NBbmlzb3Ryb3B5KTticmVhaztjYXNlIFwibWFwTWV0YWxuZXNzUmVwZWF0XCI6Y2FzZSBcIm1hcE1ldGFsbmVzc09mZnNldFwiOmNhc2UgXCJtYXBNZXRhbG5lc3NXcmFwXCI6Y2FzZSBcIm1hcE1ldGFsbmVzc0FuaXNvdHJvcHlcIjpicmVhaztjYXNlIFwibWFwUm91Z2huZXNzXCI6bS5yb3VnaG5lc3NNYXA9aChuLGUubWFwUm91Z2huZXNzUmVwZWF0LGUubWFwUm91Z2huZXNzT2Zmc2V0LGUubWFwUm91Z2huZXNzV3JhcCxlLm1hcFJvdWdobmVzc0FuaXNvdHJvcHkpO2JyZWFrO2Nhc2UgXCJtYXBSb3VnaG5lc3NSZXBlYXRcIjpjYXNlIFwibWFwUm91Z2huZXNzT2Zmc2V0XCI6Y2FzZSBcIm1hcFJvdWdobmVzc1dyYXBcIjpjYXNlIFwibWFwUm91Z2huZXNzQW5pc290cm9weVwiOmJyZWFrO2Nhc2UgXCJtYXBBbHBoYVwiOm0uYWxwaGFNYXA9XG4gICAgaChuLGUubWFwQWxwaGFSZXBlYXQsZS5tYXBBbHBoYU9mZnNldCxlLm1hcEFscGhhV3JhcCxlLm1hcEFscGhhQW5pc290cm9weSk7YnJlYWs7Y2FzZSBcIm1hcEFscGhhUmVwZWF0XCI6Y2FzZSBcIm1hcEFscGhhT2Zmc2V0XCI6Y2FzZSBcIm1hcEFscGhhV3JhcFwiOmNhc2UgXCJtYXBBbHBoYUFuaXNvdHJvcHlcIjpicmVhaztjYXNlIFwiZmxpcFNpZGVkXCI6bS5zaWRlPTE7YnJlYWs7Y2FzZSBcImRvdWJsZVNpZGVkXCI6bS5zaWRlPTI7YnJlYWs7Y2FzZSBcInRyYW5zcGFyZW5jeVwiOmNvbnNvbGUud2FybihcIlRIUkVFLkxvYWRlci5jcmVhdGVNYXRlcmlhbDogdHJhbnNwYXJlbmN5IGhhcyBiZWVuIHJlbmFtZWQgdG8gb3BhY2l0eVwiKTttLm9wYWNpdHk9bjticmVhaztjYXNlIFwiZGVwdGhUZXN0XCI6Y2FzZSBcImRlcHRoV3JpdGVcIjpjYXNlIFwiY29sb3JXcml0ZVwiOmNhc2UgXCJvcGFjaXR5XCI6Y2FzZSBcInJlZmxlY3Rpdml0eVwiOmNhc2UgXCJ0cmFuc3BhcmVudFwiOmNhc2UgXCJ2aXNpYmxlXCI6Y2FzZSBcIndpcmVmcmFtZVwiOm1bbF09XG4gICAgbjticmVhaztjYXNlIFwidmVydGV4Q29sb3JzXCI6ITA9PT1uJiYobS52ZXJ0ZXhDb2xvcnM9Mik7XCJmYWNlXCI9PT1uJiYobS52ZXJ0ZXhDb2xvcnM9MSk7YnJlYWs7ZGVmYXVsdDpjb25zb2xlLmVycm9yKFwiVEhSRUUuTG9hZGVyLmNyZWF0ZU1hdGVyaWFsOiBVbnN1cHBvcnRlZFwiLGwsbil9fVwiTWVzaEJhc2ljTWF0ZXJpYWxcIj09PW0udHlwZSYmZGVsZXRlIG0uZW1pc3NpdmU7XCJNZXNoUGhvbmdNYXRlcmlhbFwiIT09bS50eXBlJiZkZWxldGUgbS5zcGVjdWxhcjsxPm0ub3BhY2l0eSYmKG0udHJhbnNwYXJlbnQ9ITApO2Quc2V0VGV4dHVyZXMoayk7cmV0dXJuIGQucGFyc2UobSl9fSgpfSk7dmFyIEhlPXtkZWNvZGVUZXh0OmZ1bmN0aW9uKGEpe2lmKFwidW5kZWZpbmVkXCIhPT10eXBlb2YgVGV4dERlY29kZXIpcmV0dXJuKG5ldyBUZXh0RGVjb2RlcikuZGVjb2RlKGEpO2Zvcih2YXIgYj1cIlwiLGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspYis9U3RyaW5nLmZyb21DaGFyQ29kZShhW2NdKTtyZXR1cm4gYn0sXG4gICAgZXh0cmFjdFVybEJhc2U6ZnVuY3Rpb24oYSl7YT1hLnNwbGl0KFwiL1wiKTtpZigxPT09YS5sZW5ndGgpcmV0dXJuXCIuL1wiO2EucG9wKCk7cmV0dXJuIGEuam9pbihcIi9cIikrXCIvXCJ9fTtPYmplY3QuYXNzaWduKG1lLnByb3RvdHlwZSx7bG9hZDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLGY9dGhpcy50ZXh0dXJlUGF0aCYmXCJzdHJpbmdcIj09PXR5cGVvZiB0aGlzLnRleHR1cmVQYXRoP3RoaXMudGV4dHVyZVBhdGg6SGUuZXh0cmFjdFVybEJhc2UoYSksZz1uZXcgTmEodGhpcy5tYW5hZ2VyKTtnLnNldFdpdGhDcmVkZW50aWFscyh0aGlzLndpdGhDcmVkZW50aWFscyk7Zy5sb2FkKGEsZnVuY3Rpb24oYyl7Yz1KU09OLnBhcnNlKGMpO3ZhciBkPWMubWV0YWRhdGE7aWYodm9pZCAwIT09ZCYmKGQ9ZC50eXBlLHZvaWQgMCE9PWQpKXtpZihcIm9iamVjdFwiPT09ZC50b0xvd2VyQ2FzZSgpKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuSlNPTkxvYWRlcjogXCIrYStcIiBzaG91bGQgYmUgbG9hZGVkIHdpdGggVEhSRUUuT2JqZWN0TG9hZGVyIGluc3RlYWQuXCIpO1xuICAgIHJldHVybn1pZihcInNjZW5lXCI9PT1kLnRvTG93ZXJDYXNlKCkpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5KU09OTG9hZGVyOiBcIithK1wiIHNob3VsZCBiZSBsb2FkZWQgd2l0aCBUSFJFRS5TY2VuZUxvYWRlciBpbnN0ZWFkLlwiKTtyZXR1cm59fWM9ZS5wYXJzZShjLGYpO2IoYy5nZW9tZXRyeSxjLm1hdGVyaWFscyl9LGMsZCl9LHNldFRleHR1cmVQYXRoOmZ1bmN0aW9uKGEpe3RoaXMudGV4dHVyZVBhdGg9YX0scGFyc2U6ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSxiKXt2b2lkIDAhPT1hLmRhdGEmJihhPWEuZGF0YSk7YS5zY2FsZT12b2lkIDAhPT1hLnNjYWxlPzEvYS5zY2FsZToxO3ZhciBjPW5ldyBMLGQ9YSxlLGYsZyxoPWQuZmFjZXM7dmFyIGs9ZC52ZXJ0aWNlczt2YXIgbT1kLm5vcm1hbHMsbD1kLmNvbG9yczt2YXIgbj1kLnNjYWxlO3ZhciB1PTA7aWYodm9pZCAwIT09ZC51dnMpe2ZvcihlPTA7ZTxkLnV2cy5sZW5ndGg7ZSsrKWQudXZzW2VdLmxlbmd0aCYmdSsrO2ZvcihlPVxuICAgIDA7ZTx1O2UrKyljLmZhY2VWZXJ0ZXhVdnNbZV09W119dmFyIHI9MDtmb3IoZz1rLmxlbmd0aDtyPGc7KWU9bmV3IHAsZS54PWtbcisrXSpuLGUueT1rW3IrK10qbixlLno9a1tyKytdKm4sYy52ZXJ0aWNlcy5wdXNoKGUpO3I9MDtmb3IoZz1oLmxlbmd0aDtyPGc7KXtrPWhbcisrXTt2YXIgdD1rJjE7dmFyIHY9ayYyO2U9ayY4O3ZhciB3PWsmMTY7dmFyIHo9ayYzMjtuPWsmNjQ7ayY9MTI4O2lmKHQpe3Q9bmV3IFlhO3QuYT1oW3JdO3QuYj1oW3IrMV07dC5jPWhbciszXTt2YXIgeT1uZXcgWWE7eS5hPWhbcisxXTt5LmI9aFtyKzJdO3kuYz1oW3IrM107cis9NDt2JiYodj1oW3IrK10sdC5tYXRlcmlhbEluZGV4PXYseS5tYXRlcmlhbEluZGV4PXYpO3Y9Yy5mYWNlcy5sZW5ndGg7aWYoZSlmb3IoZT0wO2U8dTtlKyspe3ZhciB4PWQudXZzW2VdO2MuZmFjZVZlcnRleFV2c1tlXVt2XT1bXTtjLmZhY2VWZXJ0ZXhVdnNbZV1bdisxXT1bXTtmb3IoZj0wOzQ+ZjtmKyspe3ZhciBBPWhbcisrXTtcbiAgICB2YXIgQj14WzIqQV07QT14WzIqQSsxXTtCPW5ldyBEKEIsQSk7MiE9PWYmJmMuZmFjZVZlcnRleFV2c1tlXVt2XS5wdXNoKEIpOzAhPT1mJiZjLmZhY2VWZXJ0ZXhVdnNbZV1bdisxXS5wdXNoKEIpfX13JiYodz0zKmhbcisrXSx0Lm5vcm1hbC5zZXQobVt3KytdLG1bdysrXSxtW3ddKSx5Lm5vcm1hbC5jb3B5KHQubm9ybWFsKSk7aWYoeilmb3IoZT0wOzQ+ZTtlKyspdz0zKmhbcisrXSx6PW5ldyBwKG1bdysrXSxtW3crK10sbVt3XSksMiE9PWUmJnQudmVydGV4Tm9ybWFscy5wdXNoKHopLDAhPT1lJiZ5LnZlcnRleE5vcm1hbHMucHVzaCh6KTtuJiYobj1oW3IrK10sbj1sW25dLHQuY29sb3Iuc2V0SGV4KG4pLHkuY29sb3Iuc2V0SGV4KG4pKTtpZihrKWZvcihlPTA7ND5lO2UrKyluPWhbcisrXSxuPWxbbl0sMiE9PWUmJnQudmVydGV4Q29sb3JzLnB1c2gobmV3IEgobikpLDAhPT1lJiZ5LnZlcnRleENvbG9ycy5wdXNoKG5ldyBIKG4pKTtjLmZhY2VzLnB1c2godCk7Yy5mYWNlcy5wdXNoKHkpfWVsc2V7dD1cbiAgICBuZXcgWWE7dC5hPWhbcisrXTt0LmI9aFtyKytdO3QuYz1oW3IrK107diYmKHY9aFtyKytdLHQubWF0ZXJpYWxJbmRleD12KTt2PWMuZmFjZXMubGVuZ3RoO2lmKGUpZm9yKGU9MDtlPHU7ZSsrKWZvcih4PWQudXZzW2VdLGMuZmFjZVZlcnRleFV2c1tlXVt2XT1bXSxmPTA7Mz5mO2YrKylBPWhbcisrXSxCPXhbMipBXSxBPXhbMipBKzFdLEI9bmV3IEQoQixBKSxjLmZhY2VWZXJ0ZXhVdnNbZV1bdl0ucHVzaChCKTt3JiYodz0zKmhbcisrXSx0Lm5vcm1hbC5zZXQobVt3KytdLG1bdysrXSxtW3ddKSk7aWYoeilmb3IoZT0wOzM+ZTtlKyspdz0zKmhbcisrXSx6PW5ldyBwKG1bdysrXSxtW3crK10sbVt3XSksdC52ZXJ0ZXhOb3JtYWxzLnB1c2goeik7biYmKG49aFtyKytdLHQuY29sb3Iuc2V0SGV4KGxbbl0pKTtpZihrKWZvcihlPTA7Mz5lO2UrKyluPWhbcisrXSx0LnZlcnRleENvbG9ycy5wdXNoKG5ldyBIKGxbbl0pKTtjLmZhY2VzLnB1c2godCl9fWQ9YTtyPXZvaWQgMCE9PWQuaW5mbHVlbmNlc1BlclZlcnRleD9cbiAgICBkLmluZmx1ZW5jZXNQZXJWZXJ0ZXg6MjtpZihkLnNraW5XZWlnaHRzKWZvcihnPTAsaD1kLnNraW5XZWlnaHRzLmxlbmd0aDtnPGg7Zys9ciljLnNraW5XZWlnaHRzLnB1c2gobmV3IGFhKGQuc2tpbldlaWdodHNbZ10sMTxyP2Quc2tpbldlaWdodHNbZysxXTowLDI8cj9kLnNraW5XZWlnaHRzW2crMl06MCwzPHI/ZC5za2luV2VpZ2h0c1tnKzNdOjApKTtpZihkLnNraW5JbmRpY2VzKWZvcihnPTAsaD1kLnNraW5JbmRpY2VzLmxlbmd0aDtnPGg7Zys9ciljLnNraW5JbmRpY2VzLnB1c2gobmV3IGFhKGQuc2tpbkluZGljZXNbZ10sMTxyP2Quc2tpbkluZGljZXNbZysxXTowLDI8cj9kLnNraW5JbmRpY2VzW2crMl06MCwzPHI/ZC5za2luSW5kaWNlc1tnKzNdOjApKTtjLmJvbmVzPWQuYm9uZXM7Yy5ib25lcyYmMDxjLmJvbmVzLmxlbmd0aCYmKGMuc2tpbldlaWdodHMubGVuZ3RoIT09Yy5za2luSW5kaWNlcy5sZW5ndGh8fGMuc2tpbkluZGljZXMubGVuZ3RoIT09Yy52ZXJ0aWNlcy5sZW5ndGgpJiZcbiAgICBjb25zb2xlLndhcm4oXCJXaGVuIHNraW5uaW5nLCBudW1iZXIgb2YgdmVydGljZXMgKFwiK2MudmVydGljZXMubGVuZ3RoK1wiKSwgc2tpbkluZGljZXMgKFwiK2Muc2tpbkluZGljZXMubGVuZ3RoK1wiKSwgYW5kIHNraW5XZWlnaHRzIChcIitjLnNraW5XZWlnaHRzLmxlbmd0aCtcIikgc2hvdWxkIG1hdGNoLlwiKTtnPWE7aD1nLnNjYWxlO2lmKHZvaWQgMCE9PWcubW9ycGhUYXJnZXRzKWZvcihkPTAscj1nLm1vcnBoVGFyZ2V0cy5sZW5ndGg7ZDxyO2QrKylmb3IoYy5tb3JwaFRhcmdldHNbZF09e30sYy5tb3JwaFRhcmdldHNbZF0ubmFtZT1nLm1vcnBoVGFyZ2V0c1tkXS5uYW1lLGMubW9ycGhUYXJnZXRzW2RdLnZlcnRpY2VzPVtdLG09Yy5tb3JwaFRhcmdldHNbZF0udmVydGljZXMsbD1nLm1vcnBoVGFyZ2V0c1tkXS52ZXJ0aWNlcyx1PTAsaz1sLmxlbmd0aDt1PGs7dSs9MyluPW5ldyBwLG4ueD1sW3VdKmgsbi55PWxbdSsxXSpoLG4uej1sW3UrMl0qaCxtLnB1c2gobik7aWYodm9pZCAwIT09XG4gICAgZy5tb3JwaENvbG9ycyYmMDxnLm1vcnBoQ29sb3JzLmxlbmd0aClmb3IoY29uc29sZS53YXJuKCdUSFJFRS5KU09OTG9hZGVyOiBcIm1vcnBoQ29sb3JzXCIgbm8gbG9uZ2VyIHN1cHBvcnRlZC4gVXNpbmcgdGhlbSBhcyBmYWNlIGNvbG9ycy4nKSxoPWMuZmFjZXMsZz1nLm1vcnBoQ29sb3JzWzBdLmNvbG9ycyxkPTAscj1oLmxlbmd0aDtkPHI7ZCsrKWhbZF0uY29sb3IuZnJvbUFycmF5KGcsMypkKTtnPWE7ZD1bXTtyPVtdO3ZvaWQgMCE9PWcuYW5pbWF0aW9uJiZyLnB1c2goZy5hbmltYXRpb24pO3ZvaWQgMCE9PWcuYW5pbWF0aW9ucyYmKGcuYW5pbWF0aW9ucy5sZW5ndGg/cj1yLmNvbmNhdChnLmFuaW1hdGlvbnMpOnIucHVzaChnLmFuaW1hdGlvbnMpKTtmb3IoZz0wO2c8ci5sZW5ndGg7ZysrKShoPUNhLnBhcnNlQW5pbWF0aW9uKHJbZ10sYy5ib25lcykpJiZkLnB1c2goaCk7Yy5tb3JwaFRhcmdldHMmJihyPUNhLkNyZWF0ZUNsaXBzRnJvbU1vcnBoVGFyZ2V0U2VxdWVuY2VzKGMubW9ycGhUYXJnZXRzLFxuICAgIDEwKSxkPWQuY29uY2F0KHIpKTswPGQubGVuZ3RoJiYoYy5hbmltYXRpb25zPWQpO2MuY29tcHV0ZUZhY2VOb3JtYWxzKCk7Yy5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTtpZih2b2lkIDA9PT1hLm1hdGVyaWFsc3x8MD09PWEubWF0ZXJpYWxzLmxlbmd0aClyZXR1cm57Z2VvbWV0cnk6Y307YT1rYy5wcm90b3R5cGUuaW5pdE1hdGVyaWFscyhhLm1hdGVyaWFscyxiLHRoaXMuY3Jvc3NPcmlnaW4pO3JldHVybntnZW9tZXRyeTpjLG1hdGVyaWFsczphfX19KCl9KTtPYmplY3QuYXNzaWduKGpmLnByb3RvdHlwZSx7bG9hZDpmdW5jdGlvbihhLGIsYyxkKXtcIlwiPT09dGhpcy50ZXh0dXJlUGF0aCYmKHRoaXMudGV4dHVyZVBhdGg9YS5zdWJzdHJpbmcoMCxhLmxhc3RJbmRleE9mKFwiL1wiKSsxKSk7dmFyIGU9dGhpczsobmV3IE5hKGUubWFuYWdlcikpLmxvYWQoYSxmdW5jdGlvbihjKXt2YXIgZj1udWxsO3RyeXtmPUpTT04ucGFyc2UoYyl9Y2F0Y2goaCl7dm9pZCAwIT09ZCYmZChoKTtjb25zb2xlLmVycm9yKFwiVEhSRUU6T2JqZWN0TG9hZGVyOiBDYW4ndCBwYXJzZSBcIitcbiAgICBhK1wiLlwiLGgubWVzc2FnZSk7cmV0dXJufWM9Zi5tZXRhZGF0YTt2b2lkIDA9PT1jfHx2b2lkIDA9PT1jLnR5cGV8fFwiZ2VvbWV0cnlcIj09PWMudHlwZS50b0xvd2VyQ2FzZSgpP2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5PYmplY3RMb2FkZXI6IENhbid0IGxvYWQgXCIrYStcIi4gVXNlIFRIUkVFLkpTT05Mb2FkZXIgaW5zdGVhZC5cIik6ZS5wYXJzZShmLGIpfSxjLGQpfSxzZXRUZXh0dXJlUGF0aDpmdW5jdGlvbihhKXt0aGlzLnRleHR1cmVQYXRoPWF9LHNldENyb3NzT3JpZ2luOmZ1bmN0aW9uKGEpe3RoaXMuY3Jvc3NPcmlnaW49YX0scGFyc2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnBhcnNlU2hhcGUoYS5zaGFwZXMpLGM9dGhpcy5wYXJzZUdlb21ldHJpZXMoYS5nZW9tZXRyaWVzLGMpLGQ9dGhpcy5wYXJzZUltYWdlcyhhLmltYWdlcyxmdW5jdGlvbigpe3ZvaWQgMCE9PWImJmIoZSl9KSxkPXRoaXMucGFyc2VUZXh0dXJlcyhhLnRleHR1cmVzLGQpLGQ9dGhpcy5wYXJzZU1hdGVyaWFscyhhLm1hdGVyaWFscyxcbiAgICBkKSxlPXRoaXMucGFyc2VPYmplY3QoYS5vYmplY3QsYyxkKTthLmFuaW1hdGlvbnMmJihlLmFuaW1hdGlvbnM9dGhpcy5wYXJzZUFuaW1hdGlvbnMoYS5hbmltYXRpb25zKSk7dm9pZCAwIT09YS5pbWFnZXMmJjAhPT1hLmltYWdlcy5sZW5ndGh8fHZvaWQgMD09PWJ8fGIoZSk7cmV0dXJuIGV9LHBhcnNlU2hhcGU6ZnVuY3Rpb24oYSl7dmFyIGI9e307aWYodm9pZCAwIT09YSlmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPShuZXcgamIpLmZyb21KU09OKGFbY10pO2JbZS51dWlkXT1lfXJldHVybiBifSxwYXJzZUdlb21ldHJpZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTtpZih2b2lkIDAhPT1hKWZvcih2YXIgZD1uZXcgbWUsZT1uZXcgbGUsZj0wLGc9YS5sZW5ndGg7ZjxnO2YrKyl7dmFyIGg9YVtmXTtzd2l0Y2goaC50eXBlKXtjYXNlIFwiUGxhbmVHZW9tZXRyeVwiOmNhc2UgXCJQbGFuZUJ1ZmZlckdlb21ldHJ5XCI6dmFyIGs9bmV3IGthW2gudHlwZV0oaC53aWR0aCxcbiAgICBoLmhlaWdodCxoLndpZHRoU2VnbWVudHMsaC5oZWlnaHRTZWdtZW50cyk7YnJlYWs7Y2FzZSBcIkJveEdlb21ldHJ5XCI6Y2FzZSBcIkJveEJ1ZmZlckdlb21ldHJ5XCI6Y2FzZSBcIkN1YmVHZW9tZXRyeVwiOms9bmV3IGthW2gudHlwZV0oaC53aWR0aCxoLmhlaWdodCxoLmRlcHRoLGgud2lkdGhTZWdtZW50cyxoLmhlaWdodFNlZ21lbnRzLGguZGVwdGhTZWdtZW50cyk7YnJlYWs7Y2FzZSBcIkNpcmNsZUdlb21ldHJ5XCI6Y2FzZSBcIkNpcmNsZUJ1ZmZlckdlb21ldHJ5XCI6az1uZXcga2FbaC50eXBlXShoLnJhZGl1cyxoLnNlZ21lbnRzLGgudGhldGFTdGFydCxoLnRoZXRhTGVuZ3RoKTticmVhaztjYXNlIFwiQ3lsaW5kZXJHZW9tZXRyeVwiOmNhc2UgXCJDeWxpbmRlckJ1ZmZlckdlb21ldHJ5XCI6az1uZXcga2FbaC50eXBlXShoLnJhZGl1c1RvcCxoLnJhZGl1c0JvdHRvbSxoLmhlaWdodCxoLnJhZGlhbFNlZ21lbnRzLGguaGVpZ2h0U2VnbWVudHMsaC5vcGVuRW5kZWQsaC50aGV0YVN0YXJ0LGgudGhldGFMZW5ndGgpO1xuICAgIGJyZWFrO2Nhc2UgXCJDb25lR2VvbWV0cnlcIjpjYXNlIFwiQ29uZUJ1ZmZlckdlb21ldHJ5XCI6az1uZXcga2FbaC50eXBlXShoLnJhZGl1cyxoLmhlaWdodCxoLnJhZGlhbFNlZ21lbnRzLGguaGVpZ2h0U2VnbWVudHMsaC5vcGVuRW5kZWQsaC50aGV0YVN0YXJ0LGgudGhldGFMZW5ndGgpO2JyZWFrO2Nhc2UgXCJTcGhlcmVHZW9tZXRyeVwiOmNhc2UgXCJTcGhlcmVCdWZmZXJHZW9tZXRyeVwiOms9bmV3IGthW2gudHlwZV0oaC5yYWRpdXMsaC53aWR0aFNlZ21lbnRzLGguaGVpZ2h0U2VnbWVudHMsaC5waGlTdGFydCxoLnBoaUxlbmd0aCxoLnRoZXRhU3RhcnQsaC50aGV0YUxlbmd0aCk7YnJlYWs7Y2FzZSBcIkRvZGVjYWhlZHJvbkdlb21ldHJ5XCI6Y2FzZSBcIkRvZGVjYWhlZHJvbkJ1ZmZlckdlb21ldHJ5XCI6Y2FzZSBcIkljb3NhaGVkcm9uR2VvbWV0cnlcIjpjYXNlIFwiSWNvc2FoZWRyb25CdWZmZXJHZW9tZXRyeVwiOmNhc2UgXCJPY3RhaGVkcm9uR2VvbWV0cnlcIjpjYXNlIFwiT2N0YWhlZHJvbkJ1ZmZlckdlb21ldHJ5XCI6Y2FzZSBcIlRldHJhaGVkcm9uR2VvbWV0cnlcIjpjYXNlIFwiVGV0cmFoZWRyb25CdWZmZXJHZW9tZXRyeVwiOms9XG4gICAgbmV3IGthW2gudHlwZV0oaC5yYWRpdXMsaC5kZXRhaWwpO2JyZWFrO2Nhc2UgXCJSaW5nR2VvbWV0cnlcIjpjYXNlIFwiUmluZ0J1ZmZlckdlb21ldHJ5XCI6az1uZXcga2FbaC50eXBlXShoLmlubmVyUmFkaXVzLGgub3V0ZXJSYWRpdXMsaC50aGV0YVNlZ21lbnRzLGgucGhpU2VnbWVudHMsaC50aGV0YVN0YXJ0LGgudGhldGFMZW5ndGgpO2JyZWFrO2Nhc2UgXCJUb3J1c0dlb21ldHJ5XCI6Y2FzZSBcIlRvcnVzQnVmZmVyR2VvbWV0cnlcIjprPW5ldyBrYVtoLnR5cGVdKGgucmFkaXVzLGgudHViZSxoLnJhZGlhbFNlZ21lbnRzLGgudHVidWxhclNlZ21lbnRzLGguYXJjKTticmVhaztjYXNlIFwiVG9ydXNLbm90R2VvbWV0cnlcIjpjYXNlIFwiVG9ydXNLbm90QnVmZmVyR2VvbWV0cnlcIjprPW5ldyBrYVtoLnR5cGVdKGgucmFkaXVzLGgudHViZSxoLnR1YnVsYXJTZWdtZW50cyxoLnJhZGlhbFNlZ21lbnRzLGgucCxoLnEpO2JyZWFrO2Nhc2UgXCJMYXRoZUdlb21ldHJ5XCI6Y2FzZSBcIkxhdGhlQnVmZmVyR2VvbWV0cnlcIjprPVxuICAgIG5ldyBrYVtoLnR5cGVdKGgucG9pbnRzLGguc2VnbWVudHMsaC5waGlTdGFydCxoLnBoaUxlbmd0aCk7YnJlYWs7Y2FzZSBcIlBvbHloZWRyb25HZW9tZXRyeVwiOmNhc2UgXCJQb2x5aGVkcm9uQnVmZmVyR2VvbWV0cnlcIjprPW5ldyBrYVtoLnR5cGVdKGgudmVydGljZXMsaC5pbmRpY2VzLGgucmFkaXVzLGguZGV0YWlscyk7YnJlYWs7Y2FzZSBcIlNoYXBlR2VvbWV0cnlcIjpjYXNlIFwiU2hhcGVCdWZmZXJHZW9tZXRyeVwiOms9W107Zj0wO2ZvcihnPWguc2hhcGVzLmxlbmd0aDtmPGc7ZisrKWsucHVzaChiW2guc2hhcGVzW2ZdXSk7az1uZXcga2FbaC50eXBlXShrLGguY3VydmVTZWdtZW50cyk7YnJlYWs7Y2FzZSBcIkJ1ZmZlckdlb21ldHJ5XCI6az1lLnBhcnNlKGgpO2JyZWFrO2Nhc2UgXCJHZW9tZXRyeVwiOms9ZC5wYXJzZShoLHRoaXMudGV4dHVyZVBhdGgpLmdlb21ldHJ5O2JyZWFrO2RlZmF1bHQ6Y29uc29sZS53YXJuKCdUSFJFRS5PYmplY3RMb2FkZXI6IFVuc3VwcG9ydGVkIGdlb21ldHJ5IHR5cGUgXCInK1xuICAgIGgudHlwZSsnXCInKTtjb250aW51ZX1rLnV1aWQ9aC51dWlkO3ZvaWQgMCE9PWgubmFtZSYmKGsubmFtZT1oLm5hbWUpO2NbaC51dWlkXT1rfXJldHVybiBjfSxwYXJzZU1hdGVyaWFsczpmdW5jdGlvbihhLGIpe3ZhciBjPXt9O2lmKHZvaWQgMCE9PWEpe3ZhciBkPW5ldyBQZDtkLnNldFRleHR1cmVzKGIpO2I9MDtmb3IodmFyIGU9YS5sZW5ndGg7YjxlO2IrKyl7dmFyIGY9YVtiXTtpZihcIk11bHRpTWF0ZXJpYWxcIj09PWYudHlwZSl7Zm9yKHZhciBnPVtdLGg9MDtoPGYubWF0ZXJpYWxzLmxlbmd0aDtoKyspZy5wdXNoKGQucGFyc2UoZi5tYXRlcmlhbHNbaF0pKTtjW2YudXVpZF09Z31lbHNlIGNbZi51dWlkXT1kLnBhcnNlKGYpfX1yZXR1cm4gY30scGFyc2VBbmltYXRpb25zOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPTA7YzxhLmxlbmd0aDtjKyspe3ZhciBkPUNhLnBhcnNlKGFbY10pO2IucHVzaChkKX1yZXR1cm4gYn0scGFyc2VJbWFnZXM6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe2QubWFuYWdlci5pdGVtU3RhcnQoYSk7XG4gICAgcmV0dXJuIGYubG9hZChhLGZ1bmN0aW9uKCl7ZC5tYW5hZ2VyLml0ZW1FbmQoYSl9LHZvaWQgMCxmdW5jdGlvbigpe2QubWFuYWdlci5pdGVtRW5kKGEpO2QubWFuYWdlci5pdGVtRXJyb3IoYSl9KX12YXIgZD10aGlzLGU9e307aWYodm9pZCAwIT09YSYmMDxhLmxlbmd0aCl7Yj1uZXcgaGUoYik7dmFyIGY9bmV3IGFkKGIpO2Yuc2V0Q3Jvc3NPcmlnaW4odGhpcy5jcm9zc09yaWdpbik7Yj0wO2Zvcih2YXIgZz1hLmxlbmd0aDtiPGc7YisrKXt2YXIgaD1hW2JdLGs9L14oXFwvXFwvKXwoW2Etel0rOihcXC9cXC8pPykvaS50ZXN0KGgudXJsKT9oLnVybDpkLnRleHR1cmVQYXRoK2gudXJsO2VbaC51dWlkXT1jKGspfX1yZXR1cm4gZX0scGFyc2VUZXh0dXJlczpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSxiKXtpZihcIm51bWJlclwiPT09dHlwZW9mIGEpcmV0dXJuIGE7Y29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0TG9hZGVyLnBhcnNlVGV4dHVyZTogQ29uc3RhbnQgc2hvdWxkIGJlIGluIG51bWVyaWMgZm9ybS5cIixcbiAgICBhKTtyZXR1cm4gYlthXX12YXIgZD17fTtpZih2b2lkIDAhPT1hKWZvcih2YXIgZT0wLGY9YS5sZW5ndGg7ZTxmO2UrKyl7dmFyIGc9YVtlXTt2b2lkIDA9PT1nLmltYWdlJiZjb25zb2xlLndhcm4oJ1RIUkVFLk9iamVjdExvYWRlcjogTm8gXCJpbWFnZVwiIHNwZWNpZmllZCBmb3InLGcudXVpZCk7dm9pZCAwPT09YltnLmltYWdlXSYmY29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0TG9hZGVyOiBVbmRlZmluZWQgaW1hZ2VcIixnLmltYWdlKTt2YXIgaD1uZXcgVShiW2cuaW1hZ2VdKTtoLm5lZWRzVXBkYXRlPSEwO2gudXVpZD1nLnV1aWQ7dm9pZCAwIT09Zy5uYW1lJiYoaC5uYW1lPWcubmFtZSk7dm9pZCAwIT09Zy5tYXBwaW5nJiYoaC5tYXBwaW5nPWMoZy5tYXBwaW5nLE9nKSk7dm9pZCAwIT09Zy5vZmZzZXQmJmgub2Zmc2V0LmZyb21BcnJheShnLm9mZnNldCk7dm9pZCAwIT09Zy5yZXBlYXQmJmgucmVwZWF0LmZyb21BcnJheShnLnJlcGVhdCk7dm9pZCAwIT09Zy5jZW50ZXImJmguY2VudGVyLmZyb21BcnJheShnLmNlbnRlcik7XG4gICAgdm9pZCAwIT09Zy5yb3RhdGlvbiYmKGgucm90YXRpb249Zy5yb3RhdGlvbik7dm9pZCAwIT09Zy53cmFwJiYoaC53cmFwUz1jKGcud3JhcFswXSx5ZiksaC53cmFwVD1jKGcud3JhcFsxXSx5ZikpO3ZvaWQgMCE9PWcubWluRmlsdGVyJiYoaC5taW5GaWx0ZXI9YyhnLm1pbkZpbHRlcix6ZikpO3ZvaWQgMCE9PWcubWFnRmlsdGVyJiYoaC5tYWdGaWx0ZXI9YyhnLm1hZ0ZpbHRlcix6ZikpO3ZvaWQgMCE9PWcuYW5pc290cm9weSYmKGguYW5pc290cm9weT1nLmFuaXNvdHJvcHkpO3ZvaWQgMCE9PWcuZmxpcFkmJihoLmZsaXBZPWcuZmxpcFkpO2RbZy51dWlkXT1ofXJldHVybiBkfSxwYXJzZU9iamVjdDpmdW5jdGlvbigpe3ZhciBhPW5ldyBPO3JldHVybiBmdW5jdGlvbihiLGMsZCl7ZnVuY3Rpb24gZShhKXt2b2lkIDA9PT1jW2FdJiZjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3RMb2FkZXI6IFVuZGVmaW5lZCBnZW9tZXRyeVwiLGEpO3JldHVybiBjW2FdfWZ1bmN0aW9uIGYoYSl7aWYodm9pZCAwIT09XG4gICAgYSl7aWYoQXJyYXkuaXNBcnJheShhKSl7Zm9yKHZhciBiPVtdLGM9MCxlPWEubGVuZ3RoO2M8ZTtjKyspe3ZhciBmPWFbY107dm9pZCAwPT09ZFtmXSYmY29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0TG9hZGVyOiBVbmRlZmluZWQgbWF0ZXJpYWxcIixmKTtiLnB1c2goZFtmXSl9cmV0dXJuIGJ9dm9pZCAwPT09ZFthXSYmY29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0TG9hZGVyOiBVbmRlZmluZWQgbWF0ZXJpYWxcIixhKTtyZXR1cm4gZFthXX19c3dpdGNoKGIudHlwZSl7Y2FzZSBcIlNjZW5lXCI6dmFyIGc9bmV3IHZkO3ZvaWQgMCE9PWIuYmFja2dyb3VuZCYmTnVtYmVyLmlzSW50ZWdlcihiLmJhY2tncm91bmQpJiYoZy5iYWNrZ3JvdW5kPW5ldyBIKGIuYmFja2dyb3VuZCkpO3ZvaWQgMCE9PWIuZm9nJiYoXCJGb2dcIj09PWIuZm9nLnR5cGU/Zy5mb2c9bmV3IFFiKGIuZm9nLmNvbG9yLGIuZm9nLm5lYXIsYi5mb2cuZmFyKTpcIkZvZ0V4cDJcIj09PWIuZm9nLnR5cGUmJihnLmZvZz1uZXcgUGIoYi5mb2cuY29sb3IsXG4gICAgYi5mb2cuZGVuc2l0eSkpKTticmVhaztjYXNlIFwiUGVyc3BlY3RpdmVDYW1lcmFcIjpnPW5ldyBiYShiLmZvdixiLmFzcGVjdCxiLm5lYXIsYi5mYXIpO3ZvaWQgMCE9PWIuZm9jdXMmJihnLmZvY3VzPWIuZm9jdXMpO3ZvaWQgMCE9PWIuem9vbSYmKGcuem9vbT1iLnpvb20pO3ZvaWQgMCE9PWIuZmlsbUdhdWdlJiYoZy5maWxtR2F1Z2U9Yi5maWxtR2F1Z2UpO3ZvaWQgMCE9PWIuZmlsbU9mZnNldCYmKGcuZmlsbU9mZnNldD1iLmZpbG1PZmZzZXQpO3ZvaWQgMCE9PWIudmlldyYmKGcudmlldz1PYmplY3QuYXNzaWduKHt9LGIudmlldykpO2JyZWFrO2Nhc2UgXCJPcnRob2dyYXBoaWNDYW1lcmFcIjpnPW5ldyBMYihiLmxlZnQsYi5yaWdodCxiLnRvcCxiLmJvdHRvbSxiLm5lYXIsYi5mYXIpO2JyZWFrO2Nhc2UgXCJBbWJpZW50TGlnaHRcIjpnPW5ldyBIZChiLmNvbG9yLGIuaW50ZW5zaXR5KTticmVhaztjYXNlIFwiRGlyZWN0aW9uYWxMaWdodFwiOmc9bmV3IEdkKGIuY29sb3IsYi5pbnRlbnNpdHkpO1xuICAgIGJyZWFrO2Nhc2UgXCJQb2ludExpZ2h0XCI6Zz1uZXcgRWQoYi5jb2xvcixiLmludGVuc2l0eSxiLmRpc3RhbmNlLGIuZGVjYXkpO2JyZWFrO2Nhc2UgXCJSZWN0QXJlYUxpZ2h0XCI6Zz1uZXcgSWQoYi5jb2xvcixiLmludGVuc2l0eSxiLndpZHRoLGIuaGVpZ2h0KTticmVhaztjYXNlIFwiU3BvdExpZ2h0XCI6Zz1uZXcgRGQoYi5jb2xvcixiLmludGVuc2l0eSxiLmRpc3RhbmNlLGIuYW5nbGUsYi5wZW51bWJyYSxiLmRlY2F5KTticmVhaztjYXNlIFwiSGVtaXNwaGVyZUxpZ2h0XCI6Zz1uZXcgQmQoYi5jb2xvcixiLmdyb3VuZENvbG9yLGIuaW50ZW5zaXR5KTticmVhaztjYXNlIFwiU2tpbm5lZE1lc2hcIjpjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3RMb2FkZXIucGFyc2VPYmplY3QoKSBkb2VzIG5vdCBzdXBwb3J0IFNraW5uZWRNZXNoIHlldC5cIik7Y2FzZSBcIk1lc2hcIjpnPWUoYi5nZW9tZXRyeSk7dmFyIGg9ZihiLm1hdGVyaWFsKTtnPWcuYm9uZXMmJjA8Zy5ib25lcy5sZW5ndGg/bmV3IHhkKGcsXG4gICAgaCk6bmV3IHJhKGcsaCk7YnJlYWs7Y2FzZSBcIkxPRFwiOmc9bmV3IERjO2JyZWFrO2Nhc2UgXCJMaW5lXCI6Zz1uZXcgc2EoZShiLmdlb21ldHJ5KSxmKGIubWF0ZXJpYWwpLGIubW9kZSk7YnJlYWs7Y2FzZSBcIkxpbmVMb29wXCI6Zz1uZXcgeWQoZShiLmdlb21ldHJ5KSxmKGIubWF0ZXJpYWwpKTticmVhaztjYXNlIFwiTGluZVNlZ21lbnRzXCI6Zz1uZXcgWChlKGIuZ2VvbWV0cnkpLGYoYi5tYXRlcmlhbCkpO2JyZWFrO2Nhc2UgXCJQb2ludENsb3VkXCI6Y2FzZSBcIlBvaW50c1wiOmc9bmV3IFJiKGUoYi5nZW9tZXRyeSksZihiLm1hdGVyaWFsKSk7YnJlYWs7Y2FzZSBcIlNwcml0ZVwiOmc9bmV3IENjKGYoYi5tYXRlcmlhbCkpO2JyZWFrO2Nhc2UgXCJHcm91cFwiOmc9bmV3IEZjO2JyZWFrO2RlZmF1bHQ6Zz1uZXcgeH1nLnV1aWQ9Yi51dWlkO3ZvaWQgMCE9PWIubmFtZSYmKGcubmFtZT1iLm5hbWUpO3ZvaWQgMCE9PWIubWF0cml4PyhhLmZyb21BcnJheShiLm1hdHJpeCksYS5kZWNvbXBvc2UoZy5wb3NpdGlvbixcbiAgICBnLnF1YXRlcm5pb24sZy5zY2FsZSkpOih2b2lkIDAhPT1iLnBvc2l0aW9uJiZnLnBvc2l0aW9uLmZyb21BcnJheShiLnBvc2l0aW9uKSx2b2lkIDAhPT1iLnJvdGF0aW9uJiZnLnJvdGF0aW9uLmZyb21BcnJheShiLnJvdGF0aW9uKSx2b2lkIDAhPT1iLnF1YXRlcm5pb24mJmcucXVhdGVybmlvbi5mcm9tQXJyYXkoYi5xdWF0ZXJuaW9uKSx2b2lkIDAhPT1iLnNjYWxlJiZnLnNjYWxlLmZyb21BcnJheShiLnNjYWxlKSk7dm9pZCAwIT09Yi5jYXN0U2hhZG93JiYoZy5jYXN0U2hhZG93PWIuY2FzdFNoYWRvdyk7dm9pZCAwIT09Yi5yZWNlaXZlU2hhZG93JiYoZy5yZWNlaXZlU2hhZG93PWIucmVjZWl2ZVNoYWRvdyk7Yi5zaGFkb3cmJih2b2lkIDAhPT1iLnNoYWRvdy5iaWFzJiYoZy5zaGFkb3cuYmlhcz1iLnNoYWRvdy5iaWFzKSx2b2lkIDAhPT1iLnNoYWRvdy5yYWRpdXMmJihnLnNoYWRvdy5yYWRpdXM9Yi5zaGFkb3cucmFkaXVzKSx2b2lkIDAhPT1iLnNoYWRvdy5tYXBTaXplJiZcbiAgICBnLnNoYWRvdy5tYXBTaXplLmZyb21BcnJheShiLnNoYWRvdy5tYXBTaXplKSx2b2lkIDAhPT1iLnNoYWRvdy5jYW1lcmEmJihnLnNoYWRvdy5jYW1lcmE9dGhpcy5wYXJzZU9iamVjdChiLnNoYWRvdy5jYW1lcmEpKSk7dm9pZCAwIT09Yi52aXNpYmxlJiYoZy52aXNpYmxlPWIudmlzaWJsZSk7dm9pZCAwIT09Yi51c2VyRGF0YSYmKGcudXNlckRhdGE9Yi51c2VyRGF0YSk7aWYodm9pZCAwIT09Yi5jaGlsZHJlbilmb3IodmFyIGg9Yi5jaGlsZHJlbixrPTA7azxoLmxlbmd0aDtrKyspZy5hZGQodGhpcy5wYXJzZU9iamVjdChoW2tdLGMsZCkpO2lmKFwiTE9EXCI9PT1iLnR5cGUpZm9yKGI9Yi5sZXZlbHMsaD0wO2g8Yi5sZW5ndGg7aCsrKXt2YXIgaz1iW2hdLG09Zy5nZXRPYmplY3RCeVByb3BlcnR5KFwidXVpZFwiLGsub2JqZWN0KTt2b2lkIDAhPT1tJiZnLmFkZExldmVsKG0say5kaXN0YW5jZSl9cmV0dXJuIGd9fSgpfSk7dmFyIE9nPXtVVk1hcHBpbmc6MzAwLEN1YmVSZWZsZWN0aW9uTWFwcGluZzozMDEsXG4gICAgQ3ViZVJlZnJhY3Rpb25NYXBwaW5nOjMwMixFcXVpcmVjdGFuZ3VsYXJSZWZsZWN0aW9uTWFwcGluZzozMDMsRXF1aXJlY3Rhbmd1bGFyUmVmcmFjdGlvbk1hcHBpbmc6MzA0LFNwaGVyaWNhbFJlZmxlY3Rpb25NYXBwaW5nOjMwNSxDdWJlVVZSZWZsZWN0aW9uTWFwcGluZzozMDYsQ3ViZVVWUmVmcmFjdGlvbk1hcHBpbmc6MzA3fSx5Zj17UmVwZWF0V3JhcHBpbmc6MUUzLENsYW1wVG9FZGdlV3JhcHBpbmc6MTAwMSxNaXJyb3JlZFJlcGVhdFdyYXBwaW5nOjEwMDJ9LHpmPXtOZWFyZXN0RmlsdGVyOjEwMDMsTmVhcmVzdE1pcE1hcE5lYXJlc3RGaWx0ZXI6MTAwNCxOZWFyZXN0TWlwTWFwTGluZWFyRmlsdGVyOjEwMDUsTGluZWFyRmlsdGVyOjEwMDYsTGluZWFyTWlwTWFwTmVhcmVzdEZpbHRlcjoxMDA3LExpbmVhck1pcE1hcExpbmVhckZpbHRlcjoxMDA4fTtuZS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOm5lLHNldE9wdGlvbnM6ZnVuY3Rpb24oYSl7dGhpcy5vcHRpb25zPWE7cmV0dXJuIHRoaXN9LFxuICAgIGxvYWQ6ZnVuY3Rpb24oYSxiLGMsZCl7dm9pZCAwPT09YSYmKGE9XCJcIik7dm9pZCAwIT09dGhpcy5wYXRoJiYoYT10aGlzLnBhdGgrYSk7dmFyIGU9dGhpcyxmPUliLmdldChhKTtpZih2b2lkIDAhPT1mKXJldHVybiBlLm1hbmFnZXIuaXRlbVN0YXJ0KGEpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiJiZiKGYpO2UubWFuYWdlci5pdGVtRW5kKGEpfSwwKSxmO2ZldGNoKGEpLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGEuYmxvYigpfSkudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gY3JlYXRlSW1hZ2VCaXRtYXAoYSxlLm9wdGlvbnMpfSkudGhlbihmdW5jdGlvbihjKXtJYi5hZGQoYSxjKTtiJiZiKGMpO2UubWFuYWdlci5pdGVtRW5kKGEpfSkuY2F0Y2goZnVuY3Rpb24oYil7ZCYmZChiKTtlLm1hbmFnZXIuaXRlbUVuZChhKTtlLm1hbmFnZXIuaXRlbUVycm9yKGEpfSl9LHNldENyb3NzT3JpZ2luOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LHNldFBhdGg6ZnVuY3Rpb24oYSl7dGhpcy5wYXRoPVxuICAgIGE7cmV0dXJuIHRoaXN9fTtPYmplY3QuYXNzaWduKG9lLnByb3RvdHlwZSx7bW92ZVRvOmZ1bmN0aW9uKGEsYil7dGhpcy5jdXJyZW50UGF0aD1uZXcgU2E7dGhpcy5zdWJQYXRocy5wdXNoKHRoaXMuY3VycmVudFBhdGgpO3RoaXMuY3VycmVudFBhdGgubW92ZVRvKGEsYil9LGxpbmVUbzpmdW5jdGlvbihhLGIpe3RoaXMuY3VycmVudFBhdGgubGluZVRvKGEsYil9LHF1YWRyYXRpY0N1cnZlVG86ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5jdXJyZW50UGF0aC5xdWFkcmF0aWNDdXJ2ZVRvKGEsYixjLGQpfSxiZXppZXJDdXJ2ZVRvOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLmN1cnJlbnRQYXRoLmJlemllckN1cnZlVG8oYSxiLGMsZCxlLGYpfSxzcGxpbmVUaHJ1OmZ1bmN0aW9uKGEpe3RoaXMuY3VycmVudFBhdGguc3BsaW5lVGhydShhKX0sdG9TaGFwZXM6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT1cbiAgICBhW2NdLGY9bmV3IGpiO2YuY3VydmVzPWUuY3VydmVzO2IucHVzaChmKX1yZXR1cm4gYn1mdW5jdGlvbiBkKGEsYil7Zm9yKHZhciBjPWIubGVuZ3RoLGQ9ITEsZT1jLTEsZj0wO2Y8YztlPWYrKyl7dmFyIGc9YltlXSxoPWJbZl0saz1oLngtZy54LG09aC55LWcueTtpZihNYXRoLmFicyhtKT5OdW1iZXIuRVBTSUxPTil7aWYoMD5tJiYoZz1iW2ZdLGs9LWssaD1iW2VdLG09LW0pLCEoYS55PGcueXx8YS55PmgueSkpaWYoYS55PT09Zy55KXtpZihhLng9PT1nLngpcmV0dXJuITB9ZWxzZXtlPW0qKGEueC1nLngpLWsqKGEueS1nLnkpO2lmKDA9PT1lKXJldHVybiEwOzA+ZXx8KGQ9IWQpfX1lbHNlIGlmKGEueT09PWcueSYmKGgueDw9YS54JiZhLng8PWcueHx8Zy54PD1hLngmJmEueDw9aC54KSlyZXR1cm4hMH1yZXR1cm4gZH12YXIgZT0kYS5pc0Nsb2NrV2lzZSxmPXRoaXMuc3ViUGF0aHM7aWYoMD09PWYubGVuZ3RoKXJldHVybltdO2lmKCEwPT09YilyZXR1cm4gYyhmKTtiPVtdO2lmKDE9PT1cbiAgICBmLmxlbmd0aCl7dmFyIGc9ZlswXTt2YXIgaD1uZXcgamI7aC5jdXJ2ZXM9Zy5jdXJ2ZXM7Yi5wdXNoKGgpO3JldHVybiBifXZhciBrPSFlKGZbMF0uZ2V0UG9pbnRzKCkpLGs9YT8hazprO2g9W107dmFyIG09W10sbD1bXSxuPTA7bVtuXT12b2lkIDA7bFtuXT1bXTtmb3IodmFyIHA9MCxyPWYubGVuZ3RoO3A8cjtwKyspe2c9ZltwXTt2YXIgdD1nLmdldFBvaW50cygpO3ZhciB2PWUodCk7KHY9YT8hdjp2KT8oIWsmJm1bbl0mJm4rKyxtW25dPXtzOm5ldyBqYixwOnR9LG1bbl0ucy5jdXJ2ZXM9Zy5jdXJ2ZXMsayYmbisrLGxbbl09W10pOmxbbl0ucHVzaCh7aDpnLHA6dFswXX0pfWlmKCFtWzBdKXJldHVybiBjKGYpO2lmKDE8bS5sZW5ndGgpe3A9ITE7YT1bXTtlPTA7Zm9yKGY9bS5sZW5ndGg7ZTxmO2UrKyloW2VdPVtdO2U9MDtmb3IoZj1tLmxlbmd0aDtlPGY7ZSsrKWZvcihnPWxbZV0sdj0wO3Y8Zy5sZW5ndGg7disrKXtrPWdbdl07bj0hMDtmb3IodD0wO3Q8bS5sZW5ndGg7dCsrKWQoay5wLFxuICAgIG1bdF0ucCkmJihlIT09dCYmYS5wdXNoKHtmcm9tczplLHRvczp0LGhvbGU6dn0pLG4/KG49ITEsaFt0XS5wdXNoKGspKTpwPSEwKTtuJiZoW2VdLnB1c2goayl9MDxhLmxlbmd0aCYmKHB8fChsPWgpKX1wPTA7Zm9yKGU9bS5sZW5ndGg7cDxlO3ArKylmb3IoaD1tW3BdLnMsYi5wdXNoKGgpLGE9bFtwXSxmPTAsZz1hLmxlbmd0aDtmPGc7ZisrKWguaG9sZXMucHVzaChhW2ZdLmgpO3JldHVybiBifX0pO09iamVjdC5hc3NpZ24ocGUucHJvdG90eXBlLHtpc0ZvbnQ6ITAsZ2VuZXJhdGVTaGFwZXM6ZnVuY3Rpb24oYSxiLGMpe3ZvaWQgMD09PWImJihiPTEwMCk7Yz10aGlzLmRhdGE7YT1TdHJpbmcoYSkuc3BsaXQoXCJcIik7dmFyIGQ9Yi9jLnJlc29sdXRpb24sZT0oYy5ib3VuZGluZ0JveC55TWF4LWMuYm91bmRpbmdCb3gueU1pbitjLnVuZGVybGluZVRoaWNrbmVzcykqZCxmPTAsZz0wO2I9W107Zm9yKHZhciBoPTA7aDxhLmxlbmd0aDtoKyspe3ZhciBrPWFbaF07aWYoXCJcXG5cIj09PWspZj1cbiAgICAwLGctPWU7ZWxzZXt2YXIgbT1kO3ZhciBsPWYsbj1nO2lmKGs9Yy5nbHlwaHNba118fGMuZ2x5cGhzW1wiP1wiXSl7dmFyIHA9bmV3IG9lO2lmKGsubylmb3IodmFyIHI9ay5fY2FjaGVkT3V0bGluZXx8KGsuX2NhY2hlZE91dGxpbmU9ay5vLnNwbGl0KFwiIFwiKSksdD0wLHY9ci5sZW5ndGg7dDx2Oylzd2l0Y2goclt0KytdKXtjYXNlIFwibVwiOnZhciB3PXJbdCsrXSptK2w7dmFyIHg9clt0KytdKm0rbjtwLm1vdmVUbyh3LHgpO2JyZWFrO2Nhc2UgXCJsXCI6dz1yW3QrK10qbStsO3g9clt0KytdKm0rbjtwLmxpbmVUbyh3LHgpO2JyZWFrO2Nhc2UgXCJxXCI6dmFyIHk9clt0KytdKm0rbDt2YXIgQj1yW3QrK10qbStuO3ZhciBBPXJbdCsrXSptK2w7dmFyIEM9clt0KytdKm0rbjtwLnF1YWRyYXRpY0N1cnZlVG8oQSxDLHksQik7YnJlYWs7Y2FzZSBcImJcIjp5PXJbdCsrXSptK2wsQj1yW3QrK10qbStuLEE9clt0KytdKm0rbCxDPXJbdCsrXSptK24sdz1yW3QrK10qbStsLHg9clt0KytdKm0rbixwLmJlemllckN1cnZlVG8oQSxcbiAgICBDLHcseCx5LEIpfW09e29mZnNldFg6ay5oYSptLHBhdGg6cH19ZWxzZSBtPXZvaWQgMDtmKz1tLm9mZnNldFg7Yi5wdXNoKG0ucGF0aCl9fWM9W107YT0wO2ZvcihkPWIubGVuZ3RoO2E8ZDthKyspQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoYyxiW2FdLnRvU2hhcGVzKCkpO3JldHVybiBjfX0pO09iamVjdC5hc3NpZ24oa2YucHJvdG90eXBlLHtsb2FkOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMsZj1uZXcgTmEodGhpcy5tYW5hZ2VyKTtmLnNldFBhdGgodGhpcy5wYXRoKTtmLmxvYWQoYSxmdW5jdGlvbihhKXt0cnl7dmFyIGM9SlNPTi5wYXJzZShhKX1jYXRjaChrKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Gb250TG9hZGVyOiB0eXBlZmFjZS5qcyBzdXBwb3J0IGlzIGJlaW5nIGRlcHJlY2F0ZWQuIFVzZSB0eXBlZmFjZS5qc29uIGluc3RlYWQuXCIpLGM9SlNPTi5wYXJzZShhLnN1YnN0cmluZyg2NSxhLmxlbmd0aC0yKSl9YT1lLnBhcnNlKGMpO2ImJmIoYSl9LGMsZCl9LFxuICAgIHBhcnNlOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgcGUoYSl9LHNldFBhdGg6ZnVuY3Rpb24oYSl7dGhpcy5wYXRoPWE7cmV0dXJuIHRoaXN9fSk7dmFyIFVkLHNlPXtnZXRDb250ZXh0OmZ1bmN0aW9uKCl7dm9pZCAwPT09VWQmJihVZD1uZXcgKHdpbmRvdy5BdWRpb0NvbnRleHR8fHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQpKTtyZXR1cm4gVWR9LHNldENvbnRleHQ6ZnVuY3Rpb24oYSl7VWQ9YX19O09iamVjdC5hc3NpZ24ocWUucHJvdG90eXBlLHtsb2FkOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPW5ldyBOYSh0aGlzLm1hbmFnZXIpO2Uuc2V0UmVzcG9uc2VUeXBlKFwiYXJyYXlidWZmZXJcIik7ZS5sb2FkKGEsZnVuY3Rpb24oYSl7c2UuZ2V0Q29udGV4dCgpLmRlY29kZUF1ZGlvRGF0YShhLGZ1bmN0aW9uKGEpe2IoYSl9KX0sYyxkKX19KTtPYmplY3QuYXNzaWduKGxmLnByb3RvdHlwZSx7dXBkYXRlOmZ1bmN0aW9uKCl7dmFyIGEsYixjLGQsZSxmLGcsaCxrPW5ldyBPLG09bmV3IE87XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGwpe2lmKGEhPT10aGlzfHxiIT09bC5mb2N1c3x8YyE9PWwuZm92fHxkIT09bC5hc3BlY3QqdGhpcy5hc3BlY3R8fGUhPT1sLm5lYXJ8fGYhPT1sLmZhcnx8ZyE9PWwuem9vbXx8aCE9PXRoaXMuZXllU2VwKXthPXRoaXM7Yj1sLmZvY3VzO2M9bC5mb3Y7ZD1sLmFzcGVjdCp0aGlzLmFzcGVjdDtlPWwubmVhcjtmPWwuZmFyO2c9bC56b29tO3ZhciBuPWwucHJvamVjdGlvbk1hdHJpeC5jbG9uZSgpO2g9dGhpcy5leWVTZXAvMjt2YXIgcD1oKmUvYixxPWUqTWF0aC50YW4oUS5ERUcyUkFEKmMqLjUpL2c7bS5lbGVtZW50c1sxMl09LWg7ay5lbGVtZW50c1sxMl09aDt2YXIgdD0tcSpkK3A7dmFyIHY9cSpkK3A7bi5lbGVtZW50c1swXT0yKmUvKHYtdCk7bi5lbGVtZW50c1s4XT0odit0KS8odi10KTt0aGlzLmNhbWVyYUwucHJvamVjdGlvbk1hdHJpeC5jb3B5KG4pO3Q9LXEqZC1wO3Y9cSpkLXA7bi5lbGVtZW50c1swXT0yKmUvKHYtdCk7bi5lbGVtZW50c1s4XT1cbiAgICAodit0KS8odi10KTt0aGlzLmNhbWVyYVIucHJvamVjdGlvbk1hdHJpeC5jb3B5KG4pfXRoaXMuY2FtZXJhTC5tYXRyaXhXb3JsZC5jb3B5KGwubWF0cml4V29ybGQpLm11bHRpcGx5KG0pO3RoaXMuY2FtZXJhUi5tYXRyaXhXb3JsZC5jb3B5KGwubWF0cml4V29ybGQpLm11bHRpcGx5KGspfX0oKX0pO2ZkLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKTtmZC5wcm90b3R5cGUuY29uc3RydWN0b3I9ZmQ7cmUucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh4LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOnJlLGdldElucHV0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2Fpbn0scmVtb3ZlRmlsdGVyOmZ1bmN0aW9uKCl7bnVsbCE9PXRoaXMuZmlsdGVyJiYodGhpcy5nYWluLmRpc2Nvbm5lY3QodGhpcy5maWx0ZXIpLHRoaXMuZmlsdGVyLmRpc2Nvbm5lY3QodGhpcy5jb250ZXh0LmRlc3RpbmF0aW9uKSx0aGlzLmdhaW4uY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pLFxuICAgIHRoaXMuZmlsdGVyPW51bGwpfSxnZXRGaWx0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWx0ZXJ9LHNldEZpbHRlcjpmdW5jdGlvbihhKXtudWxsIT09dGhpcy5maWx0ZXI/KHRoaXMuZ2Fpbi5kaXNjb25uZWN0KHRoaXMuZmlsdGVyKSx0aGlzLmZpbHRlci5kaXNjb25uZWN0KHRoaXMuY29udGV4dC5kZXN0aW5hdGlvbikpOnRoaXMuZ2Fpbi5kaXNjb25uZWN0KHRoaXMuY29udGV4dC5kZXN0aW5hdGlvbik7dGhpcy5maWx0ZXI9YTt0aGlzLmdhaW4uY29ubmVjdCh0aGlzLmZpbHRlcik7dGhpcy5maWx0ZXIuY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pfSxnZXRNYXN0ZXJWb2x1bWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nYWluLmdhaW4udmFsdWV9LHNldE1hc3RlclZvbHVtZTpmdW5jdGlvbihhKXt0aGlzLmdhaW4uZ2Fpbi52YWx1ZT1hfSx1cGRhdGVNYXRyaXhXb3JsZDpmdW5jdGlvbigpe3ZhciBhPW5ldyBwLGI9bmV3IGhhLGM9bmV3IHAsZD1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oZSl7eC5wcm90b3R5cGUudXBkYXRlTWF0cml4V29ybGQuY2FsbCh0aGlzLFxuICAgIGUpO2U9dGhpcy5jb250ZXh0Lmxpc3RlbmVyO3ZhciBmPXRoaXMudXA7dGhpcy5tYXRyaXhXb3JsZC5kZWNvbXBvc2UoYSxiLGMpO2Quc2V0KDAsMCwtMSkuYXBwbHlRdWF0ZXJuaW9uKGIpO2UucG9zaXRpb25YPyhlLnBvc2l0aW9uWC5zZXRWYWx1ZUF0VGltZShhLngsdGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lKSxlLnBvc2l0aW9uWS5zZXRWYWx1ZUF0VGltZShhLnksdGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lKSxlLnBvc2l0aW9uWi5zZXRWYWx1ZUF0VGltZShhLnosdGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lKSxlLmZvcndhcmRYLnNldFZhbHVlQXRUaW1lKGQueCx0aGlzLmNvbnRleHQuY3VycmVudFRpbWUpLGUuZm9yd2FyZFkuc2V0VmFsdWVBdFRpbWUoZC55LHRoaXMuY29udGV4dC5jdXJyZW50VGltZSksZS5mb3J3YXJkWi5zZXRWYWx1ZUF0VGltZShkLnosdGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lKSxlLnVwWC5zZXRWYWx1ZUF0VGltZShmLngsdGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lKSxcbiAgICBlLnVwWS5zZXRWYWx1ZUF0VGltZShmLnksdGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lKSxlLnVwWi5zZXRWYWx1ZUF0VGltZShmLnosdGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lKSk6KGUuc2V0UG9zaXRpb24oYS54LGEueSxhLnopLGUuc2V0T3JpZW50YXRpb24oZC54LGQueSxkLnosZi54LGYueSxmLnopKX19KCl9KTtsYy5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6bGMsZ2V0T3V0cHV0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2Fpbn0sc2V0Tm9kZVNvdXJjZTpmdW5jdGlvbihhKXt0aGlzLmhhc1BsYXliYWNrQ29udHJvbD0hMTt0aGlzLnNvdXJjZVR5cGU9XCJhdWRpb05vZGVcIjt0aGlzLnNvdXJjZT1hO3RoaXMuY29ubmVjdCgpO3JldHVybiB0aGlzfSxzZXRCdWZmZXI6ZnVuY3Rpb24oYSl7dGhpcy5idWZmZXI9YTt0aGlzLnNvdXJjZVR5cGU9XCJidWZmZXJcIjt0aGlzLmF1dG9wbGF5JiZ0aGlzLnBsYXkoKTtyZXR1cm4gdGhpc30sXG4gICAgcGxheTpmdW5jdGlvbigpe2lmKCEwPT09dGhpcy5pc1BsYXlpbmcpY29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW86IEF1ZGlvIGlzIGFscmVhZHkgcGxheWluZy5cIik7ZWxzZSBpZighMT09PXRoaXMuaGFzUGxheWJhY2tDb250cm9sKWNvbnNvbGUud2FybihcIlRIUkVFLkF1ZGlvOiB0aGlzIEF1ZGlvIGhhcyBubyBwbGF5YmFjayBjb250cm9sLlwiKTtlbHNle3ZhciBhPXRoaXMuY29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTthLmJ1ZmZlcj10aGlzLmJ1ZmZlcjthLmxvb3A9dGhpcy5sb29wO2Eub25lbmRlZD10aGlzLm9uRW5kZWQuYmluZCh0aGlzKTthLnBsYXliYWNrUmF0ZS5zZXRWYWx1ZUF0VGltZSh0aGlzLnBsYXliYWNrUmF0ZSx0aGlzLnN0YXJ0VGltZSk7dGhpcy5zdGFydFRpbWU9dGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lO2Euc3RhcnQodGhpcy5zdGFydFRpbWUsdGhpcy5vZmZzZXQpO3RoaXMuaXNQbGF5aW5nPSEwO3RoaXMuc291cmNlPWE7cmV0dXJuIHRoaXMuY29ubmVjdCgpfX0sXG4gICAgcGF1c2U6ZnVuY3Rpb24oKXtpZighMT09PXRoaXMuaGFzUGxheWJhY2tDb250cm9sKWNvbnNvbGUud2FybihcIlRIUkVFLkF1ZGlvOiB0aGlzIEF1ZGlvIGhhcyBubyBwbGF5YmFjayBjb250cm9sLlwiKTtlbHNlIHJldHVybiEwPT09dGhpcy5pc1BsYXlpbmcmJih0aGlzLnNvdXJjZS5zdG9wKCksdGhpcy5vZmZzZXQrPSh0aGlzLmNvbnRleHQuY3VycmVudFRpbWUtdGhpcy5zdGFydFRpbWUpKnRoaXMucGxheWJhY2tSYXRlLHRoaXMuaXNQbGF5aW5nPSExKSx0aGlzfSxzdG9wOmZ1bmN0aW9uKCl7aWYoITE9PT10aGlzLmhhc1BsYXliYWNrQ29udHJvbCljb25zb2xlLndhcm4oXCJUSFJFRS5BdWRpbzogdGhpcyBBdWRpbyBoYXMgbm8gcGxheWJhY2sgY29udHJvbC5cIik7ZWxzZSByZXR1cm4gdGhpcy5zb3VyY2Uuc3RvcCgpLHRoaXMub2Zmc2V0PTAsdGhpcy5pc1BsYXlpbmc9ITEsdGhpc30sY29ubmVjdDpmdW5jdGlvbigpe2lmKDA8dGhpcy5maWx0ZXJzLmxlbmd0aCl7dGhpcy5zb3VyY2UuY29ubmVjdCh0aGlzLmZpbHRlcnNbMF0pO1xuICAgIGZvcih2YXIgYT0xLGI9dGhpcy5maWx0ZXJzLmxlbmd0aDthPGI7YSsrKXRoaXMuZmlsdGVyc1thLTFdLmNvbm5lY3QodGhpcy5maWx0ZXJzW2FdKTt0aGlzLmZpbHRlcnNbdGhpcy5maWx0ZXJzLmxlbmd0aC0xXS5jb25uZWN0KHRoaXMuZ2V0T3V0cHV0KCkpfWVsc2UgdGhpcy5zb3VyY2UuY29ubmVjdCh0aGlzLmdldE91dHB1dCgpKTtyZXR1cm4gdGhpc30sZGlzY29ubmVjdDpmdW5jdGlvbigpe2lmKDA8dGhpcy5maWx0ZXJzLmxlbmd0aCl7dGhpcy5zb3VyY2UuZGlzY29ubmVjdCh0aGlzLmZpbHRlcnNbMF0pO2Zvcih2YXIgYT0xLGI9dGhpcy5maWx0ZXJzLmxlbmd0aDthPGI7YSsrKXRoaXMuZmlsdGVyc1thLTFdLmRpc2Nvbm5lY3QodGhpcy5maWx0ZXJzW2FdKTt0aGlzLmZpbHRlcnNbdGhpcy5maWx0ZXJzLmxlbmd0aC0xXS5kaXNjb25uZWN0KHRoaXMuZ2V0T3V0cHV0KCkpfWVsc2UgdGhpcy5zb3VyY2UuZGlzY29ubmVjdCh0aGlzLmdldE91dHB1dCgpKTtyZXR1cm4gdGhpc30sXG4gICAgZ2V0RmlsdGVyczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbHRlcnN9LHNldEZpbHRlcnM6ZnVuY3Rpb24oYSl7YXx8KGE9W10pOyEwPT09dGhpcy5pc1BsYXlpbmc/KHRoaXMuZGlzY29ubmVjdCgpLHRoaXMuZmlsdGVycz1hLHRoaXMuY29ubmVjdCgpKTp0aGlzLmZpbHRlcnM9YTtyZXR1cm4gdGhpc30sZ2V0RmlsdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RmlsdGVycygpWzBdfSxzZXRGaWx0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc2V0RmlsdGVycyhhP1thXTpbXSl9LHNldFBsYXliYWNrUmF0ZTpmdW5jdGlvbihhKXtpZighMT09PXRoaXMuaGFzUGxheWJhY2tDb250cm9sKWNvbnNvbGUud2FybihcIlRIUkVFLkF1ZGlvOiB0aGlzIEF1ZGlvIGhhcyBubyBwbGF5YmFjayBjb250cm9sLlwiKTtlbHNlIHJldHVybiB0aGlzLnBsYXliYWNrUmF0ZT1hLCEwPT09dGhpcy5pc1BsYXlpbmcmJnRoaXMuc291cmNlLnBsYXliYWNrUmF0ZS5zZXRWYWx1ZUF0VGltZSh0aGlzLnBsYXliYWNrUmF0ZSxcbiAgICB0aGlzLmNvbnRleHQuY3VycmVudFRpbWUpLHRoaXN9LGdldFBsYXliYWNrUmF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBsYXliYWNrUmF0ZX0sb25FbmRlZDpmdW5jdGlvbigpe3RoaXMuaXNQbGF5aW5nPSExfSxnZXRMb29wOmZ1bmN0aW9uKCl7cmV0dXJuITE9PT10aGlzLmhhc1BsYXliYWNrQ29udHJvbD8oY29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW86IHRoaXMgQXVkaW8gaGFzIG5vIHBsYXliYWNrIGNvbnRyb2wuXCIpLCExKTp0aGlzLmxvb3B9LHNldExvb3A6ZnVuY3Rpb24oYSl7aWYoITE9PT10aGlzLmhhc1BsYXliYWNrQ29udHJvbCljb25zb2xlLndhcm4oXCJUSFJFRS5BdWRpbzogdGhpcyBBdWRpbyBoYXMgbm8gcGxheWJhY2sgY29udHJvbC5cIik7ZWxzZSByZXR1cm4gdGhpcy5sb29wPWEsITA9PT10aGlzLmlzUGxheWluZyYmKHRoaXMuc291cmNlLmxvb3A9dGhpcy5sb29wKSx0aGlzfSxnZXRWb2x1bWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nYWluLmdhaW4udmFsdWV9LFxuICAgIHNldFZvbHVtZTpmdW5jdGlvbihhKXt0aGlzLmdhaW4uZ2Fpbi52YWx1ZT1hO3JldHVybiB0aGlzfX0pO3RlLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUobGMucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6dGUsZ2V0T3V0cHV0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFubmVyfSxnZXRSZWZEaXN0YW5jZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhbm5lci5yZWZEaXN0YW5jZX0sc2V0UmVmRGlzdGFuY2U6ZnVuY3Rpb24oYSl7dGhpcy5wYW5uZXIucmVmRGlzdGFuY2U9YX0sZ2V0Um9sbG9mZkZhY3RvcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhbm5lci5yb2xsb2ZmRmFjdG9yfSxzZXRSb2xsb2ZmRmFjdG9yOmZ1bmN0aW9uKGEpe3RoaXMucGFubmVyLnJvbGxvZmZGYWN0b3I9YX0sZ2V0RGlzdGFuY2VNb2RlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhbm5lci5kaXN0YW5jZU1vZGVsfSxzZXREaXN0YW5jZU1vZGVsOmZ1bmN0aW9uKGEpe3RoaXMucGFubmVyLmRpc3RhbmNlTW9kZWw9XG4gICAgYX0sZ2V0TWF4RGlzdGFuY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYW5uZXIubWF4RGlzdGFuY2V9LHNldE1heERpc3RhbmNlOmZ1bmN0aW9uKGEpe3RoaXMucGFubmVyLm1heERpc3RhbmNlPWF9LHVwZGF0ZU1hdHJpeFdvcmxkOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IHA7cmV0dXJuIGZ1bmN0aW9uKGIpe3gucHJvdG90eXBlLnVwZGF0ZU1hdHJpeFdvcmxkLmNhbGwodGhpcyxiKTthLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLm1hdHJpeFdvcmxkKTt0aGlzLnBhbm5lci5zZXRQb3NpdGlvbihhLngsYS55LGEueil9fSgpfSk7T2JqZWN0LmFzc2lnbih1ZS5wcm90b3R5cGUse2dldEZyZXF1ZW5jeURhdGE6ZnVuY3Rpb24oKXt0aGlzLmFuYWx5c2VyLmdldEJ5dGVGcmVxdWVuY3lEYXRhKHRoaXMuZGF0YSk7cmV0dXJuIHRoaXMuZGF0YX0sZ2V0QXZlcmFnZUZyZXF1ZW5jeTpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9dGhpcy5nZXRGcmVxdWVuY3lEYXRhKCksYz0wO2M8Yi5sZW5ndGg7YysrKWErPVxuICAgIGJbY107cmV0dXJuIGEvYi5sZW5ndGh9fSk7T2JqZWN0LmFzc2lnbih2ZS5wcm90b3R5cGUse2FjY3VtdWxhdGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmJ1ZmZlcixkPXRoaXMudmFsdWVTaXplO2E9YSpkK2Q7dmFyIGU9dGhpcy5jdW11bGF0aXZlV2VpZ2h0O2lmKDA9PT1lKXtmb3IoZT0wO2UhPT1kOysrZSljW2ErZV09Y1tlXTtlPWJ9ZWxzZSBlKz1iLHRoaXMuX21peEJ1ZmZlclJlZ2lvbihjLGEsMCxiL2UsZCk7dGhpcy5jdW11bGF0aXZlV2VpZ2h0PWV9LGFwcGx5OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMudmFsdWVTaXplLGM9dGhpcy5idWZmZXI7YT1hKmIrYjt2YXIgZD10aGlzLmN1bXVsYXRpdmVXZWlnaHQsZT10aGlzLmJpbmRpbmc7dGhpcy5jdW11bGF0aXZlV2VpZ2h0PTA7MT5kJiZ0aGlzLl9taXhCdWZmZXJSZWdpb24oYyxhLDMqYiwxLWQsYik7Zm9yKHZhciBkPWIsZj1iK2I7ZCE9PWY7KytkKWlmKGNbZF0hPT1jW2QrYl0pe2Uuc2V0VmFsdWUoYyxhKTticmVha319LFxuICAgIHNhdmVPcmlnaW5hbFN0YXRlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5idWZmZXIsYj10aGlzLnZhbHVlU2l6ZSxjPTMqYjt0aGlzLmJpbmRpbmcuZ2V0VmFsdWUoYSxjKTtmb3IodmFyIGQ9YjtkIT09YzsrK2QpYVtkXT1hW2MrZCViXTt0aGlzLmN1bXVsYXRpdmVXZWlnaHQ9MH0scmVzdG9yZU9yaWdpbmFsU3RhdGU6ZnVuY3Rpb24oKXt0aGlzLmJpbmRpbmcuc2V0VmFsdWUodGhpcy5idWZmZXIsMyp0aGlzLnZhbHVlU2l6ZSl9LF9zZWxlY3Q6ZnVuY3Rpb24oYSxiLGMsZCxlKXtpZiguNTw9ZClmb3IoZD0wO2QhPT1lOysrZClhW2IrZF09YVtjK2RdfSxfc2xlcnA6ZnVuY3Rpb24oYSxiLGMsZCl7aGEuc2xlcnBGbGF0KGEsYixhLGIsYSxjLGQpfSxfbGVycDpmdW5jdGlvbihhLGIsYyxkLGUpe2Zvcih2YXIgZj0xLWQsZz0wO2chPT1lOysrZyl7dmFyIGg9YitnO2FbaF09YVtoXSpmK2FbYytnXSpkfX19KTtPYmplY3QuYXNzaWduKG1mLnByb3RvdHlwZSx7Z2V0VmFsdWU6ZnVuY3Rpb24oYSxcbiAgICBiKXt0aGlzLmJpbmQoKTt2YXIgYz10aGlzLl9iaW5kaW5nc1t0aGlzLl90YXJnZXRHcm91cC5uQ2FjaGVkT2JqZWN0c19dO3ZvaWQgMCE9PWMmJmMuZ2V0VmFsdWUoYSxiKX0sc2V0VmFsdWU6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5fYmluZGluZ3MsZD10aGlzLl90YXJnZXRHcm91cC5uQ2FjaGVkT2JqZWN0c18sZT1jLmxlbmd0aDtkIT09ZTsrK2QpY1tkXS5zZXRWYWx1ZShhLGIpfSxiaW5kOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuX2JpbmRpbmdzLGI9dGhpcy5fdGFyZ2V0R3JvdXAubkNhY2hlZE9iamVjdHNfLGM9YS5sZW5ndGg7YiE9PWM7KytiKWFbYl0uYmluZCgpfSx1bmJpbmQ6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5fYmluZGluZ3MsYj10aGlzLl90YXJnZXRHcm91cC5uQ2FjaGVkT2JqZWN0c18sYz1hLmxlbmd0aDtiIT09YzsrK2IpYVtiXS51bmJpbmQoKX19KTtPYmplY3QuYXNzaWduKHFhLHtDb21wb3NpdGU6bWYsY3JlYXRlOmZ1bmN0aW9uKGEsXG4gICAgYixjKXtyZXR1cm4gYSYmYS5pc0FuaW1hdGlvbk9iamVjdEdyb3VwP25ldyBxYS5Db21wb3NpdGUoYSxiLGMpOm5ldyBxYShhLGIsYyl9LHNhbml0aXplTm9kZU5hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSgvXFxzL2csXCJfXCIpLnJlcGxhY2UoL1teXFx3LV0vZyxcIlwiKX0scGFyc2VUcmFja05hbWU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgUmVnRXhwKFwiXlwiKy8oKD86W1xcdy1dK1tcXC86XSkqKS8uc291cmNlKy8oW1xcdy1cXC5dKyk/Ly5zb3VyY2UrLyg/OlxcLihbXFx3LV0rKSg/OlxcWyguKylcXF0pPyk/Ly5zb3VyY2UrL1xcLihbXFx3LV0rKSg/OlxcWyguKylcXF0pPy8uc291cmNlK1wiJFwiKSxiPVtcIm1hdGVyaWFsXCIsXCJtYXRlcmlhbHNcIixcImJvbmVzXCJdO3JldHVybiBmdW5jdGlvbihjKXt2YXIgZD1hLmV4ZWMoYyk7aWYoIWQpdGhyb3cgRXJyb3IoXCJQcm9wZXJ0eUJpbmRpbmc6IENhbm5vdCBwYXJzZSB0cmFja05hbWU6IFwiK2MpO3ZhciBkPXtub2RlTmFtZTpkWzJdLG9iamVjdE5hbWU6ZFszXSxcbiAgICBvYmplY3RJbmRleDpkWzRdLHByb3BlcnR5TmFtZTpkWzVdLHByb3BlcnR5SW5kZXg6ZFs2XX0sZT1kLm5vZGVOYW1lJiZkLm5vZGVOYW1lLmxhc3RJbmRleE9mKFwiLlwiKTtpZih2b2lkIDAhPT1lJiYtMSE9PWUpe3ZhciBmPWQubm9kZU5hbWUuc3Vic3RyaW5nKGUrMSk7LTEhPT1iLmluZGV4T2YoZikmJihkLm5vZGVOYW1lPWQubm9kZU5hbWUuc3Vic3RyaW5nKDAsZSksZC5vYmplY3ROYW1lPWYpfWlmKG51bGw9PT1kLnByb3BlcnR5TmFtZXx8MD09PWQucHJvcGVydHlOYW1lLmxlbmd0aCl0aHJvdyBFcnJvcihcIlByb3BlcnR5QmluZGluZzogY2FuIG5vdCBwYXJzZSBwcm9wZXJ0eU5hbWUgZnJvbSB0cmFja05hbWU6IFwiK2MpO3JldHVybiBkfX0oKSxmaW5kTm9kZTpmdW5jdGlvbihhLGIpe2lmKCFifHxcIlwiPT09Ynx8XCJyb290XCI9PT1ifHxcIi5cIj09PWJ8fC0xPT09Ynx8Yj09PWEubmFtZXx8Yj09PWEudXVpZClyZXR1cm4gYTtpZihhLnNrZWxldG9uKXt2YXIgYz1mdW5jdGlvbihhKXtmb3IodmFyIGM9XG4gICAgMDtjPGEuYm9uZXMubGVuZ3RoO2MrKyl7dmFyIGQ9YS5ib25lc1tjXTtpZihkLm5hbWU9PT1iKXJldHVybiBkfXJldHVybiBudWxsfShhLnNrZWxldG9uKTtpZihjKXJldHVybiBjfWlmKGEuY2hpbGRyZW4pe3ZhciBkPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgZT1hW2NdO2lmKGUubmFtZT09PWJ8fGUudXVpZD09PWJ8fChlPWQoZS5jaGlsZHJlbikpKXJldHVybiBlfXJldHVybiBudWxsfTtpZihhPWQoYS5jaGlsZHJlbikpcmV0dXJuIGF9cmV0dXJuIG51bGx9fSk7T2JqZWN0LmFzc2lnbihxYS5wcm90b3R5cGUse19nZXRWYWx1ZV91bmF2YWlsYWJsZTpmdW5jdGlvbigpe30sX3NldFZhbHVlX3VuYXZhaWxhYmxlOmZ1bmN0aW9uKCl7fSxCaW5kaW5nVHlwZTp7RGlyZWN0OjAsRW50aXJlQXJyYXk6MSxBcnJheUVsZW1lbnQ6MixIYXNGcm9tVG9BcnJheTozfSxWZXJzaW9uaW5nOntOb25lOjAsTmVlZHNVcGRhdGU6MSxNYXRyaXhXb3JsZE5lZWRzVXBkYXRlOjJ9LFxuICAgIEdldHRlckJ5QmluZGluZ1R5cGU6W2Z1bmN0aW9uKGEsYil7YVtiXT10aGlzLm5vZGVbdGhpcy5wcm9wZXJ0eU5hbWVdfSxmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz10aGlzLnJlc29sdmVkUHJvcGVydHksZD0wLGU9Yy5sZW5ndGg7ZCE9PWU7KytkKWFbYisrXT1jW2RdfSxmdW5jdGlvbihhLGIpe2FbYl09dGhpcy5yZXNvbHZlZFByb3BlcnR5W3RoaXMucHJvcGVydHlJbmRleF19LGZ1bmN0aW9uKGEsYil7dGhpcy5yZXNvbHZlZFByb3BlcnR5LnRvQXJyYXkoYSxiKX1dLFNldHRlckJ5QmluZGluZ1R5cGVBbmRWZXJzaW9uaW5nOltbZnVuY3Rpb24oYSxiKXt0aGlzLnRhcmdldE9iamVjdFt0aGlzLnByb3BlcnR5TmFtZV09YVtiXX0sZnVuY3Rpb24oYSxiKXt0aGlzLnRhcmdldE9iamVjdFt0aGlzLnByb3BlcnR5TmFtZV09YVtiXTt0aGlzLnRhcmdldE9iamVjdC5uZWVkc1VwZGF0ZT0hMH0sZnVuY3Rpb24oYSxiKXt0aGlzLnRhcmdldE9iamVjdFt0aGlzLnByb3BlcnR5TmFtZV09YVtiXTtcbiAgICB0aGlzLnRhcmdldE9iamVjdC5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSEwfV0sW2Z1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMucmVzb2x2ZWRQcm9wZXJ0eSxkPTAsZT1jLmxlbmd0aDtkIT09ZTsrK2QpY1tkXT1hW2IrK119LGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMucmVzb2x2ZWRQcm9wZXJ0eSxkPTAsZT1jLmxlbmd0aDtkIT09ZTsrK2QpY1tkXT1hW2IrK107dGhpcy50YXJnZXRPYmplY3QubmVlZHNVcGRhdGU9ITB9LGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMucmVzb2x2ZWRQcm9wZXJ0eSxkPTAsZT1jLmxlbmd0aDtkIT09ZTsrK2QpY1tkXT1hW2IrK107dGhpcy50YXJnZXRPYmplY3QubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMH1dLFtmdW5jdGlvbihhLGIpe3RoaXMucmVzb2x2ZWRQcm9wZXJ0eVt0aGlzLnByb3BlcnR5SW5kZXhdPWFbYl19LGZ1bmN0aW9uKGEsYil7dGhpcy5yZXNvbHZlZFByb3BlcnR5W3RoaXMucHJvcGVydHlJbmRleF09YVtiXTtcbiAgICB0aGlzLnRhcmdldE9iamVjdC5uZWVkc1VwZGF0ZT0hMH0sZnVuY3Rpb24oYSxiKXt0aGlzLnJlc29sdmVkUHJvcGVydHlbdGhpcy5wcm9wZXJ0eUluZGV4XT1hW2JdO3RoaXMudGFyZ2V0T2JqZWN0Lm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITB9XSxbZnVuY3Rpb24oYSxiKXt0aGlzLnJlc29sdmVkUHJvcGVydHkuZnJvbUFycmF5KGEsYil9LGZ1bmN0aW9uKGEsYil7dGhpcy5yZXNvbHZlZFByb3BlcnR5LmZyb21BcnJheShhLGIpO3RoaXMudGFyZ2V0T2JqZWN0Lm5lZWRzVXBkYXRlPSEwfSxmdW5jdGlvbihhLGIpe3RoaXMucmVzb2x2ZWRQcm9wZXJ0eS5mcm9tQXJyYXkoYSxiKTt0aGlzLnRhcmdldE9iamVjdC5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSEwfV1dLGdldFZhbHVlOmZ1bmN0aW9uKGEsYil7dGhpcy5iaW5kKCk7dGhpcy5nZXRWYWx1ZShhLGIpfSxzZXRWYWx1ZTpmdW5jdGlvbihhLGIpe3RoaXMuYmluZCgpO3RoaXMuc2V0VmFsdWUoYSxiKX0sYmluZDpmdW5jdGlvbigpe3ZhciBhPVxuICAgIHRoaXMubm9kZSxiPXRoaXMucGFyc2VkUGF0aCxjPWIub2JqZWN0TmFtZSxkPWIucHJvcGVydHlOYW1lLGU9Yi5wcm9wZXJ0eUluZGV4O2F8fCh0aGlzLm5vZGU9YT1xYS5maW5kTm9kZSh0aGlzLnJvb3ROb2RlLGIubm9kZU5hbWUpfHx0aGlzLnJvb3ROb2RlKTt0aGlzLmdldFZhbHVlPXRoaXMuX2dldFZhbHVlX3VuYXZhaWxhYmxlO3RoaXMuc2V0VmFsdWU9dGhpcy5fc2V0VmFsdWVfdW5hdmFpbGFibGU7aWYoYSl7aWYoYyl7dmFyIGY9Yi5vYmplY3RJbmRleDtzd2l0Y2goYyl7Y2FzZSBcIm1hdGVyaWFsc1wiOmlmKCFhLm1hdGVyaWFsKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuUHJvcGVydHlCaW5kaW5nOiBDYW4gbm90IGJpbmQgdG8gbWF0ZXJpYWwgYXMgbm9kZSBkb2VzIG5vdCBoYXZlIGEgbWF0ZXJpYWwuXCIsdGhpcyk7cmV0dXJufWlmKCFhLm1hdGVyaWFsLm1hdGVyaWFscyl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlByb3BlcnR5QmluZGluZzogQ2FuIG5vdCBiaW5kIHRvIG1hdGVyaWFsLm1hdGVyaWFscyBhcyBub2RlLm1hdGVyaWFsIGRvZXMgbm90IGhhdmUgYSBtYXRlcmlhbHMgYXJyYXkuXCIsXG4gICAgdGhpcyk7cmV0dXJufWE9YS5tYXRlcmlhbC5tYXRlcmlhbHM7YnJlYWs7Y2FzZSBcImJvbmVzXCI6aWYoIWEuc2tlbGV0b24pe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5Qcm9wZXJ0eUJpbmRpbmc6IENhbiBub3QgYmluZCB0byBib25lcyBhcyBub2RlIGRvZXMgbm90IGhhdmUgYSBza2VsZXRvbi5cIix0aGlzKTtyZXR1cm59YT1hLnNrZWxldG9uLmJvbmVzO2ZvcihjPTA7YzxhLmxlbmd0aDtjKyspaWYoYVtjXS5uYW1lPT09Zil7Zj1jO2JyZWFrfWJyZWFrO2RlZmF1bHQ6aWYodm9pZCAwPT09YVtjXSl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlByb3BlcnR5QmluZGluZzogQ2FuIG5vdCBiaW5kIHRvIG9iamVjdE5hbWUgb2Ygbm9kZSB1bmRlZmluZWQuXCIsdGhpcyk7cmV0dXJufWE9YVtjXX1pZih2b2lkIDAhPT1mKXtpZih2b2lkIDA9PT1hW2ZdKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuUHJvcGVydHlCaW5kaW5nOiBUcnlpbmcgdG8gYmluZCB0byBvYmplY3RJbmRleCBvZiBvYmplY3ROYW1lLCBidXQgaXMgdW5kZWZpbmVkLlwiLFxuICAgIHRoaXMsYSk7cmV0dXJufWE9YVtmXX19Zj1hW2RdO2lmKHZvaWQgMD09PWYpY29uc29sZS5lcnJvcihcIlRIUkVFLlByb3BlcnR5QmluZGluZzogVHJ5aW5nIHRvIHVwZGF0ZSBwcm9wZXJ0eSBmb3IgdHJhY2s6IFwiK2Iubm9kZU5hbWUrXCIuXCIrZCtcIiBidXQgaXQgd2Fzbid0IGZvdW5kLlwiLGEpO2Vsc2V7Yj10aGlzLlZlcnNpb25pbmcuTm9uZTt2b2lkIDAhPT1hLm5lZWRzVXBkYXRlPyhiPXRoaXMuVmVyc2lvbmluZy5OZWVkc1VwZGF0ZSx0aGlzLnRhcmdldE9iamVjdD1hKTp2b2lkIDAhPT1hLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGUmJihiPXRoaXMuVmVyc2lvbmluZy5NYXRyaXhXb3JsZE5lZWRzVXBkYXRlLHRoaXMudGFyZ2V0T2JqZWN0PWEpO2M9dGhpcy5CaW5kaW5nVHlwZS5EaXJlY3Q7aWYodm9pZCAwIT09ZSl7aWYoXCJtb3JwaFRhcmdldEluZmx1ZW5jZXNcIj09PWQpe2lmKCFhLmdlb21ldHJ5KXtjb25zb2xlLmVycm9yKFwiVEhSRUUuUHJvcGVydHlCaW5kaW5nOiBDYW4gbm90IGJpbmQgdG8gbW9ycGhUYXJnZXRJbmZsdWVuY2VzIGJlY2F1c2Ugbm9kZSBkb2VzIG5vdCBoYXZlIGEgZ2VvbWV0cnkuXCIsXG4gICAgdGhpcyk7cmV0dXJufWlmKGEuZ2VvbWV0cnkuaXNCdWZmZXJHZW9tZXRyeSl7aWYoIWEuZ2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuUHJvcGVydHlCaW5kaW5nOiBDYW4gbm90IGJpbmQgdG8gbW9ycGhUYXJnZXRJbmZsdWVuY2VzIGJlY2F1c2Ugbm9kZSBkb2VzIG5vdCBoYXZlIGEgZ2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzLlwiLHRoaXMpO3JldHVybn1mb3IoYz0wO2M8dGhpcy5ub2RlLmdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbi5sZW5ndGg7YysrKWlmKGEuZ2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uW2NdLm5hbWU9PT1lKXtlPWM7YnJlYWt9fWVsc2V7aWYoIWEuZ2VvbWV0cnkubW9ycGhUYXJnZXRzKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuUHJvcGVydHlCaW5kaW5nOiBDYW4gbm90IGJpbmQgdG8gbW9ycGhUYXJnZXRJbmZsdWVuY2VzIGJlY2F1c2Ugbm9kZSBkb2VzIG5vdCBoYXZlIGEgZ2VvbWV0cnkubW9ycGhUYXJnZXRzLlwiLFxuICAgIHRoaXMpO3JldHVybn1mb3IoYz0wO2M8dGhpcy5ub2RlLmdlb21ldHJ5Lm1vcnBoVGFyZ2V0cy5sZW5ndGg7YysrKWlmKGEuZ2VvbWV0cnkubW9ycGhUYXJnZXRzW2NdLm5hbWU9PT1lKXtlPWM7YnJlYWt9fX1jPXRoaXMuQmluZGluZ1R5cGUuQXJyYXlFbGVtZW50O3RoaXMucmVzb2x2ZWRQcm9wZXJ0eT1mO3RoaXMucHJvcGVydHlJbmRleD1lfWVsc2Ugdm9pZCAwIT09Zi5mcm9tQXJyYXkmJnZvaWQgMCE9PWYudG9BcnJheT8oYz10aGlzLkJpbmRpbmdUeXBlLkhhc0Zyb21Ub0FycmF5LHRoaXMucmVzb2x2ZWRQcm9wZXJ0eT1mKTpBcnJheS5pc0FycmF5KGYpPyhjPXRoaXMuQmluZGluZ1R5cGUuRW50aXJlQXJyYXksdGhpcy5yZXNvbHZlZFByb3BlcnR5PWYpOnRoaXMucHJvcGVydHlOYW1lPWQ7dGhpcy5nZXRWYWx1ZT10aGlzLkdldHRlckJ5QmluZGluZ1R5cGVbY107dGhpcy5zZXRWYWx1ZT10aGlzLlNldHRlckJ5QmluZGluZ1R5cGVBbmRWZXJzaW9uaW5nW2NdW2JdfX1lbHNlIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5Qcm9wZXJ0eUJpbmRpbmc6IFRyeWluZyB0byB1cGRhdGUgbm9kZSBmb3IgdHJhY2s6IFwiK1xuICAgIHRoaXMucGF0aCtcIiBidXQgaXQgd2Fzbid0IGZvdW5kLlwiKX0sdW5iaW5kOmZ1bmN0aW9uKCl7dGhpcy5ub2RlPW51bGw7dGhpcy5nZXRWYWx1ZT10aGlzLl9nZXRWYWx1ZV91bmJvdW5kO3RoaXMuc2V0VmFsdWU9dGhpcy5fc2V0VmFsdWVfdW5ib3VuZH19KTtPYmplY3QuYXNzaWduKHFhLnByb3RvdHlwZSx7X2dldFZhbHVlX3VuYm91bmQ6cWEucHJvdG90eXBlLmdldFZhbHVlLF9zZXRWYWx1ZV91bmJvdW5kOnFhLnByb3RvdHlwZS5zZXRWYWx1ZX0pO09iamVjdC5hc3NpZ24obmYucHJvdG90eXBlLHtpc0FuaW1hdGlvbk9iamVjdEdyb3VwOiEwLGFkZDpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLl9vYmplY3RzLGI9YS5sZW5ndGgsYz10aGlzLm5DYWNoZWRPYmplY3RzXyxkPXRoaXMuX2luZGljZXNCeVVVSUQsZT10aGlzLl9wYXRocyxmPXRoaXMuX3BhcnNlZFBhdGhzLGc9dGhpcy5fYmluZGluZ3MsaD1nLmxlbmd0aCxrPTAsbT1hcmd1bWVudHMubGVuZ3RoO2shPT1tOysrayl7dmFyIGw9XG4gICAgYXJndW1lbnRzW2tdLG49bC51dWlkLHA9ZFtuXTtpZih2b2lkIDA9PT1wKXtwPWIrKztkW25dPXA7YS5wdXNoKGwpO2Zvcih2YXIgbj0wLHI9aDtuIT09cjsrK24pZ1tuXS5wdXNoKG5ldyBxYShsLGVbbl0sZltuXSkpfWVsc2UgaWYocDxjKXt2YXIgdD0tLWMscj1hW3RdO2Rbci51dWlkXT1wO2FbcF09cjtkW25dPXQ7YVt0XT1sO249MDtmb3Iocj1oO24hPT1yOysrbil7dmFyIHY9Z1tuXSx3PXZbcF07dltwXT12W3RdO3ZvaWQgMD09PXcmJih3PW5ldyBxYShsLGVbbl0sZltuXSkpO3ZbdF09d319ZWxzZSB2b2lkIDAhPT1hW3BdJiZjb25zb2xlLmVycm9yKFwiVEhSRUUuQW5pbWF0aW9uT2JqZWN0R3JvdXA6IERpZmZlcmVudCBvYmplY3RzIHdpdGggdGhlIHNhbWUgVVVJRCBkZXRlY3RlZC4gQ2xlYW4gdGhlIGNhY2hlcyBvciByZWNyZWF0ZSB5b3VyIGluZnJhc3RydWN0dXJlIHdoZW4gcmVsb2FkaW5nIHNjZW5lcy5cIil9dGhpcy5uQ2FjaGVkT2JqZWN0c189Y30scmVtb3ZlOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVxuICAgIHRoaXMuX29iamVjdHMsYj10aGlzLm5DYWNoZWRPYmplY3RzXyxjPXRoaXMuX2luZGljZXNCeVVVSUQsZD10aGlzLl9iaW5kaW5ncyxlPWQubGVuZ3RoLGY9MCxnPWFyZ3VtZW50cy5sZW5ndGg7ZiE9PWc7KytmKXt2YXIgaD1hcmd1bWVudHNbZl0saz1oLnV1aWQsbT1jW2tdO2lmKHZvaWQgMCE9PW0mJm0+PWIpe3ZhciBsPWIrKyxuPWFbbF07Y1tuLnV1aWRdPW07YVttXT1uO2Nba109bDthW2xdPWg7aD0wO2ZvcihrPWU7aCE9PWs7KytoKXt2YXIgbj1kW2hdLHA9blttXTtuW21dPW5bbF07bltsXT1wfX19dGhpcy5uQ2FjaGVkT2JqZWN0c189Yn0sdW5jYWNoZTpmdW5jdGlvbigpe2Zvcih2YXIgYSxiLGM9dGhpcy5fb2JqZWN0cyxkPWMubGVuZ3RoLGU9dGhpcy5uQ2FjaGVkT2JqZWN0c18sZj10aGlzLl9pbmRpY2VzQnlVVUlELGc9dGhpcy5fYmluZGluZ3MsaD1nLmxlbmd0aCxrPTAsbT1hcmd1bWVudHMubGVuZ3RoO2shPT1tOysrayl7Yj1hcmd1bWVudHNba10udXVpZDt2YXIgbD1cbiAgICBmW2JdO2lmKHZvaWQgMCE9PWwpaWYoZGVsZXRlIGZbYl0sbDxlKXt2YXIgbj0tLWUscD1jW25dO2I9LS1kO2E9Y1tiXTtmW3AudXVpZF09bDtjW2xdPXA7ZlthLnV1aWRdPW47Y1tuXT1hO2MucG9wKCk7Zm9yKHZhciBwPTAscj1oO3AhPT1yOysrcCl7YT1nW3BdO3ZhciB0PWFbYl07YVtsXT1hW25dO2Fbbl09dDthLnBvcCgpfX1lbHNlIGZvcihiPS0tZCxhPWNbYl0sZlthLnV1aWRdPWwsY1tsXT1hLGMucG9wKCkscD0wLHI9aDtwIT09cjsrK3ApYT1nW3BdLGFbbF09YVtiXSxhLnBvcCgpfXRoaXMubkNhY2hlZE9iamVjdHNfPWV9LHN1YnNjcmliZV86ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLl9iaW5kaW5nc0luZGljZXNCeVBhdGgsZD1jW2FdLGU9dGhpcy5fYmluZGluZ3M7aWYodm9pZCAwIT09ZClyZXR1cm4gZVtkXTt2YXIgZj10aGlzLl9wYXRocyxnPXRoaXMuX3BhcnNlZFBhdGhzLGg9dGhpcy5fb2JqZWN0cyxrPXRoaXMubkNhY2hlZE9iamVjdHNfLG09QXJyYXkoaC5sZW5ndGgpLFxuICAgIGQ9ZS5sZW5ndGg7Y1thXT1kO2YucHVzaChhKTtnLnB1c2goYik7ZS5wdXNoKG0pO2M9aztmb3IoZD1oLmxlbmd0aDtjIT09ZDsrK2MpbVtjXT1uZXcgcWEoaFtjXSxhLGIpO3JldHVybiBtfSx1bnN1YnNjcmliZV86ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fYmluZGluZ3NJbmRpY2VzQnlQYXRoLGM9YlthXTtpZih2b2lkIDAhPT1jKXt2YXIgZD10aGlzLl9wYXRocyxlPXRoaXMuX3BhcnNlZFBhdGhzLGY9dGhpcy5fYmluZGluZ3MsZz1mLmxlbmd0aC0xLGg9ZltnXTtiW2FbZ11dPWM7ZltjXT1oO2YucG9wKCk7ZVtjXT1lW2ddO2UucG9wKCk7ZFtjXT1kW2ddO2QucG9wKCl9fX0pO09iamVjdC5hc3NpZ24ob2YucHJvdG90eXBlLHtwbGF5OmZ1bmN0aW9uKCl7dGhpcy5fbWl4ZXIuX2FjdGl2YXRlQWN0aW9uKHRoaXMpO3JldHVybiB0aGlzfSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5fbWl4ZXIuX2RlYWN0aXZhdGVBY3Rpb24odGhpcyk7cmV0dXJuIHRoaXMucmVzZXQoKX0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLnBhdXNlZD1cbiAgICAhMTt0aGlzLmVuYWJsZWQ9ITA7dGhpcy50aW1lPTA7dGhpcy5fbG9vcENvdW50PS0xO3RoaXMuX3N0YXJ0VGltZT1udWxsO3JldHVybiB0aGlzLnN0b3BGYWRpbmcoKS5zdG9wV2FycGluZygpfSxpc1J1bm5pbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbmFibGVkJiYhdGhpcy5wYXVzZWQmJjAhPT10aGlzLnRpbWVTY2FsZSYmbnVsbD09PXRoaXMuX3N0YXJ0VGltZSYmdGhpcy5fbWl4ZXIuX2lzQWN0aXZlQWN0aW9uKHRoaXMpfSxpc1NjaGVkdWxlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9taXhlci5faXNBY3RpdmVBY3Rpb24odGhpcyl9LHN0YXJ0QXQ6ZnVuY3Rpb24oYSl7dGhpcy5fc3RhcnRUaW1lPWE7cmV0dXJuIHRoaXN9LHNldExvb3A6ZnVuY3Rpb24oYSxiKXt0aGlzLmxvb3A9YTt0aGlzLnJlcGV0aXRpb25zPWI7cmV0dXJuIHRoaXN9LHNldEVmZmVjdGl2ZVdlaWdodDpmdW5jdGlvbihhKXt0aGlzLndlaWdodD1hO3RoaXMuX2VmZmVjdGl2ZVdlaWdodD10aGlzLmVuYWJsZWQ/XG4gICAgYTowO3JldHVybiB0aGlzLnN0b3BGYWRpbmcoKX0sZ2V0RWZmZWN0aXZlV2VpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VmZmVjdGl2ZVdlaWdodH0sZmFkZUluOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9zY2hlZHVsZUZhZGluZyhhLDAsMSl9LGZhZGVPdXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX3NjaGVkdWxlRmFkaW5nKGEsMSwwKX0sY3Jvc3NGYWRlRnJvbTpmdW5jdGlvbihhLGIsYyl7YS5mYWRlT3V0KGIpO3RoaXMuZmFkZUluKGIpO2lmKGMpe2M9dGhpcy5fY2xpcC5kdXJhdGlvbjt2YXIgZD1hLl9jbGlwLmR1cmF0aW9uLGU9Yy9kO2Eud2FycCgxLGQvYyxiKTt0aGlzLndhcnAoZSwxLGIpfXJldHVybiB0aGlzfSxjcm9zc0ZhZGVUbzpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGEuY3Jvc3NGYWRlRnJvbSh0aGlzLGIsYyl9LHN0b3BGYWRpbmc6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl93ZWlnaHRJbnRlcnBvbGFudDtudWxsIT09YSYmKHRoaXMuX3dlaWdodEludGVycG9sYW50PVxuICAgIG51bGwsdGhpcy5fbWl4ZXIuX3Rha2VCYWNrQ29udHJvbEludGVycG9sYW50KGEpKTtyZXR1cm4gdGhpc30sc2V0RWZmZWN0aXZlVGltZVNjYWxlOmZ1bmN0aW9uKGEpe3RoaXMudGltZVNjYWxlPWE7dGhpcy5fZWZmZWN0aXZlVGltZVNjYWxlPXRoaXMucGF1c2VkPzA6YTtyZXR1cm4gdGhpcy5zdG9wV2FycGluZygpfSxnZXRFZmZlY3RpdmVUaW1lU2NhbGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZWZmZWN0aXZlVGltZVNjYWxlfSxzZXREdXJhdGlvbjpmdW5jdGlvbihhKXt0aGlzLnRpbWVTY2FsZT10aGlzLl9jbGlwLmR1cmF0aW9uL2E7cmV0dXJuIHRoaXMuc3RvcFdhcnBpbmcoKX0sc3luY1dpdGg6ZnVuY3Rpb24oYSl7dGhpcy50aW1lPWEudGltZTt0aGlzLnRpbWVTY2FsZT1hLnRpbWVTY2FsZTtyZXR1cm4gdGhpcy5zdG9wV2FycGluZygpfSxoYWx0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLndhcnAodGhpcy5fZWZmZWN0aXZlVGltZVNjYWxlLDAsYSl9LHdhcnA6ZnVuY3Rpb24oYSxcbiAgICBiLGMpe3ZhciBkPXRoaXMuX21peGVyLGU9ZC50aW1lLGY9dGhpcy5fdGltZVNjYWxlSW50ZXJwb2xhbnQsZz10aGlzLnRpbWVTY2FsZTtudWxsPT09ZiYmKHRoaXMuX3RpbWVTY2FsZUludGVycG9sYW50PWY9ZC5fbGVuZENvbnRyb2xJbnRlcnBvbGFudCgpKTtkPWYucGFyYW1ldGVyUG9zaXRpb25zO2Y9Zi5zYW1wbGVWYWx1ZXM7ZFswXT1lO2RbMV09ZStjO2ZbMF09YS9nO2ZbMV09Yi9nO3JldHVybiB0aGlzfSxzdG9wV2FycGluZzpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX3RpbWVTY2FsZUludGVycG9sYW50O251bGwhPT1hJiYodGhpcy5fdGltZVNjYWxlSW50ZXJwb2xhbnQ9bnVsbCx0aGlzLl9taXhlci5fdGFrZUJhY2tDb250cm9sSW50ZXJwb2xhbnQoYSkpO3JldHVybiB0aGlzfSxnZXRNaXhlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9taXhlcn0sZ2V0Q2xpcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jbGlwfSxnZXRSb290OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvY2FsUm9vdHx8XG4gICAgdGhpcy5fbWl4ZXIuX3Jvb3R9LF91cGRhdGU6ZnVuY3Rpb24oYSxiLGMsZCl7aWYodGhpcy5lbmFibGVkKXt2YXIgZT10aGlzLl9zdGFydFRpbWU7aWYobnVsbCE9PWUpe2I9KGEtZSkqYztpZigwPmJ8fDA9PT1jKXJldHVybjt0aGlzLl9zdGFydFRpbWU9bnVsbDtiKj1jfWIqPXRoaXMuX3VwZGF0ZVRpbWVTY2FsZShhKTtjPXRoaXMuX3VwZGF0ZVRpbWUoYik7YT10aGlzLl91cGRhdGVXZWlnaHQoYSk7aWYoMDxhKXtiPXRoaXMuX2ludGVycG9sYW50cztmb3IodmFyIGU9dGhpcy5fcHJvcGVydHlCaW5kaW5ncyxmPTAsZz1iLmxlbmd0aDtmIT09ZzsrK2YpYltmXS5ldmFsdWF0ZShjKSxlW2ZdLmFjY3VtdWxhdGUoZCxhKX19ZWxzZSB0aGlzLl91cGRhdGVXZWlnaHQoYSl9LF91cGRhdGVXZWlnaHQ6ZnVuY3Rpb24oYSl7dmFyIGI9MDtpZih0aGlzLmVuYWJsZWQpe3ZhciBiPXRoaXMud2VpZ2h0LGM9dGhpcy5fd2VpZ2h0SW50ZXJwb2xhbnQ7aWYobnVsbCE9PWMpe3ZhciBkPWMuZXZhbHVhdGUoYSlbMF0sXG4gICAgYj1iKmQ7YT5jLnBhcmFtZXRlclBvc2l0aW9uc1sxXSYmKHRoaXMuc3RvcEZhZGluZygpLDA9PT1kJiYodGhpcy5lbmFibGVkPSExKSl9fXJldHVybiB0aGlzLl9lZmZlY3RpdmVXZWlnaHQ9Yn0sX3VwZGF0ZVRpbWVTY2FsZTpmdW5jdGlvbihhKXt2YXIgYj0wO2lmKCF0aGlzLnBhdXNlZCl7dmFyIGI9dGhpcy50aW1lU2NhbGUsYz10aGlzLl90aW1lU2NhbGVJbnRlcnBvbGFudDtpZihudWxsIT09Yyl7dmFyIGQ9Yy5ldmFsdWF0ZShhKVswXSxiPWIqZDthPmMucGFyYW1ldGVyUG9zaXRpb25zWzFdJiYodGhpcy5zdG9wV2FycGluZygpLDA9PT1iP3RoaXMucGF1c2VkPSEwOnRoaXMudGltZVNjYWxlPWIpfX1yZXR1cm4gdGhpcy5fZWZmZWN0aXZlVGltZVNjYWxlPWJ9LF91cGRhdGVUaW1lOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMudGltZSthO2lmKDA9PT1hKXJldHVybiBiO3ZhciBjPXRoaXMuX2NsaXAuZHVyYXRpb24sZD10aGlzLmxvb3AsZT10aGlzLl9sb29wQ291bnQ7aWYoMjIwMD09PVxuICAgIGQpYTp7aWYoLTE9PT1lJiYodGhpcy5fbG9vcENvdW50PTAsdGhpcy5fc2V0RW5kaW5ncyghMCwhMCwhMSkpLGI+PWMpYj1jO2Vsc2UgaWYoMD5iKWI9MDtlbHNlIGJyZWFrIGE7dGhpcy5jbGFtcFdoZW5GaW5pc2hlZD90aGlzLnBhdXNlZD0hMDp0aGlzLmVuYWJsZWQ9ITE7dGhpcy5fbWl4ZXIuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImZpbmlzaGVkXCIsYWN0aW9uOnRoaXMsZGlyZWN0aW9uOjA+YT8tMToxfSl9ZWxzZXtkPTIyMDI9PT1kOy0xPT09ZSYmKDA8PWE/KGU9MCx0aGlzLl9zZXRFbmRpbmdzKCEwLDA9PT10aGlzLnJlcGV0aXRpb25zLGQpKTp0aGlzLl9zZXRFbmRpbmdzKDA9PT10aGlzLnJlcGV0aXRpb25zLCEwLGQpKTtpZihiPj1jfHwwPmIpe3ZhciBmPU1hdGguZmxvb3IoYi9jKSxiPWItYypmLGU9ZStNYXRoLmFicyhmKSxnPXRoaXMucmVwZXRpdGlvbnMtZTswPmc/KHRoaXMuY2xhbXBXaGVuRmluaXNoZWQ/dGhpcy5wYXVzZWQ9ITA6dGhpcy5lbmFibGVkPSExLGI9MDxhP1xuICAgIGM6MCx0aGlzLl9taXhlci5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZmluaXNoZWRcIixhY3Rpb246dGhpcyxkaXJlY3Rpb246MDxhPzE6LTF9KSk6KDA9PT1nPyhhPTA+YSx0aGlzLl9zZXRFbmRpbmdzKGEsIWEsZCkpOnRoaXMuX3NldEVuZGluZ3MoITEsITEsZCksdGhpcy5fbG9vcENvdW50PWUsdGhpcy5fbWl4ZXIuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImxvb3BcIixhY3Rpb246dGhpcyxsb29wRGVsdGE6Zn0pKX1pZihkJiYxPT09KGUmMSkpcmV0dXJuIHRoaXMudGltZT1iLGMtYn1yZXR1cm4gdGhpcy50aW1lPWJ9LF9zZXRFbmRpbmdzOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLl9pbnRlcnBvbGFudFNldHRpbmdzO2M/KGQuZW5kaW5nU3RhcnQ9MjQwMSxkLmVuZGluZ0VuZD0yNDAxKTooZC5lbmRpbmdTdGFydD1hP3RoaXMuemVyb1Nsb3BlQXRTdGFydD8yNDAxOjI0MDA6MjQwMixkLmVuZGluZ0VuZD1iP3RoaXMuemVyb1Nsb3BlQXRFbmQ/MjQwMToyNDAwOjI0MDIpfSxfc2NoZWR1bGVGYWRpbmc6ZnVuY3Rpb24oYSxcbiAgICBiLGMpe3ZhciBkPXRoaXMuX21peGVyLGU9ZC50aW1lLGY9dGhpcy5fd2VpZ2h0SW50ZXJwb2xhbnQ7bnVsbD09PWYmJih0aGlzLl93ZWlnaHRJbnRlcnBvbGFudD1mPWQuX2xlbmRDb250cm9sSW50ZXJwb2xhbnQoKSk7ZD1mLnBhcmFtZXRlclBvc2l0aW9ucztmPWYuc2FtcGxlVmFsdWVzO2RbMF09ZTtmWzBdPWI7ZFsxXT1lK2E7ZlsxXT1jO3JldHVybiB0aGlzfX0pO3dlLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoemEucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6d2UsX2JpbmRBY3Rpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLl9sb2NhbFJvb3R8fHRoaXMuX3Jvb3QsZD1hLl9jbGlwLnRyYWNrcyxlPWQubGVuZ3RoLGY9YS5fcHJvcGVydHlCaW5kaW5nczthPWEuX2ludGVycG9sYW50czt2YXIgZz1jLnV1aWQsaD10aGlzLl9iaW5kaW5nc0J5Um9vdEFuZE5hbWUsaz1oW2ddO3ZvaWQgMD09PWsmJihrPXt9LGhbZ109ayk7Zm9yKGg9MDtoIT09ZTsrK2gpe3ZhciBtPVxuICAgIGRbaF0sbD1tLm5hbWUsbj1rW2xdO2lmKHZvaWQgMD09PW4pe249ZltoXTtpZih2b2lkIDAhPT1uKXtudWxsPT09bi5fY2FjaGVJbmRleCYmKCsrbi5yZWZlcmVuY2VDb3VudCx0aGlzLl9hZGRJbmFjdGl2ZUJpbmRpbmcobixnLGwpKTtjb250aW51ZX1uPW5ldyB2ZShxYS5jcmVhdGUoYyxsLGImJmIuX3Byb3BlcnR5QmluZGluZ3NbaF0uYmluZGluZy5wYXJzZWRQYXRoKSxtLlZhbHVlVHlwZU5hbWUsbS5nZXRWYWx1ZVNpemUoKSk7KytuLnJlZmVyZW5jZUNvdW50O3RoaXMuX2FkZEluYWN0aXZlQmluZGluZyhuLGcsbCl9ZltoXT1uO2FbaF0ucmVzdWx0QnVmZmVyPW4uYnVmZmVyfX0sX2FjdGl2YXRlQWN0aW9uOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLl9pc0FjdGl2ZUFjdGlvbihhKSl7aWYobnVsbD09PWEuX2NhY2hlSW5kZXgpe3ZhciBiPShhLl9sb2NhbFJvb3R8fHRoaXMuX3Jvb3QpLnV1aWQsYz1hLl9jbGlwLnV1aWQsZD10aGlzLl9hY3Rpb25zQnlDbGlwW2NdO3RoaXMuX2JpbmRBY3Rpb24oYSxcbiAgICBkJiZkLmtub3duQWN0aW9uc1swXSk7dGhpcy5fYWRkSW5hY3RpdmVBY3Rpb24oYSxjLGIpfWI9YS5fcHJvcGVydHlCaW5kaW5ncztjPTA7Zm9yKGQ9Yi5sZW5ndGg7YyE9PWQ7KytjKXt2YXIgZT1iW2NdOzA9PT1lLnVzZUNvdW50KysmJih0aGlzLl9sZW5kQmluZGluZyhlKSxlLnNhdmVPcmlnaW5hbFN0YXRlKCkpfXRoaXMuX2xlbmRBY3Rpb24oYSl9fSxfZGVhY3RpdmF0ZUFjdGlvbjpmdW5jdGlvbihhKXtpZih0aGlzLl9pc0FjdGl2ZUFjdGlvbihhKSl7Zm9yKHZhciBiPWEuX3Byb3BlcnR5QmluZGluZ3MsYz0wLGQ9Yi5sZW5ndGg7YyE9PWQ7KytjKXt2YXIgZT1iW2NdOzA9PT0tLWUudXNlQ291bnQmJihlLnJlc3RvcmVPcmlnaW5hbFN0YXRlKCksdGhpcy5fdGFrZUJhY2tCaW5kaW5nKGUpKX10aGlzLl90YWtlQmFja0FjdGlvbihhKX19LF9pbml0TWVtb3J5TWFuYWdlcjpmdW5jdGlvbigpe3RoaXMuX2FjdGlvbnM9W107dGhpcy5fbkFjdGl2ZUFjdGlvbnM9MDt0aGlzLl9hY3Rpb25zQnlDbGlwPVxuICAgIHt9O3RoaXMuX2JpbmRpbmdzPVtdO3RoaXMuX25BY3RpdmVCaW5kaW5ncz0wO3RoaXMuX2JpbmRpbmdzQnlSb290QW5kTmFtZT17fTt0aGlzLl9jb250cm9sSW50ZXJwb2xhbnRzPVtdO3RoaXMuX25BY3RpdmVDb250cm9sSW50ZXJwb2xhbnRzPTA7dmFyIGE9dGhpczt0aGlzLnN0YXRzPXthY3Rpb25zOntnZXQgdG90YWwoKXtyZXR1cm4gYS5fYWN0aW9ucy5sZW5ndGh9LGdldCBpblVzZSgpe3JldHVybiBhLl9uQWN0aXZlQWN0aW9uc319LGJpbmRpbmdzOntnZXQgdG90YWwoKXtyZXR1cm4gYS5fYmluZGluZ3MubGVuZ3RofSxnZXQgaW5Vc2UoKXtyZXR1cm4gYS5fbkFjdGl2ZUJpbmRpbmdzfX0sY29udHJvbEludGVycG9sYW50czp7Z2V0IHRvdGFsKCl7cmV0dXJuIGEuX2NvbnRyb2xJbnRlcnBvbGFudHMubGVuZ3RofSxnZXQgaW5Vc2UoKXtyZXR1cm4gYS5fbkFjdGl2ZUNvbnRyb2xJbnRlcnBvbGFudHN9fX19LF9pc0FjdGl2ZUFjdGlvbjpmdW5jdGlvbihhKXthPWEuX2NhY2hlSW5kZXg7XG4gICAgcmV0dXJuIG51bGwhPT1hJiZhPHRoaXMuX25BY3RpdmVBY3Rpb25zfSxfYWRkSW5hY3RpdmVBY3Rpb246ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuX2FjdGlvbnMsZT10aGlzLl9hY3Rpb25zQnlDbGlwLGY9ZVtiXTt2b2lkIDA9PT1mPyhmPXtrbm93bkFjdGlvbnM6W2FdLGFjdGlvbkJ5Um9vdDp7fX0sYS5fYnlDbGlwQ2FjaGVJbmRleD0wLGVbYl09Zik6KGI9Zi5rbm93bkFjdGlvbnMsYS5fYnlDbGlwQ2FjaGVJbmRleD1iLmxlbmd0aCxiLnB1c2goYSkpO2EuX2NhY2hlSW5kZXg9ZC5sZW5ndGg7ZC5wdXNoKGEpO2YuYWN0aW9uQnlSb290W2NdPWF9LF9yZW1vdmVJbmFjdGl2ZUFjdGlvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl9hY3Rpb25zLGM9YltiLmxlbmd0aC0xXSxkPWEuX2NhY2hlSW5kZXg7Yy5fY2FjaGVJbmRleD1kO2JbZF09YztiLnBvcCgpO2EuX2NhY2hlSW5kZXg9bnVsbDt2YXIgYj1hLl9jbGlwLnV1aWQsYz10aGlzLl9hY3Rpb25zQnlDbGlwLGQ9Y1tiXSxlPVxuICAgIGQua25vd25BY3Rpb25zLGY9ZVtlLmxlbmd0aC0xXSxnPWEuX2J5Q2xpcENhY2hlSW5kZXg7Zi5fYnlDbGlwQ2FjaGVJbmRleD1nO2VbZ109ZjtlLnBvcCgpO2EuX2J5Q2xpcENhY2hlSW5kZXg9bnVsbDtkZWxldGUgZC5hY3Rpb25CeVJvb3RbKGEuX2xvY2FsUm9vdHx8dGhpcy5fcm9vdCkudXVpZF07MD09PWUubGVuZ3RoJiZkZWxldGUgY1tiXTt0aGlzLl9yZW1vdmVJbmFjdGl2ZUJpbmRpbmdzRm9yQWN0aW9uKGEpfSxfcmVtb3ZlSW5hY3RpdmVCaW5kaW5nc0ZvckFjdGlvbjpmdW5jdGlvbihhKXthPWEuX3Byb3BlcnR5QmluZGluZ3M7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtiIT09YzsrK2Ipe3ZhciBkPWFbYl07MD09PS0tZC5yZWZlcmVuY2VDb3VudCYmdGhpcy5fcmVtb3ZlSW5hY3RpdmVCaW5kaW5nKGQpfX0sX2xlbmRBY3Rpb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fYWN0aW9ucyxjPWEuX2NhY2hlSW5kZXgsZD10aGlzLl9uQWN0aXZlQWN0aW9ucysrLGU9YltkXTthLl9jYWNoZUluZGV4PVxuICAgIGQ7YltkXT1hO2UuX2NhY2hlSW5kZXg9YztiW2NdPWV9LF90YWtlQmFja0FjdGlvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl9hY3Rpb25zLGM9YS5fY2FjaGVJbmRleCxkPS0tdGhpcy5fbkFjdGl2ZUFjdGlvbnMsZT1iW2RdO2EuX2NhY2hlSW5kZXg9ZDtiW2RdPWE7ZS5fY2FjaGVJbmRleD1jO2JbY109ZX0sX2FkZEluYWN0aXZlQmluZGluZzpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5fYmluZGluZ3NCeVJvb3RBbmROYW1lLGU9ZFtiXSxmPXRoaXMuX2JpbmRpbmdzO3ZvaWQgMD09PWUmJihlPXt9LGRbYl09ZSk7ZVtjXT1hO2EuX2NhY2hlSW5kZXg9Zi5sZW5ndGg7Zi5wdXNoKGEpfSxfcmVtb3ZlSW5hY3RpdmVCaW5kaW5nOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX2JpbmRpbmdzLGM9YS5iaW5kaW5nLGQ9Yy5yb290Tm9kZS51dWlkLGM9Yy5wYXRoLGU9dGhpcy5fYmluZGluZ3NCeVJvb3RBbmROYW1lLGY9ZVtkXSxnPWJbYi5sZW5ndGgtMV07YT1hLl9jYWNoZUluZGV4O1xuICAgIGcuX2NhY2hlSW5kZXg9YTtiW2FdPWc7Yi5wb3AoKTtkZWxldGUgZltjXTthOntmb3IodmFyIGggaW4gZilicmVhayBhO2RlbGV0ZSBlW2RdfX0sX2xlbmRCaW5kaW5nOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX2JpbmRpbmdzLGM9YS5fY2FjaGVJbmRleCxkPXRoaXMuX25BY3RpdmVCaW5kaW5ncysrLGU9YltkXTthLl9jYWNoZUluZGV4PWQ7YltkXT1hO2UuX2NhY2hlSW5kZXg9YztiW2NdPWV9LF90YWtlQmFja0JpbmRpbmc6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fYmluZGluZ3MsYz1hLl9jYWNoZUluZGV4LGQ9LS10aGlzLl9uQWN0aXZlQmluZGluZ3MsZT1iW2RdO2EuX2NhY2hlSW5kZXg9ZDtiW2RdPWE7ZS5fY2FjaGVJbmRleD1jO2JbY109ZX0sX2xlbmRDb250cm9sSW50ZXJwb2xhbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl9jb250cm9sSW50ZXJwb2xhbnRzLGI9dGhpcy5fbkFjdGl2ZUNvbnRyb2xJbnRlcnBvbGFudHMrKyxjPWFbYl07dm9pZCAwPT09YyYmKGM9bmV3IGVkKG5ldyBGbG9hdDMyQXJyYXkoMiksXG4gICAgbmV3IEZsb2F0MzJBcnJheSgyKSwxLHRoaXMuX2NvbnRyb2xJbnRlcnBvbGFudHNSZXN1bHRCdWZmZXIpLGMuX19jYWNoZUluZGV4PWIsYVtiXT1jKTtyZXR1cm4gY30sX3Rha2VCYWNrQ29udHJvbEludGVycG9sYW50OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX2NvbnRyb2xJbnRlcnBvbGFudHMsYz1hLl9fY2FjaGVJbmRleCxkPS0tdGhpcy5fbkFjdGl2ZUNvbnRyb2xJbnRlcnBvbGFudHMsZT1iW2RdO2EuX19jYWNoZUluZGV4PWQ7YltkXT1hO2UuX19jYWNoZUluZGV4PWM7YltjXT1lfSxfY29udHJvbEludGVycG9sYW50c1Jlc3VsdEJ1ZmZlcjpuZXcgRmxvYXQzMkFycmF5KDEpLGNsaXBBY3Rpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHx0aGlzLl9yb290LGQ9Yy51dWlkLGM9XCJzdHJpbmdcIj09PXR5cGVvZiBhP0NhLmZpbmRCeU5hbWUoYyxhKTphO2E9bnVsbCE9PWM/Yy51dWlkOmE7dmFyIGU9dGhpcy5fYWN0aW9uc0J5Q2xpcFthXSxmPW51bGw7aWYodm9pZCAwIT09ZSl7Zj1cbiAgICBlLmFjdGlvbkJ5Um9vdFtkXTtpZih2b2lkIDAhPT1mKXJldHVybiBmO2Y9ZS5rbm93bkFjdGlvbnNbMF07bnVsbD09PWMmJihjPWYuX2NsaXApfWlmKG51bGw9PT1jKXJldHVybiBudWxsO2I9bmV3IG9mKHRoaXMsYyxiKTt0aGlzLl9iaW5kQWN0aW9uKGIsZik7dGhpcy5fYWRkSW5hY3RpdmVBY3Rpb24oYixhLGQpO3JldHVybiBifSxleGlzdGluZ0FjdGlvbjpmdW5jdGlvbihhLGIpe3ZhciBjPWJ8fHRoaXMuX3Jvb3Q7Yj1jLnV1aWQ7Yz1cInN0cmluZ1wiPT09dHlwZW9mIGE/Q2EuZmluZEJ5TmFtZShjLGEpOmE7YT10aGlzLl9hY3Rpb25zQnlDbGlwW2M/Yy51dWlkOmFdO3JldHVybiB2b2lkIDAhPT1hP2EuYWN0aW9uQnlSb290W2JdfHxudWxsOm51bGx9LHN0b3BBbGxBY3Rpb246ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5fYWN0aW9ucyxiPXRoaXMuX25BY3RpdmVBY3Rpb25zLGM9dGhpcy5fYmluZGluZ3MsZD10aGlzLl9uQWN0aXZlQmluZGluZ3MsZT10aGlzLl9uQWN0aXZlQmluZGluZ3M9XG4gICAgdGhpcy5fbkFjdGl2ZUFjdGlvbnM9MDtlIT09YjsrK2UpYVtlXS5yZXNldCgpO2ZvcihlPTA7ZSE9PWQ7KytlKWNbZV0udXNlQ291bnQ9MDtyZXR1cm4gdGhpc30sdXBkYXRlOmZ1bmN0aW9uKGEpe2EqPXRoaXMudGltZVNjYWxlO2Zvcih2YXIgYj10aGlzLl9hY3Rpb25zLGM9dGhpcy5fbkFjdGl2ZUFjdGlvbnMsZD10aGlzLnRpbWUrPWEsZT1NYXRoLnNpZ24oYSksZj10aGlzLl9hY2N1SW5kZXhePTEsZz0wO2chPT1jOysrZyliW2ddLl91cGRhdGUoZCxhLGUsZik7YT10aGlzLl9iaW5kaW5ncztiPXRoaXMuX25BY3RpdmVCaW5kaW5ncztmb3IoZz0wO2chPT1iOysrZylhW2ddLmFwcGx5KGYpO3JldHVybiB0aGlzfSxnZXRSb290OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Jvb3R9LHVuY2FjaGVDbGlwOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX2FjdGlvbnM7YT1hLnV1aWQ7dmFyIGM9dGhpcy5fYWN0aW9uc0J5Q2xpcCxkPWNbYV07aWYodm9pZCAwIT09ZCl7Zm9yKHZhciBkPWQua25vd25BY3Rpb25zLFxuICAgIGU9MCxmPWQubGVuZ3RoO2UhPT1mOysrZSl7dmFyIGc9ZFtlXTt0aGlzLl9kZWFjdGl2YXRlQWN0aW9uKGcpO3ZhciBoPWcuX2NhY2hlSW5kZXgsaz1iW2IubGVuZ3RoLTFdO2cuX2NhY2hlSW5kZXg9bnVsbDtnLl9ieUNsaXBDYWNoZUluZGV4PW51bGw7ay5fY2FjaGVJbmRleD1oO2JbaF09aztiLnBvcCgpO3RoaXMuX3JlbW92ZUluYWN0aXZlQmluZGluZ3NGb3JBY3Rpb24oZyl9ZGVsZXRlIGNbYV19fSx1bmNhY2hlUm9vdDpmdW5jdGlvbihhKXthPWEudXVpZDt2YXIgYj10aGlzLl9hY3Rpb25zQnlDbGlwO2ZvcihkIGluIGIpe3ZhciBjPWJbZF0uYWN0aW9uQnlSb290W2FdO3ZvaWQgMCE9PWMmJih0aGlzLl9kZWFjdGl2YXRlQWN0aW9uKGMpLHRoaXMuX3JlbW92ZUluYWN0aXZlQWN0aW9uKGMpKX12YXIgZD10aGlzLl9iaW5kaW5nc0J5Um9vdEFuZE5hbWVbYV07aWYodm9pZCAwIT09ZClmb3IodmFyIGUgaW4gZClhPWRbZV0sYS5yZXN0b3JlT3JpZ2luYWxTdGF0ZSgpLHRoaXMuX3JlbW92ZUluYWN0aXZlQmluZGluZyhhKX0sXG4gICAgdW5jYWNoZUFjdGlvbjpmdW5jdGlvbihhLGIpe2E9dGhpcy5leGlzdGluZ0FjdGlvbihhLGIpO251bGwhPT1hJiYodGhpcy5fZGVhY3RpdmF0ZUFjdGlvbihhKSx0aGlzLl9yZW1vdmVJbmFjdGl2ZUFjdGlvbihhKSl9fSk7UWQucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBRZCh2b2lkIDA9PT10aGlzLnZhbHVlLmNsb25lP3RoaXMudmFsdWU6dGhpcy52YWx1ZS5jbG9uZSgpKX07eGUucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShFLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOnhlLGlzSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnk6ITAsY29weTpmdW5jdGlvbihhKXtFLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLm1heEluc3RhbmNlZENvdW50PWEubWF4SW5zdGFuY2VkQ291bnQ7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHllLnByb3RvdHlwZSxcbiAgICB7Y291bnQ6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGEuY291bnR9fSxhcnJheTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YS5hcnJheX19fSk7T2JqZWN0LmFzc2lnbih5ZS5wcm90b3R5cGUse2lzSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGU6ITAsc2V0WDpmdW5jdGlvbihhLGIpe3RoaXMuZGF0YS5hcnJheVthKnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXRdPWI7cmV0dXJuIHRoaXN9LHNldFk6ZnVuY3Rpb24oYSxiKXt0aGlzLmRhdGEuYXJyYXlbYSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0KzFdPWI7cmV0dXJuIHRoaXN9LHNldFo6ZnVuY3Rpb24oYSxiKXt0aGlzLmRhdGEuYXJyYXlbYSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0KzJdPWI7cmV0dXJuIHRoaXN9LHNldFc6ZnVuY3Rpb24oYSxiKXt0aGlzLmRhdGEuYXJyYXlbYSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0KzNdPWI7cmV0dXJuIHRoaXN9LGdldFg6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZGF0YS5hcnJheVthKlxuICAgIHRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXRdfSxnZXRZOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRhdGEuYXJyYXlbYSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0KzFdfSxnZXRaOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRhdGEuYXJyYXlbYSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0KzJdfSxnZXRXOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRhdGEuYXJyYXlbYSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0KzNdfSxzZXRYWTpmdW5jdGlvbihhLGIsYyl7YT1hKnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQ7dGhpcy5kYXRhLmFycmF5W2ErMF09Yjt0aGlzLmRhdGEuYXJyYXlbYSsxXT1jO3JldHVybiB0aGlzfSxzZXRYWVo6ZnVuY3Rpb24oYSxiLGMsZCl7YT1hKnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQ7dGhpcy5kYXRhLmFycmF5W2ErMF09Yjt0aGlzLmRhdGEuYXJyYXlbYSsxXT1jO3RoaXMuZGF0YS5hcnJheVthKzJdPWQ7cmV0dXJuIHRoaXN9LFxuICAgIHNldFhZWlc6ZnVuY3Rpb24oYSxiLGMsZCxlKXthPWEqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldDt0aGlzLmRhdGEuYXJyYXlbYSswXT1iO3RoaXMuZGF0YS5hcnJheVthKzFdPWM7dGhpcy5kYXRhLmFycmF5W2ErMl09ZDt0aGlzLmRhdGEuYXJyYXlbYSszXT1lO3JldHVybiB0aGlzfX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShtYy5wcm90b3R5cGUsXCJuZWVkc1VwZGF0ZVwiLHtzZXQ6ZnVuY3Rpb24oYSl7ITA9PT1hJiZ0aGlzLnZlcnNpb24rK319KTtPYmplY3QuYXNzaWduKG1jLnByb3RvdHlwZSx7aXNJbnRlcmxlYXZlZEJ1ZmZlcjohMCxzZXRBcnJheTpmdW5jdGlvbihhKXtpZihBcnJheS5pc0FycmF5KGEpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJUSFJFRS5CdWZmZXJBdHRyaWJ1dGU6IGFycmF5IHNob3VsZCBiZSBhIFR5cGVkIEFycmF5LlwiKTt0aGlzLmNvdW50PXZvaWQgMCE9PWE/YS5sZW5ndGgvdGhpcy5zdHJpZGU6MDt0aGlzLmFycmF5PWF9LHNldER5bmFtaWM6ZnVuY3Rpb24oYSl7dGhpcy5keW5hbWljPVxuICAgIGE7cmV0dXJuIHRoaXN9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5hcnJheT1uZXcgYS5hcnJheS5jb25zdHJ1Y3RvcihhLmFycmF5KTt0aGlzLmNvdW50PWEuY291bnQ7dGhpcy5zdHJpZGU9YS5zdHJpZGU7dGhpcy5keW5hbWljPWEuZHluYW1pYztyZXR1cm4gdGhpc30sY29weUF0OmZ1bmN0aW9uKGEsYixjKXthKj10aGlzLnN0cmlkZTtjKj1iLnN0cmlkZTtmb3IodmFyIGQ9MCxlPXRoaXMuc3RyaWRlO2Q8ZTtkKyspdGhpcy5hcnJheVthK2RdPWIuYXJyYXlbYytkXTtyZXR1cm4gdGhpc30sc2V0OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9MCk7dGhpcy5hcnJheS5zZXQoYSxiKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LG9uVXBsb2FkOmZ1bmN0aW9uKGEpe3RoaXMub25VcGxvYWRDYWxsYmFjaz1hO3JldHVybiB0aGlzfX0pO3plLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUobWMucHJvdG90eXBlKSxcbiAgICB7Y29uc3RydWN0b3I6emUsaXNJbnN0YW5jZWRJbnRlcmxlYXZlZEJ1ZmZlcjohMCxjb3B5OmZ1bmN0aW9uKGEpe21jLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLm1lc2hQZXJBdHRyaWJ1dGU9YS5tZXNoUGVyQXR0cmlidXRlO3JldHVybiB0aGlzfX0pO0FlLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoTS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpBZSxpc0luc3RhbmNlZEJ1ZmZlckF0dHJpYnV0ZTohMCxjb3B5OmZ1bmN0aW9uKGEpe00ucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMubWVzaFBlckF0dHJpYnV0ZT1hLm1lc2hQZXJBdHRyaWJ1dGU7cmV0dXJuIHRoaXN9fSk7T2JqZWN0LmFzc2lnbihwZi5wcm90b3R5cGUse2xpbmVQcmVjaXNpb246MSxzZXQ6ZnVuY3Rpb24oYSxiKXt0aGlzLnJheS5zZXQoYSxiKX0sc2V0RnJvbUNhbWVyYTpmdW5jdGlvbihhLGIpe2ImJmIuaXNQZXJzcGVjdGl2ZUNhbWVyYT8odGhpcy5yYXkub3JpZ2luLnNldEZyb21NYXRyaXhQb3NpdGlvbihiLm1hdHJpeFdvcmxkKSxcbiAgICB0aGlzLnJheS5kaXJlY3Rpb24uc2V0KGEueCxhLnksLjUpLnVucHJvamVjdChiKS5zdWIodGhpcy5yYXkub3JpZ2luKS5ub3JtYWxpemUoKSk6YiYmYi5pc09ydGhvZ3JhcGhpY0NhbWVyYT8odGhpcy5yYXkub3JpZ2luLnNldChhLngsYS55LChiLm5lYXIrYi5mYXIpLyhiLm5lYXItYi5mYXIpKS51bnByb2plY3QoYiksdGhpcy5yYXkuZGlyZWN0aW9uLnNldCgwLDAsLTEpLnRyYW5zZm9ybURpcmVjdGlvbihiLm1hdHJpeFdvcmxkKSk6Y29uc29sZS5lcnJvcihcIlRIUkVFLlJheWNhc3RlcjogVW5zdXBwb3J0ZWQgY2FtZXJhIHR5cGUuXCIpfSxpbnRlcnNlY3RPYmplY3Q6ZnVuY3Rpb24oYSxiKXt2YXIgYz1bXTtCZShhLHRoaXMsYyxiKTtjLnNvcnQocWYpO3JldHVybiBjfSxpbnRlcnNlY3RPYmplY3RzOmZ1bmN0aW9uKGEsYil7dmFyIGM9W107aWYoITE9PT1BcnJheS5pc0FycmF5KGEpKXJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5SYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0czogb2JqZWN0cyBpcyBub3QgYW4gQXJyYXkuXCIpLFxuICAgIGM7Zm9yKHZhciBkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKUJlKGFbZF0sdGhpcyxjLGIpO2Muc29ydChxZik7cmV0dXJuIGN9fSk7T2JqZWN0LmFzc2lnbihyZi5wcm90b3R5cGUse3N0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5vbGRUaW1lPXRoaXMuc3RhcnRUaW1lPShcInVuZGVmaW5lZFwiPT09dHlwZW9mIHBlcmZvcm1hbmNlP0RhdGU6cGVyZm9ybWFuY2UpLm5vdygpO3RoaXMuZWxhcHNlZFRpbWU9MDt0aGlzLnJ1bm5pbmc9ITB9LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLmdldEVsYXBzZWRUaW1lKCk7dGhpcy5hdXRvU3RhcnQ9dGhpcy5ydW5uaW5nPSExfSxnZXRFbGFwc2VkVGltZTpmdW5jdGlvbigpe3RoaXMuZ2V0RGVsdGEoKTtyZXR1cm4gdGhpcy5lbGFwc2VkVGltZX0sZ2V0RGVsdGE6ZnVuY3Rpb24oKXt2YXIgYT0wO2lmKHRoaXMuYXV0b1N0YXJ0JiYhdGhpcy5ydW5uaW5nKXJldHVybiB0aGlzLnN0YXJ0KCksMDtpZih0aGlzLnJ1bm5pbmcpe3ZhciBiPShcInVuZGVmaW5lZFwiPT09dHlwZW9mIHBlcmZvcm1hbmNlP1xuICAgIERhdGU6cGVyZm9ybWFuY2UpLm5vdygpLGE9KGItdGhpcy5vbGRUaW1lKS8xRTM7dGhpcy5vbGRUaW1lPWI7dGhpcy5lbGFwc2VkVGltZSs9YX1yZXR1cm4gYX19KTtPYmplY3QuYXNzaWduKHNmLnByb3RvdHlwZSx7c2V0OmZ1bmN0aW9uKGEsYixjKXt0aGlzLnJhZGl1cz1hO3RoaXMucGhpPWI7dGhpcy50aGV0YT1jO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbihhKXt0aGlzLnJhZGl1cz1hLnJhZGl1czt0aGlzLnBoaT1hLnBoaTt0aGlzLnRoZXRhPWEudGhldGE7cmV0dXJuIHRoaXN9LG1ha2VTYWZlOmZ1bmN0aW9uKCl7dGhpcy5waGk9TWF0aC5tYXgoMUUtNixNYXRoLm1pbihNYXRoLlBJLTFFLTYsdGhpcy5waGkpKTtyZXR1cm4gdGhpc30sc2V0RnJvbVZlY3RvcjM6ZnVuY3Rpb24oYSl7dGhpcy5yYWRpdXM9YS5sZW5ndGgoKTswPT09dGhpcy5yYWRpdXM/dGhpcy5waGk9dGhpcy50aGV0YT1cbiAgICAwOih0aGlzLnRoZXRhPU1hdGguYXRhbjIoYS54LGEueiksdGhpcy5waGk9TWF0aC5hY29zKFEuY2xhbXAoYS55L3RoaXMucmFkaXVzLC0xLDEpKSk7cmV0dXJuIHRoaXN9fSk7T2JqZWN0LmFzc2lnbih0Zi5wcm90b3R5cGUse3NldDpmdW5jdGlvbihhLGIsYyl7dGhpcy5yYWRpdXM9YTt0aGlzLnRoZXRhPWI7dGhpcy55PWM7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMucmFkaXVzPWEucmFkaXVzO3RoaXMudGhldGE9YS50aGV0YTt0aGlzLnk9YS55O3JldHVybiB0aGlzfSxzZXRGcm9tVmVjdG9yMzpmdW5jdGlvbihhKXt0aGlzLnJhZGl1cz1NYXRoLnNxcnQoYS54KmEueCthLnoqYS56KTt0aGlzLnRoZXRhPU1hdGguYXRhbjIoYS54LGEueik7dGhpcy55PWEueTtyZXR1cm4gdGhpc319KTtnZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh4LnByb3RvdHlwZSk7Z2QucHJvdG90eXBlLmNvbnN0cnVjdG9yPVxuICAgIGdkO2dkLnByb3RvdHlwZS5pc0ltbWVkaWF0ZVJlbmRlck9iamVjdD0hMDtoZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShYLnByb3RvdHlwZSk7aGQucHJvdG90eXBlLmNvbnN0cnVjdG9yPWhkO2hkLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCxiPW5ldyBwLGM9bmV3IG1hO3JldHVybiBmdW5jdGlvbigpe3ZhciBkLGU9W1wiYVwiLFwiYlwiLFwiY1wiXTt0aGlzLm9iamVjdC51cGRhdGVNYXRyaXhXb3JsZCghMCk7Yy5nZXROb3JtYWxNYXRyaXgodGhpcy5vYmplY3QubWF0cml4V29ybGQpO3ZhciBmPXRoaXMub2JqZWN0Lm1hdHJpeFdvcmxkLGc9dGhpcy5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uO2lmKChkPXRoaXMub2JqZWN0Lmdlb21ldHJ5KSYmZC5pc0dlb21ldHJ5KWZvcih2YXIgaD1kLnZlcnRpY2VzLGs9ZC5mYWNlcyxsPWQ9MCxwPWsubGVuZ3RoO2w8cDtsKyspZm9yKHZhciBuPWtbbF0sdT0wLHI9bi52ZXJ0ZXhOb3JtYWxzLmxlbmd0aDt1PHI7dSsrKXt2YXIgdD1cbiAgICBuLnZlcnRleE5vcm1hbHNbdV07YS5jb3B5KGhbbltlW3VdXV0pLmFwcGx5TWF0cml4NChmKTtiLmNvcHkodCkuYXBwbHlNYXRyaXgzKGMpLm5vcm1hbGl6ZSgpLm11bHRpcGx5U2NhbGFyKHRoaXMuc2l6ZSkuYWRkKGEpO2cuc2V0WFlaKGQsYS54LGEueSxhLnopO2QrPTE7Zy5zZXRYWVooZCxiLngsYi55LGIueik7ZCs9MX1lbHNlIGlmKGQmJmQuaXNCdWZmZXJHZW9tZXRyeSlmb3IoZT1kLmF0dHJpYnV0ZXMucG9zaXRpb24saD1kLmF0dHJpYnV0ZXMubm9ybWFsLHU9ZD0wLHI9ZS5jb3VudDt1PHI7dSsrKWEuc2V0KGUuZ2V0WCh1KSxlLmdldFkodSksZS5nZXRaKHUpKS5hcHBseU1hdHJpeDQoZiksYi5zZXQoaC5nZXRYKHUpLGguZ2V0WSh1KSxoLmdldFoodSkpLGIuYXBwbHlNYXRyaXgzKGMpLm5vcm1hbGl6ZSgpLm11bHRpcGx5U2NhbGFyKHRoaXMuc2l6ZSkuYWRkKGEpLGcuc2V0WFlaKGQsYS54LGEueSxhLnopLGQrPTEsZy5zZXRYWVooZCxiLngsYi55LGIueiksZCs9MTtnLm5lZWRzVXBkYXRlPVxuICAgICEwfX0oKTtuYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh4LnByb3RvdHlwZSk7bmMucHJvdG90eXBlLmNvbnN0cnVjdG9yPW5jO25jLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5jb25lLmdlb21ldHJ5LmRpc3Bvc2UoKTt0aGlzLmNvbmUubWF0ZXJpYWwuZGlzcG9zZSgpfTtuYy5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IHAsYj1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oKXt0aGlzLmxpZ2h0LnVwZGF0ZU1hdHJpeFdvcmxkKCk7dmFyIGM9dGhpcy5saWdodC5kaXN0YW5jZT90aGlzLmxpZ2h0LmRpc3RhbmNlOjFFMyxkPWMqTWF0aC50YW4odGhpcy5saWdodC5hbmdsZSk7dGhpcy5jb25lLnNjYWxlLnNldChkLGQsYyk7YS5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5saWdodC5tYXRyaXhXb3JsZCk7Yi5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5saWdodC50YXJnZXQubWF0cml4V29ybGQpO3RoaXMuY29uZS5sb29rQXQoYi5zdWIoYSkpO1xuICAgIHZvaWQgMCE9PXRoaXMuY29sb3I/dGhpcy5jb25lLm1hdGVyaWFsLmNvbG9yLnNldCh0aGlzLmNvbG9yKTp0aGlzLmNvbmUubWF0ZXJpYWwuY29sb3IuY29weSh0aGlzLmxpZ2h0LmNvbG9yKX19KCk7b2MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoWC5wcm90b3R5cGUpO29jLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1vYztvYy5wcm90b3R5cGUudXBkYXRlTWF0cml4V29ybGQ9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgcCxiPW5ldyBPLGM9bmV3IE87cmV0dXJuIGZ1bmN0aW9uKGQpe3ZhciBlPXRoaXMuYm9uZXMsZj10aGlzLmdlb21ldHJ5LGc9Zi5nZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiKTtjLmdldEludmVyc2UodGhpcy5yb290Lm1hdHJpeFdvcmxkKTtmb3IodmFyIGg9MCxrPTA7aDxlLmxlbmd0aDtoKyspe3ZhciBsPWVbaF07bC5wYXJlbnQmJmwucGFyZW50LmlzQm9uZSYmKGIubXVsdGlwbHlNYXRyaWNlcyhjLGwubWF0cml4V29ybGQpLGEuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGIpLFxuICAgIGcuc2V0WFlaKGssYS54LGEueSxhLnopLGIubXVsdGlwbHlNYXRyaWNlcyhjLGwucGFyZW50Lm1hdHJpeFdvcmxkKSxhLnNldEZyb21NYXRyaXhQb3NpdGlvbihiKSxnLnNldFhZWihrKzEsYS54LGEueSxhLnopLGsrPTIpfWYuZ2V0QXR0cmlidXRlKFwicG9zaXRpb25cIikubmVlZHNVcGRhdGU9ITA7eC5wcm90b3R5cGUudXBkYXRlTWF0cml4V29ybGQuY2FsbCh0aGlzLGQpfX0oKTtwYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyYS5wcm90b3R5cGUpO3BjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1wYztwYy5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuZ2VvbWV0cnkuZGlzcG9zZSgpO3RoaXMubWF0ZXJpYWwuZGlzcG9zZSgpfTtwYy5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dm9pZCAwIT09dGhpcy5jb2xvcj90aGlzLm1hdGVyaWFsLmNvbG9yLnNldCh0aGlzLmNvbG9yKTp0aGlzLm1hdGVyaWFsLmNvbG9yLmNvcHkodGhpcy5saWdodC5jb2xvcil9O3FjLnByb3RvdHlwZT1cbiAgICBPYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKTtxYy5wcm90b3R5cGUuY29uc3RydWN0b3I9cWM7cWMucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmNoaWxkcmVuWzBdLmdlb21ldHJ5LmRpc3Bvc2UoKTt0aGlzLmNoaWxkcmVuWzBdLm1hdGVyaWFsLmRpc3Bvc2UoKX07cWMucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBhPS41KnRoaXMubGlnaHQud2lkdGgsYj0uNSp0aGlzLmxpZ2h0LmhlaWdodCxjPXRoaXMubGluZS5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLGQ9Yy5hcnJheTtkWzBdPWE7ZFsxXT0tYjtkWzJdPTA7ZFszXT1hO2RbNF09YjtkWzVdPTA7ZFs2XT0tYTtkWzddPWI7ZFs4XT0wO2RbOV09LWE7ZFsxMF09LWI7ZFsxMV09MDtkWzEyXT1hO2RbMTNdPS1iO2RbMTRdPTA7Yy5uZWVkc1VwZGF0ZT0hMDt2b2lkIDAhPT10aGlzLmNvbG9yP3RoaXMubGluZS5tYXRlcmlhbC5jb2xvci5zZXQodGhpcy5jb2xvcik6dGhpcy5saW5lLm1hdGVyaWFsLmNvbG9yLmNvcHkodGhpcy5saWdodC5jb2xvcil9O1xuICAgIHJjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKTtyYy5wcm90b3R5cGUuY29uc3RydWN0b3I9cmM7cmMucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmNoaWxkcmVuWzBdLmdlb21ldHJ5LmRpc3Bvc2UoKTt0aGlzLmNoaWxkcmVuWzBdLm1hdGVyaWFsLmRpc3Bvc2UoKX07cmMucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBwLGI9bmV3IEgsYz1uZXcgSDtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD10aGlzLmNoaWxkcmVuWzBdO2lmKHZvaWQgMCE9PXRoaXMuY29sb3IpdGhpcy5tYXRlcmlhbC5jb2xvci5zZXQodGhpcy5jb2xvcik7ZWxzZXt2YXIgZT1kLmdlb21ldHJ5LmdldEF0dHJpYnV0ZShcImNvbG9yXCIpO2IuY29weSh0aGlzLmxpZ2h0LmNvbG9yKTtjLmNvcHkodGhpcy5saWdodC5ncm91bmRDb2xvcik7Zm9yKHZhciBmPTAsZz1lLmNvdW50O2Y8ZztmKyspe3ZhciBoPWY8Zy8yP2I6YztlLnNldFhZWihmLGgucixoLmcsaC5iKX1lLm5lZWRzVXBkYXRlPVxuICAgICEwfWQubG9va0F0KGEuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubGlnaHQubWF0cml4V29ybGQpLm5lZ2F0ZSgpKX19KCk7aWQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoWC5wcm90b3R5cGUpO2lkLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1pZDtSZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShYLnByb3RvdHlwZSk7UmQucHJvdG90eXBlLmNvbnN0cnVjdG9yPVJkO2pkLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFgucHJvdG90eXBlKTtqZC5wcm90b3R5cGUuY29uc3RydWN0b3I9amQ7amQucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBwLGI9bmV3IHAsYz1uZXcgbWE7cmV0dXJuIGZ1bmN0aW9uKCl7dGhpcy5vYmplY3QudXBkYXRlTWF0cml4V29ybGQoITApO2MuZ2V0Tm9ybWFsTWF0cml4KHRoaXMub2JqZWN0Lm1hdHJpeFdvcmxkKTtmb3IodmFyIGQ9dGhpcy5vYmplY3QubWF0cml4V29ybGQsZT10aGlzLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24sXG4gICAgZj10aGlzLm9iamVjdC5nZW9tZXRyeSxnPWYudmVydGljZXMsZj1mLmZhY2VzLGg9MCxrPTAsbD1mLmxlbmd0aDtrPGw7aysrKXt2YXIgcD1mW2tdLG49cC5ub3JtYWw7YS5jb3B5KGdbcC5hXSkuYWRkKGdbcC5iXSkuYWRkKGdbcC5jXSkuZGl2aWRlU2NhbGFyKDMpLmFwcGx5TWF0cml4NChkKTtiLmNvcHkobikuYXBwbHlNYXRyaXgzKGMpLm5vcm1hbGl6ZSgpLm11bHRpcGx5U2NhbGFyKHRoaXMuc2l6ZSkuYWRkKGEpO2Uuc2V0WFlaKGgsYS54LGEueSxhLnopO2grPTE7ZS5zZXRYWVooaCxiLngsYi55LGIueik7aCs9MX1lLm5lZWRzVXBkYXRlPSEwfX0oKTtzYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh4LnByb3RvdHlwZSk7c2MucHJvdG90eXBlLmNvbnN0cnVjdG9yPXNjO3NjLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5saWdodFBsYW5lLmdlb21ldHJ5LmRpc3Bvc2UoKTt0aGlzLmxpZ2h0UGxhbmUubWF0ZXJpYWwuZGlzcG9zZSgpO3RoaXMudGFyZ2V0TGluZS5nZW9tZXRyeS5kaXNwb3NlKCk7XG4gICAgdGhpcy50YXJnZXRMaW5lLm1hdGVyaWFsLmRpc3Bvc2UoKX07c2MucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBwLGI9bmV3IHAsYz1uZXcgcDtyZXR1cm4gZnVuY3Rpb24oKXthLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLmxpZ2h0Lm1hdHJpeFdvcmxkKTtiLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLmxpZ2h0LnRhcmdldC5tYXRyaXhXb3JsZCk7Yy5zdWJWZWN0b3JzKGIsYSk7dGhpcy5saWdodFBsYW5lLmxvb2tBdChjKTt2b2lkIDAhPT10aGlzLmNvbG9yPyh0aGlzLmxpZ2h0UGxhbmUubWF0ZXJpYWwuY29sb3Iuc2V0KHRoaXMuY29sb3IpLHRoaXMudGFyZ2V0TGluZS5tYXRlcmlhbC5jb2xvci5zZXQodGhpcy5jb2xvcikpOih0aGlzLmxpZ2h0UGxhbmUubWF0ZXJpYWwuY29sb3IuY29weSh0aGlzLmxpZ2h0LmNvbG9yKSx0aGlzLnRhcmdldExpbmUubWF0ZXJpYWwuY29sb3IuY29weSh0aGlzLmxpZ2h0LmNvbG9yKSk7dGhpcy50YXJnZXRMaW5lLmxvb2tBdChjKTtcbiAgICB0aGlzLnRhcmdldExpbmUuc2NhbGUuej1jLmxlbmd0aCgpfX0oKTtrZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShYLnByb3RvdHlwZSk7a2QucHJvdG90eXBlLmNvbnN0cnVjdG9yPWtkO2tkLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsZyxoLGspe2Quc2V0KGcsaCxrKS51bnByb2plY3QoZSk7YT1jW2FdO2lmKHZvaWQgMCE9PWEpZm9yKGc9Yi5nZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiKSxoPTAsaz1hLmxlbmd0aDtoPGs7aCsrKWcuc2V0WFlaKGFbaF0sZC54LGQueSxkLnopfXZhciBiLGMsZD1uZXcgcCxlPW5ldyBUYTtyZXR1cm4gZnVuY3Rpb24oKXtiPXRoaXMuZ2VvbWV0cnk7Yz10aGlzLnBvaW50TWFwO2UucHJvamVjdGlvbk1hdHJpeC5jb3B5KHRoaXMuY2FtZXJhLnByb2plY3Rpb25NYXRyaXgpO2EoXCJjXCIsMCwwLC0xKTthKFwidFwiLDAsMCwxKTthKFwibjFcIiwtMSwtMSwtMSk7YShcIm4yXCIsMSwtMSwtMSk7YShcIm4zXCIsLTEsMSwtMSk7YShcIm40XCIsMSxcbiAgICAxLC0xKTthKFwiZjFcIiwtMSwtMSwxKTthKFwiZjJcIiwxLC0xLDEpO2EoXCJmM1wiLC0xLDEsMSk7YShcImY0XCIsMSwxLDEpO2EoXCJ1MVwiLC43LDEuMSwtMSk7YShcInUyXCIsLS43LDEuMSwtMSk7YShcInUzXCIsMCwyLC0xKTthKFwiY2YxXCIsLTEsMCwxKTthKFwiY2YyXCIsMSwwLDEpO2EoXCJjZjNcIiwwLC0xLDEpO2EoXCJjZjRcIiwwLDEsMSk7YShcImNuMVwiLC0xLDAsLTEpO2EoXCJjbjJcIiwxLDAsLTEpO2EoXCJjbjNcIiwwLC0xLC0xKTthKFwiY240XCIsMCwxLC0xKTtiLmdldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIpLm5lZWRzVXBkYXRlPSEwfX0oKTtHYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShYLnByb3RvdHlwZSk7R2IucHJvdG90eXBlLmNvbnN0cnVjdG9yPUdiO0diLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgWGE7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZvaWQgMCE9PWImJmNvbnNvbGUud2FybihcIlRIUkVFLkJveEhlbHBlcjogLnVwZGF0ZSgpIGhhcyBubyBsb25nZXIgYXJndW1lbnRzLlwiKTtcbiAgICB2b2lkIDAhPT10aGlzLm9iamVjdCYmYS5zZXRGcm9tT2JqZWN0KHRoaXMub2JqZWN0KTtpZighYS5pc0VtcHR5KCkpe2I9YS5taW47dmFyIGM9YS5tYXgsZD10aGlzLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24sZT1kLmFycmF5O2VbMF09Yy54O2VbMV09Yy55O2VbMl09Yy56O2VbM109Yi54O2VbNF09Yy55O2VbNV09Yy56O2VbNl09Yi54O2VbN109Yi55O2VbOF09Yy56O2VbOV09Yy54O2VbMTBdPWIueTtlWzExXT1jLno7ZVsxMl09Yy54O2VbMTNdPWMueTtlWzE0XT1iLno7ZVsxNV09Yi54O2VbMTZdPWMueTtlWzE3XT1iLno7ZVsxOF09Yi54O2VbMTldPWIueTtlWzIwXT1iLno7ZVsyMV09Yy54O2VbMjJdPWIueTtlWzIzXT1iLno7ZC5uZWVkc1VwZGF0ZT0hMDt0aGlzLmdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpfX19KCk7R2IucHJvdG90eXBlLnNldEZyb21PYmplY3Q9ZnVuY3Rpb24oYSl7dGhpcy5vYmplY3Q9YTt0aGlzLnVwZGF0ZSgpO3JldHVybiB0aGlzfTtcbiAgICBsZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShYLnByb3RvdHlwZSk7bGQucHJvdG90eXBlLmNvbnN0cnVjdG9yPWxkO2xkLnByb3RvdHlwZS51cGRhdGVNYXRyaXhXb3JsZD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmJveDtiLmlzRW1wdHkoKXx8KGIuZ2V0Q2VudGVyKHRoaXMucG9zaXRpb24pLGIuZ2V0U2l6ZSh0aGlzLnNjYWxlKSx0aGlzLnNjYWxlLm11bHRpcGx5U2NhbGFyKC41KSx4LnByb3RvdHlwZS51cGRhdGVNYXRyaXhXb3JsZC5jYWxsKHRoaXMsYSkpfTttZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShzYS5wcm90b3R5cGUpO21kLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1tZDttZC5wcm90b3R5cGUudXBkYXRlTWF0cml4V29ybGQ9ZnVuY3Rpb24oYSl7dmFyIGI9LXRoaXMucGxhbmUuY29uc3RhbnQ7MUUtOD5NYXRoLmFicyhiKSYmKGI9MUUtOCk7dGhpcy5zY2FsZS5zZXQoLjUqdGhpcy5zaXplLC41KnRoaXMuc2l6ZSxiKTt0aGlzLmxvb2tBdCh0aGlzLnBsYW5lLm5vcm1hbCk7XG4gICAgeC5wcm90b3R5cGUudXBkYXRlTWF0cml4V29ybGQuY2FsbCh0aGlzLGEpfTt2YXIgU2QsQ2U7SGIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoeC5wcm90b3R5cGUpO0hiLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1IYjtIYi5wcm90b3R5cGUuc2V0RGlyZWN0aW9uPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IHAsYjtyZXR1cm4gZnVuY3Rpb24oYyl7Ljk5OTk5PGMueT90aGlzLnF1YXRlcm5pb24uc2V0KDAsMCwwLDEpOi0uOTk5OTk+Yy55P3RoaXMucXVhdGVybmlvbi5zZXQoMSwwLDAsMCk6KGEuc2V0KGMueiwwLC1jLngpLm5vcm1hbGl6ZSgpLGI9TWF0aC5hY29zKGMueSksdGhpcy5xdWF0ZXJuaW9uLnNldEZyb21BeGlzQW5nbGUoYSxiKSl9fSgpO0hiLnByb3RvdHlwZS5zZXRMZW5ndGg9ZnVuY3Rpb24oYSxiLGMpe3ZvaWQgMD09PWImJihiPS4yKmEpO3ZvaWQgMD09PWMmJihjPS4yKmIpO3RoaXMubGluZS5zY2FsZS5zZXQoMSxNYXRoLm1heCgwLGEtYiksMSk7dGhpcy5saW5lLnVwZGF0ZU1hdHJpeCgpO1xuICAgIHRoaXMuY29uZS5zY2FsZS5zZXQoYyxiLGMpO3RoaXMuY29uZS5wb3NpdGlvbi55PWE7dGhpcy5jb25lLnVwZGF0ZU1hdHJpeCgpfTtIYi5wcm90b3R5cGUuc2V0Q29sb3I9ZnVuY3Rpb24oYSl7dGhpcy5saW5lLm1hdGVyaWFsLmNvbG9yLmNvcHkoYSk7dGhpcy5jb25lLm1hdGVyaWFsLmNvbG9yLmNvcHkoYSl9O25kLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFgucHJvdG90eXBlKTtuZC5wcm90b3R5cGUuY29uc3RydWN0b3I9bmQ7Qy5jcmVhdGU9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLmxvZyhcIlRIUkVFLkN1cnZlLmNyZWF0ZSgpIGhhcyBiZWVuIGRlcHJlY2F0ZWRcIik7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShDLnByb3RvdHlwZSk7YS5wcm90b3R5cGUuY29uc3RydWN0b3I9YTthLnByb3RvdHlwZS5nZXRQb2ludD1iO3JldHVybiBhfTtPYmplY3QuYXNzaWduKGJiLnByb3RvdHlwZSx7Y3JlYXRlUG9pbnRzR2VvbWV0cnk6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQ3VydmVQYXRoOiAuY3JlYXRlUG9pbnRzR2VvbWV0cnkoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLkdlb21ldHJ5KCkuc2V0RnJvbVBvaW50cyggcG9pbnRzICkgaW5zdGVhZC5cIik7XG4gICAgYT10aGlzLmdldFBvaW50cyhhKTtyZXR1cm4gdGhpcy5jcmVhdGVHZW9tZXRyeShhKX0sY3JlYXRlU3BhY2VkUG9pbnRzR2VvbWV0cnk6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQ3VydmVQYXRoOiAuY3JlYXRlU3BhY2VkUG9pbnRzR2VvbWV0cnkoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLkdlb21ldHJ5KCkuc2V0RnJvbVBvaW50cyggcG9pbnRzICkgaW5zdGVhZC5cIik7YT10aGlzLmdldFNwYWNlZFBvaW50cyhhKTtyZXR1cm4gdGhpcy5jcmVhdGVHZW9tZXRyeShhKX0sY3JlYXRlR2VvbWV0cnk6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQ3VydmVQYXRoOiAuY3JlYXRlR2VvbWV0cnkoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLkdlb21ldHJ5KCkuc2V0RnJvbVBvaW50cyggcG9pbnRzICkgaW5zdGVhZC5cIik7Zm9yKHZhciBiPW5ldyBMLGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPWFbY107Yi52ZXJ0aWNlcy5wdXNoKG5ldyBwKGUueCxcbiAgICBlLnksZS56fHwwKSl9cmV0dXJuIGJ9fSk7T2JqZWN0LmFzc2lnbihTYS5wcm90b3R5cGUse2Zyb21Qb2ludHM6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuUGF0aDogLmZyb21Qb2ludHMoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5zZXRGcm9tUG9pbnRzKCkuXCIpO3RoaXMuc2V0RnJvbVBvaW50cyhhKX19KTt2Zi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjYS5wcm90b3R5cGUpO3dmLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGNhLnByb3RvdHlwZSk7RGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoY2EucHJvdG90eXBlKTtPYmplY3QuYXNzaWduKERlLnByb3RvdHlwZSx7aW5pdEZyb21BcnJheTpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5TcGxpbmU6IC5pbml0RnJvbUFycmF5KCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LGdldENvbnRyb2xQb2ludHNBcnJheTpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5TcGxpbmU6IC5nZXRDb250cm9sUG9pbnRzQXJyYXkoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sXG4gICAgcmVwYXJhbWV0cml6ZUJ5QXJjTGVuZ3RoOmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlNwbGluZTogLnJlcGFyYW1ldHJpemVCeUFyY0xlbmd0aCgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfX0pO2lkLnByb3RvdHlwZS5zZXRDb2xvcnM9ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuR3JpZEhlbHBlcjogc2V0Q29sb3JzKCkgaGFzIGJlZW4gZGVwcmVjYXRlZCwgcGFzcyB0aGVtIGluIHRoZSBjb25zdHJ1Y3RvciBpbnN0ZWFkLlwiKX07b2MucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5Ta2VsZXRvbkhlbHBlcjogdXBkYXRlKCkgbm8gbG9uZ2VyIG5lZWRzIHRvIGJlIGNhbGxlZC5cIil9O09iamVjdC5hc3NpZ24oa2MucHJvdG90eXBlLHtleHRyYWN0VXJsQmFzZTpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Mb2FkZXI6IC5leHRyYWN0VXJsQmFzZSgpIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSBUSFJFRS5Mb2FkZXJVdGlscy5leHRyYWN0VXJsQmFzZSgpIGluc3RlYWQuXCIpO1xuICAgIHJldHVybiBIZS5leHRyYWN0VXJsQmFzZShhKX19KTtPYmplY3QuYXNzaWduKG9kLnByb3RvdHlwZSx7Y2VudGVyOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkJveDI6IC5jZW50ZXIoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5nZXRDZW50ZXIoKS5cIik7cmV0dXJuIHRoaXMuZ2V0Q2VudGVyKGEpfSxlbXB0eTpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkJveDI6IC5lbXB0eSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmlzRW1wdHkoKS5cIik7cmV0dXJuIHRoaXMuaXNFbXB0eSgpfSxpc0ludGVyc2VjdGlvbkJveDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gyOiAuaXNJbnRlcnNlY3Rpb25Cb3goKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pbnRlcnNlY3RzQm94KCkuXCIpO3JldHVybiB0aGlzLmludGVyc2VjdHNCb3goYSl9LHNpemU6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQm94MjogLnNpemUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5nZXRTaXplKCkuXCIpO1xuICAgIHJldHVybiB0aGlzLmdldFNpemUoYSl9fSk7T2JqZWN0LmFzc2lnbihYYS5wcm90b3R5cGUse2NlbnRlcjpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gzOiAuY2VudGVyKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ2V0Q2VudGVyKCkuXCIpO3JldHVybiB0aGlzLmdldENlbnRlcihhKX0sZW1wdHk6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gzOiAuZW1wdHkoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pc0VtcHR5KCkuXCIpO3JldHVybiB0aGlzLmlzRW1wdHkoKX0saXNJbnRlcnNlY3Rpb25Cb3g6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQm94MzogLmlzSW50ZXJzZWN0aW9uQm94KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW50ZXJzZWN0c0JveCgpLlwiKTtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzQm94KGEpfSxpc0ludGVyc2VjdGlvblNwaGVyZTpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gzOiAuaXNJbnRlcnNlY3Rpb25TcGhlcmUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pbnRlcnNlY3RzU3BoZXJlKCkuXCIpO1xuICAgIHJldHVybiB0aGlzLmludGVyc2VjdHNTcGhlcmUoYSl9LHNpemU6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQm94MzogLnNpemUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5nZXRTaXplKCkuXCIpO3JldHVybiB0aGlzLmdldFNpemUoYSl9fSk7TmIucHJvdG90eXBlLmNlbnRlcj1mdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaW5lMzogLmNlbnRlcigpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmdldENlbnRlcigpLlwiKTtyZXR1cm4gdGhpcy5nZXRDZW50ZXIoYSl9O09iamVjdC5hc3NpZ24oUSx7cmFuZG9tMTY6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRoOiAucmFuZG9tMTYoKSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgTWF0aC5yYW5kb20oKSBpbnN0ZWFkLlwiKTtyZXR1cm4gTWF0aC5yYW5kb20oKX0sbmVhcmVzdFBvd2VyT2ZUd286ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0aDogLm5lYXJlc3RQb3dlck9mVHdvKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZmxvb3JQb3dlck9mVHdvKCkuXCIpO1xuICAgIHJldHVybiBRLmZsb29yUG93ZXJPZlR3byhhKX0sbmV4dFBvd2VyT2ZUd286ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0aDogLm5leHRQb3dlck9mVHdvKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuY2VpbFBvd2VyT2ZUd28oKS5cIik7cmV0dXJuIFEuY2VpbFBvd2VyT2ZUd28oYSl9fSk7T2JqZWN0LmFzc2lnbihtYS5wcm90b3R5cGUse2ZsYXR0ZW5Ub0FycmF5T2Zmc2V0OmZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4MzogLmZsYXR0ZW5Ub0FycmF5T2Zmc2V0KCkgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC50b0FycmF5KCkgaW5zdGVhZC5cIik7cmV0dXJuIHRoaXMudG9BcnJheShhLGIpfSxtdWx0aXBseVZlY3RvcjM6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4MzogLm11bHRpcGx5VmVjdG9yMygpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSB2ZWN0b3IuYXBwbHlNYXRyaXgzKCBtYXRyaXggKSBpbnN0ZWFkLlwiKTtyZXR1cm4gYS5hcHBseU1hdHJpeDModGhpcyl9LFxuICAgIG11bHRpcGx5VmVjdG9yM0FycmF5OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDM6IC5tdWx0aXBseVZlY3RvcjNBcnJheSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxhcHBseVRvQnVmZmVyOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDM6IC5hcHBseVRvQnVmZmVyKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG1hdHJpeC5hcHBseVRvQnVmZmVyQXR0cmlidXRlKCBhdHRyaWJ1dGUgKSBpbnN0ZWFkLlwiKTtyZXR1cm4gdGhpcy5hcHBseVRvQnVmZmVyQXR0cmlidXRlKGEpfSxhcHBseVRvVmVjdG9yM0FycmF5OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDM6IC5hcHBseVRvVmVjdG9yM0FycmF5KCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9fSk7T2JqZWN0LmFzc2lnbihPLnByb3RvdHlwZSx7ZXh0cmFjdFBvc2l0aW9uOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5leHRyYWN0UG9zaXRpb24oKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5jb3B5UG9zaXRpb24oKS5cIik7XG4gICAgcmV0dXJuIHRoaXMuY29weVBvc2l0aW9uKGEpfSxmbGF0dGVuVG9BcnJheU9mZnNldDpmdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5mbGF0dGVuVG9BcnJheU9mZnNldCgpIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAudG9BcnJheSgpIGluc3RlYWQuXCIpO3JldHVybiB0aGlzLnRvQXJyYXkoYSxiKX0sZ2V0UG9zaXRpb246ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gZnVuY3Rpb24oKXt2b2lkIDA9PT1hJiYoYT1uZXcgcCk7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLmdldFBvc2l0aW9uKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFZlY3RvcjMuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKCBtYXRyaXggKSBpbnN0ZWFkLlwiKTtyZXR1cm4gYS5zZXRGcm9tTWF0cml4Q29sdW1uKHRoaXMsMyl9fSgpLHNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb246ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLnNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb24oKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5tYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbigpLlwiKTtcbiAgICByZXR1cm4gdGhpcy5tYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbihhKX0sbXVsdGlwbHlUb0FycmF5OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLm11bHRpcGx5VG9BcnJheSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxtdWx0aXBseVZlY3RvcjM6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLm11bHRpcGx5VmVjdG9yMygpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSB2ZWN0b3IuYXBwbHlNYXRyaXg0KCBtYXRyaXggKSBpbnN0ZWFkLlwiKTtyZXR1cm4gYS5hcHBseU1hdHJpeDQodGhpcyl9LG11bHRpcGx5VmVjdG9yNDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAubXVsdGlwbHlWZWN0b3I0KCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIHZlY3Rvci5hcHBseU1hdHJpeDQoIG1hdHJpeCApIGluc3RlYWQuXCIpO3JldHVybiBhLmFwcGx5TWF0cml4NCh0aGlzKX0sbXVsdGlwbHlWZWN0b3IzQXJyYXk6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4NDogLm11bHRpcGx5VmVjdG9yM0FycmF5KCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LFxuICAgIHJvdGF0ZUF4aXM6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLnJvdGF0ZUF4aXMoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVmVjdG9yMy50cmFuc2Zvcm1EaXJlY3Rpb24oIG1hdHJpeCApIGluc3RlYWQuXCIpO2EudHJhbnNmb3JtRGlyZWN0aW9uKHRoaXMpfSxjcm9zc1ZlY3RvcjpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAuY3Jvc3NWZWN0b3IoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgdmVjdG9yLmFwcGx5TWF0cml4NCggbWF0cml4ICkgaW5zdGVhZC5cIik7cmV0dXJuIGEuYXBwbHlNYXRyaXg0KHRoaXMpfSx0cmFuc2xhdGU6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4NDogLnRyYW5zbGF0ZSgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxyb3RhdGVYOmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDQ6IC5yb3RhdGVYKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LHJvdGF0ZVk6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4NDogLnJvdGF0ZVkoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sXG4gICAgcm90YXRlWjpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXg0OiAucm90YXRlWigpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxyb3RhdGVCeUF4aXM6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4NDogLnJvdGF0ZUJ5QXhpcygpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxhcHBseVRvQnVmZmVyOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5hcHBseVRvQnVmZmVyKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG1hdHJpeC5hcHBseVRvQnVmZmVyQXR0cmlidXRlKCBhdHRyaWJ1dGUgKSBpbnN0ZWFkLlwiKTtyZXR1cm4gdGhpcy5hcHBseVRvQnVmZmVyQXR0cmlidXRlKGEpfSxhcHBseVRvVmVjdG9yM0FycmF5OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDQ6IC5hcHBseVRvVmVjdG9yM0FycmF5KCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LG1ha2VGcnVzdHVtOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAubWFrZUZydXN0dW0oKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgLm1ha2VQZXJzcGVjdGl2ZSggbGVmdCwgcmlnaHQsIHRvcCwgYm90dG9tLCBuZWFyLCBmYXIgKSBpbnN0ZWFkLlwiKTtcbiAgICByZXR1cm4gdGhpcy5tYWtlUGVyc3BlY3RpdmUoYSxiLGQsYyxlLGYpfX0pO0VhLnByb3RvdHlwZS5pc0ludGVyc2VjdGlvbkxpbmU9ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuUGxhbmU6IC5pc0ludGVyc2VjdGlvbkxpbmUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pbnRlcnNlY3RzTGluZSgpLlwiKTtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzTGluZShhKX07aGEucHJvdG90eXBlLm11bHRpcGx5VmVjdG9yMz1mdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5RdWF0ZXJuaW9uOiAubXVsdGlwbHlWZWN0b3IzKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIGlzIG5vdyB2ZWN0b3IuYXBwbHlRdWF0ZXJuaW9uKCBxdWF0ZXJuaW9uICkgaW5zdGVhZC5cIik7cmV0dXJuIGEuYXBwbHlRdWF0ZXJuaW9uKHRoaXMpfTtPYmplY3QuYXNzaWduKHNiLnByb3RvdHlwZSx7aXNJbnRlcnNlY3Rpb25Cb3g6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuUmF5OiAuaXNJbnRlcnNlY3Rpb25Cb3goKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pbnRlcnNlY3RzQm94KCkuXCIpO1xuICAgIHJldHVybiB0aGlzLmludGVyc2VjdHNCb3goYSl9LGlzSW50ZXJzZWN0aW9uUGxhbmU6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuUmF5OiAuaXNJbnRlcnNlY3Rpb25QbGFuZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmludGVyc2VjdHNQbGFuZSgpLlwiKTtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzUGxhbmUoYSl9LGlzSW50ZXJzZWN0aW9uU3BoZXJlOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlJheTogLmlzSW50ZXJzZWN0aW9uU3BoZXJlKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW50ZXJzZWN0c1NwaGVyZSgpLlwiKTtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzU3BoZXJlKGEpfX0pO09iamVjdC5hc3NpZ24oamIucHJvdG90eXBlLHtleHRyYWN0QWxsUG9pbnRzOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlNoYXBlOiAuZXh0cmFjdEFsbFBvaW50cygpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSAuZXh0cmFjdFBvaW50cygpIGluc3RlYWQuXCIpO3JldHVybiB0aGlzLmV4dHJhY3RQb2ludHMoYSl9LFxuICAgIGV4dHJ1ZGU6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuU2hhcGU6IC5leHRydWRlKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIEV4dHJ1ZGVHZW9tZXRyeSgpIGluc3RlYWQuXCIpO3JldHVybiBuZXcgaWIodGhpcyxhKX0sbWFrZUdlb21ldHJ5OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlNoYXBlOiAubWFrZUdlb21ldHJ5KCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFNoYXBlR2VvbWV0cnkoKSBpbnN0ZWFkLlwiKTtyZXR1cm4gbmV3IHhiKHRoaXMsYSl9fSk7T2JqZWN0LmFzc2lnbihELnByb3RvdHlwZSx7ZnJvbUF0dHJpYnV0ZTpmdW5jdGlvbihhLGIsYyl7Y29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMjogLmZyb21BdHRyaWJ1dGUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5mcm9tQnVmZmVyQXR0cmlidXRlKCkuXCIpO3JldHVybiB0aGlzLmZyb21CdWZmZXJBdHRyaWJ1dGUoYSxiLGMpfSxkaXN0YW5jZVRvTWFuaGF0dGFuOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjI6IC5kaXN0YW5jZVRvTWFuaGF0dGFuKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAubWFuaGF0dGFuRGlzdGFuY2VUbygpLlwiKTtcbiAgICByZXR1cm4gdGhpcy5tYW5oYXR0YW5EaXN0YW5jZVRvKGEpfSxsZW5ndGhNYW5oYXR0YW46ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IyOiAubGVuZ3RoTWFuaGF0dGFuKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAubWFuaGF0dGFuTGVuZ3RoKCkuXCIpO3JldHVybiB0aGlzLm1hbmhhdHRhbkxlbmd0aCgpfX0pO09iamVjdC5hc3NpZ24ocC5wcm90b3R5cGUse3NldEV1bGVyRnJvbVJvdGF0aW9uTWF0cml4OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlZlY3RvcjM6IC5zZXRFdWxlckZyb21Sb3RhdGlvbk1hdHJpeCgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBFdWxlci5zZXRGcm9tUm90YXRpb25NYXRyaXgoKSBpbnN0ZWFkLlwiKX0sc2V0RXVsZXJGcm9tUXVhdGVybmlvbjpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5WZWN0b3IzOiAuc2V0RXVsZXJGcm9tUXVhdGVybmlvbigpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBFdWxlci5zZXRGcm9tUXVhdGVybmlvbigpIGluc3RlYWQuXCIpfSxcbiAgICBnZXRQb3NpdGlvbkZyb21NYXRyaXg6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogLmdldFBvc2l0aW9uRnJvbU1hdHJpeCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLnNldEZyb21NYXRyaXhQb3NpdGlvbigpLlwiKTtyZXR1cm4gdGhpcy5zZXRGcm9tTWF0cml4UG9zaXRpb24oYSl9LGdldFNjYWxlRnJvbU1hdHJpeDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAuZ2V0U2NhbGVGcm9tTWF0cml4KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuc2V0RnJvbU1hdHJpeFNjYWxlKCkuXCIpO3JldHVybiB0aGlzLnNldEZyb21NYXRyaXhTY2FsZShhKX0sZ2V0Q29sdW1uRnJvbU1hdHJpeDpmdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IC5nZXRDb2x1bW5Gcm9tTWF0cml4KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuc2V0RnJvbU1hdHJpeENvbHVtbigpLlwiKTtyZXR1cm4gdGhpcy5zZXRGcm9tTWF0cml4Q29sdW1uKGIsXG4gICAgYSl9LGFwcGx5UHJvamVjdGlvbjpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAuYXBwbHlQcm9qZWN0aW9uKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIC5hcHBseU1hdHJpeDQoIG0gKSBpbnN0ZWFkLlwiKTtyZXR1cm4gdGhpcy5hcHBseU1hdHJpeDQoYSl9LGZyb21BdHRyaWJ1dGU6ZnVuY3Rpb24oYSxiLGMpe2NvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IC5mcm9tQXR0cmlidXRlKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuZnJvbUJ1ZmZlckF0dHJpYnV0ZSgpLlwiKTtyZXR1cm4gdGhpcy5mcm9tQnVmZmVyQXR0cmlidXRlKGEsYixjKX0sZGlzdGFuY2VUb01hbmhhdHRhbjpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAuZGlzdGFuY2VUb01hbmhhdHRhbigpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLm1hbmhhdHRhbkRpc3RhbmNlVG8oKS5cIik7cmV0dXJuIHRoaXMubWFuaGF0dGFuRGlzdGFuY2VUbyhhKX0sbGVuZ3RoTWFuaGF0dGFuOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogLmxlbmd0aE1hbmhhdHRhbigpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLm1hbmhhdHRhbkxlbmd0aCgpLlwiKTtcbiAgICByZXR1cm4gdGhpcy5tYW5oYXR0YW5MZW5ndGgoKX19KTtPYmplY3QuYXNzaWduKGFhLnByb3RvdHlwZSx7ZnJvbUF0dHJpYnV0ZTpmdW5jdGlvbihhLGIsYyl7Y29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yNDogLmZyb21BdHRyaWJ1dGUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5mcm9tQnVmZmVyQXR0cmlidXRlKCkuXCIpO3JldHVybiB0aGlzLmZyb21CdWZmZXJBdHRyaWJ1dGUoYSxiLGMpfSxsZW5ndGhNYW5oYXR0YW46ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3I0OiAubGVuZ3RoTWFuaGF0dGFuKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAubWFuaGF0dGFuTGVuZ3RoKCkuXCIpO3JldHVybiB0aGlzLm1hbmhhdHRhbkxlbmd0aCgpfX0pO0wucHJvdG90eXBlLmNvbXB1dGVUYW5nZW50cz1mdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkdlb21ldHJ5OiAuY29tcHV0ZVRhbmdlbnRzKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9O09iamVjdC5hc3NpZ24oeC5wcm90b3R5cGUsXG4gICAge2dldENoaWxkQnlOYW1lOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdDNEOiAuZ2V0Q2hpbGRCeU5hbWUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5nZXRPYmplY3RCeU5hbWUoKS5cIik7cmV0dXJuIHRoaXMuZ2V0T2JqZWN0QnlOYW1lKGEpfSxyZW5kZXJEZXB0aDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdDNEOiAucmVuZGVyRGVwdGggaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIC5yZW5kZXJPcmRlciwgaW5zdGVhZC5cIil9LHRyYW5zbGF0ZTpmdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdDNEOiAudHJhbnNsYXRlKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIC50cmFuc2xhdGVPbkF4aXMoIGF4aXMsIGRpc3RhbmNlICkgaW5zdGVhZC5cIik7cmV0dXJuIHRoaXMudHJhbnNsYXRlT25BeGlzKGIsYSl9fSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoeC5wcm90b3R5cGUse2V1bGVyT3JkZXI6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdDNEOiAuZXVsZXJPcmRlciBpcyBub3cgLnJvdGF0aW9uLm9yZGVyLlwiKTtcbiAgICByZXR1cm4gdGhpcy5yb3RhdGlvbi5vcmRlcn0sc2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdDNEOiAuZXVsZXJPcmRlciBpcyBub3cgLnJvdGF0aW9uLm9yZGVyLlwiKTt0aGlzLnJvdGF0aW9uLm9yZGVyPWF9fSx1c2VRdWF0ZXJuaW9uOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3QzRDogLnVzZVF1YXRlcm5pb24gaGFzIGJlZW4gcmVtb3ZlZC4gVGhlIGxpYnJhcnkgbm93IHVzZXMgcXVhdGVybmlvbnMgYnkgZGVmYXVsdC5cIil9LHNldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdDNEOiAudXNlUXVhdGVybmlvbiBoYXMgYmVlbiByZW1vdmVkLiBUaGUgbGlicmFyeSBub3cgdXNlcyBxdWF0ZXJuaW9ucyBieSBkZWZhdWx0LlwiKX19fSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoRGMucHJvdG90eXBlLHtvYmplY3RzOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MT0Q6IC5vYmplY3RzIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmxldmVscy5cIik7XG4gICAgcmV0dXJuIHRoaXMubGV2ZWxzfX19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoRWMucHJvdG90eXBlLFwidXNlVmVydGV4VGV4dHVyZVwiLHtnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Ta2VsZXRvbjogdXNlVmVydGV4VGV4dHVyZSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sc2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuU2tlbGV0b246IHVzZVZlcnRleFRleHR1cmUgaGFzIGJlZW4gcmVtb3ZlZC5cIil9fSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KEMucHJvdG90eXBlLFwiX19hcmNMZW5ndGhEaXZpc2lvbnNcIix7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuQ3VydmU6IC5fX2FyY0xlbmd0aERpdmlzaW9ucyBpcyBub3cgLmFyY0xlbmd0aERpdmlzaW9ucy5cIik7cmV0dXJuIHRoaXMuYXJjTGVuZ3RoRGl2aXNpb25zfSxzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQ3VydmU6IC5fX2FyY0xlbmd0aERpdmlzaW9ucyBpcyBub3cgLmFyY0xlbmd0aERpdmlzaW9ucy5cIik7XG4gICAgdGhpcy5hcmNMZW5ndGhEaXZpc2lvbnM9YX19KTtiYS5wcm90b3R5cGUuc2V0TGVucz1mdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhLnNldExlbnMgaXMgZGVwcmVjYXRlZC4gVXNlIC5zZXRGb2NhbExlbmd0aCBhbmQgLmZpbG1HYXVnZSBmb3IgYSBwaG90b2dyYXBoaWMgc2V0dXAuXCIpO3ZvaWQgMCE9PWImJih0aGlzLmZpbG1HYXVnZT1iKTt0aGlzLnNldEZvY2FsTGVuZ3RoKGEpfTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhkYS5wcm90b3R5cGUse29ubHlTaGFkb3c6e3NldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkxpZ2h0OiAub25seVNoYWRvdyBoYXMgYmVlbiByZW1vdmVkLlwiKX19LHNoYWRvd0NhbWVyYUZvdjp7c2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkxpZ2h0OiAuc2hhZG93Q2FtZXJhRm92IGlzIG5vdyAuc2hhZG93LmNhbWVyYS5mb3YuXCIpO3RoaXMuc2hhZG93LmNhbWVyYS5mb3Y9YX19LFxuICAgIHNoYWRvd0NhbWVyYUxlZnQ6e3NldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYUxlZnQgaXMgbm93IC5zaGFkb3cuY2FtZXJhLmxlZnQuXCIpO3RoaXMuc2hhZG93LmNhbWVyYS5sZWZ0PWF9fSxzaGFkb3dDYW1lcmFSaWdodDp7c2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkxpZ2h0OiAuc2hhZG93Q2FtZXJhUmlnaHQgaXMgbm93IC5zaGFkb3cuY2FtZXJhLnJpZ2h0LlwiKTt0aGlzLnNoYWRvdy5jYW1lcmEucmlnaHQ9YX19LHNoYWRvd0NhbWVyYVRvcDp7c2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkxpZ2h0OiAuc2hhZG93Q2FtZXJhVG9wIGlzIG5vdyAuc2hhZG93LmNhbWVyYS50b3AuXCIpO3RoaXMuc2hhZG93LmNhbWVyYS50b3A9YX19LHNoYWRvd0NhbWVyYUJvdHRvbTp7c2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkxpZ2h0OiAuc2hhZG93Q2FtZXJhQm90dG9tIGlzIG5vdyAuc2hhZG93LmNhbWVyYS5ib3R0b20uXCIpO1xuICAgIHRoaXMuc2hhZG93LmNhbWVyYS5ib3R0b209YX19LHNoYWRvd0NhbWVyYU5lYXI6e3NldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYU5lYXIgaXMgbm93IC5zaGFkb3cuY2FtZXJhLm5lYXIuXCIpO3RoaXMuc2hhZG93LmNhbWVyYS5uZWFyPWF9fSxzaGFkb3dDYW1lcmFGYXI6e3NldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYUZhciBpcyBub3cgLnNoYWRvdy5jYW1lcmEuZmFyLlwiKTt0aGlzLnNoYWRvdy5jYW1lcmEuZmFyPWF9fSxzaGFkb3dDYW1lcmFWaXNpYmxlOntzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYVZpc2libGUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5DYW1lcmFIZWxwZXIoIGxpZ2h0LnNoYWRvdy5jYW1lcmEgKSBpbnN0ZWFkLlwiKX19LHNoYWRvd0JpYXM6e3NldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0JpYXMgaXMgbm93IC5zaGFkb3cuYmlhcy5cIik7XG4gICAgdGhpcy5zaGFkb3cuYmlhcz1hfX0sc2hhZG93RGFya25lc3M6e3NldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkxpZ2h0OiAuc2hhZG93RGFya25lc3MgaGFzIGJlZW4gcmVtb3ZlZC5cIil9fSxzaGFkb3dNYXBXaWR0aDp7c2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkxpZ2h0OiAuc2hhZG93TWFwV2lkdGggaXMgbm93IC5zaGFkb3cubWFwU2l6ZS53aWR0aC5cIik7dGhpcy5zaGFkb3cubWFwU2l6ZS53aWR0aD1hfX0sc2hhZG93TWFwSGVpZ2h0OntzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dNYXBIZWlnaHQgaXMgbm93IC5zaGFkb3cubWFwU2l6ZS5oZWlnaHQuXCIpO3RoaXMuc2hhZG93Lm1hcFNpemUuaGVpZ2h0PWF9fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKE0ucHJvdG90eXBlLHtsZW5ndGg6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckF0dHJpYnV0ZTogLmxlbmd0aCBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLmNvdW50IGluc3RlYWQuXCIpO1xuICAgIHJldHVybiB0aGlzLmFycmF5Lmxlbmd0aH19fSk7T2JqZWN0LmFzc2lnbihFLnByb3RvdHlwZSx7YWRkSW5kZXg6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5hZGRJbmRleCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLnNldEluZGV4KCkuXCIpO3RoaXMuc2V0SW5kZXgoYSl9LGFkZERyYXdDYWxsOmZ1bmN0aW9uKGEsYixjKXt2b2lkIDAhPT1jJiZjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmFkZERyYXdDYWxsKCkgbm8gbG9uZ2VyIHN1cHBvcnRzIGluZGV4T2Zmc2V0LlwiKTtjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmFkZERyYXdDYWxsKCkgaXMgbm93IC5hZGRHcm91cCgpLlwiKTt0aGlzLmFkZEdyb3VwKGEsYil9LGNsZWFyRHJhd0NhbGxzOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5jbGVhckRyYXdDYWxscygpIGlzIG5vdyAuY2xlYXJHcm91cHMoKS5cIik7XG4gICAgdGhpcy5jbGVhckdyb3VwcygpfSxjb21wdXRlVGFuZ2VudHM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmNvbXB1dGVUYW5nZW50cygpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxjb21wdXRlT2Zmc2V0czpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuY29tcHV0ZU9mZnNldHMoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX19KTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhFLnByb3RvdHlwZSx7ZHJhd2NhbGxzOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5kcmF3Y2FsbHMgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ3JvdXBzLlwiKTtyZXR1cm4gdGhpcy5ncm91cHN9fSxvZmZzZXRzOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLm9mZnNldHMgaGFzIGJlZW4gcmVuYW1lZCB0byAuZ3JvdXBzLlwiKTtyZXR1cm4gdGhpcy5ncm91cHN9fX0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFFkLnByb3RvdHlwZSx7ZHluYW1pYzp7c2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuVW5pZm9ybTogLmR5bmFtaWMgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG9iamVjdC5vbkJlZm9yZVJlbmRlcigpIGluc3RlYWQuXCIpfX0sb25VcGRhdGU6e3ZhbHVlOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuVW5pZm9ybTogLm9uVXBkYXRlKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG9iamVjdC5vbkJlZm9yZVJlbmRlcigpIGluc3RlYWQuXCIpO3JldHVybiB0aGlzfX19KTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhQLnByb3RvdHlwZSx7d3JhcEFyb3VuZDp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0ZXJpYWw6IC53cmFwQXJvdW5kIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRlcmlhbDogLndyYXBBcm91bmQgaGFzIGJlZW4gcmVtb3ZlZC5cIil9fSxcbiAgICB3cmFwUkdCOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRlcmlhbDogLndyYXBSR0IgaGFzIGJlZW4gcmVtb3ZlZC5cIik7cmV0dXJuIG5ldyBIfX0sc2hhZGluZzp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlwiK3RoaXMudHlwZStcIjogLnNoYWRpbmcgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIHRoZSBib29sZWFuIC5mbGF0U2hhZGluZyBpbnN0ZWFkLlwiKX0sc2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlwiK3RoaXMudHlwZStcIjogLnNoYWRpbmcgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIHRoZSBib29sZWFuIC5mbGF0U2hhZGluZyBpbnN0ZWFkLlwiKTt0aGlzLmZsYXRTaGFkaW5nPTE9PT1hfX19KTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhNYS5wcm90b3R5cGUse21ldGFsOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbDogLm1ldGFsIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCBpbnN0ZWFkLlwiKTtcbiAgICByZXR1cm4hMX0sc2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWVzaFBob25nTWF0ZXJpYWw6IC5tZXRhbCBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwgaW5zdGVhZFwiKX19fSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoRmEucHJvdG90eXBlLHtkZXJpdmF0aXZlczp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuU2hhZGVyTWF0ZXJpYWw6IC5kZXJpdmF0aXZlcyBoYXMgYmVlbiBtb3ZlZCB0byAuZXh0ZW5zaW9ucy5kZXJpdmF0aXZlcy5cIik7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5kZXJpdmF0aXZlc30sc2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLiBTaGFkZXJNYXRlcmlhbDogLmRlcml2YXRpdmVzIGhhcyBiZWVuIG1vdmVkIHRvIC5leHRlbnNpb25zLmRlcml2YXRpdmVzLlwiKTt0aGlzLmV4dGVuc2lvbnMuZGVyaXZhdGl2ZXM9YX19fSk7T2JqZWN0LmFzc2lnbihjZS5wcm90b3R5cGUsXG4gICAge2dldEN1cnJlbnRSZW5kZXJUYXJnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuZ2V0Q3VycmVudFJlbmRlclRhcmdldCgpIGlzIG5vdyAuZ2V0UmVuZGVyVGFyZ2V0KCkuXCIpO3JldHVybiB0aGlzLmdldFJlbmRlclRhcmdldCgpfSxnZXRNYXhBbmlzb3Ryb3B5OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLmdldE1heEFuaXNvdHJvcHkoKSBpcyBub3cgLmNhcGFiaWxpdGllcy5nZXRNYXhBbmlzb3Ryb3B5KCkuXCIpO3JldHVybiB0aGlzLmNhcGFiaWxpdGllcy5nZXRNYXhBbmlzb3Ryb3B5KCl9LGdldFByZWNpc2lvbjpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5nZXRQcmVjaXNpb24oKSBpcyBub3cgLmNhcGFiaWxpdGllcy5wcmVjaXNpb24uXCIpO3JldHVybiB0aGlzLmNhcGFiaWxpdGllcy5wcmVjaXNpb259LHJlc2V0R0xTdGF0ZTpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5yZXNldEdMU3RhdGUoKSBpcyBub3cgLnN0YXRlLnJlc2V0KCkuXCIpO1xuICAgIHJldHVybiB0aGlzLnN0YXRlLnJlc2V0KCl9LHN1cHBvcnRzRmxvYXRUZXh0dXJlczpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zdXBwb3J0c0Zsb2F0VGV4dHVyZXMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCAnT0VTX3RleHR1cmVfZmxvYXQnICkuXCIpO3JldHVybiB0aGlzLmV4dGVuc2lvbnMuZ2V0KFwiT0VTX3RleHR1cmVfZmxvYXRcIil9LHN1cHBvcnRzSGFsZkZsb2F0VGV4dHVyZXM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNIYWxmRmxvYXRUZXh0dXJlcygpIGlzIG5vdyAuZXh0ZW5zaW9ucy5nZXQoICdPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0JyApLlwiKTtyZXR1cm4gdGhpcy5leHRlbnNpb25zLmdldChcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRcIil9LHN1cHBvcnRzU3RhbmRhcmREZXJpdmF0aXZlczpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zdXBwb3J0c1N0YW5kYXJkRGVyaXZhdGl2ZXMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCAnT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzJyApLlwiKTtcbiAgICByZXR1cm4gdGhpcy5leHRlbnNpb25zLmdldChcIk9FU19zdGFuZGFyZF9kZXJpdmF0aXZlc1wiKX0sc3VwcG9ydHNDb21wcmVzc2VkVGV4dHVyZVMzVEM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNDb21wcmVzc2VkVGV4dHVyZVMzVEMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCAnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGMnICkuXCIpO3JldHVybiB0aGlzLmV4dGVuc2lvbnMuZ2V0KFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIil9LHN1cHBvcnRzQ29tcHJlc3NlZFRleHR1cmVQVlJUQzpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zdXBwb3J0c0NvbXByZXNzZWRUZXh0dXJlUFZSVEMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCAnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjJyApLlwiKTtyZXR1cm4gdGhpcy5leHRlbnNpb25zLmdldChcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0Y1wiKX0sXG4gICAgc3VwcG9ydHNCbGVuZE1pbk1heDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zdXBwb3J0c0JsZW5kTWluTWF4KCkgaXMgbm93IC5leHRlbnNpb25zLmdldCggJ0VYVF9ibGVuZF9taW5tYXgnICkuXCIpO3JldHVybiB0aGlzLmV4dGVuc2lvbnMuZ2V0KFwiRVhUX2JsZW5kX21pbm1heFwiKX0sc3VwcG9ydHNWZXJ0ZXhUZXh0dXJlczpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zdXBwb3J0c1ZlcnRleFRleHR1cmVzKCkgaXMgbm93IC5jYXBhYmlsaXRpZXMudmVydGV4VGV4dHVyZXMuXCIpO3JldHVybiB0aGlzLmNhcGFiaWxpdGllcy52ZXJ0ZXhUZXh0dXJlc30sc3VwcG9ydHNJbnN0YW5jZWRBcnJheXM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNJbnN0YW5jZWRBcnJheXMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCAnQU5HTEVfaW5zdGFuY2VkX2FycmF5cycgKS5cIik7XG4gICAgcmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5nZXQoXCJBTkdMRV9pbnN0YW5jZWRfYXJyYXlzXCIpfSxlbmFibGVTY2lzc29yVGVzdDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuZW5hYmxlU2Npc3NvclRlc3QoKSBpcyBub3cgLnNldFNjaXNzb3JUZXN0KCkuXCIpO3RoaXMuc2V0U2Npc3NvclRlc3QoYSl9LGluaXRNYXRlcmlhbDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5pbml0TWF0ZXJpYWwoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sYWRkUHJlUGx1Z2luOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLmFkZFByZVBsdWdpbigpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxhZGRQb3N0UGx1Z2luOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLmFkZFBvc3RQbHVnaW4oKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sdXBkYXRlU2hhZG93TWFwOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnVwZGF0ZVNoYWRvd01hcCgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfX0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGNlLnByb3RvdHlwZSx7c2hhZG93TWFwRW5hYmxlZDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2hhZG93TWFwLmVuYWJsZWR9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc2hhZG93TWFwRW5hYmxlZCBpcyBub3cgLnNoYWRvd01hcC5lbmFibGVkLlwiKTt0aGlzLnNoYWRvd01hcC5lbmFibGVkPWF9fSxzaGFkb3dNYXBUeXBlOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaGFkb3dNYXAudHlwZX0sc2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zaGFkb3dNYXBUeXBlIGlzIG5vdyAuc2hhZG93TWFwLnR5cGUuXCIpO3RoaXMuc2hhZG93TWFwLnR5cGU9YX19LHNoYWRvd01hcEN1bGxGYWNlOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaGFkb3dNYXAuY3VsbEZhY2V9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc2hhZG93TWFwQ3VsbEZhY2UgaXMgbm93IC5zaGFkb3dNYXAuY3VsbEZhY2UuXCIpO1xuICAgIHRoaXMuc2hhZG93TWFwLmN1bGxGYWNlPWF9fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFVlLnByb3RvdHlwZSx7Y3VsbEZhY2U6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlbmRlclJldmVyc2VTaWRlZD8yOjF9LHNldDpmdW5jdGlvbihhKXthPTEhPT1hO2NvbnNvbGUud2FybihcIldlYkdMUmVuZGVyZXI6IC5zaGFkb3dNYXAuY3VsbEZhY2UgaXMgZGVwcmVjYXRlZC4gU2V0IC5zaGFkb3dNYXAucmVuZGVyUmV2ZXJzZVNpZGVkIHRvIFwiK2ErXCIuXCIpO3RoaXMucmVuZGVyUmV2ZXJzZVNpZGVkPWF9fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGtiLnByb3RvdHlwZSx7d3JhcFM6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAud3JhcFMgaXMgbm93IC50ZXh0dXJlLndyYXBTLlwiKTtyZXR1cm4gdGhpcy50ZXh0dXJlLndyYXBTfSxzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC53cmFwUyBpcyBub3cgLnRleHR1cmUud3JhcFMuXCIpO1xuICAgIHRoaXMudGV4dHVyZS53cmFwUz1hfX0sd3JhcFQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAud3JhcFQgaXMgbm93IC50ZXh0dXJlLndyYXBULlwiKTtyZXR1cm4gdGhpcy50ZXh0dXJlLndyYXBUfSxzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC53cmFwVCBpcyBub3cgLnRleHR1cmUud3JhcFQuXCIpO3RoaXMudGV4dHVyZS53cmFwVD1hfX0sbWFnRmlsdGVyOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLm1hZ0ZpbHRlciBpcyBub3cgLnRleHR1cmUubWFnRmlsdGVyLlwiKTtyZXR1cm4gdGhpcy50ZXh0dXJlLm1hZ0ZpbHRlcn0sc2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAubWFnRmlsdGVyIGlzIG5vdyAudGV4dHVyZS5tYWdGaWx0ZXIuXCIpO3RoaXMudGV4dHVyZS5tYWdGaWx0ZXI9XG4gICAgYX19LG1pbkZpbHRlcjp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5taW5GaWx0ZXIgaXMgbm93IC50ZXh0dXJlLm1pbkZpbHRlci5cIik7cmV0dXJuIHRoaXMudGV4dHVyZS5taW5GaWx0ZXJ9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLm1pbkZpbHRlciBpcyBub3cgLnRleHR1cmUubWluRmlsdGVyLlwiKTt0aGlzLnRleHR1cmUubWluRmlsdGVyPWF9fSxhbmlzb3Ryb3B5OntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLmFuaXNvdHJvcHkgaXMgbm93IC50ZXh0dXJlLmFuaXNvdHJvcHkuXCIpO3JldHVybiB0aGlzLnRleHR1cmUuYW5pc290cm9weX0sc2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAuYW5pc290cm9weSBpcyBub3cgLnRleHR1cmUuYW5pc290cm9weS5cIik7dGhpcy50ZXh0dXJlLmFuaXNvdHJvcHk9XG4gICAgYX19LG9mZnNldDp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5vZmZzZXQgaXMgbm93IC50ZXh0dXJlLm9mZnNldC5cIik7cmV0dXJuIHRoaXMudGV4dHVyZS5vZmZzZXR9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLm9mZnNldCBpcyBub3cgLnRleHR1cmUub2Zmc2V0LlwiKTt0aGlzLnRleHR1cmUub2Zmc2V0PWF9fSxyZXBlYXQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAucmVwZWF0IGlzIG5vdyAudGV4dHVyZS5yZXBlYXQuXCIpO3JldHVybiB0aGlzLnRleHR1cmUucmVwZWF0fSxzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5yZXBlYXQgaXMgbm93IC50ZXh0dXJlLnJlcGVhdC5cIik7dGhpcy50ZXh0dXJlLnJlcGVhdD1hfX0sZm9ybWF0OntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLmZvcm1hdCBpcyBub3cgLnRleHR1cmUuZm9ybWF0LlwiKTtcbiAgICByZXR1cm4gdGhpcy50ZXh0dXJlLmZvcm1hdH0sc2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAuZm9ybWF0IGlzIG5vdyAudGV4dHVyZS5mb3JtYXQuXCIpO3RoaXMudGV4dHVyZS5mb3JtYXQ9YX19LHR5cGU6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAudHlwZSBpcyBub3cgLnRleHR1cmUudHlwZS5cIik7cmV0dXJuIHRoaXMudGV4dHVyZS50eXBlfSxzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC50eXBlIGlzIG5vdyAudGV4dHVyZS50eXBlLlwiKTt0aGlzLnRleHR1cmUudHlwZT1hfX0sZ2VuZXJhdGVNaXBtYXBzOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLmdlbmVyYXRlTWlwbWFwcyBpcyBub3cgLnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzLlwiKTtyZXR1cm4gdGhpcy50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwc30sXG4gICAgc2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAuZ2VuZXJhdGVNaXBtYXBzIGlzIG5vdyAudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHMuXCIpO3RoaXMudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHM9YX19fSk7T2JqZWN0LmFzc2lnbihiZS5wcm90b3R5cGUse2dldFN0YW5kaW5nTWF0cml4OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViVlJNYW5hZ2VyOiAuZ2V0U3RhbmRpbmdNYXRyaXgoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX19KTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhiZS5wcm90b3R5cGUse3N0YW5kaW5nOntzZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJWUk1hbmFnZXI6IC5zdGFuZGluZyBoYXMgYmVlbiByZW1vdmVkLlwiKX19fSk7bGMucHJvdG90eXBlLmxvYWQ9ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW86IC5sb2FkIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSBUSFJFRS5BdWRpb0xvYWRlciBpbnN0ZWFkLlwiKTtcbiAgICB2YXIgYj10aGlzOyhuZXcgcWUpLmxvYWQoYSxmdW5jdGlvbihhKXtiLnNldEJ1ZmZlcihhKX0pO3JldHVybiB0aGlzfTt1ZS5wcm90b3R5cGUuZ2V0RGF0YT1mdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkF1ZGlvQW5hbHlzZXI6IC5nZXREYXRhKCkgaXMgbm93IC5nZXRGcmVxdWVuY3lEYXRhKCkuXCIpO3JldHVybiB0aGlzLmdldEZyZXF1ZW5jeURhdGEoKX07ZmQucHJvdG90eXBlLnVwZGF0ZUN1YmVNYXA9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5DdWJlQ2FtZXJhOiAudXBkYXRlQ3ViZU1hcCgpIGlzIG5vdyAudXBkYXRlKCkuXCIpO3JldHVybiB0aGlzLnVwZGF0ZShhLGIpfTtsLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZT1KYjtsLldlYkdMUmVuZGVyVGFyZ2V0PWtiO2wuV2ViR0xSZW5kZXJlcj1jZTtsLlNoYWRlckxpYj10YjtsLlVuaWZvcm1zTGliPUs7bC5Vbmlmb3Jtc1V0aWxzPUdhO2wuU2hhZGVyQ2h1bms9UjtsLkZvZ0V4cDI9UGI7bC5Gb2c9UWI7XG4gICAgbC5TY2VuZT12ZDtsLkxlbnNGbGFyZT1kZTtsLlNwcml0ZT1DYztsLkxPRD1EYztsLlNraW5uZWRNZXNoPXhkO2wuU2tlbGV0b249RWM7bC5Cb25lPXdkO2wuTWVzaD1yYTtsLkxpbmVTZWdtZW50cz1YO2wuTGluZUxvb3A9eWQ7bC5MaW5lPXNhO2wuUG9pbnRzPVJiO2wuR3JvdXA9RmM7bC5WaWRlb1RleHR1cmU9ZWU7bC5EYXRhVGV4dHVyZT1sYjtsLkNvbXByZXNzZWRUZXh0dXJlPVNiO2wuQ3ViZVRleHR1cmU9ZGI7bC5DYW52YXNUZXh0dXJlPXRjO2wuRGVwdGhUZXh0dXJlPUdjO2wuVGV4dHVyZT1VO2wuQ29tcHJlc3NlZFRleHR1cmVMb2FkZXI9Z2Y7bC5EYXRhVGV4dHVyZUxvYWRlcj1pZTtsLkN1YmVUZXh0dXJlTG9hZGVyPWplO2wuVGV4dHVyZUxvYWRlcj1BZDtsLk9iamVjdExvYWRlcj1qZjtsLk1hdGVyaWFsTG9hZGVyPVBkO2wuQnVmZmVyR2VvbWV0cnlMb2FkZXI9bGU7bC5EZWZhdWx0TG9hZGluZ01hbmFnZXI9eGE7bC5Mb2FkaW5nTWFuYWdlcj1oZTtsLkpTT05Mb2FkZXI9XG4gICAgbWU7bC5JbWFnZUxvYWRlcj1hZDtsLkltYWdlQml0bWFwTG9hZGVyPW5lO2wuRm9udExvYWRlcj1rZjtsLkZpbGVMb2FkZXI9TmE7bC5Mb2FkZXI9a2M7bC5Mb2FkZXJVdGlscz1IZTtsLkNhY2hlPUliO2wuQXVkaW9Mb2FkZXI9cWU7bC5TcG90TGlnaHRTaGFkb3c9Q2Q7bC5TcG90TGlnaHQ9RGQ7bC5Qb2ludExpZ2h0PUVkO2wuUmVjdEFyZWFMaWdodD1JZDtsLkhlbWlzcGhlcmVMaWdodD1CZDtsLkRpcmVjdGlvbmFsTGlnaHRTaGFkb3c9RmQ7bC5EaXJlY3Rpb25hbExpZ2h0PUdkO2wuQW1iaWVudExpZ2h0PUhkO2wuTGlnaHRTaGFkb3c9RmI7bC5MaWdodD1kYTtsLlN0ZXJlb0NhbWVyYT1sZjtsLlBlcnNwZWN0aXZlQ2FtZXJhPWJhO2wuT3J0aG9ncmFwaGljQ2FtZXJhPUxiO2wuQ3ViZUNhbWVyYT1mZDtsLkFycmF5Q2FtZXJhPXVkO2wuQ2FtZXJhPVRhO2wuQXVkaW9MaXN0ZW5lcj1yZTtsLlBvc2l0aW9uYWxBdWRpbz10ZTtsLkF1ZGlvQ29udGV4dD1zZTtsLkF1ZGlvQW5hbHlzZXI9XG4gICAgdWU7bC5BdWRpbz1sYztsLlZlY3RvcktleWZyYW1lVHJhY2s9amM7bC5TdHJpbmdLZXlmcmFtZVRyYWNrPUpkO2wuUXVhdGVybmlvbktleWZyYW1lVHJhY2s9ZGQ7bC5OdW1iZXJLZXlmcmFtZVRyYWNrPWljO2wuQ29sb3JLZXlmcmFtZVRyYWNrPU1kO2wuQm9vbGVhbktleWZyYW1lVHJhY2s9S2Q7bC5Qcm9wZXJ0eU1peGVyPXZlO2wuUHJvcGVydHlCaW5kaW5nPXFhO2wuS2V5ZnJhbWVUcmFjaz1UO2wuQW5pbWF0aW9uVXRpbHM9Z2E7bC5BbmltYXRpb25PYmplY3RHcm91cD1uZjtsLkFuaW1hdGlvbk1peGVyPXdlO2wuQW5pbWF0aW9uQ2xpcD1DYTtsLlVuaWZvcm09UWQ7bC5JbnN0YW5jZWRCdWZmZXJHZW9tZXRyeT14ZTtsLkJ1ZmZlckdlb21ldHJ5PUU7bC5HZW9tZXRyeT1MO2wuSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGU9eWU7bC5JbnN0YW5jZWRJbnRlcmxlYXZlZEJ1ZmZlcj16ZTtsLkludGVybGVhdmVkQnVmZmVyPW1jO2wuSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlPUFlO1xuICAgIGwuRmFjZTM9WWE7bC5PYmplY3QzRD14O2wuUmF5Y2FzdGVyPXBmO2wuTGF5ZXJzPVdkO2wuRXZlbnREaXNwYXRjaGVyPXphO2wuQ2xvY2s9cmY7bC5RdWF0ZXJuaW9uTGluZWFySW50ZXJwb2xhbnQ9TGQ7bC5MaW5lYXJJbnRlcnBvbGFudD1lZDtsLkRpc2NyZXRlSW50ZXJwb2xhbnQ9T2Q7bC5DdWJpY0ludGVycG9sYW50PU5kO2wuSW50ZXJwb2xhbnQ9cGE7bC5UcmlhbmdsZT1aYTtsLk1hdGg9UTtsLlNwaGVyaWNhbD1zZjtsLkN5bGluZHJpY2FsPXRmO2wuUGxhbmU9RWE7bC5GcnVzdHVtPXJkO2wuU3BoZXJlPUlhO2wuUmF5PXNiO2wuTWF0cml4ND1PO2wuTWF0cml4Mz1tYTtsLkJveDM9WGE7bC5Cb3gyPW9kO2wuTGluZTM9TmI7bC5FdWxlcj1nYjtsLlZlY3RvcjQ9YWE7bC5WZWN0b3IzPXA7bC5WZWN0b3IyPUQ7bC5RdWF0ZXJuaW9uPWhhO2wuQ29sb3I9SDtsLkltbWVkaWF0ZVJlbmRlck9iamVjdD1nZDtsLlZlcnRleE5vcm1hbHNIZWxwZXI9aGQ7bC5TcG90TGlnaHRIZWxwZXI9XG4gICAgbmM7bC5Ta2VsZXRvbkhlbHBlcj1vYztsLlBvaW50TGlnaHRIZWxwZXI9cGM7bC5SZWN0QXJlYUxpZ2h0SGVscGVyPXFjO2wuSGVtaXNwaGVyZUxpZ2h0SGVscGVyPXJjO2wuR3JpZEhlbHBlcj1pZDtsLlBvbGFyR3JpZEhlbHBlcj1SZDtsLkZhY2VOb3JtYWxzSGVscGVyPWpkO2wuRGlyZWN0aW9uYWxMaWdodEhlbHBlcj1zYztsLkNhbWVyYUhlbHBlcj1rZDtsLkJveEhlbHBlcj1HYjtsLkJveDNIZWxwZXI9bGQ7bC5QbGFuZUhlbHBlcj1tZDtsLkFycm93SGVscGVyPUhiO2wuQXhlc0hlbHBlcj1uZDtsLlNoYXBlPWpiO2wuUGF0aD1TYTtsLlNoYXBlUGF0aD1vZTtsLkZvbnQ9cGU7bC5DdXJ2ZVBhdGg9YmI7bC5DdXJ2ZT1DO2wuU2hhcGVVdGlscz0kYTtsLlNjZW5lVXRpbHM9e2NyZWF0ZU11bHRpTWF0ZXJpYWxPYmplY3Q6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9bmV3IEZjLGQ9MCxlPWIubGVuZ3RoO2Q8ZTtkKyspYy5hZGQobmV3IHJhKGEsYltkXSkpO3JldHVybiBjfSxkZXRhY2g6ZnVuY3Rpb24oYSxcbiAgICBiLGMpe2EuYXBwbHlNYXRyaXgoYi5tYXRyaXhXb3JsZCk7Yi5yZW1vdmUoYSk7Yy5hZGQoYSl9LGF0dGFjaDpmdW5jdGlvbihhLGIsYyl7YS5hcHBseU1hdHJpeCgobmV3IE8pLmdldEludmVyc2UoYy5tYXRyaXhXb3JsZCkpO2IucmVtb3ZlKGEpO2MuYWRkKGEpfX07bC5XZWJHTFV0aWxzPWFmO2wuV2lyZWZyYW1lR2VvbWV0cnk9VGI7bC5QYXJhbWV0cmljR2VvbWV0cnk9SGM7bC5QYXJhbWV0cmljQnVmZmVyR2VvbWV0cnk9VWI7bC5UZXRyYWhlZHJvbkdlb21ldHJ5PUpjO2wuVGV0cmFoZWRyb25CdWZmZXJHZW9tZXRyeT1WYjtsLk9jdGFoZWRyb25HZW9tZXRyeT1LYztsLk9jdGFoZWRyb25CdWZmZXJHZW9tZXRyeT11YjtsLkljb3NhaGVkcm9uR2VvbWV0cnk9TGM7bC5JY29zYWhlZHJvbkJ1ZmZlckdlb21ldHJ5PVdiO2wuRG9kZWNhaGVkcm9uR2VvbWV0cnk9TWM7bC5Eb2RlY2FoZWRyb25CdWZmZXJHZW9tZXRyeT1YYjtsLlBvbHloZWRyb25HZW9tZXRyeT1JYztsLlBvbHloZWRyb25CdWZmZXJHZW9tZXRyeT1cbiAgICBqYTtsLlR1YmVHZW9tZXRyeT1OYztsLlR1YmVCdWZmZXJHZW9tZXRyeT1ZYjtsLlRvcnVzS25vdEdlb21ldHJ5PU9jO2wuVG9ydXNLbm90QnVmZmVyR2VvbWV0cnk9WmI7bC5Ub3J1c0dlb21ldHJ5PVBjO2wuVG9ydXNCdWZmZXJHZW9tZXRyeT0kYjtsLlRleHRHZW9tZXRyeT1VYztsLlRleHRCdWZmZXJHZW9tZXRyeT1hYztsLlNwaGVyZUdlb21ldHJ5PVZjO2wuU3BoZXJlQnVmZmVyR2VvbWV0cnk9d2I7bC5SaW5nR2VvbWV0cnk9V2M7bC5SaW5nQnVmZmVyR2VvbWV0cnk9YmM7bC5QbGFuZUdlb21ldHJ5PUFjO2wuUGxhbmVCdWZmZXJHZW9tZXRyeT1yYjtsLkxhdGhlR2VvbWV0cnk9WGM7bC5MYXRoZUJ1ZmZlckdlb21ldHJ5PWNjO2wuU2hhcGVHZW9tZXRyeT14YjtsLlNoYXBlQnVmZmVyR2VvbWV0cnk9eWI7bC5FeHRydWRlR2VvbWV0cnk9aWI7bC5FeHRydWRlQnVmZmVyR2VvbWV0cnk9TGE7bC5FZGdlc0dlb21ldHJ5PWRjO2wuQ29uZUdlb21ldHJ5PVljO2wuQ29uZUJ1ZmZlckdlb21ldHJ5PVxuICAgIFpjO2wuQ3lsaW5kZXJHZW9tZXRyeT16YjtsLkN5bGluZGVyQnVmZmVyR2VvbWV0cnk9YWI7bC5DaXJjbGVHZW9tZXRyeT0kYztsLkNpcmNsZUJ1ZmZlckdlb21ldHJ5PWVjO2wuQm94R2VvbWV0cnk9TWI7bC5Cb3hCdWZmZXJHZW9tZXRyeT1xYjtsLlNoYWRvd01hdGVyaWFsPWZjO2wuU3ByaXRlTWF0ZXJpYWw9aGI7bC5SYXdTaGFkZXJNYXRlcmlhbD1nYztsLlNoYWRlck1hdGVyaWFsPUZhO2wuUG9pbnRzTWF0ZXJpYWw9S2E7bC5NZXNoUGh5c2ljYWxNYXRlcmlhbD1BYjtsLk1lc2hTdGFuZGFyZE1hdGVyaWFsPVVhO2wuTWVzaFBob25nTWF0ZXJpYWw9TWE7bC5NZXNoVG9vbk1hdGVyaWFsPUJiO2wuTWVzaE5vcm1hbE1hdGVyaWFsPUNiO2wuTWVzaExhbWJlcnRNYXRlcmlhbD1EYjtsLk1lc2hEZXB0aE1hdGVyaWFsPWViO2wuTWVzaERpc3RhbmNlTWF0ZXJpYWw9ZmI7bC5NZXNoQmFzaWNNYXRlcmlhbD1BYTtsLkxpbmVEYXNoZWRNYXRlcmlhbD1FYjtsLkxpbmVCYXNpY01hdGVyaWFsPVxuICAgIFc7bC5NYXRlcmlhbD1QO2wuRmxvYXQ2NEJ1ZmZlckF0dHJpYnV0ZT16YztsLkZsb2F0MzJCdWZmZXJBdHRyaWJ1dGU9QjtsLlVpbnQzMkJ1ZmZlckF0dHJpYnV0ZT1wYjtsLkludDMyQnVmZmVyQXR0cmlidXRlPXljO2wuVWludDE2QnVmZmVyQXR0cmlidXRlPW9iO2wuSW50MTZCdWZmZXJBdHRyaWJ1dGU9eGM7bC5VaW50OENsYW1wZWRCdWZmZXJBdHRyaWJ1dGU9d2M7bC5VaW50OEJ1ZmZlckF0dHJpYnV0ZT12YztsLkludDhCdWZmZXJBdHRyaWJ1dGU9dWM7bC5CdWZmZXJBdHRyaWJ1dGU9TTtsLkFyY0N1cnZlPWhjO2wuQ2F0bXVsbFJvbUN1cnZlMz1jYTtsLkN1YmljQmV6aWVyQ3VydmU9T2E7bC5DdWJpY0JlemllckN1cnZlMz1WYTtsLkVsbGlwc2VDdXJ2ZT1CYTtsLkxpbmVDdXJ2ZT15YTtsLkxpbmVDdXJ2ZTM9UGE7bC5RdWFkcmF0aWNCZXppZXJDdXJ2ZT1RYTtsLlF1YWRyYXRpY0JlemllckN1cnZlMz1XYTtsLlNwbGluZUN1cnZlPVJhO2wuUkVWSVNJT049XCI4OVwiO2wuTU9VU0U9XG4gICAge0xFRlQ6MCxNSURETEU6MSxSSUdIVDoyfTtsLkN1bGxGYWNlTm9uZT0wO2wuQ3VsbEZhY2VCYWNrPTE7bC5DdWxsRmFjZUZyb250PTI7bC5DdWxsRmFjZUZyb250QmFjaz0zO2wuRnJvbnRGYWNlRGlyZWN0aW9uQ1c9MDtsLkZyb250RmFjZURpcmVjdGlvbkNDVz0xO2wuQmFzaWNTaGFkb3dNYXA9MDtsLlBDRlNoYWRvd01hcD0xO2wuUENGU29mdFNoYWRvd01hcD0yO2wuRnJvbnRTaWRlPTA7bC5CYWNrU2lkZT0xO2wuRG91YmxlU2lkZT0yO2wuRmxhdFNoYWRpbmc9MTtsLlNtb290aFNoYWRpbmc9MjtsLk5vQ29sb3JzPTA7bC5GYWNlQ29sb3JzPTE7bC5WZXJ0ZXhDb2xvcnM9MjtsLk5vQmxlbmRpbmc9MDtsLk5vcm1hbEJsZW5kaW5nPTE7bC5BZGRpdGl2ZUJsZW5kaW5nPTI7bC5TdWJ0cmFjdGl2ZUJsZW5kaW5nPTM7bC5NdWx0aXBseUJsZW5kaW5nPTQ7bC5DdXN0b21CbGVuZGluZz01O2wuQWRkRXF1YXRpb249MTAwO2wuU3VidHJhY3RFcXVhdGlvbj0xMDE7bC5SZXZlcnNlU3VidHJhY3RFcXVhdGlvbj1cbiAgICAxMDI7bC5NaW5FcXVhdGlvbj0xMDM7bC5NYXhFcXVhdGlvbj0xMDQ7bC5aZXJvRmFjdG9yPTIwMDtsLk9uZUZhY3Rvcj0yMDE7bC5TcmNDb2xvckZhY3Rvcj0yMDI7bC5PbmVNaW51c1NyY0NvbG9yRmFjdG9yPTIwMztsLlNyY0FscGhhRmFjdG9yPTIwNDtsLk9uZU1pbnVzU3JjQWxwaGFGYWN0b3I9MjA1O2wuRHN0QWxwaGFGYWN0b3I9MjA2O2wuT25lTWludXNEc3RBbHBoYUZhY3Rvcj0yMDc7bC5Ec3RDb2xvckZhY3Rvcj0yMDg7bC5PbmVNaW51c0RzdENvbG9yRmFjdG9yPTIwOTtsLlNyY0FscGhhU2F0dXJhdGVGYWN0b3I9MjEwO2wuTmV2ZXJEZXB0aD0wO2wuQWx3YXlzRGVwdGg9MTtsLkxlc3NEZXB0aD0yO2wuTGVzc0VxdWFsRGVwdGg9MztsLkVxdWFsRGVwdGg9NDtsLkdyZWF0ZXJFcXVhbERlcHRoPTU7bC5HcmVhdGVyRGVwdGg9NjtsLk5vdEVxdWFsRGVwdGg9NztsLk11bHRpcGx5T3BlcmF0aW9uPTA7bC5NaXhPcGVyYXRpb249MTtsLkFkZE9wZXJhdGlvbj0yO2wuTm9Ub25lTWFwcGluZz1cbiAgICAwO2wuTGluZWFyVG9uZU1hcHBpbmc9MTtsLlJlaW5oYXJkVG9uZU1hcHBpbmc9MjtsLlVuY2hhcnRlZDJUb25lTWFwcGluZz0zO2wuQ2luZW9uVG9uZU1hcHBpbmc9NDtsLlVWTWFwcGluZz0zMDA7bC5DdWJlUmVmbGVjdGlvbk1hcHBpbmc9MzAxO2wuQ3ViZVJlZnJhY3Rpb25NYXBwaW5nPTMwMjtsLkVxdWlyZWN0YW5ndWxhclJlZmxlY3Rpb25NYXBwaW5nPTMwMztsLkVxdWlyZWN0YW5ndWxhclJlZnJhY3Rpb25NYXBwaW5nPTMwNDtsLlNwaGVyaWNhbFJlZmxlY3Rpb25NYXBwaW5nPTMwNTtsLkN1YmVVVlJlZmxlY3Rpb25NYXBwaW5nPTMwNjtsLkN1YmVVVlJlZnJhY3Rpb25NYXBwaW5nPTMwNztsLlJlcGVhdFdyYXBwaW5nPTFFMztsLkNsYW1wVG9FZGdlV3JhcHBpbmc9MTAwMTtsLk1pcnJvcmVkUmVwZWF0V3JhcHBpbmc9MTAwMjtsLk5lYXJlc3RGaWx0ZXI9MTAwMztsLk5lYXJlc3RNaXBNYXBOZWFyZXN0RmlsdGVyPTEwMDQ7bC5OZWFyZXN0TWlwTWFwTGluZWFyRmlsdGVyPTEwMDU7XG4gICAgbC5MaW5lYXJGaWx0ZXI9MTAwNjtsLkxpbmVhck1pcE1hcE5lYXJlc3RGaWx0ZXI9MTAwNztsLkxpbmVhck1pcE1hcExpbmVhckZpbHRlcj0xMDA4O2wuVW5zaWduZWRCeXRlVHlwZT0xMDA5O2wuQnl0ZVR5cGU9MTAxMDtsLlNob3J0VHlwZT0xMDExO2wuVW5zaWduZWRTaG9ydFR5cGU9MTAxMjtsLkludFR5cGU9MTAxMztsLlVuc2lnbmVkSW50VHlwZT0xMDE0O2wuRmxvYXRUeXBlPTEwMTU7bC5IYWxmRmxvYXRUeXBlPTEwMTY7bC5VbnNpZ25lZFNob3J0NDQ0NFR5cGU9MTAxNztsLlVuc2lnbmVkU2hvcnQ1NTUxVHlwZT0xMDE4O2wuVW5zaWduZWRTaG9ydDU2NVR5cGU9MTAxOTtsLlVuc2lnbmVkSW50MjQ4VHlwZT0xMDIwO2wuQWxwaGFGb3JtYXQ9MTAyMTtsLlJHQkZvcm1hdD0xMDIyO2wuUkdCQUZvcm1hdD0xMDIzO2wuTHVtaW5hbmNlRm9ybWF0PTEwMjQ7bC5MdW1pbmFuY2VBbHBoYUZvcm1hdD0xMDI1O2wuUkdCRUZvcm1hdD0xMDIzO2wuRGVwdGhGb3JtYXQ9MTAyNjtsLkRlcHRoU3RlbmNpbEZvcm1hdD1cbiAgICAxMDI3O2wuUkdCX1MzVENfRFhUMV9Gb3JtYXQ9MjAwMTtsLlJHQkFfUzNUQ19EWFQxX0Zvcm1hdD0yMDAyO2wuUkdCQV9TM1RDX0RYVDNfRm9ybWF0PTIwMDM7bC5SR0JBX1MzVENfRFhUNV9Gb3JtYXQ9MjAwNDtsLlJHQl9QVlJUQ180QlBQVjFfRm9ybWF0PTIxMDA7bC5SR0JfUFZSVENfMkJQUFYxX0Zvcm1hdD0yMTAxO2wuUkdCQV9QVlJUQ180QlBQVjFfRm9ybWF0PTIxMDI7bC5SR0JBX1BWUlRDXzJCUFBWMV9Gb3JtYXQ9MjEwMztsLlJHQl9FVEMxX0Zvcm1hdD0yMTUxO2wuTG9vcE9uY2U9MjIwMDtsLkxvb3BSZXBlYXQ9MjIwMTtsLkxvb3BQaW5nUG9uZz0yMjAyO2wuSW50ZXJwb2xhdGVEaXNjcmV0ZT0yMzAwO2wuSW50ZXJwb2xhdGVMaW5lYXI9MjMwMTtsLkludGVycG9sYXRlU21vb3RoPTIzMDI7bC5aZXJvQ3VydmF0dXJlRW5kaW5nPTI0MDA7bC5aZXJvU2xvcGVFbmRpbmc9MjQwMTtsLldyYXBBcm91bmRFbmRpbmc9MjQwMjtsLlRyaWFuZ2xlc0RyYXdNb2RlPTA7bC5UcmlhbmdsZVN0cmlwRHJhd01vZGU9XG4gICAgMTtsLlRyaWFuZ2xlRmFuRHJhd01vZGU9MjtsLkxpbmVhckVuY29kaW5nPTNFMztsLnNSR0JFbmNvZGluZz0zMDAxO2wuR2FtbWFFbmNvZGluZz0zMDA3O2wuUkdCRUVuY29kaW5nPTMwMDI7bC5Mb2dMdXZFbmNvZGluZz0zMDAzO2wuUkdCTTdFbmNvZGluZz0zMDA0O2wuUkdCTTE2RW5jb2Rpbmc9MzAwNTtsLlJHQkRFbmNvZGluZz0zMDA2O2wuQmFzaWNEZXB0aFBhY2tpbmc9MzIwMDtsLlJHQkFEZXB0aFBhY2tpbmc9MzIwMTtsLkN1YmVHZW9tZXRyeT1NYjtsLkZhY2U0PWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe2NvbnNvbGUud2FybihcIlRIUkVFLkZhY2U0IGhhcyBiZWVuIHJlbW92ZWQuIEEgVEhSRUUuRmFjZTMgd2lsbCBiZSBjcmVhdGVkIGluc3RlYWQuXCIpO3JldHVybiBuZXcgWWEoYSxiLGMsZSxmLGcpfTtsLkxpbmVTdHJpcD0wO2wuTGluZVBpZWNlcz0xO2wuTWVzaEZhY2VNYXRlcmlhbD1mdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NZXNoRmFjZU1hdGVyaWFsIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBhbiBBcnJheSBpbnN0ZWFkLlwiKTtcbiAgICByZXR1cm4gYX07bC5NdWx0aU1hdGVyaWFsPWZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEmJihhPVtdKTtjb25zb2xlLndhcm4oXCJUSFJFRS5NdWx0aU1hdGVyaWFsIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBhbiBBcnJheSBpbnN0ZWFkLlwiKTthLmlzTXVsdGlNYXRlcmlhbD0hMDthLm1hdGVyaWFscz1hO2EuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gYS5zbGljZSgpfTtyZXR1cm4gYX07bC5Qb2ludENsb3VkPWZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuUG9pbnRDbG91ZCBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLlBvaW50cy5cIik7cmV0dXJuIG5ldyBSYihhLGIpfTtsLlBhcnRpY2xlPWZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlBhcnRpY2xlIGhhcyBiZWVuIHJlbmFtZWQgdG8gVEhSRUUuU3ByaXRlLlwiKTtyZXR1cm4gbmV3IENjKGEpfTtsLlBhcnRpY2xlU3lzdGVtPWZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuUGFydGljbGVTeXN0ZW0gaGFzIGJlZW4gcmVuYW1lZCB0byBUSFJFRS5Qb2ludHMuXCIpO1xuICAgIHJldHVybiBuZXcgUmIoYSxiKX07bC5Qb2ludENsb3VkTWF0ZXJpYWw9ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuUG9pbnRDbG91ZE1hdGVyaWFsIGhhcyBiZWVuIHJlbmFtZWQgdG8gVEhSRUUuUG9pbnRzTWF0ZXJpYWwuXCIpO3JldHVybiBuZXcgS2EoYSl9O2wuUGFydGljbGVCYXNpY01hdGVyaWFsPWZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlBhcnRpY2xlQmFzaWNNYXRlcmlhbCBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLlBvaW50c01hdGVyaWFsLlwiKTtyZXR1cm4gbmV3IEthKGEpfTtsLlBhcnRpY2xlU3lzdGVtTWF0ZXJpYWw9ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuUGFydGljbGVTeXN0ZW1NYXRlcmlhbCBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLlBvaW50c01hdGVyaWFsLlwiKTtyZXR1cm4gbmV3IEthKGEpfTtsLlZlcnRleD1mdW5jdGlvbihhLGIsYyl7Y29uc29sZS53YXJuKFwiVEhSRUUuVmVydGV4IGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBUSFJFRS5WZWN0b3IzIGluc3RlYWQuXCIpO1xuICAgIHJldHVybiBuZXcgcChhLGIsYyl9O2wuRHluYW1pY0J1ZmZlckF0dHJpYnV0ZT1mdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLkR5bmFtaWNCdWZmZXJBdHRyaWJ1dGUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoKS5zZXREeW5hbWljKCB0cnVlICkgaW5zdGVhZC5cIik7cmV0dXJuKG5ldyBNKGEsYikpLnNldER5bmFtaWMoITApfTtsLkludDhBdHRyaWJ1dGU9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5JbnQ4QXR0cmlidXRlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBuZXcgVEhSRUUuSW50OEJ1ZmZlckF0dHJpYnV0ZSgpIGluc3RlYWQuXCIpO3JldHVybiBuZXcgdWMoYSxiKX07bC5VaW50OEF0dHJpYnV0ZT1mdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLlVpbnQ4QXR0cmlidXRlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBuZXcgVEhSRUUuVWludDhCdWZmZXJBdHRyaWJ1dGUoKSBpbnN0ZWFkLlwiKTtyZXR1cm4gbmV3IHZjKGEsXG4gICAgYil9O2wuVWludDhDbGFtcGVkQXR0cmlidXRlPWZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuVWludDhDbGFtcGVkQXR0cmlidXRlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBuZXcgVEhSRUUuVWludDhDbGFtcGVkQnVmZmVyQXR0cmlidXRlKCkgaW5zdGVhZC5cIik7cmV0dXJuIG5ldyB3YyhhLGIpfTtsLkludDE2QXR0cmlidXRlPWZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuSW50MTZBdHRyaWJ1dGUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5JbnQxNkJ1ZmZlckF0dHJpYnV0ZSgpIGluc3RlYWQuXCIpO3JldHVybiBuZXcgeGMoYSxiKX07bC5VaW50MTZBdHRyaWJ1dGU9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5VaW50MTZBdHRyaWJ1dGUgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIG5ldyBUSFJFRS5VaW50MTZCdWZmZXJBdHRyaWJ1dGUoKSBpbnN0ZWFkLlwiKTtyZXR1cm4gbmV3IG9iKGEsYil9O2wuSW50MzJBdHRyaWJ1dGU9XG4gICAgZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5JbnQzMkF0dHJpYnV0ZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLkludDMyQnVmZmVyQXR0cmlidXRlKCkgaW5zdGVhZC5cIik7cmV0dXJuIG5ldyB5YyhhLGIpfTtsLlVpbnQzMkF0dHJpYnV0ZT1mdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLlVpbnQzMkF0dHJpYnV0ZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLlVpbnQzMkJ1ZmZlckF0dHJpYnV0ZSgpIGluc3RlYWQuXCIpO3JldHVybiBuZXcgcGIoYSxiKX07bC5GbG9hdDMyQXR0cmlidXRlPWZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuRmxvYXQzMkF0dHJpYnV0ZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLkZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoKSBpbnN0ZWFkLlwiKTtyZXR1cm4gbmV3IEIoYSxiKX07bC5GbG9hdDY0QXR0cmlidXRlPWZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuRmxvYXQ2NEF0dHJpYnV0ZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLkZsb2F0NjRCdWZmZXJBdHRyaWJ1dGUoKSBpbnN0ZWFkLlwiKTtcbiAgICByZXR1cm4gbmV3IHpjKGEsYil9O2wuQ2xvc2VkU3BsaW5lQ3VydmUzPXZmO2wuU3BsaW5lQ3VydmUzPXdmO2wuU3BsaW5lPURlO2wuQXhpc0hlbHBlcj1mdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5BeGlzSGVscGVyIGhhcyBiZWVuIHJlbmFtZWQgdG8gVEhSRUUuQXhlc0hlbHBlci5cIik7cmV0dXJuIG5ldyBuZChhKX07bC5Cb3VuZGluZ0JveEhlbHBlcj1mdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLkJvdW5kaW5nQm94SGVscGVyIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIENyZWF0aW5nIGEgVEhSRUUuQm94SGVscGVyIGluc3RlYWQuXCIpO3JldHVybiBuZXcgR2IoYSxiKX07bC5FZGdlc0hlbHBlcj1mdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLkVkZ2VzSGVscGVyIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBUSFJFRS5FZGdlc0dlb21ldHJ5IGluc3RlYWQuXCIpO3JldHVybiBuZXcgWChuZXcgZGMoYS5nZW9tZXRyeSksbmV3IFcoe2NvbG9yOnZvaWQgMCE9PVxuICAgIGI/YjoxNjc3NzIxNX0pKX07bC5XaXJlZnJhbWVIZWxwZXI9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XaXJlZnJhbWVIZWxwZXIgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFRIUkVFLldpcmVmcmFtZUdlb21ldHJ5IGluc3RlYWQuXCIpO3JldHVybiBuZXcgWChuZXcgVGIoYS5nZW9tZXRyeSksbmV3IFcoe2NvbG9yOnZvaWQgMCE9PWI/YjoxNjc3NzIxNX0pKX07bC5YSFJMb2FkZXI9ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuWEhSTG9hZGVyIGhhcyBiZWVuIHJlbmFtZWQgdG8gVEhSRUUuRmlsZUxvYWRlci5cIik7cmV0dXJuIG5ldyBOYShhKX07bC5CaW5hcnlUZXh0dXJlTG9hZGVyPWZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkJpbmFyeVRleHR1cmVMb2FkZXIgaGFzIGJlZW4gcmVuYW1lZCB0byBUSFJFRS5EYXRhVGV4dHVyZUxvYWRlci5cIik7cmV0dXJuIG5ldyBpZShhKX07bC5HZW9tZXRyeVV0aWxzPXttZXJnZTpmdW5jdGlvbihhLGIsYyl7Y29uc29sZS53YXJuKFwiVEhSRUUuR2VvbWV0cnlVdGlsczogLm1lcmdlKCkgaGFzIGJlZW4gbW92ZWQgdG8gR2VvbWV0cnkuIFVzZSBnZW9tZXRyeS5tZXJnZSggZ2VvbWV0cnkyLCBtYXRyaXgsIG1hdGVyaWFsSW5kZXhPZmZzZXQgKSBpbnN0ZWFkLlwiKTtcbiAgICBpZihiLmlzTWVzaCl7Yi5tYXRyaXhBdXRvVXBkYXRlJiZiLnVwZGF0ZU1hdHJpeCgpO3ZhciBkPWIubWF0cml4O2I9Yi5nZW9tZXRyeX1hLm1lcmdlKGIsZCxjKX0sY2VudGVyOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkdlb21ldHJ5VXRpbHM6IC5jZW50ZXIoKSBoYXMgYmVlbiBtb3ZlZCB0byBHZW9tZXRyeS4gVXNlIGdlb21ldHJ5LmNlbnRlcigpIGluc3RlYWQuXCIpO3JldHVybiBhLmNlbnRlcigpfX07bC5JbWFnZVV0aWxzPXtjcm9zc09yaWdpbjp2b2lkIDAsbG9hZFRleHR1cmU6ZnVuY3Rpb24oYSxiLGMsZCl7Y29uc29sZS53YXJuKFwiVEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgVEhSRUUuVGV4dHVyZUxvYWRlcigpIGluc3RlYWQuXCIpO3ZhciBlPW5ldyBBZDtlLnNldENyb3NzT3JpZ2luKHRoaXMuY3Jvc3NPcmlnaW4pO2E9ZS5sb2FkKGEsYyx2b2lkIDAsZCk7YiYmKGEubWFwcGluZz1iKTtyZXR1cm4gYX0sXG4gICAgbG9hZFRleHR1cmVDdWJlOmZ1bmN0aW9uKGEsYixjLGQpe2NvbnNvbGUud2FybihcIlRIUkVFLkltYWdlVXRpbHMubG9hZFRleHR1cmVDdWJlIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSBUSFJFRS5DdWJlVGV4dHVyZUxvYWRlcigpIGluc3RlYWQuXCIpO3ZhciBlPW5ldyBqZTtlLnNldENyb3NzT3JpZ2luKHRoaXMuY3Jvc3NPcmlnaW4pO2E9ZS5sb2FkKGEsYyx2b2lkIDAsZCk7YiYmKGEubWFwcGluZz1iKTtyZXR1cm4gYX0sbG9hZENvbXByZXNzZWRUZXh0dXJlOmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLkltYWdlVXRpbHMubG9hZENvbXByZXNzZWRUZXh0dXJlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBUSFJFRS5ERFNMb2FkZXIgaW5zdGVhZC5cIil9LGxvYWRDb21wcmVzc2VkVGV4dHVyZUN1YmU6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuSW1hZ2VVdGlscy5sb2FkQ29tcHJlc3NlZFRleHR1cmVDdWJlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBUSFJFRS5ERFNMb2FkZXIgaW5zdGVhZC5cIil9fTtcbiAgICBsLlByb2plY3Rvcj1mdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5Qcm9qZWN0b3IgaGFzIGJlZW4gbW92ZWQgdG8gL2V4YW1wbGVzL2pzL3JlbmRlcmVycy9Qcm9qZWN0b3IuanMuXCIpO3RoaXMucHJvamVjdFZlY3Rvcj1mdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLlByb2plY3RvcjogLnByb2plY3RWZWN0b3IoKSBpcyBub3cgdmVjdG9yLnByb2plY3QoKS5cIik7YS5wcm9qZWN0KGIpfTt0aGlzLnVucHJvamVjdFZlY3Rvcj1mdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLlByb2plY3RvcjogLnVucHJvamVjdFZlY3RvcigpIGlzIG5vdyB2ZWN0b3IudW5wcm9qZWN0KCkuXCIpO2EudW5wcm9qZWN0KGIpfTt0aGlzLnBpY2tpbmdSYXk9ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuUHJvamVjdG9yOiAucGlja2luZ1JheSgpIGlzIG5vdyByYXljYXN0ZXIuc2V0RnJvbUNhbWVyYSgpLlwiKX19O2wuQ2FudmFzUmVuZGVyZXI9ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuQ2FudmFzUmVuZGVyZXIgaGFzIGJlZW4gbW92ZWQgdG8gL2V4YW1wbGVzL2pzL3JlbmRlcmVycy9DYW52YXNSZW5kZXJlci5qc1wiKTtcbiAgICB0aGlzLmRvbUVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLFwiY2FudmFzXCIpO3RoaXMuY2xlYXI9ZnVuY3Rpb24oKXt9O3RoaXMucmVuZGVyPWZ1bmN0aW9uKCl7fTt0aGlzLnNldENsZWFyQ29sb3I9ZnVuY3Rpb24oKXt9O3RoaXMuc2V0U2l6ZT1mdW5jdGlvbigpe319O09iamVjdC5kZWZpbmVQcm9wZXJ0eShsLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pfSk7IiwiLyoqIEBsaWNlbnNlIHpsaWIuanMgMjAxMiAtIGltYXlhIFsgaHR0cHM6Ly9naXRodWIuY29tL2ltYXlhL3psaWIuanMgXSBUaGUgTUlUIExpY2Vuc2UgKi8oZnVuY3Rpb24oKSB7J3VzZSBzdHJpY3QnO3ZhciBsPXZvaWQgMCxhYT10aGlzO2Z1bmN0aW9uIHIoYyxkKXt2YXIgYT1jLnNwbGl0KFwiLlwiKSxiPWFhOyEoYVswXWluIGIpJiZiLmV4ZWNTY3JpcHQmJmIuZXhlY1NjcmlwdChcInZhciBcIithWzBdKTtmb3IodmFyIGU7YS5sZW5ndGgmJihlPWEuc2hpZnQoKSk7KSFhLmxlbmd0aCYmZCE9PWw/YltlXT1kOmI9YltlXT9iW2VdOmJbZV09e319O3ZhciB0PVwidW5kZWZpbmVkXCIhPT10eXBlb2YgVWludDhBcnJheSYmXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBVaW50MTZBcnJheSYmXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBVaW50MzJBcnJheSYmXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBEYXRhVmlldztmdW5jdGlvbiB2KGMpe3ZhciBkPWMubGVuZ3RoLGE9MCxiPU51bWJlci5QT1NJVElWRV9JTkZJTklUWSxlLGYsZyxoLGssbSxuLHAscyx4O2ZvcihwPTA7cDxkOysrcCljW3BdPmEmJihhPWNbcF0pLGNbcF08YiYmKGI9Y1twXSk7ZT0xPDxhO2Y9bmV3ICh0P1VpbnQzMkFycmF5OkFycmF5KShlKTtnPTE7aD0wO2ZvcihrPTI7Zzw9YTspe2ZvcihwPTA7cDxkOysrcClpZihjW3BdPT09Zyl7bT0wO249aDtmb3Iocz0wO3M8ZzsrK3MpbT1tPDwxfG4mMSxuPj49MTt4PWc8PDE2fHA7Zm9yKHM9bTtzPGU7cys9aylmW3NdPXg7KytofSsrZztoPDw9MTtrPDw9MX1yZXR1cm5bZixhLGJdfTtmdW5jdGlvbiB3KGMsZCl7dGhpcy5nPVtdO3RoaXMuaD0zMjc2ODt0aGlzLmQ9dGhpcy5mPXRoaXMuYT10aGlzLmw9MDt0aGlzLmlucHV0PXQ/bmV3IFVpbnQ4QXJyYXkoYyk6Yzt0aGlzLm09ITE7dGhpcy5pPXk7dGhpcy5yPSExO2lmKGR8fCEoZD17fSkpZC5pbmRleCYmKHRoaXMuYT1kLmluZGV4KSxkLmJ1ZmZlclNpemUmJih0aGlzLmg9ZC5idWZmZXJTaXplKSxkLmJ1ZmZlclR5cGUmJih0aGlzLmk9ZC5idWZmZXJUeXBlKSxkLnJlc2l6ZSYmKHRoaXMucj1kLnJlc2l6ZSk7c3dpdGNoKHRoaXMuaSl7Y2FzZSBBOnRoaXMuYj0zMjc2ODt0aGlzLmM9bmV3ICh0P1VpbnQ4QXJyYXk6QXJyYXkpKDMyNzY4K3RoaXMuaCsyNTgpO2JyZWFrO2Nhc2UgeTp0aGlzLmI9MDt0aGlzLmM9bmV3ICh0P1VpbnQ4QXJyYXk6QXJyYXkpKHRoaXMuaCk7dGhpcy5lPXRoaXMuejt0aGlzLm49dGhpcy52O3RoaXMuaj10aGlzLnc7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcImludmFsaWQgaW5mbGF0ZSBtb2RlXCIpO1xufX12YXIgQT0wLHk9MSxCPXt0OkEsczp5fTtcbncucHJvdG90eXBlLms9ZnVuY3Rpb24oKXtmb3IoOyF0aGlzLm07KXt2YXIgYz1DKHRoaXMsMyk7YyYxJiYodGhpcy5tPSEwKTtjPj4+PTE7c3dpdGNoKGMpe2Nhc2UgMDp2YXIgZD10aGlzLmlucHV0LGE9dGhpcy5hLGI9dGhpcy5jLGU9dGhpcy5iLGY9ZC5sZW5ndGgsZz1sLGg9bCxrPWIubGVuZ3RoLG09bDt0aGlzLmQ9dGhpcy5mPTA7aWYoYSsxPj1mKXRocm93IEVycm9yKFwiaW52YWxpZCB1bmNvbXByZXNzZWQgYmxvY2sgaGVhZGVyOiBMRU5cIik7Zz1kW2ErK118ZFthKytdPDw4O2lmKGErMT49Zil0aHJvdyBFcnJvcihcImludmFsaWQgdW5jb21wcmVzc2VkIGJsb2NrIGhlYWRlcjogTkxFTlwiKTtoPWRbYSsrXXxkW2ErK108PDg7aWYoZz09PX5oKXRocm93IEVycm9yKFwiaW52YWxpZCB1bmNvbXByZXNzZWQgYmxvY2sgaGVhZGVyOiBsZW5ndGggdmVyaWZ5XCIpO2lmKGErZz5kLmxlbmd0aCl0aHJvdyBFcnJvcihcImlucHV0IGJ1ZmZlciBpcyBicm9rZW5cIik7c3dpdGNoKHRoaXMuaSl7Y2FzZSBBOmZvcig7ZStcbmc+Yi5sZW5ndGg7KXttPWstZTtnLT1tO2lmKHQpYi5zZXQoZC5zdWJhcnJheShhLGErbSksZSksZSs9bSxhKz1tO2Vsc2UgZm9yKDttLS07KWJbZSsrXT1kW2ErK107dGhpcy5iPWU7Yj10aGlzLmUoKTtlPXRoaXMuYn1icmVhaztjYXNlIHk6Zm9yKDtlK2c+Yi5sZW5ndGg7KWI9dGhpcy5lKHtwOjJ9KTticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwiaW52YWxpZCBpbmZsYXRlIG1vZGVcIik7fWlmKHQpYi5zZXQoZC5zdWJhcnJheShhLGErZyksZSksZSs9ZyxhKz1nO2Vsc2UgZm9yKDtnLS07KWJbZSsrXT1kW2ErK107dGhpcy5hPWE7dGhpcy5iPWU7dGhpcy5jPWI7YnJlYWs7Y2FzZSAxOnRoaXMuaihiYSxjYSk7YnJlYWs7Y2FzZSAyOmZvcih2YXIgbj1DKHRoaXMsNSkrMjU3LHA9Qyh0aGlzLDUpKzEscz1DKHRoaXMsNCkrNCx4PW5ldyAodD9VaW50OEFycmF5OkFycmF5KShELmxlbmd0aCksUz1sLFQ9bCxVPWwsdT1sLE09bCxGPWwsej1sLHE9bCxWPWwscT0wO3E8czsrK3EpeFtEW3FdXT1cbkModGhpcywzKTtpZighdCl7cT1zO2ZvcihzPXgubGVuZ3RoO3E8czsrK3EpeFtEW3FdXT0wfVM9dih4KTt1PW5ldyAodD9VaW50OEFycmF5OkFycmF5KShuK3ApO3E9MDtmb3IoVj1uK3A7cTxWOylzd2l0Y2goTT1FKHRoaXMsUyksTSl7Y2FzZSAxNjpmb3Ioej0zK0ModGhpcywyKTt6LS07KXVbcSsrXT1GO2JyZWFrO2Nhc2UgMTc6Zm9yKHo9MytDKHRoaXMsMyk7ei0tOyl1W3ErK109MDtGPTA7YnJlYWs7Y2FzZSAxODpmb3Ioej0xMStDKHRoaXMsNyk7ei0tOyl1W3ErK109MDtGPTA7YnJlYWs7ZGVmYXVsdDpGPXVbcSsrXT1NfVQ9dD92KHUuc3ViYXJyYXkoMCxuKSk6dih1LnNsaWNlKDAsbikpO1U9dD92KHUuc3ViYXJyYXkobikpOnYodS5zbGljZShuKSk7dGhpcy5qKFQsVSk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcInVua25vd24gQlRZUEU6IFwiK2MpO319cmV0dXJuIHRoaXMubigpfTtcbnZhciBHPVsxNiwxNywxOCwwLDgsNyw5LDYsMTAsNSwxMSw0LDEyLDMsMTMsMiwxNCwxLDE1XSxEPXQ/bmV3IFVpbnQxNkFycmF5KEcpOkcsSD1bMyw0LDUsNiw3LDgsOSwxMCwxMSwxMywxNSwxNywxOSwyMywyNywzMSwzNSw0Myw1MSw1OSw2Nyw4Myw5OSwxMTUsMTMxLDE2MywxOTUsMjI3LDI1OCwyNTgsMjU4XSxJPXQ/bmV3IFVpbnQxNkFycmF5KEgpOkgsSj1bMCwwLDAsMCwwLDAsMCwwLDEsMSwxLDEsMiwyLDIsMiwzLDMsMywzLDQsNCw0LDQsNSw1LDUsNSwwLDAsMF0sSz10P25ldyBVaW50OEFycmF5KEopOkosTD1bMSwyLDMsNCw1LDcsOSwxMywxNywyNSwzMyw0OSw2NSw5NywxMjksMTkzLDI1NywzODUsNTEzLDc2OSwxMDI1LDE1MzcsMjA0OSwzMDczLDQwOTcsNjE0NSw4MTkzLDEyMjg5LDE2Mzg1LDI0NTc3XSxkYT10P25ldyBVaW50MTZBcnJheShMKTpMLGVhPVswLDAsMCwwLDEsMSwyLDIsMywzLDQsNCw1LDUsNiw2LDcsNyw4LDgsOSw5LDEwLDEwLDExLDExLDEyLDEyLFxuMTMsMTNdLE49dD9uZXcgVWludDhBcnJheShlYSk6ZWEsTz1uZXcgKHQ/VWludDhBcnJheTpBcnJheSkoMjg4KSxQLGZhO1A9MDtmb3IoZmE9Ty5sZW5ndGg7UDxmYTsrK1ApT1tQXT0xNDM+PVA/ODoyNTU+PVA/OToyNzk+PVA/Nzo4O3ZhciBiYT12KE8pLFE9bmV3ICh0P1VpbnQ4QXJyYXk6QXJyYXkpKDMwKSxSLGdhO1I9MDtmb3IoZ2E9US5sZW5ndGg7UjxnYTsrK1IpUVtSXT01O3ZhciBjYT12KFEpO2Z1bmN0aW9uIEMoYyxkKXtmb3IodmFyIGE9Yy5mLGI9Yy5kLGU9Yy5pbnB1dCxmPWMuYSxnPWUubGVuZ3RoLGg7YjxkOyl7aWYoZj49Zyl0aHJvdyBFcnJvcihcImlucHV0IGJ1ZmZlciBpcyBicm9rZW5cIik7YXw9ZVtmKytdPDxiO2IrPTh9aD1hJigxPDxkKS0xO2MuZj1hPj4+ZDtjLmQ9Yi1kO2MuYT1mO3JldHVybiBofVxuZnVuY3Rpb24gRShjLGQpe2Zvcih2YXIgYT1jLmYsYj1jLmQsZT1jLmlucHV0LGY9Yy5hLGc9ZS5sZW5ndGgsaD1kWzBdLGs9ZFsxXSxtLG47YjxrJiYhKGY+PWcpOylhfD1lW2YrK108PGIsYis9ODttPWhbYSYoMTw8ayktMV07bj1tPj4+MTY7aWYobj5iKXRocm93IEVycm9yKFwiaW52YWxpZCBjb2RlIGxlbmd0aDogXCIrbik7Yy5mPWE+Pm47Yy5kPWItbjtjLmE9ZjtyZXR1cm4gbSY2NTUzNX1cbncucHJvdG90eXBlLmo9ZnVuY3Rpb24oYyxkKXt2YXIgYT10aGlzLmMsYj10aGlzLmI7dGhpcy5vPWM7Zm9yKHZhciBlPWEubGVuZ3RoLTI1OCxmLGcsaCxrOzI1NiE9PShmPUUodGhpcyxjKSk7KWlmKDI1Nj5mKWI+PWUmJih0aGlzLmI9YixhPXRoaXMuZSgpLGI9dGhpcy5iKSxhW2IrK109ZjtlbHNle2c9Zi0yNTc7az1JW2ddOzA8S1tnXSYmKGsrPUModGhpcyxLW2ddKSk7Zj1FKHRoaXMsZCk7aD1kYVtmXTswPE5bZl0mJihoKz1DKHRoaXMsTltmXSkpO2I+PWUmJih0aGlzLmI9YixhPXRoaXMuZSgpLGI9dGhpcy5iKTtmb3IoO2stLTspYVtiXT1hW2IrKy1oXX1mb3IoOzg8PXRoaXMuZDspdGhpcy5kLT04LHRoaXMuYS0tO3RoaXMuYj1ifTtcbncucHJvdG90eXBlLnc9ZnVuY3Rpb24oYyxkKXt2YXIgYT10aGlzLmMsYj10aGlzLmI7dGhpcy5vPWM7Zm9yKHZhciBlPWEubGVuZ3RoLGYsZyxoLGs7MjU2IT09KGY9RSh0aGlzLGMpKTspaWYoMjU2PmYpYj49ZSYmKGE9dGhpcy5lKCksZT1hLmxlbmd0aCksYVtiKytdPWY7ZWxzZXtnPWYtMjU3O2s9SVtnXTswPEtbZ10mJihrKz1DKHRoaXMsS1tnXSkpO2Y9RSh0aGlzLGQpO2g9ZGFbZl07MDxOW2ZdJiYoaCs9Qyh0aGlzLE5bZl0pKTtiK2s+ZSYmKGE9dGhpcy5lKCksZT1hLmxlbmd0aCk7Zm9yKDtrLS07KWFbYl09YVtiKystaF19Zm9yKDs4PD10aGlzLmQ7KXRoaXMuZC09OCx0aGlzLmEtLTt0aGlzLmI9Yn07XG53LnByb3RvdHlwZS5lPWZ1bmN0aW9uKCl7dmFyIGM9bmV3ICh0P1VpbnQ4QXJyYXk6QXJyYXkpKHRoaXMuYi0zMjc2OCksZD10aGlzLmItMzI3NjgsYSxiLGU9dGhpcy5jO2lmKHQpYy5zZXQoZS5zdWJhcnJheSgzMjc2OCxjLmxlbmd0aCkpO2Vsc2V7YT0wO2ZvcihiPWMubGVuZ3RoO2E8YjsrK2EpY1thXT1lW2ErMzI3NjhdfXRoaXMuZy5wdXNoKGMpO3RoaXMubCs9Yy5sZW5ndGg7aWYodCllLnNldChlLnN1YmFycmF5KGQsZCszMjc2OCkpO2Vsc2UgZm9yKGE9MDszMjc2OD5hOysrYSllW2FdPWVbZCthXTt0aGlzLmI9MzI3Njg7cmV0dXJuIGV9O1xudy5wcm90b3R5cGUuej1mdW5jdGlvbihjKXt2YXIgZCxhPXRoaXMuaW5wdXQubGVuZ3RoL3RoaXMuYSsxfDAsYixlLGYsZz10aGlzLmlucHV0LGg9dGhpcy5jO2MmJihcIm51bWJlclwiPT09dHlwZW9mIGMucCYmKGE9Yy5wKSxcIm51bWJlclwiPT09dHlwZW9mIGMudSYmKGErPWMudSkpOzI+YT8oYj0oZy5sZW5ndGgtdGhpcy5hKS90aGlzLm9bMl0sZj0yNTgqKGIvMil8MCxlPWY8aC5sZW5ndGg/aC5sZW5ndGgrZjpoLmxlbmd0aDw8MSk6ZT1oLmxlbmd0aCphO3Q/KGQ9bmV3IFVpbnQ4QXJyYXkoZSksZC5zZXQoaCkpOmQ9aDtyZXR1cm4gdGhpcy5jPWR9O1xudy5wcm90b3R5cGUubj1mdW5jdGlvbigpe3ZhciBjPTAsZD10aGlzLmMsYT10aGlzLmcsYixlPW5ldyAodD9VaW50OEFycmF5OkFycmF5KSh0aGlzLmwrKHRoaXMuYi0zMjc2OCkpLGYsZyxoLGs7aWYoMD09PWEubGVuZ3RoKXJldHVybiB0P3RoaXMuYy5zdWJhcnJheSgzMjc2OCx0aGlzLmIpOnRoaXMuYy5zbGljZSgzMjc2OCx0aGlzLmIpO2Y9MDtmb3IoZz1hLmxlbmd0aDtmPGc7KytmKXtiPWFbZl07aD0wO2ZvcihrPWIubGVuZ3RoO2g8azsrK2gpZVtjKytdPWJbaF19Zj0zMjc2ODtmb3IoZz10aGlzLmI7ZjxnOysrZillW2MrK109ZFtmXTt0aGlzLmc9W107cmV0dXJuIHRoaXMuYnVmZmVyPWV9O1xudy5wcm90b3R5cGUudj1mdW5jdGlvbigpe3ZhciBjLGQ9dGhpcy5iO3Q/dGhpcy5yPyhjPW5ldyBVaW50OEFycmF5KGQpLGMuc2V0KHRoaXMuYy5zdWJhcnJheSgwLGQpKSk6Yz10aGlzLmMuc3ViYXJyYXkoMCxkKToodGhpcy5jLmxlbmd0aD5kJiYodGhpcy5jLmxlbmd0aD1kKSxjPXRoaXMuYyk7cmV0dXJuIHRoaXMuYnVmZmVyPWN9O2Z1bmN0aW9uIFcoYyxkKXt2YXIgYSxiO3RoaXMuaW5wdXQ9Yzt0aGlzLmE9MDtpZihkfHwhKGQ9e30pKWQuaW5kZXgmJih0aGlzLmE9ZC5pbmRleCksZC52ZXJpZnkmJih0aGlzLkE9ZC52ZXJpZnkpO2E9Y1t0aGlzLmErK107Yj1jW3RoaXMuYSsrXTtzd2l0Y2goYSYxNSl7Y2FzZSBoYTp0aGlzLm1ldGhvZD1oYTticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwidW5zdXBwb3J0ZWQgY29tcHJlc3Npb24gbWV0aG9kXCIpO31pZigwIT09KChhPDw4KStiKSUzMSl0aHJvdyBFcnJvcihcImludmFsaWQgZmNoZWNrIGZsYWc6XCIrKChhPDw4KStiKSUzMSk7aWYoYiYzMil0aHJvdyBFcnJvcihcImZkaWN0IGZsYWcgaXMgbm90IHN1cHBvcnRlZFwiKTt0aGlzLnE9bmV3IHcoYyx7aW5kZXg6dGhpcy5hLGJ1ZmZlclNpemU6ZC5idWZmZXJTaXplLGJ1ZmZlclR5cGU6ZC5idWZmZXJUeXBlLHJlc2l6ZTpkLnJlc2l6ZX0pfVxuVy5wcm90b3R5cGUuaz1mdW5jdGlvbigpe3ZhciBjPXRoaXMuaW5wdXQsZCxhO2Q9dGhpcy5xLmsoKTt0aGlzLmE9dGhpcy5xLmE7aWYodGhpcy5BKXthPShjW3RoaXMuYSsrXTw8MjR8Y1t0aGlzLmErK108PDE2fGNbdGhpcy5hKytdPDw4fGNbdGhpcy5hKytdKT4+PjA7dmFyIGI9ZDtpZihcInN0cmluZ1wiPT09dHlwZW9mIGIpe3ZhciBlPWIuc3BsaXQoXCJcIiksZixnO2Y9MDtmb3IoZz1lLmxlbmd0aDtmPGc7ZisrKWVbZl09KGVbZl0uY2hhckNvZGVBdCgwKSYyNTUpPj4+MDtiPWV9Zm9yKHZhciBoPTEsaz0wLG09Yi5sZW5ndGgsbixwPTA7MDxtOyl7bj0xMDI0PG0/MTAyNDptO20tPW47ZG8gaCs9YltwKytdLGsrPWg7d2hpbGUoLS1uKTtoJT02NTUyMTtrJT02NTUyMX1pZihhIT09KGs8PDE2fGgpPj4+MCl0aHJvdyBFcnJvcihcImludmFsaWQgYWRsZXItMzIgY2hlY2tzdW1cIik7fXJldHVybiBkfTt2YXIgaGE9ODtyKFwiWmxpYi5JbmZsYXRlXCIsVyk7cihcIlpsaWIuSW5mbGF0ZS5wcm90b3R5cGUuZGVjb21wcmVzc1wiLFcucHJvdG90eXBlLmspO3ZhciBYPXtBREFQVElWRTpCLnMsQkxPQ0s6Qi50fSxZLFosJCxpYTtpZihPYmplY3Qua2V5cylZPU9iamVjdC5rZXlzKFgpO2Vsc2UgZm9yKFogaW4gWT1bXSwkPTAsWClZWyQrK109WjskPTA7Zm9yKGlhPVkubGVuZ3RoOyQ8aWE7KyskKVo9WVskXSxyKFwiWmxpYi5JbmZsYXRlLkJ1ZmZlclR5cGUuXCIrWixYW1pdKTt9KS5jYWxsKHRoaXMpOyIsIi8qKlxuICogQGF1dGhvciBxaWFvIC8gaHR0cHM6Ly9naXRodWIuY29tL3FpYW9cbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb21cbiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vXG4gKiBAYXV0aG9yIFdlc3RMYW5nbGV5IC8gaHR0cDovL2dpdGh1Yi5jb20vV2VzdExhbmdsZXlcbiAqIEBhdXRob3IgZXJpY2g2NjYgLyBodHRwOi8vZXJpY2hhaW5lcy5jb21cbiAqL1xuXG4vLyBUaGlzIHNldCBvZiBjb250cm9scyBwZXJmb3JtcyBvcmJpdGluZywgZG9sbHlpbmcgKHpvb21pbmcpLCBhbmQgcGFubmluZy5cbi8vIFVubGlrZSBUcmFja2JhbGxDb250cm9scywgaXQgbWFpbnRhaW5zIHRoZSBcInVwXCIgZGlyZWN0aW9uIG9iamVjdC51cCAoK1kgYnkgZGVmYXVsdCkuXG4vL1xuLy8gICAgT3JiaXQgLSBsZWZ0IG1vdXNlIC8gdG91Y2g6IG9uZSBmaW5nZXIgbW92ZVxuLy8gICAgWm9vbSAtIG1pZGRsZSBtb3VzZSwgb3IgbW91c2V3aGVlbCAvIHRvdWNoOiB0d28gZmluZ2VyIHNwcmVhZCBvciBzcXVpc2hcbi8vICAgIFBhbiAtIHJpZ2h0IG1vdXNlLCBvciBhcnJvdyBrZXlzIC8gdG91Y2g6IHRocmVlIGZpbmdlciBzd2lwZVxuXG5USFJFRS5PcmJpdENvbnRyb2xzID0gZnVuY3Rpb24gKCBvYmplY3QsIGRvbUVsZW1lbnQgKSB7XG5cblx0dGhpcy5vYmplY3QgPSBvYmplY3Q7XG5cblx0dGhpcy5kb21FbGVtZW50ID0gKCBkb21FbGVtZW50ICE9PSB1bmRlZmluZWQgKSA/IGRvbUVsZW1lbnQgOiBkb2N1bWVudDtcblxuXHQvLyBTZXQgdG8gZmFsc2UgdG8gZGlzYWJsZSB0aGlzIGNvbnRyb2xcblx0dGhpcy5lbmFibGVkID0gdHJ1ZTtcblxuXHQvLyBcInRhcmdldFwiIHNldHMgdGhlIGxvY2F0aW9uIG9mIGZvY3VzLCB3aGVyZSB0aGUgb2JqZWN0IG9yYml0cyBhcm91bmRcblx0dGhpcy50YXJnZXQgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuXG5cdC8vIEhvdyBmYXIgeW91IGNhbiBkb2xseSBpbiBhbmQgb3V0ICggUGVyc3BlY3RpdmVDYW1lcmEgb25seSApXG5cdHRoaXMubWluRGlzdGFuY2UgPSAwO1xuXHR0aGlzLm1heERpc3RhbmNlID0gSW5maW5pdHk7XG5cblx0Ly8gSG93IGZhciB5b3UgY2FuIHpvb20gaW4gYW5kIG91dCAoIE9ydGhvZ3JhcGhpY0NhbWVyYSBvbmx5IClcblx0dGhpcy5taW5ab29tID0gMDtcblx0dGhpcy5tYXhab29tID0gSW5maW5pdHk7XG5cblx0Ly8gSG93IGZhciB5b3UgY2FuIG9yYml0IHZlcnRpY2FsbHksIHVwcGVyIGFuZCBsb3dlciBsaW1pdHMuXG5cdC8vIFJhbmdlIGlzIDAgdG8gTWF0aC5QSSByYWRpYW5zLlxuXHR0aGlzLm1pblBvbGFyQW5nbGUgPSAwOyAvLyByYWRpYW5zXG5cdHRoaXMubWF4UG9sYXJBbmdsZSA9IE1hdGguUEk7IC8vIHJhZGlhbnNcblxuXHQvLyBIb3cgZmFyIHlvdSBjYW4gb3JiaXQgaG9yaXpvbnRhbGx5LCB1cHBlciBhbmQgbG93ZXIgbGltaXRzLlxuXHQvLyBJZiBzZXQsIG11c3QgYmUgYSBzdWItaW50ZXJ2YWwgb2YgdGhlIGludGVydmFsIFsgLSBNYXRoLlBJLCBNYXRoLlBJIF0uXG5cdHRoaXMubWluQXppbXV0aEFuZ2xlID0gLSBJbmZpbml0eTsgLy8gcmFkaWFuc1xuXHR0aGlzLm1heEF6aW11dGhBbmdsZSA9IEluZmluaXR5OyAvLyByYWRpYW5zXG5cblx0Ly8gU2V0IHRvIHRydWUgdG8gZW5hYmxlIGRhbXBpbmcgKGluZXJ0aWEpXG5cdC8vIElmIGRhbXBpbmcgaXMgZW5hYmxlZCwgeW91IG11c3QgY2FsbCBjb250cm9scy51cGRhdGUoKSBpbiB5b3VyIGFuaW1hdGlvbiBsb29wXG5cdHRoaXMuZW5hYmxlRGFtcGluZyA9IGZhbHNlO1xuXHR0aGlzLmRhbXBpbmdGYWN0b3IgPSAwLjI1O1xuXG5cdC8vIFRoaXMgb3B0aW9uIGFjdHVhbGx5IGVuYWJsZXMgZG9sbHlpbmcgaW4gYW5kIG91dDsgbGVmdCBhcyBcInpvb21cIiBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG5cdC8vIFNldCB0byBmYWxzZSB0byBkaXNhYmxlIHpvb21pbmdcblx0dGhpcy5lbmFibGVab29tID0gdHJ1ZTtcblx0dGhpcy56b29tU3BlZWQgPSAxLjA7XG5cblx0Ly8gU2V0IHRvIGZhbHNlIHRvIGRpc2FibGUgcm90YXRpbmdcblx0dGhpcy5lbmFibGVSb3RhdGUgPSB0cnVlO1xuXHR0aGlzLnJvdGF0ZVNwZWVkID0gMS4wO1xuXG5cdC8vIFNldCB0byBmYWxzZSB0byBkaXNhYmxlIHBhbm5pbmdcblx0dGhpcy5lbmFibGVQYW4gPSB0cnVlO1xuXHR0aGlzLmtleVBhblNwZWVkID0gNy4wO1x0Ly8gcGl4ZWxzIG1vdmVkIHBlciBhcnJvdyBrZXkgcHVzaFxuXG5cdC8vIFNldCB0byB0cnVlIHRvIGF1dG9tYXRpY2FsbHkgcm90YXRlIGFyb3VuZCB0aGUgdGFyZ2V0XG5cdC8vIElmIGF1dG8tcm90YXRlIGlzIGVuYWJsZWQsIHlvdSBtdXN0IGNhbGwgY29udHJvbHMudXBkYXRlKCkgaW4geW91ciBhbmltYXRpb24gbG9vcFxuXHR0aGlzLmF1dG9Sb3RhdGUgPSBmYWxzZTtcblx0dGhpcy5hdXRvUm90YXRlU3BlZWQgPSAyLjA7IC8vIDMwIHNlY29uZHMgcGVyIHJvdW5kIHdoZW4gZnBzIGlzIDYwXG5cblx0Ly8gU2V0IHRvIGZhbHNlIHRvIGRpc2FibGUgdXNlIG9mIHRoZSBrZXlzXG5cdHRoaXMuZW5hYmxlS2V5cyA9IHRydWU7XG5cblx0Ly8gVGhlIGZvdXIgYXJyb3cga2V5c1xuXHR0aGlzLmtleXMgPSB7IExFRlQ6IDM3LCBVUDogMzgsIFJJR0hUOiAzOSwgQk9UVE9NOiA0MCB9O1xuXG5cdC8vIE1vdXNlIGJ1dHRvbnNcblx0dGhpcy5tb3VzZUJ1dHRvbnMgPSB7IE9SQklUOiBUSFJFRS5NT1VTRS5MRUZULCBaT09NOiBUSFJFRS5NT1VTRS5NSURETEUsIFBBTjogVEhSRUUuTU9VU0UuUklHSFQgfTtcblxuXHQvLyBmb3IgcmVzZXRcblx0dGhpcy50YXJnZXQwID0gdGhpcy50YXJnZXQuY2xvbmUoKTtcblx0dGhpcy5wb3NpdGlvbjAgPSB0aGlzLm9iamVjdC5wb3NpdGlvbi5jbG9uZSgpO1xuXHR0aGlzLnpvb20wID0gdGhpcy5vYmplY3Quem9vbTtcblxuXHQvL1xuXHQvLyBwdWJsaWMgbWV0aG9kc1xuXHQvL1xuXG5cdHRoaXMuZ2V0UG9sYXJBbmdsZSA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdHJldHVybiBzcGhlcmljYWwucGhpO1xuXG5cdH07XG5cblx0dGhpcy5nZXRBemltdXRoYWxBbmdsZSA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdHJldHVybiBzcGhlcmljYWwudGhldGE7XG5cblx0fTtcblxuXHR0aGlzLnNhdmVTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdHNjb3BlLnRhcmdldDAuY29weSggc2NvcGUudGFyZ2V0ICk7XG5cdFx0c2NvcGUucG9zaXRpb24wLmNvcHkoIHNjb3BlLm9iamVjdC5wb3NpdGlvbiApO1xuXHRcdHNjb3BlLnpvb20wID0gc2NvcGUub2JqZWN0Lnpvb207XG5cblx0fTtcblxuXHR0aGlzLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0c2NvcGUudGFyZ2V0LmNvcHkoIHNjb3BlLnRhcmdldDAgKTtcblx0XHRzY29wZS5vYmplY3QucG9zaXRpb24uY29weSggc2NvcGUucG9zaXRpb24wICk7XG5cdFx0c2NvcGUub2JqZWN0Lnpvb20gPSBzY29wZS56b29tMDtcblxuXHRcdHNjb3BlLm9iamVjdC51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG5cdFx0c2NvcGUuZGlzcGF0Y2hFdmVudCggY2hhbmdlRXZlbnQgKTtcblxuXHRcdHNjb3BlLnVwZGF0ZSgpO1xuXG5cdFx0c3RhdGUgPSBTVEFURS5OT05FO1xuXG5cdH07XG5cblx0Ly8gdGhpcyBtZXRob2QgaXMgZXhwb3NlZCwgYnV0IHBlcmhhcHMgaXQgd291bGQgYmUgYmV0dGVyIGlmIHdlIGNhbiBtYWtlIGl0IHByaXZhdGUuLi5cblx0dGhpcy51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHR2YXIgb2Zmc2V0ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcblxuXHRcdC8vIHNvIGNhbWVyYS51cCBpcyB0aGUgb3JiaXQgYXhpc1xuXHRcdHZhciBxdWF0ID0gbmV3IFRIUkVFLlF1YXRlcm5pb24oKS5zZXRGcm9tVW5pdFZlY3RvcnMoIG9iamVjdC51cCwgbmV3IFRIUkVFLlZlY3RvcjMoIDAsIDEsIDAgKSApO1xuXHRcdHZhciBxdWF0SW52ZXJzZSA9IHF1YXQuY2xvbmUoKS5pbnZlcnNlKCk7XG5cblx0XHR2YXIgbGFzdFBvc2l0aW9uID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcblx0XHR2YXIgbGFzdFF1YXRlcm5pb24gPSBuZXcgVEhSRUUuUXVhdGVybmlvbigpO1xuXG5cdFx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcblxuXHRcdFx0dmFyIHBvc2l0aW9uID0gc2NvcGUub2JqZWN0LnBvc2l0aW9uO1xuXG5cdFx0XHRvZmZzZXQuY29weSggcG9zaXRpb24gKS5zdWIoIHNjb3BlLnRhcmdldCApO1xuXG5cdFx0XHQvLyByb3RhdGUgb2Zmc2V0IHRvIFwieS1heGlzLWlzLXVwXCIgc3BhY2Vcblx0XHRcdG9mZnNldC5hcHBseVF1YXRlcm5pb24oIHF1YXQgKTtcblxuXHRcdFx0Ly8gYW5nbGUgZnJvbSB6LWF4aXMgYXJvdW5kIHktYXhpc1xuXHRcdFx0c3BoZXJpY2FsLnNldEZyb21WZWN0b3IzKCBvZmZzZXQgKTtcblxuXHRcdFx0aWYgKCBzY29wZS5hdXRvUm90YXRlICYmIHN0YXRlID09PSBTVEFURS5OT05FICkge1xuXG5cdFx0XHRcdHJvdGF0ZUxlZnQoIGdldEF1dG9Sb3RhdGlvbkFuZ2xlKCkgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRzcGhlcmljYWwudGhldGEgKz0gc3BoZXJpY2FsRGVsdGEudGhldGE7XG5cdFx0XHRzcGhlcmljYWwucGhpICs9IHNwaGVyaWNhbERlbHRhLnBoaTtcblxuXHRcdFx0Ly8gcmVzdHJpY3QgdGhldGEgdG8gYmUgYmV0d2VlbiBkZXNpcmVkIGxpbWl0c1xuXHRcdFx0c3BoZXJpY2FsLnRoZXRhID0gTWF0aC5tYXgoIHNjb3BlLm1pbkF6aW11dGhBbmdsZSwgTWF0aC5taW4oIHNjb3BlLm1heEF6aW11dGhBbmdsZSwgc3BoZXJpY2FsLnRoZXRhICkgKTtcblxuXHRcdFx0Ly8gcmVzdHJpY3QgcGhpIHRvIGJlIGJldHdlZW4gZGVzaXJlZCBsaW1pdHNcblx0XHRcdHNwaGVyaWNhbC5waGkgPSBNYXRoLm1heCggc2NvcGUubWluUG9sYXJBbmdsZSwgTWF0aC5taW4oIHNjb3BlLm1heFBvbGFyQW5nbGUsIHNwaGVyaWNhbC5waGkgKSApO1xuXG5cdFx0XHRzcGhlcmljYWwubWFrZVNhZmUoKTtcblxuXG5cdFx0XHRzcGhlcmljYWwucmFkaXVzICo9IHNjYWxlO1xuXG5cdFx0XHQvLyByZXN0cmljdCByYWRpdXMgdG8gYmUgYmV0d2VlbiBkZXNpcmVkIGxpbWl0c1xuXHRcdFx0c3BoZXJpY2FsLnJhZGl1cyA9IE1hdGgubWF4KCBzY29wZS5taW5EaXN0YW5jZSwgTWF0aC5taW4oIHNjb3BlLm1heERpc3RhbmNlLCBzcGhlcmljYWwucmFkaXVzICkgKTtcblxuXHRcdFx0Ly8gbW92ZSB0YXJnZXQgdG8gcGFubmVkIGxvY2F0aW9uXG5cdFx0XHRzY29wZS50YXJnZXQuYWRkKCBwYW5PZmZzZXQgKTtcblxuXHRcdFx0b2Zmc2V0LnNldEZyb21TcGhlcmljYWwoIHNwaGVyaWNhbCApO1xuXG5cdFx0XHQvLyByb3RhdGUgb2Zmc2V0IGJhY2sgdG8gXCJjYW1lcmEtdXAtdmVjdG9yLWlzLXVwXCIgc3BhY2Vcblx0XHRcdG9mZnNldC5hcHBseVF1YXRlcm5pb24oIHF1YXRJbnZlcnNlICk7XG5cblx0XHRcdHBvc2l0aW9uLmNvcHkoIHNjb3BlLnRhcmdldCApLmFkZCggb2Zmc2V0ICk7XG5cblx0XHRcdHNjb3BlLm9iamVjdC5sb29rQXQoIHNjb3BlLnRhcmdldCApO1xuXG5cdFx0XHRpZiAoIHNjb3BlLmVuYWJsZURhbXBpbmcgPT09IHRydWUgKSB7XG5cblx0XHRcdFx0c3BoZXJpY2FsRGVsdGEudGhldGEgKj0gKCAxIC0gc2NvcGUuZGFtcGluZ0ZhY3RvciApO1xuXHRcdFx0XHRzcGhlcmljYWxEZWx0YS5waGkgKj0gKCAxIC0gc2NvcGUuZGFtcGluZ0ZhY3RvciApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdHNwaGVyaWNhbERlbHRhLnNldCggMCwgMCwgMCApO1xuXG5cdFx0XHR9XG5cblx0XHRcdHNjYWxlID0gMTtcblx0XHRcdHBhbk9mZnNldC5zZXQoIDAsIDAsIDAgKTtcblxuXHRcdFx0Ly8gdXBkYXRlIGNvbmRpdGlvbiBpczpcblx0XHRcdC8vIG1pbihjYW1lcmEgZGlzcGxhY2VtZW50LCBjYW1lcmEgcm90YXRpb24gaW4gcmFkaWFucyleMiA+IEVQU1xuXHRcdFx0Ly8gdXNpbmcgc21hbGwtYW5nbGUgYXBwcm94aW1hdGlvbiBjb3MoeC8yKSA9IDEgLSB4XjIgLyA4XG5cblx0XHRcdGlmICggem9vbUNoYW5nZWQgfHxcblx0XHRcdFx0bGFzdFBvc2l0aW9uLmRpc3RhbmNlVG9TcXVhcmVkKCBzY29wZS5vYmplY3QucG9zaXRpb24gKSA+IEVQUyB8fFxuXHRcdFx0XHQ4ICogKCAxIC0gbGFzdFF1YXRlcm5pb24uZG90KCBzY29wZS5vYmplY3QucXVhdGVybmlvbiApICkgPiBFUFMgKSB7XG5cblx0XHRcdFx0c2NvcGUuZGlzcGF0Y2hFdmVudCggY2hhbmdlRXZlbnQgKTtcblxuXHRcdFx0XHRsYXN0UG9zaXRpb24uY29weSggc2NvcGUub2JqZWN0LnBvc2l0aW9uICk7XG5cdFx0XHRcdGxhc3RRdWF0ZXJuaW9uLmNvcHkoIHNjb3BlLm9iamVjdC5xdWF0ZXJuaW9uICk7XG5cdFx0XHRcdHpvb21DaGFuZ2VkID0gZmFsc2U7XG5cblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXG5cdFx0fTtcblxuXHR9KCk7XG5cblx0dGhpcy5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0c2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAnY29udGV4dG1lbnUnLCBvbkNvbnRleHRNZW51LCBmYWxzZSApO1xuXHRcdHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ21vdXNlZG93bicsIG9uTW91c2VEb3duLCBmYWxzZSApO1xuXHRcdHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ3doZWVsJywgb25Nb3VzZVdoZWVsLCBmYWxzZSApO1xuXG5cdFx0c2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAndG91Y2hzdGFydCcsIG9uVG91Y2hTdGFydCwgZmFsc2UgKTtcblx0XHRzY29wZS5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICd0b3VjaGVuZCcsIG9uVG91Y2hFbmQsIGZhbHNlICk7XG5cdFx0c2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAndG91Y2htb3ZlJywgb25Ub3VjaE1vdmUsIGZhbHNlICk7XG5cblx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAnbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUsIGZhbHNlICk7XG5cdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ21vdXNldXAnLCBvbk1vdXNlVXAsIGZhbHNlICk7XG5cblx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2tleWRvd24nLCBvbktleURvd24sIGZhbHNlICk7XG5cblx0XHQvL3Njb3BlLmRpc3BhdGNoRXZlbnQoIHsgdHlwZTogJ2Rpc3Bvc2UnIH0gKTsgLy8gc2hvdWxkIHRoaXMgYmUgYWRkZWQgaGVyZT9cblxuXHR9O1xuXG5cdC8vXG5cdC8vIGludGVybmFsc1xuXHQvL1xuXG5cdHZhciBzY29wZSA9IHRoaXM7XG5cblx0dmFyIGNoYW5nZUV2ZW50ID0geyB0eXBlOiAnY2hhbmdlJyB9O1xuXHR2YXIgc3RhcnRFdmVudCA9IHsgdHlwZTogJ3N0YXJ0JyB9O1xuXHR2YXIgZW5kRXZlbnQgPSB7IHR5cGU6ICdlbmQnIH07XG5cblx0dmFyIFNUQVRFID0geyBOT05FOiAtIDEsIFJPVEFURTogMCwgRE9MTFk6IDEsIFBBTjogMiwgVE9VQ0hfUk9UQVRFOiAzLCBUT1VDSF9ET0xMWTogNCwgVE9VQ0hfUEFOOiA1IH07XG5cblx0dmFyIHN0YXRlID0gU1RBVEUuTk9ORTtcblxuXHR2YXIgRVBTID0gMC4wMDAwMDE7XG5cblx0Ly8gY3VycmVudCBwb3NpdGlvbiBpbiBzcGhlcmljYWwgY29vcmRpbmF0ZXNcblx0dmFyIHNwaGVyaWNhbCA9IG5ldyBUSFJFRS5TcGhlcmljYWwoKTtcblx0dmFyIHNwaGVyaWNhbERlbHRhID0gbmV3IFRIUkVFLlNwaGVyaWNhbCgpO1xuXG5cdHZhciBzY2FsZSA9IDE7XG5cdHZhciBwYW5PZmZzZXQgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuXHR2YXIgem9vbUNoYW5nZWQgPSBmYWxzZTtcblxuXHR2YXIgcm90YXRlU3RhcnQgPSBuZXcgVEhSRUUuVmVjdG9yMigpO1xuXHR2YXIgcm90YXRlRW5kID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcblx0dmFyIHJvdGF0ZURlbHRhID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcblxuXHR2YXIgcGFuU3RhcnQgPSBuZXcgVEhSRUUuVmVjdG9yMigpO1xuXHR2YXIgcGFuRW5kID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcblx0dmFyIHBhbkRlbHRhID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcblxuXHR2YXIgZG9sbHlTdGFydCA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7XG5cdHZhciBkb2xseUVuZCA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7XG5cdHZhciBkb2xseURlbHRhID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcblxuXHRmdW5jdGlvbiBnZXRBdXRvUm90YXRpb25BbmdsZSgpIHtcblxuXHRcdHJldHVybiAyICogTWF0aC5QSSAvIDYwIC8gNjAgKiBzY29wZS5hdXRvUm90YXRlU3BlZWQ7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGdldFpvb21TY2FsZSgpIHtcblxuXHRcdHJldHVybiBNYXRoLnBvdyggMC45NSwgc2NvcGUuem9vbVNwZWVkICk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIHJvdGF0ZUxlZnQoIGFuZ2xlICkge1xuXG5cdFx0c3BoZXJpY2FsRGVsdGEudGhldGEgLT0gYW5nbGU7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIHJvdGF0ZVVwKCBhbmdsZSApIHtcblxuXHRcdHNwaGVyaWNhbERlbHRhLnBoaSAtPSBhbmdsZTtcblxuXHR9XG5cblx0dmFyIHBhbkxlZnQgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHR2YXIgdiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG5cblx0XHRyZXR1cm4gZnVuY3Rpb24gcGFuTGVmdCggZGlzdGFuY2UsIG9iamVjdE1hdHJpeCApIHtcblxuXHRcdFx0di5zZXRGcm9tTWF0cml4Q29sdW1uKCBvYmplY3RNYXRyaXgsIDAgKTsgLy8gZ2V0IFggY29sdW1uIG9mIG9iamVjdE1hdHJpeFxuXHRcdFx0di5tdWx0aXBseVNjYWxhciggLSBkaXN0YW5jZSApO1xuXG5cdFx0XHRwYW5PZmZzZXQuYWRkKCB2ICk7XG5cblx0XHR9O1xuXG5cdH0oKTtcblxuXHR2YXIgcGFuVXAgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHR2YXIgdiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG5cblx0XHRyZXR1cm4gZnVuY3Rpb24gcGFuVXAoIGRpc3RhbmNlLCBvYmplY3RNYXRyaXggKSB7XG5cblx0XHRcdHYuc2V0RnJvbU1hdHJpeENvbHVtbiggb2JqZWN0TWF0cml4LCAxICk7IC8vIGdldCBZIGNvbHVtbiBvZiBvYmplY3RNYXRyaXhcblx0XHRcdHYubXVsdGlwbHlTY2FsYXIoIGRpc3RhbmNlICk7XG5cblx0XHRcdHBhbk9mZnNldC5hZGQoIHYgKTtcblxuXHRcdH07XG5cblx0fSgpO1xuXG5cdC8vIGRlbHRhWCBhbmQgZGVsdGFZIGFyZSBpbiBwaXhlbHM7IHJpZ2h0IGFuZCBkb3duIGFyZSBwb3NpdGl2ZVxuXHR2YXIgcGFuID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0dmFyIG9mZnNldCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG5cblx0XHRyZXR1cm4gZnVuY3Rpb24gcGFuKCBkZWx0YVgsIGRlbHRhWSApIHtcblxuXHRcdFx0dmFyIGVsZW1lbnQgPSBzY29wZS5kb21FbGVtZW50ID09PSBkb2N1bWVudCA/IHNjb3BlLmRvbUVsZW1lbnQuYm9keSA6IHNjb3BlLmRvbUVsZW1lbnQ7XG5cblx0XHRcdGlmICggc2NvcGUub2JqZWN0LmlzUGVyc3BlY3RpdmVDYW1lcmEgKSB7XG5cblx0XHRcdFx0Ly8gcGVyc3BlY3RpdmVcblx0XHRcdFx0dmFyIHBvc2l0aW9uID0gc2NvcGUub2JqZWN0LnBvc2l0aW9uO1xuXHRcdFx0XHRvZmZzZXQuY29weSggcG9zaXRpb24gKS5zdWIoIHNjb3BlLnRhcmdldCApO1xuXHRcdFx0XHR2YXIgdGFyZ2V0RGlzdGFuY2UgPSBvZmZzZXQubGVuZ3RoKCk7XG5cblx0XHRcdFx0Ly8gaGFsZiBvZiB0aGUgZm92IGlzIGNlbnRlciB0byB0b3Agb2Ygc2NyZWVuXG5cdFx0XHRcdHRhcmdldERpc3RhbmNlICo9IE1hdGgudGFuKCAoIHNjb3BlLm9iamVjdC5mb3YgLyAyICkgKiBNYXRoLlBJIC8gMTgwLjAgKTtcblxuXHRcdFx0XHQvLyB3ZSBhY3R1YWxseSBkb24ndCB1c2Ugc2NyZWVuV2lkdGgsIHNpbmNlIHBlcnNwZWN0aXZlIGNhbWVyYSBpcyBmaXhlZCB0byBzY3JlZW4gaGVpZ2h0XG5cdFx0XHRcdHBhbkxlZnQoIDIgKiBkZWx0YVggKiB0YXJnZXREaXN0YW5jZSAvIGVsZW1lbnQuY2xpZW50SGVpZ2h0LCBzY29wZS5vYmplY3QubWF0cml4ICk7XG5cdFx0XHRcdHBhblVwKCAyICogZGVsdGFZICogdGFyZ2V0RGlzdGFuY2UgLyBlbGVtZW50LmNsaWVudEhlaWdodCwgc2NvcGUub2JqZWN0Lm1hdHJpeCApO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBzY29wZS5vYmplY3QuaXNPcnRob2dyYXBoaWNDYW1lcmEgKSB7XG5cblx0XHRcdFx0Ly8gb3J0aG9ncmFwaGljXG5cdFx0XHRcdHBhbkxlZnQoIGRlbHRhWCAqICggc2NvcGUub2JqZWN0LnJpZ2h0IC0gc2NvcGUub2JqZWN0LmxlZnQgKSAvIHNjb3BlLm9iamVjdC56b29tIC8gZWxlbWVudC5jbGllbnRXaWR0aCwgc2NvcGUub2JqZWN0Lm1hdHJpeCApO1xuXHRcdFx0XHRwYW5VcCggZGVsdGFZICogKCBzY29wZS5vYmplY3QudG9wIC0gc2NvcGUub2JqZWN0LmJvdHRvbSApIC8gc2NvcGUub2JqZWN0Lnpvb20gLyBlbGVtZW50LmNsaWVudEhlaWdodCwgc2NvcGUub2JqZWN0Lm1hdHJpeCApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdC8vIGNhbWVyYSBuZWl0aGVyIG9ydGhvZ3JhcGhpYyBub3IgcGVyc3BlY3RpdmVcblx0XHRcdFx0Y29uc29sZS53YXJuKCAnV0FSTklORzogT3JiaXRDb250cm9scy5qcyBlbmNvdW50ZXJlZCBhbiB1bmtub3duIGNhbWVyYSB0eXBlIC0gcGFuIGRpc2FibGVkLicgKTtcblx0XHRcdFx0c2NvcGUuZW5hYmxlUGFuID0gZmFsc2U7XG5cblx0XHRcdH1cblxuXHRcdH07XG5cblx0fSgpO1xuXG5cdGZ1bmN0aW9uIGRvbGx5SW4oIGRvbGx5U2NhbGUgKSB7XG5cblx0XHRpZiAoIHNjb3BlLm9iamVjdC5pc1BlcnNwZWN0aXZlQ2FtZXJhICkge1xuXG5cdFx0XHRzY2FsZSAvPSBkb2xseVNjYWxlO1xuXG5cdFx0fSBlbHNlIGlmICggc2NvcGUub2JqZWN0LmlzT3J0aG9ncmFwaGljQ2FtZXJhICkge1xuXG5cdFx0XHRzY29wZS5vYmplY3Quem9vbSA9IE1hdGgubWF4KCBzY29wZS5taW5ab29tLCBNYXRoLm1pbiggc2NvcGUubWF4Wm9vbSwgc2NvcGUub2JqZWN0Lnpvb20gKiBkb2xseVNjYWxlICkgKTtcblx0XHRcdHNjb3BlLm9iamVjdC51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG5cdFx0XHR6b29tQ2hhbmdlZCA9IHRydWU7XG5cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHRjb25zb2xlLndhcm4oICdXQVJOSU5HOiBPcmJpdENvbnRyb2xzLmpzIGVuY291bnRlcmVkIGFuIHVua25vd24gY2FtZXJhIHR5cGUgLSBkb2xseS96b29tIGRpc2FibGVkLicgKTtcblx0XHRcdHNjb3BlLmVuYWJsZVpvb20gPSBmYWxzZTtcblxuXHRcdH1cblxuXHR9XG5cblx0ZnVuY3Rpb24gZG9sbHlPdXQoIGRvbGx5U2NhbGUgKSB7XG5cblx0XHRpZiAoIHNjb3BlLm9iamVjdC5pc1BlcnNwZWN0aXZlQ2FtZXJhICkge1xuXG5cdFx0XHRzY2FsZSAqPSBkb2xseVNjYWxlO1xuXG5cdFx0fSBlbHNlIGlmICggc2NvcGUub2JqZWN0LmlzT3J0aG9ncmFwaGljQ2FtZXJhICkge1xuXG5cdFx0XHRzY29wZS5vYmplY3Quem9vbSA9IE1hdGgubWF4KCBzY29wZS5taW5ab29tLCBNYXRoLm1pbiggc2NvcGUubWF4Wm9vbSwgc2NvcGUub2JqZWN0Lnpvb20gLyBkb2xseVNjYWxlICkgKTtcblx0XHRcdHNjb3BlLm9iamVjdC51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG5cdFx0XHR6b29tQ2hhbmdlZCA9IHRydWU7XG5cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHRjb25zb2xlLndhcm4oICdXQVJOSU5HOiBPcmJpdENvbnRyb2xzLmpzIGVuY291bnRlcmVkIGFuIHVua25vd24gY2FtZXJhIHR5cGUgLSBkb2xseS96b29tIGRpc2FibGVkLicgKTtcblx0XHRcdHNjb3BlLmVuYWJsZVpvb20gPSBmYWxzZTtcblxuXHRcdH1cblxuXHR9XG5cblx0Ly9cblx0Ly8gZXZlbnQgY2FsbGJhY2tzIC0gdXBkYXRlIHRoZSBvYmplY3Qgc3RhdGVcblx0Ly9cblxuXHRmdW5jdGlvbiBoYW5kbGVNb3VzZURvd25Sb3RhdGUoIGV2ZW50ICkge1xuXG5cdFx0Ly9jb25zb2xlLmxvZyggJ2hhbmRsZU1vdXNlRG93blJvdGF0ZScgKTtcblxuXHRcdHJvdGF0ZVN0YXJ0LnNldCggZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSApO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBoYW5kbGVNb3VzZURvd25Eb2xseSggZXZlbnQgKSB7XG5cblx0XHQvL2NvbnNvbGUubG9nKCAnaGFuZGxlTW91c2VEb3duRG9sbHknICk7XG5cblx0XHRkb2xseVN0YXJ0LnNldCggZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSApO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBoYW5kbGVNb3VzZURvd25QYW4oIGV2ZW50ICkge1xuXG5cdFx0Ly9jb25zb2xlLmxvZyggJ2hhbmRsZU1vdXNlRG93blBhbicgKTtcblxuXHRcdHBhblN0YXJ0LnNldCggZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSApO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBoYW5kbGVNb3VzZU1vdmVSb3RhdGUoIGV2ZW50ICkge1xuXG5cdFx0Ly9jb25zb2xlLmxvZyggJ2hhbmRsZU1vdXNlTW92ZVJvdGF0ZScgKTtcblxuXHRcdHJvdGF0ZUVuZC5zZXQoIGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkgKTtcblx0XHRyb3RhdGVEZWx0YS5zdWJWZWN0b3JzKCByb3RhdGVFbmQsIHJvdGF0ZVN0YXJ0ICk7XG5cblx0XHR2YXIgZWxlbWVudCA9IHNjb3BlLmRvbUVsZW1lbnQgPT09IGRvY3VtZW50ID8gc2NvcGUuZG9tRWxlbWVudC5ib2R5IDogc2NvcGUuZG9tRWxlbWVudDtcblxuXHRcdC8vIHJvdGF0aW5nIGFjcm9zcyB3aG9sZSBzY3JlZW4gZ29lcyAzNjAgZGVncmVlcyBhcm91bmRcblx0XHRyb3RhdGVMZWZ0KCAyICogTWF0aC5QSSAqIHJvdGF0ZURlbHRhLnggLyBlbGVtZW50LmNsaWVudFdpZHRoICogc2NvcGUucm90YXRlU3BlZWQgKTtcblxuXHRcdC8vIHJvdGF0aW5nIHVwIGFuZCBkb3duIGFsb25nIHdob2xlIHNjcmVlbiBhdHRlbXB0cyB0byBnbyAzNjAsIGJ1dCBsaW1pdGVkIHRvIDE4MFxuXHRcdHJvdGF0ZVVwKCAyICogTWF0aC5QSSAqIHJvdGF0ZURlbHRhLnkgLyBlbGVtZW50LmNsaWVudEhlaWdodCAqIHNjb3BlLnJvdGF0ZVNwZWVkICk7XG5cblx0XHRyb3RhdGVTdGFydC5jb3B5KCByb3RhdGVFbmQgKTtcblxuXHRcdHNjb3BlLnVwZGF0ZSgpO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBoYW5kbGVNb3VzZU1vdmVEb2xseSggZXZlbnQgKSB7XG5cblx0XHQvL2NvbnNvbGUubG9nKCAnaGFuZGxlTW91c2VNb3ZlRG9sbHknICk7XG5cblx0XHRkb2xseUVuZC5zZXQoIGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkgKTtcblxuXHRcdGRvbGx5RGVsdGEuc3ViVmVjdG9ycyggZG9sbHlFbmQsIGRvbGx5U3RhcnQgKTtcblxuXHRcdGlmICggZG9sbHlEZWx0YS55ID4gMCApIHtcblxuXHRcdFx0ZG9sbHlJbiggZ2V0Wm9vbVNjYWxlKCkgKTtcblxuXHRcdH0gZWxzZSBpZiAoIGRvbGx5RGVsdGEueSA8IDAgKSB7XG5cblx0XHRcdGRvbGx5T3V0KCBnZXRab29tU2NhbGUoKSApO1xuXG5cdFx0fVxuXG5cdFx0ZG9sbHlTdGFydC5jb3B5KCBkb2xseUVuZCApO1xuXG5cdFx0c2NvcGUudXBkYXRlKCk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGhhbmRsZU1vdXNlTW92ZVBhbiggZXZlbnQgKSB7XG5cblx0XHQvL2NvbnNvbGUubG9nKCAnaGFuZGxlTW91c2VNb3ZlUGFuJyApO1xuXG5cdFx0cGFuRW5kLnNldCggZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSApO1xuXG5cdFx0cGFuRGVsdGEuc3ViVmVjdG9ycyggcGFuRW5kLCBwYW5TdGFydCApO1xuXG5cdFx0cGFuKCBwYW5EZWx0YS54LCBwYW5EZWx0YS55ICk7XG5cblx0XHRwYW5TdGFydC5jb3B5KCBwYW5FbmQgKTtcblxuXHRcdHNjb3BlLnVwZGF0ZSgpO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBoYW5kbGVNb3VzZVVwKCBldmVudCApIHtcblxuXHRcdC8vIGNvbnNvbGUubG9nKCAnaGFuZGxlTW91c2VVcCcgKTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gaGFuZGxlTW91c2VXaGVlbCggZXZlbnQgKSB7XG5cblx0XHQvLyBjb25zb2xlLmxvZyggJ2hhbmRsZU1vdXNlV2hlZWwnICk7XG5cblx0XHRpZiAoIGV2ZW50LmRlbHRhWSA8IDAgKSB7XG5cblx0XHRcdGRvbGx5T3V0KCBnZXRab29tU2NhbGUoKSApO1xuXG5cdFx0fSBlbHNlIGlmICggZXZlbnQuZGVsdGFZID4gMCApIHtcblxuXHRcdFx0ZG9sbHlJbiggZ2V0Wm9vbVNjYWxlKCkgKTtcblxuXHRcdH1cblxuXHRcdHNjb3BlLnVwZGF0ZSgpO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBoYW5kbGVLZXlEb3duKCBldmVudCApIHtcblxuXHRcdC8vY29uc29sZS5sb2coICdoYW5kbGVLZXlEb3duJyApO1xuXG5cdFx0c3dpdGNoICggZXZlbnQua2V5Q29kZSApIHtcblxuXHRcdFx0Y2FzZSBzY29wZS5rZXlzLlVQOlxuXHRcdFx0XHRwYW4oIDAsIHNjb3BlLmtleVBhblNwZWVkICk7XG5cdFx0XHRcdHNjb3BlLnVwZGF0ZSgpO1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSBzY29wZS5rZXlzLkJPVFRPTTpcblx0XHRcdFx0cGFuKCAwLCAtIHNjb3BlLmtleVBhblNwZWVkICk7XG5cdFx0XHRcdHNjb3BlLnVwZGF0ZSgpO1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSBzY29wZS5rZXlzLkxFRlQ6XG5cdFx0XHRcdHBhbiggc2NvcGUua2V5UGFuU3BlZWQsIDAgKTtcblx0XHRcdFx0c2NvcGUudXBkYXRlKCk7XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlIHNjb3BlLmtleXMuUklHSFQ6XG5cdFx0XHRcdHBhbiggLSBzY29wZS5rZXlQYW5TcGVlZCwgMCApO1xuXHRcdFx0XHRzY29wZS51cGRhdGUoKTtcblx0XHRcdFx0YnJlYWs7XG5cblx0XHR9XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGhhbmRsZVRvdWNoU3RhcnRSb3RhdGUoIGV2ZW50ICkge1xuXG5cdFx0Ly9jb25zb2xlLmxvZyggJ2hhbmRsZVRvdWNoU3RhcnRSb3RhdGUnICk7XG5cblx0XHRyb3RhdGVTdGFydC5zZXQoIGV2ZW50LnRvdWNoZXNbIDAgXS5wYWdlWCwgZXZlbnQudG91Y2hlc1sgMCBdLnBhZ2VZICk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGhhbmRsZVRvdWNoU3RhcnREb2xseSggZXZlbnQgKSB7XG5cblx0XHQvL2NvbnNvbGUubG9nKCAnaGFuZGxlVG91Y2hTdGFydERvbGx5JyApO1xuXG5cdFx0dmFyIGR4ID0gZXZlbnQudG91Y2hlc1sgMCBdLnBhZ2VYIC0gZXZlbnQudG91Y2hlc1sgMSBdLnBhZ2VYO1xuXHRcdHZhciBkeSA9IGV2ZW50LnRvdWNoZXNbIDAgXS5wYWdlWSAtIGV2ZW50LnRvdWNoZXNbIDEgXS5wYWdlWTtcblxuXHRcdHZhciBkaXN0YW5jZSA9IE1hdGguc3FydCggZHggKiBkeCArIGR5ICogZHkgKTtcblxuXHRcdGRvbGx5U3RhcnQuc2V0KCAwLCBkaXN0YW5jZSApO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBoYW5kbGVUb3VjaFN0YXJ0UGFuKCBldmVudCApIHtcblxuXHRcdC8vY29uc29sZS5sb2coICdoYW5kbGVUb3VjaFN0YXJ0UGFuJyApO1xuXG5cdFx0cGFuU3RhcnQuc2V0KCBldmVudC50b3VjaGVzWyAwIF0ucGFnZVgsIGV2ZW50LnRvdWNoZXNbIDAgXS5wYWdlWSApO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBoYW5kbGVUb3VjaE1vdmVSb3RhdGUoIGV2ZW50ICkge1xuXG5cdFx0Ly9jb25zb2xlLmxvZyggJ2hhbmRsZVRvdWNoTW92ZVJvdGF0ZScgKTtcblxuXHRcdHJvdGF0ZUVuZC5zZXQoIGV2ZW50LnRvdWNoZXNbIDAgXS5wYWdlWCwgZXZlbnQudG91Y2hlc1sgMCBdLnBhZ2VZICk7XG5cdFx0cm90YXRlRGVsdGEuc3ViVmVjdG9ycyggcm90YXRlRW5kLCByb3RhdGVTdGFydCApO1xuXG5cdFx0dmFyIGVsZW1lbnQgPSBzY29wZS5kb21FbGVtZW50ID09PSBkb2N1bWVudCA/IHNjb3BlLmRvbUVsZW1lbnQuYm9keSA6IHNjb3BlLmRvbUVsZW1lbnQ7XG5cblx0XHQvLyByb3RhdGluZyBhY3Jvc3Mgd2hvbGUgc2NyZWVuIGdvZXMgMzYwIGRlZ3JlZXMgYXJvdW5kXG5cdFx0cm90YXRlTGVmdCggMiAqIE1hdGguUEkgKiByb3RhdGVEZWx0YS54IC8gZWxlbWVudC5jbGllbnRXaWR0aCAqIHNjb3BlLnJvdGF0ZVNwZWVkICk7XG5cblx0XHQvLyByb3RhdGluZyB1cCBhbmQgZG93biBhbG9uZyB3aG9sZSBzY3JlZW4gYXR0ZW1wdHMgdG8gZ28gMzYwLCBidXQgbGltaXRlZCB0byAxODBcblx0XHRyb3RhdGVVcCggMiAqIE1hdGguUEkgKiByb3RhdGVEZWx0YS55IC8gZWxlbWVudC5jbGllbnRIZWlnaHQgKiBzY29wZS5yb3RhdGVTcGVlZCApO1xuXG5cdFx0cm90YXRlU3RhcnQuY29weSggcm90YXRlRW5kICk7XG5cblx0XHRzY29wZS51cGRhdGUoKTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gaGFuZGxlVG91Y2hNb3ZlRG9sbHkoIGV2ZW50ICkge1xuXG5cdFx0Ly9jb25zb2xlLmxvZyggJ2hhbmRsZVRvdWNoTW92ZURvbGx5JyApO1xuXG5cdFx0dmFyIGR4ID0gZXZlbnQudG91Y2hlc1sgMCBdLnBhZ2VYIC0gZXZlbnQudG91Y2hlc1sgMSBdLnBhZ2VYO1xuXHRcdHZhciBkeSA9IGV2ZW50LnRvdWNoZXNbIDAgXS5wYWdlWSAtIGV2ZW50LnRvdWNoZXNbIDEgXS5wYWdlWTtcblxuXHRcdHZhciBkaXN0YW5jZSA9IE1hdGguc3FydCggZHggKiBkeCArIGR5ICogZHkgKTtcblxuXHRcdGRvbGx5RW5kLnNldCggMCwgZGlzdGFuY2UgKTtcblxuXHRcdGRvbGx5RGVsdGEuc3ViVmVjdG9ycyggZG9sbHlFbmQsIGRvbGx5U3RhcnQgKTtcblxuXHRcdGlmICggZG9sbHlEZWx0YS55ID4gMCApIHtcblxuXHRcdFx0ZG9sbHlPdXQoIGdldFpvb21TY2FsZSgpICk7XG5cblx0XHR9IGVsc2UgaWYgKCBkb2xseURlbHRhLnkgPCAwICkge1xuXG5cdFx0XHRkb2xseUluKCBnZXRab29tU2NhbGUoKSApO1xuXG5cdFx0fVxuXG5cdFx0ZG9sbHlTdGFydC5jb3B5KCBkb2xseUVuZCApO1xuXG5cdFx0c2NvcGUudXBkYXRlKCk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGhhbmRsZVRvdWNoTW92ZVBhbiggZXZlbnQgKSB7XG5cblx0XHQvL2NvbnNvbGUubG9nKCAnaGFuZGxlVG91Y2hNb3ZlUGFuJyApO1xuXG5cdFx0cGFuRW5kLnNldCggZXZlbnQudG91Y2hlc1sgMCBdLnBhZ2VYLCBldmVudC50b3VjaGVzWyAwIF0ucGFnZVkgKTtcblxuXHRcdHBhbkRlbHRhLnN1YlZlY3RvcnMoIHBhbkVuZCwgcGFuU3RhcnQgKTtcblxuXHRcdHBhbiggcGFuRGVsdGEueCwgcGFuRGVsdGEueSApO1xuXG5cdFx0cGFuU3RhcnQuY29weSggcGFuRW5kICk7XG5cblx0XHRzY29wZS51cGRhdGUoKTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gaGFuZGxlVG91Y2hFbmQoIGV2ZW50ICkge1xuXG5cdFx0Ly9jb25zb2xlLmxvZyggJ2hhbmRsZVRvdWNoRW5kJyApO1xuXG5cdH1cblxuXHQvL1xuXHQvLyBldmVudCBoYW5kbGVycyAtIEZTTTogbGlzdGVuIGZvciBldmVudHMgYW5kIHJlc2V0IHN0YXRlXG5cdC8vXG5cblx0ZnVuY3Rpb24gb25Nb3VzZURvd24oIGV2ZW50ICkge1xuXG5cdFx0aWYgKCBzY29wZS5lbmFibGVkID09PSBmYWxzZSApIHJldHVybjtcblxuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRzd2l0Y2ggKCBldmVudC5idXR0b24gKSB7XG5cblx0XHRcdGNhc2Ugc2NvcGUubW91c2VCdXR0b25zLk9SQklUOlxuXG5cdFx0XHRcdGlmICggc2NvcGUuZW5hYmxlUm90YXRlID09PSBmYWxzZSApIHJldHVybjtcblxuXHRcdFx0XHRoYW5kbGVNb3VzZURvd25Sb3RhdGUoIGV2ZW50ICk7XG5cblx0XHRcdFx0c3RhdGUgPSBTVEFURS5ST1RBVEU7XG5cblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2Ugc2NvcGUubW91c2VCdXR0b25zLlpPT006XG5cblx0XHRcdFx0aWYgKCBzY29wZS5lbmFibGVab29tID09PSBmYWxzZSApIHJldHVybjtcblxuXHRcdFx0XHRoYW5kbGVNb3VzZURvd25Eb2xseSggZXZlbnQgKTtcblxuXHRcdFx0XHRzdGF0ZSA9IFNUQVRFLkRPTExZO1xuXG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlIHNjb3BlLm1vdXNlQnV0dG9ucy5QQU46XG5cblx0XHRcdFx0aWYgKCBzY29wZS5lbmFibGVQYW4gPT09IGZhbHNlICkgcmV0dXJuO1xuXG5cdFx0XHRcdGhhbmRsZU1vdXNlRG93blBhbiggZXZlbnQgKTtcblxuXHRcdFx0XHRzdGF0ZSA9IFNUQVRFLlBBTjtcblxuXHRcdFx0XHRicmVhaztcblxuXHRcdH1cblxuXHRcdGlmICggc3RhdGUgIT09IFNUQVRFLk5PTkUgKSB7XG5cblx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSwgZmFsc2UgKTtcblx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdtb3VzZXVwJywgb25Nb3VzZVVwLCBmYWxzZSApO1xuXG5cdFx0XHRzY29wZS5kaXNwYXRjaEV2ZW50KCBzdGFydEV2ZW50ICk7XG5cblx0XHR9XG5cblx0fVxuXG5cdGZ1bmN0aW9uIG9uTW91c2VNb3ZlKCBldmVudCApIHtcblxuXHRcdGlmICggc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UgKSByZXR1cm47XG5cblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0c3dpdGNoICggc3RhdGUgKSB7XG5cblx0XHRcdGNhc2UgU1RBVEUuUk9UQVRFOlxuXG5cdFx0XHRcdGlmICggc2NvcGUuZW5hYmxlUm90YXRlID09PSBmYWxzZSApIHJldHVybjtcblxuXHRcdFx0XHRoYW5kbGVNb3VzZU1vdmVSb3RhdGUoIGV2ZW50ICk7XG5cblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgU1RBVEUuRE9MTFk6XG5cblx0XHRcdFx0aWYgKCBzY29wZS5lbmFibGVab29tID09PSBmYWxzZSApIHJldHVybjtcblxuXHRcdFx0XHRoYW5kbGVNb3VzZU1vdmVEb2xseSggZXZlbnQgKTtcblxuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSBTVEFURS5QQU46XG5cblx0XHRcdFx0aWYgKCBzY29wZS5lbmFibGVQYW4gPT09IGZhbHNlICkgcmV0dXJuO1xuXG5cdFx0XHRcdGhhbmRsZU1vdXNlTW92ZVBhbiggZXZlbnQgKTtcblxuXHRcdFx0XHRicmVhaztcblxuXHRcdH1cblxuXHR9XG5cblx0ZnVuY3Rpb24gb25Nb3VzZVVwKCBldmVudCApIHtcblxuXHRcdGlmICggc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UgKSByZXR1cm47XG5cblx0XHRoYW5kbGVNb3VzZVVwKCBldmVudCApO1xuXG5cdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ21vdXNlbW92ZScsIG9uTW91c2VNb3ZlLCBmYWxzZSApO1xuXHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdtb3VzZXVwJywgb25Nb3VzZVVwLCBmYWxzZSApO1xuXG5cdFx0c2NvcGUuZGlzcGF0Y2hFdmVudCggZW5kRXZlbnQgKTtcblxuXHRcdHN0YXRlID0gU1RBVEUuTk9ORTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gb25Nb3VzZVdoZWVsKCBldmVudCApIHtcblxuXHRcdGlmICggc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UgfHwgc2NvcGUuZW5hYmxlWm9vbSA9PT0gZmFsc2UgfHwgKCBzdGF0ZSAhPT0gU1RBVEUuTk9ORSAmJiBzdGF0ZSAhPT0gU1RBVEUuUk9UQVRFICkgKSByZXR1cm47XG5cblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0c2NvcGUuZGlzcGF0Y2hFdmVudCggc3RhcnRFdmVudCApO1xuXG5cdFx0aGFuZGxlTW91c2VXaGVlbCggZXZlbnQgKTtcblxuXHRcdHNjb3BlLmRpc3BhdGNoRXZlbnQoIGVuZEV2ZW50ICk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIG9uS2V5RG93biggZXZlbnQgKSB7XG5cblx0XHRpZiAoIHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlIHx8IHNjb3BlLmVuYWJsZUtleXMgPT09IGZhbHNlIHx8IHNjb3BlLmVuYWJsZVBhbiA9PT0gZmFsc2UgKSByZXR1cm47XG5cblx0XHRoYW5kbGVLZXlEb3duKCBldmVudCApO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBvblRvdWNoU3RhcnQoIGV2ZW50ICkge1xuXG5cdFx0aWYgKCBzY29wZS5lbmFibGVkID09PSBmYWxzZSApIHJldHVybjtcblxuXHRcdHN3aXRjaCAoIGV2ZW50LnRvdWNoZXMubGVuZ3RoICkge1xuXG5cdFx0XHRjYXNlIDE6XHQvLyBvbmUtZmluZ2VyZWQgdG91Y2g6IHJvdGF0ZVxuXG5cdFx0XHRcdGlmICggc2NvcGUuZW5hYmxlUm90YXRlID09PSBmYWxzZSApIHJldHVybjtcblxuXHRcdFx0XHRoYW5kbGVUb3VjaFN0YXJ0Um90YXRlKCBldmVudCApO1xuXG5cdFx0XHRcdHN0YXRlID0gU1RBVEUuVE9VQ0hfUk9UQVRFO1xuXG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlIDI6XHQvLyB0d28tZmluZ2VyZWQgdG91Y2g6IGRvbGx5XG5cblx0XHRcdFx0aWYgKCBzY29wZS5lbmFibGVab29tID09PSBmYWxzZSApIHJldHVybjtcblxuXHRcdFx0XHRoYW5kbGVUb3VjaFN0YXJ0RG9sbHkoIGV2ZW50ICk7XG5cblx0XHRcdFx0c3RhdGUgPSBTVEFURS5UT1VDSF9ET0xMWTtcblxuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAzOiAvLyB0aHJlZS1maW5nZXJlZCB0b3VjaDogcGFuXG5cblx0XHRcdFx0aWYgKCBzY29wZS5lbmFibGVQYW4gPT09IGZhbHNlICkgcmV0dXJuO1xuXG5cdFx0XHRcdGhhbmRsZVRvdWNoU3RhcnRQYW4oIGV2ZW50ICk7XG5cblx0XHRcdFx0c3RhdGUgPSBTVEFURS5UT1VDSF9QQU47XG5cblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGRlZmF1bHQ6XG5cblx0XHRcdFx0c3RhdGUgPSBTVEFURS5OT05FO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCBzdGF0ZSAhPT0gU1RBVEUuTk9ORSApIHtcblxuXHRcdFx0c2NvcGUuZGlzcGF0Y2hFdmVudCggc3RhcnRFdmVudCApO1xuXG5cdFx0fVxuXG5cdH1cblxuXHRmdW5jdGlvbiBvblRvdWNoTW92ZSggZXZlbnQgKSB7XG5cblx0XHRpZiAoIHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlICkgcmV0dXJuO1xuXG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuXHRcdHN3aXRjaCAoIGV2ZW50LnRvdWNoZXMubGVuZ3RoICkge1xuXG5cdFx0XHRjYXNlIDE6IC8vIG9uZS1maW5nZXJlZCB0b3VjaDogcm90YXRlXG5cblx0XHRcdFx0aWYgKCBzY29wZS5lbmFibGVSb3RhdGUgPT09IGZhbHNlICkgcmV0dXJuO1xuXHRcdFx0XHRpZiAoIHN0YXRlICE9PSBTVEFURS5UT1VDSF9ST1RBVEUgKSByZXR1cm47IC8vIGlzIHRoaXMgbmVlZGVkPy4uLlxuXG5cdFx0XHRcdGhhbmRsZVRvdWNoTW92ZVJvdGF0ZSggZXZlbnQgKTtcblxuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAyOiAvLyB0d28tZmluZ2VyZWQgdG91Y2g6IGRvbGx5XG5cblx0XHRcdFx0aWYgKCBzY29wZS5lbmFibGVab29tID09PSBmYWxzZSApIHJldHVybjtcblx0XHRcdFx0aWYgKCBzdGF0ZSAhPT0gU1RBVEUuVE9VQ0hfRE9MTFkgKSByZXR1cm47IC8vIGlzIHRoaXMgbmVlZGVkPy4uLlxuXG5cdFx0XHRcdGhhbmRsZVRvdWNoTW92ZURvbGx5KCBldmVudCApO1xuXG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlIDM6IC8vIHRocmVlLWZpbmdlcmVkIHRvdWNoOiBwYW5cblxuXHRcdFx0XHRpZiAoIHNjb3BlLmVuYWJsZVBhbiA9PT0gZmFsc2UgKSByZXR1cm47XG5cdFx0XHRcdGlmICggc3RhdGUgIT09IFNUQVRFLlRPVUNIX1BBTiApIHJldHVybjsgLy8gaXMgdGhpcyBuZWVkZWQ/Li4uXG5cblx0XHRcdFx0aGFuZGxlVG91Y2hNb3ZlUGFuKCBldmVudCApO1xuXG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRkZWZhdWx0OlxuXG5cdFx0XHRcdHN0YXRlID0gU1RBVEUuTk9ORTtcblxuXHRcdH1cblxuXHR9XG5cblx0ZnVuY3Rpb24gb25Ub3VjaEVuZCggZXZlbnQgKSB7XG5cblx0XHRpZiAoIHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlICkgcmV0dXJuO1xuXG5cdFx0aGFuZGxlVG91Y2hFbmQoIGV2ZW50ICk7XG5cblx0XHRzY29wZS5kaXNwYXRjaEV2ZW50KCBlbmRFdmVudCApO1xuXG5cdFx0c3RhdGUgPSBTVEFURS5OT05FO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBvbkNvbnRleHRNZW51KCBldmVudCApIHtcblxuXHRcdGlmICggc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UgKSByZXR1cm47XG5cblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdH1cblxuXHQvL1xuXG5cdHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ2NvbnRleHRtZW51Jywgb25Db250ZXh0TWVudSwgZmFsc2UgKTtcblxuXHRzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdtb3VzZWRvd24nLCBvbk1vdXNlRG93biwgZmFsc2UgKTtcblx0c2NvcGUuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAnd2hlZWwnLCBvbk1vdXNlV2hlZWwsIGZhbHNlICk7XG5cblx0c2NvcGUuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAndG91Y2hzdGFydCcsIG9uVG91Y2hTdGFydCwgZmFsc2UgKTtcblx0c2NvcGUuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAndG91Y2hlbmQnLCBvblRvdWNoRW5kLCBmYWxzZSApO1xuXHRzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoICd0b3VjaG1vdmUnLCBvblRvdWNoTW92ZSwgZmFsc2UgKTtcblxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ2tleWRvd24nLCBvbktleURvd24sIGZhbHNlICk7XG5cblx0Ly8gZm9yY2UgYW4gdXBkYXRlIGF0IHN0YXJ0XG5cblx0dGhpcy51cGRhdGUoKTtcblxufTtcblxuVEhSRUUuT3JiaXRDb250cm9scy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBUSFJFRS5FdmVudERpc3BhdGNoZXIucHJvdG90eXBlICk7XG5USFJFRS5PcmJpdENvbnRyb2xzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFRIUkVFLk9yYml0Q29udHJvbHM7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKCBUSFJFRS5PcmJpdENvbnRyb2xzLnByb3RvdHlwZSwge1xuXG5cdGNlbnRlcjoge1xuXG5cdFx0Z2V0OiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLk9yYml0Q29udHJvbHM6IC5jZW50ZXIgaGFzIGJlZW4gcmVuYW1lZCB0byAudGFyZ2V0JyApO1xuXHRcdFx0cmV0dXJuIHRoaXMudGFyZ2V0O1xuXG5cdFx0fVxuXG5cdH0sXG5cblx0Ly8gYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuXG5cdG5vWm9vbToge1xuXG5cdFx0Z2V0OiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLk9yYml0Q29udHJvbHM6IC5ub1pvb20gaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC5lbmFibGVab29tIGluc3RlYWQuJyApO1xuXHRcdFx0cmV0dXJuICEgdGhpcy5lbmFibGVab29tO1xuXG5cdFx0fSxcblxuXHRcdHNldDogZnVuY3Rpb24gKCB2YWx1ZSApIHtcblxuXHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuT3JiaXRDb250cm9sczogLm5vWm9vbSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLmVuYWJsZVpvb20gaW5zdGVhZC4nICk7XG5cdFx0XHR0aGlzLmVuYWJsZVpvb20gPSAhIHZhbHVlO1xuXG5cdFx0fVxuXG5cdH0sXG5cblx0bm9Sb3RhdGU6IHtcblxuXHRcdGdldDogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5PcmJpdENvbnRyb2xzOiAubm9Sb3RhdGUgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC5lbmFibGVSb3RhdGUgaW5zdGVhZC4nICk7XG5cdFx0XHRyZXR1cm4gISB0aGlzLmVuYWJsZVJvdGF0ZTtcblxuXHRcdH0sXG5cblx0XHRzZXQ6IGZ1bmN0aW9uICggdmFsdWUgKSB7XG5cblx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLk9yYml0Q29udHJvbHM6IC5ub1JvdGF0ZSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLmVuYWJsZVJvdGF0ZSBpbnN0ZWFkLicgKTtcblx0XHRcdHRoaXMuZW5hYmxlUm90YXRlID0gISB2YWx1ZTtcblxuXHRcdH1cblxuXHR9LFxuXG5cdG5vUGFuOiB7XG5cblx0XHRnZXQ6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuT3JiaXRDb250cm9sczogLm5vUGFuIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAuZW5hYmxlUGFuIGluc3RlYWQuJyApO1xuXHRcdFx0cmV0dXJuICEgdGhpcy5lbmFibGVQYW47XG5cblx0XHR9LFxuXG5cdFx0c2V0OiBmdW5jdGlvbiAoIHZhbHVlICkge1xuXG5cdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5PcmJpdENvbnRyb2xzOiAubm9QYW4gaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC5lbmFibGVQYW4gaW5zdGVhZC4nICk7XG5cdFx0XHR0aGlzLmVuYWJsZVBhbiA9ICEgdmFsdWU7XG5cblx0XHR9XG5cblx0fSxcblxuXHRub0tleXM6IHtcblxuXHRcdGdldDogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5PcmJpdENvbnRyb2xzOiAubm9LZXlzIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAuZW5hYmxlS2V5cyBpbnN0ZWFkLicgKTtcblx0XHRcdHJldHVybiAhIHRoaXMuZW5hYmxlS2V5cztcblxuXHRcdH0sXG5cblx0XHRzZXQ6IGZ1bmN0aW9uICggdmFsdWUgKSB7XG5cblx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLk9yYml0Q29udHJvbHM6IC5ub0tleXMgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC5lbmFibGVLZXlzIGluc3RlYWQuJyApO1xuXHRcdFx0dGhpcy5lbmFibGVLZXlzID0gISB2YWx1ZTtcblxuXHRcdH1cblxuXHR9LFxuXG5cdHN0YXRpY01vdmluZzoge1xuXG5cdFx0Z2V0OiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLk9yYml0Q29udHJvbHM6IC5zdGF0aWNNb3ZpbmcgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlIC5lbmFibGVEYW1waW5nIGluc3RlYWQuJyApO1xuXHRcdFx0cmV0dXJuICEgdGhpcy5lbmFibGVEYW1waW5nO1xuXG5cdFx0fSxcblxuXHRcdHNldDogZnVuY3Rpb24gKCB2YWx1ZSApIHtcblxuXHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuT3JiaXRDb250cm9sczogLnN0YXRpY01vdmluZyBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLmVuYWJsZURhbXBpbmcgaW5zdGVhZC4nICk7XG5cdFx0XHR0aGlzLmVuYWJsZURhbXBpbmcgPSAhIHZhbHVlO1xuXG5cdFx0fVxuXG5cdH0sXG5cblx0ZHluYW1pY0RhbXBpbmdGYWN0b3I6IHtcblxuXHRcdGdldDogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5PcmJpdENvbnRyb2xzOiAuZHluYW1pY0RhbXBpbmdGYWN0b3IgaGFzIGJlZW4gcmVuYW1lZC4gVXNlIC5kYW1waW5nRmFjdG9yIGluc3RlYWQuJyApO1xuXHRcdFx0cmV0dXJuIHRoaXMuZGFtcGluZ0ZhY3RvcjtcblxuXHRcdH0sXG5cblx0XHRzZXQ6IGZ1bmN0aW9uICggdmFsdWUgKSB7XG5cblx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLk9yYml0Q29udHJvbHM6IC5keW5hbWljRGFtcGluZ0ZhY3RvciBoYXMgYmVlbiByZW5hbWVkLiBVc2UgLmRhbXBpbmdGYWN0b3IgaW5zdGVhZC4nICk7XG5cdFx0XHR0aGlzLmRhbXBpbmdGYWN0b3IgPSB2YWx1ZTtcblxuXHRcdH1cblxuXHR9XG5cbn0gKTtcbiIsIi8qKlxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cbiAqL1xuXG5USFJFRS5PQkpMb2FkZXIgPSBmdW5jdGlvbiAoIG1hbmFnZXIgKSB7XG4gICAgXG4gICAgICAgIHRoaXMubWFuYWdlciA9ICggbWFuYWdlciAhPT0gdW5kZWZpbmVkICkgPyBtYW5hZ2VyIDogVEhSRUUuRGVmYXVsdExvYWRpbmdNYW5hZ2VyO1xuICAgIFxuICAgICAgICB0aGlzLm1hdGVyaWFscyA9IG51bGw7XG4gICAgXG4gICAgICAgIHRoaXMucmVnZXhwID0ge1xuICAgICAgICAgICAgLy8gdiBmbG9hdCBmbG9hdCBmbG9hdFxuICAgICAgICAgICAgdmVydGV4X3BhdHRlcm4gICAgICAgICAgIDogL152XFxzKyhbXFxkfFxcLnxcXCt8XFwtfGV8RV0rKVxccysoW1xcZHxcXC58XFwrfFxcLXxlfEVdKylcXHMrKFtcXGR8XFwufFxcK3xcXC18ZXxFXSspLyxcbiAgICAgICAgICAgIC8vIHZuIGZsb2F0IGZsb2F0IGZsb2F0XG4gICAgICAgICAgICBub3JtYWxfcGF0dGVybiAgICAgICAgICAgOiAvXnZuXFxzKyhbXFxkfFxcLnxcXCt8XFwtfGV8RV0rKVxccysoW1xcZHxcXC58XFwrfFxcLXxlfEVdKylcXHMrKFtcXGR8XFwufFxcK3xcXC18ZXxFXSspLyxcbiAgICAgICAgICAgIC8vIHZ0IGZsb2F0IGZsb2F0XG4gICAgICAgICAgICB1dl9wYXR0ZXJuICAgICAgICAgICAgICAgOiAvXnZ0XFxzKyhbXFxkfFxcLnxcXCt8XFwtfGV8RV0rKVxccysoW1xcZHxcXC58XFwrfFxcLXxlfEVdKykvLFxuICAgICAgICAgICAgLy8gZiB2ZXJ0ZXggdmVydGV4IHZlcnRleFxuICAgICAgICAgICAgZmFjZV92ZXJ0ZXggICAgICAgICAgICAgIDogL15mXFxzKygtP1xcZCspXFxzKygtP1xcZCspXFxzKygtP1xcZCspKD86XFxzKygtP1xcZCspKT8vLFxuICAgICAgICAgICAgLy8gZiB2ZXJ0ZXgvdXYgdmVydGV4L3V2IHZlcnRleC91dlxuICAgICAgICAgICAgZmFjZV92ZXJ0ZXhfdXYgICAgICAgICAgIDogL15mXFxzKygtP1xcZCspXFwvKC0/XFxkKylcXHMrKC0/XFxkKylcXC8oLT9cXGQrKVxccysoLT9cXGQrKVxcLygtP1xcZCspKD86XFxzKygtP1xcZCspXFwvKC0/XFxkKykpPy8sXG4gICAgICAgICAgICAvLyBmIHZlcnRleC91di9ub3JtYWwgdmVydGV4L3V2L25vcm1hbCB2ZXJ0ZXgvdXYvbm9ybWFsXG4gICAgICAgICAgICBmYWNlX3ZlcnRleF91dl9ub3JtYWwgICAgOiAvXmZcXHMrKC0/XFxkKylcXC8oLT9cXGQrKVxcLygtP1xcZCspXFxzKygtP1xcZCspXFwvKC0/XFxkKylcXC8oLT9cXGQrKVxccysoLT9cXGQrKVxcLygtP1xcZCspXFwvKC0/XFxkKykoPzpcXHMrKC0/XFxkKylcXC8oLT9cXGQrKVxcLygtP1xcZCspKT8vLFxuICAgICAgICAgICAgLy8gZiB2ZXJ0ZXgvL25vcm1hbCB2ZXJ0ZXgvL25vcm1hbCB2ZXJ0ZXgvL25vcm1hbFxuICAgICAgICAgICAgZmFjZV92ZXJ0ZXhfbm9ybWFsICAgICAgIDogL15mXFxzKygtP1xcZCspXFwvXFwvKC0/XFxkKylcXHMrKC0/XFxkKylcXC9cXC8oLT9cXGQrKVxccysoLT9cXGQrKVxcL1xcLygtP1xcZCspKD86XFxzKygtP1xcZCspXFwvXFwvKC0/XFxkKykpPy8sXG4gICAgICAgICAgICAvLyBvIG9iamVjdF9uYW1lIHwgZyBncm91cF9uYW1lXG4gICAgICAgICAgICBvYmplY3RfcGF0dGVybiAgICAgICAgICAgOiAvXltvZ11cXHMqKC4rKT8vLFxuICAgICAgICAgICAgLy8gcyBib29sZWFuXG4gICAgICAgICAgICBzbW9vdGhpbmdfcGF0dGVybiAgICAgICAgOiAvXnNcXHMrKFxcZCt8b258b2ZmKS8sXG4gICAgICAgICAgICAvLyBtdGxsaWIgZmlsZV9yZWZlcmVuY2VcbiAgICAgICAgICAgIG1hdGVyaWFsX2xpYnJhcnlfcGF0dGVybiA6IC9ebXRsbGliIC8sXG4gICAgICAgICAgICAvLyB1c2VtdGwgbWF0ZXJpYWxfbmFtZVxuICAgICAgICAgICAgbWF0ZXJpYWxfdXNlX3BhdHRlcm4gICAgIDogL151c2VtdGwgL1xuICAgICAgICB9O1xuICAgIFxuICAgIH07XG4gICAgXG4gICAgVEhSRUUuT0JKTG9hZGVyLnByb3RvdHlwZSA9IHtcbiAgICBcbiAgICAgICAgY29uc3RydWN0b3I6IFRIUkVFLk9CSkxvYWRlcixcbiAgICBcbiAgICAgICAgbG9hZDogZnVuY3Rpb24gKCB1cmwsIG9uTG9hZCwgb25Qcm9ncmVzcywgb25FcnJvciApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBzY29wZSA9IHRoaXM7XG4gICAgXG4gICAgICAgICAgICB2YXIgbG9hZGVyID0gbmV3IFRIUkVFLkZpbGVMb2FkZXIoIHNjb3BlLm1hbmFnZXIgKTtcbiAgICAgICAgICAgIGxvYWRlci5zZXRQYXRoKCB0aGlzLnBhdGggKTtcbiAgICAgICAgICAgIGxvYWRlci5sb2FkKCB1cmwsIGZ1bmN0aW9uICggdGV4dCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBvbkxvYWQoIHNjb3BlLnBhcnNlKCB0ZXh0ICkgKTtcbiAgICBcbiAgICAgICAgICAgIH0sIG9uUHJvZ3Jlc3MsIG9uRXJyb3IgKTtcbiAgICBcbiAgICAgICAgfSxcbiAgICBcbiAgICAgICAgc2V0UGF0aDogZnVuY3Rpb24gKCB2YWx1ZSApIHtcbiAgICBcbiAgICAgICAgICAgIHRoaXMucGF0aCA9IHZhbHVlO1xuICAgIFxuICAgICAgICB9LFxuICAgIFxuICAgICAgICBzZXRNYXRlcmlhbHM6IGZ1bmN0aW9uICggbWF0ZXJpYWxzICkge1xuICAgIFxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbHMgPSBtYXRlcmlhbHM7XG4gICAgXG4gICAgICAgIH0sXG4gICAgXG4gICAgICAgIF9jcmVhdGVQYXJzZXJTdGF0ZSA6IGZ1bmN0aW9uICgpIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBvYmplY3RzICA6IFtdLFxuICAgICAgICAgICAgICAgIG9iamVjdCAgIDoge30sXG4gICAgXG4gICAgICAgICAgICAgICAgdmVydGljZXMgOiBbXSxcbiAgICAgICAgICAgICAgICBub3JtYWxzICA6IFtdLFxuICAgICAgICAgICAgICAgIHV2cyAgICAgIDogW10sXG4gICAgXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWxMaWJyYXJpZXMgOiBbXSxcbiAgICBcbiAgICAgICAgICAgICAgICBzdGFydE9iamVjdDogZnVuY3Rpb24gKCBuYW1lLCBmcm9tRGVjbGFyYXRpb24gKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBjdXJyZW50IG9iamVjdCAoaW5pdGlhbCBmcm9tIHJlc2V0KSBpcyBub3QgZnJvbSBhIGcvbyBkZWNsYXJhdGlvbiBpbiB0aGUgcGFyc2VkXG4gICAgICAgICAgICAgICAgICAgIC8vIGZpbGUuIFdlIG5lZWQgdG8gdXNlIGl0IGZvciB0aGUgZmlyc3QgcGFyc2VkIGcvbyB0byBrZWVwIHRoaW5ncyBpbiBzeW5jLlxuICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaXMub2JqZWN0ICYmIHRoaXMub2JqZWN0LmZyb21EZWNsYXJhdGlvbiA9PT0gZmFsc2UgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9iamVjdC5uYW1lID0gbmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0LmZyb21EZWNsYXJhdGlvbiA9ICggZnJvbURlY2xhcmF0aW9uICE9PSBmYWxzZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBwcmV2aW91c01hdGVyaWFsID0gKCB0aGlzLm9iamVjdCAmJiB0eXBlb2YgdGhpcy5vYmplY3QuY3VycmVudE1hdGVyaWFsID09PSAnZnVuY3Rpb24nID8gdGhpcy5vYmplY3QuY3VycmVudE1hdGVyaWFsKCkgOiB1bmRlZmluZWQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGlzLm9iamVjdCAmJiB0eXBlb2YgdGhpcy5vYmplY3QuX2ZpbmFsaXplID09PSAnZnVuY3Rpb24nICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmplY3QuX2ZpbmFsaXplKCB0cnVlICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmplY3QgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lIDogbmFtZSB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb21EZWNsYXJhdGlvbiA6ICggZnJvbURlY2xhcmF0aW9uICE9PSBmYWxzZSApLFxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGljZXMgOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxzICA6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV2cyAgICAgIDogW11cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbHMgOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNtb290aCA6IHRydWUsXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydE1hdGVyaWFsIDogZnVuY3Rpb24oIG5hbWUsIGxpYnJhcmllcyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJldmlvdXMgPSB0aGlzLl9maW5hbGl6ZSggZmFsc2UgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOZXcgdXNlbXRsIGRlY2xhcmF0aW9uIG92ZXJ3cml0ZXMgYW4gaW5oZXJpdGVkIG1hdGVyaWFsLCBleGNlcHQgaWYgZmFjZXMgd2VyZSBkZWNsYXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFmdGVyIHRoZSBtYXRlcmlhbCwgdGhlbiBpdCBtdXN0IGJlIHByZXNlcnZlZCBmb3IgcHJvcGVyIE11bHRpTWF0ZXJpYWwgY29udGludWF0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcHJldmlvdXMgJiYgKCBwcmV2aW91cy5pbmhlcml0ZWQgfHwgcHJldmlvdXMuZ3JvdXBDb3VudCA8PSAwICkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWxzLnNwbGljZSggcHJldmlvdXMuaW5kZXgsIDEgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGVyaWFsID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCAgICAgIDogdGhpcy5tYXRlcmlhbHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lICAgICAgIDogbmFtZSB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXRsbGliICAgICA6ICggQXJyYXkuaXNBcnJheSggbGlicmFyaWVzICkgJiYgbGlicmFyaWVzLmxlbmd0aCA+IDAgPyBsaWJyYXJpZXNbIGxpYnJhcmllcy5sZW5ndGggLSAxIF0gOiAnJyApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbW9vdGggICAgIDogKCBwcmV2aW91cyAhPT0gdW5kZWZpbmVkID8gcHJldmlvdXMuc21vb3RoIDogdGhpcy5zbW9vdGggKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBTdGFydCA6ICggcHJldmlvdXMgIT09IHVuZGVmaW5lZCA/IHByZXZpb3VzLmdyb3VwRW5kIDogMCApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cEVuZCAgIDogLTEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwQ291bnQgOiAtMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5oZXJpdGVkICA6IGZhbHNlLFxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZSA6IGZ1bmN0aW9uKCBpbmRleCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjbG9uZWQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggICAgICA6ICggdHlwZW9mIGluZGV4ID09PSAnbnVtYmVyJyA/IGluZGV4IDogdGhpcy5pbmRleCApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgICAgICAgOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXRsbGliICAgICA6IHRoaXMubXRsbGliLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNtb290aCAgICAgOiB0aGlzLnNtb290aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cFN0YXJ0IDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cEVuZCAgIDogLTEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBDb3VudCA6IC0xLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaGVyaXRlZCAgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lZC5jbG9uZSA9IHRoaXMuY2xvbmUuYmluZChjbG9uZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNsb25lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbHMucHVzaCggbWF0ZXJpYWwgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF0ZXJpYWw7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudE1hdGVyaWFsIDogZnVuY3Rpb24oKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGlzLm1hdGVyaWFscy5sZW5ndGggPiAwICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tYXRlcmlhbHNbIHRoaXMubWF0ZXJpYWxzLmxlbmd0aCAtIDEgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBfZmluYWxpemUgOiBmdW5jdGlvbiggZW5kICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsYXN0TXVsdGlNYXRlcmlhbCA9IHRoaXMuY3VycmVudE1hdGVyaWFsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBsYXN0TXVsdGlNYXRlcmlhbCAmJiBsYXN0TXVsdGlNYXRlcmlhbC5ncm91cEVuZCA9PT0gLTEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RNdWx0aU1hdGVyaWFsLmdyb3VwRW5kID0gdGhpcy5nZW9tZXRyeS52ZXJ0aWNlcy5sZW5ndGggLyAzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0TXVsdGlNYXRlcmlhbC5ncm91cENvdW50ID0gbGFzdE11bHRpTWF0ZXJpYWwuZ3JvdXBFbmQgLSBsYXN0TXVsdGlNYXRlcmlhbC5ncm91cFN0YXJ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0TXVsdGlNYXRlcmlhbC5pbmhlcml0ZWQgPSBmYWxzZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIG9iamVjdHMgdGFpbCBtYXRlcmlhbHMgaWYgbm8gZmFjZSBkZWNsYXJhdGlvbnMgZm9sbG93ZWQgdGhlbSBiZWZvcmUgYSBuZXcgby9nIHN0YXJ0ZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBlbmQgJiYgdGhpcy5tYXRlcmlhbHMubGVuZ3RoID4gMSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIG1pID0gdGhpcy5tYXRlcmlhbHMubGVuZ3RoIC0gMTsgbWkgPj0gMDsgbWktLSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdGhpcy5tYXRlcmlhbHNbbWldLmdyb3VwQ291bnQgPD0gMCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFscy5zcGxpY2UoIG1pLCAxICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR3VhcmFudGVlIGF0IGxlYXN0IG9uZSBlbXB0eSBtYXRlcmlhbCwgdGhpcyBtYWtlcyB0aGUgY3JlYXRpb24gbGF0ZXIgbW9yZSBzdHJhaWdodCBmb3J3YXJkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZW5kICYmIHRoaXMubWF0ZXJpYWxzLmxlbmd0aCA9PT0gMCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lICAgOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNtb290aCA6IHRoaXMuc21vb3RoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFzdE11bHRpTWF0ZXJpYWw7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIEluaGVyaXQgcHJldmlvdXMgb2JqZWN0cyBtYXRlcmlhbC5cbiAgICAgICAgICAgICAgICAgICAgLy8gU3BlYyB0ZWxscyB1cyB0aGF0IGEgZGVjbGFyZWQgbWF0ZXJpYWwgbXVzdCBiZSBzZXQgdG8gYWxsIG9iamVjdHMgdW50aWwgYSBuZXcgbWF0ZXJpYWwgaXMgZGVjbGFyZWQuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGEgdXNlbXRsIGRlY2xhcmF0aW9uIGlzIGVuY291bnRlcmVkIHdoaWxlIHRoaXMgbmV3IG9iamVjdCBpcyBiZWluZyBwYXJzZWQsIGl0IHdpbGxcbiAgICAgICAgICAgICAgICAgICAgLy8gb3ZlcndyaXRlIHRoZSBpbmhlcml0ZWQgbWF0ZXJpYWwuIEV4Y2VwdGlvbiBiZWluZyB0aGF0IHRoZXJlIHdhcyBhbHJlYWR5IGZhY2UgZGVjbGFyYXRpb25zXG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIHRoZSBpbmhlcml0ZWQgbWF0ZXJpYWwsIHRoZW4gaXQgd2lsbCBiZSBwcmVzZXJ2ZWQgZm9yIHByb3BlciBNdWx0aU1hdGVyaWFsIGNvbnRpbnVhdGlvbi5cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBwcmV2aW91c01hdGVyaWFsICYmIHByZXZpb3VzTWF0ZXJpYWwubmFtZSAmJiB0eXBlb2YgcHJldmlvdXNNYXRlcmlhbC5jbG9uZSA9PT0gXCJmdW5jdGlvblwiICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlY2xhcmVkID0gcHJldmlvdXNNYXRlcmlhbC5jbG9uZSggMCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVjbGFyZWQuaW5oZXJpdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0Lm1hdGVyaWFscy5wdXNoKCBkZWNsYXJlZCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0cy5wdXNoKCB0aGlzLm9iamVjdCApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICAgICAgZmluYWxpemUgOiBmdW5jdGlvbigpIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGlzLm9iamVjdCAmJiB0eXBlb2YgdGhpcy5vYmplY3QuX2ZpbmFsaXplID09PSAnZnVuY3Rpb24nICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmplY3QuX2ZpbmFsaXplKCB0cnVlICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgICAgIHBhcnNlVmVydGV4SW5kZXg6IGZ1bmN0aW9uICggdmFsdWUsIGxlbiApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcGFyc2VJbnQoIHZhbHVlLCAxMCApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCBpbmRleCA+PSAwID8gaW5kZXggLSAxIDogaW5kZXggKyBsZW4gLyAzICkgKiAzO1xuICAgIFxuICAgICAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICAgICAgcGFyc2VOb3JtYWxJbmRleDogZnVuY3Rpb24gKCB2YWx1ZSwgbGVuICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBwYXJzZUludCggdmFsdWUsIDEwICk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoIGluZGV4ID49IDAgPyBpbmRleCAtIDEgOiBpbmRleCArIGxlbiAvIDMgKSAqIDM7XG4gICAgXG4gICAgICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgICAgICBwYXJzZVVWSW5kZXg6IGZ1bmN0aW9uICggdmFsdWUsIGxlbiApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcGFyc2VJbnQoIHZhbHVlLCAxMCApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCBpbmRleCA+PSAwID8gaW5kZXggLSAxIDogaW5kZXggKyBsZW4gLyAyICkgKiAyO1xuICAgIFxuICAgICAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICAgICAgYWRkVmVydGV4OiBmdW5jdGlvbiAoIGEsIGIsIGMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBzcmMgPSB0aGlzLnZlcnRpY2VzO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZHN0ID0gdGhpcy5vYmplY3QuZ2VvbWV0cnkudmVydGljZXM7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGRzdC5wdXNoKCBzcmNbIGEgKyAwIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgZHN0LnB1c2goIHNyY1sgYSArIDEgXSApO1xuICAgICAgICAgICAgICAgICAgICBkc3QucHVzaCggc3JjWyBhICsgMiBdICk7XG4gICAgICAgICAgICAgICAgICAgIGRzdC5wdXNoKCBzcmNbIGIgKyAwIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgZHN0LnB1c2goIHNyY1sgYiArIDEgXSApO1xuICAgICAgICAgICAgICAgICAgICBkc3QucHVzaCggc3JjWyBiICsgMiBdICk7XG4gICAgICAgICAgICAgICAgICAgIGRzdC5wdXNoKCBzcmNbIGMgKyAwIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgZHN0LnB1c2goIHNyY1sgYyArIDEgXSApO1xuICAgICAgICAgICAgICAgICAgICBkc3QucHVzaCggc3JjWyBjICsgMiBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgICAgICBhZGRWZXJ0ZXhMaW5lOiBmdW5jdGlvbiAoIGEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBzcmMgPSB0aGlzLnZlcnRpY2VzO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZHN0ID0gdGhpcy5vYmplY3QuZ2VvbWV0cnkudmVydGljZXM7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGRzdC5wdXNoKCBzcmNbIGEgKyAwIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgZHN0LnB1c2goIHNyY1sgYSArIDEgXSApO1xuICAgICAgICAgICAgICAgICAgICBkc3QucHVzaCggc3JjWyBhICsgMiBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgICAgICBhZGROb3JtYWwgOiBmdW5jdGlvbiAoIGEsIGIsIGMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBzcmMgPSB0aGlzLm5vcm1hbHM7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkc3QgPSB0aGlzLm9iamVjdC5nZW9tZXRyeS5ub3JtYWxzO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBkc3QucHVzaCggc3JjWyBhICsgMCBdICk7XG4gICAgICAgICAgICAgICAgICAgIGRzdC5wdXNoKCBzcmNbIGEgKyAxIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgZHN0LnB1c2goIHNyY1sgYSArIDIgXSApO1xuICAgICAgICAgICAgICAgICAgICBkc3QucHVzaCggc3JjWyBiICsgMCBdICk7XG4gICAgICAgICAgICAgICAgICAgIGRzdC5wdXNoKCBzcmNbIGIgKyAxIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgZHN0LnB1c2goIHNyY1sgYiArIDIgXSApO1xuICAgICAgICAgICAgICAgICAgICBkc3QucHVzaCggc3JjWyBjICsgMCBdICk7XG4gICAgICAgICAgICAgICAgICAgIGRzdC5wdXNoKCBzcmNbIGMgKyAxIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgZHN0LnB1c2goIHNyY1sgYyArIDIgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICAgICAgYWRkVVY6IGZ1bmN0aW9uICggYSwgYiwgYyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNyYyA9IHRoaXMudXZzO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZHN0ID0gdGhpcy5vYmplY3QuZ2VvbWV0cnkudXZzO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBkc3QucHVzaCggc3JjWyBhICsgMCBdICk7XG4gICAgICAgICAgICAgICAgICAgIGRzdC5wdXNoKCBzcmNbIGEgKyAxIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgZHN0LnB1c2goIHNyY1sgYiArIDAgXSApO1xuICAgICAgICAgICAgICAgICAgICBkc3QucHVzaCggc3JjWyBiICsgMSBdICk7XG4gICAgICAgICAgICAgICAgICAgIGRzdC5wdXNoKCBzcmNbIGMgKyAwIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgZHN0LnB1c2goIHNyY1sgYyArIDEgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICAgICAgYWRkVVZMaW5lOiBmdW5jdGlvbiAoIGEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBzcmMgPSB0aGlzLnV2cztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRzdCA9IHRoaXMub2JqZWN0Lmdlb21ldHJ5LnV2cztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZHN0LnB1c2goIHNyY1sgYSArIDAgXSApO1xuICAgICAgICAgICAgICAgICAgICBkc3QucHVzaCggc3JjWyBhICsgMSBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgICAgICBhZGRGYWNlOiBmdW5jdGlvbiAoIGEsIGIsIGMsIGQsIHVhLCB1YiwgdWMsIHVkLCBuYSwgbmIsIG5jLCBuZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZMZW4gPSB0aGlzLnZlcnRpY2VzLmxlbmd0aDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlhID0gdGhpcy5wYXJzZVZlcnRleEluZGV4KCBhLCB2TGVuICk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpYiA9IHRoaXMucGFyc2VWZXJ0ZXhJbmRleCggYiwgdkxlbiApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaWMgPSB0aGlzLnBhcnNlVmVydGV4SW5kZXgoIGMsIHZMZW4gKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGQgPT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkVmVydGV4KCBpYSwgaWIsIGljICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZCA9IHRoaXMucGFyc2VWZXJ0ZXhJbmRleCggZCwgdkxlbiApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRWZXJ0ZXgoIGlhLCBpYiwgaWQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkVmVydGV4KCBpYiwgaWMsIGlkICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB1YSAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHV2TGVuID0gdGhpcy51dnMubGVuZ3RoO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWEgPSB0aGlzLnBhcnNlVVZJbmRleCggdWEsIHV2TGVuICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpYiA9IHRoaXMucGFyc2VVVkluZGV4KCB1YiwgdXZMZW4gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGljID0gdGhpcy5wYXJzZVVWSW5kZXgoIHVjLCB1dkxlbiApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBkID09PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRVViggaWEsIGliLCBpYyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZCA9IHRoaXMucGFyc2VVVkluZGV4KCB1ZCwgdXZMZW4gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFVWKCBpYSwgaWIsIGlkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRVViggaWIsIGljLCBpZCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggbmEgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vcm1hbHMgYXJlIG1hbnkgdGltZXMgdGhlIHNhbWUuIElmIHNvLCBza2lwIGZ1bmN0aW9uIGNhbGwgYW5kIHBhcnNlSW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5MZW4gPSB0aGlzLm5vcm1hbHMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWEgPSB0aGlzLnBhcnNlTm9ybWFsSW5kZXgoIG5hLCBuTGVuICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpYiA9IG5hID09PSBuYiA/IGlhIDogdGhpcy5wYXJzZU5vcm1hbEluZGV4KCBuYiwgbkxlbiApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWMgPSBuYSA9PT0gbmMgPyBpYSA6IHRoaXMucGFyc2VOb3JtYWxJbmRleCggbmMsIG5MZW4gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZCA9PT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkTm9ybWFsKCBpYSwgaWIsIGljICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkID0gdGhpcy5wYXJzZU5vcm1hbEluZGV4KCBuZCwgbkxlbiApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkTm9ybWFsKCBpYSwgaWIsIGlkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGROb3JtYWwoIGliLCBpYywgaWQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICAgICAgYWRkTGluZUdlb21ldHJ5OiBmdW5jdGlvbiAoIHZlcnRpY2VzLCB1dnMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0Lmdlb21ldHJ5LnR5cGUgPSAnTGluZSc7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciB2TGVuID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1dkxlbiA9IHRoaXMudXZzLmxlbmd0aDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIHZpID0gMCwgbCA9IHZlcnRpY2VzLmxlbmd0aDsgdmkgPCBsOyB2aSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkVmVydGV4TGluZSggdGhpcy5wYXJzZVZlcnRleEluZGV4KCB2ZXJ0aWNlc1sgdmkgXSwgdkxlbiApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIHV2aSA9IDAsIGwgPSB1dnMubGVuZ3RoOyB1dmkgPCBsOyB1dmkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFVWTGluZSggdGhpcy5wYXJzZVVWSW5kZXgoIHV2c1sgdXZpIF0sIHV2TGVuICkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICBzdGF0ZS5zdGFydE9iamVjdCggJycsIGZhbHNlICk7XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgXG4gICAgICAgIH0sXG4gICAgXG4gICAgICAgIHBhcnNlOiBmdW5jdGlvbiAoIHRleHQgKSB7XG4gICAgXG4gICAgICAgICAgICBjb25zb2xlLnRpbWUoICdPQkpMb2FkZXInICk7XG4gICAgXG4gICAgICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLl9jcmVhdGVQYXJzZXJTdGF0ZSgpO1xuICAgIFxuICAgICAgICAgICAgaWYgKCB0ZXh0LmluZGV4T2YoICdcXHJcXG4nICkgIT09IC0gMSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGZhc3RlciB0aGFuIFN0cmluZy5zcGxpdCB3aXRoIHJlZ2V4IHRoYXQgc3BsaXRzIG9uIGJvdGhcbiAgICAgICAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKCAvXFxyXFxuL2csICdcXG4nICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBpZiAoIHRleHQuaW5kZXhPZiggJ1xcXFxcXG4nICkgIT09IC0gMSkge1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIGpvaW4gbGluZXMgc2VwYXJhdGVkIGJ5IGEgbGluZSBjb250aW51YXRpb24gY2hhcmFjdGVyIChcXClcbiAgICAgICAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKCAvXFxcXFxcbi9nLCAnJyApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgdmFyIGxpbmVzID0gdGV4dC5zcGxpdCggJ1xcbicgKTtcbiAgICAgICAgICAgIHZhciBsaW5lID0gJycsIGxpbmVGaXJzdENoYXIgPSAnJywgbGluZVNlY29uZENoYXIgPSAnJztcbiAgICAgICAgICAgIHZhciBsaW5lTGVuZ3RoID0gMDtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICBcbiAgICAgICAgICAgIC8vIEZhc3RlciB0byBqdXN0IHRyaW0gbGVmdCBzaWRlIG9mIHRoZSBsaW5lLiBVc2UgaWYgYXZhaWxhYmxlLlxuICAgICAgICAgICAgdmFyIHRyaW1MZWZ0ID0gKCB0eXBlb2YgJycudHJpbUxlZnQgPT09ICdmdW5jdGlvbicgKTtcbiAgICBcbiAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IGxpbmVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgbGluZSA9IGxpbmVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgbGluZSA9IHRyaW1MZWZ0ID8gbGluZS50cmltTGVmdCgpIDogbGluZS50cmltKCk7XG4gICAgXG4gICAgICAgICAgICAgICAgbGluZUxlbmd0aCA9IGxpbmUubGVuZ3RoO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggbGluZUxlbmd0aCA9PT0gMCApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgIGxpbmVGaXJzdENoYXIgPSBsaW5lLmNoYXJBdCggMCApO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIEB0b2RvIGludm9rZSBwYXNzZWQgaW4gaGFuZGxlciBpZiBhbnlcbiAgICAgICAgICAgICAgICBpZiAoIGxpbmVGaXJzdENoYXIgPT09ICcjJyApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggbGluZUZpcnN0Q2hhciA9PT0gJ3YnICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBsaW5lU2Vjb25kQ2hhciA9IGxpbmUuY2hhckF0KCAxICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggbGluZVNlY29uZENoYXIgPT09ICcgJyAmJiAoIHJlc3VsdCA9IHRoaXMucmVnZXhwLnZlcnRleF9wYXR0ZXJuLmV4ZWMoIGxpbmUgKSApICE9PSBudWxsICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gMCAgICAgICAgICAgICAgICAgIDEgICAgICAyICAgICAgM1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gW1widiAxLjAgMi4wIDMuMFwiLCBcIjEuMFwiLCBcIjIuMFwiLCBcIjMuMFwiXVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUudmVydGljZXMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KCByZXN1bHRbIDEgXSApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoIHJlc3VsdFsgMiBdICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdCggcmVzdWx0WyAzIF0gKVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggbGluZVNlY29uZENoYXIgPT09ICduJyAmJiAoIHJlc3VsdCA9IHRoaXMucmVnZXhwLm5vcm1hbF9wYXR0ZXJuLmV4ZWMoIGxpbmUgKSApICE9PSBudWxsICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gMCAgICAgICAgICAgICAgICAgICAxICAgICAgMiAgICAgIDNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFtcInZuIDEuMCAyLjAgMy4wXCIsIFwiMS4wXCIsIFwiMi4wXCIsIFwiMy4wXCJdXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5ub3JtYWxzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdCggcmVzdWx0WyAxIF0gKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KCByZXN1bHRbIDIgXSApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoIHJlc3VsdFsgMyBdIClcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGxpbmVTZWNvbmRDaGFyID09PSAndCcgJiYgKCByZXN1bHQgPSB0aGlzLnJlZ2V4cC51dl9wYXR0ZXJuLmV4ZWMoIGxpbmUgKSApICE9PSBudWxsICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gMCAgICAgICAgICAgICAgIDEgICAgICAyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBbXCJ2dCAwLjEgMC4yXCIsIFwiMC4xXCIsIFwiMC4yXCJdXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS51dnMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KCByZXN1bHRbIDEgXSApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoIHJlc3VsdFsgMiBdIClcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIFwiVW5leHBlY3RlZCB2ZXJ0ZXgvbm9ybWFsL3V2IGxpbmU6ICdcIiArIGxpbmUgICsgXCInXCIgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGxpbmVGaXJzdENoYXIgPT09IFwiZlwiICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoICggcmVzdWx0ID0gdGhpcy5yZWdleHAuZmFjZV92ZXJ0ZXhfdXZfbm9ybWFsLmV4ZWMoIGxpbmUgKSApICE9PSBudWxsICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZiB2ZXJ0ZXgvdXYvbm9ybWFsIHZlcnRleC91di9ub3JtYWwgdmVydGV4L3V2L25vcm1hbFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gMCAgICAgICAgICAgICAgICAgICAgICAgIDEgICAgMiAgICAzICAgIDQgICAgNSAgICA2ICAgIDcgICAgOCAgICA5ICAgMTAgICAgICAgICAxMSAgICAgICAgIDEyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBbXCJmIDEvMS8xIDIvMi8yIDMvMy8zXCIsIFwiMVwiLCBcIjFcIiwgXCIxXCIsIFwiMlwiLCBcIjJcIiwgXCIyXCIsIFwiM1wiLCBcIjNcIiwgXCIzXCIsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWRdXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5hZGRGYWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFsgMSBdLCByZXN1bHRbIDQgXSwgcmVzdWx0WyA3IF0sIHJlc3VsdFsgMTAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRbIDIgXSwgcmVzdWx0WyA1IF0sIHJlc3VsdFsgOCBdLCByZXN1bHRbIDExIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0WyAzIF0sIHJlc3VsdFsgNiBdLCByZXN1bHRbIDkgXSwgcmVzdWx0WyAxMiBdXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCAoIHJlc3VsdCA9IHRoaXMucmVnZXhwLmZhY2VfdmVydGV4X3V2LmV4ZWMoIGxpbmUgKSApICE9PSBudWxsICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZiB2ZXJ0ZXgvdXYgdmVydGV4L3V2IHZlcnRleC91dlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gMCAgICAgICAgICAgICAgICAgIDEgICAgMiAgICAzICAgIDQgICAgNSAgICA2ICAgNyAgICAgICAgICA4XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBbXCJmIDEvMSAyLzIgMy8zXCIsIFwiMVwiLCBcIjFcIiwgXCIyXCIsIFwiMlwiLCBcIjNcIiwgXCIzXCIsIHVuZGVmaW5lZCwgdW5kZWZpbmVkXVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuYWRkRmFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRbIDEgXSwgcmVzdWx0WyAzIF0sIHJlc3VsdFsgNSBdLCByZXN1bHRbIDcgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRbIDIgXSwgcmVzdWx0WyA0IF0sIHJlc3VsdFsgNiBdLCByZXN1bHRbIDggXVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggKCByZXN1bHQgPSB0aGlzLnJlZ2V4cC5mYWNlX3ZlcnRleF9ub3JtYWwuZXhlYyggbGluZSApICkgIT09IG51bGwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmIHZlcnRleC8vbm9ybWFsIHZlcnRleC8vbm9ybWFsIHZlcnRleC8vbm9ybWFsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAwICAgICAgICAgICAgICAgICAgICAgMSAgICAyICAgIDMgICAgNCAgICA1ICAgIDYgICA3ICAgICAgICAgIDhcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFtcImYgMS8vMSAyLy8yIDMvLzNcIiwgXCIxXCIsIFwiMVwiLCBcIjJcIiwgXCIyXCIsIFwiM1wiLCBcIjNcIiwgdW5kZWZpbmVkLCB1bmRlZmluZWRdXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5hZGRGYWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFsgMSBdLCByZXN1bHRbIDMgXSwgcmVzdWx0WyA1IF0sIHJlc3VsdFsgNyBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRbIDIgXSwgcmVzdWx0WyA0IF0sIHJlc3VsdFsgNiBdLCByZXN1bHRbIDggXVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggKCByZXN1bHQgPSB0aGlzLnJlZ2V4cC5mYWNlX3ZlcnRleC5leGVjKCBsaW5lICkgKSAhPT0gbnVsbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGYgdmVydGV4IHZlcnRleCB2ZXJ0ZXhcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDAgICAgICAgICAgICAxICAgIDIgICAgMyAgIDRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFtcImYgMSAyIDNcIiwgXCIxXCIsIFwiMlwiLCBcIjNcIiwgdW5kZWZpbmVkXVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuYWRkRmFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRbIDEgXSwgcmVzdWx0WyAyIF0sIHJlc3VsdFsgMyBdLCByZXN1bHRbIDQgXVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvciggXCJVbmV4cGVjdGVkIGZhY2UgbGluZTogJ1wiICsgbGluZSAgKyBcIidcIiApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggbGluZUZpcnN0Q2hhciA9PT0gXCJsXCIgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBsaW5lUGFydHMgPSBsaW5lLnN1YnN0cmluZyggMSApLnRyaW0oKS5zcGxpdCggXCIgXCIgKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxpbmVWZXJ0aWNlcyA9IFtdLCBsaW5lVVZzID0gW107XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggbGluZS5pbmRleE9mKCBcIi9cIiApID09PSAtIDEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lVmVydGljZXMgPSBsaW5lUGFydHM7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgbGkgPSAwLCBsbGVuID0gbGluZVBhcnRzLmxlbmd0aDsgbGkgPCBsbGVuOyBsaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFydHMgPSBsaW5lUGFydHNbIGxpIF0uc3BsaXQoIFwiL1wiICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBwYXJ0c1sgMCBdICE9PSBcIlwiICkgbGluZVZlcnRpY2VzLnB1c2goIHBhcnRzWyAwIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHBhcnRzWyAxIF0gIT09IFwiXCIgKSBsaW5lVVZzLnB1c2goIHBhcnRzWyAxIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5hZGRMaW5lR2VvbWV0cnkoIGxpbmVWZXJ0aWNlcywgbGluZVVWcyApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoICggcmVzdWx0ID0gdGhpcy5yZWdleHAub2JqZWN0X3BhdHRlcm4uZXhlYyggbGluZSApICkgIT09IG51bGwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIG8gb2JqZWN0X25hbWVcbiAgICAgICAgICAgICAgICAgICAgLy8gb3JcbiAgICAgICAgICAgICAgICAgICAgLy8gZyBncm91cF9uYW1lXG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIFdPUktBUk9VTkQ6IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTI4NjlcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIG5hbWUgPSByZXN1bHRbIDAgXS5zdWJzdHIoIDEgKS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gKCBcIiBcIiArIHJlc3VsdFsgMCBdLnN1YnN0ciggMSApLnRyaW0oKSApLnN1YnN0ciggMSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5zdGFydE9iamVjdCggbmFtZSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHRoaXMucmVnZXhwLm1hdGVyaWFsX3VzZV9wYXR0ZXJuLnRlc3QoIGxpbmUgKSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gbWF0ZXJpYWxcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUub2JqZWN0LnN0YXJ0TWF0ZXJpYWwoIGxpbmUuc3Vic3RyaW5nKCA3ICkudHJpbSgpLCBzdGF0ZS5tYXRlcmlhbExpYnJhcmllcyApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHRoaXMucmVnZXhwLm1hdGVyaWFsX2xpYnJhcnlfcGF0dGVybi50ZXN0KCBsaW5lICkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIG10bCBmaWxlXG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLm1hdGVyaWFsTGlicmFyaWVzLnB1c2goIGxpbmUuc3Vic3RyaW5nKCA3ICkudHJpbSgpICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggKCByZXN1bHQgPSB0aGlzLnJlZ2V4cC5zbW9vdGhpbmdfcGF0dGVybi5leGVjKCBsaW5lICkgKSAhPT0gbnVsbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gc21vb3RoIHNoYWRpbmdcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRvZG8gSGFuZGxlIGZpbGVzIHRoYXQgaGF2ZSB2YXJ5aW5nIHNtb290aCB2YWx1ZXMgZm9yIGEgc2V0IG9mIGZhY2VzIGluc2lkZSBvbmUgZ2VvbWV0cnksXG4gICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBkb2VzIG5vdCBkZWZpbmUgYSB1c2VtdGwgZm9yIGVhY2ggZmFjZSBzZXQuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgc2hvdWxkIGJlIGRldGVjdGVkIGFuZCBhIGR1bW15IG1hdGVyaWFsIGNyZWF0ZWQgKGxhdGVyIE11bHRpTWF0ZXJpYWwgYW5kIGdlb21ldHJ5IGdyb3VwcykuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVxdWlyZXMgc29tZSBjYXJlIHRvIG5vdCBjcmVhdGUgZXh0cmEgbWF0ZXJpYWwgb24gZWFjaCBzbW9vdGggdmFsdWUgZm9yIFwibm9ybWFsXCIgb2JqIGZpbGVzLlxuICAgICAgICAgICAgICAgICAgICAvLyB3aGVyZSBleHBsaWNpdCB1c2VtdGwgZGVmaW5lcyBnZW9tZXRyeSBncm91cHMuXG4gICAgICAgICAgICAgICAgICAgIC8vIEV4YW1wbGUgYXNzZXQ6IGV4YW1wbGVzL21vZGVscy9vYmovY2VyYmVydXMvQ2VyYmVydXMub2JqXG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHJlc3VsdFsgMSBdLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5vYmplY3Quc21vb3RoID0gKCB2YWx1ZSA9PT0gJzEnIHx8IHZhbHVlID09PSAnb24nICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXRlcmlhbCA9IHN0YXRlLm9iamVjdC5jdXJyZW50TWF0ZXJpYWwoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBtYXRlcmlhbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnNtb290aCA9IHN0YXRlLm9iamVjdC5zbW9vdGg7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBIYW5kbGUgbnVsbCB0ZXJtaW5hdGVkIGZpbGVzIHdpdGhvdXQgZXhjZXB0aW9uXG4gICAgICAgICAgICAgICAgICAgIGlmICggbGluZSA9PT0gJ1xcMCcgKSBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCBcIlVuZXhwZWN0ZWQgbGluZTogJ1wiICsgbGluZSAgKyBcIidcIiApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHN0YXRlLmZpbmFsaXplKCk7XG4gICAgXG4gICAgICAgICAgICB2YXIgY29udGFpbmVyID0gbmV3IFRIUkVFLkdyb3VwKCk7XG4gICAgICAgICAgICBjb250YWluZXIubWF0ZXJpYWxMaWJyYXJpZXMgPSBbXS5jb25jYXQoIHN0YXRlLm1hdGVyaWFsTGlicmFyaWVzICk7XG4gICAgXG4gICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSBzdGF0ZS5vYmplY3RzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHN0YXRlLm9iamVjdHNbIGkgXTtcbiAgICAgICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBvYmplY3QuZ2VvbWV0cnk7XG4gICAgICAgICAgICAgICAgdmFyIG1hdGVyaWFscyA9IG9iamVjdC5tYXRlcmlhbHM7XG4gICAgICAgICAgICAgICAgdmFyIGlzTGluZSA9ICggZ2VvbWV0cnkudHlwZSA9PT0gJ0xpbmUnICk7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gU2tpcCBvL2cgbGluZSBkZWNsYXJhdGlvbnMgdGhhdCBkaWQgbm90IGZvbGxvdyB3aXRoIGFueSBmYWNlc1xuICAgICAgICAgICAgICAgIGlmICggZ2VvbWV0cnkudmVydGljZXMubGVuZ3RoID09PSAwICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGJ1ZmZlcmdlb21ldHJ5ID0gbmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5KCk7XG4gICAgXG4gICAgICAgICAgICAgICAgYnVmZmVyZ2VvbWV0cnkuYWRkQXR0cmlidXRlKCAncG9zaXRpb24nLCBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKCBuZXcgRmxvYXQzMkFycmF5KCBnZW9tZXRyeS52ZXJ0aWNlcyApLCAzICkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGdlb21ldHJ5Lm5vcm1hbHMubGVuZ3RoID4gMCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyZ2VvbWV0cnkuYWRkQXR0cmlidXRlKCAnbm9ybWFsJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSggbmV3IEZsb2F0MzJBcnJheSggZ2VvbWV0cnkubm9ybWFscyApLCAzICkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBidWZmZXJnZW9tZXRyeS5jb21wdXRlVmVydGV4Tm9ybWFscygpO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGdlb21ldHJ5LnV2cy5sZW5ndGggPiAwICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBidWZmZXJnZW9tZXRyeS5hZGRBdHRyaWJ1dGUoICd1dicsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoIG5ldyBGbG9hdDMyQXJyYXkoIGdlb21ldHJ5LnV2cyApLCAyICkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIG1hdGVyaWFsc1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBjcmVhdGVkTWF0ZXJpYWxzID0gW107XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIG1pID0gMCwgbWlMZW4gPSBtYXRlcmlhbHMubGVuZ3RoOyBtaSA8IG1pTGVuIDsgbWkrKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZU1hdGVyaWFsID0gbWF0ZXJpYWxzW21pXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGVyaWFsID0gdW5kZWZpbmVkO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaXMubWF0ZXJpYWxzICE9PSBudWxsICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSB0aGlzLm1hdGVyaWFscy5jcmVhdGUoIHNvdXJjZU1hdGVyaWFsLm5hbWUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG10bCBldGMuIGxvYWRlcnMgcHJvYmFibHkgY2FuJ3QgY3JlYXRlIGxpbmUgbWF0ZXJpYWxzIGNvcnJlY3RseSwgY29weSBwcm9wZXJ0aWVzIHRvIGEgbGluZSBtYXRlcmlhbC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggaXNMaW5lICYmIG1hdGVyaWFsICYmICEgKCBtYXRlcmlhbCBpbnN0YW5jZW9mIFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsICkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGVyaWFsTGluZSA9IG5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsTGluZS5jb3B5KCBtYXRlcmlhbCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gbWF0ZXJpYWxMaW5lO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggISBtYXRlcmlhbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gKCAhIGlzTGluZSA/IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCgpIDogbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKCkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLm5hbWUgPSBzb3VyY2VNYXRlcmlhbC5uYW1lO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnNoYWRpbmcgPSBzb3VyY2VNYXRlcmlhbC5zbW9vdGggPyBUSFJFRS5TbW9vdGhTaGFkaW5nIDogVEhSRUUuRmxhdFNoYWRpbmc7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRNYXRlcmlhbHMucHVzaChtYXRlcmlhbCk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBtZXNoXG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIG1lc2g7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBjcmVhdGVkTWF0ZXJpYWxzLmxlbmd0aCA+IDEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBtaSA9IDAsIG1pTGVuID0gbWF0ZXJpYWxzLmxlbmd0aDsgbWkgPCBtaUxlbiA7IG1pKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlTWF0ZXJpYWwgPSBtYXRlcmlhbHNbbWldO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyZ2VvbWV0cnkuYWRkR3JvdXAoIHNvdXJjZU1hdGVyaWFsLmdyb3VwU3RhcnQsIHNvdXJjZU1hdGVyaWFsLmdyb3VwQ291bnQsIG1pICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbWVzaCA9ICggISBpc0xpbmUgPyBuZXcgVEhSRUUuTWVzaCggYnVmZmVyZ2VvbWV0cnksIGNyZWF0ZWRNYXRlcmlhbHMgKSA6IG5ldyBUSFJFRS5MaW5lU2VnbWVudHMoIGJ1ZmZlcmdlb21ldHJ5LCBjcmVhdGVkTWF0ZXJpYWxzICkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBtZXNoID0gKCAhIGlzTGluZSA/IG5ldyBUSFJFRS5NZXNoKCBidWZmZXJnZW9tZXRyeSwgY3JlYXRlZE1hdGVyaWFsc1sgMCBdICkgOiBuZXcgVEhSRUUuTGluZVNlZ21lbnRzKCBidWZmZXJnZW9tZXRyeSwgY3JlYXRlZE1hdGVyaWFsc1sgMCBdICkgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgbWVzaC5uYW1lID0gb2JqZWN0Lm5hbWU7XG4gICAgXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFkZCggbWVzaCApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgY29uc29sZS50aW1lRW5kKCAnT0JKTG9hZGVyJyApO1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgIH07ICAgICIsIi8qKlxuICogTG9hZHMgYSBXYXZlZnJvbnQgLm10bCBmaWxlIHNwZWNpZnlpbmcgbWF0ZXJpYWxzXG4gKlxuICogQGF1dGhvciBhbmdlbHh1YW5jaGFuZ1xuICovXG5cblRIUkVFLk1UTExvYWRlciA9IGZ1bmN0aW9uICggbWFuYWdlciApIHtcblxuXHR0aGlzLm1hbmFnZXIgPSAoIG1hbmFnZXIgIT09IHVuZGVmaW5lZCApID8gbWFuYWdlciA6IFRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcjtcblxufTtcblxuVEhSRUUuTVRMTG9hZGVyLnByb3RvdHlwZSA9IHtcblxuXHRjb25zdHJ1Y3RvcjogVEhSRUUuTVRMTG9hZGVyLFxuXG5cdC8qKlxuXHQgKiBMb2FkcyBhbmQgcGFyc2VzIGEgTVRMIGFzc2V0IGZyb20gYSBVUkwuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgLSBVUkwgdG8gdGhlIE1UTCBmaWxlLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25Mb2FkXSAtIENhbGxiYWNrIGludm9rZWQgd2l0aCB0aGUgbG9hZGVkIG9iamVjdC5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW29uUHJvZ3Jlc3NdIC0gQ2FsbGJhY2sgZm9yIGRvd25sb2FkIHByb2dyZXNzLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25FcnJvcl0gLSBDYWxsYmFjayBmb3IgZG93bmxvYWQgZXJyb3JzLlxuXHQgKlxuXHQgKiBAc2VlIHNldFBhdGggc2V0VGV4dHVyZVBhdGhcblx0ICpcblx0ICogQG5vdGUgSW4gb3JkZXIgZm9yIHJlbGF0aXZlIHRleHR1cmUgcmVmZXJlbmNlcyB0byByZXNvbHZlIGNvcnJlY3RseVxuXHQgKiB5b3UgbXVzdCBjYWxsIHNldFBhdGggYW5kL29yIHNldFRleHR1cmVQYXRoIGV4cGxpY2l0bHkgcHJpb3IgdG8gbG9hZC5cblx0ICovXG5cdGxvYWQ6IGZ1bmN0aW9uICggdXJsLCBvbkxvYWQsIG9uUHJvZ3Jlc3MsIG9uRXJyb3IgKSB7XG5cblx0XHR2YXIgc2NvcGUgPSB0aGlzO1xuXG5cdFx0dmFyIGxvYWRlciA9IG5ldyBUSFJFRS5GaWxlTG9hZGVyKCB0aGlzLm1hbmFnZXIgKTtcblx0XHRsb2FkZXIuc2V0UGF0aCggdGhpcy5wYXRoICk7XG5cdFx0bG9hZGVyLmxvYWQoIHVybCwgZnVuY3Rpb24gKCB0ZXh0ICkge1xuXG5cdFx0XHRvbkxvYWQoIHNjb3BlLnBhcnNlKCB0ZXh0ICkgKTtcblxuXHRcdH0sIG9uUHJvZ3Jlc3MsIG9uRXJyb3IgKTtcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBTZXQgYmFzZSBwYXRoIGZvciByZXNvbHZpbmcgcmVmZXJlbmNlcy5cblx0ICogSWYgc2V0IHRoaXMgcGF0aCB3aWxsIGJlIHByZXBlbmRlZCB0byBlYWNoIGxvYWRlZCBhbmQgZm91bmQgcmVmZXJlbmNlLlxuXHQgKlxuXHQgKiBAc2VlIHNldFRleHR1cmVQYXRoXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAqXG5cdCAqIEBleGFtcGxlXG5cdCAqICAgICBtdGxMb2FkZXIuc2V0UGF0aCggJ2Fzc2V0cy9vYmovJyApO1xuXHQgKiAgICAgbXRsTG9hZGVyLmxvYWQoICdteS5tdGwnLCAuLi4gKTtcblx0ICovXG5cdHNldFBhdGg6IGZ1bmN0aW9uICggcGF0aCApIHtcblxuXHRcdHRoaXMucGF0aCA9IHBhdGg7XG5cblx0fSxcblxuXHQvKipcblx0ICogU2V0IGJhc2UgcGF0aCBmb3IgcmVzb2x2aW5nIHRleHR1cmUgcmVmZXJlbmNlcy5cblx0ICogSWYgc2V0IHRoaXMgcGF0aCB3aWxsIGJlIHByZXBlbmRlZCBmb3VuZCB0ZXh0dXJlIHJlZmVyZW5jZS5cblx0ICogSWYgbm90IHNldCBhbmQgc2V0UGF0aCBpcywgaXQgd2lsbCBiZSB1c2VkIGFzIHRleHR1cmUgYmFzZSBwYXRoLlxuXHQgKlxuXHQgKiBAc2VlIHNldFBhdGhcblx0ICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICpcblx0ICogQGV4YW1wbGVcblx0ICogICAgIG10bExvYWRlci5zZXRQYXRoKCAnYXNzZXRzL29iai8nICk7XG5cdCAqICAgICBtdGxMb2FkZXIuc2V0VGV4dHVyZVBhdGgoICdhc3NldHMvdGV4dHVyZXMvJyApO1xuXHQgKiAgICAgbXRsTG9hZGVyLmxvYWQoICdteS5tdGwnLCAuLi4gKTtcblx0ICovXG5cdHNldFRleHR1cmVQYXRoOiBmdW5jdGlvbiAoIHBhdGggKSB7XG5cblx0XHR0aGlzLnRleHR1cmVQYXRoID0gcGF0aDtcblxuXHR9LFxuXG5cdHNldEJhc2VVcmw6IGZ1bmN0aW9uICggcGF0aCApIHtcblxuXHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLk1UTExvYWRlcjogLnNldEJhc2VVcmwoKSBpcyBkZXByZWNhdGVkLiBVc2UgLnNldFRleHR1cmVQYXRoKCBwYXRoICkgZm9yIHRleHR1cmUgcGF0aCBvciAuc2V0UGF0aCggcGF0aCApIGZvciBnZW5lcmFsIGJhc2UgcGF0aCBpbnN0ZWFkLicgKTtcblxuXHRcdHRoaXMuc2V0VGV4dHVyZVBhdGgoIHBhdGggKTtcblxuXHR9LFxuXG5cdHNldENyb3NzT3JpZ2luOiBmdW5jdGlvbiAoIHZhbHVlICkge1xuXG5cdFx0dGhpcy5jcm9zc09yaWdpbiA9IHZhbHVlO1xuXG5cdH0sXG5cblx0c2V0TWF0ZXJpYWxPcHRpb25zOiBmdW5jdGlvbiAoIHZhbHVlICkge1xuXG5cdFx0dGhpcy5tYXRlcmlhbE9wdGlvbnMgPSB2YWx1ZTtcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBQYXJzZXMgYSBNVEwgZmlsZS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHRleHQgLSBDb250ZW50IG9mIE1UTCBmaWxlXG5cdCAqIEByZXR1cm4ge1RIUkVFLk1UTExvYWRlci5NYXRlcmlhbENyZWF0b3J9XG5cdCAqXG5cdCAqIEBzZWUgc2V0UGF0aCBzZXRUZXh0dXJlUGF0aFxuXHQgKlxuXHQgKiBAbm90ZSBJbiBvcmRlciBmb3IgcmVsYXRpdmUgdGV4dHVyZSByZWZlcmVuY2VzIHRvIHJlc29sdmUgY29ycmVjdGx5XG5cdCAqIHlvdSBtdXN0IGNhbGwgc2V0UGF0aCBhbmQvb3Igc2V0VGV4dHVyZVBhdGggZXhwbGljaXRseSBwcmlvciB0byBwYXJzZS5cblx0ICovXG5cdHBhcnNlOiBmdW5jdGlvbiAoIHRleHQgKSB7XG5cblx0XHR2YXIgbGluZXMgPSB0ZXh0LnNwbGl0KCAnXFxuJyApO1xuXHRcdHZhciBpbmZvID0ge307XG5cdFx0dmFyIGRlbGltaXRlcl9wYXR0ZXJuID0gL1xccysvO1xuXHRcdHZhciBtYXRlcmlhbHNJbmZvID0ge307XG5cblx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkgKysgKSB7XG5cblx0XHRcdHZhciBsaW5lID0gbGluZXNbIGkgXTtcblx0XHRcdGxpbmUgPSBsaW5lLnRyaW0oKTtcblxuXHRcdFx0aWYgKCBsaW5lLmxlbmd0aCA9PT0gMCB8fCBsaW5lLmNoYXJBdCggMCApID09PSAnIycgKSB7XG5cblx0XHRcdFx0Ly8gQmxhbmsgbGluZSBvciBjb21tZW50IGlnbm9yZVxuXHRcdFx0XHRjb250aW51ZTtcblxuXHRcdFx0fVxuXG5cdFx0XHR2YXIgcG9zID0gbGluZS5pbmRleE9mKCAnICcgKTtcblxuXHRcdFx0dmFyIGtleSA9ICggcG9zID49IDAgKSA/IGxpbmUuc3Vic3RyaW5nKCAwLCBwb3MgKSA6IGxpbmU7XG5cdFx0XHRrZXkgPSBrZXkudG9Mb3dlckNhc2UoKTtcblxuXHRcdFx0dmFyIHZhbHVlID0gKCBwb3MgPj0gMCApID8gbGluZS5zdWJzdHJpbmcoIHBvcyArIDEgKSA6ICcnO1xuXHRcdFx0dmFsdWUgPSB2YWx1ZS50cmltKCk7XG5cblx0XHRcdGlmICgga2V5ID09PSAnbmV3bXRsJyApIHtcblxuXHRcdFx0XHQvLyBOZXcgbWF0ZXJpYWxcblxuXHRcdFx0XHRpbmZvID0geyBuYW1lOiB2YWx1ZSB9O1xuXHRcdFx0XHRtYXRlcmlhbHNJbmZvWyB2YWx1ZSBdID0gaW5mbztcblxuXHRcdFx0fSBlbHNlIGlmICggaW5mbyApIHtcblxuXHRcdFx0XHRpZiAoIGtleSA9PT0gJ2thJyB8fCBrZXkgPT09ICdrZCcgfHwga2V5ID09PSAna3MnICkge1xuXG5cdFx0XHRcdFx0dmFyIHNzID0gdmFsdWUuc3BsaXQoIGRlbGltaXRlcl9wYXR0ZXJuLCAzICk7XG5cdFx0XHRcdFx0aW5mb1sga2V5IF0gPSBbIHBhcnNlRmxvYXQoIHNzWyAwIF0gKSwgcGFyc2VGbG9hdCggc3NbIDEgXSApLCBwYXJzZUZsb2F0KCBzc1sgMiBdICkgXTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0aW5mb1sga2V5IF0gPSB2YWx1ZTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdHZhciBtYXRlcmlhbENyZWF0b3IgPSBuZXcgVEhSRUUuTVRMTG9hZGVyLk1hdGVyaWFsQ3JlYXRvciggdGhpcy50ZXh0dXJlUGF0aCB8fCB0aGlzLnBhdGgsIHRoaXMubWF0ZXJpYWxPcHRpb25zICk7XG5cdFx0bWF0ZXJpYWxDcmVhdG9yLnNldENyb3NzT3JpZ2luKCB0aGlzLmNyb3NzT3JpZ2luICk7XG5cdFx0bWF0ZXJpYWxDcmVhdG9yLnNldE1hbmFnZXIoIHRoaXMubWFuYWdlciApO1xuXHRcdG1hdGVyaWFsQ3JlYXRvci5zZXRNYXRlcmlhbHMoIG1hdGVyaWFsc0luZm8gKTtcblx0XHRyZXR1cm4gbWF0ZXJpYWxDcmVhdG9yO1xuXG5cdH1cblxufTtcblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgVEhSRUUtTVRMTG9hZGVyLk1hdGVyaWFsQ3JlYXRvclxuICogQHBhcmFtIGJhc2VVcmwgLSBVcmwgcmVsYXRpdmUgdG8gd2hpY2ggdGV4dHVyZXMgYXJlIGxvYWRlZFxuICogQHBhcmFtIG9wdGlvbnMgLSBTZXQgb2Ygb3B0aW9ucyBvbiBob3cgdG8gY29uc3RydWN0IHRoZSBtYXRlcmlhbHNcbiAqICAgICAgICAgICAgICAgICAgc2lkZTogV2hpY2ggc2lkZSB0byBhcHBseSB0aGUgbWF0ZXJpYWxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgVEhSRUUuRnJvbnRTaWRlIChkZWZhdWx0KSwgVEhSRUUuQmFja1NpZGUsIFRIUkVFLkRvdWJsZVNpZGVcbiAqICAgICAgICAgICAgICAgICAgd3JhcDogV2hhdCB0eXBlIG9mIHdyYXBwaW5nIHRvIGFwcGx5IGZvciB0ZXh0dXJlc1xuICogICAgICAgICAgICAgICAgICAgICAgICBUSFJFRS5SZXBlYXRXcmFwcGluZyAoZGVmYXVsdCksIFRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmcsIFRIUkVFLk1pcnJvcmVkUmVwZWF0V3JhcHBpbmdcbiAqICAgICAgICAgICAgICAgICAgbm9ybWFsaXplUkdCOiBSR0JzIG5lZWQgdG8gYmUgbm9ybWFsaXplZCB0byAwLTEgZnJvbSAwLTI1NVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQ6IGZhbHNlLCBhc3N1bWVkIHRvIGJlIGFscmVhZHkgbm9ybWFsaXplZFxuICogICAgICAgICAgICAgICAgICBpZ25vcmVaZXJvUkdCczogSWdub3JlIHZhbHVlcyBvZiBSR0JzIChLYSxLZCxLcykgdGhhdCBhcmUgYWxsIDAnc1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdDogZmFsc2VcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5cblRIUkVFLk1UTExvYWRlci5NYXRlcmlhbENyZWF0b3IgPSBmdW5jdGlvbiAoIGJhc2VVcmwsIG9wdGlvbnMgKSB7XG5cblx0dGhpcy5iYXNlVXJsID0gYmFzZVVybCB8fCAnJztcblx0dGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0dGhpcy5tYXRlcmlhbHNJbmZvID0ge307XG5cdHRoaXMubWF0ZXJpYWxzID0ge307XG5cdHRoaXMubWF0ZXJpYWxzQXJyYXkgPSBbXTtcblx0dGhpcy5uYW1lTG9va3VwID0ge307XG5cblx0dGhpcy5zaWRlID0gKCB0aGlzLm9wdGlvbnMgJiYgdGhpcy5vcHRpb25zLnNpZGUgKSA/IHRoaXMub3B0aW9ucy5zaWRlIDogVEhSRUUuRnJvbnRTaWRlO1xuXHR0aGlzLndyYXAgPSAoIHRoaXMub3B0aW9ucyAmJiB0aGlzLm9wdGlvbnMud3JhcCApID8gdGhpcy5vcHRpb25zLndyYXAgOiBUSFJFRS5SZXBlYXRXcmFwcGluZztcblxufTtcblxuVEhSRUUuTVRMTG9hZGVyLk1hdGVyaWFsQ3JlYXRvci5wcm90b3R5cGUgPSB7XG5cblx0Y29uc3RydWN0b3I6IFRIUkVFLk1UTExvYWRlci5NYXRlcmlhbENyZWF0b3IsXG5cblx0Y3Jvc3NPcmlnaW46ICdBbm9ueW1vdXMnLFxuXG5cdHNldENyb3NzT3JpZ2luOiBmdW5jdGlvbiAoIHZhbHVlICkge1xuXG5cdFx0dGhpcy5jcm9zc09yaWdpbiA9IHZhbHVlO1xuXG5cdH0sXG5cblx0c2V0TWFuYWdlcjogZnVuY3Rpb24gKCB2YWx1ZSApIHtcblxuXHRcdHRoaXMubWFuYWdlciA9IHZhbHVlO1xuXG5cdH0sXG5cblx0c2V0TWF0ZXJpYWxzOiBmdW5jdGlvbiAoIG1hdGVyaWFsc0luZm8gKSB7XG5cblx0XHR0aGlzLm1hdGVyaWFsc0luZm8gPSB0aGlzLmNvbnZlcnQoIG1hdGVyaWFsc0luZm8gKTtcblx0XHR0aGlzLm1hdGVyaWFscyA9IHt9O1xuXHRcdHRoaXMubWF0ZXJpYWxzQXJyYXkgPSBbXTtcblx0XHR0aGlzLm5hbWVMb29rdXAgPSB7fTtcblxuXHR9LFxuXG5cdGNvbnZlcnQ6IGZ1bmN0aW9uICggbWF0ZXJpYWxzSW5mbyApIHtcblxuXHRcdGlmICggISB0aGlzLm9wdGlvbnMgKSByZXR1cm4gbWF0ZXJpYWxzSW5mbztcblxuXHRcdHZhciBjb252ZXJ0ZWQgPSB7fTtcblxuXHRcdGZvciAoIHZhciBtbiBpbiBtYXRlcmlhbHNJbmZvICkge1xuXG5cdFx0XHQvLyBDb252ZXJ0IG1hdGVyaWFscyBpbmZvIGludG8gbm9ybWFsaXplZCBmb3JtIGJhc2VkIG9uIG9wdGlvbnNcblxuXHRcdFx0dmFyIG1hdCA9IG1hdGVyaWFsc0luZm9bIG1uIF07XG5cblx0XHRcdHZhciBjb3ZtYXQgPSB7fTtcblxuXHRcdFx0Y29udmVydGVkWyBtbiBdID0gY292bWF0O1xuXG5cdFx0XHRmb3IgKCB2YXIgcHJvcCBpbiBtYXQgKSB7XG5cblx0XHRcdFx0dmFyIHNhdmUgPSB0cnVlO1xuXHRcdFx0XHR2YXIgdmFsdWUgPSBtYXRbIHByb3AgXTtcblx0XHRcdFx0dmFyIGxwcm9wID0gcHJvcC50b0xvd2VyQ2FzZSgpO1xuXG5cdFx0XHRcdHN3aXRjaCAoIGxwcm9wICkge1xuXG5cdFx0XHRcdFx0Y2FzZSAna2QnOlxuXHRcdFx0XHRcdGNhc2UgJ2thJzpcblx0XHRcdFx0XHRjYXNlICdrcyc6XG5cblx0XHRcdFx0XHRcdC8vIERpZmZ1c2UgY29sb3IgKGNvbG9yIHVuZGVyIHdoaXRlIGxpZ2h0KSB1c2luZyBSR0IgdmFsdWVzXG5cblx0XHRcdFx0XHRcdGlmICggdGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9ucy5ub3JtYWxpemVSR0IgKSB7XG5cblx0XHRcdFx0XHRcdFx0dmFsdWUgPSBbIHZhbHVlWyAwIF0gLyAyNTUsIHZhbHVlWyAxIF0gLyAyNTUsIHZhbHVlWyAyIF0gLyAyNTUgXTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpZiAoIHRoaXMub3B0aW9ucyAmJiB0aGlzLm9wdGlvbnMuaWdub3JlWmVyb1JHQnMgKSB7XG5cblx0XHRcdFx0XHRcdFx0aWYgKCB2YWx1ZVsgMCBdID09PSAwICYmIHZhbHVlWyAxIF0gPT09IDAgJiYgdmFsdWVbIDIgXSA9PT0gMCApIHtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIGlnbm9yZVxuXG5cdFx0XHRcdFx0XHRcdFx0c2F2ZSA9IGZhbHNlO1xuXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGRlZmF1bHQ6XG5cblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIHNhdmUgKSB7XG5cblx0XHRcdFx0XHRjb3ZtYXRbIGxwcm9wIF0gPSB2YWx1ZTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdHJldHVybiBjb252ZXJ0ZWQ7XG5cblx0fSxcblxuXHRwcmVsb2FkOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRmb3IgKCB2YXIgbW4gaW4gdGhpcy5tYXRlcmlhbHNJbmZvICkge1xuXG5cdFx0XHR0aGlzLmNyZWF0ZSggbW4gKTtcblxuXHRcdH1cblxuXHR9LFxuXG5cdGdldEluZGV4OiBmdW5jdGlvbiAoIG1hdGVyaWFsTmFtZSApIHtcblxuXHRcdHJldHVybiB0aGlzLm5hbWVMb29rdXBbIG1hdGVyaWFsTmFtZSBdO1xuXG5cdH0sXG5cblx0Z2V0QXNBcnJheTogZnVuY3Rpb24gKCkge1xuXG5cdFx0dmFyIGluZGV4ID0gMDtcblxuXHRcdGZvciAoIHZhciBtbiBpbiB0aGlzLm1hdGVyaWFsc0luZm8gKSB7XG5cblx0XHRcdHRoaXMubWF0ZXJpYWxzQXJyYXlbIGluZGV4IF0gPSB0aGlzLmNyZWF0ZSggbW4gKTtcblx0XHRcdHRoaXMubmFtZUxvb2t1cFsgbW4gXSA9IGluZGV4O1xuXHRcdFx0aW5kZXggKys7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5tYXRlcmlhbHNBcnJheTtcblxuXHR9LFxuXG5cdGNyZWF0ZTogZnVuY3Rpb24gKCBtYXRlcmlhbE5hbWUgKSB7XG5cblx0XHRpZiAoIHRoaXMubWF0ZXJpYWxzWyBtYXRlcmlhbE5hbWUgXSA9PT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHR0aGlzLmNyZWF0ZU1hdGVyaWFsXyggbWF0ZXJpYWxOYW1lICk7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5tYXRlcmlhbHNbIG1hdGVyaWFsTmFtZSBdO1xuXG5cdH0sXG5cblx0Y3JlYXRlTWF0ZXJpYWxfOiBmdW5jdGlvbiAoIG1hdGVyaWFsTmFtZSApIHtcblxuXHRcdC8vIENyZWF0ZSBtYXRlcmlhbFxuXG5cdFx0dmFyIHNjb3BlID0gdGhpcztcblx0XHR2YXIgbWF0ID0gdGhpcy5tYXRlcmlhbHNJbmZvWyBtYXRlcmlhbE5hbWUgXTtcblx0XHR2YXIgcGFyYW1zID0ge1xuXG5cdFx0XHRuYW1lOiBtYXRlcmlhbE5hbWUsXG5cdFx0XHRzaWRlOiB0aGlzLnNpZGVcblxuXHRcdH07XG5cblx0XHRmdW5jdGlvbiByZXNvbHZlVVJMKCBiYXNlVXJsLCB1cmwgKSB7XG5cblx0XHRcdGlmICggdHlwZW9mIHVybCAhPT0gJ3N0cmluZycgfHwgdXJsID09PSAnJyApXG5cdFx0XHRcdHJldHVybiAnJztcblxuXHRcdFx0Ly8gQWJzb2x1dGUgVVJMXG5cdFx0XHRpZiAoIC9eaHR0cHM/OlxcL1xcLy9pLnRlc3QoIHVybCApICkgcmV0dXJuIHVybDtcblxuXHRcdFx0cmV0dXJuIGJhc2VVcmwgKyB1cmw7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBzZXRNYXBGb3JUeXBlKCBtYXBUeXBlLCB2YWx1ZSApIHtcblxuXHRcdFx0aWYgKCBwYXJhbXNbIG1hcFR5cGUgXSApIHJldHVybjsgLy8gS2VlcCB0aGUgZmlyc3QgZW5jb3VudGVyZWQgdGV4dHVyZVxuXG5cdFx0XHR2YXIgdGV4UGFyYW1zID0gc2NvcGUuZ2V0VGV4dHVyZVBhcmFtcyggdmFsdWUsIHBhcmFtcyApO1xuXHRcdFx0dmFyIG1hcCA9IHNjb3BlLmxvYWRUZXh0dXJlKCByZXNvbHZlVVJMKCBzY29wZS5iYXNlVXJsLCB0ZXhQYXJhbXMudXJsICkgKTtcblxuXHRcdFx0bWFwLnJlcGVhdC5jb3B5KCB0ZXhQYXJhbXMuc2NhbGUgKTtcblx0XHRcdG1hcC5vZmZzZXQuY29weSggdGV4UGFyYW1zLm9mZnNldCApO1xuXG5cdFx0XHRtYXAud3JhcFMgPSBzY29wZS53cmFwO1xuXHRcdFx0bWFwLndyYXBUID0gc2NvcGUud3JhcDtcblxuXHRcdFx0cGFyYW1zWyBtYXBUeXBlIF0gPSBtYXA7XG5cblx0XHR9XG5cblx0XHRmb3IgKCB2YXIgcHJvcCBpbiBtYXQgKSB7XG5cblx0XHRcdHZhciB2YWx1ZSA9IG1hdFsgcHJvcCBdO1xuXHRcdFx0dmFyIG47XG5cblx0XHRcdGlmICggdmFsdWUgPT09ICcnICkgY29udGludWU7XG5cblx0XHRcdHN3aXRjaCAoIHByb3AudG9Mb3dlckNhc2UoKSApIHtcblxuXHRcdFx0XHQvLyBOcyBpcyBtYXRlcmlhbCBzcGVjdWxhciBleHBvbmVudFxuXG5cdFx0XHRcdGNhc2UgJ2tkJzpcblxuXHRcdFx0XHRcdC8vIERpZmZ1c2UgY29sb3IgKGNvbG9yIHVuZGVyIHdoaXRlIGxpZ2h0KSB1c2luZyBSR0IgdmFsdWVzXG5cblx0XHRcdFx0XHRwYXJhbXMuY29sb3IgPSBuZXcgVEhSRUUuQ29sb3IoKS5mcm9tQXJyYXkoIHZhbHVlICk7XG5cblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICdrcyc6XG5cblx0XHRcdFx0XHQvLyBTcGVjdWxhciBjb2xvciAoY29sb3Igd2hlbiBsaWdodCBpcyByZWZsZWN0ZWQgZnJvbSBzaGlueSBzdXJmYWNlKSB1c2luZyBSR0IgdmFsdWVzXG5cdFx0XHRcdFx0cGFyYW1zLnNwZWN1bGFyID0gbmV3IFRIUkVFLkNvbG9yKCkuZnJvbUFycmF5KCB2YWx1ZSApO1xuXG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAnbWFwX2tkJzpcblxuXHRcdFx0XHRcdC8vIERpZmZ1c2UgdGV4dHVyZSBtYXBcblxuXHRcdFx0XHRcdHNldE1hcEZvclR5cGUoIFwibWFwXCIsIHZhbHVlICk7XG5cblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICdtYXBfa3MnOlxuXG5cdFx0XHRcdFx0Ly8gU3BlY3VsYXIgbWFwXG5cblx0XHRcdFx0XHRzZXRNYXBGb3JUeXBlKCBcInNwZWN1bGFyTWFwXCIsIHZhbHVlICk7XG5cblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICdub3JtJzpcblxuXHRcdFx0XHRcdHNldE1hcEZvclR5cGUoIFwibm9ybWFsTWFwXCIsIHZhbHVlICk7XG5cblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICdtYXBfYnVtcCc6XG5cdFx0XHRcdGNhc2UgJ2J1bXAnOlxuXG5cdFx0XHRcdFx0Ly8gQnVtcCB0ZXh0dXJlIG1hcFxuXG5cdFx0XHRcdFx0c2V0TWFwRm9yVHlwZSggXCJidW1wTWFwXCIsIHZhbHVlICk7XG5cblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICducyc6XG5cblx0XHRcdFx0XHQvLyBUaGUgc3BlY3VsYXIgZXhwb25lbnQgKGRlZmluZXMgdGhlIGZvY3VzIG9mIHRoZSBzcGVjdWxhciBoaWdobGlnaHQpXG5cdFx0XHRcdFx0Ly8gQSBoaWdoIGV4cG9uZW50IHJlc3VsdHMgaW4gYSB0aWdodCwgY29uY2VudHJhdGVkIGhpZ2hsaWdodC4gTnMgdmFsdWVzIG5vcm1hbGx5IHJhbmdlIGZyb20gMCB0byAxMDAwLlxuXG5cdFx0XHRcdFx0cGFyYW1zLnNoaW5pbmVzcyA9IHBhcnNlRmxvYXQoIHZhbHVlICk7XG5cblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICdkJzpcblx0XHRcdFx0XHRuID0gcGFyc2VGbG9hdCggdmFsdWUgKTtcblxuXHRcdFx0XHRcdGlmICggbiA8IDEgKSB7XG5cblx0XHRcdFx0XHRcdHBhcmFtcy5vcGFjaXR5ID0gbjtcblx0XHRcdFx0XHRcdHBhcmFtcy50cmFuc3BhcmVudCA9IHRydWU7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICd0cic6XG5cdFx0XHRcdFx0biA9IHBhcnNlRmxvYXQoIHZhbHVlICk7XG5cblx0XHRcdFx0XHRpZiAoIHRoaXMub3B0aW9ucyAmJiB0aGlzLm9wdGlvbnMuaW52ZXJ0VHJQcm9wZXJ0eSApIG4gPSAxIC0gbjtcblxuXHRcdFx0XHRcdGlmICggbiA8IDEgKSB7XG5cblx0XHRcdFx0XHRcdHBhcmFtcy5vcGFjaXR5ID0gbjtcblx0XHRcdFx0XHRcdHBhcmFtcy50cmFuc3BhcmVudCA9IHRydWU7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHR0aGlzLm1hdGVyaWFsc1sgbWF0ZXJpYWxOYW1lIF0gPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoIHBhcmFtcyApO1xuXHRcdHJldHVybiB0aGlzLm1hdGVyaWFsc1sgbWF0ZXJpYWxOYW1lIF07XG5cblx0fSxcblxuXHRnZXRUZXh0dXJlUGFyYW1zOiBmdW5jdGlvbiAoIHZhbHVlLCBtYXRQYXJhbXMgKSB7XG5cblx0XHR2YXIgdGV4UGFyYW1zID0ge1xuXG5cdFx0XHRzY2FsZTogbmV3IFRIUkVFLlZlY3RvcjIoIDEsIDEgKSxcblx0XHRcdG9mZnNldDogbmV3IFRIUkVFLlZlY3RvcjIoIDAsIDAgKVxuXG5cdFx0IH07XG5cblx0XHR2YXIgaXRlbXMgPSB2YWx1ZS5zcGxpdCggL1xccysvICk7XG5cdFx0dmFyIHBvcztcblxuXHRcdHBvcyA9IGl0ZW1zLmluZGV4T2YoICctYm0nICk7XG5cblx0XHRpZiAoIHBvcyA+PSAwICkge1xuXG5cdFx0XHRtYXRQYXJhbXMuYnVtcFNjYWxlID0gcGFyc2VGbG9hdCggaXRlbXNbIHBvcyArIDEgXSApO1xuXHRcdFx0aXRlbXMuc3BsaWNlKCBwb3MsIDIgKTtcblxuXHRcdH1cblxuXHRcdHBvcyA9IGl0ZW1zLmluZGV4T2YoICctcycgKTtcblxuXHRcdGlmICggcG9zID49IDAgKSB7XG5cblx0XHRcdHRleFBhcmFtcy5zY2FsZS5zZXQoIHBhcnNlRmxvYXQoIGl0ZW1zWyBwb3MgKyAxIF0gKSwgcGFyc2VGbG9hdCggaXRlbXNbIHBvcyArIDIgXSApICk7XG5cdFx0XHRpdGVtcy5zcGxpY2UoIHBvcywgNCApOyAvLyB3ZSBleHBlY3QgMyBwYXJhbWV0ZXJzIGhlcmUhXG5cblx0XHR9XG5cblx0XHRwb3MgPSBpdGVtcy5pbmRleE9mKCAnLW8nICk7XG5cblx0XHRpZiAoIHBvcyA+PSAwICkge1xuXG5cdFx0XHR0ZXhQYXJhbXMub2Zmc2V0LnNldCggcGFyc2VGbG9hdCggaXRlbXNbIHBvcyArIDEgXSApLCBwYXJzZUZsb2F0KCBpdGVtc1sgcG9zICsgMiBdICkgKTtcblx0XHRcdGl0ZW1zLnNwbGljZSggcG9zLCA0ICk7IC8vIHdlIGV4cGVjdCAzIHBhcmFtZXRlcnMgaGVyZSFcblxuXHRcdH1cblxuXHRcdHRleFBhcmFtcy51cmwgPSBpdGVtcy5qb2luKCAnICcgKS50cmltKCk7XG5cdFx0cmV0dXJuIHRleFBhcmFtcztcblxuXHR9LFxuXG5cdGxvYWRUZXh0dXJlOiBmdW5jdGlvbiAoIHVybCwgbWFwcGluZywgb25Mb2FkLCBvblByb2dyZXNzLCBvbkVycm9yICkge1xuXG5cdFx0dmFyIHRleHR1cmU7XG5cdFx0dmFyIGxvYWRlciA9IFRIUkVFLkxvYWRlci5IYW5kbGVycy5nZXQoIHVybCApO1xuXHRcdHZhciBtYW5hZ2VyID0gKCB0aGlzLm1hbmFnZXIgIT09IHVuZGVmaW5lZCApID8gdGhpcy5tYW5hZ2VyIDogVEhSRUUuRGVmYXVsdExvYWRpbmdNYW5hZ2VyO1xuXG5cdFx0aWYgKCBsb2FkZXIgPT09IG51bGwgKSB7XG5cblx0XHRcdGxvYWRlciA9IG5ldyBUSFJFRS5UZXh0dXJlTG9hZGVyKCBtYW5hZ2VyICk7XG5cblx0XHR9XG5cblx0XHRpZiAoIGxvYWRlci5zZXRDcm9zc09yaWdpbiApIGxvYWRlci5zZXRDcm9zc09yaWdpbiggdGhpcy5jcm9zc09yaWdpbiApO1xuXHRcdHRleHR1cmUgPSBsb2FkZXIubG9hZCggdXJsLCBvbkxvYWQsIG9uUHJvZ3Jlc3MsIG9uRXJyb3IgKTtcblxuXHRcdGlmICggbWFwcGluZyAhPT0gdW5kZWZpbmVkICkgdGV4dHVyZS5tYXBwaW5nID0gbWFwcGluZztcblxuXHRcdHJldHVybiB0ZXh0dXJlO1xuXG5cdH1cblxufTtcbiIsIi8qKlxuICogQGF1dGhvciBSaWNoIFRpYmJldHQgLyBodHRwczovL2dpdGh1Yi5jb20vcmljaHRyXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xuICogQGF1dGhvciBUb255IFBhcmlzaSAvIGh0dHA6Ly93d3cudG9ueXBhcmlzaS5jb20vXG4gKiBAYXV0aG9yIFRha2FoaXJvIC8gaHR0cHM6Ly9naXRodWIuY29tL3Rha2FoaXJveFxuICogQGF1dGhvciBEb24gTWNDdXJkeSAvIGh0dHBzOi8vd3d3LmRvbm1jY3VyZHkuY29tXG4gKi9cblxuVEhSRUUuR0xURkxvYWRlciA9ICggZnVuY3Rpb24gKCkge1xuICAgIFxuICAgICAgICBmdW5jdGlvbiBHTFRGTG9hZGVyKCBtYW5hZ2VyICkge1xuICAgIFxuICAgICAgICAgICAgdGhpcy5tYW5hZ2VyID0gKCBtYW5hZ2VyICE9PSB1bmRlZmluZWQgKSA/IG1hbmFnZXIgOiBUSFJFRS5EZWZhdWx0TG9hZGluZ01hbmFnZXI7XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgR0xURkxvYWRlci5wcm90b3R5cGUgPSB7XG4gICAgXG4gICAgICAgICAgICBjb25zdHJ1Y3RvcjogR0xURkxvYWRlcixcbiAgICBcbiAgICAgICAgICAgIGNyb3NzT3JpZ2luOiAnQW5vbnltb3VzJyxcbiAgICBcbiAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uICggdXJsLCBvbkxvYWQsIG9uUHJvZ3Jlc3MsIG9uRXJyb3IgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHNjb3BlID0gdGhpcztcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgcGF0aCA9IHRoaXMucGF0aCAhPT0gdW5kZWZpbmVkID8gdGhpcy5wYXRoIDogVEhSRUUuTG9hZGVyVXRpbHMuZXh0cmFjdFVybEJhc2UoIHVybCApO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBsb2FkZXIgPSBuZXcgVEhSRUUuRmlsZUxvYWRlciggc2NvcGUubWFuYWdlciApO1xuICAgIFxuICAgICAgICAgICAgICAgIGxvYWRlci5zZXRSZXNwb25zZVR5cGUoICdhcnJheWJ1ZmZlcicgKTtcbiAgICBcbiAgICAgICAgICAgICAgICBsb2FkZXIubG9hZCggdXJsLCBmdW5jdGlvbiAoIGRhdGEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5wYXJzZSggZGF0YSwgcGF0aCwgb25Mb2FkLCBvbkVycm9yICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKCBlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBvbkVycm9yICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FcnJvciggZSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfSwgb25Qcm9ncmVzcywgb25FcnJvciApO1xuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIHNldENyb3NzT3JpZ2luOiBmdW5jdGlvbiAoIHZhbHVlICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuY3Jvc3NPcmlnaW4gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICBcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICBzZXRQYXRoOiBmdW5jdGlvbiAoIHZhbHVlICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHRoaXMucGF0aCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIHBhcnNlOiBmdW5jdGlvbiAoIGRhdGEsIHBhdGgsIG9uTG9hZCwgb25FcnJvciApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudDtcbiAgICAgICAgICAgICAgICB2YXIgZXh0ZW5zaW9ucyA9IHt9O1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggdHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gZGF0YTtcbiAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgbWFnaWMgPSBUSFJFRS5Mb2FkZXJVdGlscy5kZWNvZGVUZXh0KCBuZXcgVWludDhBcnJheSggZGF0YSwgMCwgNCApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggbWFnaWMgPT09IEJJTkFSWV9FWFRFTlNJT05fSEVBREVSX01BR0lDICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRlbnNpb25zWyBFWFRFTlNJT05TLktIUl9CSU5BUllfR0xURiBdID0gbmV3IEdMVEZCaW5hcnlFeHRlbnNpb24oIGRhdGEgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKCBlcnJvciApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIG9uRXJyb3IgKSBvbkVycm9yKCBlcnJvciApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBleHRlbnNpb25zWyBFWFRFTlNJT05TLktIUl9CSU5BUllfR0xURiBdLmNvbnRlbnQ7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gVEhSRUUuTG9hZGVyVXRpbHMuZGVjb2RlVGV4dCggbmV3IFVpbnQ4QXJyYXkoIGRhdGEgKSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHZhciBqc29uID0gSlNPTi5wYXJzZSggY29udGVudCApO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICgganNvbi5hc3NldCA9PT0gdW5kZWZpbmVkIHx8IGpzb24uYXNzZXQudmVyc2lvblsgMCBdIDwgMiApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBvbkVycm9yICkgb25FcnJvciggbmV3IEVycm9yKCAnVEhSRUUuR0xURkxvYWRlcjogVW5zdXBwb3J0ZWQgYXNzZXQuIGdsVEYgdmVyc2lvbnMgPj0yLjAgYXJlIHN1cHBvcnRlZC4gVXNlIExlZ2FjeUdMVEZMb2FkZXIgaW5zdGVhZC4nICkgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGpzb24uZXh0ZW5zaW9uc1VzZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICgganNvbi5leHRlbnNpb25zVXNlZC5pbmRleE9mKCBFWFRFTlNJT05TLktIUl9MSUdIVFMgKSA+PSAwICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5zaW9uc1sgRVhURU5TSU9OUy5LSFJfTElHSFRTIF0gPSBuZXcgR0xURkxpZ2h0c0V4dGVuc2lvbigganNvbiApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICgganNvbi5leHRlbnNpb25zVXNlZC5pbmRleE9mKCBFWFRFTlNJT05TLktIUl9NQVRFUklBTFNfUEJSX1NQRUNVTEFSX0dMT1NTSU5FU1MgKSA+PSAwICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5zaW9uc1sgRVhURU5TSU9OUy5LSFJfTUFURVJJQUxTX1BCUl9TUEVDVUxBUl9HTE9TU0lORVNTIF0gPSBuZXcgR0xURk1hdGVyaWFsc1BiclNwZWN1bGFyR2xvc3NpbmVzc0V4dGVuc2lvbigpO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGNvbnNvbGUudGltZSggJ0dMVEZMb2FkZXInICk7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHBhcnNlciA9IG5ldyBHTFRGUGFyc2VyKCBqc29uLCBleHRlbnNpb25zLCB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhdGggfHwgdGhpcy5wYXRoIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICBjcm9zc09yaWdpbjogdGhpcy5jcm9zc09yaWdpbixcbiAgICAgICAgICAgICAgICAgICAgbWFuYWdlcjogdGhpcy5tYW5hZ2VyXG4gICAgXG4gICAgICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgICAgIHBhcnNlci5wYXJzZSggZnVuY3Rpb24gKCBzY2VuZSwgc2NlbmVzLCBjYW1lcmFzLCBhbmltYXRpb25zLCBhc3NldCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS50aW1lRW5kKCAnR0xURkxvYWRlcicgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdsVEYgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY2VuZTogc2NlbmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzY2VuZXM6IHNjZW5lcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbWVyYXM6IGNhbWVyYXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25zOiBhbmltYXRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQ6IGFzc2V0XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG9uTG9hZCggZ2xURiApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0sIG9uRXJyb3IgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgLyogR0xURlJFR0lTVFJZICovXG4gICAgXG4gICAgICAgIGZ1bmN0aW9uIEdMVEZSZWdpc3RyeSgpIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBvYmplY3RzID0ge307XG4gICAgXG4gICAgICAgICAgICByZXR1cm5cdHtcbiAgICBcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgga2V5ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0c1sga2V5IF07XG4gICAgXG4gICAgICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgICAgICBhZGQ6IGZ1bmN0aW9uICgga2V5LCBvYmplY3QgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdHNbIGtleSBdID0gb2JqZWN0O1xuICAgIFxuICAgICAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAoIGtleSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9iamVjdHNbIGtleSBdO1xuICAgIFxuICAgICAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICAgICAgcmVtb3ZlQWxsOiBmdW5jdGlvbiAoKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdHMgPSB7fTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gICAgICAgIC8qKioqKioqKioqIEVYVEVOU0lPTlMgKioqKioqKioqKiovXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gICAgXG4gICAgICAgIHZhciBFWFRFTlNJT05TID0ge1xuICAgICAgICAgICAgS0hSX0JJTkFSWV9HTFRGOiAnS0hSX2JpbmFyeV9nbFRGJyxcbiAgICAgICAgICAgIEtIUl9MSUdIVFM6ICdLSFJfbGlnaHRzJyxcbiAgICAgICAgICAgIEtIUl9NQVRFUklBTFNfUEJSX1NQRUNVTEFSX0dMT1NTSU5FU1M6ICdLSFJfbWF0ZXJpYWxzX3BiclNwZWN1bGFyR2xvc3NpbmVzcydcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIExpZ2h0cyBFeHRlbnNpb25cbiAgICAgICAgICpcbiAgICAgICAgICogU3BlY2lmaWNhdGlvbjogUEVORElOR1xuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gR0xURkxpZ2h0c0V4dGVuc2lvbigganNvbiApIHtcbiAgICBcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IEVYVEVOU0lPTlMuS0hSX0xJR0hUUztcbiAgICBcbiAgICAgICAgICAgIHRoaXMubGlnaHRzID0ge307XG4gICAgXG4gICAgICAgICAgICB2YXIgZXh0ZW5zaW9uID0gKCBqc29uLmV4dGVuc2lvbnMgJiYganNvbi5leHRlbnNpb25zWyBFWFRFTlNJT05TLktIUl9MSUdIVFMgXSApIHx8IHt9O1xuICAgICAgICAgICAgdmFyIGxpZ2h0cyA9IGV4dGVuc2lvbi5saWdodHMgfHwge307XG4gICAgXG4gICAgICAgICAgICBmb3IgKCB2YXIgbGlnaHRJZCBpbiBsaWdodHMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGxpZ2h0ID0gbGlnaHRzWyBsaWdodElkIF07XG4gICAgICAgICAgICAgICAgdmFyIGxpZ2h0Tm9kZTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgY29sb3IgPSBuZXcgVEhSRUUuQ29sb3IoKS5mcm9tQXJyYXkoIGxpZ2h0LmNvbG9yICk7XG4gICAgXG4gICAgICAgICAgICAgICAgc3dpdGNoICggbGlnaHQudHlwZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGlyZWN0aW9uYWwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHROb2RlID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoIGNvbG9yICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaWdodE5vZGUucG9zaXRpb24uc2V0KCAwLCAwLCAxICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncG9pbnQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHROb2RlID0gbmV3IFRIUkVFLlBvaW50TGlnaHQoIGNvbG9yICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc3BvdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBsaWdodE5vZGUgPSBuZXcgVEhSRUUuU3BvdExpZ2h0KCBjb2xvciApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHROb2RlLnBvc2l0aW9uLnNldCggMCwgMCwgMSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FtYmllbnQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHROb2RlID0gbmV3IFRIUkVFLkFtYmllbnRMaWdodCggY29sb3IgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGxpZ2h0Tm9kZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBsaWdodC5jb25zdGFudEF0dGVudWF0aW9uICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBsaWdodE5vZGUuaW50ZW5zaXR5ID0gbGlnaHQuY29uc3RhbnRBdHRlbnVhdGlvbjtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGxpZ2h0LmxpbmVhckF0dGVudWF0aW9uICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBsaWdodE5vZGUuZGlzdGFuY2UgPSAxIC8gbGlnaHQubGluZWFyQXR0ZW51YXRpb247XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBsaWdodC5xdWFkcmF0aWNBdHRlbnVhdGlvbiAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHROb2RlLmRlY2F5ID0gbGlnaHQucXVhZHJhdGljQXR0ZW51YXRpb247XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBsaWdodC5mYWxsT2ZmQW5nbGUgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0Tm9kZS5hbmdsZSA9IGxpZ2h0LmZhbGxPZmZBbmdsZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGxpZ2h0LmZhbGxPZmZFeHBvbmVudCAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCAnVEhSRUUuR0xURkxvYWRlcjo6IGxpZ2h0LmZhbGxPZmZFeHBvbmVudCBub3QgY3VycmVudGx5IHN1cHBvcnRlZC4nICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbGlnaHROb2RlLm5hbWUgPSBsaWdodC5uYW1lIHx8ICggJ2xpZ2h0XycgKyBsaWdodElkICk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGlnaHRzWyBsaWdodElkIF0gPSBsaWdodE5vZGU7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8qIEJJTkFSWSBFWFRFTlNJT04gKi9cbiAgICBcbiAgICAgICAgdmFyIEJJTkFSWV9FWFRFTlNJT05fQlVGRkVSX05BTUUgPSAnYmluYXJ5X2dsVEYnO1xuICAgICAgICB2YXIgQklOQVJZX0VYVEVOU0lPTl9IRUFERVJfTUFHSUMgPSAnZ2xURic7XG4gICAgICAgIHZhciBCSU5BUllfRVhURU5TSU9OX0hFQURFUl9MRU5HVEggPSAxMjtcbiAgICAgICAgdmFyIEJJTkFSWV9FWFRFTlNJT05fQ0hVTktfVFlQRVMgPSB7IEpTT046IDB4NEU0RjUzNEEsIEJJTjogMHgwMDRFNDk0MiB9O1xuICAgIFxuICAgICAgICBmdW5jdGlvbiBHTFRGQmluYXJ5RXh0ZW5zaW9uKCBkYXRhICkge1xuICAgIFxuICAgICAgICAgICAgdGhpcy5uYW1lID0gRVhURU5TSU9OUy5LSFJfQklOQVJZX0dMVEY7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5ib2R5ID0gbnVsbDtcbiAgICBcbiAgICAgICAgICAgIHZhciBoZWFkZXJWaWV3ID0gbmV3IERhdGFWaWV3KCBkYXRhLCAwLCBCSU5BUllfRVhURU5TSU9OX0hFQURFUl9MRU5HVEggKTtcbiAgICBcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyID0ge1xuICAgICAgICAgICAgICAgIG1hZ2ljOiBUSFJFRS5Mb2FkZXJVdGlscy5kZWNvZGVUZXh0KCBuZXcgVWludDhBcnJheSggZGF0YS5zbGljZSggMCwgNCApICkgKSxcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBoZWFkZXJWaWV3LmdldFVpbnQzMiggNCwgdHJ1ZSApLFxuICAgICAgICAgICAgICAgIGxlbmd0aDogaGVhZGVyVmlldy5nZXRVaW50MzIoIDgsIHRydWUgKVxuICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgIGlmICggdGhpcy5oZWFkZXIubWFnaWMgIT09IEJJTkFSWV9FWFRFTlNJT05fSEVBREVSX01BR0lDICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvciggJ1RIUkVFLkdMVEZMb2FkZXI6IFVuc3VwcG9ydGVkIGdsVEYtQmluYXJ5IGhlYWRlci4nICk7XG4gICAgXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCB0aGlzLmhlYWRlci52ZXJzaW9uIDwgMi4wICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvciggJ1RIUkVFLkdMVEZMb2FkZXI6IExlZ2FjeSBiaW5hcnkgZmlsZSBkZXRlY3RlZC4gVXNlIExlZ2FjeUdMVEZMb2FkZXIgaW5zdGVhZC4nICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB2YXIgY2h1bmtWaWV3ID0gbmV3IERhdGFWaWV3KCBkYXRhLCBCSU5BUllfRVhURU5TSU9OX0hFQURFUl9MRU5HVEggKTtcbiAgICAgICAgICAgIHZhciBjaHVua0luZGV4ID0gMDtcbiAgICBcbiAgICAgICAgICAgIHdoaWxlICggY2h1bmtJbmRleCA8IGNodW5rVmlldy5ieXRlTGVuZ3RoICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBjaHVua0xlbmd0aCA9IGNodW5rVmlldy5nZXRVaW50MzIoIGNodW5rSW5kZXgsIHRydWUgKTtcbiAgICAgICAgICAgICAgICBjaHVua0luZGV4ICs9IDQ7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGNodW5rVHlwZSA9IGNodW5rVmlldy5nZXRVaW50MzIoIGNodW5rSW5kZXgsIHRydWUgKTtcbiAgICAgICAgICAgICAgICBjaHVua0luZGV4ICs9IDQ7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBjaHVua1R5cGUgPT09IEJJTkFSWV9FWFRFTlNJT05fQ0hVTktfVFlQRVMuSlNPTiApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRlbnRBcnJheSA9IG5ldyBVaW50OEFycmF5KCBkYXRhLCBCSU5BUllfRVhURU5TSU9OX0hFQURFUl9MRU5HVEggKyBjaHVua0luZGV4LCBjaHVua0xlbmd0aCApO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQgPSBUSFJFRS5Mb2FkZXJVdGlscy5kZWNvZGVUZXh0KCBjb250ZW50QXJyYXkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBjaHVua1R5cGUgPT09IEJJTkFSWV9FWFRFTlNJT05fQ0hVTktfVFlQRVMuQklOICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IEJJTkFSWV9FWFRFTlNJT05fSEVBREVSX0xFTkdUSCArIGNodW5rSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYm9keSA9IGRhdGEuc2xpY2UoIGJ5dGVPZmZzZXQsIGJ5dGVPZmZzZXQgKyBjaHVua0xlbmd0aCApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAvLyBDbGllbnRzIG11c3QgaWdub3JlIGNodW5rcyB3aXRoIHVua25vd24gdHlwZXMuXG4gICAgXG4gICAgICAgICAgICAgICAgY2h1bmtJbmRleCArPSBjaHVua0xlbmd0aDtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGlmICggdGhpcy5jb250ZW50ID09PSBudWxsICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvciggJ1RIUkVFLkdMVEZMb2FkZXI6IEpTT04gY29udGVudCBub3QgZm91bmQuJyApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjdWxhci1HbG9zc2luZXNzIEV4dGVuc2lvblxuICAgICAgICAgKlxuICAgICAgICAgKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYXN0ZXIvZXh0ZW5zaW9ucy8yLjAvS2hyb25vcy9LSFJfbWF0ZXJpYWxzX3BiclNwZWN1bGFyR2xvc3NpbmVzc1xuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gR0xURk1hdGVyaWFsc1BiclNwZWN1bGFyR2xvc3NpbmVzc0V4dGVuc2lvbigpIHtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgXG4gICAgICAgICAgICAgICAgbmFtZTogRVhURU5TSU9OUy5LSFJfTUFURVJJQUxTX1BCUl9TUEVDVUxBUl9HTE9TU0lORVNTLFxuICAgIFxuICAgICAgICAgICAgICAgIHNwZWN1bGFyR2xvc3NpbmVzc1BhcmFtczogW1xuICAgICAgICAgICAgICAgICAgICAnY29sb3InLFxuICAgICAgICAgICAgICAgICAgICAnbWFwJyxcbiAgICAgICAgICAgICAgICAgICAgJ2xpZ2h0TWFwJyxcbiAgICAgICAgICAgICAgICAgICAgJ2xpZ2h0TWFwSW50ZW5zaXR5JyxcbiAgICAgICAgICAgICAgICAgICAgJ2FvTWFwJyxcbiAgICAgICAgICAgICAgICAgICAgJ2FvTWFwSW50ZW5zaXR5JyxcbiAgICAgICAgICAgICAgICAgICAgJ2VtaXNzaXZlJyxcbiAgICAgICAgICAgICAgICAgICAgJ2VtaXNzaXZlSW50ZW5zaXR5JyxcbiAgICAgICAgICAgICAgICAgICAgJ2VtaXNzaXZlTWFwJyxcbiAgICAgICAgICAgICAgICAgICAgJ2J1bXBNYXAnLFxuICAgICAgICAgICAgICAgICAgICAnYnVtcFNjYWxlJyxcbiAgICAgICAgICAgICAgICAgICAgJ25vcm1hbE1hcCcsXG4gICAgICAgICAgICAgICAgICAgICdkaXNwbGFjZW1lbnRNYXAnLFxuICAgICAgICAgICAgICAgICAgICAnZGlzcGxhY2VtZW50U2NhbGUnLFxuICAgICAgICAgICAgICAgICAgICAnZGlzcGxhY2VtZW50QmlhcycsXG4gICAgICAgICAgICAgICAgICAgICdzcGVjdWxhck1hcCcsXG4gICAgICAgICAgICAgICAgICAgICdzcGVjdWxhcicsXG4gICAgICAgICAgICAgICAgICAgICdnbG9zc2luZXNzTWFwJyxcbiAgICAgICAgICAgICAgICAgICAgJ2dsb3NzaW5lc3MnLFxuICAgICAgICAgICAgICAgICAgICAnYWxwaGFNYXAnLFxuICAgICAgICAgICAgICAgICAgICAnZW52TWFwJyxcbiAgICAgICAgICAgICAgICAgICAgJ2Vudk1hcEludGVuc2l0eScsXG4gICAgICAgICAgICAgICAgICAgICdyZWZyYWN0aW9uUmF0aW8nLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgXG4gICAgICAgICAgICAgICAgZ2V0TWF0ZXJpYWxUeXBlOiBmdW5jdGlvbiAoKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBUSFJFRS5TaGFkZXJNYXRlcmlhbDtcbiAgICBcbiAgICAgICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgICAgIGV4dGVuZFBhcmFtczogZnVuY3Rpb24gKCBwYXJhbXMsIG1hdGVyaWFsLCBwYXJzZXIgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYnJTcGVjdWxhckdsb3NzaW5lc3MgPSBtYXRlcmlhbC5leHRlbnNpb25zWyB0aGlzLm5hbWUgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNoYWRlciA9IFRIUkVFLlNoYWRlckxpYlsgJ3N0YW5kYXJkJyBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgdW5pZm9ybXMgPSBUSFJFRS5Vbmlmb3Jtc1V0aWxzLmNsb25lKCBzaGFkZXIudW5pZm9ybXMgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNwZWN1bGFyTWFwUGFyc0ZyYWdtZW50Q2h1bmsgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAnI2lmZGVmIFVTRV9TUEVDVUxBUk1BUCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAnXHR1bmlmb3JtIHNhbXBsZXIyRCBzcGVjdWxhck1hcDsnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJyNlbmRpZidcbiAgICAgICAgICAgICAgICAgICAgXS5qb2luKCAnXFxuJyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgZ2xvc3NpbmVzc01hcFBhcnNGcmFnbWVudENodW5rID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgJyNpZmRlZiBVU0VfR0xPU1NJTkVTU01BUCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAnXHR1bmlmb3JtIHNhbXBsZXIyRCBnbG9zc2luZXNzTWFwOycsXG4gICAgICAgICAgICAgICAgICAgICAgICAnI2VuZGlmJ1xuICAgICAgICAgICAgICAgICAgICBdLmpvaW4oICdcXG4nICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBzcGVjdWxhck1hcEZyYWdtZW50Q2h1bmsgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAndmVjMyBzcGVjdWxhckZhY3RvciA9IHNwZWN1bGFyOycsXG4gICAgICAgICAgICAgICAgICAgICAgICAnI2lmZGVmIFVTRV9TUEVDVUxBUk1BUCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAnXHR2ZWM0IHRleGVsU3BlY3VsYXIgPSB0ZXh0dXJlMkQoIHNwZWN1bGFyTWFwLCB2VXYgKTsnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1x0dGV4ZWxTcGVjdWxhciA9IHNSR0JUb0xpbmVhciggdGV4ZWxTcGVjdWxhciApOycsXG4gICAgICAgICAgICAgICAgICAgICAgICAnXHQvLyByZWFkcyBjaGFubmVsIFJHQiwgY29tcGF0aWJsZSB3aXRoIGEgZ2xURiBTcGVjdWxhci1HbG9zc2luZXNzIChSR0JBKSB0ZXh0dXJlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdcdHNwZWN1bGFyRmFjdG9yICo9IHRleGVsU3BlY3VsYXIucmdiOycsXG4gICAgICAgICAgICAgICAgICAgICAgICAnI2VuZGlmJ1xuICAgICAgICAgICAgICAgICAgICBdLmpvaW4oICdcXG4nICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBnbG9zc2luZXNzTWFwRnJhZ21lbnRDaHVuayA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICdmbG9hdCBnbG9zc2luZXNzRmFjdG9yID0gZ2xvc3NpbmVzczsnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJyNpZmRlZiBVU0VfR0xPU1NJTkVTU01BUCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAnXHR2ZWM0IHRleGVsR2xvc3NpbmVzcyA9IHRleHR1cmUyRCggZ2xvc3NpbmVzc01hcCwgdlV2ICk7JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdcdC8vIHJlYWRzIGNoYW5uZWwgQSwgY29tcGF0aWJsZSB3aXRoIGEgZ2xURiBTcGVjdWxhci1HbG9zc2luZXNzIChSR0JBKSB0ZXh0dXJlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdcdGdsb3NzaW5lc3NGYWN0b3IgKj0gdGV4ZWxHbG9zc2luZXNzLmE7JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICcjZW5kaWYnXG4gICAgICAgICAgICAgICAgICAgIF0uam9pbiggJ1xcbicgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxpZ2h0UGh5c2ljYWxGcmFnbWVudENodW5rID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1BoeXNpY2FsTWF0ZXJpYWwgbWF0ZXJpYWw7JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdtYXRlcmlhbC5kaWZmdXNlQ29sb3IgPSBkaWZmdXNlQ29sb3IucmdiOycsXG4gICAgICAgICAgICAgICAgICAgICAgICAnbWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3MgPSBjbGFtcCggMS4wIC0gZ2xvc3NpbmVzc0ZhY3RvciwgMC4wNCwgMS4wICk7JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdtYXRlcmlhbC5zcGVjdWxhckNvbG9yID0gc3BlY3VsYXJGYWN0b3IucmdiOycsXG4gICAgICAgICAgICAgICAgICAgIF0uam9pbiggJ1xcbicgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZyYWdtZW50U2hhZGVyID0gc2hhZGVyLmZyYWdtZW50U2hhZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSggJyNpbmNsdWRlIDxzcGVjdWxhcm1hcF9mcmFnbWVudD4nLCAnJyApXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSggJ3VuaWZvcm0gZmxvYXQgcm91Z2huZXNzOycsICd1bmlmb3JtIHZlYzMgc3BlY3VsYXI7JyApXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSggJ3VuaWZvcm0gZmxvYXQgbWV0YWxuZXNzOycsICd1bmlmb3JtIGZsb2F0IGdsb3NzaW5lc3M7JyApXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSggJyNpbmNsdWRlIDxyb3VnaG5lc3NtYXBfcGFyc19mcmFnbWVudD4nLCBzcGVjdWxhck1hcFBhcnNGcmFnbWVudENodW5rIClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCAnI2luY2x1ZGUgPG1ldGFsbmVzc21hcF9wYXJzX2ZyYWdtZW50PicsIGdsb3NzaW5lc3NNYXBQYXJzRnJhZ21lbnRDaHVuayApXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSggJyNpbmNsdWRlIDxyb3VnaG5lc3NtYXBfZnJhZ21lbnQ+Jywgc3BlY3VsYXJNYXBGcmFnbWVudENodW5rIClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCAnI2luY2x1ZGUgPG1ldGFsbmVzc21hcF9mcmFnbWVudD4nLCBnbG9zc2luZXNzTWFwRnJhZ21lbnRDaHVuayApXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSggJyNpbmNsdWRlIDxsaWdodHNfcGh5c2ljYWxfZnJhZ21lbnQ+JywgbGlnaHRQaHlzaWNhbEZyYWdtZW50Q2h1bmsgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHVuaWZvcm1zLnJvdWdobmVzcztcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHVuaWZvcm1zLm1ldGFsbmVzcztcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHVuaWZvcm1zLnJvdWdobmVzc01hcDtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHVuaWZvcm1zLm1ldGFsbmVzc01hcDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdW5pZm9ybXMuc3BlY3VsYXIgPSB7IHZhbHVlOiBuZXcgVEhSRUUuQ29sb3IoKS5zZXRIZXgoIDB4MTExMTExICkgfTtcbiAgICAgICAgICAgICAgICAgICAgdW5pZm9ybXMuZ2xvc3NpbmVzcyA9IHsgdmFsdWU6IDAuNSB9O1xuICAgICAgICAgICAgICAgICAgICB1bmlmb3Jtcy5zcGVjdWxhck1hcCA9IHsgdmFsdWU6IG51bGwgfTtcbiAgICAgICAgICAgICAgICAgICAgdW5pZm9ybXMuZ2xvc3NpbmVzc01hcCA9IHsgdmFsdWU6IG51bGwgfTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zLnZlcnRleFNoYWRlciA9IHNoYWRlci52ZXJ0ZXhTaGFkZXI7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcy5mcmFnbWVudFNoYWRlciA9IGZyYWdtZW50U2hhZGVyO1xuICAgICAgICAgICAgICAgICAgICBwYXJhbXMudW5pZm9ybXMgPSB1bmlmb3JtcztcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zLmRlZmluZXMgPSB7ICdTVEFOREFSRCc6ICcnIH07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcy5jb2xvciA9IG5ldyBUSFJFRS5Db2xvciggMS4wLCAxLjAsIDEuMCApO1xuICAgICAgICAgICAgICAgICAgICBwYXJhbXMub3BhY2l0eSA9IDEuMDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBlbmRpbmcgPSBbXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBBcnJheS5pc0FycmF5KCBwYnJTcGVjdWxhckdsb3NzaW5lc3MuZGlmZnVzZUZhY3RvciApICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFycmF5ID0gcGJyU3BlY3VsYXJHbG9zc2luZXNzLmRpZmZ1c2VGYWN0b3I7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMuY29sb3IuZnJvbUFycmF5KCBhcnJheSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zLm9wYWNpdHkgPSBhcnJheVsgMyBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggcGJyU3BlY3VsYXJHbG9zc2luZXNzLmRpZmZ1c2VUZXh0dXJlICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nLnB1c2goIHBhcnNlci5hc3NpZ25UZXh0dXJlKCBwYXJhbXMsICdtYXAnLCBwYnJTcGVjdWxhckdsb3NzaW5lc3MuZGlmZnVzZVRleHR1cmUuaW5kZXggKSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcy5lbWlzc2l2ZSA9IG5ldyBUSFJFRS5Db2xvciggMC4wLCAwLjAsIDAuMCApO1xuICAgICAgICAgICAgICAgICAgICBwYXJhbXMuZ2xvc3NpbmVzcyA9IHBiclNwZWN1bGFyR2xvc3NpbmVzcy5nbG9zc2luZXNzRmFjdG9yICE9PSB1bmRlZmluZWQgPyBwYnJTcGVjdWxhckdsb3NzaW5lc3MuZ2xvc3NpbmVzc0ZhY3RvciA6IDEuMDtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zLnNwZWN1bGFyID0gbmV3IFRIUkVFLkNvbG9yKCAxLjAsIDEuMCwgMS4wICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggQXJyYXkuaXNBcnJheSggcGJyU3BlY3VsYXJHbG9zc2luZXNzLnNwZWN1bGFyRmFjdG9yICkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMuc3BlY3VsYXIuZnJvbUFycmF5KCBwYnJTcGVjdWxhckdsb3NzaW5lc3Muc3BlY3VsYXJGYWN0b3IgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIHBiclNwZWN1bGFyR2xvc3NpbmVzcy5zcGVjdWxhckdsb3NzaW5lc3NUZXh0dXJlICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3BlY0dsb3NzSW5kZXggPSBwYnJTcGVjdWxhckdsb3NzaW5lc3Muc3BlY3VsYXJHbG9zc2luZXNzVGV4dHVyZS5pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmcucHVzaCggcGFyc2VyLmFzc2lnblRleHR1cmUoIHBhcmFtcywgJ2dsb3NzaW5lc3NNYXAnLCBzcGVjR2xvc3NJbmRleCApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nLnB1c2goIHBhcnNlci5hc3NpZ25UZXh0dXJlKCBwYXJhbXMsICdzcGVjdWxhck1hcCcsIHNwZWNHbG9zc0luZGV4ICkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoIHBlbmRpbmcgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgICAgIGNyZWF0ZU1hdGVyaWFsOiBmdW5jdGlvbiAoIHBhcmFtcyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0dXAgbWF0ZXJpYWwgcHJvcGVydGllcyBiYXNlZCBvbiBNZXNoU3RhbmRhcmRNYXRlcmlhbCBmb3IgU3BlY3VsYXItR2xvc3NpbmVzc1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuU2hhZGVyTWF0ZXJpYWwoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmluZXM6IHBhcmFtcy5kZWZpbmVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4U2hhZGVyOiBwYXJhbXMudmVydGV4U2hhZGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgZnJhZ21lbnRTaGFkZXI6IHBhcmFtcy5mcmFnbWVudFNoYWRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuaWZvcm1zOiBwYXJhbXMudW5pZm9ybXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBmb2c6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBsaWdodHM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiBwYXJhbXMub3BhY2l0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zcGFyZW50OiBwYXJhbXMudHJhbnNwYXJlbnRcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5pc0dMVEZTcGVjdWxhckdsb3NzaW5lc3NNYXRlcmlhbCA9IHRydWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLmNvbG9yID0gcGFyYW1zLmNvbG9yO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5tYXAgPSBwYXJhbXMubWFwID09PSB1bmRlZmluZWQgPyBudWxsIDogcGFyYW1zLm1hcDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwubGlnaHRNYXAgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5saWdodE1hcEludGVuc2l0eSA9IDEuMDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuYW9NYXAgPSBwYXJhbXMuYW9NYXAgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBwYXJhbXMuYW9NYXA7XG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLmFvTWFwSW50ZW5zaXR5ID0gMS4wO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5lbWlzc2l2ZSA9IHBhcmFtcy5lbWlzc2l2ZTtcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuZW1pc3NpdmVJbnRlbnNpdHkgPSAxLjA7XG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLmVtaXNzaXZlTWFwID0gcGFyYW1zLmVtaXNzaXZlTWFwID09PSB1bmRlZmluZWQgPyBudWxsIDogcGFyYW1zLmVtaXNzaXZlTWFwO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5idW1wTWFwID0gcGFyYW1zLmJ1bXBNYXAgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBwYXJhbXMuYnVtcE1hcDtcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuYnVtcFNjYWxlID0gMTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwubm9ybWFsTWFwID0gcGFyYW1zLm5vcm1hbE1hcCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHBhcmFtcy5ub3JtYWxNYXA7XG4gICAgICAgICAgICAgICAgICAgIGlmICggcGFyYW1zLm5vcm1hbFNjYWxlICkgbWF0ZXJpYWwubm9ybWFsU2NhbGUgPSBwYXJhbXMubm9ybWFsU2NhbGU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLmRpc3BsYWNlbWVudE1hcCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLmRpc3BsYWNlbWVudFNjYWxlID0gMTtcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuZGlzcGxhY2VtZW50QmlhcyA9IDA7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnNwZWN1bGFyTWFwID0gcGFyYW1zLnNwZWN1bGFyTWFwID09PSB1bmRlZmluZWQgPyBudWxsIDogcGFyYW1zLnNwZWN1bGFyTWFwO1xuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5zcGVjdWxhciA9IHBhcmFtcy5zcGVjdWxhcjtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuZ2xvc3NpbmVzc01hcCA9IHBhcmFtcy5nbG9zc2luZXNzTWFwID09PSB1bmRlZmluZWQgPyBudWxsIDogcGFyYW1zLmdsb3NzaW5lc3NNYXA7XG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLmdsb3NzaW5lc3MgPSBwYXJhbXMuZ2xvc3NpbmVzcztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuYWxwaGFNYXAgPSBudWxsO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5lbnZNYXAgPSBwYXJhbXMuZW52TWFwID09PSB1bmRlZmluZWQgPyBudWxsIDogcGFyYW1zLmVudk1hcDtcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuZW52TWFwSW50ZW5zaXR5ID0gMS4wO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5yZWZyYWN0aW9uUmF0aW8gPSAwLjk4O1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5leHRlbnNpb25zLmRlcml2YXRpdmVzID0gdHJ1ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hdGVyaWFsO1xuICAgIFxuICAgICAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ2xvbmVzIGEgR0xURlNwZWN1bGFyR2xvc3NpbmVzc01hdGVyaWFsIGluc3RhbmNlLiBUaGUgU2hhZGVyTWF0ZXJpYWwuY29weSgpIG1ldGhvZCBjYW5cbiAgICAgICAgICAgICAgICAgKiBjb3B5IG9ubHkgcHJvcGVydGllcyBpdCBrbm93cyBhYm91dCBvciBpbmhlcml0cywgYW5kIG1pc3NlcyBtYW55IHByb3BlcnRpZXMgdGhhdCB3b3VsZFxuICAgICAgICAgICAgICAgICAqIG5vcm1hbGx5IGJlIGRlZmluZWQgYnkgTWVzaFN0YW5kYXJkTWF0ZXJpYWwuXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBUaGlzIG1ldGhvZCBhbGxvd3MgR0xURlNwZWN1bGFyR2xvc3NpbmVzc01hdGVyaWFscyB0byBiZSBjbG9uZWQgaW4gdGhlIHByb2Nlc3Mgb2ZcbiAgICAgICAgICAgICAgICAgKiBsb2FkaW5nIGEgZ2xURiBtb2RlbCwgYnV0IGNsb25pbmcgbGF0ZXIgKGUuZy4gYnkgdGhlIHVzZXIpIHdvdWxkIHJlcXVpcmUgdGhlc2UgY2hhbmdlc1xuICAgICAgICAgICAgICAgICAqIEFORCBhbHNvIHVwZGF0aW5nIGAub25CZWZvcmVSZW5kZXJgIG9uIHRoZSBwYXJlbnQgbWVzaC5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSAge1RIUkVFLlNoYWRlck1hdGVyaWFsfSBzb3VyY2VcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJuIHtUSFJFRS5TaGFkZXJNYXRlcmlhbH1cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBjbG9uZU1hdGVyaWFsOiBmdW5jdGlvbiAoIHNvdXJjZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IHNvdXJjZS5jbG9uZSgpO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQuaXNHTFRGU3BlY3VsYXJHbG9zc2luZXNzTWF0ZXJpYWwgPSB0cnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gdGhpcy5zcGVjdWxhckdsb3NzaW5lc3NQYXJhbXM7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgaWwgPSBwYXJhbXMubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRbIHBhcmFtc1sgaSBdIF0gPSBzb3VyY2VbIHBhcmFtc1sgaSBdIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICBcbiAgICAgICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgICAgIC8vIEhlcmUncyBiYXNlZCBvbiByZWZyZXNoVW5pZm9ybXNDb21tb24oKSBhbmQgcmVmcmVzaFVuaWZvcm1zU3RhbmRhcmQoKSBpbiBXZWJHTFJlbmRlcmVyLlxuICAgICAgICAgICAgICAgIHJlZnJlc2hVbmlmb3JtczogZnVuY3Rpb24gKCByZW5kZXJlciwgc2NlbmUsIGNhbWVyYSwgZ2VvbWV0cnksIG1hdGVyaWFsLCBncm91cCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBtYXRlcmlhbC5pc0dMVEZTcGVjdWxhckdsb3NzaW5lc3NNYXRlcmlhbCAhPT0gdHJ1ZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgdW5pZm9ybXMgPSBtYXRlcmlhbC51bmlmb3JtcztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlZmluZXMgPSBtYXRlcmlhbC5kZWZpbmVzO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB1bmlmb3Jtcy5vcGFjaXR5LnZhbHVlID0gbWF0ZXJpYWwub3BhY2l0eTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdW5pZm9ybXMuZGlmZnVzZS52YWx1ZS5jb3B5KCBtYXRlcmlhbC5jb2xvciApO1xuICAgICAgICAgICAgICAgICAgICB1bmlmb3Jtcy5lbWlzc2l2ZS52YWx1ZS5jb3B5KCBtYXRlcmlhbC5lbWlzc2l2ZSApLm11bHRpcGx5U2NhbGFyKCBtYXRlcmlhbC5lbWlzc2l2ZUludGVuc2l0eSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB1bmlmb3Jtcy5tYXAudmFsdWUgPSBtYXRlcmlhbC5tYXA7XG4gICAgICAgICAgICAgICAgICAgIHVuaWZvcm1zLnNwZWN1bGFyTWFwLnZhbHVlID0gbWF0ZXJpYWwuc3BlY3VsYXJNYXA7XG4gICAgICAgICAgICAgICAgICAgIHVuaWZvcm1zLmFscGhhTWFwLnZhbHVlID0gbWF0ZXJpYWwuYWxwaGFNYXA7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHVuaWZvcm1zLmxpZ2h0TWFwLnZhbHVlID0gbWF0ZXJpYWwubGlnaHRNYXA7XG4gICAgICAgICAgICAgICAgICAgIHVuaWZvcm1zLmxpZ2h0TWFwSW50ZW5zaXR5LnZhbHVlID0gbWF0ZXJpYWwubGlnaHRNYXBJbnRlbnNpdHk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHVuaWZvcm1zLmFvTWFwLnZhbHVlID0gbWF0ZXJpYWwuYW9NYXA7XG4gICAgICAgICAgICAgICAgICAgIHVuaWZvcm1zLmFvTWFwSW50ZW5zaXR5LnZhbHVlID0gbWF0ZXJpYWwuYW9NYXBJbnRlbnNpdHk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIHV2IHJlcGVhdCBhbmQgb2Zmc2V0IHNldHRpbmcgcHJpb3JpdGllc1xuICAgICAgICAgICAgICAgICAgICAvLyAxLiBjb2xvciBtYXBcbiAgICAgICAgICAgICAgICAgICAgLy8gMi4gc3BlY3VsYXIgbWFwXG4gICAgICAgICAgICAgICAgICAgIC8vIDMuIG5vcm1hbCBtYXBcbiAgICAgICAgICAgICAgICAgICAgLy8gNC4gYnVtcCBtYXBcbiAgICAgICAgICAgICAgICAgICAgLy8gNS4gYWxwaGEgbWFwXG4gICAgICAgICAgICAgICAgICAgIC8vIDYuIGVtaXNzaXZlIG1hcFxuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgdXZTY2FsZU1hcDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBtYXRlcmlhbC5tYXAgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB1dlNjYWxlTWFwID0gbWF0ZXJpYWwubWFwO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBtYXRlcmlhbC5zcGVjdWxhck1hcCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHV2U2NhbGVNYXAgPSBtYXRlcmlhbC5zcGVjdWxhck1hcDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggbWF0ZXJpYWwuZGlzcGxhY2VtZW50TWFwICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdXZTY2FsZU1hcCA9IG1hdGVyaWFsLmRpc3BsYWNlbWVudE1hcDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggbWF0ZXJpYWwubm9ybWFsTWFwICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdXZTY2FsZU1hcCA9IG1hdGVyaWFsLm5vcm1hbE1hcDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggbWF0ZXJpYWwuYnVtcE1hcCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHV2U2NhbGVNYXAgPSBtYXRlcmlhbC5idW1wTWFwO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBtYXRlcmlhbC5nbG9zc2luZXNzTWFwICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdXZTY2FsZU1hcCA9IG1hdGVyaWFsLmdsb3NzaW5lc3NNYXA7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIG1hdGVyaWFsLmFscGhhTWFwICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdXZTY2FsZU1hcCA9IG1hdGVyaWFsLmFscGhhTWFwO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBtYXRlcmlhbC5lbWlzc2l2ZU1hcCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHV2U2NhbGVNYXAgPSBtYXRlcmlhbC5lbWlzc2l2ZU1hcDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIHV2U2NhbGVNYXAgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHV2U2NhbGVNYXAuaXNXZWJHTFJlbmRlclRhcmdldCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dlNjYWxlTWFwID0gdXZTY2FsZU1hcC50ZXh0dXJlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9mZnNldDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXBlYXQ7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHV2U2NhbGVNYXAubWF0cml4ICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPiByODguXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB1dlNjYWxlTWFwLm1hdHJpeEF1dG9VcGRhdGUgPT09IHRydWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IHV2U2NhbGVNYXAub2Zmc2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgPSB1dlNjYWxlTWFwLnJlcGVhdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJvdGF0aW9uID0gdXZTY2FsZU1hcC5yb3RhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHV2U2NhbGVNYXAuY2VudGVyO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dlNjYWxlTWFwLm1hdHJpeC5zZXRVdlRyYW5zZm9ybSggb2Zmc2V0LngsIG9mZnNldC55LCByZXBlYXQueCwgcmVwZWF0LnksIHJvdGF0aW9uLCBjZW50ZXIueCwgY2VudGVyLnkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pZm9ybXMudXZUcmFuc2Zvcm0udmFsdWUuY29weSggdXZTY2FsZU1hcC5tYXRyaXggKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPD0gcjg3LiBSZW1vdmUgd2hlbiByZWFzb25hYmxlLlxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IHV2U2NhbGVNYXAub2Zmc2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCA9IHV2U2NhbGVNYXAucmVwZWF0O1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaWZvcm1zLm9mZnNldFJlcGVhdC52YWx1ZS5zZXQoIG9mZnNldC54LCBvZmZzZXQueSwgcmVwZWF0LngsIHJlcGVhdC55ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdW5pZm9ybXMuZW52TWFwLnZhbHVlID0gbWF0ZXJpYWwuZW52TWFwO1xuICAgICAgICAgICAgICAgICAgICB1bmlmb3Jtcy5lbnZNYXBJbnRlbnNpdHkudmFsdWUgPSBtYXRlcmlhbC5lbnZNYXBJbnRlbnNpdHk7XG4gICAgICAgICAgICAgICAgICAgIHVuaWZvcm1zLmZsaXBFbnZNYXAudmFsdWUgPSAoIG1hdGVyaWFsLmVudk1hcCAmJiBtYXRlcmlhbC5lbnZNYXAuaXNDdWJlVGV4dHVyZSApID8gLSAxIDogMTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdW5pZm9ybXMucmVmcmFjdGlvblJhdGlvLnZhbHVlID0gbWF0ZXJpYWwucmVmcmFjdGlvblJhdGlvO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB1bmlmb3Jtcy5zcGVjdWxhci52YWx1ZS5jb3B5KCBtYXRlcmlhbC5zcGVjdWxhciApO1xuICAgICAgICAgICAgICAgICAgICB1bmlmb3Jtcy5nbG9zc2luZXNzLnZhbHVlID0gbWF0ZXJpYWwuZ2xvc3NpbmVzcztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdW5pZm9ybXMuZ2xvc3NpbmVzc01hcC52YWx1ZSA9IG1hdGVyaWFsLmdsb3NzaW5lc3NNYXA7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHVuaWZvcm1zLmVtaXNzaXZlTWFwLnZhbHVlID0gbWF0ZXJpYWwuZW1pc3NpdmVNYXA7XG4gICAgICAgICAgICAgICAgICAgIHVuaWZvcm1zLmJ1bXBNYXAudmFsdWUgPSBtYXRlcmlhbC5idW1wTWFwO1xuICAgICAgICAgICAgICAgICAgICB1bmlmb3Jtcy5ub3JtYWxNYXAudmFsdWUgPSBtYXRlcmlhbC5ub3JtYWxNYXA7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHVuaWZvcm1zLmRpc3BsYWNlbWVudE1hcC52YWx1ZSA9IG1hdGVyaWFsLmRpc3BsYWNlbWVudE1hcDtcbiAgICAgICAgICAgICAgICAgICAgdW5pZm9ybXMuZGlzcGxhY2VtZW50U2NhbGUudmFsdWUgPSBtYXRlcmlhbC5kaXNwbGFjZW1lbnRTY2FsZTtcbiAgICAgICAgICAgICAgICAgICAgdW5pZm9ybXMuZGlzcGxhY2VtZW50Qmlhcy52YWx1ZSA9IG1hdGVyaWFsLmRpc3BsYWNlbWVudEJpYXM7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggdW5pZm9ybXMuZ2xvc3NpbmVzc01hcC52YWx1ZSAhPT0gbnVsbCAmJiBkZWZpbmVzLlVTRV9HTE9TU0lORVNTTUFQID09PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZpbmVzLlVTRV9HTE9TU0lORVNTTUFQID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgVVNFX1JPVUdITkVTU01BUCB0byBlbmFibGUgdlV2XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZpbmVzLlVTRV9ST1VHSE5FU1NNQVAgPSAnJztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIHVuaWZvcm1zLmdsb3NzaW5lc3NNYXAudmFsdWUgPT09IG51bGwgJiYgZGVmaW5lcy5VU0VfR0xPU1NJTkVTU01BUCAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGRlZmluZXMuVVNFX0dMT1NTSU5FU1NNQVA7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZGVmaW5lcy5VU0VfUk9VR0hORVNTTUFQO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAgICAgICAvKioqKioqKioqKiBJTlRFUlBPTEFUSU9OICoqKioqKioqL1xuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAgIFxuICAgICAgICAvLyBTcGxpbmUgSW50ZXJwb2xhdGlvblxuICAgICAgICAvLyBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvYmxvYi9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAvUkVBRE1FLm1kI2FwcGVuZGl4LWMtc3BsaW5lLWludGVycG9sYXRpb25cbiAgICAgICAgZnVuY3Rpb24gR0xURkN1YmljU3BsaW5lSW50ZXJwb2xhbnQoIHBhcmFtZXRlclBvc2l0aW9ucywgc2FtcGxlVmFsdWVzLCBzYW1wbGVTaXplLCByZXN1bHRCdWZmZXIgKSB7XG4gICAgXG4gICAgICAgICAgICBUSFJFRS5JbnRlcnBvbGFudC5jYWxsKCB0aGlzLCBwYXJhbWV0ZXJQb3NpdGlvbnMsIHNhbXBsZVZhbHVlcywgc2FtcGxlU2l6ZSwgcmVzdWx0QnVmZmVyICk7XG4gICAgXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIEdMVEZDdWJpY1NwbGluZUludGVycG9sYW50LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFRIUkVFLkludGVycG9sYW50LnByb3RvdHlwZSApO1xuICAgICAgICBHTFRGQ3ViaWNTcGxpbmVJbnRlcnBvbGFudC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBHTFRGQ3ViaWNTcGxpbmVJbnRlcnBvbGFudDtcbiAgICBcbiAgICAgICAgR0xURkN1YmljU3BsaW5lSW50ZXJwb2xhbnQucHJvdG90eXBlLmludGVycG9sYXRlXyA9IGZ1bmN0aW9uICggaTEsIHQwLCB0LCB0MSApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLnJlc3VsdEJ1ZmZlcjtcbiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnNhbXBsZVZhbHVlcztcbiAgICAgICAgICAgIHZhciBzdHJpZGUgPSB0aGlzLnZhbHVlU2l6ZTtcbiAgICBcbiAgICAgICAgICAgIHZhciBzdHJpZGUyID0gc3RyaWRlICogMjtcbiAgICAgICAgICAgIHZhciBzdHJpZGUzID0gc3RyaWRlICogMztcbiAgICBcbiAgICAgICAgICAgIHZhciB0ZCA9IHQxIC0gdDA7XG4gICAgXG4gICAgICAgICAgICB2YXIgcCA9ICggdCAtIHQwICkgLyB0ZDtcbiAgICAgICAgICAgIHZhciBwcCA9IHAgKiBwO1xuICAgICAgICAgICAgdmFyIHBwcCA9IHBwICogcDtcbiAgICBcbiAgICAgICAgICAgIHZhciBvZmZzZXQxID0gaTEgKiBzdHJpZGUzO1xuICAgICAgICAgICAgdmFyIG9mZnNldDAgPSBvZmZzZXQxIC0gc3RyaWRlMztcbiAgICBcbiAgICAgICAgICAgIHZhciBzMCA9IDIgKiBwcHAgLSAzICogcHAgKyAxO1xuICAgICAgICAgICAgdmFyIHMxID0gcHBwIC0gMiAqIHBwICsgcDtcbiAgICAgICAgICAgIHZhciBzMiA9IC0gMiAqIHBwcCArIDMgKiBwcDtcbiAgICAgICAgICAgIHZhciBzMyA9IHBwcCAtIHBwO1xuICAgIFxuICAgICAgICAgICAgLy8gTGF5b3V0IG9mIGtleWZyYW1lIG91dHB1dCB2YWx1ZXMgZm9yIENVQklDU1BMSU5FIGFuaW1hdGlvbnM6XG4gICAgICAgICAgICAvLyAgIFsgaW5UYW5nZW50XzEsIHNwbGluZVZlcnRleF8xLCBvdXRUYW5nZW50XzEsIGluVGFuZ2VudF8yLCBzcGxpbmVWZXJ0ZXhfMiwgLi4uIF1cbiAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSAhPT0gc3RyaWRlOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBwMCA9IHZhbHVlc1sgb2Zmc2V0MCArIGkgKyBzdHJpZGUgXTsgICAgICAgIC8vIHNwbGluZVZlcnRleF9rXG4gICAgICAgICAgICAgICAgdmFyIG0wID0gdmFsdWVzWyBvZmZzZXQwICsgaSArIHN0cmlkZTIgXSAqIHRkOyAgLy8gb3V0VGFuZ2VudF9rICogKHRfaysxIC0gdF9rKVxuICAgICAgICAgICAgICAgIHZhciBwMSA9IHZhbHVlc1sgb2Zmc2V0MSArIGkgKyBzdHJpZGUgXTsgICAgICAgIC8vIHNwbGluZVZlcnRleF9rKzFcbiAgICAgICAgICAgICAgICB2YXIgbTEgPSB2YWx1ZXNbIG9mZnNldDEgKyBpIF0gKiB0ZDsgICAgICAgICAgICAvLyBpblRhbmdlbnRfaysxICogKHRfaysxIC0gdF9rKVxuICAgIFxuICAgICAgICAgICAgICAgIHJlc3VsdFsgaSBdID0gczAgKiBwMCArIHMxICogbTAgKyBzMiAqIHAxICsgczMgKiBtMTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gICAgICAgIC8qKioqKioqKioqIElOVEVSTkFMUyAqKioqKioqKioqKiovXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gICAgXG4gICAgICAgIC8qIENPTlNUQU5UUyAqL1xuICAgIFxuICAgICAgICB2YXIgV0VCR0xfQ09OU1RBTlRTID0ge1xuICAgICAgICAgICAgRkxPQVQ6IDUxMjYsXG4gICAgICAgICAgICAvL0ZMT0FUX01BVDI6IDM1Njc0LFxuICAgICAgICAgICAgRkxPQVRfTUFUMzogMzU2NzUsXG4gICAgICAgICAgICBGTE9BVF9NQVQ0OiAzNTY3NixcbiAgICAgICAgICAgIEZMT0FUX1ZFQzI6IDM1NjY0LFxuICAgICAgICAgICAgRkxPQVRfVkVDMzogMzU2NjUsXG4gICAgICAgICAgICBGTE9BVF9WRUM0OiAzNTY2NixcbiAgICAgICAgICAgIExJTkVBUjogOTcyOSxcbiAgICAgICAgICAgIFJFUEVBVDogMTA0OTcsXG4gICAgICAgICAgICBTQU1QTEVSXzJEOiAzNTY3OCxcbiAgICAgICAgICAgIFBPSU5UUzogMCxcbiAgICAgICAgICAgIExJTkVTOiAxLFxuICAgICAgICAgICAgTElORV9MT09QOiAyLFxuICAgICAgICAgICAgTElORV9TVFJJUDogMyxcbiAgICAgICAgICAgIFRSSUFOR0xFUzogNCxcbiAgICAgICAgICAgIFRSSUFOR0xFX1NUUklQOiA1LFxuICAgICAgICAgICAgVFJJQU5HTEVfRkFOOiA2LFxuICAgICAgICAgICAgVU5TSUdORURfQllURTogNTEyMSxcbiAgICAgICAgICAgIFVOU0lHTkVEX1NIT1JUOiA1MTIzXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIHZhciBXRUJHTF9UWVBFID0ge1xuICAgICAgICAgICAgNTEyNjogTnVtYmVyLFxuICAgICAgICAgICAgLy8zNTY3NDogVEhSRUUuTWF0cml4MixcbiAgICAgICAgICAgIDM1Njc1OiBUSFJFRS5NYXRyaXgzLFxuICAgICAgICAgICAgMzU2NzY6IFRIUkVFLk1hdHJpeDQsXG4gICAgICAgICAgICAzNTY2NDogVEhSRUUuVmVjdG9yMixcbiAgICAgICAgICAgIDM1NjY1OiBUSFJFRS5WZWN0b3IzLFxuICAgICAgICAgICAgMzU2NjY6IFRIUkVFLlZlY3RvcjQsXG4gICAgICAgICAgICAzNTY3ODogVEhSRUUuVGV4dHVyZVxuICAgICAgICB9O1xuICAgIFxuICAgICAgICB2YXIgV0VCR0xfQ09NUE9ORU5UX1RZUEVTID0ge1xuICAgICAgICAgICAgNTEyMDogSW50OEFycmF5LFxuICAgICAgICAgICAgNTEyMTogVWludDhBcnJheSxcbiAgICAgICAgICAgIDUxMjI6IEludDE2QXJyYXksXG4gICAgICAgICAgICA1MTIzOiBVaW50MTZBcnJheSxcbiAgICAgICAgICAgIDUxMjU6IFVpbnQzMkFycmF5LFxuICAgICAgICAgICAgNTEyNjogRmxvYXQzMkFycmF5XG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIHZhciBXRUJHTF9GSUxURVJTID0ge1xuICAgICAgICAgICAgOTcyODogVEhSRUUuTmVhcmVzdEZpbHRlcixcbiAgICAgICAgICAgIDk3Mjk6IFRIUkVFLkxpbmVhckZpbHRlcixcbiAgICAgICAgICAgIDk5ODQ6IFRIUkVFLk5lYXJlc3RNaXBNYXBOZWFyZXN0RmlsdGVyLFxuICAgICAgICAgICAgOTk4NTogVEhSRUUuTGluZWFyTWlwTWFwTmVhcmVzdEZpbHRlcixcbiAgICAgICAgICAgIDk5ODY6IFRIUkVFLk5lYXJlc3RNaXBNYXBMaW5lYXJGaWx0ZXIsXG4gICAgICAgICAgICA5OTg3OiBUSFJFRS5MaW5lYXJNaXBNYXBMaW5lYXJGaWx0ZXJcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgdmFyIFdFQkdMX1dSQVBQSU5HUyA9IHtcbiAgICAgICAgICAgIDMzMDcxOiBUSFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nLFxuICAgICAgICAgICAgMzM2NDg6IFRIUkVFLk1pcnJvcmVkUmVwZWF0V3JhcHBpbmcsXG4gICAgICAgICAgICAxMDQ5NzogVEhSRUUuUmVwZWF0V3JhcHBpbmdcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgdmFyIFdFQkdMX1RFWFRVUkVfRk9STUFUUyA9IHtcbiAgICAgICAgICAgIDY0MDY6IFRIUkVFLkFscGhhRm9ybWF0LFxuICAgICAgICAgICAgNjQwNzogVEhSRUUuUkdCRm9ybWF0LFxuICAgICAgICAgICAgNjQwODogVEhSRUUuUkdCQUZvcm1hdCxcbiAgICAgICAgICAgIDY0MDk6IFRIUkVFLkx1bWluYW5jZUZvcm1hdCxcbiAgICAgICAgICAgIDY0MTA6IFRIUkVFLkx1bWluYW5jZUFscGhhRm9ybWF0XG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIHZhciBXRUJHTF9URVhUVVJFX0RBVEFUWVBFUyA9IHtcbiAgICAgICAgICAgIDUxMjE6IFRIUkVFLlVuc2lnbmVkQnl0ZVR5cGUsXG4gICAgICAgICAgICAzMjgxOTogVEhSRUUuVW5zaWduZWRTaG9ydDQ0NDRUeXBlLFxuICAgICAgICAgICAgMzI4MjA6IFRIUkVFLlVuc2lnbmVkU2hvcnQ1NTUxVHlwZSxcbiAgICAgICAgICAgIDMzNjM1OiBUSFJFRS5VbnNpZ25lZFNob3J0NTY1VHlwZVxuICAgICAgICB9O1xuICAgIFxuICAgICAgICB2YXIgV0VCR0xfU0lERVMgPSB7XG4gICAgICAgICAgICAxMDI4OiBUSFJFRS5CYWNrU2lkZSwgLy8gQ3VsbGluZyBmcm9udFxuICAgICAgICAgICAgMTAyOTogVEhSRUUuRnJvbnRTaWRlIC8vIEN1bGxpbmcgYmFja1xuICAgICAgICAgICAgLy8xMDMyOiBUSFJFRS5Ob1NpZGUgICAvLyBDdWxsaW5nIGZyb250IGFuZCBiYWNrLCB3aGF0IHRvIGRvP1xuICAgICAgICB9O1xuICAgIFxuICAgICAgICB2YXIgV0VCR0xfREVQVEhfRlVOQ1MgPSB7XG4gICAgICAgICAgICA1MTI6IFRIUkVFLk5ldmVyRGVwdGgsXG4gICAgICAgICAgICA1MTM6IFRIUkVFLkxlc3NEZXB0aCxcbiAgICAgICAgICAgIDUxNDogVEhSRUUuRXF1YWxEZXB0aCxcbiAgICAgICAgICAgIDUxNTogVEhSRUUuTGVzc0VxdWFsRGVwdGgsXG4gICAgICAgICAgICA1MTY6IFRIUkVFLkdyZWF0ZXJFcXVhbERlcHRoLFxuICAgICAgICAgICAgNTE3OiBUSFJFRS5Ob3RFcXVhbERlcHRoLFxuICAgICAgICAgICAgNTE4OiBUSFJFRS5HcmVhdGVyRXF1YWxEZXB0aCxcbiAgICAgICAgICAgIDUxOTogVEhSRUUuQWx3YXlzRGVwdGhcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgdmFyIFdFQkdMX0JMRU5EX0VRVUFUSU9OUyA9IHtcbiAgICAgICAgICAgIDMyNzc0OiBUSFJFRS5BZGRFcXVhdGlvbixcbiAgICAgICAgICAgIDMyNzc4OiBUSFJFRS5TdWJ0cmFjdEVxdWF0aW9uLFxuICAgICAgICAgICAgMzI3Nzk6IFRIUkVFLlJldmVyc2VTdWJ0cmFjdEVxdWF0aW9uXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIHZhciBXRUJHTF9CTEVORF9GVU5DUyA9IHtcbiAgICAgICAgICAgIDA6IFRIUkVFLlplcm9GYWN0b3IsXG4gICAgICAgICAgICAxOiBUSFJFRS5PbmVGYWN0b3IsXG4gICAgICAgICAgICA3Njg6IFRIUkVFLlNyY0NvbG9yRmFjdG9yLFxuICAgICAgICAgICAgNzY5OiBUSFJFRS5PbmVNaW51c1NyY0NvbG9yRmFjdG9yLFxuICAgICAgICAgICAgNzcwOiBUSFJFRS5TcmNBbHBoYUZhY3RvcixcbiAgICAgICAgICAgIDc3MTogVEhSRUUuT25lTWludXNTcmNBbHBoYUZhY3RvcixcbiAgICAgICAgICAgIDc3MjogVEhSRUUuRHN0QWxwaGFGYWN0b3IsXG4gICAgICAgICAgICA3NzM6IFRIUkVFLk9uZU1pbnVzRHN0QWxwaGFGYWN0b3IsXG4gICAgICAgICAgICA3NzQ6IFRIUkVFLkRzdENvbG9yRmFjdG9yLFxuICAgICAgICAgICAgNzc1OiBUSFJFRS5PbmVNaW51c0RzdENvbG9yRmFjdG9yLFxuICAgICAgICAgICAgNzc2OiBUSFJFRS5TcmNBbHBoYVNhdHVyYXRlRmFjdG9yXG4gICAgICAgICAgICAvLyBUaGUgZm9sbG93aW5ncyBhcmUgbm90IHN1cHBvcnRlZCBieSBUaHJlZS5qcyB5ZXRcbiAgICAgICAgICAgIC8vMzI3Njk6IENPTlNUQU5UX0NPTE9SLFxuICAgICAgICAgICAgLy8zMjc3MDogT05FX01JTlVTX0NPTlNUQU5UX0NPTE9SLFxuICAgICAgICAgICAgLy8zMjc3MTogQ09OU1RBTlRfQUxQSEEsXG4gICAgICAgICAgICAvLzMyNzcyOiBPTkVfTUlOVVNfQ09OU1RBTlRfQ09MT1JcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgdmFyIFdFQkdMX1RZUEVfU0laRVMgPSB7XG4gICAgICAgICAgICAnU0NBTEFSJzogMSxcbiAgICAgICAgICAgICdWRUMyJzogMixcbiAgICAgICAgICAgICdWRUMzJzogMyxcbiAgICAgICAgICAgICdWRUM0JzogNCxcbiAgICAgICAgICAgICdNQVQyJzogNCxcbiAgICAgICAgICAgICdNQVQzJzogOSxcbiAgICAgICAgICAgICdNQVQ0JzogMTZcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgdmFyIFBBVEhfUFJPUEVSVElFUyA9IHtcbiAgICAgICAgICAgIHNjYWxlOiAnc2NhbGUnLFxuICAgICAgICAgICAgdHJhbnNsYXRpb246ICdwb3NpdGlvbicsXG4gICAgICAgICAgICByb3RhdGlvbjogJ3F1YXRlcm5pb24nLFxuICAgICAgICAgICAgd2VpZ2h0czogJ21vcnBoVGFyZ2V0SW5mbHVlbmNlcydcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgdmFyIElOVEVSUE9MQVRJT04gPSB7XG4gICAgICAgICAgICBDVUJJQ1NQTElORTogVEhSRUUuSW50ZXJwb2xhdGVTbW9vdGgsIC8vIFdlIHVzZSBjdXN0b20gaW50ZXJwb2xhdGlvbiBHTFRGQ3ViaWNTcGxpbmVJbnRlcnBvbGF0aW9uIGZvciBDVUJJQ1NQTElORS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gS2V5ZnJhbWVUcmFjay5vcHRpbWl6ZSgpIGNhbid0IGhhbmRsZSBnbFRGIEN1YmljIFNwbGluZSBvdXRwdXQgdmFsdWVzIGxheW91dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNpbmcgVEhSRUUuSW50ZXJwb2xhdGVTbW9vdGggZm9yIEtleWZyYW1lVHJhY2sgaW5zdGFudGlhdGlvbiB0byBwcmV2ZW50IG9wdGltaXphdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2VlIEtleWZyYW1lVHJhY2sub3B0aW1pemUoKSBmb3IgdGhlIGRldGFpbC5cbiAgICAgICAgICAgIExJTkVBUjogVEhSRUUuSW50ZXJwb2xhdGVMaW5lYXIsXG4gICAgICAgICAgICBTVEVQOiBUSFJFRS5JbnRlcnBvbGF0ZURpc2NyZXRlXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIHZhciBTVEFURVNfRU5BQkxFUyA9IHtcbiAgICAgICAgICAgIDI4ODQ6ICdDVUxMX0ZBQ0UnLFxuICAgICAgICAgICAgMjkyOTogJ0RFUFRIX1RFU1QnLFxuICAgICAgICAgICAgMzA0MjogJ0JMRU5EJyxcbiAgICAgICAgICAgIDMwODk6ICdTQ0lTU09SX1RFU1QnLFxuICAgICAgICAgICAgMzI4MjM6ICdQT0xZR09OX09GRlNFVF9GSUxMJyxcbiAgICAgICAgICAgIDMyOTI2OiAnU0FNUExFX0FMUEhBX1RPX0NPVkVSQUdFJ1xuICAgICAgICB9O1xuICAgIFxuICAgICAgICB2YXIgQUxQSEFfTU9ERVMgPSB7XG4gICAgICAgICAgICBPUEFRVUU6ICdPUEFRVUUnLFxuICAgICAgICAgICAgTUFTSzogJ01BU0snLFxuICAgICAgICAgICAgQkxFTkQ6ICdCTEVORCdcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgLyogVVRJTElUWSBGVU5DVElPTlMgKi9cbiAgICBcbiAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZVVSTCggdXJsLCBwYXRoICkge1xuICAgIFxuICAgICAgICAgICAgLy8gSW52YWxpZCBVUkxcbiAgICAgICAgICAgIGlmICggdHlwZW9mIHVybCAhPT0gJ3N0cmluZycgfHwgdXJsID09PSAnJyApIHJldHVybiAnJztcbiAgICBcbiAgICAgICAgICAgIC8vIEFic29sdXRlIFVSTCBodHRwOi8vLGh0dHBzOi8vLC8vXG4gICAgICAgICAgICBpZiAoIC9eKGh0dHBzPzopP1xcL1xcLy9pLnRlc3QoIHVybCApICkgcmV0dXJuIHVybDtcbiAgICBcbiAgICAgICAgICAgIC8vIERhdGEgVVJJXG4gICAgICAgICAgICBpZiAoIC9eZGF0YTouKiwuKiQvaS50ZXN0KCB1cmwgKSApIHJldHVybiB1cmw7XG4gICAgXG4gICAgICAgICAgICAvLyBCbG9iIFVSTFxuICAgICAgICAgICAgaWYgKCAvXmJsb2I6LiokL2kudGVzdCggdXJsICkgKSByZXR1cm4gdXJsO1xuICAgIFxuICAgICAgICAgICAgLy8gUmVsYXRpdmUgVVJMXG4gICAgICAgICAgICByZXR1cm4gcGF0aCArIHVybDtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL2Jsb2IvbWFzdGVyL3NwZWNpZmljYXRpb24vMi4wL1JFQURNRS5tZCNkZWZhdWx0LW1hdGVyaWFsXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBjcmVhdGVEZWZhdWx0TWF0ZXJpYWwoKSB7XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKCB7XG4gICAgICAgICAgICAgICAgY29sb3I6IDB4RkZGRkZGLFxuICAgICAgICAgICAgICAgIGVtaXNzaXZlOiAweDAwMDAwMCxcbiAgICAgICAgICAgICAgICBtZXRhbG5lc3M6IDEsXG4gICAgICAgICAgICAgICAgcm91Z2huZXNzOiAxLFxuICAgICAgICAgICAgICAgIHRyYW5zcGFyZW50OiBmYWxzZSxcbiAgICAgICAgICAgICAgICBkZXB0aFRlc3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgc2lkZTogVEhSRUUuRnJvbnRTaWRlXG4gICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9ibG9iL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMC9SRUFETUUubWQjbW9ycGgtdGFyZ2V0c1xuICAgICAgICAgKlxuICAgICAgICAgKiBUT0RPOiBJbXBsZW1lbnQgc3VwcG9ydCBmb3IgbW9ycGggdGFyZ2V0cyBvbiBUQU5HRU5UIGF0dHJpYnV0ZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtUSFJFRS5NZXNofSBtZXNoXG4gICAgICAgICAqIEBwYXJhbSB7R0xURi5NZXNofSBtZXNoRGVmXG4gICAgICAgICAqIEBwYXJhbSB7R0xURi5QcmltaXRpdmV9IHByaW1pdGl2ZURlZlxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5PFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZT59IGFjY2Vzc29yc1xuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gYWRkTW9ycGhUYXJnZXRzKCBtZXNoLCBtZXNoRGVmLCBwcmltaXRpdmVEZWYsIGFjY2Vzc29ycyApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBnZW9tZXRyeSA9IG1lc2guZ2VvbWV0cnk7XG4gICAgICAgICAgICB2YXIgbWF0ZXJpYWwgPSBtZXNoLm1hdGVyaWFsO1xuICAgIFxuICAgICAgICAgICAgdmFyIHRhcmdldHMgPSBwcmltaXRpdmVEZWYudGFyZ2V0cztcbiAgICAgICAgICAgIHZhciBtb3JwaEF0dHJpYnV0ZXMgPSBnZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXM7XG4gICAgXG4gICAgICAgICAgICBtb3JwaEF0dHJpYnV0ZXMucG9zaXRpb24gPSBbXTtcbiAgICAgICAgICAgIG1vcnBoQXR0cmlidXRlcy5ub3JtYWwgPSBbXTtcbiAgICBcbiAgICAgICAgICAgIG1hdGVyaWFsLm1vcnBoVGFyZ2V0cyA9IHRydWU7XG4gICAgXG4gICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGlsID0gdGFyZ2V0cy5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gdGFyZ2V0c1sgaSBdO1xuICAgICAgICAgICAgICAgIHZhciBhdHRyaWJ1dGVOYW1lID0gJ21vcnBoVGFyZ2V0JyArIGk7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHBvc2l0aW9uQXR0cmlidXRlLCBub3JtYWxBdHRyaWJ1dGU7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCB0YXJnZXQuUE9TSVRJT04gIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhyZWUuanMgbW9ycGggZm9ybXVsYSBpc1xuICAgICAgICAgICAgICAgICAgICAvLyAgIHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICArIHdlaWdodDAgKiAoIG1vcnBoVGFyZ2V0MCAtIHBvc2l0aW9uIClcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICsgd2VpZ2h0MSAqICggbW9ycGhUYXJnZXQxIC0gcG9zaXRpb24gKVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgLi4uXG4gICAgICAgICAgICAgICAgICAgIC8vIHdoaWxlIHRoZSBnbFRGIG9uZSBpc1xuICAgICAgICAgICAgICAgICAgICAvLyAgIHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICArIHdlaWdodDAgKiBtb3JwaFRhcmdldDBcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICsgd2VpZ2h0MSAqIG1vcnBoVGFyZ2V0MVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgLi4uXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZW4gYWRkaW5nIHBvc2l0aW9uIHRvIG1vcnBoVGFyZ2V0LlxuICAgICAgICAgICAgICAgICAgICAvLyBTbyBtb3JwaFRhcmdldCB2YWx1ZSB3aWxsIGRlcGVuZCBvbiBtZXNoJ3MgcG9zaXRpb24sIHRoZW4gY2xvbmluZyBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICAgICAgLy8gZm9yIHRoZSBjYXNlIGlmIGF0dHJpYnV0ZSBpcyBzaGFyZWQgYW1vbmcgdHdvIG9yIG1vcmUgbWVzaGVzLlxuICAgIFxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbkF0dHJpYnV0ZSA9IGNsb25lQnVmZmVyQXR0cmlidXRlKCBhY2Nlc3NvcnNbIHRhcmdldC5QT1NJVElPTiBdICk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IGdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb247XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBqID0gMCwgamwgPSBwb3NpdGlvbkF0dHJpYnV0ZS5jb3VudDsgaiA8IGpsOyBqICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25BdHRyaWJ1dGUuc2V0WFlaKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGosXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25BdHRyaWJ1dGUuZ2V0WCggaiApICsgcG9zaXRpb24uZ2V0WCggaiApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uQXR0cmlidXRlLmdldFkoIGogKSArIHBvc2l0aW9uLmdldFkoIGogKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbkF0dHJpYnV0ZS5nZXRaKCBqICkgKyBwb3NpdGlvbi5nZXRaKCBqIClcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBnZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBDb3B5aW5nIHRoZSBvcmlnaW5hbCBwb3NpdGlvbiBub3QgdG8gYWZmZWN0IHRoZSBmaW5hbCBwb3NpdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgLy8gU2VlIHRoZSBmb3JtdWxhIGFib3ZlLlxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbkF0dHJpYnV0ZSA9IGNsb25lQnVmZmVyQXR0cmlidXRlKCBnZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGlmICggcG9zaXRpb25BdHRyaWJ1dGUgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25BdHRyaWJ1dGUubmFtZSA9IGF0dHJpYnV0ZU5hbWU7XG4gICAgICAgICAgICAgICAgICAgIG1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbi5wdXNoKCBwb3NpdGlvbkF0dHJpYnV0ZSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHRhcmdldC5OT1JNQUwgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwubW9ycGhOb3JtYWxzID0gdHJ1ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gc2VlIHRhcmdldC5QT1NJVElPTidzIGNvbW1lbnRcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbm9ybWFsQXR0cmlidXRlID0gY2xvbmVCdWZmZXJBdHRyaWJ1dGUoIGFjY2Vzc29yc1sgdGFyZ2V0Lk5PUk1BTCBdICk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBub3JtYWwgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzLm5vcm1hbDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGogPSAwLCBqbCA9IG5vcm1hbEF0dHJpYnV0ZS5jb3VudDsgaiA8IGpsOyBqICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsQXR0cmlidXRlLnNldFhZWihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbEF0dHJpYnV0ZS5nZXRYKCBqICkgKyBub3JtYWwuZ2V0WCggaiApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbEF0dHJpYnV0ZS5nZXRZKCBqICkgKyBub3JtYWwuZ2V0WSggaiApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbEF0dHJpYnV0ZS5nZXRaKCBqICkgKyBub3JtYWwuZ2V0WiggaiApXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggZ2VvbWV0cnkuYXR0cmlidXRlcy5ub3JtYWwgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbm9ybWFsQXR0cmlidXRlID0gY2xvbmVCdWZmZXJBdHRyaWJ1dGUoIGdlb21ldHJ5LmF0dHJpYnV0ZXMubm9ybWFsICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGlmICggbm9ybWFsQXR0cmlidXRlICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG5vcm1hbEF0dHJpYnV0ZS5uYW1lID0gYXR0cmlidXRlTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgbW9ycGhBdHRyaWJ1dGVzLm5vcm1hbC5wdXNoKCBub3JtYWxBdHRyaWJ1dGUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBtZXNoLnVwZGF0ZU1vcnBoVGFyZ2V0cygpO1xuICAgIFxuICAgICAgICAgICAgaWYgKCBtZXNoRGVmLndlaWdodHMgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGlsID0gbWVzaERlZi53ZWlnaHRzLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBtZXNoLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgaSBdID0gbWVzaERlZi53ZWlnaHRzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGZ1bmN0aW9uIGlzUHJpbWl0aXZlRXF1YWwoIGEsIGIgKSB7XG4gICAgXG4gICAgICAgICAgICBpZiAoIGEuaW5kaWNlcyAhPT0gYi5pbmRpY2VzICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHZhciBhdHRyaWJBID0gYS5hdHRyaWJ1dGVzIHx8IHt9O1xuICAgICAgICAgICAgdmFyIGF0dHJpYkIgPSBiLmF0dHJpYnV0ZXMgfHwge307XG4gICAgICAgICAgICB2YXIga2V5c0EgPSBPYmplY3Qua2V5cyggYXR0cmliQSApO1xuICAgICAgICAgICAgdmFyIGtleXNCID0gT2JqZWN0LmtleXMoIGF0dHJpYkIgKTtcbiAgICBcbiAgICAgICAgICAgIGlmICgga2V5c0EubGVuZ3RoICE9PSBrZXlzQi5sZW5ndGggKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBpbCA9IGtleXNBLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzQVsgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggYXR0cmliQVsga2V5IF0gIT09IGF0dHJpYkJbIGtleSBdICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgZnVuY3Rpb24gZ2V0Q2FjaGVkR2VvbWV0cnkoIGNhY2hlLCBuZXdQcmltaXRpdmUgKSB7XG4gICAgXG4gICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGlsID0gY2FjaGUubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGNhY2hlZCA9IGNhY2hlWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBpc1ByaW1pdGl2ZUVxdWFsKCBjYWNoZWQucHJpbWl0aXZlLCBuZXdQcmltaXRpdmUgKSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlZC5nZW9tZXRyeTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBmdW5jdGlvbiBjbG9uZUJ1ZmZlckF0dHJpYnV0ZSggYXR0cmlidXRlICkge1xuICAgIFxuICAgICAgICAgICAgaWYgKCBhdHRyaWJ1dGUuaXNJbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgY291bnQgPSBhdHRyaWJ1dGUuY291bnQ7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW1TaXplID0gYXR0cmlidXRlLml0ZW1TaXplO1xuICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IGF0dHJpYnV0ZS5hcnJheS5zbGljZSggMCwgY291bnQgKiBpdGVtU2l6ZSApO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IGNvdW50OyArKyBpICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBhcnJheVsgaSBdID0gYXR0cmlidXRlLmdldFgoIGkgKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBpdGVtU2l6ZSA+PSAyICkgYXJyYXlbIGkgKyAxIF0gPSBhdHRyaWJ1dGUuZ2V0WSggaSApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIGl0ZW1TaXplID49IDMgKSBhcnJheVsgaSArIDIgXSA9IGF0dHJpYnV0ZS5nZXRaKCBpICk7XG4gICAgICAgICAgICAgICAgICAgIGlmICggaXRlbVNpemUgPj0gNCApIGFycmF5WyBpICsgMyBdID0gYXR0cmlidXRlLmdldFcoIGkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoIGFycmF5LCBpdGVtU2l6ZSwgYXR0cmlidXRlLm5vcm1hbGl6ZWQgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiBhdHRyaWJ1dGUuY2xvbmUoKTtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvKiBHTFRGIFBBUlNFUiAqL1xuICAgIFxuICAgICAgICBmdW5jdGlvbiBHTFRGUGFyc2VyKCBqc29uLCBleHRlbnNpb25zLCBvcHRpb25zICkge1xuICAgIFxuICAgICAgICAgICAgdGhpcy5qc29uID0ganNvbiB8fCB7fTtcbiAgICAgICAgICAgIHRoaXMuZXh0ZW5zaW9ucyA9IGV4dGVuc2lvbnMgfHwge307XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIFxuICAgICAgICAgICAgLy8gbG9hZGVyIG9iamVjdCBjYWNoZVxuICAgICAgICAgICAgdGhpcy5jYWNoZSA9IG5ldyBHTFRGUmVnaXN0cnkoKTtcbiAgICBcbiAgICAgICAgICAgIC8vIEJ1ZmZlckdlb21ldHJ5IGNhY2hpbmdcbiAgICAgICAgICAgIHRoaXMucHJpbWl0aXZlQ2FjaGUgPSBbXTtcbiAgICBcbiAgICAgICAgICAgIHRoaXMudGV4dHVyZUxvYWRlciA9IG5ldyBUSFJFRS5UZXh0dXJlTG9hZGVyKCB0aGlzLm9wdGlvbnMubWFuYWdlciApO1xuICAgICAgICAgICAgdGhpcy50ZXh0dXJlTG9hZGVyLnNldENyb3NzT3JpZ2luKCB0aGlzLm9wdGlvbnMuY3Jvc3NPcmlnaW4gKTtcbiAgICBcbiAgICAgICAgICAgIHRoaXMuZmlsZUxvYWRlciA9IG5ldyBUSFJFRS5GaWxlTG9hZGVyKCB0aGlzLm9wdGlvbnMubWFuYWdlciApO1xuICAgICAgICAgICAgdGhpcy5maWxlTG9hZGVyLnNldFJlc3BvbnNlVHlwZSggJ2FycmF5YnVmZmVyJyApO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIEdMVEZQYXJzZXIucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKCBvbkxvYWQsIG9uRXJyb3IgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIganNvbiA9IHRoaXMuanNvbjtcbiAgICBcbiAgICAgICAgICAgIC8vIENsZWFyIHRoZSBsb2FkZXIgY2FjaGVcbiAgICAgICAgICAgIHRoaXMuY2FjaGUucmVtb3ZlQWxsKCk7XG4gICAgXG4gICAgICAgICAgICAvLyBNYXJrIHRoZSBzcGVjaWFsIG5vZGVzL21lc2hlcyBpbiBqc29uIGZvciBlZmZpY2llbnQgcGFyc2VcbiAgICAgICAgICAgIHRoaXMubWFya0RlZnMoKTtcbiAgICBcbiAgICAgICAgICAgIC8vIEZpcmUgdGhlIGNhbGxiYWNrIG9uIGNvbXBsZXRlXG4gICAgICAgICAgICB0aGlzLmdldE11bHRpRGVwZW5kZW5jaWVzKCBbXG4gICAgXG4gICAgICAgICAgICAgICAgJ3NjZW5lJyxcbiAgICAgICAgICAgICAgICAnYW5pbWF0aW9uJyxcbiAgICAgICAgICAgICAgICAnY2FtZXJhJ1xuICAgIFxuICAgICAgICAgICAgXSApLnRoZW4oIGZ1bmN0aW9uICggZGVwZW5kZW5jaWVzICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBzY2VuZXMgPSBkZXBlbmRlbmNpZXMuc2NlbmVzIHx8IFtdO1xuICAgICAgICAgICAgICAgIHZhciBzY2VuZSA9IHNjZW5lc1sganNvbi5zY2VuZSB8fCAwIF07XG4gICAgICAgICAgICAgICAgdmFyIGFuaW1hdGlvbnMgPSBkZXBlbmRlbmNpZXMuYW5pbWF0aW9ucyB8fCBbXTtcbiAgICAgICAgICAgICAgICB2YXIgYXNzZXQgPSBqc29uLmFzc2V0O1xuICAgICAgICAgICAgICAgIHZhciBjYW1lcmFzID0gZGVwZW5kZW5jaWVzLmNhbWVyYXMgfHwgW107XG4gICAgXG4gICAgICAgICAgICAgICAgb25Mb2FkKCBzY2VuZSwgc2NlbmVzLCBjYW1lcmFzLCBhbmltYXRpb25zLCBhc3NldCApO1xuICAgIFxuICAgICAgICAgICAgfSApLmNhdGNoKCBvbkVycm9yICk7XG4gICAgXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXJrcyB0aGUgc3BlY2lhbCBub2Rlcy9tZXNoZXMgaW4ganNvbiBmb3IgZWZmaWNpZW50IHBhcnNlLlxuICAgICAgICAgKi9cbiAgICAgICAgR0xURlBhcnNlci5wcm90b3R5cGUubWFya0RlZnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgbm9kZURlZnMgPSB0aGlzLmpzb24ubm9kZXMgfHwgW107XG4gICAgICAgICAgICB2YXIgc2tpbkRlZnMgPSB0aGlzLmpzb24uc2tpbnMgfHwgW107XG4gICAgICAgICAgICB2YXIgbWVzaERlZnMgPSB0aGlzLmpzb24ubWVzaGVzIHx8IFtdO1xuICAgIFxuICAgICAgICAgICAgdmFyIG1lc2hSZWZlcmVuY2VzID0ge307XG4gICAgICAgICAgICB2YXIgbWVzaFVzZXMgPSB7fTtcbiAgICBcbiAgICAgICAgICAgIC8vIE5vdGhpbmcgaW4gdGhlIG5vZGUgZGVmaW5pdGlvbiBpbmRpY2F0ZXMgd2hldGhlciBpdCBpcyBhIEJvbmUgb3IgYW5cbiAgICAgICAgICAgIC8vIE9iamVjdDNELiBVc2UgdGhlIHNraW5zJyBqb2ludCByZWZlcmVuY2VzIHRvIG1hcmsgYm9uZXMuXG4gICAgICAgICAgICBmb3IgKCB2YXIgc2tpbkluZGV4ID0gMCwgc2tpbkxlbmd0aCA9IHNraW5EZWZzLmxlbmd0aDsgc2tpbkluZGV4IDwgc2tpbkxlbmd0aDsgc2tpbkluZGV4ICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBqb2ludHMgPSBza2luRGVmc1sgc2tpbkluZGV4IF0uam9pbnRzO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgaWwgPSBqb2ludHMubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG5vZGVEZWZzWyBqb2ludHNbIGkgXSBdLmlzQm9uZSA9IHRydWU7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgLy8gTWVzaGVzIGNhbiAoYW5kIHNob3VsZCkgYmUgcmV1c2VkIGJ5IG11bHRpcGxlIG5vZGVzIGluIGEgZ2xURiBhc3NldC4gVG9cbiAgICAgICAgICAgIC8vIGF2b2lkIGhhdmluZyBtb3JlIHRoYW4gb25lIFRIUkVFLk1lc2ggd2l0aCB0aGUgc2FtZSBuYW1lLCBjb3VudFxuICAgICAgICAgICAgLy8gcmVmZXJlbmNlcyBhbmQgcmVuYW1lIGluc3RhbmNlcyBiZWxvdy5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBFeGFtcGxlOiBDZXNpdW1NaWxrVHJ1Y2sgc2FtcGxlIG1vZGVsIHJldXNlcyBcIldoZWVsXCIgbWVzaGVzLlxuICAgICAgICAgICAgZm9yICggdmFyIG5vZGVJbmRleCA9IDAsIG5vZGVMZW5ndGggPSBub2RlRGVmcy5sZW5ndGg7IG5vZGVJbmRleCA8IG5vZGVMZW5ndGg7IG5vZGVJbmRleCArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgbm9kZURlZiA9IG5vZGVEZWZzWyBub2RlSW5kZXggXTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIG5vZGVEZWYubWVzaCAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIG1lc2hSZWZlcmVuY2VzWyBub2RlRGVmLm1lc2ggXSA9PT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzaFJlZmVyZW5jZXNbIG5vZGVEZWYubWVzaCBdID0gbWVzaFVzZXNbIG5vZGVEZWYubWVzaCBdID0gMDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBtZXNoUmVmZXJlbmNlc1sgbm9kZURlZi5tZXNoIF0gKys7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIE5vdGhpbmcgaW4gdGhlIG1lc2ggZGVmaW5pdGlvbiBpbmRpY2F0ZXMgd2hldGhlciBpdCBpc1xuICAgICAgICAgICAgICAgICAgICAvLyBhIFNraW5uZWRNZXNoIG9yIE1lc2guIFVzZSB0aGUgbm9kZSdzIG1lc2ggcmVmZXJlbmNlXG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIG1hcmsgU2tpbm5lZE1lc2ggaWYgbm9kZSBoYXMgc2tpbi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCBub2RlRGVmLnNraW4gIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc2hEZWZzWyBub2RlRGVmLm1lc2ggXS5pc1NraW5uZWRNZXNoID0gdHJ1ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHRoaXMuanNvbi5tZXNoUmVmZXJlbmNlcyA9IG1lc2hSZWZlcmVuY2VzO1xuICAgICAgICAgICAgdGhpcy5qc29uLm1lc2hVc2VzID0gbWVzaFVzZXM7XG4gICAgXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXF1ZXN0cyB0aGUgc3BlY2lmaWVkIGRlcGVuZGVuY3kgYXN5bmNocm9ub3VzbHksIHdpdGggY2FjaGluZy5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4XG4gICAgICAgICAqIEByZXR1cm4ge1Byb21pc2U8T2JqZWN0Pn1cbiAgICAgICAgICovXG4gICAgICAgIEdMVEZQYXJzZXIucHJvdG90eXBlLmdldERlcGVuZGVuY3kgPSBmdW5jdGlvbiAoIHR5cGUsIGluZGV4ICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIGNhY2hlS2V5ID0gdHlwZSArICc6JyArIGluZGV4O1xuICAgICAgICAgICAgdmFyIGRlcGVuZGVuY3kgPSB0aGlzLmNhY2hlLmdldCggY2FjaGVLZXkgKTtcbiAgICBcbiAgICAgICAgICAgIGlmICggISBkZXBlbmRlbmN5ICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBmbk5hbWUgPSAnbG9hZCcgKyB0eXBlLmNoYXJBdCggMCApLnRvVXBwZXJDYXNlKCkgKyB0eXBlLnNsaWNlKCAxICk7XG4gICAgICAgICAgICAgICAgZGVwZW5kZW5jeSA9IHRoaXNbIGZuTmFtZSBdKCBpbmRleCApO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FjaGUuYWRkKCBjYWNoZUtleSwgZGVwZW5kZW5jeSApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIGRlcGVuZGVuY3k7XG4gICAgXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXF1ZXN0cyBhbGwgZGVwZW5kZW5jaWVzIG9mIHRoZSBzcGVjaWZpZWQgdHlwZSBhc3luY2hyb25vdXNseSwgd2l0aCBjYWNoaW5nLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZVxuICAgICAgICAgKiBAcmV0dXJuIHtQcm9taXNlPEFycmF5PE9iamVjdD4+fVxuICAgICAgICAgKi9cbiAgICAgICAgR0xURlBhcnNlci5wcm90b3R5cGUuZ2V0RGVwZW5kZW5jaWVzID0gZnVuY3Rpb24gKCB0eXBlICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIGRlcGVuZGVuY2llcyA9IHRoaXMuY2FjaGUuZ2V0KCB0eXBlICk7XG4gICAgXG4gICAgICAgICAgICBpZiAoICEgZGVwZW5kZW5jaWVzICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBwYXJzZXIgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHZhciBkZWZzID0gdGhpcy5qc29uWyB0eXBlICsgKCB0eXBlID09PSAnbWVzaCcgPyAnZXMnIDogJ3MnICkgXSB8fCBbXTtcbiAgICBcbiAgICAgICAgICAgICAgICBkZXBlbmRlbmNpZXMgPSBQcm9taXNlLmFsbCggZGVmcy5tYXAoIGZ1bmN0aW9uICggZGVmLCBpbmRleCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlci5nZXREZXBlbmRlbmN5KCB0eXBlLCBpbmRleCApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gKSApO1xuICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuY2FjaGUuYWRkKCB0eXBlLCBkZXBlbmRlbmNpZXMgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiBkZXBlbmRlbmNpZXM7XG4gICAgXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXF1ZXN0cyBhbGwgbXVsdGlwbGUgZGVwZW5kZW5jaWVzIG9mIHRoZSBzcGVjaWZpZWQgdHlwZXMgYXN5bmNocm9ub3VzbHksIHdpdGggY2FjaGluZy5cbiAgICAgICAgICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSB0eXBlc1xuICAgICAgICAgKiBAcmV0dXJuIHtQcm9taXNlPE9iamVjdDxBcnJheTxPYmplY3Q+Pj59XG4gICAgICAgICAqL1xuICAgICAgICBHTFRGUGFyc2VyLnByb3RvdHlwZS5nZXRNdWx0aURlcGVuZGVuY2llcyA9IGZ1bmN0aW9uICggdHlwZXMgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgcmVzdWx0cyA9IHt9O1xuICAgICAgICAgICAgdmFyIHBlbmRpbmdzID0gW107XG4gICAgXG4gICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGlsID0gdHlwZXMubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHR5cGUgPSB0eXBlc1sgaSBdO1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuZ2V0RGVwZW5kZW5jaWVzKCB0eXBlICk7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS50aGVuKCBmdW5jdGlvbiAoIGtleSwgdmFsdWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHNbIGtleSBdID0gdmFsdWU7XG4gICAgXG4gICAgICAgICAgICAgICAgfS5iaW5kKCB0aGlzLCB0eXBlICsgKCB0eXBlID09PSAnbWVzaCcgPyAnZXMnIDogJ3MnICkgKSApO1xuICAgIFxuICAgICAgICAgICAgICAgIHBlbmRpbmdzLnB1c2goIHZhbHVlICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoIHBlbmRpbmdzICkudGhlbiggZnVuY3Rpb24gKCkge1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIFxuICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICB9O1xuICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL2Jsb2IvbWFzdGVyL3NwZWNpZmljYXRpb24vMi4wL1JFQURNRS5tZCNidWZmZXJzLWFuZC1idWZmZXItdmlld3NcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGJ1ZmZlckluZGV4XG4gICAgICAgICAqIEByZXR1cm4ge1Byb21pc2U8QXJyYXlCdWZmZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgR0xURlBhcnNlci5wcm90b3R5cGUubG9hZEJ1ZmZlciA9IGZ1bmN0aW9uICggYnVmZmVySW5kZXggKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgYnVmZmVyRGVmID0gdGhpcy5qc29uLmJ1ZmZlcnNbIGJ1ZmZlckluZGV4IF07XG4gICAgICAgICAgICB2YXIgbG9hZGVyID0gdGhpcy5maWxlTG9hZGVyO1xuICAgIFxuICAgICAgICAgICAgaWYgKCBidWZmZXJEZWYudHlwZSAmJiBidWZmZXJEZWYudHlwZSAhPT0gJ2FycmF5YnVmZmVyJyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoICdUSFJFRS5HTFRGTG9hZGVyOiAnICsgYnVmZmVyRGVmLnR5cGUgKyAnIGJ1ZmZlciB0eXBlIGlzIG5vdCBzdXBwb3J0ZWQuJyApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgLy8gSWYgcHJlc2VudCwgR0xCIGNvbnRhaW5lciBpcyByZXF1aXJlZCB0byBiZSB0aGUgZmlyc3QgYnVmZmVyLlxuICAgICAgICAgICAgaWYgKCBidWZmZXJEZWYudXJpID09PSB1bmRlZmluZWQgJiYgYnVmZmVySW5kZXggPT09IDAgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSggdGhpcy5leHRlbnNpb25zWyBFWFRFTlNJT05TLktIUl9CSU5BUllfR0xURiBdLmJvZHkgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCBmdW5jdGlvbiAoIHJlc29sdmUsIHJlamVjdCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBsb2FkZXIubG9hZCggcmVzb2x2ZVVSTCggYnVmZmVyRGVmLnVyaSwgb3B0aW9ucy5wYXRoICksIHJlc29sdmUsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKCkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICByZWplY3QoIG5ldyBFcnJvciggJ1RIUkVFLkdMVEZMb2FkZXI6IEZhaWxlZCB0byBsb2FkIGJ1ZmZlciBcIicgKyBidWZmZXJEZWYudXJpICsgJ1wiLicgKSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9ibG9iL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMC9SRUFETUUubWQjYnVmZmVycy1hbmQtYnVmZmVyLXZpZXdzXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBidWZmZXJWaWV3SW5kZXhcbiAgICAgICAgICogQHJldHVybiB7UHJvbWlzZTxBcnJheUJ1ZmZlcj59XG4gICAgICAgICAqL1xuICAgICAgICBHTFRGUGFyc2VyLnByb3RvdHlwZS5sb2FkQnVmZmVyVmlldyA9IGZ1bmN0aW9uICggYnVmZmVyVmlld0luZGV4ICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIGJ1ZmZlclZpZXdEZWYgPSB0aGlzLmpzb24uYnVmZmVyVmlld3NbIGJ1ZmZlclZpZXdJbmRleCBdO1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RGVwZW5kZW5jeSggJ2J1ZmZlcicsIGJ1ZmZlclZpZXdEZWYuYnVmZmVyICkudGhlbiggZnVuY3Rpb24gKCBidWZmZXIgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGJ5dGVMZW5ndGggPSBidWZmZXJWaWV3RGVmLmJ5dGVMZW5ndGggfHwgMDtcbiAgICAgICAgICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IGJ1ZmZlclZpZXdEZWYuYnl0ZU9mZnNldCB8fCAwO1xuICAgICAgICAgICAgICAgIHJldHVybiBidWZmZXIuc2xpY2UoIGJ5dGVPZmZzZXQsIGJ5dGVPZmZzZXQgKyBieXRlTGVuZ3RoICk7XG4gICAgXG4gICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvYmxvYi9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAvUkVBRE1FLm1kI2FjY2Vzc29yc1xuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gYWNjZXNzb3JJbmRleFxuICAgICAgICAgKiBAcmV0dXJuIHtQcm9taXNlPFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZXxUSFJFRS5JbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZT59XG4gICAgICAgICAqL1xuICAgICAgICBHTFRGUGFyc2VyLnByb3RvdHlwZS5sb2FkQWNjZXNzb3IgPSBmdW5jdGlvbiAoIGFjY2Vzc29ySW5kZXggKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgcGFyc2VyID0gdGhpcztcbiAgICAgICAgICAgIHZhciBqc29uID0gdGhpcy5qc29uO1xuICAgIFxuICAgICAgICAgICAgdmFyIGFjY2Vzc29yRGVmID0gdGhpcy5qc29uLmFjY2Vzc29yc1sgYWNjZXNzb3JJbmRleCBdO1xuICAgIFxuICAgICAgICAgICAgdmFyIHBlbmRpbmdCdWZmZXJWaWV3cyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgaWYgKCBhY2Nlc3NvckRlZi5idWZmZXJWaWV3ICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcGVuZGluZ0J1ZmZlclZpZXdzLnB1c2goIHRoaXMuZ2V0RGVwZW5kZW5jeSggJ2J1ZmZlclZpZXcnLCBhY2Nlc3NvckRlZi5idWZmZXJWaWV3ICkgKTtcbiAgICBcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcGVuZGluZ0J1ZmZlclZpZXdzLnB1c2goIG51bGwgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGlmICggYWNjZXNzb3JEZWYuc3BhcnNlICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcGVuZGluZ0J1ZmZlclZpZXdzLnB1c2goIHRoaXMuZ2V0RGVwZW5kZW5jeSggJ2J1ZmZlclZpZXcnLCBhY2Nlc3NvckRlZi5zcGFyc2UuaW5kaWNlcy5idWZmZXJWaWV3ICkgKTtcbiAgICAgICAgICAgICAgICBwZW5kaW5nQnVmZmVyVmlld3MucHVzaCggdGhpcy5nZXREZXBlbmRlbmN5KCAnYnVmZmVyVmlldycsIGFjY2Vzc29yRGVmLnNwYXJzZS52YWx1ZXMuYnVmZmVyVmlldyApICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoIHBlbmRpbmdCdWZmZXJWaWV3cyApLnRoZW4oIGZ1bmN0aW9uICggYnVmZmVyVmlld3MgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGJ1ZmZlclZpZXcgPSBidWZmZXJWaWV3c1sgMCBdO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBpdGVtU2l6ZSA9IFdFQkdMX1RZUEVfU0laRVNbIGFjY2Vzc29yRGVmLnR5cGUgXTtcbiAgICAgICAgICAgICAgICB2YXIgVHlwZWRBcnJheSA9IFdFQkdMX0NPTVBPTkVOVF9UWVBFU1sgYWNjZXNzb3JEZWYuY29tcG9uZW50VHlwZSBdO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIEZvciBWRUMzOiBpdGVtU2l6ZSBpcyAzLCBlbGVtZW50Qnl0ZXMgaXMgNCwgaXRlbUJ5dGVzIGlzIDEyLlxuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50Qnl0ZXMgPSBUeXBlZEFycmF5LkJZVEVTX1BFUl9FTEVNRU5UO1xuICAgICAgICAgICAgICAgIHZhciBpdGVtQnl0ZXMgPSBlbGVtZW50Qnl0ZXMgKiBpdGVtU2l6ZTtcbiAgICAgICAgICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IGFjY2Vzc29yRGVmLmJ5dGVPZmZzZXQgfHwgMDtcbiAgICAgICAgICAgICAgICB2YXIgYnl0ZVN0cmlkZSA9IGpzb24uYnVmZmVyVmlld3NbIGFjY2Vzc29yRGVmLmJ1ZmZlclZpZXcgXS5ieXRlU3RyaWRlO1xuICAgICAgICAgICAgICAgIHZhciBub3JtYWxpemVkID0gYWNjZXNzb3JEZWYubm9ybWFsaXplZCA9PT0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB2YXIgYXJyYXksIGJ1ZmZlckF0dHJpYnV0ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBUaGUgYnVmZmVyIGlzIG5vdCBpbnRlcmxlYXZlZCBpZiB0aGUgc3RyaWRlIGlzIHRoZSBpdGVtIHNpemUgaW4gYnl0ZXMuXG4gICAgICAgICAgICAgICAgaWYgKCBieXRlU3RyaWRlICYmIGJ5dGVTdHJpZGUgIT09IGl0ZW1CeXRlcyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGliQ2FjaGVLZXkgPSAnSW50ZXJsZWF2ZWRCdWZmZXI6JyArIGFjY2Vzc29yRGVmLmJ1ZmZlclZpZXcgKyAnOicgKyBhY2Nlc3NvckRlZi5jb21wb25lbnRUeXBlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaWIgPSBwYXJzZXIuY2FjaGUuZ2V0KCBpYkNhY2hlS2V5ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggISBpYiApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgZnVsbCBidWZmZXIgaWYgaXQncyBpbnRlcmxlYXZlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5ID0gbmV3IFR5cGVkQXJyYXkoIGJ1ZmZlclZpZXcgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEludGVnZXIgcGFyYW1ldGVycyB0byBJQi9JQkEgYXJlIGluIGFycmF5IGVsZW1lbnRzLCBub3QgYnl0ZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICBpYiA9IG5ldyBUSFJFRS5JbnRlcmxlYXZlZEJ1ZmZlciggYXJyYXksIGJ5dGVTdHJpZGUgLyBlbGVtZW50Qnl0ZXMgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5jYWNoZS5hZGQoIGliQ2FjaGVLZXksIGliICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyQXR0cmlidXRlID0gbmV3IFRIUkVFLkludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlKCBpYiwgaXRlbVNpemUsIGJ5dGVPZmZzZXQgLyBlbGVtZW50Qnl0ZXMsIG5vcm1hbGl6ZWQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGJ1ZmZlclZpZXcgPT09IG51bGwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheSA9IG5ldyBUeXBlZEFycmF5KCBhY2Nlc3NvckRlZi5jb3VudCAqIGl0ZW1TaXplICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheSA9IG5ldyBUeXBlZEFycmF5KCBidWZmZXJWaWV3LCBieXRlT2Zmc2V0LCBhY2Nlc3NvckRlZi5jb3VudCAqIGl0ZW1TaXplICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyQXR0cmlidXRlID0gbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSggYXJyYXksIGl0ZW1TaXplLCBub3JtYWxpemVkICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9ibG9iL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMC9SRUFETUUubWQjc3BhcnNlLWFjY2Vzc29yc1xuICAgICAgICAgICAgICAgIGlmICggYWNjZXNzb3JEZWYuc3BhcnNlICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBpdGVtU2l6ZUluZGljZXMgPSBXRUJHTF9UWVBFX1NJWkVTLlNDQUxBUjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIFR5cGVkQXJyYXlJbmRpY2VzID0gV0VCR0xfQ09NUE9ORU5UX1RZUEVTWyBhY2Nlc3NvckRlZi5zcGFyc2UuaW5kaWNlcy5jb21wb25lbnRUeXBlIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBieXRlT2Zmc2V0SW5kaWNlcyA9IGFjY2Vzc29yRGVmLnNwYXJzZS5pbmRpY2VzLmJ5dGVPZmZzZXQgfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJ5dGVPZmZzZXRWYWx1ZXMgPSBhY2Nlc3NvckRlZi5zcGFyc2UudmFsdWVzLmJ5dGVPZmZzZXQgfHwgMDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNwYXJzZUluZGljZXMgPSBuZXcgVHlwZWRBcnJheUluZGljZXMoIGJ1ZmZlclZpZXdzWyAxIF0sIGJ5dGVPZmZzZXRJbmRpY2VzLCBhY2Nlc3NvckRlZi5zcGFyc2UuY291bnQgKiBpdGVtU2l6ZUluZGljZXMgKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNwYXJzZVZhbHVlcyA9IG5ldyBUeXBlZEFycmF5KCBidWZmZXJWaWV3c1sgMiBdLCBieXRlT2Zmc2V0VmFsdWVzLCBhY2Nlc3NvckRlZi5zcGFyc2UuY291bnQgKiBpdGVtU2l6ZSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGJ1ZmZlclZpZXcgIT09IG51bGwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBdm9pZCBtb2RpZnlpbmcgdGhlIG9yaWdpbmFsIEFycmF5QnVmZmVyLCBpZiB0aGUgYnVmZmVyVmlldyB3YXNuJ3QgaW5pdGlhbGl6ZWQgd2l0aCB6ZXJvZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXJBdHRyaWJ1dGUuc2V0QXJyYXkoIGJ1ZmZlckF0dHJpYnV0ZS5hcnJheS5zbGljZSgpICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBpbCA9IHNwYXJzZUluZGljZXMubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBzcGFyc2VJbmRpY2VzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXJBdHRyaWJ1dGUuc2V0WCggaW5kZXgsIHNwYXJzZVZhbHVlc1sgaSAqIGl0ZW1TaXplIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggaXRlbVNpemUgPj0gMiApIGJ1ZmZlckF0dHJpYnV0ZS5zZXRZKCBpbmRleCwgc3BhcnNlVmFsdWVzWyBpICogaXRlbVNpemUgKyAxIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggaXRlbVNpemUgPj0gMyApIGJ1ZmZlckF0dHJpYnV0ZS5zZXRaKCBpbmRleCwgc3BhcnNlVmFsdWVzWyBpICogaXRlbVNpemUgKyAyIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggaXRlbVNpemUgPj0gNCApIGJ1ZmZlckF0dHJpYnV0ZS5zZXRXKCBpbmRleCwgc3BhcnNlVmFsdWVzWyBpICogaXRlbVNpemUgKyAzIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggaXRlbVNpemUgPj0gNSApIHRocm93IG5ldyBFcnJvciggJ1RIUkVFLkdMVEZMb2FkZXI6IFVuc3VwcG9ydGVkIGl0ZW1TaXplIGluIHNwYXJzZSBCdWZmZXJBdHRyaWJ1dGUuJyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBidWZmZXJBdHRyaWJ1dGU7XG4gICAgXG4gICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAjdGV4dHVyZXNcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHRleHR1cmVJbmRleFxuICAgICAgICAgKiBAcmV0dXJuIHtQcm9taXNlPFRIUkVFLlRleHR1cmU+fVxuICAgICAgICAgKi9cbiAgICAgICAgR0xURlBhcnNlci5wcm90b3R5cGUubG9hZFRleHR1cmUgPSBmdW5jdGlvbiAoIHRleHR1cmVJbmRleCApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBwYXJzZXIgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGpzb24gPSB0aGlzLmpzb247XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgICAgIHZhciB0ZXh0dXJlTG9hZGVyID0gdGhpcy50ZXh0dXJlTG9hZGVyO1xuICAgIFxuICAgICAgICAgICAgdmFyIFVSTCA9IHdpbmRvdy5VUkwgfHwgd2luZG93LndlYmtpdFVSTDtcbiAgICBcbiAgICAgICAgICAgIHZhciB0ZXh0dXJlRGVmID0ganNvbi50ZXh0dXJlc1sgdGV4dHVyZUluZGV4IF07XG4gICAgICAgICAgICB2YXIgc291cmNlID0ganNvbi5pbWFnZXNbIHRleHR1cmVEZWYuc291cmNlIF07XG4gICAgICAgICAgICB2YXIgc291cmNlVVJJID0gc291cmNlLnVyaTtcbiAgICAgICAgICAgIHZhciBpc09iamVjdFVSTCA9IGZhbHNlO1xuICAgIFxuICAgICAgICAgICAgaWYgKCBzb3VyY2UuYnVmZmVyVmlldyAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIExvYWQgYmluYXJ5IGltYWdlIGRhdGEgZnJvbSBidWZmZXJWaWV3LCBpZiBwcm92aWRlZC5cbiAgICBcbiAgICAgICAgICAgICAgICBzb3VyY2VVUkkgPSBwYXJzZXIuZ2V0RGVwZW5kZW5jeSggJ2J1ZmZlclZpZXcnLCBzb3VyY2UuYnVmZmVyVmlldyApLnRoZW4oIGZ1bmN0aW9uICggYnVmZmVyVmlldyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaXNPYmplY3RVUkwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKCBbIGJ1ZmZlclZpZXcgXSwgeyB0eXBlOiBzb3VyY2UubWltZVR5cGUgfSApO1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VVUkkgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKCBibG9iICk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzb3VyY2VVUkk7XG4gICAgXG4gICAgICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSggc291cmNlVVJJICkudGhlbiggZnVuY3Rpb24gKCBzb3VyY2VVUkkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gTG9hZCBUZXh0dXJlIHJlc291cmNlLlxuICAgIFxuICAgICAgICAgICAgICAgIHZhciBsb2FkZXIgPSBUSFJFRS5Mb2FkZXIuSGFuZGxlcnMuZ2V0KCBzb3VyY2VVUkkgKSB8fCB0ZXh0dXJlTG9hZGVyO1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSggZnVuY3Rpb24gKCByZXNvbHZlLCByZWplY3QgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGxvYWRlci5sb2FkKCByZXNvbHZlVVJMKCBzb3VyY2VVUkksIG9wdGlvbnMucGF0aCApLCByZXNvbHZlLCB1bmRlZmluZWQsIHJlamVjdCApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgIH0gKS50aGVuKCBmdW5jdGlvbiAoIHRleHR1cmUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gQ2xlYW4gdXAgcmVzb3VyY2VzIGFuZCBjb25maWd1cmUgVGV4dHVyZS5cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGlzT2JqZWN0VVJMID09PSB0cnVlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKCBzb3VyY2VVUkkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgdGV4dHVyZS5mbGlwWSA9IGZhbHNlO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggdGV4dHVyZURlZi5uYW1lICE9PSB1bmRlZmluZWQgKSB0ZXh0dXJlLm5hbWUgPSB0ZXh0dXJlRGVmLm5hbWU7XG4gICAgXG4gICAgICAgICAgICAgICAgdGV4dHVyZS5mb3JtYXQgPSB0ZXh0dXJlRGVmLmZvcm1hdCAhPT0gdW5kZWZpbmVkID8gV0VCR0xfVEVYVFVSRV9GT1JNQVRTWyB0ZXh0dXJlRGVmLmZvcm1hdCBdIDogVEhSRUUuUkdCQUZvcm1hdDtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHRleHR1cmVEZWYuaW50ZXJuYWxGb3JtYXQgIT09IHVuZGVmaW5lZCAmJiB0ZXh0dXJlLmZvcm1hdCAhPT0gV0VCR0xfVEVYVFVSRV9GT1JNQVRTWyB0ZXh0dXJlRGVmLmludGVybmFsRm9ybWF0IF0gKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybiggJ1RIUkVFLkdMVEZMb2FkZXI6IFRocmVlLmpzIGRvZXMgbm90IHN1cHBvcnQgdGV4dHVyZSBpbnRlcm5hbEZvcm1hdCB3aGljaCBpcyBkaWZmZXJlbnQgZnJvbSB0ZXh0dXJlIGZvcm1hdC4gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaW50ZXJuYWxGb3JtYXQgd2lsbCBiZSBmb3JjZWQgdG8gYmUgdGhlIHNhbWUgdmFsdWUgYXMgZm9ybWF0LicgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgdGV4dHVyZS50eXBlID0gdGV4dHVyZURlZi50eXBlICE9PSB1bmRlZmluZWQgPyBXRUJHTF9URVhUVVJFX0RBVEFUWVBFU1sgdGV4dHVyZURlZi50eXBlIF0gOiBUSFJFRS5VbnNpZ25lZEJ5dGVUeXBlO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBzYW1wbGVycyA9IGpzb24uc2FtcGxlcnMgfHwge307XG4gICAgICAgICAgICAgICAgdmFyIHNhbXBsZXIgPSBzYW1wbGVyc1sgdGV4dHVyZURlZi5zYW1wbGVyIF0gfHwge307XG4gICAgXG4gICAgICAgICAgICAgICAgdGV4dHVyZS5tYWdGaWx0ZXIgPSBXRUJHTF9GSUxURVJTWyBzYW1wbGVyLm1hZ0ZpbHRlciBdIHx8IFRIUkVFLkxpbmVhckZpbHRlcjtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLm1pbkZpbHRlciA9IFdFQkdMX0ZJTFRFUlNbIHNhbXBsZXIubWluRmlsdGVyIF0gfHwgVEhSRUUuTGluZWFyTWlwTWFwTGluZWFyRmlsdGVyO1xuICAgICAgICAgICAgICAgIHRleHR1cmUud3JhcFMgPSBXRUJHTF9XUkFQUElOR1NbIHNhbXBsZXIud3JhcFMgXSB8fCBUSFJFRS5SZXBlYXRXcmFwcGluZztcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLndyYXBUID0gV0VCR0xfV1JBUFBJTkdTWyBzYW1wbGVyLndyYXBUIF0gfHwgVEhSRUUuUmVwZWF0V3JhcHBpbmc7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRleHR1cmU7XG4gICAgXG4gICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBc3luY2hyb25vdXNseSBhc3NpZ25zIGEgdGV4dHVyZSB0byB0aGUgZ2l2ZW4gbWF0ZXJpYWwgcGFyYW1ldGVycy5cbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG1hdGVyaWFsUGFyYW1zXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0dXJlTmFtZVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gdGV4dHVyZUluZGV4XG4gICAgICAgICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAgICAgICAqL1xuICAgICAgICBHTFRGUGFyc2VyLnByb3RvdHlwZS5hc3NpZ25UZXh0dXJlID0gZnVuY3Rpb24gKCBtYXRlcmlhbFBhcmFtcywgdGV4dHVyZU5hbWUsIHRleHR1cmVJbmRleCApIHtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldERlcGVuZGVuY3koICd0ZXh0dXJlJywgdGV4dHVyZUluZGV4ICkudGhlbiggZnVuY3Rpb24gKCB0ZXh0dXJlICkge1xuICAgIFxuICAgICAgICAgICAgICAgIG1hdGVyaWFsUGFyYW1zWyB0ZXh0dXJlTmFtZSBdID0gdGV4dHVyZTtcbiAgICBcbiAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9ibG9iL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMC9SRUFETUUubWQjbWF0ZXJpYWxzXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXRlcmlhbEluZGV4XG4gICAgICAgICAqIEByZXR1cm4ge1Byb21pc2U8VEhSRUUuTWF0ZXJpYWw+fVxuICAgICAgICAgKi9cbiAgICAgICAgR0xURlBhcnNlci5wcm90b3R5cGUubG9hZE1hdGVyaWFsID0gZnVuY3Rpb24gKCBtYXRlcmlhbEluZGV4ICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIHBhcnNlciA9IHRoaXM7XG4gICAgICAgICAgICB2YXIganNvbiA9IHRoaXMuanNvbjtcbiAgICAgICAgICAgIHZhciBleHRlbnNpb25zID0gdGhpcy5leHRlbnNpb25zO1xuICAgICAgICAgICAgdmFyIG1hdGVyaWFsRGVmID0gdGhpcy5qc29uLm1hdGVyaWFsc1sgbWF0ZXJpYWxJbmRleCBdO1xuICAgIFxuICAgICAgICAgICAgdmFyIG1hdGVyaWFsVHlwZTtcbiAgICAgICAgICAgIHZhciBtYXRlcmlhbFBhcmFtcyA9IHt9O1xuICAgICAgICAgICAgdmFyIG1hdGVyaWFsRXh0ZW5zaW9ucyA9IG1hdGVyaWFsRGVmLmV4dGVuc2lvbnMgfHwge307XG4gICAgXG4gICAgICAgICAgICB2YXIgcGVuZGluZyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgaWYgKCBtYXRlcmlhbEV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX01BVEVSSUFMU19QQlJfU1BFQ1VMQVJfR0xPU1NJTkVTUyBdICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBzZ0V4dGVuc2lvbiA9IGV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX01BVEVSSUFMU19QQlJfU1BFQ1VMQVJfR0xPU1NJTkVTUyBdO1xuICAgICAgICAgICAgICAgIG1hdGVyaWFsVHlwZSA9IHNnRXh0ZW5zaW9uLmdldE1hdGVyaWFsVHlwZSggbWF0ZXJpYWxEZWYgKTtcbiAgICAgICAgICAgICAgICBwZW5kaW5nLnB1c2goIHNnRXh0ZW5zaW9uLmV4dGVuZFBhcmFtcyggbWF0ZXJpYWxQYXJhbXMsIG1hdGVyaWFsRGVmLCBwYXJzZXIgKSApO1xuICAgIFxuICAgICAgICAgICAgfSBlbHNlIGlmICggbWF0ZXJpYWxEZWYucGJyTWV0YWxsaWNSb3VnaG5lc3MgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBTcGVjaWZpY2F0aW9uOlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMCNtZXRhbGxpYy1yb3VnaG5lc3MtbWF0ZXJpYWxcbiAgICBcbiAgICAgICAgICAgICAgICBtYXRlcmlhbFR5cGUgPSBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbDtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgbWV0YWxsaWNSb3VnaG5lc3MgPSBtYXRlcmlhbERlZi5wYnJNZXRhbGxpY1JvdWdobmVzcztcbiAgICBcbiAgICAgICAgICAgICAgICBtYXRlcmlhbFBhcmFtcy5jb2xvciA9IG5ldyBUSFJFRS5Db2xvciggMS4wLCAxLjAsIDEuMCApO1xuICAgICAgICAgICAgICAgIG1hdGVyaWFsUGFyYW1zLm9wYWNpdHkgPSAxLjA7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBBcnJheS5pc0FycmF5KCBtZXRhbGxpY1JvdWdobmVzcy5iYXNlQ29sb3JGYWN0b3IgKSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFycmF5ID0gbWV0YWxsaWNSb3VnaG5lc3MuYmFzZUNvbG9yRmFjdG9yO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbFBhcmFtcy5jb2xvci5mcm9tQXJyYXkoIGFycmF5ICk7XG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsUGFyYW1zLm9wYWNpdHkgPSBhcnJheVsgMyBdO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIG1ldGFsbGljUm91Z2huZXNzLmJhc2VDb2xvclRleHR1cmUgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZy5wdXNoKCBwYXJzZXIuYXNzaWduVGV4dHVyZSggbWF0ZXJpYWxQYXJhbXMsICdtYXAnLCBtZXRhbGxpY1JvdWdobmVzcy5iYXNlQ29sb3JUZXh0dXJlLmluZGV4ICkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWxQYXJhbXMubWV0YWxuZXNzID0gbWV0YWxsaWNSb3VnaG5lc3MubWV0YWxsaWNGYWN0b3IgIT09IHVuZGVmaW5lZCA/IG1ldGFsbGljUm91Z2huZXNzLm1ldGFsbGljRmFjdG9yIDogMS4wO1xuICAgICAgICAgICAgICAgIG1hdGVyaWFsUGFyYW1zLnJvdWdobmVzcyA9IG1ldGFsbGljUm91Z2huZXNzLnJvdWdobmVzc0ZhY3RvciAhPT0gdW5kZWZpbmVkID8gbWV0YWxsaWNSb3VnaG5lc3Mucm91Z2huZXNzRmFjdG9yIDogMS4wO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggbWV0YWxsaWNSb3VnaG5lc3MubWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZXh0dXJlSW5kZXggPSBtZXRhbGxpY1JvdWdobmVzcy5tZXRhbGxpY1JvdWdobmVzc1RleHR1cmUuaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmcucHVzaCggcGFyc2VyLmFzc2lnblRleHR1cmUoIG1hdGVyaWFsUGFyYW1zLCAnbWV0YWxuZXNzTWFwJywgdGV4dHVyZUluZGV4ICkgKTtcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZy5wdXNoKCBwYXJzZXIuYXNzaWduVGV4dHVyZSggbWF0ZXJpYWxQYXJhbXMsICdyb3VnaG5lc3NNYXAnLCB0ZXh0dXJlSW5kZXggKSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWxUeXBlID0gVEhSRUUuTWVzaFBob25nTWF0ZXJpYWw7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBpZiAoIG1hdGVyaWFsRGVmLmRvdWJsZVNpZGVkID09PSB0cnVlICkge1xuICAgIFxuICAgICAgICAgICAgICAgIG1hdGVyaWFsUGFyYW1zLnNpZGUgPSBUSFJFRS5Eb3VibGVTaWRlO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgdmFyIGFscGhhTW9kZSA9IG1hdGVyaWFsRGVmLmFscGhhTW9kZSB8fCBBTFBIQV9NT0RFUy5PUEFRVUU7XG4gICAgXG4gICAgICAgICAgICBpZiAoIGFscGhhTW9kZSA9PT0gQUxQSEFfTU9ERVMuQkxFTkQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWxQYXJhbXMudHJhbnNwYXJlbnQgPSB0cnVlO1xuICAgIFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICBtYXRlcmlhbFBhcmFtcy50cmFuc3BhcmVudCA9IGZhbHNlO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggYWxwaGFNb2RlID09PSBBTFBIQV9NT0RFUy5NQVNLICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbFBhcmFtcy5hbHBoYVRlc3QgPSBtYXRlcmlhbERlZi5hbHBoYUN1dG9mZiAhPT0gdW5kZWZpbmVkID8gbWF0ZXJpYWxEZWYuYWxwaGFDdXRvZmYgOiAwLjU7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgaWYgKCBtYXRlcmlhbERlZi5ub3JtYWxUZXh0dXJlICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcGVuZGluZy5wdXNoKCBwYXJzZXIuYXNzaWduVGV4dHVyZSggbWF0ZXJpYWxQYXJhbXMsICdub3JtYWxNYXAnLCBtYXRlcmlhbERlZi5ub3JtYWxUZXh0dXJlLmluZGV4ICkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICBtYXRlcmlhbFBhcmFtcy5ub3JtYWxTY2FsZSA9IG5ldyBUSFJFRS5WZWN0b3IyKCAxLCAxICk7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBtYXRlcmlhbERlZi5ub3JtYWxUZXh0dXJlLnNjYWxlICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsUGFyYW1zLm5vcm1hbFNjYWxlLnNldCggbWF0ZXJpYWxEZWYubm9ybWFsVGV4dHVyZS5zY2FsZSwgbWF0ZXJpYWxEZWYubm9ybWFsVGV4dHVyZS5zY2FsZSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGlmICggbWF0ZXJpYWxEZWYub2NjbHVzaW9uVGV4dHVyZSAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHBlbmRpbmcucHVzaCggcGFyc2VyLmFzc2lnblRleHR1cmUoIG1hdGVyaWFsUGFyYW1zLCAnYW9NYXAnLCBtYXRlcmlhbERlZi5vY2NsdXNpb25UZXh0dXJlLmluZGV4ICkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIG1hdGVyaWFsRGVmLm9jY2x1c2lvblRleHR1cmUuc3RyZW5ndGggIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxQYXJhbXMuYW9NYXBJbnRlbnNpdHkgPSBtYXRlcmlhbERlZi5vY2NsdXNpb25UZXh0dXJlLnN0cmVuZ3RoO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGlmICggbWF0ZXJpYWxEZWYuZW1pc3NpdmVGYWN0b3IgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIG1hdGVyaWFsVHlwZSA9PT0gVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsUGFyYW1zLmNvbG9yID0gbmV3IFRIUkVFLkNvbG9yKCkuZnJvbUFycmF5KCBtYXRlcmlhbERlZi5lbWlzc2l2ZUZhY3RvciApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsUGFyYW1zLmVtaXNzaXZlID0gbmV3IFRIUkVFLkNvbG9yKCkuZnJvbUFycmF5KCBtYXRlcmlhbERlZi5lbWlzc2l2ZUZhY3RvciApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGlmICggbWF0ZXJpYWxEZWYuZW1pc3NpdmVUZXh0dXJlICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBtYXRlcmlhbFR5cGUgPT09IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBwZW5kaW5nLnB1c2goIHBhcnNlci5hc3NpZ25UZXh0dXJlKCBtYXRlcmlhbFBhcmFtcywgJ21hcCcsIG1hdGVyaWFsRGVmLmVtaXNzaXZlVGV4dHVyZS5pbmRleCApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZy5wdXNoKCBwYXJzZXIuYXNzaWduVGV4dHVyZSggbWF0ZXJpYWxQYXJhbXMsICdlbWlzc2l2ZU1hcCcsIG1hdGVyaWFsRGVmLmVtaXNzaXZlVGV4dHVyZS5pbmRleCApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKCBwZW5kaW5nICkudGhlbiggZnVuY3Rpb24gKCkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBtYXRlcmlhbDtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIG1hdGVyaWFsVHlwZSA9PT0gVEhSRUUuU2hhZGVyTWF0ZXJpYWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gZXh0ZW5zaW9uc1sgRVhURU5TSU9OUy5LSFJfTUFURVJJQUxTX1BCUl9TUEVDVUxBUl9HTE9TU0lORVNTIF0uY3JlYXRlTWF0ZXJpYWwoIG1hdGVyaWFsUGFyYW1zICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSBuZXcgbWF0ZXJpYWxUeXBlKCBtYXRlcmlhbFBhcmFtcyApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIG1hdGVyaWFsRGVmLm5hbWUgIT09IHVuZGVmaW5lZCApIG1hdGVyaWFsLm5hbWUgPSBtYXRlcmlhbERlZi5uYW1lO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIE5vcm1hbCBtYXAgdGV4dHVyZXMgdXNlIE9wZW5HTCBjb252ZW50aW9uczpcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAjbWF0ZXJpYWxub3JtYWx0ZXh0dXJlXG4gICAgICAgICAgICAgICAgaWYgKCBtYXRlcmlhbC5ub3JtYWxTY2FsZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwubm9ybWFsU2NhbGUueCA9IC0gbWF0ZXJpYWwubm9ybWFsU2NhbGUueDtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gZW1pc3NpdmVUZXh0dXJlIGFuZCBiYXNlQ29sb3JUZXh0dXJlIHVzZSBzUkdCIGVuY29kaW5nLlxuICAgICAgICAgICAgICAgIGlmICggbWF0ZXJpYWwubWFwICkgbWF0ZXJpYWwubWFwLmVuY29kaW5nID0gVEhSRUUuc1JHQkVuY29kaW5nO1xuICAgICAgICAgICAgICAgIGlmICggbWF0ZXJpYWwuZW1pc3NpdmVNYXAgKSBtYXRlcmlhbC5lbWlzc2l2ZU1hcC5lbmNvZGluZyA9IFRIUkVFLnNSR0JFbmNvZGluZztcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIG1hdGVyaWFsRGVmLmV4dHJhcyApIG1hdGVyaWFsLnVzZXJEYXRhID0gbWF0ZXJpYWxEZWYuZXh0cmFzO1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBtYXRlcmlhbDtcbiAgICBcbiAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9ibG9iL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMC9SRUFETUUubWQjZ2VvbWV0cnlcbiAgICAgICAgICogQHBhcmFtIHtBcnJheTxPYmplY3Q+fSBwcmltaXRpdmVzXG4gICAgICAgICAqIEByZXR1cm4ge1Byb21pc2U8QXJyYXk8VEhSRUUuQnVmZmVyR2VvbWV0cnk+Pn1cbiAgICAgICAgICovXG4gICAgICAgIEdMVEZQYXJzZXIucHJvdG90eXBlLmxvYWRHZW9tZXRyaWVzID0gZnVuY3Rpb24gKCBwcmltaXRpdmVzICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIGNhY2hlID0gdGhpcy5wcmltaXRpdmVDYWNoZTtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldERlcGVuZGVuY2llcyggJ2FjY2Vzc29yJyApLnRoZW4oIGZ1bmN0aW9uICggYWNjZXNzb3JzICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBnZW9tZXRyaWVzID0gW107XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBpbCA9IHByaW1pdGl2ZXMubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBwcmltaXRpdmUgPSBwcmltaXRpdmVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIFNlZSBpZiB3ZSd2ZSBhbHJlYWR5IGNyZWF0ZWQgdGhpcyBnZW9tZXRyeVxuICAgICAgICAgICAgICAgICAgICB2YXIgY2FjaGVkID0gZ2V0Q2FjaGVkR2VvbWV0cnkoIGNhY2hlLCBwcmltaXRpdmUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjYWNoZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2UgdGhlIGNhY2hlZCBnZW9tZXRyeSBpZiBpdCBleGlzdHNcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJpZXMucHVzaCggY2FjaGVkICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UgY3JlYXRlIGEgbmV3IGdlb21ldHJ5XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdHRyaWJ1dGVzID0gcHJpbWl0aXZlLmF0dHJpYnV0ZXM7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgYXR0cmlidXRlSWQgaW4gYXR0cmlidXRlcyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXR0cmlidXRlRW50cnkgPSBhdHRyaWJ1dGVzWyBhdHRyaWJ1dGVJZCBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBidWZmZXJBdHRyaWJ1dGUgPSBhY2Nlc3NvcnNbIGF0dHJpYnV0ZUVudHJ5IF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggYXR0cmlidXRlSWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1BPU0lUSU9OJzpcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ3Bvc2l0aW9uJywgYnVmZmVyQXR0cmlidXRlICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnTk9STUFMJzpcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ25vcm1hbCcsIGJ1ZmZlckF0dHJpYnV0ZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1RFWENPT1JEXzAnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdURVhDT09SRDAnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdURVhDT09SRCc6XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeS5hZGRBdHRyaWJ1dGUoICd1dicsIGJ1ZmZlckF0dHJpYnV0ZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1RFWENPT1JEXzEnOlxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkuYWRkQXR0cmlidXRlKCAndXYyJywgYnVmZmVyQXR0cmlidXRlICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnQ09MT1JfMCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ0NPTE9SMCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ0NPTE9SJzpcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ2NvbG9yJywgYnVmZmVyQXR0cmlidXRlICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnV0VJR0hUU18wJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnV0VJR0hUJzogLy8gV0VJR0hUIHNlbWFudGljIGRlcHJlY2F0ZWQuXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeS5hZGRBdHRyaWJ1dGUoICdza2luV2VpZ2h0JywgYnVmZmVyQXR0cmlidXRlICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnSk9JTlRTXzAnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdKT0lOVCc6IC8vIEpPSU5UIHNlbWFudGljIGRlcHJlY2F0ZWQuXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeS5hZGRBdHRyaWJ1dGUoICdza2luSW5kZXgnLCBidWZmZXJBdHRyaWJ1dGUgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcHJpbWl0aXZlLmluZGljZXMgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeS5zZXRJbmRleCggYWNjZXNzb3JzWyBwcmltaXRpdmUuaW5kaWNlcyBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDYWNoZSB0aGlzIGdlb21ldHJ5XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZS5wdXNoKCB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbWl0aXZlOiBwcmltaXRpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnk6IGdlb21ldHJ5XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyaWVzLnB1c2goIGdlb21ldHJ5ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdlb21ldHJpZXM7XG4gICAgXG4gICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvYmxvYi9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAvUkVBRE1FLm1kI21lc2hlc1xuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gbWVzaEluZGV4XG4gICAgICAgICAqIEByZXR1cm4ge1Byb21pc2U8VEhSRUUuR3JvdXB8VEhSRUUuTWVzaHxUSFJFRS5Ta2lubmVkTWVzaD59XG4gICAgICAgICAqL1xuICAgICAgICBHTFRGUGFyc2VyLnByb3RvdHlwZS5sb2FkTWVzaCA9IGZ1bmN0aW9uICggbWVzaEluZGV4ICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIHNjb3BlID0gdGhpcztcbiAgICAgICAgICAgIHZhciBqc29uID0gdGhpcy5qc29uO1xuICAgICAgICAgICAgdmFyIGV4dGVuc2lvbnMgPSB0aGlzLmV4dGVuc2lvbnM7XG4gICAgXG4gICAgICAgICAgICB2YXIgbWVzaERlZiA9IHRoaXMuanNvbi5tZXNoZXNbIG1lc2hJbmRleCBdO1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TXVsdGlEZXBlbmRlbmNpZXMoIFtcbiAgICBcbiAgICAgICAgICAgICAgICAnYWNjZXNzb3InLFxuICAgICAgICAgICAgICAgICdtYXRlcmlhbCdcbiAgICBcbiAgICAgICAgICAgIF0gKS50aGVuKCBmdW5jdGlvbiAoIGRlcGVuZGVuY2llcyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXAgPSBuZXcgVEhSRUUuR3JvdXAoKTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgcHJpbWl0aXZlcyA9IG1lc2hEZWYucHJpbWl0aXZlcztcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGUubG9hZEdlb21ldHJpZXMoIHByaW1pdGl2ZXMgKS50aGVuKCBmdW5jdGlvbiAoIGdlb21ldHJpZXMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgaWwgPSBwcmltaXRpdmVzLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByaW1pdGl2ZSA9IHByaW1pdGl2ZXNbIGkgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnZW9tZXRyeSA9IGdlb21ldHJpZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXRlcmlhbCA9IHByaW1pdGl2ZS5tYXRlcmlhbCA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBjcmVhdGVEZWZhdWx0TWF0ZXJpYWwoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZGVwZW5kZW5jaWVzLm1hdGVyaWFsc1sgcHJpbWl0aXZlLm1hdGVyaWFsIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIG1hdGVyaWFsLmFvTWFwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIGdlb21ldHJ5LmF0dHJpYnV0ZXMudXYyID09PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgZ2VvbWV0cnkuYXR0cmlidXRlcy51diAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCAnVEhSRUUuR0xURkxvYWRlcjogRHVwbGljYXRpbmcgVVZzIHRvIHN1cHBvcnQgYW9NYXAuJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ3V2MicsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoIGdlb21ldHJ5LmF0dHJpYnV0ZXMudXYuYXJyYXksIDIgKSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIG1hdGVyaWFsIHdpbGwgYmUgbW9kaWZpZWQgbGF0ZXIgb24sIGNsb25lIGl0IG5vdy5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1c2VWZXJ0ZXhDb2xvcnMgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzLmNvbG9yICE9PSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXNlRmxhdFNoYWRpbmcgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzLm5vcm1hbCA9PT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVzZVNraW5uaW5nID0gbWVzaERlZi5pc1NraW5uZWRNZXNoID09PSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVzZU1vcnBoVGFyZ2V0cyA9IHByaW1pdGl2ZS50YXJnZXRzICE9PSB1bmRlZmluZWQ7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHVzZVZlcnRleENvbG9ycyB8fCB1c2VGbGF0U2hhZGluZyB8fCB1c2VTa2lubmluZyB8fCB1c2VNb3JwaFRhcmdldHMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBtYXRlcmlhbC5pc0dMVEZTcGVjdWxhckdsb3NzaW5lc3NNYXRlcmlhbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNwZWNHbG9zc0V4dGVuc2lvbiA9IGV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX01BVEVSSUFMU19QQlJfU1BFQ1VMQVJfR0xPU1NJTkVTUyBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IHNwZWNHbG9zc0V4dGVuc2lvbi5jbG9uZU1hdGVyaWFsKCBtYXRlcmlhbCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gbWF0ZXJpYWwuY2xvbmUoKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHVzZVZlcnRleENvbG9ycyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC52ZXJ0ZXhDb2xvcnMgPSBUSFJFRS5WZXJ0ZXhDb2xvcnM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwubmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB1c2VGbGF0U2hhZGluZyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5mbGF0U2hhZGluZyA9IHRydWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVzaDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcHJpbWl0aXZlLm1vZGUgPT09IFdFQkdMX0NPTlNUQU5UUy5UUklBTkdMRVMgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmltaXRpdmUubW9kZSA9PT0gV0VCR0xfQ09OU1RBTlRTLlRSSUFOR0xFX1NUUklQIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbWl0aXZlLm1vZGUgPT09IFdFQkdMX0NPTlNUQU5UUy5UUklBTkdMRV9GQU4gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmltaXRpdmUubW9kZSA9PT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdXNlU2tpbm5pbmcgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc2ggPSBuZXcgVEhSRUUuU2tpbm5lZE1lc2goIGdlb21ldHJ5LCBtYXRlcmlhbCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5za2lubmluZyA9IHRydWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzaCA9IG5ldyBUSFJFRS5NZXNoKCBnZW9tZXRyeSwgbWF0ZXJpYWwgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBwcmltaXRpdmUubW9kZSA9PT0gV0VCR0xfQ09OU1RBTlRTLlRSSUFOR0xFX1NUUklQICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNoLmRyYXdNb2RlID0gVEhSRUUuVHJpYW5nbGVTdHJpcERyYXdNb2RlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHByaW1pdGl2ZS5tb2RlID09PSBXRUJHTF9DT05TVEFOVFMuVFJJQU5HTEVfRkFOICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNoLmRyYXdNb2RlID0gVEhSRUUuVHJpYW5nbGVGYW5EcmF3TW9kZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBwcmltaXRpdmUubW9kZSA9PT0gV0VCR0xfQ09OU1RBTlRTLkxJTkVTIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbWl0aXZlLm1vZGUgPT09IFdFQkdMX0NPTlNUQU5UUy5MSU5FX1NUUklQIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbWl0aXZlLm1vZGUgPT09IFdFQkdMX0NPTlNUQU5UUy5MSU5FX0xPT1AgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhY2hlS2V5ID0gJ0xpbmVCYXNpY01hdGVyaWFsOicgKyBtYXRlcmlhbC51dWlkO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaW5lTWF0ZXJpYWwgPSBzY29wZS5jYWNoZS5nZXQoIGNhY2hlS2V5ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAhIGxpbmVNYXRlcmlhbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZU1hdGVyaWFsID0gbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZS5jb3B5LmNhbGwoIGxpbmVNYXRlcmlhbCwgbWF0ZXJpYWwgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZU1hdGVyaWFsLmNvbG9yLmNvcHkoIG1hdGVyaWFsLmNvbG9yICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVNYXRlcmlhbC5saWdodHMgPSBmYWxzZTsgIC8vIExpbmVCYXNpY01hdGVyaWFsIGRvZXNuJ3Qgc3VwcG9ydCBsaWdodHMgeWV0XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLmNhY2hlLmFkZCggY2FjaGVLZXksIGxpbmVNYXRlcmlhbCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IGxpbmVNYXRlcmlhbDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHByaW1pdGl2ZS5tb2RlID09PSBXRUJHTF9DT05TVEFOVFMuTElORVMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc2ggPSBuZXcgVEhSRUUuTGluZVNlZ21lbnRzKCBnZW9tZXRyeSwgbWF0ZXJpYWwgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBwcmltaXRpdmUubW9kZSA9PT0gV0VCR0xfQ09OU1RBTlRTLkxJTkVfU1RSSVAgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc2ggPSBuZXcgVEhSRUUuTGluZSggZ2VvbWV0cnksIG1hdGVyaWFsICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzaCA9IG5ldyBUSFJFRS5MaW5lTG9vcCggZ2VvbWV0cnksIG1hdGVyaWFsICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggcHJpbWl0aXZlLm1vZGUgPT09IFdFQkdMX0NPTlNUQU5UUy5QT0lOVFMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhY2hlS2V5ID0gJ1BvaW50c01hdGVyaWFsOicgKyBtYXRlcmlhbC51dWlkO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb2ludHNNYXRlcmlhbCA9IHNjb3BlLmNhY2hlLmdldCggY2FjaGVLZXkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICEgcG9pbnRzTWF0ZXJpYWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50c01hdGVyaWFsID0gbmV3IFRIUkVFLlBvaW50c01hdGVyaWFsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZS5jb3B5LmNhbGwoIHBvaW50c01hdGVyaWFsLCBtYXRlcmlhbCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludHNNYXRlcmlhbC5jb2xvci5jb3B5KCBtYXRlcmlhbC5jb2xvciApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludHNNYXRlcmlhbC5tYXAgPSBtYXRlcmlhbC5tYXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50c01hdGVyaWFsLmxpZ2h0cyA9IGZhbHNlOyAgLy8gUG9pbnRzTWF0ZXJpYWwgZG9lc24ndCBzdXBwb3J0IGxpZ2h0cyB5ZXRcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuY2FjaGUuYWRkKCBjYWNoZUtleSwgcG9pbnRzTWF0ZXJpYWwgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSBwb2ludHNNYXRlcmlhbDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNoID0gbmV3IFRIUkVFLlBvaW50cyggZ2VvbWV0cnksIG1hdGVyaWFsICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvciggJ1RIUkVFLkdMVEZMb2FkZXI6IFByaW1pdGl2ZSBtb2RlIHVuc3VwcG9ydGVkOiAnICsgcHJpbWl0aXZlLm1vZGUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc2gubmFtZSA9IG1lc2hEZWYubmFtZSB8fCAoICdtZXNoXycgKyBtZXNoSW5kZXggKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdXNlTW9ycGhUYXJnZXRzICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZE1vcnBoVGFyZ2V0cyggbWVzaCwgbWVzaERlZiwgcHJpbWl0aXZlLCBkZXBlbmRlbmNpZXMuYWNjZXNzb3JzICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIG1lc2hEZWYuZXh0cmFzICE9PSB1bmRlZmluZWQgKSBtZXNoLnVzZXJEYXRhID0gbWVzaERlZi5leHRyYXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHByaW1pdGl2ZS5leHRyYXMgIT09IHVuZGVmaW5lZCApIG1lc2guZ2VvbWV0cnkudXNlckRhdGEgPSBwcmltaXRpdmUuZXh0cmFzO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm9yIFNwZWN1bGFyLUdsb3NzaW5lc3MuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIG1hdGVyaWFsLmlzR0xURlNwZWN1bGFyR2xvc3NpbmVzc01hdGVyaWFsID09PSB0cnVlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc2gub25CZWZvcmVSZW5kZXIgPSBleHRlbnNpb25zWyBFWFRFTlNJT05TLktIUl9NQVRFUklBTFNfUEJSX1NQRUNVTEFSX0dMT1NTSU5FU1MgXS5yZWZyZXNoVW5pZm9ybXM7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHByaW1pdGl2ZXMubGVuZ3RoID4gMSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNoLm5hbWUgKz0gJ18nICsgaTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cC5hZGQoIG1lc2ggKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lc2g7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdyb3VwO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMCNjYW1lcmFzXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjYW1lcmFJbmRleFxuICAgICAgICAgKiBAcmV0dXJuIHtQcm9taXNlPFRIUkVFLkNhbWVyYT59XG4gICAgICAgICAqL1xuICAgICAgICBHTFRGUGFyc2VyLnByb3RvdHlwZS5sb2FkQ2FtZXJhID0gZnVuY3Rpb24gKCBjYW1lcmFJbmRleCApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBjYW1lcmE7XG4gICAgICAgICAgICB2YXIgY2FtZXJhRGVmID0gdGhpcy5qc29uLmNhbWVyYXNbIGNhbWVyYUluZGV4IF07XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gY2FtZXJhRGVmWyBjYW1lcmFEZWYudHlwZSBdO1xuICAgIFxuICAgICAgICAgICAgaWYgKCAhIHBhcmFtcyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oICdUSFJFRS5HTFRGTG9hZGVyOiBNaXNzaW5nIGNhbWVyYSBwYXJhbWV0ZXJzLicgKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBpZiAoIGNhbWVyYURlZi50eXBlID09PSAncGVyc3BlY3RpdmUnICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBhc3BlY3RSYXRpbyA9IHBhcmFtcy5hc3BlY3RSYXRpbyB8fCAxO1xuICAgICAgICAgICAgICAgIHZhciB4Zm92ID0gcGFyYW1zLnlmb3YgKiBhc3BlY3RSYXRpbztcbiAgICBcbiAgICAgICAgICAgICAgICBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoIFRIUkVFLk1hdGgucmFkVG9EZWcoIHhmb3YgKSwgYXNwZWN0UmF0aW8sIHBhcmFtcy56bmVhciB8fCAxLCBwYXJhbXMuemZhciB8fCAyZTYgKTtcbiAgICBcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIGNhbWVyYURlZi50eXBlID09PSAnb3J0aG9ncmFwaGljJyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBjYW1lcmEgPSBuZXcgVEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhKCBwYXJhbXMueG1hZyAvIC0gMiwgcGFyYW1zLnhtYWcgLyAyLCBwYXJhbXMueW1hZyAvIDIsIHBhcmFtcy55bWFnIC8gLSAyLCBwYXJhbXMuem5lYXIsIHBhcmFtcy56ZmFyICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBpZiAoIGNhbWVyYURlZi5uYW1lICE9PSB1bmRlZmluZWQgKSBjYW1lcmEubmFtZSA9IGNhbWVyYURlZi5uYW1lO1xuICAgICAgICAgICAgaWYgKCBjYW1lcmFEZWYuZXh0cmFzICkgY2FtZXJhLnVzZXJEYXRhID0gY2FtZXJhRGVmLmV4dHJhcztcbiAgICBcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoIGNhbWVyYSApO1xuICAgIFxuICAgICAgICB9O1xuICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL3NwZWNpZmljYXRpb24vMi4wI3NraW5zXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBza2luSW5kZXhcbiAgICAgICAgICogQHJldHVybiB7UHJvbWlzZTxPYmplY3Q+fVxuICAgICAgICAgKi9cbiAgICAgICAgR0xURlBhcnNlci5wcm90b3R5cGUubG9hZFNraW4gPSBmdW5jdGlvbiAoIHNraW5JbmRleCApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBza2luRGVmID0gdGhpcy5qc29uLnNraW5zWyBza2luSW5kZXggXTtcbiAgICBcbiAgICAgICAgICAgIHZhciBza2luRW50cnkgPSB7IGpvaW50czogc2tpbkRlZi5qb2ludHMgfTtcbiAgICBcbiAgICAgICAgICAgIGlmICggc2tpbkRlZi5pbnZlcnNlQmluZE1hdHJpY2VzID09PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSggc2tpbkVudHJ5ICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXREZXBlbmRlbmN5KCAnYWNjZXNzb3InLCBza2luRGVmLmludmVyc2VCaW5kTWF0cmljZXMgKS50aGVuKCBmdW5jdGlvbiAoIGFjY2Vzc29yICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHNraW5FbnRyeS5pbnZlcnNlQmluZE1hdHJpY2VzID0gYWNjZXNzb3I7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNraW5FbnRyeTtcbiAgICBcbiAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMCNhbmltYXRpb25zXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhbmltYXRpb25JbmRleFxuICAgICAgICAgKiBAcmV0dXJuIHtQcm9taXNlPFRIUkVFLkFuaW1hdGlvbkNsaXA+fVxuICAgICAgICAgKi9cbiAgICAgICAgR0xURlBhcnNlci5wcm90b3R5cGUubG9hZEFuaW1hdGlvbiA9IGZ1bmN0aW9uICggYW5pbWF0aW9uSW5kZXggKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIganNvbiA9IHRoaXMuanNvbjtcbiAgICBcbiAgICAgICAgICAgIHZhciBhbmltYXRpb25EZWYgPSB0aGlzLmpzb24uYW5pbWF0aW9uc1sgYW5pbWF0aW9uSW5kZXggXTtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE11bHRpRGVwZW5kZW5jaWVzKCBbXG4gICAgXG4gICAgICAgICAgICAgICAgJ2FjY2Vzc29yJyxcbiAgICAgICAgICAgICAgICAnbm9kZSdcbiAgICBcbiAgICAgICAgICAgIF0gKS50aGVuKCBmdW5jdGlvbiAoIGRlcGVuZGVuY2llcyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgdHJhY2tzID0gW107XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBpbCA9IGFuaW1hdGlvbkRlZi5jaGFubmVscy5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoYW5uZWwgPSBhbmltYXRpb25EZWYuY2hhbm5lbHNbIGkgXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNhbXBsZXIgPSBhbmltYXRpb25EZWYuc2FtcGxlcnNbIGNoYW5uZWwuc2FtcGxlciBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIHNhbXBsZXIgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gY2hhbm5lbC50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IHRhcmdldC5ub2RlICE9PSB1bmRlZmluZWQgPyB0YXJnZXQubm9kZSA6IHRhcmdldC5pZDsgLy8gTk9URTogdGFyZ2V0LmlkIGlzIGRlcHJlY2F0ZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSBhbmltYXRpb25EZWYucGFyYW1ldGVycyAhPT0gdW5kZWZpbmVkID8gYW5pbWF0aW9uRGVmLnBhcmFtZXRlcnNbIHNhbXBsZXIuaW5wdXQgXSA6IHNhbXBsZXIuaW5wdXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3V0cHV0ID0gYW5pbWF0aW9uRGVmLnBhcmFtZXRlcnMgIT09IHVuZGVmaW5lZCA/IGFuaW1hdGlvbkRlZi5wYXJhbWV0ZXJzWyBzYW1wbGVyLm91dHB1dCBdIDogc2FtcGxlci5vdXRwdXQ7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXRBY2Nlc3NvciA9IGRlcGVuZGVuY2llcy5hY2Nlc3NvcnNbIGlucHV0IF07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3V0cHV0QWNjZXNzb3IgPSBkZXBlbmRlbmNpZXMuYWNjZXNzb3JzWyBvdXRwdXQgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub2RlID0gZGVwZW5kZW5jaWVzLm5vZGVzWyBuYW1lIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIG5vZGUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS51cGRhdGVNYXRyaXgoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLm1hdHJpeEF1dG9VcGRhdGUgPSB0cnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBUeXBlZEtleWZyYW1lVHJhY2s7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggUEFUSF9QUk9QRVJUSUVTWyB0YXJnZXQucGF0aCBdICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFBBVEhfUFJPUEVSVElFUy53ZWlnaHRzOlxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHlwZWRLZXlmcmFtZVRyYWNrID0gVEhSRUUuTnVtYmVyS2V5ZnJhbWVUcmFjaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFBBVEhfUFJPUEVSVElFUy5yb3RhdGlvbjpcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR5cGVkS2V5ZnJhbWVUcmFjayA9IFRIUkVFLlF1YXRlcm5pb25LZXlmcmFtZVRyYWNrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgUEFUSF9QUk9QRVJUSUVTLnBvc2l0aW9uOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFBBVEhfUFJPUEVSVElFUy5zY2FsZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR5cGVkS2V5ZnJhbWVUcmFjayA9IFRIUkVFLlZlY3RvcktleWZyYW1lVHJhY2s7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldE5hbWUgPSBub2RlLm5hbWUgPyBub2RlLm5hbWUgOiBub2RlLnV1aWQ7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGludGVycG9sYXRpb24gPSBzYW1wbGVyLmludGVycG9sYXRpb24gIT09IHVuZGVmaW5lZCA/IElOVEVSUE9MQVRJT05bIHNhbXBsZXIuaW50ZXJwb2xhdGlvbiBdIDogVEhSRUUuSW50ZXJwb2xhdGVMaW5lYXI7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldE5hbWVzID0gW107XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBQQVRIX1BST1BFUlRJRVNbIHRhcmdldC5wYXRoIF0gPT09IFBBVEhfUFJPUEVSVElFUy53ZWlnaHRzICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBub2RlIHNob3VsZCBiZSBUSFJFRS5Hcm91cCBoZXJlIGJ1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQQVRIX1BST1BFUlRJRVMud2VpZ2h0cyhtb3JwaFRhcmdldEluZmx1ZW5jZXMpIHNob3VsZCBiZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcHJvcGVydHkgb2YgYSBtZXNoIG9iamVjdCB1bmRlciBub2RlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTbyBmaW5kaW5nIHRhcmdldHMgaGVyZS5cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS50cmF2ZXJzZSggZnVuY3Rpb24gKCBvYmplY3QgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIG9iamVjdC5pc01lc2ggPT09IHRydWUgJiYgb2JqZWN0Lm1hdGVyaWFsLm1vcnBoVGFyZ2V0cyA9PT0gdHJ1ZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXROYW1lcy5wdXNoKCBvYmplY3QubmFtZSA/IG9iamVjdC5uYW1lIDogb2JqZWN0LnV1aWQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldE5hbWVzLnB1c2goIHRhcmdldE5hbWUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gS2V5ZnJhbWVUcmFjay5vcHRpbWl6ZSgpIHdpbGwgbW9kaWZ5IGdpdmVuICd0aW1lcycgYW5kICd2YWx1ZXMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnVmZmVycyBiZWZvcmUgY3JlYXRpbmcgYSB0cnVuY2F0ZWQgY29weSB0byBrZWVwLiBCZWNhdXNlIGJ1ZmZlcnMgbWF5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmUgcmV1c2VkIGJ5IG90aGVyIHRyYWNrcywgbWFrZSBjb3BpZXMgaGVyZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaiA9IDAsIGpsID0gdGFyZ2V0TmFtZXMubGVuZ3RoOyBqIDwgamw7IGogKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmFjayA9IG5ldyBUeXBlZEtleWZyYW1lVHJhY2soXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXROYW1lc1sgaiBdICsgJy4nICsgUEFUSF9QUk9QRVJUSUVTWyB0YXJnZXQucGF0aCBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVEhSRUUuQW5pbWF0aW9uVXRpbHMuYXJyYXlTbGljZSggaW5wdXRBY2Nlc3Nvci5hcnJheSwgMCApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVEhSRUUuQW5pbWF0aW9uVXRpbHMuYXJyYXlTbGljZSggb3V0cHV0QWNjZXNzb3IuYXJyYXksIDAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVycG9sYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSGVyZSBpcyB0aGUgdHJpY2sgdG8gZW5hYmxlIGN1c3RvbSBpbnRlcnBvbGF0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPdmVycmlkZXMgLmNyZWF0ZUludGVycG9sYW50IGluIGEgZmFjdG9yeSBtZXRob2Qgd2hpY2ggY3JlYXRlcyBjdXN0b20gaW50ZXJwb2xhdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBzYW1wbGVyLmludGVycG9sYXRpb24gPT09ICdDVUJJQ1NQTElORScgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFjay5jcmVhdGVJbnRlcnBvbGFudCA9IGZ1bmN0aW9uICggcmVzdWx0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEEgQ1VCSUNTUExJTkUga2V5ZnJhbWUgaW4gZ2xURiBoYXMgdGhyZWUgb3V0cHV0IHZhbHVlcyBmb3IgZWFjaCBpbnB1dCB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXByZXNlbnRpbmcgaW5UYW5nZW50LCBzcGxpbmVWZXJ0ZXgsIGFuZCBvdXRUYW5nZW50LiBBcyBhIHJlc3VsdCwgdHJhY2suZ2V0VmFsdWVTaXplKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtdXN0IGJlIGRpdmlkZWQgYnkgdGhyZWUgdG8gZ2V0IHRoZSBpbnRlcnBvbGFudCdzIHNhbXBsZVNpemUgYXJndW1lbnQuXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBHTFRGQ3ViaWNTcGxpbmVJbnRlcnBvbGFudCggdGhpcy50aW1lcywgdGhpcy52YWx1ZXMsIHRoaXMuZ2V0VmFsdWVTaXplKCkgLyAzLCByZXN1bHQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tzLnB1c2goIHRyYWNrICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHZhciBuYW1lID0gYW5pbWF0aW9uRGVmLm5hbWUgIT09IHVuZGVmaW5lZCA/IGFuaW1hdGlvbkRlZi5uYW1lIDogJ2FuaW1hdGlvbl8nICsgYW5pbWF0aW9uSW5kZXg7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUSFJFRS5BbmltYXRpb25DbGlwKCBuYW1lLCB1bmRlZmluZWQsIHRyYWNrcyApO1xuICAgIFxuICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICB9O1xuICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL3NwZWNpZmljYXRpb24vMi4wI25vZGVzLWFuZC1oaWVyYXJjaHlcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IG5vZGVJbmRleFxuICAgICAgICAgKiBAcmV0dXJuIHtQcm9taXNlPFRIUkVFLk9iamVjdDNEPn1cbiAgICAgICAgICovXG4gICAgICAgIEdMVEZQYXJzZXIucHJvdG90eXBlLmxvYWROb2RlID0gZnVuY3Rpb24gKCBub2RlSW5kZXggKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIganNvbiA9IHRoaXMuanNvbjtcbiAgICAgICAgICAgIHZhciBleHRlbnNpb25zID0gdGhpcy5leHRlbnNpb25zO1xuICAgIFxuICAgICAgICAgICAgdmFyIG1lc2hSZWZlcmVuY2VzID0gdGhpcy5qc29uLm1lc2hSZWZlcmVuY2VzO1xuICAgICAgICAgICAgdmFyIG1lc2hVc2VzID0gdGhpcy5qc29uLm1lc2hVc2VzO1xuICAgIFxuICAgICAgICAgICAgdmFyIG5vZGVEZWYgPSB0aGlzLmpzb24ubm9kZXNbIG5vZGVJbmRleCBdO1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TXVsdGlEZXBlbmRlbmNpZXMoIFtcbiAgICBcbiAgICAgICAgICAgICAgICAnbWVzaCcsXG4gICAgICAgICAgICAgICAgJ3NraW4nLFxuICAgICAgICAgICAgICAgICdjYW1lcmEnXG4gICAgXG4gICAgICAgICAgICBdICkudGhlbiggZnVuY3Rpb24gKCBkZXBlbmRlbmNpZXMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIG5vZGU7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBub2RlRGVmLmlzQm9uZSA9PT0gdHJ1ZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5ldyBUSFJFRS5Cb25lKCk7XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggbm9kZURlZi5tZXNoICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNoID0gZGVwZW5kZW5jaWVzLm1lc2hlc1sgbm9kZURlZi5tZXNoIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBtZXNoLmNsb25lKCk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIGZvciBTcGVjdWxhci1HbG9zc2luZXNzXG4gICAgICAgICAgICAgICAgICAgIGlmICggbWVzaC5pc0dyb3VwID09PSB0cnVlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBpbCA9IG1lc2guY2hpbGRyZW4ubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0gbWVzaC5jaGlsZHJlblsgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQubWF0ZXJpYWwgJiYgY2hpbGQubWF0ZXJpYWwuaXNHTFRGU3BlY3VsYXJHbG9zc2luZXNzTWF0ZXJpYWwgPT09IHRydWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuY2hpbGRyZW5bIGkgXS5vbkJlZm9yZVJlbmRlciA9IGNoaWxkLm9uQmVmb3JlUmVuZGVyO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggbWVzaC5tYXRlcmlhbCAmJiBtZXNoLm1hdGVyaWFsLmlzR0xURlNwZWN1bGFyR2xvc3NpbmVzc01hdGVyaWFsID09PSB0cnVlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUub25CZWZvcmVSZW5kZXIgPSBtZXNoLm9uQmVmb3JlUmVuZGVyO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggbWVzaFJlZmVyZW5jZXNbIG5vZGVEZWYubWVzaCBdID4gMSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUubmFtZSArPSAnX2luc3RhbmNlXycgKyBtZXNoVXNlc1sgbm9kZURlZi5tZXNoIF0gKys7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBub2RlRGVmLmNhbWVyYSAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBub2RlID0gZGVwZW5kZW5jaWVzLmNhbWVyYXNbIG5vZGVEZWYuY2FtZXJhIF07XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggbm9kZURlZi5leHRlbnNpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgJiYgbm9kZURlZi5leHRlbnNpb25zWyBFWFRFTlNJT05TLktIUl9MSUdIVFMgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICYmIG5vZGVEZWYuZXh0ZW5zaW9uc1sgRVhURU5TSU9OUy5LSFJfTElHSFRTIF0ubGlnaHQgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxpZ2h0cyA9IGV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX0xJR0hUUyBdLmxpZ2h0cztcbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IGxpZ2h0c1sgbm9kZURlZi5leHRlbnNpb25zWyBFWFRFTlNJT05TLktIUl9MSUdIVFMgXS5saWdodCBdO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBuZXcgVEhSRUUuT2JqZWN0M0QoKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBub2RlRGVmLm5hbWUgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5uYW1lID0gVEhSRUUuUHJvcGVydHlCaW5kaW5nLnNhbml0aXplTm9kZU5hbWUoIG5vZGVEZWYubmFtZSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIG5vZGVEZWYuZXh0cmFzICkgbm9kZS51c2VyRGF0YSA9IG5vZGVEZWYuZXh0cmFzO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggbm9kZURlZi5tYXRyaXggIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBUSFJFRS5NYXRyaXg0KCk7XG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeC5mcm9tQXJyYXkoIG5vZGVEZWYubWF0cml4ICk7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuYXBwbHlNYXRyaXgoIG1hdHJpeCApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggbm9kZURlZi50cmFuc2xhdGlvbiAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5wb3NpdGlvbi5mcm9tQXJyYXkoIG5vZGVEZWYudHJhbnNsYXRpb24gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIG5vZGVEZWYucm90YXRpb24gIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUucXVhdGVybmlvbi5mcm9tQXJyYXkoIG5vZGVEZWYucm90YXRpb24gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIG5vZGVEZWYuc2NhbGUgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuc2NhbGUuZnJvbUFycmF5KCBub2RlRGVmLnNjYWxlICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgXG4gICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAjc2NlbmVzXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzY2VuZUluZGV4XG4gICAgICAgICAqIEByZXR1cm4ge1Byb21pc2U8VEhSRUUuU2NlbmU+fVxuICAgICAgICAgKi9cbiAgICAgICAgR0xURlBhcnNlci5wcm90b3R5cGUubG9hZFNjZW5lID0gZnVuY3Rpb24gKCkge1xuICAgIFxuICAgICAgICAgICAgLy8gc2NlbmUgbm9kZSBoaWVyYWNoeSBidWlsZGVyXG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBidWlsZE5vZGVIaWVyYWNoeSggbm9kZUlkLCBwYXJlbnRPYmplY3QsIGpzb24sIGFsbE5vZGVzLCBza2lucyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IGFsbE5vZGVzWyBub2RlSWQgXTtcbiAgICAgICAgICAgICAgICB2YXIgbm9kZURlZiA9IGpzb24ubm9kZXNbIG5vZGVJZCBdO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIGJ1aWxkIHNrZWxldG9uIGhlcmUgYXMgd2VsbFxuICAgIFxuICAgICAgICAgICAgICAgIGlmICggbm9kZURlZi5za2luICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNoZXMgPSBub2RlLmlzR3JvdXAgPT09IHRydWUgPyBub2RlLmNoaWxkcmVuIDogWyBub2RlIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgaWwgPSBtZXNoZXMubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVzaCA9IG1lc2hlc1sgaSBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNraW5FbnRyeSA9IHNraW5zWyBub2RlRGVmLnNraW4gXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVJbnZlcnNlcyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGogPSAwLCBqbCA9IHNraW5FbnRyeS5qb2ludHMubGVuZ3RoOyBqIDwgamw7IGogKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGpvaW50SWQgPSBza2luRW50cnkuam9pbnRzWyBqIF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGpvaW50Tm9kZSA9IGFsbE5vZGVzWyBqb2ludElkIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBqb2ludE5vZGUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVzLnB1c2goIGpvaW50Tm9kZSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF0ID0gbmV3IFRIUkVFLk1hdHJpeDQoKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBza2luRW50cnkuaW52ZXJzZUJpbmRNYXRyaWNlcyAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0LmZyb21BcnJheSggc2tpbkVudHJ5LmludmVyc2VCaW5kTWF0cmljZXMuYXJyYXksIGogKiAxNiApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbnZlcnNlcy5wdXNoKCBtYXQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oICdUSFJFRS5HTFRGTG9hZGVyOiBKb2ludCBcIiVzXCIgY291bGQgbm90IGJlIGZvdW5kLicsIGpvaW50SWQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNoLmJpbmQoIG5ldyBUSFJFRS5Ta2VsZXRvbiggYm9uZXMsIGJvbmVJbnZlcnNlcyApLCBtZXNoLm1hdHJpeFdvcmxkICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gYnVpbGQgbm9kZSBoaWVyYWNoeVxuICAgIFxuICAgICAgICAgICAgICAgIHBhcmVudE9iamVjdC5hZGQoIG5vZGUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIG5vZGVEZWYuY2hpbGRyZW4gKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IG5vZGVEZWYuY2hpbGRyZW47XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgaWwgPSBjaGlsZHJlbi5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IGNoaWxkcmVuWyBpIF07XG4gICAgICAgICAgICAgICAgICAgICAgICBidWlsZE5vZGVIaWVyYWNoeSggY2hpbGQsIG5vZGUsIGpzb24sIGFsbE5vZGVzLCBza2lucyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGxvYWRTY2VuZSggc2NlbmVJbmRleCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIganNvbiA9IHRoaXMuanNvbjtcbiAgICAgICAgICAgICAgICB2YXIgZXh0ZW5zaW9ucyA9IHRoaXMuZXh0ZW5zaW9ucztcbiAgICAgICAgICAgICAgICB2YXIgc2NlbmVEZWYgPSB0aGlzLmpzb24uc2NlbmVzWyBzY2VuZUluZGV4IF07XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TXVsdGlEZXBlbmRlbmNpZXMoIFtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgJ25vZGUnLFxuICAgICAgICAgICAgICAgICAgICAnc2tpbidcbiAgICBcbiAgICAgICAgICAgICAgICBdICkudGhlbiggZnVuY3Rpb24gKCBkZXBlbmRlbmNpZXMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBzY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIHNjZW5lRGVmLm5hbWUgIT09IHVuZGVmaW5lZCApIHNjZW5lLm5hbWUgPSBzY2VuZURlZi5uYW1lO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIHNjZW5lRGVmLmV4dHJhcyApIHNjZW5lLnVzZXJEYXRhID0gc2NlbmVEZWYuZXh0cmFzO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZUlkcyA9IHNjZW5lRGVmLm5vZGVzIHx8IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGlsID0gbm9kZUlkcy5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkTm9kZUhpZXJhY2h5KCBub2RlSWRzWyBpIF0sIHNjZW5lLCBqc29uLCBkZXBlbmRlbmNpZXMubm9kZXMsIGRlcGVuZGVuY2llcy5za2lucyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIEFtYmllbnQgbGlnaHRpbmcsIGlmIHByZXNlbnQsIGlzIGFsd2F5cyBhdHRhY2hlZCB0byB0aGUgc2NlbmUgcm9vdC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCBzY2VuZURlZi5leHRlbnNpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIHNjZW5lRGVmLmV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX0xJR0hUUyBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIHNjZW5lRGVmLmV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX0xJR0hUUyBdLmxpZ2h0ICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlnaHRzID0gZXh0ZW5zaW9uc1sgRVhURU5TSU9OUy5LSFJfTElHSFRTIF0ubGlnaHRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmUuYWRkKCBsaWdodHNbIHNjZW5lRGVmLmV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX0xJR0hUUyBdLmxpZ2h0IF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2NlbmU7XG4gICAgXG4gICAgICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgfSgpO1xuICAgIFxuICAgICAgICByZXR1cm4gR0xURkxvYWRlcjtcbiAgICBcbiAgICB9ICkoKTsiLCIvKipcbiAqIEBhdXRob3IgS3lsZS1MYXJzb24gaHR0cHM6Ly9naXRodWIuY29tL0t5bGUtTGFyc29uXG4gKiBAYXV0aG9yIFRha2FoaXJvIGh0dHBzOi8vZ2l0aHViLmNvbS90YWthaGlyb3hcbiAqIEBhdXRob3IgTGV3eSBCbHVlIGh0dHBzOi8vZ2l0aHViLmNvbS9sb29lZWVcbiAqXG4gKiBMb2FkZXIgbG9hZHMgRkJYIGZpbGUgYW5kIGdlbmVyYXRlcyBHcm91cCByZXByZXNlbnRpbmcgRkJYIHNjZW5lLlxuICogUmVxdWlyZXMgRkJYIGZpbGUgdG8gYmUgPj0gNy4wIGFuZCBpbiBBU0NJSSBvciB0byBiZSBhbnkgdmVyc2lvbiBpbiBCaW5hcnkgZm9ybWF0LlxuICpcbiAqIFN1cHBvcnRzOlxuICogXHRNZXNoIEdlbmVyYXRpb24gKFBvc2l0aW9uYWwgRGF0YSlcbiAqIFx0Tm9ybWFsIERhdGEgKFBlciBWZXJ0ZXggRHJhd2luZyBJbnN0YW5jZSlcbiAqXHRVViBEYXRhIChQZXIgVmVydGV4IERyYXdpbmcgSW5zdGFuY2UpXG4gKlx0U2tpbm5pbmdcbiAqXHRBbmltYXRpb25cbiAqIFx0LSBTZXBhcmF0ZWQgQW5pbWF0aW9ucyBiYXNlZCBvbiBzdGFja3MuXG4gKiBcdC0gU2tlbGV0YWwgJiBOb24tU2tlbGV0YWwgQW5pbWF0aW9uc1xuICpcdE5VUkJTIChPcGVuLCBDbG9zZWQgYW5kIFBlcmlvZGljIGZvcm1zKVxuICpcbiAqIE5lZWRzIFN1cHBvcnQ6XG4gKlx0RXVsZXIgcm90YXRpb24gb3JkZXJcbiAqXG4gKlxuICogRkJYIGZvcm1hdCByZWZlcmVuY2VzOlxuICogXHRodHRwczovL3dpa2kuYmxlbmRlci5vcmcvaW5kZXgucGhwL1VzZXI6TW9udDI5L0ZvdW5kYXRpb24vRkJYX0ZpbGVfU3RydWN0dXJlXG4gKlxuICogXHRCaW5hcnkgZm9ybWF0IHNwZWNpZmljYXRpb246XG4gKlx0XHRodHRwczovL2NvZGUuYmxlbmRlci5vcmcvMjAxMy8wOC9mYngtYmluYXJ5LWZpbGUtZm9ybWF0LXNwZWNpZmljYXRpb24vXG4gKlx0XHRodHRwczovL3dpa2kucm9naWtlbi5vcmcvc3BlY2lmaWNhdGlvbnMvZmlsZS1mb3JtYXQvZmJ4LyAobW9yZSBkZXRhaWwgYnV0IEphcGFuZXNlKVxuICovXG5cbiggZnVuY3Rpb24gKCkge1xuICAgIFxuICAgICAgICBUSFJFRS5GQlhMb2FkZXIgPSBmdW5jdGlvbiAoIG1hbmFnZXIgKSB7XG4gICAgXG4gICAgICAgICAgICB0aGlzLm1hbmFnZXIgPSAoIG1hbmFnZXIgIT09IHVuZGVmaW5lZCApID8gbWFuYWdlciA6IFRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcjtcbiAgICBcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgT2JqZWN0LmFzc2lnbiggVEhSRUUuRkJYTG9hZGVyLnByb3RvdHlwZSwge1xuICAgIFxuICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24gKCB1cmwsIG9uTG9hZCwgb25Qcm9ncmVzcywgb25FcnJvciApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHJlc291cmNlRGlyZWN0b3J5ID0gVEhSRUUuTG9hZGVyVXRpbHMuZXh0cmFjdFVybEJhc2UoIHVybCApO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBsb2FkZXIgPSBuZXcgVEhSRUUuRmlsZUxvYWRlciggdGhpcy5tYW5hZ2VyICk7XG4gICAgICAgICAgICAgICAgbG9hZGVyLnNldFJlc3BvbnNlVHlwZSggJ2FycmF5YnVmZmVyJyApO1xuICAgICAgICAgICAgICAgIGxvYWRlci5sb2FkKCB1cmwsIGZ1bmN0aW9uICggYnVmZmVyICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNjZW5lID0gc2VsZi5wYXJzZSggYnVmZmVyLCByZXNvdXJjZURpcmVjdG9yeSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgb25Mb2FkKCBzY2VuZSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICggZXJyb3IgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24gKCkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggb25FcnJvciApIG9uRXJyb3IoIGVycm9yICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5tYW5hZ2VyLml0ZW1FcnJvciggdXJsICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAwICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9LCBvblByb2dyZXNzLCBvbkVycm9yICk7XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgcGFyc2U6IGZ1bmN0aW9uICggRkJYQnVmZmVyLCByZXNvdXJjZURpcmVjdG9yeSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgRkJYVHJlZTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGlzRmJ4Rm9ybWF0QmluYXJ5KCBGQlhCdWZmZXIgKSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgRkJYVHJlZSA9IG5ldyBCaW5hcnlQYXJzZXIoKS5wYXJzZSggRkJYQnVmZmVyICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIEZCWFRleHQgPSBjb252ZXJ0QXJyYXlCdWZmZXJUb1N0cmluZyggRkJYQnVmZmVyICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggISBpc0ZieEZvcm1hdEFTQ0lJKCBGQlhUZXh0ICkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoICdUSFJFRS5GQlhMb2FkZXI6IFVua25vd24gZm9ybWF0LicgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGdldEZieFZlcnNpb24oIEZCWFRleHQgKSA8IDcwMDAgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoICdUSFJFRS5GQlhMb2FkZXI6IEZCWCB2ZXJzaW9uIG5vdCBzdXBwb3J0ZWQsIEZpbGVWZXJzaW9uOiAnICsgZ2V0RmJ4VmVyc2lvbiggRkJYVGV4dCApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgRkJYVHJlZSA9IG5ldyBUZXh0UGFyc2VyKCkucGFyc2UoIEZCWFRleHQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIEZCWFRyZWUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgY29ubmVjdGlvbnMgPSBwYXJzZUNvbm5lY3Rpb25zKCBGQlhUcmVlICk7XG4gICAgICAgICAgICAgICAgdmFyIGltYWdlcyA9IHBhcnNlSW1hZ2VzKCBGQlhUcmVlICk7XG4gICAgICAgICAgICAgICAgdmFyIHRleHR1cmVzID0gcGFyc2VUZXh0dXJlcyggRkJYVHJlZSwgbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoIHRoaXMubWFuYWdlciApLnNldFBhdGgoIHJlc291cmNlRGlyZWN0b3J5ICksIGltYWdlcywgY29ubmVjdGlvbnMgKTtcbiAgICAgICAgICAgICAgICB2YXIgbWF0ZXJpYWxzID0gcGFyc2VNYXRlcmlhbHMoIEZCWFRyZWUsIHRleHR1cmVzLCBjb25uZWN0aW9ucyApO1xuICAgICAgICAgICAgICAgIHZhciBza2VsZXRvbnMgPSBwYXJzZURlZm9ybWVycyggRkJYVHJlZSwgY29ubmVjdGlvbnMgKTtcbiAgICAgICAgICAgICAgICB2YXIgZ2VvbWV0cnlNYXAgPSBwYXJzZUdlb21ldHJpZXMoIEZCWFRyZWUsIGNvbm5lY3Rpb25zLCBza2VsZXRvbnMgKTtcbiAgICAgICAgICAgICAgICB2YXIgc2NlbmVHcmFwaCA9IHBhcnNlU2NlbmUoIEZCWFRyZWUsIGNvbm5lY3Rpb25zLCBza2VsZXRvbnMsIGdlb21ldHJ5TWFwLCBtYXRlcmlhbHMgKTtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gc2NlbmVHcmFwaDtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAvLyBQYXJzZXMgRkJYVHJlZS5Db25uZWN0aW9ucyB3aGljaCBob2xkcyBwYXJlbnQtY2hpbGQgY29ubmVjdGlvbnMgYmV0d2VlbiBvYmplY3RzIChlLmcuIG1hdGVyaWFsIC0+IHRleHR1cmUsIG1vZGVsLT5nZW9tZXRyeSApXG4gICAgICAgIC8vIGFuZCBkZXRhaWxzIHRoZSBjb25uZWN0aW9uIHR5cGVcbiAgICAgICAgZnVuY3Rpb24gcGFyc2VDb25uZWN0aW9ucyggRkJYVHJlZSApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBjb25uZWN0aW9uTWFwID0gbmV3IE1hcCgpO1xuICAgIFxuICAgICAgICAgICAgaWYgKCAnQ29ubmVjdGlvbnMnIGluIEZCWFRyZWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHJhd0Nvbm5lY3Rpb25zID0gRkJYVHJlZS5Db25uZWN0aW9ucy5jb25uZWN0aW9ucztcbiAgICBcbiAgICAgICAgICAgICAgICByYXdDb25uZWN0aW9ucy5mb3JFYWNoKCBmdW5jdGlvbiAoIHJhd0Nvbm5lY3Rpb24gKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBmcm9tSUQgPSByYXdDb25uZWN0aW9uWyAwIF07XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b0lEID0gcmF3Q29ubmVjdGlvblsgMSBdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVsYXRpb25zaGlwID0gcmF3Q29ubmVjdGlvblsgMiBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoICEgY29ubmVjdGlvbk1hcC5oYXMoIGZyb21JRCApICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbk1hcC5zZXQoIGZyb21JRCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudHM6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnRSZWxhdGlvbnNoaXAgPSB7IElEOiB0b0lELCByZWxhdGlvbnNoaXA6IHJlbGF0aW9uc2hpcCB9O1xuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uTWFwLmdldCggZnJvbUlEICkucGFyZW50cy5wdXNoKCBwYXJlbnRSZWxhdGlvbnNoaXAgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhIGNvbm5lY3Rpb25NYXAuaGFzKCB0b0lEICkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uTWFwLnNldCggdG9JRCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudHM6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZFJlbGF0aW9uc2hpcCA9IHsgSUQ6IGZyb21JRCwgcmVsYXRpb25zaGlwOiByZWxhdGlvbnNoaXAgfTtcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbk1hcC5nZXQoIHRvSUQgKS5jaGlsZHJlbi5wdXNoKCBjaGlsZFJlbGF0aW9uc2hpcCApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uTWFwO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIFBhcnNlIEZCWFRyZWUuT2JqZWN0cy5WaWRlbyBmb3IgZW1iZWRkZWQgaW1hZ2UgZGF0YVxuICAgICAgICAvLyBUaGVzZSBpbWFnZXMgYXJlIGNvbm5lY3RlZCB0byB0ZXh0dXJlcyBpbiBGQlhUcmVlLk9iamVjdHMuVGV4dHVyZXNcbiAgICAgICAgLy8gdmlhIEZCWFRyZWUuQ29ubmVjdGlvbnMuXG4gICAgICAgIGZ1bmN0aW9uIHBhcnNlSW1hZ2VzKCBGQlhUcmVlICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIGltYWdlcyA9IHt9O1xuICAgICAgICAgICAgdmFyIGJsb2JzID0ge307XG4gICAgXG4gICAgICAgICAgICBpZiAoICdWaWRlbycgaW4gRkJYVHJlZS5PYmplY3RzICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciB2aWRlb05vZGVzID0gRkJYVHJlZS5PYmplY3RzLlZpZGVvO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBub2RlSUQgaW4gdmlkZW9Ob2RlcyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZpZGVvTm9kZSA9IHZpZGVvTm9kZXNbIG5vZGVJRCBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSBwYXJzZUludCggbm9kZUlEICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGltYWdlc1sgaWQgXSA9IHZpZGVvTm9kZS5GaWxlbmFtZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gcmF3IGltYWdlIGRhdGEgaXMgaW4gdmlkZW9Ob2RlLkNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAnQ29udGVudCcgaW4gdmlkZW9Ob2RlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFycmF5QnVmZmVyQ29udGVudCA9ICggdmlkZW9Ob2RlLkNvbnRlbnQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciApICYmICggdmlkZW9Ob2RlLkNvbnRlbnQuYnl0ZUxlbmd0aCA+IDAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiYXNlNjRDb250ZW50ID0gKCB0eXBlb2YgdmlkZW9Ob2RlLkNvbnRlbnQgPT09ICdzdHJpbmcnICkgJiYgKCB2aWRlb05vZGUuQ29udGVudCAhPT0gJycgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggYXJyYXlCdWZmZXJDb250ZW50IHx8IGJhc2U2NENvbnRlbnQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltYWdlID0gcGFyc2VJbWFnZSggdmlkZW9Ob2Rlc1sgbm9kZUlEIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ic1sgdmlkZW9Ob2RlLkZpbGVuYW1lIF0gPSBpbWFnZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZvciAoIHZhciBpZCBpbiBpbWFnZXMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGZpbGVuYW1lID0gaW1hZ2VzWyBpZCBdO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggYmxvYnNbIGZpbGVuYW1lIF0gIT09IHVuZGVmaW5lZCApIGltYWdlc1sgaWQgXSA9IGJsb2JzWyBmaWxlbmFtZSBdO1xuICAgICAgICAgICAgICAgIGVsc2UgaW1hZ2VzWyBpZCBdID0gaW1hZ2VzWyBpZCBdLnNwbGl0KCAnXFxcXCcgKS5wb3AoKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiBpbWFnZXM7XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gUGFyc2UgZW1iZWRkZWQgaW1hZ2UgZGF0YSBpbiBGQlhUcmVlLlZpZGVvLkNvbnRlbnRcbiAgICAgICAgZnVuY3Rpb24gcGFyc2VJbWFnZSggdmlkZW9Ob2RlICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSB2aWRlb05vZGUuQ29udGVudDtcbiAgICAgICAgICAgIHZhciBmaWxlTmFtZSA9IHZpZGVvTm9kZS5SZWxhdGl2ZUZpbGVuYW1lIHx8IHZpZGVvTm9kZS5GaWxlbmFtZTtcbiAgICAgICAgICAgIHZhciBleHRlbnNpb24gPSBmaWxlTmFtZS5zbGljZSggZmlsZU5hbWUubGFzdEluZGV4T2YoICcuJyApICsgMSApLnRvTG93ZXJDYXNlKCk7XG4gICAgXG4gICAgICAgICAgICB2YXIgdHlwZTtcbiAgICBcbiAgICAgICAgICAgIHN3aXRjaCAoIGV4dGVuc2lvbiApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBjYXNlICdibXAnOlxuICAgIFxuICAgICAgICAgICAgICAgICAgICB0eXBlID0gJ2ltYWdlL2JtcCc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgIGNhc2UgJ2pwZyc6XG4gICAgICAgICAgICAgICAgY2FzZSAnanBlZyc6XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSAnaW1hZ2UvanBlZyc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgIGNhc2UgJ3BuZyc6XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSAnaW1hZ2UvcG5nJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgY2FzZSAndGlmJzpcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9ICdpbWFnZS90aWZmJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCAnRkJYTG9hZGVyOiBJbWFnZSB0eXBlIFwiJyArIGV4dGVuc2lvbiArICdcIiBpcyBub3Qgc3VwcG9ydGVkLicgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgaWYgKCB0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycgKSB7IC8vIEFTQ0lJIGZvcm1hdFxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiAnZGF0YTonICsgdHlwZSArICc7YmFzZTY0LCcgKyBjb250ZW50O1xuICAgIFxuICAgICAgICAgICAgfSBlbHNlIHsgLy8gQmluYXJ5IEZvcm1hdFxuICAgIFxuICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IG5ldyBVaW50OEFycmF5KCBjb250ZW50ICk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKCBuZXcgQmxvYiggWyBhcnJheSBdLCB7IHR5cGU6IHR5cGUgfSApICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gUGFyc2Ugbm9kZXMgaW4gRkJYVHJlZS5PYmplY3RzLlRleHR1cmVcbiAgICAgICAgLy8gVGhlc2UgY29udGFpbiBkZXRhaWxzIHN1Y2ggYXMgVVYgc2NhbGluZywgY3JvcHBpbmcsIHJvdGF0aW9uIGV0YyBhbmQgYXJlIGNvbm5lY3RlZFxuICAgICAgICAvLyB0byBpbWFnZXMgaW4gRkJYVHJlZS5PYmplY3RzLlZpZGVvXG4gICAgICAgIGZ1bmN0aW9uIHBhcnNlVGV4dHVyZXMoIEZCWFRyZWUsIGxvYWRlciwgaW1hZ2VzLCBjb25uZWN0aW9ucyApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciB0ZXh0dXJlTWFwID0gbmV3IE1hcCgpO1xuICAgIFxuICAgICAgICAgICAgaWYgKCAnVGV4dHVyZScgaW4gRkJYVHJlZS5PYmplY3RzICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciB0ZXh0dXJlTm9kZXMgPSBGQlhUcmVlLk9iamVjdHMuVGV4dHVyZTtcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgbm9kZUlEIGluIHRleHR1cmVOb2RlcyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRleHR1cmUgPSBwYXJzZVRleHR1cmUoIHRleHR1cmVOb2Rlc1sgbm9kZUlEIF0sIGxvYWRlciwgaW1hZ2VzLCBjb25uZWN0aW9ucyApO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlTWFwLnNldCggcGFyc2VJbnQoIG5vZGVJRCApLCB0ZXh0dXJlICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIHRleHR1cmVNYXA7XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gUGFyc2UgaW5kaXZpZHVhbCBub2RlIGluIEZCWFRyZWUuT2JqZWN0cy5UZXh0dXJlXG4gICAgICAgIGZ1bmN0aW9uIHBhcnNlVGV4dHVyZSggdGV4dHVyZU5vZGUsIGxvYWRlciwgaW1hZ2VzLCBjb25uZWN0aW9ucyApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciB0ZXh0dXJlID0gbG9hZFRleHR1cmUoIHRleHR1cmVOb2RlLCBsb2FkZXIsIGltYWdlcywgY29ubmVjdGlvbnMgKTtcbiAgICBcbiAgICAgICAgICAgIHRleHR1cmUuSUQgPSB0ZXh0dXJlTm9kZS5pZDtcbiAgICBcbiAgICAgICAgICAgIHRleHR1cmUubmFtZSA9IHRleHR1cmVOb2RlLmF0dHJOYW1lO1xuICAgIFxuICAgICAgICAgICAgdmFyIHdyYXBNb2RlVSA9IHRleHR1cmVOb2RlLldyYXBNb2RlVTtcbiAgICAgICAgICAgIHZhciB3cmFwTW9kZVYgPSB0ZXh0dXJlTm9kZS5XcmFwTW9kZVY7XG4gICAgXG4gICAgICAgICAgICB2YXIgdmFsdWVVID0gd3JhcE1vZGVVICE9PSB1bmRlZmluZWQgPyB3cmFwTW9kZVUudmFsdWUgOiAwO1xuICAgICAgICAgICAgdmFyIHZhbHVlViA9IHdyYXBNb2RlViAhPT0gdW5kZWZpbmVkID8gd3JhcE1vZGVWLnZhbHVlIDogMDtcbiAgICBcbiAgICAgICAgICAgIC8vIGh0dHA6Ly9kb3dubG9hZC5hdXRvZGVzay5jb20vdXMvZmJ4L1NES2RvY3MvRkJYX1NES19IZWxwL2ZpbGVzL2ZieHNka3JlZi9jbGFzc19rX2ZieF90ZXh0dXJlLmh0bWwjODg5NjQwZTYzZTJlNjgxMjU5ZWE4MTA2MWI4NTE0M2FcbiAgICAgICAgICAgIC8vIDA6IHJlcGVhdChkZWZhdWx0KSwgMTogY2xhbXBcbiAgICBcbiAgICAgICAgICAgIHRleHR1cmUud3JhcFMgPSB2YWx1ZVUgPT09IDAgPyBUSFJFRS5SZXBlYXRXcmFwcGluZyA6IFRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmc7XG4gICAgICAgICAgICB0ZXh0dXJlLndyYXBUID0gdmFsdWVWID09PSAwID8gVEhSRUUuUmVwZWF0V3JhcHBpbmcgOiBUSFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nO1xuICAgIFxuICAgICAgICAgICAgaWYgKCAnU2NhbGluZycgaW4gdGV4dHVyZU5vZGUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlcyA9IHRleHR1cmVOb2RlLlNjYWxpbmcudmFsdWU7XG4gICAgXG4gICAgICAgICAgICAgICAgdGV4dHVyZS5yZXBlYXQueCA9IHZhbHVlc1sgMCBdO1xuICAgICAgICAgICAgICAgIHRleHR1cmUucmVwZWF0LnkgPSB2YWx1ZXNbIDEgXTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiB0ZXh0dXJlO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIGxvYWQgYSB0ZXh0dXJlIHNwZWNpZmllZCBhcyBhIGJsb2Igb3IgZGF0YSBVUkksIG9yIHZpYSBhbiBleHRlcm5hbCBVUkwgdXNpbmcgVEhSRUUuVGV4dHVyZUxvYWRlclxuICAgICAgICBmdW5jdGlvbiBsb2FkVGV4dHVyZSggdGV4dHVyZU5vZGUsIGxvYWRlciwgaW1hZ2VzLCBjb25uZWN0aW9ucyApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBmaWxlTmFtZTtcbiAgICBcbiAgICAgICAgICAgIHZhciBjdXJyZW50UGF0aCA9IGxvYWRlci5wYXRoO1xuICAgIFxuICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gY29ubmVjdGlvbnMuZ2V0KCB0ZXh0dXJlTm9kZS5pZCApLmNoaWxkcmVuO1xuICAgIFxuICAgICAgICAgICAgaWYgKCBjaGlsZHJlbiAhPT0gdW5kZWZpbmVkICYmIGNoaWxkcmVuLmxlbmd0aCA+IDAgJiYgaW1hZ2VzWyBjaGlsZHJlblsgMCBdLklEIF0gIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBmaWxlTmFtZSA9IGltYWdlc1sgY2hpbGRyZW5bIDAgXS5JRCBdO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggZmlsZU5hbWUuaW5kZXhPZiggJ2Jsb2I6JyApID09PSAwIHx8IGZpbGVOYW1lLmluZGV4T2YoICdkYXRhOicgKSA9PT0gMCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbG9hZGVyLnNldFBhdGgoIHVuZGVmaW5lZCApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHZhciB0ZXh0dXJlID0gbG9hZGVyLmxvYWQoIGZpbGVOYW1lICk7XG4gICAgXG4gICAgICAgICAgICBsb2FkZXIuc2V0UGF0aCggY3VycmVudFBhdGggKTtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiB0ZXh0dXJlO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIFBhcnNlIG5vZGVzIGluIEZCWFRyZWUuT2JqZWN0cy5NYXRlcmlhbFxuICAgICAgICBmdW5jdGlvbiBwYXJzZU1hdGVyaWFscyggRkJYVHJlZSwgdGV4dHVyZU1hcCwgY29ubmVjdGlvbnMgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgbWF0ZXJpYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgXG4gICAgICAgICAgICBpZiAoICdNYXRlcmlhbCcgaW4gRkJYVHJlZS5PYmplY3RzICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBtYXRlcmlhbE5vZGVzID0gRkJYVHJlZS5PYmplY3RzLk1hdGVyaWFsO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBub2RlSUQgaW4gbWF0ZXJpYWxOb2RlcyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGVyaWFsID0gcGFyc2VNYXRlcmlhbCggRkJYVHJlZSwgbWF0ZXJpYWxOb2Rlc1sgbm9kZUlEIF0sIHRleHR1cmVNYXAsIGNvbm5lY3Rpb25zICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggbWF0ZXJpYWwgIT09IG51bGwgKSBtYXRlcmlhbE1hcC5zZXQoIHBhcnNlSW50KCBub2RlSUQgKSwgbWF0ZXJpYWwgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gbWF0ZXJpYWxNYXA7XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gUGFyc2Ugc2luZ2xlIG5vZGUgaW4gRkJYVHJlZS5PYmplY3RzLk1hdGVyaWFsXG4gICAgICAgIC8vIE1hdGVyaWFscyBhcmUgY29ubmVjdGVkIHRvIHRleHR1cmUgbWFwcyBpbiBGQlhUcmVlLk9iamVjdHMuVGV4dHVyZXNcbiAgICAgICAgLy8gRkJYIGZvcm1hdCBjdXJyZW50bHkgb25seSBzdXBwb3J0cyBMYW1iZXJ0IGFuZCBQaG9uZyBzaGFkaW5nIG1vZGVsc1xuICAgICAgICBmdW5jdGlvbiBwYXJzZU1hdGVyaWFsKCBGQlhUcmVlLCBtYXRlcmlhbE5vZGUsIHRleHR1cmVNYXAsIGNvbm5lY3Rpb25zICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIElEID0gbWF0ZXJpYWxOb2RlLmlkO1xuICAgICAgICAgICAgdmFyIG5hbWUgPSBtYXRlcmlhbE5vZGUuYXR0ck5hbWU7XG4gICAgICAgICAgICB2YXIgdHlwZSA9IG1hdGVyaWFsTm9kZS5TaGFkaW5nTW9kZWw7XG4gICAgXG4gICAgICAgICAgICAvL0Nhc2Ugd2hlcmUgRkJYIHdyYXBzIHNoYWRpbmcgbW9kZWwgaW4gcHJvcGVydHkgb2JqZWN0LlxuICAgICAgICAgICAgaWYgKCB0eXBlb2YgdHlwZSA9PT0gJ29iamVjdCcgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdHlwZSA9IHR5cGUudmFsdWU7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAvLyBJZ25vcmUgdW51c2VkIG1hdGVyaWFscyB3aGljaCBkb24ndCBoYXZlIGFueSBjb25uZWN0aW9ucy5cbiAgICAgICAgICAgIGlmICggISBjb25uZWN0aW9ucy5oYXMoIElEICkgKSByZXR1cm4gbnVsbDtcbiAgICBcbiAgICAgICAgICAgIHZhciBwYXJhbWV0ZXJzID0gcGFyc2VQYXJhbWV0ZXJzKCBGQlhUcmVlLCBtYXRlcmlhbE5vZGUsIHRleHR1cmVNYXAsIElELCBjb25uZWN0aW9ucyApO1xuICAgIFxuICAgICAgICAgICAgdmFyIG1hdGVyaWFsO1xuICAgIFxuICAgICAgICAgICAgc3dpdGNoICggdHlwZS50b0xvd2VyQ2FzZSgpICkge1xuICAgIFxuICAgICAgICAgICAgICAgIGNhc2UgJ3Bob25nJzpcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbGFtYmVydCc6XG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWwoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCAnVEhSRUUuRkJYTG9hZGVyOiB1bmtub3duIG1hdGVyaWFsIHR5cGUgXCIlc1wiLiBEZWZhdWx0aW5nIHRvIE1lc2hQaG9uZ01hdGVyaWFsLicsIHR5cGUgKTtcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoIHsgY29sb3I6IDB4MzMwMGZmIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBtYXRlcmlhbC5zZXRWYWx1ZXMoIHBhcmFtZXRlcnMgKTtcbiAgICAgICAgICAgIG1hdGVyaWFsLm5hbWUgPSBuYW1lO1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuIG1hdGVyaWFsO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIFBhcnNlIEZCWCBtYXRlcmlhbCBhbmQgcmV0dXJuIHBhcmFtZXRlcnMgc3VpdGFibGUgZm9yIGEgdGhyZWUuanMgbWF0ZXJpYWxcbiAgICAgICAgLy8gQWxzbyBwYXJzZSB0aGUgdGV4dHVyZSBtYXAgYW5kIHJldHVybiBhbnkgdGV4dHVyZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBtYXRlcmlhbFxuICAgICAgICBmdW5jdGlvbiBwYXJzZVBhcmFtZXRlcnMoIEZCWFRyZWUsIHByb3BlcnRpZXMsIHRleHR1cmVNYXAsIElELCBjb25uZWN0aW9ucyApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBwYXJhbWV0ZXJzID0ge307XG4gICAgXG4gICAgICAgICAgICBpZiAoIHByb3BlcnRpZXMuQnVtcEZhY3RvciApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLmJ1bXBTY2FsZSA9IHByb3BlcnRpZXMuQnVtcEZhY3Rvci52YWx1ZTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICggcHJvcGVydGllcy5EaWZmdXNlICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMuY29sb3IgPSBuZXcgVEhSRUUuQ29sb3IoKS5mcm9tQXJyYXkoIHByb3BlcnRpZXMuRGlmZnVzZS52YWx1ZSApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCBwcm9wZXJ0aWVzLkRpc3BsYWNlbWVudEZhY3RvciApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLmRpc3BsYWNlbWVudFNjYWxlID0gcHJvcGVydGllcy5EaXNwbGFjZW1lbnRGYWN0b3IudmFsdWU7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIHByb3BlcnRpZXMuUmVmbGVjdGlvbkZhY3RvciApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLnJlZmxlY3Rpdml0eSA9IHByb3BlcnRpZXMuUmVmbGVjdGlvbkZhY3Rvci52YWx1ZTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICggcHJvcGVydGllcy5TcGVjdWxhciApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLnNwZWN1bGFyID0gbmV3IFRIUkVFLkNvbG9yKCkuZnJvbUFycmF5KCBwcm9wZXJ0aWVzLlNwZWN1bGFyLnZhbHVlICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIHByb3BlcnRpZXMuU2hpbmluZXNzICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMuc2hpbmluZXNzID0gcHJvcGVydGllcy5TaGluaW5lc3MudmFsdWU7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIHByb3BlcnRpZXMuRW1pc3NpdmUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycy5lbWlzc2l2ZSA9IG5ldyBUSFJFRS5Db2xvcigpLmZyb21BcnJheSggcHJvcGVydGllcy5FbWlzc2l2ZS52YWx1ZSApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCBwcm9wZXJ0aWVzLkVtaXNzaXZlRmFjdG9yICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMuZW1pc3NpdmVJbnRlbnNpdHkgPSBwYXJzZUZsb2F0KCBwcm9wZXJ0aWVzLkVtaXNzaXZlRmFjdG9yLnZhbHVlICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIHByb3BlcnRpZXMuT3BhY2l0eSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLm9wYWNpdHkgPSBwYXJzZUZsb2F0KCBwcm9wZXJ0aWVzLk9wYWNpdHkudmFsdWUgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICggcGFyYW1ldGVycy5vcGFjaXR5IDwgMS4wICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMudHJhbnNwYXJlbnQgPSB0cnVlO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgY29ubmVjdGlvbnMuZ2V0KCBJRCApLmNoaWxkcmVuLmZvckVhY2goIGZ1bmN0aW9uICggY2hpbGQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBjaGlsZC5yZWxhdGlvbnNoaXA7XG4gICAgXG4gICAgICAgICAgICAgICAgc3dpdGNoICggdHlwZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQnVtcCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLmJ1bXBNYXAgPSB0ZXh0dXJlTWFwLmdldCggY2hpbGQuSUQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjYXNlICdEaWZmdXNlQ29sb3InOlxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5tYXAgPSBnZXRUZXh0dXJlKCBGQlhUcmVlLCB0ZXh0dXJlTWFwLCBjaGlsZC5JRCwgY29ubmVjdGlvbnMgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjYXNlICdEaXNwbGFjZW1lbnRDb2xvcic6XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLmRpc3BsYWNlbWVudE1hcCA9IGdldFRleHR1cmUoIEZCWFRyZWUsIHRleHR1cmVNYXAsIGNoaWxkLklELCBjb25uZWN0aW9ucyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0VtaXNzaXZlQ29sb3InOlxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5lbWlzc2l2ZU1hcCA9IGdldFRleHR1cmUoIEZCWFRyZWUsIHRleHR1cmVNYXAsIGNoaWxkLklELCBjb25uZWN0aW9ucyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ05vcm1hbE1hcCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLm5vcm1hbE1hcCA9IGdldFRleHR1cmUoIEZCWFRyZWUsIHRleHR1cmVNYXAsIGNoaWxkLklELCBjb25uZWN0aW9ucyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1JlZmxlY3Rpb25Db2xvcic6XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLmVudk1hcCA9IGdldFRleHR1cmUoIEZCWFRyZWUsIHRleHR1cmVNYXAsIGNoaWxkLklELCBjb25uZWN0aW9ucyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5lbnZNYXAubWFwcGluZyA9IFRIUkVFLkVxdWlyZWN0YW5ndWxhclJlZmxlY3Rpb25NYXBwaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1NwZWN1bGFyQ29sb3InOlxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5zcGVjdWxhck1hcCA9IGdldFRleHR1cmUoIEZCWFRyZWUsIHRleHR1cmVNYXAsIGNoaWxkLklELCBjb25uZWN0aW9ucyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1RyYW5zcGFyZW50Q29sb3InOlxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5hbHBoYU1hcCA9IGdldFRleHR1cmUoIEZCWFRyZWUsIHRleHR1cmVNYXAsIGNoaWxkLklELCBjb25uZWN0aW9ucyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy50cmFuc3BhcmVudCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQW1iaWVudENvbG9yJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnU2hpbmluZXNzRXhwb25lbnQnOiAvLyBBS0EgZ2xvc3NpbmVzcyBtYXBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnU3BlY3VsYXJGYWN0b3InOiAvLyBBS0Egc3BlY3VsYXJMZXZlbFxuICAgICAgICAgICAgICAgICAgICBjYXNlICdWZWN0b3JEaXNwbGFjZW1lbnRDb2xvcic6IC8vIE5PVEU6IFNlZW1zIHRvIGJlIGEgY29weSBvZiBEaXNwbGFjZW1lbnRDb2xvclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCAnVEhSRUUuRkJYTG9hZGVyOiAlcyBtYXAgaXMgbm90IHN1cHBvcnRlZCBpbiB0aHJlZS5qcywgc2tpcHBpbmcgdGV4dHVyZS4nLCB0eXBlICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gcGFyYW1ldGVycztcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBnZXQgYSB0ZXh0dXJlIGZyb20gdGhlIHRleHR1cmVNYXAgZm9yIHVzZSBieSBhIG1hdGVyaWFsLlxuICAgICAgICBmdW5jdGlvbiBnZXRUZXh0dXJlKCBGQlhUcmVlLCB0ZXh0dXJlTWFwLCBpZCwgY29ubmVjdGlvbnMgKSB7XG4gICAgXG4gICAgICAgICAgICAvLyBpZiB0aGUgdGV4dHVyZSBpcyBhIGxheWVyZWQgdGV4dHVyZSwganVzdCB1c2UgdGhlIGZpcnN0IGxheWVyIGFuZCBpc3N1ZSBhIHdhcm5pbmdcbiAgICAgICAgICAgIGlmICggJ0xheWVyZWRUZXh0dXJlJyBpbiBGQlhUcmVlLk9iamVjdHMgJiYgaWQgaW4gRkJYVHJlZS5PYmplY3RzLkxheWVyZWRUZXh0dXJlICkge1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybiggJ1RIUkVFLkZCWExvYWRlcjogbGF5ZXJlZCB0ZXh0dXJlcyBhcmUgbm90IHN1cHBvcnRlZCBpbiB0aHJlZS5qcy4gRGlzY2FyZGluZyBhbGwgYnV0IGZpcnN0IGxheWVyLicgKTtcbiAgICAgICAgICAgICAgICBpZCA9IGNvbm5lY3Rpb25zLmdldCggaWQgKS5jaGlsZHJlblsgMCBdLklEO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIHRleHR1cmVNYXAuZ2V0KCBpZCApO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIFBhcnNlIG5vZGVzIGluIEZCWFRyZWUuT2JqZWN0cy5EZWZvcm1lclxuICAgICAgICAvLyBEZWZvcm1lciBub2RlIGNhbiBjb250YWluIHNraW5uaW5nIG9yIFZlcnRleCBDYWNoZSBhbmltYXRpb24gZGF0YSwgaG93ZXZlciBvbmx5IHNraW5uaW5nIGlzIHN1cHBvcnRlZCBoZXJlXG4gICAgICAgIC8vIEdlbmVyYXRlcyBtYXAgb2YgU2tlbGV0b24tbGlrZSBvYmplY3RzIGZvciB1c2UgbGF0ZXIgd2hlbiBnZW5lcmF0aW5nIGFuZCBiaW5kaW5nIHNrZWxldG9ucy5cbiAgICAgICAgZnVuY3Rpb24gcGFyc2VEZWZvcm1lcnMoIEZCWFRyZWUsIGNvbm5lY3Rpb25zICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIHNrZWxldG9ucyA9IHt9O1xuICAgIFxuICAgICAgICAgICAgaWYgKCAnRGVmb3JtZXInIGluIEZCWFRyZWUuT2JqZWN0cyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgRGVmb3JtZXJOb2RlcyA9IEZCWFRyZWUuT2JqZWN0cy5EZWZvcm1lcjtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgbm9kZUlEIGluIERlZm9ybWVyTm9kZXMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWZvcm1lck5vZGUgPSBEZWZvcm1lck5vZGVzWyBub2RlSUQgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBkZWZvcm1lck5vZGUuYXR0clR5cGUgPT09ICdTa2luJyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWxhdGlvbnNoaXBzID0gY29ubmVjdGlvbnMuZ2V0KCBwYXJzZUludCggbm9kZUlEICkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBza2VsZXRvbiA9IHBhcnNlU2tlbGV0b24oIHJlbGF0aW9uc2hpcHMsIERlZm9ybWVyTm9kZXMgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNrZWxldG9uLklEID0gbm9kZUlEO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCByZWxhdGlvbnNoaXBzLnBhcmVudHMubGVuZ3RoID4gMSApIGNvbnNvbGUud2FybiggJ1RIUkVFLkZCWExvYWRlcjogc2tlbGV0b24gYXR0YWNoZWQgdG8gbW9yZSB0aGFuIG9uZSBnZW9tZXRyeSBpcyBub3Qgc3VwcG9ydGVkLicgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNrZWxldG9uLmdlb21ldHJ5SUQgPSByZWxhdGlvbnNoaXBzLnBhcmVudHNbIDAgXS5JRDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHNrZWxldG9uc1sgbm9kZUlEIF0gPSBza2VsZXRvbjtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiBza2VsZXRvbnM7XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gUGFyc2Ugc2luZ2xlIG5vZGVzIGluIEZCWFRyZWUuT2JqZWN0cy5EZWZvcm1lclxuICAgICAgICAvLyBUaGUgdG9wIGxldmVsIGRlZm9ybWVyIG5vZGVzIGhhdmUgdHlwZSAnU2tpbicgYW5kIHN1YkRlZm9ybWVyIG5vZGVzIGhhdmUgdHlwZSAnQ2x1c3RlcidcbiAgICAgICAgLy8gRWFjaCBza2luIG5vZGUgcmVwcmVzZW50cyBhIHNrZWxldG9uIGFuZCBlYWNoIGNsdXN0ZXIgbm9kZSByZXByZXNlbnRzIGEgYm9uZVxuICAgICAgICBmdW5jdGlvbiBwYXJzZVNrZWxldG9uKCBjb25uZWN0aW9ucywgZGVmb3JtZXJOb2RlcyApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciByYXdCb25lcyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgY29ubmVjdGlvbnMuY2hpbGRyZW4uZm9yRWFjaCggZnVuY3Rpb24gKCBjaGlsZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgc3ViRGVmb3JtZXJOb2RlID0gZGVmb3JtZXJOb2Rlc1sgY2hpbGQuSUQgXTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHN1YkRlZm9ybWVyTm9kZS5hdHRyVHlwZSAhPT0gJ0NsdXN0ZXInICkgcmV0dXJuO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciByYXdCb25lID0ge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBJRDogY2hpbGQuSUQsXG4gICAgICAgICAgICAgICAgICAgIGluZGljZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBuZXcgVEhSRUUuTWF0cml4NCgpLmZyb21BcnJheSggc3ViRGVmb3JtZXJOb2RlLlRyYW5zZm9ybS5hICksXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybUxpbms6IG5ldyBUSFJFRS5NYXRyaXg0KCkuZnJvbUFycmF5KCBzdWJEZWZvcm1lck5vZGUuVHJhbnNmb3JtTGluay5hICksXG4gICAgICAgICAgICAgICAgICAgIGxpbmtNb2RlOiBzdWJEZWZvcm1lck5vZGUuTW9kZSxcbiAgICBcbiAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggJ0luZGV4ZXMnIGluIHN1YkRlZm9ybWVyTm9kZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcmF3Qm9uZS5pbmRpY2VzID0gc3ViRGVmb3JtZXJOb2RlLkluZGV4ZXMuYTtcbiAgICAgICAgICAgICAgICAgICAgcmF3Qm9uZS53ZWlnaHRzID0gc3ViRGVmb3JtZXJOb2RlLldlaWdodHMuYTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmF3Qm9uZXMucHVzaCggcmF3Qm9uZSApO1xuICAgIFxuICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICBcbiAgICAgICAgICAgICAgICByYXdCb25lczogcmF3Qm9uZXMsXG4gICAgICAgICAgICAgICAgYm9uZXM6IFtdXG4gICAgXG4gICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIFBhcnNlIG5vZGVzIGluIEZCWFRyZWUuT2JqZWN0cy5HZW9tZXRyeVxuICAgICAgICBmdW5jdGlvbiBwYXJzZUdlb21ldHJpZXMoIEZCWFRyZWUsIGNvbm5lY3Rpb25zLCBza2VsZXRvbnMgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgZ2VvbWV0cnlNYXAgPSBuZXcgTWFwKCk7XG4gICAgXG4gICAgICAgICAgICBpZiAoICdHZW9tZXRyeScgaW4gRkJYVHJlZS5PYmplY3RzICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBnZW9tZXRyeU5vZGVzID0gRkJYVHJlZS5PYmplY3RzLkdlb21ldHJ5O1xuICAgIFxuICAgIFxuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBub2RlSUQgaW4gZ2VvbWV0cnlOb2RlcyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlbGF0aW9uc2hpcHMgPSBjb25uZWN0aW9ucy5nZXQoIHBhcnNlSW50KCBub2RlSUQgKSApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZ2VvID0gcGFyc2VHZW9tZXRyeSggRkJYVHJlZSwgcmVsYXRpb25zaGlwcywgZ2VvbWV0cnlOb2Rlc1sgbm9kZUlEIF0sIHNrZWxldG9ucyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeU1hcC5zZXQoIHBhcnNlSW50KCBub2RlSUQgKSwgZ2VvICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIGdlb21ldHJ5TWFwO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIFBhcnNlIHNpbmdsZSBub2RlIGluIEZCWFRyZWUuT2JqZWN0cy5HZW9tZXRyeVxuICAgICAgICBmdW5jdGlvbiBwYXJzZUdlb21ldHJ5KCBGQlhUcmVlLCByZWxhdGlvbnNoaXBzLCBnZW9tZXRyeU5vZGUsIHNrZWxldG9ucyApIHtcbiAgICBcbiAgICAgICAgICAgIHN3aXRjaCAoIGdlb21ldHJ5Tm9kZS5hdHRyVHlwZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBjYXNlICdNZXNoJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlTWVzaEdlb21ldHJ5KCBGQlhUcmVlLCByZWxhdGlvbnNoaXBzLCBnZW9tZXRyeU5vZGUsIHNrZWxldG9ucyApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICBjYXNlICdOdXJic0N1cnZlJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlTnVyYnNHZW9tZXRyeSggZ2VvbWV0cnlOb2RlICk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgXG4gICAgICAgIC8vIFBhcnNlIHNpbmdsZSBub2RlIG1lc2ggZ2VvbWV0cnkgaW4gRkJYVHJlZS5PYmplY3RzLkdlb21ldHJ5XG4gICAgICAgIGZ1bmN0aW9uIHBhcnNlTWVzaEdlb21ldHJ5KCBGQlhUcmVlLCByZWxhdGlvbnNoaXBzLCBnZW9tZXRyeU5vZGUsIHNrZWxldG9ucyApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBtb2RlbE5vZGVzID0gcmVsYXRpb25zaGlwcy5wYXJlbnRzLm1hcCggZnVuY3Rpb24gKCBwYXJlbnQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIEZCWFRyZWUuT2JqZWN0cy5Nb2RlbFsgcGFyZW50LklEIF07XG4gICAgXG4gICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICAvLyBkb24ndCBjcmVhdGUgZ2VvbWV0cnkgaWYgaXQgaXMgbm90IGFzc29jaWF0ZWQgd2l0aCBhbnkgbW9kZWxzXG4gICAgICAgICAgICBpZiAoIG1vZGVsTm9kZXMubGVuZ3RoID09PSAwICkgcmV0dXJuO1xuICAgIFxuICAgICAgICAgICAgdmFyIHNrZWxldG9uID0gcmVsYXRpb25zaGlwcy5jaGlsZHJlbi5yZWR1Y2UoIGZ1bmN0aW9uICggc2tlbGV0b24sIGNoaWxkICkge1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggc2tlbGV0b25zWyBjaGlsZC5JRCBdICE9PSB1bmRlZmluZWQgKSBza2VsZXRvbiA9IHNrZWxldG9uc1sgY2hpbGQuSUQgXTtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gc2tlbGV0b247XG4gICAgXG4gICAgICAgICAgICB9LCBudWxsICk7XG4gICAgXG4gICAgICAgICAgICB2YXIgcHJlVHJhbnNmb3JtID0gbmV3IFRIUkVFLk1hdHJpeDQoKTtcbiAgICBcbiAgICAgICAgICAgIC8vIFRPRE86IGlmIHRoZXJlIGlzIG1vcmUgdGhhbiBvbmUgbW9kZWwgYXNzb2NpYXRlZCB3aXRoIHRoZSBnZW9tZXRyeSwgQU5EIHRoZSBtb2RlbHMgaGF2ZVxuICAgICAgICAgICAgLy8gZGlmZmVyZW50IGdlb21ldHJpYyB0cmFuc2Zvcm1zLCB0aGVuIHRoaXMgd2lsbCBjYXVzZSBwcm9ibGVtc1xuICAgICAgICAgICAgLy8gaWYgKCBtb2RlbE5vZGVzLmxlbmd0aCA+IDEgKSB7IH1cbiAgICBcbiAgICAgICAgICAgIC8vIEZvciBub3cganVzdCBhc3N1bWUgb25lIG1vZGVsIGFuZCBnZXQgdGhlIHByZVJvdGF0aW9ucyBmcm9tIHRoYXRcbiAgICAgICAgICAgIHZhciBtb2RlbE5vZGUgPSBtb2RlbE5vZGVzWyAwIF07XG4gICAgXG4gICAgICAgICAgICBpZiAoICdHZW9tZXRyaWNSb3RhdGlvbicgaW4gbW9kZWxOb2RlICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IG1vZGVsTm9kZS5HZW9tZXRyaWNSb3RhdGlvbi52YWx1ZS5tYXAoIFRIUkVFLk1hdGguZGVnVG9SYWQgKTtcbiAgICAgICAgICAgICAgICBhcnJheVsgMyBdID0gJ1pZWCc7XG4gICAgXG4gICAgICAgICAgICAgICAgcHJlVHJhbnNmb3JtLm1ha2VSb3RhdGlvbkZyb21FdWxlciggbmV3IFRIUkVFLkV1bGVyKCkuZnJvbUFycmF5KCBhcnJheSApICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBpZiAoICdHZW9tZXRyaWNUcmFuc2xhdGlvbicgaW4gbW9kZWxOb2RlICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHByZVRyYW5zZm9ybS5zZXRQb3NpdGlvbiggbmV3IFRIUkVFLlZlY3RvcjMoKS5mcm9tQXJyYXkoIG1vZGVsTm9kZS5HZW9tZXRyaWNUcmFuc2xhdGlvbi52YWx1ZSApICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gZ2VuR2VvbWV0cnkoIEZCWFRyZWUsIHJlbGF0aW9uc2hpcHMsIGdlb21ldHJ5Tm9kZSwgc2tlbGV0b24sIHByZVRyYW5zZm9ybSApO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIEdlbmVyYXRlIGEgVEhSRUUuQnVmZmVyR2VvbWV0cnkgZnJvbSBhIG5vZGUgaW4gRkJYVHJlZS5PYmplY3RzLkdlb21ldHJ5XG4gICAgICAgIGZ1bmN0aW9uIGdlbkdlb21ldHJ5KCBGQlhUcmVlLCByZWxhdGlvbnNoaXBzLCBnZW9tZXRyeU5vZGUsIHNrZWxldG9uLCBwcmVUcmFuc2Zvcm0gKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgdmVydGV4UG9zaXRpb25zID0gZ2VvbWV0cnlOb2RlLlZlcnRpY2VzLmE7XG4gICAgICAgICAgICB2YXIgdmVydGV4SW5kaWNlcyA9IGdlb21ldHJ5Tm9kZS5Qb2x5Z29uVmVydGV4SW5kZXguYTtcbiAgICBcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBhcnJheXMgdG8gaG9sZCB0aGUgZmluYWwgZGF0YSB1c2VkIHRvIGJ1aWxkIHRoZSBidWZmZXJnZW9tZXRyeVxuICAgICAgICAgICAgdmFyIHZlcnRleEJ1ZmZlciA9IFtdO1xuICAgICAgICAgICAgdmFyIG5vcm1hbEJ1ZmZlciA9IFtdO1xuICAgICAgICAgICAgdmFyIGNvbG9yc0J1ZmZlciA9IFtdO1xuICAgICAgICAgICAgdmFyIHV2c0J1ZmZlciA9IFtdO1xuICAgICAgICAgICAgdmFyIG1hdGVyaWFsSW5kZXhCdWZmZXIgPSBbXTtcbiAgICAgICAgICAgIHZhciB2ZXJ0ZXhXZWlnaHRzQnVmZmVyID0gW107XG4gICAgICAgICAgICB2YXIgd2VpZ2h0c0luZGljZXNCdWZmZXIgPSBbXTtcbiAgICBcbiAgICAgICAgICAgIGlmICggZ2VvbWV0cnlOb2RlLkxheWVyRWxlbWVudENvbG9yICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBjb2xvckluZm8gPSBnZXRDb2xvcnMoIGdlb21ldHJ5Tm9kZS5MYXllckVsZW1lbnRDb2xvclsgMCBdICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBpZiAoIGdlb21ldHJ5Tm9kZS5MYXllckVsZW1lbnRNYXRlcmlhbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgbWF0ZXJpYWxJbmZvID0gZ2V0TWF0ZXJpYWxzKCBnZW9tZXRyeU5vZGUuTGF5ZXJFbGVtZW50TWF0ZXJpYWxbIDAgXSApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgaWYgKCBnZW9tZXRyeU5vZGUuTGF5ZXJFbGVtZW50Tm9ybWFsICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBub3JtYWxJbmZvID0gZ2V0Tm9ybWFscyggZ2VvbWV0cnlOb2RlLkxheWVyRWxlbWVudE5vcm1hbFsgMCBdICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBpZiAoIGdlb21ldHJ5Tm9kZS5MYXllckVsZW1lbnRVViApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgdXZJbmZvID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgICAgIHdoaWxlICggZ2VvbWV0cnlOb2RlLkxheWVyRWxlbWVudFVWWyBpIF0gKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHV2SW5mby5wdXNoKCBnZXRVVnMoIGdlb21ldHJ5Tm9kZS5MYXllckVsZW1lbnRVVlsgaSBdICkgKTtcbiAgICAgICAgICAgICAgICAgICAgaSArKztcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB2YXIgd2VpZ2h0VGFibGUgPSB7fTtcbiAgICBcbiAgICAgICAgICAgIGlmICggc2tlbGV0b24gIT09IG51bGwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgc2tlbGV0b24ucmF3Qm9uZXMuZm9yRWFjaCggZnVuY3Rpb24gKCByYXdCb25lLCBpICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBsb29wIG92ZXIgdGhlIGJvbmUncyB2ZXJ0ZXggaW5kaWNlcyBhbmQgd2VpZ2h0c1xuICAgICAgICAgICAgICAgICAgICByYXdCb25lLmluZGljZXMuZm9yRWFjaCggZnVuY3Rpb24gKCBpbmRleCwgaiApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggd2VpZ2h0VGFibGVbIGluZGV4IF0gPT09IHVuZGVmaW5lZCApIHdlaWdodFRhYmxlWyBpbmRleCBdID0gW107XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRUYWJsZVsgaW5kZXggXS5wdXNoKCB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiByYXdCb25lLndlaWdodHNbIGogXSxcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHZhciBwb2x5Z29uSW5kZXggPSAwO1xuICAgICAgICAgICAgdmFyIGZhY2VMZW5ndGggPSAwO1xuICAgICAgICAgICAgdmFyIGRpc3BsYXllZFdlaWdodHNXYXJuaW5nID0gZmFsc2U7XG4gICAgXG4gICAgICAgICAgICAvLyB0aGVzZSB3aWxsIGhvbGQgZGF0YSBmb3IgYSBzaW5nbGUgZmFjZVxuICAgICAgICAgICAgdmFyIHZlcnRleFBvc2l0aW9uSW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGZhY2VOb3JtYWxzID0gW107XG4gICAgICAgICAgICB2YXIgZmFjZUNvbG9ycyA9IFtdO1xuICAgICAgICAgICAgdmFyIGZhY2VVVnMgPSBbXTtcbiAgICAgICAgICAgIHZhciBmYWNlV2VpZ2h0cyA9IFtdO1xuICAgICAgICAgICAgdmFyIGZhY2VXZWlnaHRJbmRpY2VzID0gW107XG4gICAgXG4gICAgICAgICAgICB2ZXJ0ZXhJbmRpY2VzLmZvckVhY2goIGZ1bmN0aW9uICggdmVydGV4SW5kZXgsIHBvbHlnb25WZXJ0ZXhJbmRleCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZW5kT2ZGYWNlID0gZmFsc2U7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gRmFjZSBpbmRleCBhbmQgdmVydGV4IGluZGV4IGFycmF5cyBhcmUgY29tYmluZWQgaW4gYSBzaW5nbGUgYXJyYXlcbiAgICAgICAgICAgICAgICAvLyBBIGN1YmUgd2l0aCBxdWFkIGZhY2VzIGxvb2tzIGxpa2UgdGhpczpcbiAgICAgICAgICAgICAgICAvLyBQb2x5Z29uVmVydGV4SW5kZXg6ICoyNCB7XG4gICAgICAgICAgICAgICAgLy8gIGE6IDAsIDEsIDMsIC0zLCAyLCAzLCA1LCAtNSwgNCwgNSwgNywgLTcsIDYsIDcsIDEsIC0xLCAxLCA3LCA1LCAtNCwgNiwgMCwgMiwgLTVcbiAgICAgICAgICAgICAgICAvLyAgfVxuICAgICAgICAgICAgICAgIC8vIE5lZ2F0aXZlIG51bWJlcnMgbWFyayB0aGUgZW5kIG9mIGEgZmFjZSAtIGZpcnN0IGZhY2UgaGVyZSBpcyAwLCAxLCAzLCAtM1xuICAgICAgICAgICAgICAgIC8vIHRvIGZpbmQgaW5kZXggb2YgbGFzdCB2ZXJ0ZXggbXVsdGlwbHkgYnkgLTEgYW5kIHN1YnRyYWN0IDE6IC0zICogLSAxIC0gMSA9IDJcbiAgICAgICAgICAgICAgICBpZiAoIHZlcnRleEluZGV4IDwgMCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmVydGV4SW5kZXggPSB2ZXJ0ZXhJbmRleCBeIC0gMTsgLy8gZXF1aXZhbGVudCB0byAoIHggKiAtMSApIC0gMVxuICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhJbmRpY2VzWyBwb2x5Z29uVmVydGV4SW5kZXggXSA9IHZlcnRleEluZGV4O1xuICAgICAgICAgICAgICAgICAgICBlbmRPZkZhY2UgPSB0cnVlO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgd2VpZ2h0SW5kaWNlcyA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciB3ZWlnaHRzID0gW107XG4gICAgXG4gICAgICAgICAgICAgICAgdmVydGV4UG9zaXRpb25JbmRleGVzLnB1c2goIHZlcnRleEluZGV4ICogMywgdmVydGV4SW5kZXggKiAzICsgMSwgdmVydGV4SW5kZXggKiAzICsgMiApO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggY29sb3JJbmZvICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGdldERhdGEoIHBvbHlnb25WZXJ0ZXhJbmRleCwgcG9seWdvbkluZGV4LCB2ZXJ0ZXhJbmRleCwgY29sb3JJbmZvICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGZhY2VDb2xvcnMucHVzaCggZGF0YVsgMCBdLCBkYXRhWyAxIF0sIGRhdGFbIDIgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHNrZWxldG9uICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIHdlaWdodFRhYmxlWyB2ZXJ0ZXhJbmRleCBdICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRUYWJsZVsgdmVydGV4SW5kZXggXS5mb3JFYWNoKCBmdW5jdGlvbiAoIHd0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodHMucHVzaCggd3Qud2VpZ2h0ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0SW5kaWNlcy5wdXNoKCB3dC5pZCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgIFxuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggd2VpZ2h0cy5sZW5ndGggPiA0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAhIGRpc3BsYXllZFdlaWdodHNXYXJuaW5nICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybiggJ1RIUkVFLkZCWExvYWRlcjogVmVydGV4IGhhcyBtb3JlIHRoYW4gNCBza2lubmluZyB3ZWlnaHRzIGFzc2lnbmVkIHRvIHZlcnRleC4gRGVsZXRpbmcgYWRkaXRpb25hbCB3ZWlnaHRzLicgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5ZWRXZWlnaHRzV2FybmluZyA9IHRydWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgd0luZGV4ID0gWyAwLCAwLCAwLCAwIF07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgV2VpZ2h0ID0gWyAwLCAwLCAwLCAwIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzLmZvckVhY2goIGZ1bmN0aW9uICggd2VpZ2h0LCB3ZWlnaHRJbmRleCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudFdlaWdodCA9IHdlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudEluZGV4ID0gd2VpZ2h0SW5kaWNlc1sgd2VpZ2h0SW5kZXggXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXZWlnaHQuZm9yRWFjaCggZnVuY3Rpb24gKCBjb21wYXJlZFdlaWdodCwgY29tcGFyZWRXZWlnaHRJbmRleCwgY29tcGFyZWRXZWlnaHRBcnJheSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBjdXJyZW50V2VpZ2h0ID4gY29tcGFyZWRXZWlnaHQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wYXJlZFdlaWdodEFycmF5WyBjb21wYXJlZFdlaWdodEluZGV4IF0gPSBjdXJyZW50V2VpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFdlaWdodCA9IGNvbXBhcmVkV2VpZ2h0O1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcCA9IHdJbmRleFsgY29tcGFyZWRXZWlnaHRJbmRleCBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd0luZGV4WyBjb21wYXJlZFdlaWdodEluZGV4IF0gPSBjdXJyZW50SW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SW5kZXggPSB0bXA7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRJbmRpY2VzID0gd0luZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0cyA9IFdlaWdodDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgd2VpZ2h0IGFycmF5IGlzIHNob3J0ZXIgdGhhbiA0IHBhZCB3aXRoIDBzXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICggd2VpZ2h0cy5sZW5ndGggPCA0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0cy5wdXNoKCAwICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRJbmRpY2VzLnB1c2goIDAgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCA0OyArKyBpICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZmFjZVdlaWdodHMucHVzaCggd2VpZ2h0c1sgaSBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmYWNlV2VpZ2h0SW5kaWNlcy5wdXNoKCB3ZWlnaHRJbmRpY2VzWyBpIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIG5vcm1hbEluZm8gKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gZ2V0RGF0YSggcG9seWdvblZlcnRleEluZGV4LCBwb2x5Z29uSW5kZXgsIHZlcnRleEluZGV4LCBub3JtYWxJbmZvICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGZhY2VOb3JtYWxzLnB1c2goIGRhdGFbIDAgXSwgZGF0YVsgMSBdLCBkYXRhWyAyIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBtYXRlcmlhbEluZm8gJiYgbWF0ZXJpYWxJbmZvLm1hcHBpbmdUeXBlICE9PSAnQWxsU2FtZScgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXRlcmlhbEluZGV4ID0gZ2V0RGF0YSggcG9seWdvblZlcnRleEluZGV4LCBwb2x5Z29uSW5kZXgsIHZlcnRleEluZGV4LCBtYXRlcmlhbEluZm8gKVsgMCBdO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHV2SW5mbyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdXZJbmZvLmZvckVhY2goIGZ1bmN0aW9uICggdXYsIGkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGdldERhdGEoIHBvbHlnb25WZXJ0ZXhJbmRleCwgcG9seWdvbkluZGV4LCB2ZXJ0ZXhJbmRleCwgdXYgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZmFjZVVWc1sgaSBdID09PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFjZVVWc1sgaSBdID0gW107XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWNlVVZzWyBpIF0ucHVzaCggZGF0YVsgMCBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmYWNlVVZzWyBpIF0ucHVzaCggZGF0YVsgMSBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgZmFjZUxlbmd0aCArKztcbiAgICBcbiAgICAgICAgICAgICAgICAvLyB3ZSBoYXZlIHJlYWNoZWQgdGhlIGVuZCBvZiBhIGZhY2UgLSBpdCBtYXkgaGF2ZSA0IHNpZGVzIHRob3VnaFxuICAgICAgICAgICAgICAgIC8vIGluIHdoaWNoIGNhc2UgdGhlIGRhdGEgaXMgc3BsaXQgdG8gcmVwcmVzZW50IHR3byAzIHNpZGVkIGZhY2VzXG4gICAgICAgICAgICAgICAgaWYgKCBlbmRPZkZhY2UgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMjsgaSA8IGZhY2VMZW5ndGg7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhCdWZmZXIucHVzaCggdmVydGV4UG9zaXRpb25zWyB2ZXJ0ZXhQb3NpdGlvbkluZGV4ZXNbIDAgXSBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhCdWZmZXIucHVzaCggdmVydGV4UG9zaXRpb25zWyB2ZXJ0ZXhQb3NpdGlvbkluZGV4ZXNbIDEgXSBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhCdWZmZXIucHVzaCggdmVydGV4UG9zaXRpb25zWyB2ZXJ0ZXhQb3NpdGlvbkluZGV4ZXNbIDIgXSBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhCdWZmZXIucHVzaCggdmVydGV4UG9zaXRpb25zWyB2ZXJ0ZXhQb3NpdGlvbkluZGV4ZXNbICggaSAtIDEgKSAqIDMgXSBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhCdWZmZXIucHVzaCggdmVydGV4UG9zaXRpb25zWyB2ZXJ0ZXhQb3NpdGlvbkluZGV4ZXNbICggaSAtIDEgKSAqIDMgKyAxIF0gXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4QnVmZmVyLnB1c2goIHZlcnRleFBvc2l0aW9uc1sgdmVydGV4UG9zaXRpb25JbmRleGVzWyAoIGkgLSAxICkgKiAzICsgMiBdIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRleEJ1ZmZlci5wdXNoKCB2ZXJ0ZXhQb3NpdGlvbnNbIHZlcnRleFBvc2l0aW9uSW5kZXhlc1sgaSAqIDMgXSBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhCdWZmZXIucHVzaCggdmVydGV4UG9zaXRpb25zWyB2ZXJ0ZXhQb3NpdGlvbkluZGV4ZXNbIGkgKiAzICsgMSBdIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRleEJ1ZmZlci5wdXNoKCB2ZXJ0ZXhQb3NpdGlvbnNbIHZlcnRleFBvc2l0aW9uSW5kZXhlc1sgaSAqIDMgKyAyIF0gXSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBza2VsZXRvbiApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhXZWlnaHRzQnVmZmVyLnB1c2goIGZhY2VXZWlnaHRzWyAwIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhXZWlnaHRzQnVmZmVyLnB1c2goIGZhY2VXZWlnaHRzWyAxIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhXZWlnaHRzQnVmZmVyLnB1c2goIGZhY2VXZWlnaHRzWyAyIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhXZWlnaHRzQnVmZmVyLnB1c2goIGZhY2VXZWlnaHRzWyAzIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhXZWlnaHRzQnVmZmVyLnB1c2goIGZhY2VXZWlnaHRzWyAoIGkgLSAxICkgKiA0IF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhXZWlnaHRzQnVmZmVyLnB1c2goIGZhY2VXZWlnaHRzWyAoIGkgLSAxICkgKiA0ICsgMSBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4V2VpZ2h0c0J1ZmZlci5wdXNoKCBmYWNlV2VpZ2h0c1sgKCBpIC0gMSApICogNCArIDIgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRleFdlaWdodHNCdWZmZXIucHVzaCggZmFjZVdlaWdodHNbICggaSAtIDEgKSAqIDQgKyAzIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhXZWlnaHRzQnVmZmVyLnB1c2goIGZhY2VXZWlnaHRzWyBpICogNCBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4V2VpZ2h0c0J1ZmZlci5wdXNoKCBmYWNlV2VpZ2h0c1sgaSAqIDQgKyAxIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhXZWlnaHRzQnVmZmVyLnB1c2goIGZhY2VXZWlnaHRzWyBpICogNCArIDIgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRleFdlaWdodHNCdWZmZXIucHVzaCggZmFjZVdlaWdodHNbIGkgKiA0ICsgMyBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0c0luZGljZXNCdWZmZXIucHVzaCggZmFjZVdlaWdodEluZGljZXNbIDAgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodHNJbmRpY2VzQnVmZmVyLnB1c2goIGZhY2VXZWlnaHRJbmRpY2VzWyAxIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzSW5kaWNlc0J1ZmZlci5wdXNoKCBmYWNlV2VpZ2h0SW5kaWNlc1sgMiBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0c0luZGljZXNCdWZmZXIucHVzaCggZmFjZVdlaWdodEluZGljZXNbIDMgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodHNJbmRpY2VzQnVmZmVyLnB1c2goIGZhY2VXZWlnaHRJbmRpY2VzWyAoIGkgLSAxICkgKiA0IF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzSW5kaWNlc0J1ZmZlci5wdXNoKCBmYWNlV2VpZ2h0SW5kaWNlc1sgKCBpIC0gMSApICogNCArIDEgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodHNJbmRpY2VzQnVmZmVyLnB1c2goIGZhY2VXZWlnaHRJbmRpY2VzWyAoIGkgLSAxICkgKiA0ICsgMiBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0c0luZGljZXNCdWZmZXIucHVzaCggZmFjZVdlaWdodEluZGljZXNbICggaSAtIDEgKSAqIDQgKyAzIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzSW5kaWNlc0J1ZmZlci5wdXNoKCBmYWNlV2VpZ2h0SW5kaWNlc1sgaSAqIDQgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodHNJbmRpY2VzQnVmZmVyLnB1c2goIGZhY2VXZWlnaHRJbmRpY2VzWyBpICogNCArIDEgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodHNJbmRpY2VzQnVmZmVyLnB1c2goIGZhY2VXZWlnaHRJbmRpY2VzWyBpICogNCArIDIgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodHNJbmRpY2VzQnVmZmVyLnB1c2goIGZhY2VXZWlnaHRJbmRpY2VzWyBpICogNCArIDMgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBjb2xvckluZm8gKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JzQnVmZmVyLnB1c2goIGZhY2VDb2xvcnNbIDAgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yc0J1ZmZlci5wdXNoKCBmYWNlQ29sb3JzWyAxIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcnNCdWZmZXIucHVzaCggZmFjZUNvbG9yc1sgMiBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JzQnVmZmVyLnB1c2goIGZhY2VDb2xvcnNbICggaSAtIDEgKSAqIDMgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yc0J1ZmZlci5wdXNoKCBmYWNlQ29sb3JzWyAoIGkgLSAxICkgKiAzICsgMSBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JzQnVmZmVyLnB1c2goIGZhY2VDb2xvcnNbICggaSAtIDEgKSAqIDMgKyAyIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcnNCdWZmZXIucHVzaCggZmFjZUNvbG9yc1sgaSAqIDMgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yc0J1ZmZlci5wdXNoKCBmYWNlQ29sb3JzWyBpICogMyArIDEgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yc0J1ZmZlci5wdXNoKCBmYWNlQ29sb3JzWyBpICogMyArIDIgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBtYXRlcmlhbEluZm8gJiYgbWF0ZXJpYWxJbmZvLm1hcHBpbmdUeXBlICE9PSAnQWxsU2FtZScgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxJbmRleEJ1ZmZlci5wdXNoKCBtYXRlcmlhbEluZGV4ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxJbmRleEJ1ZmZlci5wdXNoKCBtYXRlcmlhbEluZGV4ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxJbmRleEJ1ZmZlci5wdXNoKCBtYXRlcmlhbEluZGV4ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIG5vcm1hbEluZm8gKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsQnVmZmVyLnB1c2goIGZhY2VOb3JtYWxzWyAwIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxCdWZmZXIucHVzaCggZmFjZU5vcm1hbHNbIDEgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbEJ1ZmZlci5wdXNoKCBmYWNlTm9ybWFsc1sgMiBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsQnVmZmVyLnB1c2goIGZhY2VOb3JtYWxzWyAoIGkgLSAxICkgKiAzIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxCdWZmZXIucHVzaCggZmFjZU5vcm1hbHNbICggaSAtIDEgKSAqIDMgKyAxIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxCdWZmZXIucHVzaCggZmFjZU5vcm1hbHNbICggaSAtIDEgKSAqIDMgKyAyIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxCdWZmZXIucHVzaCggZmFjZU5vcm1hbHNbIGkgKiAzIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxCdWZmZXIucHVzaCggZmFjZU5vcm1hbHNbIGkgKiAzICsgMSBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsQnVmZmVyLnB1c2goIGZhY2VOb3JtYWxzWyBpICogMyArIDIgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB1dkluZm8gKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZJbmZvLmZvckVhY2goIGZ1bmN0aW9uICggdXYsIGogKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdXZzQnVmZmVyWyBqIF0gPT09IHVuZGVmaW5lZCApIHV2c0J1ZmZlclsgaiBdID0gW107XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV2c0J1ZmZlclsgaiBdLnB1c2goIGZhY2VVVnNbIGogXVsgMCBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV2c0J1ZmZlclsgaiBdLnB1c2goIGZhY2VVVnNbIGogXVsgMSBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV2c0J1ZmZlclsgaiBdLnB1c2goIGZhY2VVVnNbIGogXVsgKCBpIC0gMSApICogMiBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV2c0J1ZmZlclsgaiBdLnB1c2goIGZhY2VVVnNbIGogXVsgKCBpIC0gMSApICogMiArIDEgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dnNCdWZmZXJbIGogXS5wdXNoKCBmYWNlVVZzWyBqIF1bIGkgKiAyIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZzQnVmZmVyWyBqIF0ucHVzaCggZmFjZVVWc1sgaiBdWyBpICogMiArIDEgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBwb2x5Z29uSW5kZXggKys7XG4gICAgICAgICAgICAgICAgICAgIGZhY2VMZW5ndGggPSAwO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyByZXNldCBhcnJheXMgZm9yIHRoZSBuZXh0IGZhY2VcbiAgICAgICAgICAgICAgICAgICAgdmVydGV4UG9zaXRpb25JbmRleGVzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZhY2VOb3JtYWxzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZhY2VDb2xvcnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZmFjZVVWcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmYWNlV2VpZ2h0cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmYWNlV2VpZ2h0SW5kaWNlcyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgIHZhciBnZW8gPSBuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKTtcbiAgICAgICAgICAgIGdlby5uYW1lID0gZ2VvbWV0cnlOb2RlLm5hbWU7XG4gICAgXG4gICAgICAgICAgICB2YXIgcG9zaXRpb25BdHRyaWJ1dGUgPSBuZXcgVEhSRUUuRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggdmVydGV4QnVmZmVyLCAzICk7XG4gICAgXG4gICAgICAgICAgICBwcmVUcmFuc2Zvcm0uYXBwbHlUb0J1ZmZlckF0dHJpYnV0ZSggcG9zaXRpb25BdHRyaWJ1dGUgKTtcbiAgICBcbiAgICAgICAgICAgIGdlby5hZGRBdHRyaWJ1dGUoICdwb3NpdGlvbicsIHBvc2l0aW9uQXR0cmlidXRlICk7XG4gICAgXG4gICAgICAgICAgICBpZiAoIGNvbG9yc0J1ZmZlci5sZW5ndGggPiAwICkge1xuICAgIFxuICAgICAgICAgICAgICAgIGdlby5hZGRBdHRyaWJ1dGUoICdjb2xvcicsIG5ldyBUSFJFRS5GbG9hdDMyQnVmZmVyQXR0cmlidXRlKCBjb2xvcnNCdWZmZXIsIDMgKSApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgaWYgKCBza2VsZXRvbiApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBnZW8uYWRkQXR0cmlidXRlKCAnc2tpbkluZGV4JywgbmV3IFRIUkVFLkZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoIHdlaWdodHNJbmRpY2VzQnVmZmVyLCA0ICkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICBnZW8uYWRkQXR0cmlidXRlKCAnc2tpbldlaWdodCcsIG5ldyBUSFJFRS5GbG9hdDMyQnVmZmVyQXR0cmlidXRlKCB2ZXJ0ZXhXZWlnaHRzQnVmZmVyLCA0ICkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyB1c2VkIGxhdGVyIHRvIGJpbmQgdGhlIHNrZWxldG9uIHRvIHRoZSBtb2RlbFxuICAgICAgICAgICAgICAgIGdlby5GQlhfRGVmb3JtZXIgPSBza2VsZXRvbjtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGlmICggbm9ybWFsQnVmZmVyLmxlbmd0aCA+IDAgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIG5vcm1hbEF0dHJpYnV0ZSA9IG5ldyBUSFJFRS5GbG9hdDMyQnVmZmVyQXR0cmlidXRlKCBub3JtYWxCdWZmZXIsIDMgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgbm9ybWFsTWF0cml4ID0gbmV3IFRIUkVFLk1hdHJpeDMoKS5nZXROb3JtYWxNYXRyaXgoIHByZVRyYW5zZm9ybSApO1xuICAgICAgICAgICAgICAgIG5vcm1hbE1hdHJpeC5hcHBseVRvQnVmZmVyQXR0cmlidXRlKCBub3JtYWxBdHRyaWJ1dGUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICBnZW8uYWRkQXR0cmlidXRlKCAnbm9ybWFsJywgbm9ybWFsQXR0cmlidXRlICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB1dnNCdWZmZXIuZm9yRWFjaCggZnVuY3Rpb24gKCB1dkJ1ZmZlciwgaSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBzdWJzZXF1ZW50IHV2IGJ1ZmZlcnMgYXJlIGNhbGxlZCAndXYxJywgJ3V2MicsIC4uLlxuICAgICAgICAgICAgICAgIHZhciBuYW1lID0gJ3V2JyArICggaSArIDEgKS50b1N0cmluZygpO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIHRoZSBmaXJzdCB1diBidWZmZXIgaXMganVzdCBjYWxsZWQgJ3V2J1xuICAgICAgICAgICAgICAgIGlmICggaSA9PT0gMCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbmFtZSA9ICd1dic7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGdlby5hZGRBdHRyaWJ1dGUoIG5hbWUsIG5ldyBUSFJFRS5GbG9hdDMyQnVmZmVyQXR0cmlidXRlKCB1dnNCdWZmZXJbIGkgXSwgMiApICk7XG4gICAgXG4gICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICBpZiAoIG1hdGVyaWFsSW5mbyAmJiBtYXRlcmlhbEluZm8ubWFwcGluZ1R5cGUgIT09ICdBbGxTYW1lJyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IHRoZSBtYXRlcmlhbCBpbmRpY2VzIG9mIGVhY2ggdmVydGV4IGludG8gcmVuZGVyaW5nIGdyb3VwcyBvbiB0aGUgZ2VvbWV0cnkuXG4gICAgICAgICAgICAgICAgdmFyIHByZXZNYXRlcmlhbEluZGV4ID0gbWF0ZXJpYWxJbmRleEJ1ZmZlclsgMCBdO1xuICAgICAgICAgICAgICAgIHZhciBzdGFydEluZGV4ID0gMDtcbiAgICBcbiAgICAgICAgICAgICAgICBtYXRlcmlhbEluZGV4QnVmZmVyLmZvckVhY2goIGZ1bmN0aW9uICggY3VycmVudEluZGV4LCBpICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGN1cnJlbnRJbmRleCAhPT0gcHJldk1hdGVyaWFsSW5kZXggKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW8uYWRkR3JvdXAoIHN0YXJ0SW5kZXgsIGkgLSBzdGFydEluZGV4LCBwcmV2TWF0ZXJpYWxJbmRleCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldk1hdGVyaWFsSW5kZXggPSBjdXJyZW50SW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydEluZGV4ID0gaTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyB0aGUgbG9vcCBhYm92ZSBkb2Vzbid0IGFkZCB0aGUgbGFzdCBncm91cCwgZG8gdGhhdCBoZXJlLlxuICAgICAgICAgICAgICAgIGlmICggZ2VvLmdyb3Vwcy5sZW5ndGggPiAwICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdEdyb3VwID0gZ2VvLmdyb3Vwc1sgZ2VvLmdyb3Vwcy5sZW5ndGggLSAxIF07XG4gICAgICAgICAgICAgICAgICAgIHZhciBsYXN0SW5kZXggPSBsYXN0R3JvdXAuc3RhcnQgKyBsYXN0R3JvdXAuY291bnQ7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggbGFzdEluZGV4ICE9PSBtYXRlcmlhbEluZGV4QnVmZmVyLmxlbmd0aCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlby5hZGRHcm91cCggbGFzdEluZGV4LCBtYXRlcmlhbEluZGV4QnVmZmVyLmxlbmd0aCAtIGxhc3RJbmRleCwgcHJldk1hdGVyaWFsSW5kZXggKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAvLyBjYXNlIHdoZXJlIHRoZXJlIGFyZSBtdWx0aXBsZSBtYXRlcmlhbHMgYnV0IHRoZSB3aG9sZSBnZW9tZXRyeSBpcyBvbmx5XG4gICAgICAgICAgICAgICAgLy8gdXNpbmcgb25lIG9mIHRoZW1cbiAgICAgICAgICAgICAgICBpZiAoIGdlby5ncm91cHMubGVuZ3RoID09PSAwICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBnZW8uYWRkR3JvdXAoIDAsIG1hdGVyaWFsSW5kZXhCdWZmZXIubGVuZ3RoLCBtYXRlcmlhbEluZGV4QnVmZmVyWyAwIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gZ2VvO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgXG4gICAgICAgIC8vIFBhcnNlIG5vcm1hbCBmcm9tIEZCWFRyZWUuT2JqZWN0cy5HZW9tZXRyeS5MYXllckVsZW1lbnROb3JtYWwgaWYgaXQgZXhpc3RzXG4gICAgICAgIGZ1bmN0aW9uIGdldE5vcm1hbHMoIE5vcm1hbE5vZGUgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgbWFwcGluZ1R5cGUgPSBOb3JtYWxOb2RlLk1hcHBpbmdJbmZvcm1hdGlvblR5cGU7XG4gICAgICAgICAgICB2YXIgcmVmZXJlbmNlVHlwZSA9IE5vcm1hbE5vZGUuUmVmZXJlbmNlSW5mb3JtYXRpb25UeXBlO1xuICAgICAgICAgICAgdmFyIGJ1ZmZlciA9IE5vcm1hbE5vZGUuTm9ybWFscy5hO1xuICAgICAgICAgICAgdmFyIGluZGV4QnVmZmVyID0gW107XG4gICAgICAgICAgICBpZiAoIHJlZmVyZW5jZVR5cGUgPT09ICdJbmRleFRvRGlyZWN0JyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoICdOb3JtYWxJbmRleCcgaW4gTm9ybWFsTm9kZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhCdWZmZXIgPSBOb3JtYWxOb2RlLk5vcm1hbEluZGV4LmE7XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggJ05vcm1hbHNJbmRleCcgaW4gTm9ybWFsTm9kZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhCdWZmZXIgPSBOb3JtYWxOb2RlLk5vcm1hbHNJbmRleC5hO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZGF0YVNpemU6IDMsXG4gICAgICAgICAgICAgICAgYnVmZmVyOiBidWZmZXIsXG4gICAgICAgICAgICAgICAgaW5kaWNlczogaW5kZXhCdWZmZXIsXG4gICAgICAgICAgICAgICAgbWFwcGluZ1R5cGU6IG1hcHBpbmdUeXBlLFxuICAgICAgICAgICAgICAgIHJlZmVyZW5jZVR5cGU6IHJlZmVyZW5jZVR5cGVcbiAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gUGFyc2UgVVZzIGZyb20gRkJYVHJlZS5PYmplY3RzLkdlb21ldHJ5LkxheWVyRWxlbWVudFVWIGlmIGl0IGV4aXN0c1xuICAgICAgICBmdW5jdGlvbiBnZXRVVnMoIFVWTm9kZSApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBtYXBwaW5nVHlwZSA9IFVWTm9kZS5NYXBwaW5nSW5mb3JtYXRpb25UeXBlO1xuICAgICAgICAgICAgdmFyIHJlZmVyZW5jZVR5cGUgPSBVVk5vZGUuUmVmZXJlbmNlSW5mb3JtYXRpb25UeXBlO1xuICAgICAgICAgICAgdmFyIGJ1ZmZlciA9IFVWTm9kZS5VVi5hO1xuICAgICAgICAgICAgdmFyIGluZGV4QnVmZmVyID0gW107XG4gICAgICAgICAgICBpZiAoIHJlZmVyZW5jZVR5cGUgPT09ICdJbmRleFRvRGlyZWN0JyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBpbmRleEJ1ZmZlciA9IFVWTm9kZS5VVkluZGV4LmE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGRhdGFTaXplOiAyLFxuICAgICAgICAgICAgICAgIGJ1ZmZlcjogYnVmZmVyLFxuICAgICAgICAgICAgICAgIGluZGljZXM6IGluZGV4QnVmZmVyLFxuICAgICAgICAgICAgICAgIG1hcHBpbmdUeXBlOiBtYXBwaW5nVHlwZSxcbiAgICAgICAgICAgICAgICByZWZlcmVuY2VUeXBlOiByZWZlcmVuY2VUeXBlXG4gICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIFBhcnNlIFZlcnRleCBDb2xvcnMgZnJvbSBGQlhUcmVlLk9iamVjdHMuR2VvbWV0cnkuTGF5ZXJFbGVtZW50Q29sb3IgaWYgaXQgZXhpc3RzXG4gICAgICAgIGZ1bmN0aW9uIGdldENvbG9ycyggQ29sb3JOb2RlICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIG1hcHBpbmdUeXBlID0gQ29sb3JOb2RlLk1hcHBpbmdJbmZvcm1hdGlvblR5cGU7XG4gICAgICAgICAgICB2YXIgcmVmZXJlbmNlVHlwZSA9IENvbG9yTm9kZS5SZWZlcmVuY2VJbmZvcm1hdGlvblR5cGU7XG4gICAgICAgICAgICB2YXIgYnVmZmVyID0gQ29sb3JOb2RlLkNvbG9ycy5hO1xuICAgICAgICAgICAgdmFyIGluZGV4QnVmZmVyID0gW107XG4gICAgICAgICAgICBpZiAoIHJlZmVyZW5jZVR5cGUgPT09ICdJbmRleFRvRGlyZWN0JyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBpbmRleEJ1ZmZlciA9IENvbG9yTm9kZS5Db2xvckluZGV4LmE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGRhdGFTaXplOiA0LFxuICAgICAgICAgICAgICAgIGJ1ZmZlcjogYnVmZmVyLFxuICAgICAgICAgICAgICAgIGluZGljZXM6IGluZGV4QnVmZmVyLFxuICAgICAgICAgICAgICAgIG1hcHBpbmdUeXBlOiBtYXBwaW5nVHlwZSxcbiAgICAgICAgICAgICAgICByZWZlcmVuY2VUeXBlOiByZWZlcmVuY2VUeXBlXG4gICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIFBhcnNlIG1hcHBpbmcgYW5kIG1hdGVyaWFsIGRhdGEgaW4gRkJYVHJlZS5PYmplY3RzLkdlb21ldHJ5LkxheWVyRWxlbWVudE1hdGVyaWFsIGlmIGl0IGV4aXN0c1xuICAgICAgICBmdW5jdGlvbiBnZXRNYXRlcmlhbHMoIE1hdGVyaWFsTm9kZSApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBtYXBwaW5nVHlwZSA9IE1hdGVyaWFsTm9kZS5NYXBwaW5nSW5mb3JtYXRpb25UeXBlO1xuICAgICAgICAgICAgdmFyIHJlZmVyZW5jZVR5cGUgPSBNYXRlcmlhbE5vZGUuUmVmZXJlbmNlSW5mb3JtYXRpb25UeXBlO1xuICAgIFxuICAgICAgICAgICAgaWYgKCBtYXBwaW5nVHlwZSA9PT0gJ05vTWFwcGluZ0luZm9ybWF0aW9uJyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBkYXRhU2l6ZTogMSxcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyOiBbIDAgXSxcbiAgICAgICAgICAgICAgICAgICAgaW5kaWNlczogWyAwIF0sXG4gICAgICAgICAgICAgICAgICAgIG1hcHBpbmdUeXBlOiAnQWxsU2FtZScsXG4gICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZVR5cGU6IHJlZmVyZW5jZVR5cGVcbiAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgdmFyIG1hdGVyaWFsSW5kZXhCdWZmZXIgPSBNYXRlcmlhbE5vZGUuTWF0ZXJpYWxzLmE7XG4gICAgXG4gICAgICAgICAgICAvLyBTaW5jZSBtYXRlcmlhbHMgYXJlIHN0b3JlZCBhcyBpbmRpY2VzLCB0aGVyZSdzIGEgYml0IG9mIGEgbWlzbWF0Y2ggYmV0d2VlbiBGQlggYW5kIHdoYXRcbiAgICAgICAgICAgIC8vIHdlIGV4cGVjdC5TbyB3ZSBjcmVhdGUgYW4gaW50ZXJtZWRpYXRlIGJ1ZmZlciB0aGF0IHBvaW50cyB0byB0aGUgaW5kZXggaW4gdGhlIGJ1ZmZlcixcbiAgICAgICAgICAgIC8vIGZvciBjb25mb3JtaW5nIHdpdGggdGhlIG90aGVyIGZ1bmN0aW9ucyB3ZSd2ZSB3cml0dGVuIGZvciBvdGhlciBkYXRhLlxuICAgICAgICAgICAgdmFyIG1hdGVyaWFsSW5kaWNlcyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgbWF0ZXJpYWxJbmRleEJ1ZmZlci5sZW5ndGg7ICsrIGkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWxJbmRpY2VzLnB1c2goIGkgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZGF0YVNpemU6IDEsXG4gICAgICAgICAgICAgICAgYnVmZmVyOiBtYXRlcmlhbEluZGV4QnVmZmVyLFxuICAgICAgICAgICAgICAgIGluZGljZXM6IG1hdGVyaWFsSW5kaWNlcyxcbiAgICAgICAgICAgICAgICBtYXBwaW5nVHlwZTogbWFwcGluZ1R5cGUsXG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlVHlwZTogcmVmZXJlbmNlVHlwZVxuICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBGdW5jdGlvbnMgdXNlIHRoZSBpbmZvT2JqZWN0IGFuZCBnaXZlbiBpbmRpY2VzIHRvIHJldHVybiB2YWx1ZSBhcnJheSBvZiBnZW9tZXRyeS5cbiAgICAgICAgLy8gUGFyYW1ldGVyczpcbiAgICAgICAgLy8gXHQtIHBvbHlnb25WZXJ0ZXhJbmRleCAtIEluZGV4IG9mIHZlcnRleCBpbiBkcmF3IG9yZGVyICh3aGljaCBpbmRleCBvZiB0aGUgaW5kZXggYnVmZmVyIHJlZmVycyB0byB0aGlzIHZlcnRleCkuXG4gICAgICAgIC8vIFx0LSBwb2x5Z29uSW5kZXggLSBJbmRleCBvZiBwb2x5Z29uIGluIGdlb21ldHJ5LlxuICAgICAgICAvLyBcdC0gdmVydGV4SW5kZXggLSBJbmRleCBvZiB2ZXJ0ZXggaW5zaWRlIHZlcnRleCBidWZmZXIgKHVzZWQgYmVjYXVzZSBzb21lIGRhdGEgcmVmZXJzIHRvIG9sZCBpbmRleCBidWZmZXIgdGhhdCB3ZSBkb24ndCB1c2UgYW55bW9yZSkuXG4gICAgICAgIC8vIFx0LSBpbmZvT2JqZWN0OiBjYW4gYmUgbWF0ZXJpYWxJbmZvLCBub3JtYWxJbmZvLCBVVkluZm8gb3IgY29sb3JJbmZvXG4gICAgICAgIC8vIEluZGV4IHR5cGU6XG4gICAgICAgIC8vXHQtIERpcmVjdDogaW5kZXggaXMgc2FtZSBhcyBwb2x5Z29uVmVydGV4SW5kZXhcbiAgICAgICAgLy9cdC0gSW5kZXhUb0RpcmVjdDogaW5mb09iamVjdCBoYXMgaXQncyBvd24gc2V0IG9mIGluZGljZXNcbiAgICAgICAgdmFyIGRhdGFBcnJheSA9IFtdO1xuICAgIFxuICAgICAgICB2YXIgR2V0RGF0YSA9IHtcbiAgICBcbiAgICAgICAgICAgIEJ5UG9seWdvblZlcnRleDoge1xuICAgIFxuICAgICAgICAgICAgICAgIERpcmVjdDogZnVuY3Rpb24gKCBwb2x5Z29uVmVydGV4SW5kZXgsIHBvbHlnb25JbmRleCwgdmVydGV4SW5kZXgsIGluZm9PYmplY3QgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBmcm9tID0gKCBwb2x5Z29uVmVydGV4SW5kZXggKiBpbmZvT2JqZWN0LmRhdGFTaXplICk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0byA9ICggcG9seWdvblZlcnRleEluZGV4ICogaW5mb09iamVjdC5kYXRhU2l6ZSApICsgaW5mb09iamVjdC5kYXRhU2l6ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNsaWNlKCBkYXRhQXJyYXksIGluZm9PYmplY3QuYnVmZmVyLCBmcm9tLCB0byApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICAgICAgSW5kZXhUb0RpcmVjdDogZnVuY3Rpb24gKCBwb2x5Z29uVmVydGV4SW5kZXgsIHBvbHlnb25JbmRleCwgdmVydGV4SW5kZXgsIGluZm9PYmplY3QgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGluZm9PYmplY3QuaW5kaWNlc1sgcG9seWdvblZlcnRleEluZGV4IF07XG4gICAgICAgICAgICAgICAgICAgIHZhciBmcm9tID0gKCBpbmRleCAqIGluZm9PYmplY3QuZGF0YVNpemUgKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvID0gKCBpbmRleCAqIGluZm9PYmplY3QuZGF0YVNpemUgKSArIGluZm9PYmplY3QuZGF0YVNpemU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzbGljZSggZGF0YUFycmF5LCBpbmZvT2JqZWN0LmJ1ZmZlciwgZnJvbSwgdG8gKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgQnlQb2x5Z29uOiB7XG4gICAgXG4gICAgICAgICAgICAgICAgRGlyZWN0OiBmdW5jdGlvbiAoIHBvbHlnb25WZXJ0ZXhJbmRleCwgcG9seWdvbkluZGV4LCB2ZXJ0ZXhJbmRleCwgaW5mb09iamVjdCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZyb20gPSBwb2x5Z29uSW5kZXggKiBpbmZvT2JqZWN0LmRhdGFTaXplO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG8gPSBwb2x5Z29uSW5kZXggKiBpbmZvT2JqZWN0LmRhdGFTaXplICsgaW5mb09iamVjdC5kYXRhU2l6ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNsaWNlKCBkYXRhQXJyYXksIGluZm9PYmplY3QuYnVmZmVyLCBmcm9tLCB0byApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICAgICAgSW5kZXhUb0RpcmVjdDogZnVuY3Rpb24gKCBwb2x5Z29uVmVydGV4SW5kZXgsIHBvbHlnb25JbmRleCwgdmVydGV4SW5kZXgsIGluZm9PYmplY3QgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGluZm9PYmplY3QuaW5kaWNlc1sgcG9seWdvbkluZGV4IF07XG4gICAgICAgICAgICAgICAgICAgIHZhciBmcm9tID0gaW5kZXggKiBpbmZvT2JqZWN0LmRhdGFTaXplO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG8gPSBpbmRleCAqIGluZm9PYmplY3QuZGF0YVNpemUgKyBpbmZvT2JqZWN0LmRhdGFTaXplO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2xpY2UoIGRhdGFBcnJheSwgaW5mb09iamVjdC5idWZmZXIsIGZyb20sIHRvICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIEJ5VmVydGljZToge1xuICAgIFxuICAgICAgICAgICAgICAgIERpcmVjdDogZnVuY3Rpb24gKCBwb2x5Z29uVmVydGV4SW5kZXgsIHBvbHlnb25JbmRleCwgdmVydGV4SW5kZXgsIGluZm9PYmplY3QgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBmcm9tID0gKCB2ZXJ0ZXhJbmRleCAqIGluZm9PYmplY3QuZGF0YVNpemUgKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvID0gKCB2ZXJ0ZXhJbmRleCAqIGluZm9PYmplY3QuZGF0YVNpemUgKSArIGluZm9PYmplY3QuZGF0YVNpemU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzbGljZSggZGF0YUFycmF5LCBpbmZvT2JqZWN0LmJ1ZmZlciwgZnJvbSwgdG8gKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgQWxsU2FtZToge1xuICAgIFxuICAgICAgICAgICAgICAgIEluZGV4VG9EaXJlY3Q6IGZ1bmN0aW9uICggcG9seWdvblZlcnRleEluZGV4LCBwb2x5Z29uSW5kZXgsIHZlcnRleEluZGV4LCBpbmZvT2JqZWN0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgZnJvbSA9IGluZm9PYmplY3QuaW5kaWNlc1sgMCBdICogaW5mb09iamVjdC5kYXRhU2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvID0gaW5mb09iamVjdC5pbmRpY2VzWyAwIF0gKiBpbmZvT2JqZWN0LmRhdGFTaXplICsgaW5mb09iamVjdC5kYXRhU2l6ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNsaWNlKCBkYXRhQXJyYXksIGluZm9PYmplY3QuYnVmZmVyLCBmcm9tLCB0byApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgZnVuY3Rpb24gZ2V0RGF0YSggcG9seWdvblZlcnRleEluZGV4LCBwb2x5Z29uSW5kZXgsIHZlcnRleEluZGV4LCBpbmZvT2JqZWN0ICkge1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuIEdldERhdGFbIGluZm9PYmplY3QubWFwcGluZ1R5cGUgXVsgaW5mb09iamVjdC5yZWZlcmVuY2VUeXBlIF0oIHBvbHlnb25WZXJ0ZXhJbmRleCwgcG9seWdvbkluZGV4LCB2ZXJ0ZXhJbmRleCwgaW5mb09iamVjdCApO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIEdlbmVyYXRlIGEgTnVyYkdlb21ldHJ5IGZyb20gYSBub2RlIGluIEZCWFRyZWUuT2JqZWN0cy5HZW9tZXRyeVxuICAgICAgICBmdW5jdGlvbiBwYXJzZU51cmJzR2VvbWV0cnkoIGdlb21ldHJ5Tm9kZSApIHtcbiAgICBcbiAgICAgICAgICAgIGlmICggVEhSRUUuTlVSQlNDdXJ2ZSA9PT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoICdUSFJFRS5GQlhMb2FkZXI6IFRoZSBsb2FkZXIgcmVsaWVzIG9uIFRIUkVFLk5VUkJTQ3VydmUgZm9yIGFueSBudXJicyBwcmVzZW50IGluIHRoZSBtb2RlbC4gTnVyYnMgd2lsbCBzaG93IHVwIGFzIGVtcHR5IGdlb21ldHJ5LicgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5KCk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB2YXIgb3JkZXIgPSBwYXJzZUludCggZ2VvbWV0cnlOb2RlLk9yZGVyICk7XG4gICAgXG4gICAgICAgICAgICBpZiAoIGlzTmFOKCBvcmRlciApICkge1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoICdUSFJFRS5GQlhMb2FkZXI6IEludmFsaWQgT3JkZXIgJXMgZ2l2ZW4gZm9yIGdlb21ldHJ5IElEOiAlcycsIGdlb21ldHJ5Tm9kZS5PcmRlciwgZ2VvbWV0cnlOb2RlLmlkICk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSgpO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgdmFyIGRlZ3JlZSA9IG9yZGVyIC0gMTtcbiAgICBcbiAgICAgICAgICAgIHZhciBrbm90cyA9IGdlb21ldHJ5Tm9kZS5Lbm90VmVjdG9yLmE7XG4gICAgICAgICAgICB2YXIgY29udHJvbFBvaW50cyA9IFtdO1xuICAgICAgICAgICAgdmFyIHBvaW50c1ZhbHVlcyA9IGdlb21ldHJ5Tm9kZS5Qb2ludHMuYTtcbiAgICBcbiAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHBvaW50c1ZhbHVlcy5sZW5ndGg7IGkgPCBsOyBpICs9IDQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgY29udHJvbFBvaW50cy5wdXNoKCBuZXcgVEhSRUUuVmVjdG9yNCgpLmZyb21BcnJheSggcG9pbnRzVmFsdWVzLCBpICkgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHZhciBzdGFydEtub3QsIGVuZEtub3Q7XG4gICAgXG4gICAgICAgICAgICBpZiAoIGdlb21ldHJ5Tm9kZS5Gb3JtID09PSAnQ2xvc2VkJyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBjb250cm9sUG9pbnRzLnB1c2goIGNvbnRyb2xQb2ludHNbIDAgXSApO1xuICAgIFxuICAgICAgICAgICAgfSBlbHNlIGlmICggZ2VvbWV0cnlOb2RlLkZvcm0gPT09ICdQZXJpb2RpYycgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgc3RhcnRLbm90ID0gZGVncmVlO1xuICAgICAgICAgICAgICAgIGVuZEtub3QgPSBrbm90cy5sZW5ndGggLSAxIC0gc3RhcnRLbm90O1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IGRlZ3JlZTsgKysgaSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbFBvaW50cy5wdXNoKCBjb250cm9sUG9pbnRzWyBpIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB2YXIgY3VydmUgPSBuZXcgVEhSRUUuTlVSQlNDdXJ2ZSggZGVncmVlLCBrbm90cywgY29udHJvbFBvaW50cywgc3RhcnRLbm90LCBlbmRLbm90ICk7XG4gICAgICAgICAgICB2YXIgdmVydGljZXMgPSBjdXJ2ZS5nZXRQb2ludHMoIGNvbnRyb2xQb2ludHMubGVuZ3RoICogNyApO1xuICAgIFxuICAgICAgICAgICAgdmFyIHBvc2l0aW9ucyA9IG5ldyBGbG9hdDMyQXJyYXkoIHZlcnRpY2VzLmxlbmd0aCAqIDMgKTtcbiAgICBcbiAgICAgICAgICAgIHZlcnRpY2VzLmZvckVhY2goIGZ1bmN0aW9uICggdmVydGV4LCBpICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZlcnRleC50b0FycmF5KCBwb3NpdGlvbnMsIGkgKiAzICk7XG4gICAgXG4gICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKTtcbiAgICAgICAgICAgIGdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ3Bvc2l0aW9uJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSggcG9zaXRpb25zLCAzICkgKTtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiBnZW9tZXRyeTtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBjcmVhdGUgdGhlIG1haW4gVEhSRUUuR3JvdXAoKSB0byBiZSByZXR1cm5lZCBieSB0aGUgbG9hZGVyXG4gICAgICAgIGZ1bmN0aW9uIHBhcnNlU2NlbmUoIEZCWFRyZWUsIGNvbm5lY3Rpb25zLCBza2VsZXRvbnMsIGdlb21ldHJ5TWFwLCBtYXRlcmlhbE1hcCApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBzY2VuZUdyYXBoID0gbmV3IFRIUkVFLkdyb3VwKCk7XG4gICAgXG4gICAgICAgICAgICB2YXIgbW9kZWxNYXAgPSBwYXJzZU1vZGVscyggRkJYVHJlZSwgc2tlbGV0b25zLCBnZW9tZXRyeU1hcCwgbWF0ZXJpYWxNYXAsIGNvbm5lY3Rpb25zICk7XG4gICAgXG4gICAgICAgICAgICB2YXIgbW9kZWxOb2RlcyA9IEZCWFRyZWUuT2JqZWN0cy5Nb2RlbDtcbiAgICBcbiAgICAgICAgICAgIG1vZGVsTWFwLmZvckVhY2goIGZ1bmN0aW9uICggbW9kZWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIG1vZGVsTm9kZSA9IG1vZGVsTm9kZXNbIG1vZGVsLklEIF07XG4gICAgICAgICAgICAgICAgc2V0TG9va0F0UHJvcGVydGllcyggRkJYVHJlZSwgbW9kZWwsIG1vZGVsTm9kZSwgY29ubmVjdGlvbnMsIHNjZW5lR3JhcGggKTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50Q29ubmVjdGlvbnMgPSBjb25uZWN0aW9ucy5nZXQoIG1vZGVsLklEICkucGFyZW50cztcbiAgICBcbiAgICAgICAgICAgICAgICBwYXJlbnRDb25uZWN0aW9ucy5mb3JFYWNoKCBmdW5jdGlvbiAoIGNvbm5lY3Rpb24gKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnQgPSBtb2RlbE1hcC5nZXQoIGNvbm5lY3Rpb24uSUQgKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBwYXJlbnQgIT09IHVuZGVmaW5lZCApIHBhcmVudC5hZGQoIG1vZGVsICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggbW9kZWwucGFyZW50ID09PSBudWxsICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzY2VuZUdyYXBoLmFkZCggbW9kZWwgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgXG4gICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICBiaW5kU2tlbGV0b24oIEZCWFRyZWUsIHNrZWxldG9ucywgZ2VvbWV0cnlNYXAsIG1vZGVsTWFwLCBjb25uZWN0aW9ucyApO1xuICAgIFxuICAgICAgICAgICAgYWRkQW5pbWF0aW9ucyggRkJYVHJlZSwgY29ubmVjdGlvbnMsIHNjZW5lR3JhcGggKTtcbiAgICBcbiAgICAgICAgICAgIGNyZWF0ZUFtYmllbnRMaWdodCggRkJYVHJlZSwgc2NlbmVHcmFwaCApO1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuIHNjZW5lR3JhcGg7XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gcGFyc2Ugbm9kZXMgaW4gRkJYVHJlZS5PYmplY3RzLk1vZGVsXG4gICAgICAgIGZ1bmN0aW9uIHBhcnNlTW9kZWxzKCBGQlhUcmVlLCBza2VsZXRvbnMsIGdlb21ldHJ5TWFwLCBtYXRlcmlhbE1hcCwgY29ubmVjdGlvbnMgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgbW9kZWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICB2YXIgbW9kZWxOb2RlcyA9IEZCWFRyZWUuT2JqZWN0cy5Nb2RlbDtcbiAgICBcbiAgICAgICAgICAgIGZvciAoIHZhciBub2RlSUQgaW4gbW9kZWxOb2RlcyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBwYXJzZUludCggbm9kZUlEICk7XG4gICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBtb2RlbE5vZGVzWyBub2RlSUQgXTtcbiAgICAgICAgICAgICAgICB2YXIgcmVsYXRpb25zaGlwcyA9IGNvbm5lY3Rpb25zLmdldCggaWQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgbW9kZWwgPSBidWlsZFNrZWxldG9uKCByZWxhdGlvbnNoaXBzLCBza2VsZXRvbnMsIGlkLCBub2RlLmF0dHJOYW1lICk7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCAhIG1vZGVsICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBub2RlLmF0dHJUeXBlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnQ2FtZXJhJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbCA9IGNyZWF0ZUNhbWVyYSggRkJYVHJlZSwgcmVsYXRpb25zaGlwcyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnTGlnaHQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsID0gY3JlYXRlTGlnaHQoIEZCWFRyZWUsIHJlbGF0aW9uc2hpcHMgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ01lc2gnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsID0gY3JlYXRlTWVzaCggRkJYVHJlZSwgcmVsYXRpb25zaGlwcywgZ2VvbWV0cnlNYXAsIG1hdGVyaWFsTWFwICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdOdXJic0N1cnZlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbCA9IGNyZWF0ZUN1cnZlKCByZWxhdGlvbnNoaXBzLCBnZW9tZXRyeU1hcCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnTGltYk5vZGUnOiAvLyB1c3VhbGx5IGFzc29jaWF0ZWQgd2l0aCBhIEJvbmUsIGhvd2V2ZXIgaWYgYSBCb25lIHdhcyBub3QgY3JlYXRlZCB3ZSdsbCBtYWtlIGEgR3JvdXAgaW5zdGVhZFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnTnVsbCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsID0gbmV3IFRIUkVFLkdyb3VwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbW9kZWwubmFtZSA9IFRIUkVFLlByb3BlcnR5QmluZGluZy5zYW5pdGl6ZU5vZGVOYW1lKCBub2RlLmF0dHJOYW1lICk7XG4gICAgICAgICAgICAgICAgICAgIG1vZGVsLklEID0gaWQ7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHNldE1vZGVsVHJhbnNmb3JtcyggRkJYVHJlZSwgbW9kZWwsIG5vZGUgKTtcbiAgICAgICAgICAgICAgICBtb2RlbE1hcC5zZXQoIGlkLCBtb2RlbCApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIG1vZGVsTWFwO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkU2tlbGV0b24oIHJlbGF0aW9uc2hpcHMsIHNrZWxldG9ucywgaWQsIG5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgYm9uZSA9IG51bGw7XG4gICAgXG4gICAgICAgICAgICByZWxhdGlvbnNoaXBzLnBhcmVudHMuZm9yRWFjaCggZnVuY3Rpb24gKCBwYXJlbnQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIElEIGluIHNrZWxldG9ucyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNrZWxldG9uID0gc2tlbGV0b25zWyBJRCBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBza2VsZXRvbi5yYXdCb25lcy5mb3JFYWNoKCBmdW5jdGlvbiAoIHJhd0JvbmUsIGkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHJhd0JvbmUuSUQgPT09IHBhcmVudC5JRCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ViQm9uZSA9IGJvbmU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZSA9IG5ldyBUSFJFRS5Cb25lKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZS5tYXRyaXhXb3JsZC5jb3B5KCByYXdCb25lLnRyYW5zZm9ybUxpbmsgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgbmFtZSBhbmQgaWQgaGVyZSAtIG90aGVyd2lzZSBpbiBjYXNlcyB3aGVyZSBcInN1YkJvbmVcIiBpcyBjcmVhdGVkIGl0IHdpbGwgbm90IGhhdmUgYSBuYW1lIC8gaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lLm5hbWUgPSBUSFJFRS5Qcm9wZXJ0eUJpbmRpbmcuc2FuaXRpemVOb2RlTmFtZSggbmFtZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmUuSUQgPSBpZDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBza2VsZXRvbi5ib25lc1sgaSBdID0gYm9uZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBjYXNlcyB3aGVyZSBhIGJvbmUgaXMgc2hhcmVkIGJldHdlZW4gbXVsdGlwbGUgbWVzaGVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZHVwbGljYXRlIHRoZSBib25lIGhlcmUgYW5kIGFuZCBpdCBhcyBhIGNoaWxkIG9mIHRoZSBmaXJzdCBib25lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBzdWJCb25lICE9PSBudWxsICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lLmFkZCggc3ViQm9uZSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiBib25lO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIGNyZWF0ZSBhIFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhIG9yIFRIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYVxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVDYW1lcmEoIEZCWFRyZWUsIHJlbGF0aW9uc2hpcHMgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgbW9kZWw7XG4gICAgICAgICAgICB2YXIgY2FtZXJhQXR0cmlidXRlO1xuICAgIFxuICAgICAgICAgICAgcmVsYXRpb25zaGlwcy5jaGlsZHJlbi5mb3JFYWNoKCBmdW5jdGlvbiAoIGNoaWxkICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBhdHRyID0gRkJYVHJlZS5PYmplY3RzLk5vZGVBdHRyaWJ1dGVbIGNoaWxkLklEIF07XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBhdHRyICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhbWVyYUF0dHJpYnV0ZSA9IGF0dHI7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgaWYgKCBjYW1lcmFBdHRyaWJ1dGUgPT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBtb2RlbCA9IG5ldyBUSFJFRS5PYmplY3QzRCgpO1xuICAgIFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKCBjYW1lcmFBdHRyaWJ1dGUuQ2FtZXJhUHJvamVjdGlvblR5cGUgIT09IHVuZGVmaW5lZCAmJiBjYW1lcmFBdHRyaWJ1dGUuQ2FtZXJhUHJvamVjdGlvblR5cGUudmFsdWUgPT09IDEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSAxO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgbmVhckNsaXBwaW5nUGxhbmUgPSAxO1xuICAgICAgICAgICAgICAgIGlmICggY2FtZXJhQXR0cmlidXRlLk5lYXJQbGFuZSAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBuZWFyQ2xpcHBpbmdQbGFuZSA9IGNhbWVyYUF0dHJpYnV0ZS5OZWFyUGxhbmUudmFsdWUgLyAxMDAwO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZmFyQ2xpcHBpbmdQbGFuZSA9IDEwMDA7XG4gICAgICAgICAgICAgICAgaWYgKCBjYW1lcmFBdHRyaWJ1dGUuRmFyUGxhbmUgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZmFyQ2xpcHBpbmdQbGFuZSA9IGNhbWVyYUF0dHJpYnV0ZS5GYXJQbGFuZS52YWx1ZSAvIDEwMDA7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgIFxuICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBjYW1lcmFBdHRyaWJ1dGUuQXNwZWN0V2lkdGggIT09IHVuZGVmaW5lZCAmJiBjYW1lcmFBdHRyaWJ1dGUuQXNwZWN0SGVpZ2h0ICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoID0gY2FtZXJhQXR0cmlidXRlLkFzcGVjdFdpZHRoLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQgPSBjYW1lcmFBdHRyaWJ1dGUuQXNwZWN0SGVpZ2h0LnZhbHVlO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgYXNwZWN0ID0gd2lkdGggLyBoZWlnaHQ7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGZvdiA9IDQ1O1xuICAgICAgICAgICAgICAgIGlmICggY2FtZXJhQXR0cmlidXRlLkZpZWxkT2ZWaWV3ICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGZvdiA9IGNhbWVyYUF0dHJpYnV0ZS5GaWVsZE9mVmlldy52YWx1ZTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGZvY2FsTGVuZ3RoID0gY2FtZXJhQXR0cmlidXRlLkZvY2FsTGVuZ3RoID8gY2FtZXJhQXR0cmlidXRlLkZvY2FsTGVuZ3RoLnZhbHVlIDogbnVsbDtcbiAgICBcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKCB0eXBlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IC8vIFBlcnNwZWN0aXZlXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbCA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSggZm92LCBhc3BlY3QsIG5lYXJDbGlwcGluZ1BsYW5lLCBmYXJDbGlwcGluZ1BsYW5lICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGZvY2FsTGVuZ3RoICE9PSBudWxsICkgbW9kZWwuc2V0Rm9jYWxMZW5ndGgoIGZvY2FsTGVuZ3RoICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiAvLyBPcnRob2dyYXBoaWNcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsID0gbmV3IFRIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYSggLSB3aWR0aCAvIDIsIHdpZHRoIC8gMiwgaGVpZ2h0IC8gMiwgLSBoZWlnaHQgLyAyLCBuZWFyQ2xpcHBpbmdQbGFuZSwgZmFyQ2xpcHBpbmdQbGFuZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oICdUSFJFRS5GQlhMb2FkZXI6IFVua25vd24gY2FtZXJhIHR5cGUgJyArIHR5cGUgKyAnLicgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsID0gbmV3IFRIUkVFLk9iamVjdDNEKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gbW9kZWw7XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gQ3JlYXRlIGEgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCwgVEhSRUUuUG9pbnRMaWdodCBvciBUSFJFRS5TcG90TGlnaHRcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlTGlnaHQoIEZCWFRyZWUsIHJlbGF0aW9uc2hpcHMgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgbW9kZWw7XG4gICAgICAgICAgICB2YXIgbGlnaHRBdHRyaWJ1dGU7XG4gICAgXG4gICAgICAgICAgICByZWxhdGlvbnNoaXBzLmNoaWxkcmVuLmZvckVhY2goIGZ1bmN0aW9uICggY2hpbGQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGF0dHIgPSBGQlhUcmVlLk9iamVjdHMuTm9kZUF0dHJpYnV0ZVsgY2hpbGQuSUQgXTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGF0dHIgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbGlnaHRBdHRyaWJ1dGUgPSBhdHRyO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgIGlmICggbGlnaHRBdHRyaWJ1dGUgPT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBtb2RlbCA9IG5ldyBUSFJFRS5PYmplY3QzRCgpO1xuICAgIFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgdHlwZTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBMaWdodFR5cGUgY2FuIGJlIHVuZGVmaW5lZCBmb3IgUG9pbnQgbGlnaHRzXG4gICAgICAgICAgICAgICAgaWYgKCBsaWdodEF0dHJpYnV0ZS5MaWdodFR5cGUgPT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9IDA7XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9IGxpZ2h0QXR0cmlidXRlLkxpZ2h0VHlwZS52YWx1ZTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGNvbG9yID0gMHhmZmZmZmY7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBsaWdodEF0dHJpYnV0ZS5Db2xvciAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjb2xvciA9IG5ldyBUSFJFRS5Db2xvcigpLmZyb21BcnJheSggbGlnaHRBdHRyaWJ1dGUuQ29sb3IudmFsdWUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGludGVuc2l0eSA9ICggbGlnaHRBdHRyaWJ1dGUuSW50ZW5zaXR5ID09PSB1bmRlZmluZWQgKSA/IDEgOiBsaWdodEF0dHJpYnV0ZS5JbnRlbnNpdHkudmFsdWUgLyAxMDA7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gbGlnaHQgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICBpZiAoIGxpZ2h0QXR0cmlidXRlLkNhc3RMaWdodE9uT2JqZWN0ICE9PSB1bmRlZmluZWQgJiYgbGlnaHRBdHRyaWJ1dGUuQ2FzdExpZ2h0T25PYmplY3QudmFsdWUgPT09IDAgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGludGVuc2l0eSA9IDA7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkaXN0YW5jZSA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKCBsaWdodEF0dHJpYnV0ZS5GYXJBdHRlbnVhdGlvbkVuZCAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGxpZ2h0QXR0cmlidXRlLkVuYWJsZUZhckF0dGVudWF0aW9uICE9PSB1bmRlZmluZWQgJiYgbGlnaHRBdHRyaWJ1dGUuRW5hYmxlRmFyQXR0ZW51YXRpb24udmFsdWUgPT09IDAgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IDA7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IGxpZ2h0QXR0cmlidXRlLkZhckF0dGVudWF0aW9uRW5kLnZhbHVlIC8gMTAwMDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBjb3VsZCB0aGlzIGJlIGNhbGN1bGF0ZWQgbGluZWFybHkgZnJvbSBGYXJBdHRlbnVhdGlvblN0YXJ0IHRvIEZhckF0dGVudWF0aW9uRW5kP1xuICAgICAgICAgICAgICAgIHZhciBkZWNheSA9IDE7XG4gICAgXG4gICAgICAgICAgICAgICAgc3dpdGNoICggdHlwZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiAvLyBQb2ludFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwgPSBuZXcgVEhSRUUuUG9pbnRMaWdodCggY29sb3IsIGludGVuc2l0eSwgZGlzdGFuY2UsIGRlY2F5ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiAvLyBEaXJlY3Rpb25hbFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwgPSBuZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCggY29sb3IsIGludGVuc2l0eSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogLy8gU3BvdFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFuZ2xlID0gTWF0aC5QSSAvIDM7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGxpZ2h0QXR0cmlidXRlLklubmVyQW5nbGUgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZSA9IFRIUkVFLk1hdGguZGVnVG9SYWQoIGxpZ2h0QXR0cmlidXRlLklubmVyQW5nbGUudmFsdWUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwZW51bWJyYSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGxpZ2h0QXR0cmlidXRlLk91dGVyQW5nbGUgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiB0aGlzIGlzIG5vdCBjb3JyZWN0IC0gRkJYIGNhbGN1bGF0ZXMgb3V0ZXIgYW5kIGlubmVyIGFuZ2xlIGluIGRlZ3JlZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aXRoIE91dGVyQW5nbGUgPiBJbm5lckFuZ2xlICYmIE91dGVyQW5nbGUgPD0gTWF0aC5QSVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdoaWxlIHRocmVlLmpzIHVzZXMgYSBwZW51bWJyYSBiZXR3ZWVuICgwLCAxKSB0byBhdHRlbnVhdGUgdGhlIGlubmVyIGFuZ2xlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVudW1icmEgPSBUSFJFRS5NYXRoLmRlZ1RvUmFkKCBsaWdodEF0dHJpYnV0ZS5PdXRlckFuZ2xlLnZhbHVlICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVudW1icmEgPSBNYXRoLm1heCggcGVudW1icmEsIDEgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsID0gbmV3IFRIUkVFLlNwb3RMaWdodCggY29sb3IsIGludGVuc2l0eSwgZGlzdGFuY2UsIGFuZ2xlLCBwZW51bWJyYSwgZGVjYXkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCAnVEhSRUUuRkJYTG9hZGVyOiBVbmtub3duIGxpZ2h0IHR5cGUgJyArIGxpZ2h0QXR0cmlidXRlLkxpZ2h0VHlwZS52YWx1ZSArICcsIGRlZmF1bHRpbmcgdG8gYSBUSFJFRS5Qb2ludExpZ2h0LicgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsID0gbmV3IFRIUkVFLlBvaW50TGlnaHQoIGNvbG9yLCBpbnRlbnNpdHkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGxpZ2h0QXR0cmlidXRlLkNhc3RTaGFkb3dzICE9PSB1bmRlZmluZWQgJiYgbGlnaHRBdHRyaWJ1dGUuQ2FzdFNoYWRvd3MudmFsdWUgPT09IDEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsLmNhc3RTaGFkb3cgPSB0cnVlO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiBtb2RlbDtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVNZXNoKCBGQlhUcmVlLCByZWxhdGlvbnNoaXBzLCBnZW9tZXRyeU1hcCwgbWF0ZXJpYWxNYXAgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgbW9kZWw7XG4gICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBudWxsO1xuICAgICAgICAgICAgdmFyIG1hdGVyaWFsID0gbnVsbDtcbiAgICAgICAgICAgIHZhciBtYXRlcmlhbHMgPSBbXTtcbiAgICBcbiAgICAgICAgICAgIC8vIGdldCBnZW9tZXRyeSBhbmQgbWF0ZXJpYWxzKHMpIGZyb20gY29ubmVjdGlvbnNcbiAgICAgICAgICAgIHJlbGF0aW9uc2hpcHMuY2hpbGRyZW4uZm9yRWFjaCggZnVuY3Rpb24gKCBjaGlsZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGdlb21ldHJ5TWFwLmhhcyggY2hpbGQuSUQgKSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkgPSBnZW9tZXRyeU1hcC5nZXQoIGNoaWxkLklEICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGlmICggbWF0ZXJpYWxNYXAuaGFzKCBjaGlsZC5JRCApICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbHMucHVzaCggbWF0ZXJpYWxNYXAuZ2V0KCBjaGlsZC5JRCApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgaWYgKCBtYXRlcmlhbHMubGVuZ3RoID4gMSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IG1hdGVyaWFscztcbiAgICBcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIG1hdGVyaWFscy5sZW5ndGggPiAwICkge1xuICAgIFxuICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gbWF0ZXJpYWxzWyAwIF07XG4gICAgXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKCB7IGNvbG9yOiAweGNjY2NjYyB9ICk7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWxzLnB1c2goIG1hdGVyaWFsICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBpZiAoICdjb2xvcicgaW4gZ2VvbWV0cnkuYXR0cmlidXRlcyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBtYXRlcmlhbHMuZm9yRWFjaCggZnVuY3Rpb24gKCBtYXRlcmlhbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwudmVydGV4Q29sb3JzID0gVEhSRUUuVmVydGV4Q29sb3JzO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGlmICggZ2VvbWV0cnkuRkJYX0RlZm9ybWVyICkge1xuICAgIFxuICAgICAgICAgICAgICAgIG1hdGVyaWFscy5mb3JFYWNoKCBmdW5jdGlvbiAoIG1hdGVyaWFsICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5za2lubmluZyA9IHRydWU7XG4gICAgXG4gICAgICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgICAgIG1vZGVsID0gbmV3IFRIUkVFLlNraW5uZWRNZXNoKCBnZW9tZXRyeSwgbWF0ZXJpYWwgKTtcbiAgICBcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgbW9kZWwgPSBuZXcgVEhSRUUuTWVzaCggZ2VvbWV0cnksIG1hdGVyaWFsICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gbW9kZWw7XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlQ3VydmUoIHJlbGF0aW9uc2hpcHMsIGdlb21ldHJ5TWFwICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIGdlb21ldHJ5ID0gcmVsYXRpb25zaGlwcy5jaGlsZHJlbi5yZWR1Y2UoIGZ1bmN0aW9uICggZ2VvLCBjaGlsZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGdlb21ldHJ5TWFwLmhhcyggY2hpbGQuSUQgKSApIGdlbyA9IGdlb21ldHJ5TWFwLmdldCggY2hpbGQuSUQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2VvO1xuICAgIFxuICAgICAgICAgICAgfSwgbnVsbCApO1xuICAgIFxuICAgICAgICAgICAgLy8gRkJYIGRvZXMgbm90IGxpc3QgbWF0ZXJpYWxzIGZvciBOdXJicyBsaW5lcywgc28gd2UnbGwganVzdCBwdXQgb3VyIG93biBpbiBoZXJlLlxuICAgICAgICAgICAgdmFyIG1hdGVyaWFsID0gbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKCB7IGNvbG9yOiAweDMzMDBmZiwgbGluZXdpZHRoOiAxIH0gKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVEhSRUUuTGluZSggZ2VvbWV0cnksIG1hdGVyaWFsICk7XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gUGFyc2UgYW1iaWVudCBjb2xvciBpbiBGQlhUcmVlLkdsb2JhbFNldHRpbmdzIC0gaWYgaXQncyBub3Qgc2V0IHRvIGJsYWNrIChkZWZhdWx0KSwgY3JlYXRlIGFuIGFtYmllbnQgbGlnaHRcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlQW1iaWVudExpZ2h0KCBGQlhUcmVlLCBzY2VuZUdyYXBoICkge1xuICAgIFxuICAgICAgICAgICAgaWYgKCAnR2xvYmFsU2V0dGluZ3MnIGluIEZCWFRyZWUgJiYgJ0FtYmllbnRDb2xvcicgaW4gRkJYVHJlZS5HbG9iYWxTZXR0aW5ncyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgYW1iaWVudENvbG9yID0gRkJYVHJlZS5HbG9iYWxTZXR0aW5ncy5BbWJpZW50Q29sb3IudmFsdWU7XG4gICAgICAgICAgICAgICAgdmFyIHIgPSBhbWJpZW50Q29sb3JbIDAgXTtcbiAgICAgICAgICAgICAgICB2YXIgZyA9IGFtYmllbnRDb2xvclsgMSBdO1xuICAgICAgICAgICAgICAgIHZhciBiID0gYW1iaWVudENvbG9yWyAyIF07XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCByICE9PSAwIHx8IGcgIT09IDAgfHwgYiAhPT0gMCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9yID0gbmV3IFRIUkVFLkNvbG9yKCByLCBnLCBiICk7XG4gICAgICAgICAgICAgICAgICAgIHNjZW5lR3JhcGguYWRkKCBuZXcgVEhSRUUuQW1iaWVudExpZ2h0KCBjb2xvciwgMSApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGZ1bmN0aW9uIHNldExvb2tBdFByb3BlcnRpZXMoIEZCWFRyZWUsIG1vZGVsLCBtb2RlbE5vZGUsIGNvbm5lY3Rpb25zLCBzY2VuZUdyYXBoICkge1xuICAgIFxuICAgICAgICAgICAgaWYgKCAnTG9va0F0UHJvcGVydHknIGluIG1vZGVsTm9kZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGRyZW4gPSBjb25uZWN0aW9ucy5nZXQoIG1vZGVsLklEICkuY2hpbGRyZW47XG4gICAgXG4gICAgICAgICAgICAgICAgY2hpbGRyZW4uZm9yRWFjaCggZnVuY3Rpb24gKCBjaGlsZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5yZWxhdGlvbnNoaXAgPT09ICdMb29rQXRQcm9wZXJ0eScgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbG9va0F0VGFyZ2V0ID0gRkJYVHJlZS5PYmplY3RzLk1vZGVsWyBjaGlsZC5JRCBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAnTGNsX1RyYW5zbGF0aW9uJyBpbiBsb29rQXRUYXJnZXQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvcyA9IGxvb2tBdFRhcmdldC5MY2xfVHJhbnNsYXRpb24udmFsdWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGlyZWN0aW9uYWxMaWdodCwgU3BvdExpZ2h0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBtb2RlbC50YXJnZXQgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwudGFyZ2V0LnBvc2l0aW9uLmZyb21BcnJheSggcG9zICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjZW5lR3JhcGguYWRkKCBtb2RlbC50YXJnZXQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyBDYW1lcmFzIGFuZCBvdGhlciBPYmplY3QzRHNcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwubG9va0F0KCBuZXcgVEhSRUUuVmVjdG9yMygpLmZyb21BcnJheSggcG9zICkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gcGFyc2UgdGhlIG1vZGVsIG5vZGUgZm9yIHRyYW5zZm9ybSBkZXRhaWxzIGFuZCBhcHBseSB0aGVtIHRvIHRoZSBtb2RlbFxuICAgICAgICBmdW5jdGlvbiBzZXRNb2RlbFRyYW5zZm9ybXMoIEZCWFRyZWUsIG1vZGVsLCBtb2RlbE5vZGUgKSB7XG4gICAgXG4gICAgICAgICAgICAvLyBodHRwOi8vaGVscC5hdXRvZGVzay5jb20vdmlldy9GQlgvMjAxNy9FTlUvP2d1aWQ9X19jcHBfcmVmX2NsYXNzX2ZieF9ldWxlcl9odG1sXG4gICAgICAgICAgICBpZiAoICdSb3RhdGlvbk9yZGVyJyBpbiBtb2RlbE5vZGUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGVudW1zID0gW1xuICAgICAgICAgICAgICAgICAgICAnWFlaJywgLy8gZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICAnWFpZJyxcbiAgICAgICAgICAgICAgICAgICAgJ1laWCcsXG4gICAgICAgICAgICAgICAgICAgICdaWFknLFxuICAgICAgICAgICAgICAgICAgICAnWVhaJyxcbiAgICAgICAgICAgICAgICAgICAgJ1pZWCcsXG4gICAgICAgICAgICAgICAgICAgICdTcGhlcmljWFlaJyxcbiAgICAgICAgICAgICAgICBdO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHBhcnNlSW50KCBtb2RlbE5vZGUuUm90YXRpb25PcmRlci52YWx1ZSwgMTAgKTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHZhbHVlID4gMCAmJiB2YWx1ZSA8IDYgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIG1vZGVsLnJvdGF0aW9uLm9yZGVyID0gZW51bXNbIHZhbHVlIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIE5vdGU6IEV1bGVyIG9yZGVyIG90aGVyIHRoYW4gWFlaIGlzIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkLCBzbyBqdXN0IGRpc3BsYXkgYSB3YXJuaW5nIGZvciBub3dcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCAnVEhSRUUuRkJYTG9hZGVyOiB1bnN1cHBvcnRlZCBFdWxlciBPcmRlcjogJXMuIEN1cnJlbnRseSBvbmx5IFhZWiBvcmRlciBpcyBzdXBwb3J0ZWQuIEFuaW1hdGlvbnMgYW5kIHJvdGF0aW9ucyBtYXkgYmUgaW5jb3JyZWN0LicsIGVudW1zWyB2YWx1ZSBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggdmFsdWUgPT09IDYgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybiggJ1RIUkVFLkZCWExvYWRlcjogdW5zdXBwb3J0ZWQgRXVsZXIgT3JkZXI6IFNwaGVyaWNhbCBYWVouIEFuaW1hdGlvbnMgYW5kIHJvdGF0aW9ucyBtYXkgYmUgaW5jb3JyZWN0LicgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBpZiAoICdMY2xfVHJhbnNsYXRpb24nIGluIG1vZGVsTm9kZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBtb2RlbC5wb3NpdGlvbi5mcm9tQXJyYXkoIG1vZGVsTm9kZS5MY2xfVHJhbnNsYXRpb24udmFsdWUgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGlmICggJ0xjbF9Sb3RhdGlvbicgaW4gbW9kZWxOb2RlICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciByb3RhdGlvbiA9IG1vZGVsTm9kZS5MY2xfUm90YXRpb24udmFsdWUubWFwKCBUSFJFRS5NYXRoLmRlZ1RvUmFkICk7XG4gICAgICAgICAgICAgICAgcm90YXRpb24ucHVzaCggJ1pZWCcgKTtcbiAgICAgICAgICAgICAgICBtb2RlbC5yb3RhdGlvbi5mcm9tQXJyYXkoIHJvdGF0aW9uICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBpZiAoICdMY2xfU2NhbGluZycgaW4gbW9kZWxOb2RlICkge1xuICAgIFxuICAgICAgICAgICAgICAgIG1vZGVsLnNjYWxlLmZyb21BcnJheSggbW9kZWxOb2RlLkxjbF9TY2FsaW5nLnZhbHVlICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBpZiAoICdQcmVSb3RhdGlvbicgaW4gbW9kZWxOb2RlICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IG1vZGVsTm9kZS5QcmVSb3RhdGlvbi52YWx1ZS5tYXAoIFRIUkVFLk1hdGguZGVnVG9SYWQgKTtcbiAgICAgICAgICAgICAgICBhcnJheVsgMyBdID0gJ1pZWCc7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHByZVJvdGF0aW9ucyA9IG5ldyBUSFJFRS5FdWxlcigpLmZyb21BcnJheSggYXJyYXkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICBwcmVSb3RhdGlvbnMgPSBuZXcgVEhSRUUuUXVhdGVybmlvbigpLnNldEZyb21FdWxlciggcHJlUm90YXRpb25zICk7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRSb3RhdGlvbiA9IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCkuc2V0RnJvbUV1bGVyKCBtb2RlbC5yb3RhdGlvbiApO1xuICAgICAgICAgICAgICAgIHByZVJvdGF0aW9ucy5tdWx0aXBseSggY3VycmVudFJvdGF0aW9uICk7XG4gICAgICAgICAgICAgICAgbW9kZWwucm90YXRpb24uc2V0RnJvbVF1YXRlcm5pb24oIHByZVJvdGF0aW9ucywgJ1pZWCcgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBmdW5jdGlvbiBiaW5kU2tlbGV0b24oIEZCWFRyZWUsIHNrZWxldG9ucywgZ2VvbWV0cnlNYXAsIG1vZGVsTWFwLCBjb25uZWN0aW9ucyApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBiaW5kTWF0cmljZXMgPSBwYXJzZVBvc2VOb2RlcyggRkJYVHJlZSApO1xuICAgIFxuICAgICAgICAgICAgZm9yICggdmFyIElEIGluIHNrZWxldG9ucyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgc2tlbGV0b24gPSBza2VsZXRvbnNbIElEIF07XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudHMgPSBjb25uZWN0aW9ucy5nZXQoIHBhcnNlSW50KCBza2VsZXRvbi5JRCApICkucGFyZW50cztcbiAgICBcbiAgICAgICAgICAgICAgICBwYXJlbnRzLmZvckVhY2goIGZ1bmN0aW9uICggcGFyZW50ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGdlb21ldHJ5TWFwLmhhcyggcGFyZW50LklEICkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2VvSUQgPSBwYXJlbnQuSUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2VvUmVsYXRpb25zaGlwcyA9IGNvbm5lY3Rpb25zLmdldCggZ2VvSUQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlb1JlbGF0aW9uc2hpcHMucGFyZW50cy5mb3JFYWNoKCBmdW5jdGlvbiAoIGdlb0Nvbm5QYXJlbnQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBtb2RlbE1hcC5oYXMoIGdlb0Nvbm5QYXJlbnQuSUQgKSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vZGVsID0gbW9kZWxNYXAuZ2V0KCBnZW9Db25uUGFyZW50LklEICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsLmJpbmQoIG5ldyBUSFJFRS5Ta2VsZXRvbiggc2tlbGV0b24uYm9uZXMgKSwgYmluZE1hdHJpY2VzWyBnZW9Db25uUGFyZW50LklEIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgZnVuY3Rpb24gcGFyc2VQb3NlTm9kZXMoIEZCWFRyZWUgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgYmluZE1hdHJpY2VzID0ge307XG4gICAgXG4gICAgICAgICAgICBpZiAoICdQb3NlJyBpbiBGQlhUcmVlLk9iamVjdHMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIEJpbmRQb3NlTm9kZSA9IEZCWFRyZWUuT2JqZWN0cy5Qb3NlO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBub2RlSUQgaW4gQmluZFBvc2VOb2RlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIEJpbmRQb3NlTm9kZVsgbm9kZUlEIF0uYXR0clR5cGUgPT09ICdCaW5kUG9zZScgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9zZU5vZGVzID0gQmluZFBvc2VOb2RlWyBub2RlSUQgXS5Qb3NlTm9kZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggQXJyYXkuaXNBcnJheSggcG9zZU5vZGVzICkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zZU5vZGVzLmZvckVhY2goIGZ1bmN0aW9uICggcG9zZU5vZGUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpbmRNYXRyaWNlc1sgcG9zZU5vZGUuTm9kZSBdID0gbmV3IFRIUkVFLk1hdHJpeDQoKS5mcm9tQXJyYXkoIHBvc2VOb2RlLk1hdHJpeC5hICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaW5kTWF0cmljZXNbIHBvc2VOb2Rlcy5Ob2RlIF0gPSBuZXcgVEhSRUUuTWF0cml4NCgpLmZyb21BcnJheSggcG9zZU5vZGVzLk1hdHJpeC5hICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gYmluZE1hdHJpY2VzO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGZ1bmN0aW9uIHBhcnNlQW5pbWF0aW9ucyggRkJYVHJlZSwgY29ubmVjdGlvbnMgKSB7XG4gICAgXG4gICAgICAgICAgICAvLyBzaW5jZSB0aGUgYWN0dWFsIHRyYW5zZm9ybWF0aW9uIGRhdGEgaXMgc3RvcmVkIGluIEZCWFRyZWUuT2JqZWN0cy5BbmltYXRpb25DdXJ2ZSxcbiAgICAgICAgICAgIC8vIGlmIHRoaXMgaXMgdW5kZWZpbmVkIHdlIGNhbiBzYWZlbHkgYXNzdW1lIHRoZXJlIGFyZSBubyBhbmltYXRpb25zXG4gICAgICAgICAgICBpZiAoIEZCWFRyZWUuT2JqZWN0cy5BbmltYXRpb25DdXJ2ZSA9PT0gdW5kZWZpbmVkICkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBcbiAgICAgICAgICAgIHZhciBjdXJ2ZU5vZGVzTWFwID0gcGFyc2VBbmltYXRpb25DdXJ2ZU5vZGVzKCBGQlhUcmVlICk7XG4gICAgXG4gICAgICAgICAgICBwYXJzZUFuaW1hdGlvbkN1cnZlcyggRkJYVHJlZSwgY29ubmVjdGlvbnMsIGN1cnZlTm9kZXNNYXAgKTtcbiAgICBcbiAgICAgICAgICAgIHZhciBsYXllcnNNYXAgPSBwYXJzZUFuaW1hdGlvbkxheWVycyggRkJYVHJlZSwgY29ubmVjdGlvbnMsIGN1cnZlTm9kZXNNYXAgKTtcbiAgICAgICAgICAgIHZhciByYXdDbGlwcyA9IHBhcnNlQW5pbVN0YWNrcyggRkJYVHJlZSwgY29ubmVjdGlvbnMsIGxheWVyc01hcCApO1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuIHJhd0NsaXBzO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIHBhcnNlIG5vZGVzIGluIEZCWFRyZWUuT2JqZWN0cy5BbmltYXRpb25DdXJ2ZU5vZGVcbiAgICAgICAgLy8gZWFjaCBBbmltYXRpb25DdXJ2ZU5vZGUgaG9sZHMgZGF0YSBmb3IgYW4gYW5pbWF0aW9uIHRyYW5zZm9ybSBmb3IgYSBtb2RlbCAoZS5nLiBsZWZ0IGFybSByb3RhdGlvbiApXG4gICAgICAgIC8vIGFuZCBpcyByZWZlcmVuY2VkIGJ5IGFuIEFuaW1hdGlvbkxheWVyXG4gICAgICAgIGZ1bmN0aW9uIHBhcnNlQW5pbWF0aW9uQ3VydmVOb2RlcyggRkJYVHJlZSApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciByYXdDdXJ2ZU5vZGVzID0gRkJYVHJlZS5PYmplY3RzLkFuaW1hdGlvbkN1cnZlTm9kZTtcbiAgICBcbiAgICAgICAgICAgIHZhciBjdXJ2ZU5vZGVzTWFwID0gbmV3IE1hcCgpO1xuICAgIFxuICAgICAgICAgICAgZm9yICggdmFyIG5vZGVJRCBpbiByYXdDdXJ2ZU5vZGVzICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciByYXdDdXJ2ZU5vZGUgPSByYXdDdXJ2ZU5vZGVzWyBub2RlSUQgXTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHJhd0N1cnZlTm9kZS5hdHRyTmFtZS5tYXRjaCggL1N8UnxULyApICE9PSBudWxsICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VydmVOb2RlID0ge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHJhd0N1cnZlTm9kZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHI6IHJhd0N1cnZlTm9kZS5hdHRyTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnZlczoge30sXG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGN1cnZlTm9kZXNNYXAuc2V0KCBjdXJ2ZU5vZGUuaWQsIGN1cnZlTm9kZSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiBjdXJ2ZU5vZGVzTWFwO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIHBhcnNlIG5vZGVzIGluIEZCWFRyZWUuT2JqZWN0cy5BbmltYXRpb25DdXJ2ZSBhbmQgY29ubmVjdCB0aGVtIHVwIHRvXG4gICAgICAgIC8vIHByZXZpb3VzbHkgcGFyc2VkIEFuaW1hdGlvbkN1cnZlTm9kZXMuIEVhY2ggQW5pbWF0aW9uQ3VydmUgaG9sZHMgZGF0YSBmb3IgYSBzaW5nbGUgYW5pbWF0ZWRcbiAgICAgICAgLy8gYXhpcyAoIGUuZy4gdGltZXMgYW5kIHZhbHVlcyBvZiB4IHJvdGF0aW9uKVxuICAgICAgICBmdW5jdGlvbiBwYXJzZUFuaW1hdGlvbkN1cnZlcyggRkJYVHJlZSwgY29ubmVjdGlvbnMsIGN1cnZlTm9kZXNNYXAgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgcmF3Q3VydmVzID0gRkJYVHJlZS5PYmplY3RzLkFuaW1hdGlvbkN1cnZlO1xuICAgIFxuICAgICAgICAgICAgZm9yICggdmFyIG5vZGVJRCBpbiByYXdDdXJ2ZXMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGFuaW1hdGlvbkN1cnZlID0ge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZDogcmF3Q3VydmVzWyBub2RlSUQgXS5pZCxcbiAgICAgICAgICAgICAgICAgICAgdGltZXM6IHJhd0N1cnZlc1sgbm9kZUlEIF0uS2V5VGltZS5hLm1hcCggY29udmVydEZCWFRpbWVUb1NlY29uZHMgKSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiByYXdDdXJ2ZXNbIG5vZGVJRCBdLktleVZhbHVlRmxvYXQuYSxcbiAgICBcbiAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciByZWxhdGlvbnNoaXBzID0gY29ubmVjdGlvbnMuZ2V0KCBhbmltYXRpb25DdXJ2ZS5pZCApO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggcmVsYXRpb25zaGlwcyAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgYW5pbWF0aW9uQ3VydmVJRCA9IHJlbGF0aW9uc2hpcHMucGFyZW50c1sgMCBdLklEO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYW5pbWF0aW9uQ3VydmVSZWxhdGlvbnNoaXAgPSByZWxhdGlvbnNoaXBzLnBhcmVudHNbIDAgXS5yZWxhdGlvbnNoaXA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBheGlzID0gJyc7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggYW5pbWF0aW9uQ3VydmVSZWxhdGlvbnNoaXAubWF0Y2goIC9YLyApICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgYXhpcyA9ICd4JztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggYW5pbWF0aW9uQ3VydmVSZWxhdGlvbnNoaXAubWF0Y2goIC9ZLyApICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgYXhpcyA9ICd5JztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggYW5pbWF0aW9uQ3VydmVSZWxhdGlvbnNoaXAubWF0Y2goIC9aLyApICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgYXhpcyA9ICd6JztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGN1cnZlTm9kZXNNYXAuZ2V0KCBhbmltYXRpb25DdXJ2ZUlEICkuY3VydmVzWyBheGlzIF0gPSBhbmltYXRpb25DdXJ2ZTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gcGFyc2Ugbm9kZXMgaW4gRkJYVHJlZS5PYmplY3RzLkFuaW1hdGlvbkxheWVyLiBFYWNoIGxheWVycyBob2xkcyByZWZlcmVuY2VzXG4gICAgICAgIC8vIHRvIHZhcmlvdXMgQW5pbWF0aW9uQ3VydmVOb2RlcyBhbmQgaXMgcmVmZXJlbmNlZCBieSBhbiBBbmltYXRpb25TdGFjayBub2RlXG4gICAgICAgIC8vIG5vdGU6IHRoZW9yZXRpY2FsbHkgYSBzdGFjayBjYW4gbXVsdGlwbGUgbGF5ZXJzLCBob3dldmVyIGluIHByYWN0aWNlIHRoZXJlIGFsd2F5cyBzZWVtcyB0byBiZSBvbmUgcGVyIHN0YWNrXG4gICAgICAgIGZ1bmN0aW9uIHBhcnNlQW5pbWF0aW9uTGF5ZXJzKCBGQlhUcmVlLCBjb25uZWN0aW9ucywgY3VydmVOb2Rlc01hcCApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciByYXdMYXllcnMgPSBGQlhUcmVlLk9iamVjdHMuQW5pbWF0aW9uTGF5ZXI7XG4gICAgXG4gICAgICAgICAgICB2YXIgbGF5ZXJzTWFwID0gbmV3IE1hcCgpO1xuICAgIFxuICAgICAgICAgICAgZm9yICggdmFyIG5vZGVJRCBpbiByYXdMYXllcnMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGxheWVyQ3VydmVOb2RlcyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBjb25uZWN0aW9uID0gY29ubmVjdGlvbnMuZ2V0KCBwYXJzZUludCggbm9kZUlEICkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGNvbm5lY3Rpb24gIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gYWxsIHRoZSBhbmltYXRpb25DdXJ2ZU5vZGVzIHVzZWQgaW4gdGhlIGxheWVyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IGNvbm5lY3Rpb24uY2hpbGRyZW47XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuLmZvckVhY2goIGZ1bmN0aW9uICggY2hpbGQsIGkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGN1cnZlTm9kZXNNYXAuaGFzKCBjaGlsZC5JRCApICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJ2ZU5vZGUgPSBjdXJ2ZU5vZGVzTWFwLmdldCggY2hpbGQuSUQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayB0aGF0IHRoZSBjdXJ2ZXMgYXJlIGRlZmluZWQgZm9yIGF0IGxlYXN0IG9uZSBheGlzLCBvdGhlcndpc2UgaWdub3JlIHRoZSBjdXJ2ZU5vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGN1cnZlTm9kZS5jdXJ2ZXMueCAhPT0gdW5kZWZpbmVkIHx8IGN1cnZlTm9kZS5jdXJ2ZXMueSAhPT0gdW5kZWZpbmVkIHx8IGN1cnZlTm9kZS5jdXJ2ZXMueiAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGxheWVyQ3VydmVOb2Rlc1sgaSBdID09PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZWxJRDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25zLmdldCggY2hpbGQuSUQgKS5wYXJlbnRzLmZvckVhY2goIGZ1bmN0aW9uICggcGFyZW50ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcGFyZW50LnJlbGF0aW9uc2hpcCAhPT0gdW5kZWZpbmVkICkgbW9kZWxJRCA9IHBhcmVudC5JRDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByYXdNb2RlbCA9IEZCWFRyZWUuT2JqZWN0cy5Nb2RlbFsgbW9kZWxJRC50b1N0cmluZygpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbE5hbWU6IFRIUkVFLlByb3BlcnR5QmluZGluZy5zYW5pdGl6ZU5vZGVOYW1lKCByYXdNb2RlbC5hdHRyTmFtZSApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxQb3NpdGlvbjogWyAwLCAwLCAwIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFJvdGF0aW9uOiBbIDAsIDAsIDAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsU2NhbGU6IFsgMSwgMSwgMSBdLFxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggJ0xjbF9UcmFuc2xhdGlvbicgaW4gcmF3TW9kZWwgKSBub2RlLmluaXRpYWxQb3NpdGlvbiA9IHJhd01vZGVsLkxjbF9UcmFuc2xhdGlvbi52YWx1ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggJ0xjbF9Sb3RhdGlvbicgaW4gcmF3TW9kZWwgKSBub2RlLmluaXRpYWxSb3RhdGlvbiA9IHJhd01vZGVsLkxjbF9Sb3RhdGlvbi52YWx1ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggJ0xjbF9TY2FsaW5nJyBpbiByYXdNb2RlbCApIG5vZGUuaW5pdGlhbFNjYWxlID0gcmF3TW9kZWwuTGNsX1NjYWxpbmcudmFsdWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgYW5pbWF0ZWQgbW9kZWwgaXMgcHJlIHJvdGF0ZWQsIHdlJ2xsIGhhdmUgdG8gYXBwbHkgdGhlIHByZSByb3RhdGlvbnMgdG8gZXZlcnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuaW1hdGlvbiB2YWx1ZSBhcyB3ZWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICdQcmVSb3RhdGlvbicgaW4gcmF3TW9kZWwgKSBub2RlLnByZVJvdGF0aW9ucyA9IHJhd01vZGVsLlByZVJvdGF0aW9uLnZhbHVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJDdXJ2ZU5vZGVzWyBpIF0gPSBub2RlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyQ3VydmVOb2Rlc1sgaSBdWyBjdXJ2ZU5vZGUuYXR0ciBdID0gY3VydmVOb2RlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBsYXllcnNNYXAuc2V0KCBwYXJzZUludCggbm9kZUlEICksIGxheWVyQ3VydmVOb2RlcyApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiBsYXllcnNNYXA7XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gcGFyc2Ugbm9kZXMgaW4gRkJYVHJlZS5PYmplY3RzLkFuaW1hdGlvblN0YWNrLiBUaGVzZSBhcmUgdGhlIHRvcCBsZXZlbCBub2RlIGluIHRoZSBhbmltYXRpb25cbiAgICAgICAgLy8gaGllcmFyY2h5LiBFYWNoIFN0YWNrIG5vZGUgd2lsbCBiZSB1c2VkIHRvIGNyZWF0ZSBhIFRIUkVFLkFuaW1hdGlvbkNsaXBcbiAgICAgICAgZnVuY3Rpb24gcGFyc2VBbmltU3RhY2tzKCBGQlhUcmVlLCBjb25uZWN0aW9ucywgbGF5ZXJzTWFwICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIHJhd1N0YWNrcyA9IEZCWFRyZWUuT2JqZWN0cy5BbmltYXRpb25TdGFjaztcbiAgICBcbiAgICAgICAgICAgIC8vIGNvbm5lY3QgdGhlIHN0YWNrcyAoY2xpcHMpIHVwIHRvIHRoZSBsYXllcnNcbiAgICAgICAgICAgIHZhciByYXdDbGlwcyA9IHt9O1xuICAgIFxuICAgICAgICAgICAgZm9yICggdmFyIG5vZGVJRCBpbiByYXdTdGFja3MgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gY29ubmVjdGlvbnMuZ2V0KCBwYXJzZUludCggbm9kZUlEICkgKS5jaGlsZHJlbjtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGNoaWxkcmVuLmxlbmd0aCA+IDEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIGl0IHNlZW1zIGxpa2Ugc3RhY2tzIHdpbGwgYWx3YXlzIGJlIGFzc29jaWF0ZWQgd2l0aCBhIHNpbmdsZSBsYXllci4gQnV0IGp1c3QgaW4gY2FzZSB0aGVyZSBhcmUgZmlsZXNcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hlcmUgdGhlcmUgYXJlIG11bHRpcGxlIGxheWVycyBwZXIgc3RhY2ssIHdlJ2xsIGRpc3BsYXkgYSB3YXJuaW5nXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybiggJ1RIUkVFLkZCWExvYWRlcjogRW5jb3VudGVyZWQgYW4gYW5pbWF0aW9uIHN0YWNrIHdpdGggbXVsdGlwbGUgbGF5ZXJzLCB0aGlzIGlzIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkLiBJZ25vcmluZyBzdWJzZXF1ZW50IGxheWVycy4nICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHZhciBsYXllciA9IGxheWVyc01hcC5nZXQoIGNoaWxkcmVuWyAwIF0uSUQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICByYXdDbGlwc1sgbm9kZUlEIF0gPSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHJhd1N0YWNrc1sgbm9kZUlEIF0uYXR0ck5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGxheWVyOiBsYXllcixcbiAgICBcbiAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIHJhd0NsaXBzO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIHRha2UgcmF3IGFuaW1hdGlvbiBkYXRhIGZyb20gcGFyc2VBbmltYXRpb25zIGFuZCBjb25uZWN0IGl0IHVwIHRvIHRoZSBsb2FkZWQgbW9kZWxzXG4gICAgICAgIGZ1bmN0aW9uIGFkZEFuaW1hdGlvbnMoIEZCWFRyZWUsIGNvbm5lY3Rpb25zLCBzY2VuZUdyYXBoICkge1xuICAgIFxuICAgICAgICAgICAgc2NlbmVHcmFwaC5hbmltYXRpb25zID0gW107XG4gICAgXG4gICAgICAgICAgICB2YXIgcmF3Q2xpcHMgPSBwYXJzZUFuaW1hdGlvbnMoIEZCWFRyZWUsIGNvbm5lY3Rpb25zICk7XG4gICAgXG4gICAgICAgICAgICBpZiAoIHJhd0NsaXBzID09PSB1bmRlZmluZWQgKSByZXR1cm47XG4gICAgXG4gICAgXG4gICAgICAgICAgICBmb3IgKCB2YXIga2V5IGluIHJhd0NsaXBzICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciByYXdDbGlwID0gcmF3Q2xpcHNbIGtleSBdO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBjbGlwID0gYWRkQ2xpcCggcmF3Q2xpcCApO1xuICAgIFxuICAgICAgICAgICAgICAgIHNjZW5lR3JhcGguYW5pbWF0aW9ucy5wdXNoKCBjbGlwICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgZnVuY3Rpb24gYWRkQ2xpcCggcmF3Q2xpcCApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciB0cmFja3MgPSBbXTtcbiAgICBcbiAgICAgICAgICAgIHJhd0NsaXAubGF5ZXIuZm9yRWFjaCggZnVuY3Rpb24gKCByYXdUcmFja3MgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdHJhY2tzID0gdHJhY2tzLmNvbmNhdCggZ2VuZXJhdGVUcmFja3MoIHJhd1RyYWNrcyApICk7XG4gICAgXG4gICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gbmV3IFRIUkVFLkFuaW1hdGlvbkNsaXAoIHJhd0NsaXAubmFtZSwgLSAxLCB0cmFja3MgKTtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZVRyYWNrcyggcmF3VHJhY2tzICkge1xuICAgIFxuICAgICAgICAgICAgdmFyIHRyYWNrcyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgaWYgKCByYXdUcmFja3MuVCAhPT0gdW5kZWZpbmVkICYmIE9iamVjdC5rZXlzKCByYXdUcmFja3MuVC5jdXJ2ZXMgKS5sZW5ndGggPiAwICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvblRyYWNrID0gZ2VuZXJhdGVWZWN0b3JUcmFjayggcmF3VHJhY2tzLm1vZGVsTmFtZSwgcmF3VHJhY2tzLlQuY3VydmVzLCByYXdUcmFja3MuaW5pdGlhbFBvc2l0aW9uLCAncG9zaXRpb24nICk7XG4gICAgICAgICAgICAgICAgaWYgKCBwb3NpdGlvblRyYWNrICE9PSB1bmRlZmluZWQgKSB0cmFja3MucHVzaCggcG9zaXRpb25UcmFjayApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgaWYgKCByYXdUcmFja3MuUiAhPT0gdW5kZWZpbmVkICYmIE9iamVjdC5rZXlzKCByYXdUcmFja3MuUi5jdXJ2ZXMgKS5sZW5ndGggPiAwICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciByb3RhdGlvblRyYWNrID0gZ2VuZXJhdGVSb3RhdGlvblRyYWNrKCByYXdUcmFja3MubW9kZWxOYW1lLCByYXdUcmFja3MuUi5jdXJ2ZXMsIHJhd1RyYWNrcy5pbml0aWFsUm90YXRpb24sIHJhd1RyYWNrcy5wcmVSb3RhdGlvbnMgKTtcbiAgICAgICAgICAgICAgICBpZiAoIHJvdGF0aW9uVHJhY2sgIT09IHVuZGVmaW5lZCApIHRyYWNrcy5wdXNoKCByb3RhdGlvblRyYWNrICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBpZiAoIHJhd1RyYWNrcy5TICE9PSB1bmRlZmluZWQgJiYgT2JqZWN0LmtleXMoIHJhd1RyYWNrcy5TLmN1cnZlcyApLmxlbmd0aCA+IDAgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHNjYWxlVHJhY2sgPSBnZW5lcmF0ZVZlY3RvclRyYWNrKCByYXdUcmFja3MubW9kZWxOYW1lLCByYXdUcmFja3MuUy5jdXJ2ZXMsIHJhd1RyYWNrcy5pbml0aWFsU2NhbGUsICdzY2FsZScgKTtcbiAgICAgICAgICAgICAgICBpZiAoIHNjYWxlVHJhY2sgIT09IHVuZGVmaW5lZCApIHRyYWNrcy5wdXNoKCBzY2FsZVRyYWNrICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gdHJhY2tzO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlVmVjdG9yVHJhY2soIG1vZGVsTmFtZSwgY3VydmVzLCBpbml0aWFsVmFsdWUsIHR5cGUgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgdGltZXMgPSBnZXRUaW1lc0ZvckFsbEF4ZXMoIGN1cnZlcyApO1xuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IGdldEtleWZyYW1lVHJhY2tWYWx1ZXMoIHRpbWVzLCBjdXJ2ZXMsIGluaXRpYWxWYWx1ZSApO1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUSFJFRS5WZWN0b3JLZXlmcmFtZVRyYWNrKCBtb2RlbE5hbWUgKyAnLicgKyB0eXBlLCB0aW1lcywgdmFsdWVzICk7XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVSb3RhdGlvblRyYWNrKCBtb2RlbE5hbWUsIGN1cnZlcywgaW5pdGlhbFZhbHVlLCBwcmVSb3RhdGlvbnMgKSB7XG4gICAgXG4gICAgICAgICAgICBpZiAoIGN1cnZlcy54ICE9PSB1bmRlZmluZWQgKSBjdXJ2ZXMueC52YWx1ZXMgPSBjdXJ2ZXMueC52YWx1ZXMubWFwKCBUSFJFRS5NYXRoLmRlZ1RvUmFkICk7XG4gICAgICAgICAgICBpZiAoIGN1cnZlcy55ICE9PSB1bmRlZmluZWQgKSBjdXJ2ZXMueS52YWx1ZXMgPSBjdXJ2ZXMueS52YWx1ZXMubWFwKCBUSFJFRS5NYXRoLmRlZ1RvUmFkICk7XG4gICAgICAgICAgICBpZiAoIGN1cnZlcy56ICE9PSB1bmRlZmluZWQgKSBjdXJ2ZXMuei52YWx1ZXMgPSBjdXJ2ZXMuei52YWx1ZXMubWFwKCBUSFJFRS5NYXRoLmRlZ1RvUmFkICk7XG4gICAgXG4gICAgICAgICAgICB2YXIgdGltZXMgPSBnZXRUaW1lc0ZvckFsbEF4ZXMoIGN1cnZlcyApO1xuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IGdldEtleWZyYW1lVHJhY2tWYWx1ZXMoIHRpbWVzLCBjdXJ2ZXMsIGluaXRpYWxWYWx1ZSApO1xuICAgIFxuICAgICAgICAgICAgaWYgKCBwcmVSb3RhdGlvbnMgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBwcmVSb3RhdGlvbnMgPSBwcmVSb3RhdGlvbnMubWFwKCBUSFJFRS5NYXRoLmRlZ1RvUmFkICk7XG4gICAgICAgICAgICAgICAgcHJlUm90YXRpb25zLnB1c2goICdaWVgnICk7XG4gICAgXG4gICAgICAgICAgICAgICAgcHJlUm90YXRpb25zID0gbmV3IFRIUkVFLkV1bGVyKCkuZnJvbUFycmF5KCBwcmVSb3RhdGlvbnMgKTtcbiAgICAgICAgICAgICAgICBwcmVSb3RhdGlvbnMgPSBuZXcgVEhSRUUuUXVhdGVybmlvbigpLnNldEZyb21FdWxlciggcHJlUm90YXRpb25zICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB2YXIgcXVhdGVybmlvbiA9IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCk7XG4gICAgICAgICAgICB2YXIgZXVsZXIgPSBuZXcgVEhSRUUuRXVsZXIoKTtcbiAgICBcbiAgICAgICAgICAgIHZhciBxdWF0ZXJuaW9uVmFsdWVzID0gW107XG4gICAgXG4gICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpICs9IDMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgZXVsZXIuc2V0KCB2YWx1ZXNbIGkgXSwgdmFsdWVzWyBpICsgMSBdLCB2YWx1ZXNbIGkgKyAyIF0sICdaWVgnICk7XG4gICAgXG4gICAgICAgICAgICAgICAgcXVhdGVybmlvbi5zZXRGcm9tRXVsZXIoIGV1bGVyICk7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBwcmVSb3RhdGlvbnMgIT09IHVuZGVmaW5lZCApcXVhdGVybmlvbi5wcmVtdWx0aXBseSggcHJlUm90YXRpb25zICk7XG4gICAgXG4gICAgICAgICAgICAgICAgcXVhdGVybmlvbi50b0FycmF5KCBxdWF0ZXJuaW9uVmFsdWVzLCAoIGkgLyAzICkgKiA0ICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gbmV3IFRIUkVFLlF1YXRlcm5pb25LZXlmcmFtZVRyYWNrKCBtb2RlbE5hbWUgKyAnLnF1YXRlcm5pb24nLCB0aW1lcywgcXVhdGVybmlvblZhbHVlcyApO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGZ1bmN0aW9uIGdldEtleWZyYW1lVHJhY2tWYWx1ZXMoIHRpbWVzLCBjdXJ2ZXMsIGluaXRpYWxWYWx1ZSApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBwcmV2VmFsdWUgPSBpbml0aWFsVmFsdWU7XG4gICAgXG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gW107XG4gICAgXG4gICAgICAgICAgICB2YXIgeEluZGV4ID0gLSAxO1xuICAgICAgICAgICAgdmFyIHlJbmRleCA9IC0gMTtcbiAgICAgICAgICAgIHZhciB6SW5kZXggPSAtIDE7XG4gICAgXG4gICAgICAgICAgICB0aW1lcy5mb3JFYWNoKCBmdW5jdGlvbiAoIHRpbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBjdXJ2ZXMueCApIHhJbmRleCA9IGN1cnZlcy54LnRpbWVzLmluZGV4T2YoIHRpbWUgKTtcbiAgICAgICAgICAgICAgICBpZiAoIGN1cnZlcy55ICkgeUluZGV4ID0gY3VydmVzLnkudGltZXMuaW5kZXhPZiggdGltZSApO1xuICAgICAgICAgICAgICAgIGlmICggY3VydmVzLnogKSB6SW5kZXggPSBjdXJ2ZXMuei50aW1lcy5pbmRleE9mKCB0aW1lICk7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgYW4geCB2YWx1ZSBkZWZpbmVkIGZvciB0aGlzIGZyYW1lLCB1c2UgdGhhdFxuICAgICAgICAgICAgICAgIGlmICggeEluZGV4ICE9PSAtIDEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciB4VmFsdWUgPSBjdXJ2ZXMueC52YWx1ZXNbIHhJbmRleCBdO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaCggeFZhbHVlICk7XG4gICAgICAgICAgICAgICAgICAgIHByZXZWYWx1ZVsgMCBdID0geFZhbHVlO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSB1c2UgdGhlIHggdmFsdWUgZnJvbSB0aGUgcHJldmlvdXMgZnJhbWVcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzLnB1c2goIHByZXZWYWx1ZVsgMCBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGlmICggeUluZGV4ICE9PSAtIDEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciB5VmFsdWUgPSBjdXJ2ZXMueS52YWx1ZXNbIHlJbmRleCBdO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaCggeVZhbHVlICk7XG4gICAgICAgICAgICAgICAgICAgIHByZXZWYWx1ZVsgMSBdID0geVZhbHVlO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKCBwcmV2VmFsdWVbIDEgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHpJbmRleCAhPT0gLSAxICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgelZhbHVlID0gY3VydmVzLnoudmFsdWVzWyB6SW5kZXggXTtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzLnB1c2goIHpWYWx1ZSApO1xuICAgICAgICAgICAgICAgICAgICBwcmV2VmFsdWVbIDIgXSA9IHpWYWx1ZTtcbiAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaCggcHJldlZhbHVlWyAyIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIEZvciBhbGwgYW5pbWF0ZWQgb2JqZWN0cywgdGltZXMgYXJlIGRlZmluZWQgc2VwYXJhdGVseSBmb3IgZWFjaCBheGlzXG4gICAgICAgIC8vIEhlcmUgd2UnbGwgY29tYmluZSB0aGUgdGltZXMgaW50byBvbmUgc29ydGVkIGFycmF5IHdpdGhvdXQgZHVwbGljYXRlc1xuICAgICAgICBmdW5jdGlvbiBnZXRUaW1lc0ZvckFsbEF4ZXMoIGN1cnZlcyApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciB0aW1lcyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgLy8gZmlyc3Qgam9pbiB0b2dldGhlciB0aGUgdGltZXMgZm9yIGVhY2ggYXhpcywgaWYgZGVmaW5lZFxuICAgICAgICAgICAgaWYgKCBjdXJ2ZXMueCAhPT0gdW5kZWZpbmVkICkgdGltZXMgPSB0aW1lcy5jb25jYXQoIGN1cnZlcy54LnRpbWVzICk7XG4gICAgICAgICAgICBpZiAoIGN1cnZlcy55ICE9PSB1bmRlZmluZWQgKSB0aW1lcyA9IHRpbWVzLmNvbmNhdCggY3VydmVzLnkudGltZXMgKTtcbiAgICAgICAgICAgIGlmICggY3VydmVzLnogIT09IHVuZGVmaW5lZCApIHRpbWVzID0gdGltZXMuY29uY2F0KCBjdXJ2ZXMuei50aW1lcyApO1xuICAgIFxuICAgICAgICAgICAgLy8gdGhlbiBzb3J0IHRoZW0gYW5kIHJlbW92ZSBkdXBsaWNhdGVzXG4gICAgICAgICAgICB0aW1lcyA9IHRpbWVzLnNvcnQoIGZ1bmN0aW9uICggYSwgYiApIHtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gYSAtIGI7XG4gICAgXG4gICAgICAgICAgICB9ICkuZmlsdGVyKCBmdW5jdGlvbiAoIGVsZW0sIGluZGV4LCBhcnJheSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJyYXkuaW5kZXhPZiggZWxlbSApID09IGluZGV4O1xuICAgIFxuICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuIHRpbWVzO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIHBhcnNlIGFuIEZCWCBmaWxlIGluIEFTQ0lJIGZvcm1hdFxuICAgICAgICBmdW5jdGlvbiBUZXh0UGFyc2VyKCkge31cbiAgICBcbiAgICAgICAgT2JqZWN0LmFzc2lnbiggVGV4dFBhcnNlci5wcm90b3R5cGUsIHtcbiAgICBcbiAgICAgICAgICAgIGdldFByZXZOb2RlOiBmdW5jdGlvbiAoKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubm9kZVN0YWNrWyB0aGlzLmN1cnJlbnRJbmRlbnQgLSAyIF07XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgZ2V0Q3VycmVudE5vZGU6IGZ1bmN0aW9uICgpIHtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ub2RlU3RhY2tbIHRoaXMuY3VycmVudEluZGVudCAtIDEgXTtcbiAgICBcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICBnZXRDdXJyZW50UHJvcDogZnVuY3Rpb24gKCkge1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRQcm9wO1xuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIHB1c2hTdGFjazogZnVuY3Rpb24gKCBub2RlICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHRoaXMubm9kZVN0YWNrLnB1c2goIG5vZGUgKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRlbnQgKz0gMTtcbiAgICBcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICBwb3BTdGFjazogZnVuY3Rpb24gKCkge1xuICAgIFxuICAgICAgICAgICAgICAgIHRoaXMubm9kZVN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEluZGVudCAtPSAxO1xuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIHNldEN1cnJlbnRQcm9wOiBmdW5jdGlvbiAoIHZhbCwgbmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQcm9wID0gdmFsO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFByb3BOYW1lID0gbmFtZTtcbiAgICBcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICBwYXJzZTogZnVuY3Rpb24gKCB0ZXh0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEluZGVudCA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5hbGxOb2RlcyA9IG5ldyBGQlhUcmVlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlU3RhY2sgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQcm9wID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UHJvcE5hbWUgPSAnJztcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHNwbGl0ID0gdGV4dC5zcGxpdCggJ1xcbicgKTtcbiAgICBcbiAgICAgICAgICAgICAgICBzcGxpdC5mb3JFYWNoKCBmdW5jdGlvbiAoIGxpbmUsIGkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXRjaENvbW1lbnQgPSBsaW5lLm1hdGNoKCAvXltcXHNcXHRdKjsvICk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXRjaEVtcHR5ID0gbGluZS5tYXRjaCggL15bXFxzXFx0XSokLyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIG1hdGNoQ29tbWVudCB8fCBtYXRjaEVtcHR5ICkgcmV0dXJuO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2hCZWdpbm5pbmcgPSBsaW5lLm1hdGNoKCAnXlxcXFx0eycgKyBzZWxmLmN1cnJlbnRJbmRlbnQgKyAnfShcXFxcdyspOiguKil7JywgJycgKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoUHJvcGVydHkgPSBsaW5lLm1hdGNoKCAnXlxcXFx0eycgKyAoIHNlbGYuY3VycmVudEluZGVudCApICsgJ30oXFxcXHcrKTpbXFxcXHNcXFxcdFxcXFxyXFxcXG5dKC4qKScgKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoRW5kID0gbGluZS5tYXRjaCggJ15cXFxcdHsnICsgKCBzZWxmLmN1cnJlbnRJbmRlbnQgLSAxICkgKyAnfX0nICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggbWF0Y2hCZWdpbm5pbmcgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBhcnNlTm9kZUJlZ2luKCBsaW5lLCBtYXRjaEJlZ2lubmluZyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBtYXRjaFByb3BlcnR5ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXJzZU5vZGVQcm9wZXJ0eSggbGluZSwgbWF0Y2hQcm9wZXJ0eSwgc3BsaXRbICsrIGkgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBtYXRjaEVuZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucG9wU3RhY2soKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggbGluZS5tYXRjaCggL15bXlxcc1xcdH1dLyApICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGFyZ2UgYXJyYXlzIGFyZSBzcGxpdCBvdmVyIG11bHRpcGxlIGxpbmVzIHRlcm1pbmF0ZWQgd2l0aCBhICcsJyBjaGFyYWN0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoaXMgaXMgZW5jb3VudGVyZWQgdGhlIGxpbmUgbmVlZHMgdG8gYmUgam9pbmVkIHRvIHRoZSBwcmV2aW91cyBsaW5lXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBhcnNlTm9kZVByb3BlcnR5Q29udGludWVkKCBsaW5lICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWxsTm9kZXM7XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgcGFyc2VOb2RlQmVnaW46IGZ1bmN0aW9uICggbGluZSwgcHJvcGVydHkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIG5vZGVOYW1lID0gcHJvcGVydHlbIDEgXS50cmltKCkucmVwbGFjZSggL15cIi8sICcnICkucmVwbGFjZSggL1wiJC8sICcnICk7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIG5vZGVBdHRycyA9IHByb3BlcnR5WyAyIF0uc3BsaXQoICcsJyApLm1hcCggZnVuY3Rpb24gKCBhdHRyICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXR0ci50cmltKCkucmVwbGFjZSggL15cIi8sICcnICkucmVwbGFjZSggL1wiJC8sICcnICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBub2RlID0geyBuYW1lOiBub2RlTmFtZSB9O1xuICAgICAgICAgICAgICAgIHZhciBhdHRycyA9IHRoaXMucGFyc2VOb2RlQXR0ciggbm9kZUF0dHJzICk7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnROb2RlID0gdGhpcy5nZXRDdXJyZW50Tm9kZSgpO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIGEgdG9wIG5vZGVcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMuY3VycmVudEluZGVudCA9PT0gMCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGxOb2Rlcy5hZGQoIG5vZGVOYW1lLCBub2RlICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gYSBzdWJub2RlXG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBzdWJub2RlIGFscmVhZHkgZXhpc3RzLCBhcHBlbmQgaXRcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBub2RlTmFtZSBpbiBjdXJyZW50Tm9kZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gc3BlY2lhbCBjYXNlIFBvc2UgbmVlZHMgUG9zZU5vZGVzIGFzIGFuIGFycmF5XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIG5vZGVOYW1lID09PSAnUG9zZU5vZGUnICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnROb2RlLlBvc2VOb2RlLnB1c2goIG5vZGUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGN1cnJlbnROb2RlWyBub2RlTmFtZSBdLmlkICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudE5vZGVbIG5vZGVOYW1lIF0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZVsgbm9kZU5hbWUgXVsgY3VycmVudE5vZGVbIG5vZGVOYW1lIF0uaWQgXSA9IGN1cnJlbnROb2RlWyBub2RlTmFtZSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBhdHRycy5pZCAhPT0gJycgKSBjdXJyZW50Tm9kZVsgbm9kZU5hbWUgXVsgYXR0cnMuaWQgXSA9IG5vZGU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHR5cGVvZiBhdHRycy5pZCA9PT0gJ251bWJlcicgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZVsgbm9kZU5hbWUgXSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudE5vZGVbIG5vZGVOYW1lIF1bIGF0dHJzLmlkIF0gPSBub2RlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBub2RlTmFtZSAhPT0gJ1Byb3BlcnRpZXM3MCcgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIG5vZGVOYW1lID09PSAnUG9zZU5vZGUnIClcdGN1cnJlbnROb2RlWyBub2RlTmFtZSBdID0gWyBub2RlIF07XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGN1cnJlbnROb2RlWyBub2RlTmFtZSBdID0gbm9kZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHR5cGVvZiBhdHRycy5pZCA9PT0gJ251bWJlcicgKSBub2RlLmlkID0gYXR0cnMuaWQ7XG4gICAgICAgICAgICAgICAgaWYgKCBhdHRycy5uYW1lICE9PSAnJyApIG5vZGUuYXR0ck5hbWUgPSBhdHRycy5uYW1lO1xuICAgICAgICAgICAgICAgIGlmICggYXR0cnMudHlwZSAhPT0gJycgKSBub2RlLmF0dHJUeXBlID0gYXR0cnMudHlwZTtcbiAgICBcbiAgICAgICAgICAgICAgICB0aGlzLnB1c2hTdGFjayggbm9kZSApO1xuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIHBhcnNlTm9kZUF0dHI6IGZ1bmN0aW9uICggYXR0cnMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGlkID0gYXR0cnNbIDAgXTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGF0dHJzWyAwIF0gIT09ICcnICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZCA9IHBhcnNlSW50KCBhdHRyc1sgMCBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggaXNOYU4oIGlkICkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZCA9IGF0dHJzWyAwIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSAnJywgdHlwZSA9ICcnO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggYXR0cnMubGVuZ3RoID4gMSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IGF0dHJzWyAxIF0ucmVwbGFjZSggL14oXFx3Kyk6Oi8sICcnICk7XG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSBhdHRyc1sgMiBdO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4geyBpZDogaWQsIG5hbWU6IG5hbWUsIHR5cGU6IHR5cGUgfTtcbiAgICBcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICBwYXJzZU5vZGVQcm9wZXJ0eTogZnVuY3Rpb24gKCBsaW5lLCBwcm9wZXJ0eSwgY29udGVudExpbmUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHByb3BOYW1lID0gcHJvcGVydHlbIDEgXS5yZXBsYWNlKCAvXlwiLywgJycgKS5yZXBsYWNlKCAvXCIkLywgJycgKS50cmltKCk7XG4gICAgICAgICAgICAgICAgdmFyIHByb3BWYWx1ZSA9IHByb3BlcnR5WyAyIF0ucmVwbGFjZSggL15cIi8sICcnICkucmVwbGFjZSggL1wiJC8sICcnICkudHJpbSgpO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIGZvciBzcGVjaWFsIGNhc2U6IGJhc2U2NCBpbWFnZSBkYXRhIGZvbGxvd3MgXCJDb250ZW50OiAsXCIgbGluZVxuICAgICAgICAgICAgICAgIC8vXHRDb250ZW50OiAsXG4gICAgICAgICAgICAgICAgLy9cdCBcIi85ai80UkRhUlhocFpnQUFUVTBBLi4uXCJcbiAgICAgICAgICAgICAgICBpZiAoIHByb3BOYW1lID09PSAnQ29udGVudCcgJiYgcHJvcFZhbHVlID09PSAnLCcgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHByb3BWYWx1ZSA9IGNvbnRlbnRMaW5lLnJlcGxhY2UoIC9cIi9nLCAnJyApLnJlcGxhY2UoIC8sJC8sICcnICkudHJpbSgpO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudE5vZGUgPSB0aGlzLmdldEN1cnJlbnROb2RlKCk7XG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudE5hbWUgPSBjdXJyZW50Tm9kZS5uYW1lO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggcGFyZW50TmFtZSA9PT0gJ1Byb3BlcnRpZXM3MCcgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyc2VOb2RlU3BlY2lhbFByb3BlcnR5KCBsaW5lLCBwcm9wTmFtZSwgcHJvcFZhbHVlICk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gQ29ubmVjdGlvbnNcbiAgICAgICAgICAgICAgICBpZiAoIHByb3BOYW1lID09PSAnQycgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb25uUHJvcHMgPSBwcm9wVmFsdWUuc3BsaXQoICcsJyApLnNsaWNlKCAxICk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmcm9tID0gcGFyc2VJbnQoIGNvbm5Qcm9wc1sgMCBdICk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0byA9IHBhcnNlSW50KCBjb25uUHJvcHNbIDEgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdCA9IHByb3BWYWx1ZS5zcGxpdCggJywnICkuc2xpY2UoIDMgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcmVzdCA9IHJlc3QubWFwKCBmdW5jdGlvbiAoIGVsZW0gKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbS50cmltKCkucmVwbGFjZSggL15cIi8sICcnICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcHJvcE5hbWUgPSAnY29ubmVjdGlvbnMnO1xuICAgICAgICAgICAgICAgICAgICBwcm9wVmFsdWUgPSBbIGZyb20sIHRvIF07XG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZCggcHJvcFZhbHVlLCByZXN0ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY3VycmVudE5vZGVbIHByb3BOYW1lIF0gPT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnROb2RlWyBwcm9wTmFtZSBdID0gW107XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gTm9kZVxuICAgICAgICAgICAgICAgIGlmICggcHJvcE5hbWUgPT09ICdOb2RlJyApIGN1cnJlbnROb2RlLmlkID0gcHJvcFZhbHVlO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIGNvbm5lY3Rpb25zXG4gICAgICAgICAgICAgICAgaWYgKCBwcm9wTmFtZSBpbiBjdXJyZW50Tm9kZSAmJiBBcnJheS5pc0FycmF5KCBjdXJyZW50Tm9kZVsgcHJvcE5hbWUgXSApICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZVsgcHJvcE5hbWUgXS5wdXNoKCBwcm9wVmFsdWUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIHByb3BOYW1lICE9PSAnYScgKSBjdXJyZW50Tm9kZVsgcHJvcE5hbWUgXSA9IHByb3BWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBjdXJyZW50Tm9kZS5hID0gcHJvcFZhbHVlO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB0aGlzLnNldEN1cnJlbnRQcm9wKCBjdXJyZW50Tm9kZSwgcHJvcE5hbWUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBjb252ZXJ0IHN0cmluZyB0byBhcnJheSwgdW5sZXNzIGl0IGVuZHMgaW4gJywnIGluIHdoaWNoIGNhc2UgbW9yZSB3aWxsIGJlIGFkZGVkIHRvIGl0XG4gICAgICAgICAgICAgICAgaWYgKCBwcm9wTmFtZSA9PT0gJ2EnICYmIHByb3BWYWx1ZS5zbGljZSggLSAxICkgIT09ICcsJyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudE5vZGUuYSA9IHBhcnNlTnVtYmVyQXJyYXkoIHByb3BWYWx1ZSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICBwYXJzZU5vZGVQcm9wZXJ0eUNvbnRpbnVlZDogZnVuY3Rpb24gKCBsaW5lICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Tm9kZSA9IHRoaXMuZ2V0Q3VycmVudE5vZGUoKTtcbiAgICBcbiAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZS5hICs9IGxpbmU7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIGxpbmUgZG9lc24ndCBlbmQgaW4gJywnIHdlIGhhdmUgcmVhY2hlZCB0aGUgZW5kIG9mIHRoZSBwcm9wZXJ0eSB2YWx1ZVxuICAgICAgICAgICAgICAgIC8vIHNvIGNvbnZlcnQgdGhlIHN0cmluZyB0byBhbiBhcnJheVxuICAgICAgICAgICAgICAgIGlmICggbGluZS5zbGljZSggLSAxICkgIT09ICcsJyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudE5vZGUuYSA9IHBhcnNlTnVtYmVyQXJyYXkoIGN1cnJlbnROb2RlLmEgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgLy8gcGFyc2UgXCJQcm9wZXJ0eTcwXCJcbiAgICAgICAgICAgIHBhcnNlTm9kZVNwZWNpYWxQcm9wZXJ0eTogZnVuY3Rpb24gKCBsaW5lLCBwcm9wTmFtZSwgcHJvcFZhbHVlICkge1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIHNwbGl0IHRoaXNcbiAgICAgICAgICAgICAgICAvLyBQOiBcIkxjbCBTY2FsaW5nXCIsIFwiTGNsIFNjYWxpbmdcIiwgXCJcIiwgXCJBXCIsMSwxLDFcbiAgICAgICAgICAgICAgICAvLyBpbnRvIGFycmF5IGxpa2UgYmVsb3dcbiAgICAgICAgICAgICAgICAvLyBbXCJMY2wgU2NhbGluZ1wiLCBcIkxjbCBTY2FsaW5nXCIsIFwiXCIsIFwiQVwiLCBcIjEsMSwxXCIgXVxuICAgICAgICAgICAgICAgIHZhciBwcm9wcyA9IHByb3BWYWx1ZS5zcGxpdCggJ1wiLCcgKS5tYXAoIGZ1bmN0aW9uICggcHJvcCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb3AudHJpbSgpLnJlcGxhY2UoIC9eXFxcIi8sICcnICkucmVwbGFjZSggL1xccy8sICdfJyApO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgaW5uZXJQcm9wTmFtZSA9IHByb3BzWyAwIF07XG4gICAgICAgICAgICAgICAgdmFyIGlubmVyUHJvcFR5cGUxID0gcHJvcHNbIDEgXTtcbiAgICAgICAgICAgICAgICB2YXIgaW5uZXJQcm9wVHlwZTIgPSBwcm9wc1sgMiBdO1xuICAgICAgICAgICAgICAgIHZhciBpbm5lclByb3BGbGFnID0gcHJvcHNbIDMgXTtcbiAgICAgICAgICAgICAgICB2YXIgaW5uZXJQcm9wVmFsdWUgPSBwcm9wc1sgNCBdO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIGNhc3QgdmFsdWVzIHdoZXJlIG5lZWRlZCwgb3RoZXJ3aXNlIGxlYXZlIGFzIHN0cmluZ3NcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKCBpbm5lclByb3BUeXBlMSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaW50JzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW51bSc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Jvb2wnOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdVTG9uZ0xvbmcnOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdkb3VibGUnOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdOdW1iZXInOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdGaWVsZE9mVmlldyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lclByb3BWYWx1ZSA9IHBhcnNlRmxvYXQoIGlubmVyUHJvcFZhbHVlICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQ29sb3InOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdDb2xvclJHQic6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1ZlY3RvcjNEJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnTGNsX1RyYW5zbGF0aW9uJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnTGNsX1JvdGF0aW9uJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnTGNsX1NjYWxpbmcnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJQcm9wVmFsdWUgPSBwYXJzZU51bWJlckFycmF5KCBpbm5lclByb3BWYWx1ZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIC8vIENBVVRJT046IHRoZXNlIHByb3BzIG11c3QgYXBwZW5kIHRvIHBhcmVudCdzIHBhcmVudFxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0UHJldk5vZGUoKVsgaW5uZXJQcm9wTmFtZSBdID0ge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAndHlwZSc6IGlubmVyUHJvcFR5cGUxLFxuICAgICAgICAgICAgICAgICAgICAndHlwZTInOiBpbm5lclByb3BUeXBlMixcbiAgICAgICAgICAgICAgICAgICAgJ2ZsYWcnOiBpbm5lclByb3BGbGFnLFxuICAgICAgICAgICAgICAgICAgICAndmFsdWUnOiBpbm5lclByb3BWYWx1ZVxuICAgIFxuICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDdXJyZW50UHJvcCggdGhpcy5nZXRQcmV2Tm9kZSgpLCBpbm5lclByb3BOYW1lICk7XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgIC8vIFBhcnNlIGFuIEZCWCBmaWxlIGluIEJpbmFyeSBmb3JtYXRcbiAgICAgICAgZnVuY3Rpb24gQmluYXJ5UGFyc2VyKCkge31cbiAgICBcbiAgICAgICAgT2JqZWN0LmFzc2lnbiggQmluYXJ5UGFyc2VyLnByb3RvdHlwZSwge1xuICAgIFxuICAgICAgICAgICAgcGFyc2U6IGZ1bmN0aW9uICggYnVmZmVyICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgQmluYXJ5UmVhZGVyKCBidWZmZXIgKTtcbiAgICAgICAgICAgICAgICByZWFkZXIuc2tpcCggMjMgKTsgLy8gc2tpcCBtYWdpYyAyMyBieXRlc1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciB2ZXJzaW9uID0gcmVhZGVyLmdldFVpbnQzMigpO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCAnVEhSRUUuRkJYTG9hZGVyOiBGQlggYmluYXJ5IHZlcnNpb246ICcgKyB2ZXJzaW9uICk7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGFsbE5vZGVzID0gbmV3IEZCWFRyZWUoKTtcbiAgICBcbiAgICAgICAgICAgICAgICB3aGlsZSAoICEgdGhpcy5lbmRPZkNvbnRlbnQoIHJlYWRlciApICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMucGFyc2VOb2RlKCByZWFkZXIsIHZlcnNpb24gKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBub2RlICE9PSBudWxsICkgYWxsTm9kZXMuYWRkKCBub2RlLm5hbWUsIG5vZGUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFsbE5vZGVzO1xuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHJlYWRlciBoYXMgcmVhY2hlZCB0aGUgZW5kIG9mIGNvbnRlbnQuXG4gICAgICAgICAgICBlbmRPZkNvbnRlbnQ6IGZ1bmN0aW9uICggcmVhZGVyICkge1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIGZvb3RlciBzaXplOiAxNjBieXRlcyArIDE2LWJ5dGUgYWxpZ25tZW50IHBhZGRpbmdcbiAgICAgICAgICAgICAgICAvLyAtIDE2Ynl0ZXM6IG1hZ2ljXG4gICAgICAgICAgICAgICAgLy8gLSBwYWRkaW5nIHRpbCAxNi1ieXRlIGFsaWdubWVudCAoYXQgbGVhc3QgMWJ5dGU/KVxuICAgICAgICAgICAgICAgIC8vXHQoc2VlbXMgbGlrZSBzb21lIGV4cG9ydGVycyBlbWJlZCBmaXhlZCAxNSBvciAxNmJ5dGVzPylcbiAgICAgICAgICAgICAgICAvLyAtIDRieXRlczogbWFnaWNcbiAgICAgICAgICAgICAgICAvLyAtIDRieXRlczogdmVyc2lvblxuICAgICAgICAgICAgICAgIC8vIC0gMTIwYnl0ZXM6IHplcm9cbiAgICAgICAgICAgICAgICAvLyAtIDE2Ynl0ZXM6IG1hZ2ljXG4gICAgICAgICAgICAgICAgaWYgKCByZWFkZXIuc2l6ZSgpICUgMTYgPT09IDAgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoICggcmVhZGVyLmdldE9mZnNldCgpICsgMTYwICsgMTYgKSAmIH4gMHhmICkgPj0gcmVhZGVyLnNpemUoKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZGVyLmdldE9mZnNldCgpICsgMTYwICsgMTYgPj0gcmVhZGVyLnNpemUoKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgLy8gcmVjdXJzaXZlbHkgcGFyc2Ugbm9kZXMgdW50aWwgdGhlIGVuZCBvZiB0aGUgZmlsZSBpcyByZWFjaGVkXG4gICAgICAgICAgICBwYXJzZU5vZGU6IGZ1bmN0aW9uICggcmVhZGVyLCB2ZXJzaW9uICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBub2RlID0ge307XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gVGhlIGZpcnN0IHRocmVlIGRhdGEgc2l6ZXMgZGVwZW5kcyBvbiB2ZXJzaW9uLlxuICAgICAgICAgICAgICAgIHZhciBlbmRPZmZzZXQgPSAoIHZlcnNpb24gPj0gNzUwMCApID8gcmVhZGVyLmdldFVpbnQ2NCgpIDogcmVhZGVyLmdldFVpbnQzMigpO1xuICAgICAgICAgICAgICAgIHZhciBudW1Qcm9wZXJ0aWVzID0gKCB2ZXJzaW9uID49IDc1MDAgKSA/IHJlYWRlci5nZXRVaW50NjQoKSA6IHJlYWRlci5nZXRVaW50MzIoKTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBub3RlOiBkbyBub3QgcmVtb3ZlIHRoaXMgZXZlbiBpZiB5b3UgZ2V0IGEgbGludGVyIHdhcm5pbmcgYXMgaXQgbW92ZXMgdGhlIGJ1ZmZlciBmb3J3YXJkXG4gICAgICAgICAgICAgICAgdmFyIHByb3BlcnR5TGlzdExlbiA9ICggdmVyc2lvbiA+PSA3NTAwICkgPyByZWFkZXIuZ2V0VWludDY0KCkgOiByZWFkZXIuZ2V0VWludDMyKCk7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIG5hbWVMZW4gPSByZWFkZXIuZ2V0VWludDgoKTtcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IHJlYWRlci5nZXRTdHJpbmcoIG5hbWVMZW4gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBSZWdhcmRzIHRoaXMgbm9kZSBhcyBOVUxMLXJlY29yZCBpZiBlbmRPZmZzZXQgaXMgemVyb1xuICAgICAgICAgICAgICAgIGlmICggZW5kT2Zmc2V0ID09PSAwICkgcmV0dXJuIG51bGw7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHByb3BlcnR5TGlzdCA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IG51bVByb3BlcnRpZXM7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnR5TGlzdC5wdXNoKCB0aGlzLnBhcnNlUHJvcGVydHkoIHJlYWRlciApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIC8vIFJlZ2FyZHMgdGhlIGZpcnN0IHRocmVlIGVsZW1lbnRzIGluIHByb3BlcnR5TGlzdCBhcyBpZCwgYXR0ck5hbWUsIGFuZCBhdHRyVHlwZVxuICAgICAgICAgICAgICAgIHZhciBpZCA9IHByb3BlcnR5TGlzdC5sZW5ndGggPiAwID8gcHJvcGVydHlMaXN0WyAwIF0gOiAnJztcbiAgICAgICAgICAgICAgICB2YXIgYXR0ck5hbWUgPSBwcm9wZXJ0eUxpc3QubGVuZ3RoID4gMSA/IHByb3BlcnR5TGlzdFsgMSBdIDogJyc7XG4gICAgICAgICAgICAgICAgdmFyIGF0dHJUeXBlID0gcHJvcGVydHlMaXN0Lmxlbmd0aCA+IDIgPyBwcm9wZXJ0eUxpc3RbIDIgXSA6ICcnO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoaXMgbm9kZSByZXByZXNlbnRzIGp1c3QgYSBzaW5nbGUgcHJvcGVydHlcbiAgICAgICAgICAgICAgICAvLyBsaWtlIChuYW1lLCAwKSBzZXQgb3IgKG5hbWUyLCBbMCwgMSwgMl0pIHNldCBvZiB7bmFtZTogMCwgbmFtZTI6IFswLCAxLCAyXX1cbiAgICAgICAgICAgICAgICBub2RlLnNpbmdsZVByb3BlcnR5ID0gKCBudW1Qcm9wZXJ0aWVzID09PSAxICYmIHJlYWRlci5nZXRPZmZzZXQoKSA9PT0gZW5kT2Zmc2V0ICkgPyB0cnVlIDogZmFsc2U7XG4gICAgXG4gICAgICAgICAgICAgICAgd2hpbGUgKCBlbmRPZmZzZXQgPiByZWFkZXIuZ2V0T2Zmc2V0KCkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdWJOb2RlID0gdGhpcy5wYXJzZU5vZGUoIHJlYWRlciwgdmVyc2lvbiApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIHN1Yk5vZGUgIT09IG51bGwgKSB0aGlzLnBhcnNlU3ViTm9kZSggbmFtZSwgbm9kZSwgc3ViTm9kZSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBub2RlLnByb3BlcnR5TGlzdCA9IHByb3BlcnR5TGlzdDsgLy8gcmF3IHByb3BlcnR5IGxpc3QgdXNlZCBieSBwYXJlbnRcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHR5cGVvZiBpZCA9PT0gJ251bWJlcicgKSBub2RlLmlkID0gaWQ7XG4gICAgICAgICAgICAgICAgaWYgKCBhdHRyTmFtZSAhPT0gJycgKSBub2RlLmF0dHJOYW1lID0gYXR0ck5hbWU7XG4gICAgICAgICAgICAgICAgaWYgKCBhdHRyVHlwZSAhPT0gJycgKSBub2RlLmF0dHJUeXBlID0gYXR0clR5cGU7XG4gICAgICAgICAgICAgICAgaWYgKCBuYW1lICE9PSAnJyApIG5vZGUubmFtZSA9IG5hbWU7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgcGFyc2VTdWJOb2RlOiBmdW5jdGlvbiAoIG5hbWUsIG5vZGUsIHN1Yk5vZGUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gc3BlY2lhbCBjYXNlOiBjaGlsZCBub2RlIGlzIHNpbmdsZSBwcm9wZXJ0eVxuICAgICAgICAgICAgICAgIGlmICggc3ViTm9kZS5zaW5nbGVQcm9wZXJ0eSA9PT0gdHJ1ZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gc3ViTm9kZS5wcm9wZXJ0eUxpc3RbIDAgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBBcnJheS5pc0FycmF5KCB2YWx1ZSApICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVsgc3ViTm9kZS5uYW1lIF0gPSBzdWJOb2RlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgc3ViTm9kZS5hID0gdmFsdWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlWyBzdWJOb2RlLm5hbWUgXSA9IHZhbHVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggbmFtZSA9PT0gJ0Nvbm5lY3Rpb25zJyAmJiBzdWJOb2RlLm5hbWUgPT09ICdDJyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFycmF5ID0gW107XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN1Yk5vZGUucHJvcGVydHlMaXN0LmZvckVhY2goIGZ1bmN0aW9uICggcHJvcGVydHksIGkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmaXJzdCBDb25uZWN0aW9uIGlzIEZCWCB0eXBlIChPTywgT1AsIGV0Yy4pLiBXZSdsbCBkaXNjYXJkIHRoZXNlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGkgIT09IDAgKSBhcnJheS5wdXNoKCBwcm9wZXJ0eSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggbm9kZS5jb25uZWN0aW9ucyA9PT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5jb25uZWN0aW9ucyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuY29ubmVjdGlvbnMucHVzaCggYXJyYXkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBzdWJOb2RlLm5hbWUgPT09ICdQcm9wZXJ0aWVzNzAnICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKCBzdWJOb2RlICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGtleXMuZm9yRWFjaCggZnVuY3Rpb24gKCBrZXkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlWyBrZXkgXSA9IHN1Yk5vZGVbIGtleSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggbmFtZSA9PT0gJ1Byb3BlcnRpZXM3MCcgJiYgc3ViTm9kZS5uYW1lID09PSAnUCcgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbm5lclByb3BOYW1lID0gc3ViTm9kZS5wcm9wZXJ0eUxpc3RbIDAgXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlubmVyUHJvcFR5cGUxID0gc3ViTm9kZS5wcm9wZXJ0eUxpc3RbIDEgXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlubmVyUHJvcFR5cGUyID0gc3ViTm9kZS5wcm9wZXJ0eUxpc3RbIDIgXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlubmVyUHJvcEZsYWcgPSBzdWJOb2RlLnByb3BlcnR5TGlzdFsgMyBdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5uZXJQcm9wVmFsdWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggaW5uZXJQcm9wTmFtZS5pbmRleE9mKCAnTGNsICcgKSA9PT0gMCApIGlubmVyUHJvcE5hbWUgPSBpbm5lclByb3BOYW1lLnJlcGxhY2UoICdMY2wgJywgJ0xjbF8nICk7XG4gICAgICAgICAgICAgICAgICAgIGlmICggaW5uZXJQcm9wVHlwZTEuaW5kZXhPZiggJ0xjbCAnICkgPT09IDAgKSBpbm5lclByb3BUeXBlMSA9IGlubmVyUHJvcFR5cGUxLnJlcGxhY2UoICdMY2wgJywgJ0xjbF8nICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggaW5uZXJQcm9wVHlwZTEgPT09ICdDb2xvcicgfHwgaW5uZXJQcm9wVHlwZTEgPT09ICdDb2xvclJHQicgfHwgaW5uZXJQcm9wVHlwZTEgPT09ICdWZWN0b3InIHx8IGlubmVyUHJvcFR5cGUxID09PSAnVmVjdG9yM0QnIHx8IGlubmVyUHJvcFR5cGUxLmluZGV4T2YoICdMY2xfJyApID09PSAwICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJQcm9wVmFsdWUgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViTm9kZS5wcm9wZXJ0eUxpc3RbIDQgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJOb2RlLnByb3BlcnR5TGlzdFsgNSBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk5vZGUucHJvcGVydHlMaXN0WyA2IF1cbiAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lclByb3BWYWx1ZSA9IHN1Yk5vZGUucHJvcGVydHlMaXN0WyA0IF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyB3aWxsIGJlIGNvcGllZCB0byBwYXJlbnQsIHNlZSBhYm92ZVxuICAgICAgICAgICAgICAgICAgICBub2RlWyBpbm5lclByb3BOYW1lIF0gPSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6IGlubmVyUHJvcFR5cGUxLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUyJzogaW5uZXJQcm9wVHlwZTIsXG4gICAgICAgICAgICAgICAgICAgICAgICAnZmxhZyc6IGlubmVyUHJvcEZsYWcsXG4gICAgICAgICAgICAgICAgICAgICAgICAndmFsdWUnOiBpbm5lclByb3BWYWx1ZVxuICAgIFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIG5vZGVbIHN1Yk5vZGUubmFtZSBdID09PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggdHlwZW9mIHN1Yk5vZGUuaWQgPT09ICdudW1iZXInICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVsgc3ViTm9kZS5uYW1lIF0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVbIHN1Yk5vZGUubmFtZSBdWyBzdWJOb2RlLmlkIF0gPSBzdWJOb2RlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVsgc3ViTm9kZS5uYW1lIF0gPSBzdWJOb2RlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBzdWJOb2RlLm5hbWUgPT09ICdQb3NlTm9kZScgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoICEgQXJyYXkuaXNBcnJheSggbm9kZVsgc3ViTm9kZS5uYW1lIF0gKSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlWyBzdWJOb2RlLm5hbWUgXSA9IFsgbm9kZVsgc3ViTm9kZS5uYW1lIF0gXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVbIHN1Yk5vZGUubmFtZSBdLnB1c2goIHN1Yk5vZGUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggbm9kZVsgc3ViTm9kZS5uYW1lIF1bIHN1Yk5vZGUuaWQgXSA9PT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVsgc3ViTm9kZS5uYW1lIF1bIHN1Yk5vZGUuaWQgXSA9IHN1Yk5vZGU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgcGFyc2VQcm9wZXJ0eTogZnVuY3Rpb24gKCByZWFkZXIgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHR5cGUgPSByZWFkZXIuZ2V0U3RyaW5nKCAxICk7XG4gICAgXG4gICAgICAgICAgICAgICAgc3dpdGNoICggdHlwZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQyc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZGVyLmdldEJvb2xlYW4oKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnRCc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZGVyLmdldEZsb2F0NjQoKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnRic6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZGVyLmdldEZsb2F0MzIoKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnSSc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZGVyLmdldEludDMyKCk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0wnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlci5nZXRJbnQ2NCgpO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjYXNlICdSJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsZW5ndGggPSByZWFkZXIuZ2V0VWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZGVyLmdldEFycmF5QnVmZmVyKCBsZW5ndGggKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnUyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gcmVhZGVyLmdldFVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlci5nZXRTdHJpbmcoIGxlbmd0aCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjYXNlICdZJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWFkZXIuZ2V0SW50MTYoKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYic6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2MnOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdkJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZic6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2knOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdsJzpcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcnJheUxlbmd0aCA9IHJlYWRlci5nZXRVaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbmNvZGluZyA9IHJlYWRlci5nZXRVaW50MzIoKTsgLy8gMDogbm9uLWNvbXByZXNzZWQsIDE6IGNvbXByZXNzZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb21wcmVzc2VkTGVuZ3RoID0gcmVhZGVyLmdldFVpbnQzMigpO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBlbmNvZGluZyA9PT0gMCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCB0eXBlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdiJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZGVyLmdldEJvb2xlYW5BcnJheSggYXJyYXlMZW5ndGggKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZGVyLmdldEZsb2F0NjRBcnJheSggYXJyYXlMZW5ndGggKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZGVyLmdldEZsb2F0MzJBcnJheSggYXJyYXlMZW5ndGggKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnaSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZGVyLmdldEludDMyQXJyYXkoIGFycmF5TGVuZ3RoICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2wnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlci5nZXRJbnQ2NEFycmF5KCBhcnJheUxlbmd0aCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggd2luZG93LlpsaWIgPT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCAnVEhSRUUuRkJYTG9hZGVyOiBFeHRlcm5hbCBsaWJyYXJ5IEluZmxhdGUubWluLmpzIHJlcXVpcmVkLCBvYnRhaW4gb3IgaW1wb3J0IGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2ltYXlhL3psaWIuanMnICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5mbGF0ZSA9IG5ldyBabGliLkluZmxhdGUoIG5ldyBVaW50OEFycmF5KCByZWFkZXIuZ2V0QXJyYXlCdWZmZXIoIGNvbXByZXNzZWRMZW5ndGggKSApICk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWZcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWFkZXIyID0gbmV3IEJpbmFyeVJlYWRlciggaW5mbGF0ZS5kZWNvbXByZXNzKCkuYnVmZmVyICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCB0eXBlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2InOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZGVyMi5nZXRCb29sZWFuQXJyYXkoIGFycmF5TGVuZ3RoICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWFkZXIyLmdldEZsb2F0NjRBcnJheSggYXJyYXlMZW5ndGggKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdmJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlcjIuZ2V0RmxvYXQzMkFycmF5KCBhcnJheUxlbmd0aCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2knOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZGVyMi5nZXRJbnQzMkFycmF5KCBhcnJheUxlbmd0aCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2wnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZGVyMi5nZXRJbnQ2NEFycmF5KCBhcnJheUxlbmd0aCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCAnVEhSRUUuRkJYTG9hZGVyOiBVbmtub3duIHByb3BlcnR5IHR5cGUgJyArIHR5cGUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgIH0gKTtcbiAgICBcbiAgICBcbiAgICAgICAgZnVuY3Rpb24gQmluYXJ5UmVhZGVyKCBidWZmZXIsIGxpdHRsZUVuZGlhbiApIHtcbiAgICBcbiAgICAgICAgICAgIHRoaXMuZHYgPSBuZXcgRGF0YVZpZXcoIGJ1ZmZlciApO1xuICAgICAgICAgICAgdGhpcy5vZmZzZXQgPSAwO1xuICAgICAgICAgICAgdGhpcy5saXR0bGVFbmRpYW4gPSAoIGxpdHRsZUVuZGlhbiAhPT0gdW5kZWZpbmVkICkgPyBsaXR0bGVFbmRpYW4gOiB0cnVlO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIE9iamVjdC5hc3NpZ24oIEJpbmFyeVJlYWRlci5wcm90b3R5cGUsIHtcbiAgICBcbiAgICAgICAgICAgIGdldE9mZnNldDogZnVuY3Rpb24gKCkge1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm9mZnNldDtcbiAgICBcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICBzaXplOiBmdW5jdGlvbiAoKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZHYuYnVmZmVyLmJ5dGVMZW5ndGg7XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgc2tpcDogZnVuY3Rpb24gKCBsZW5ndGggKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdGhpcy5vZmZzZXQgKz0gbGVuZ3RoO1xuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIC8vIHNlZW1zIGxpa2UgdHJ1ZS9mYWxzZSByZXByZXNlbnRhdGlvbiBkZXBlbmRzIG9uIGV4cG9ydGVyLlxuICAgICAgICAgICAgLy8gdHJ1ZTogMSBvciAnWScoPTB4NTkpLCBmYWxzZTogMCBvciAnVCcoPTB4NTQpXG4gICAgICAgICAgICAvLyB0aGVuIHNlZXMgTFNCLlxuICAgICAgICAgICAgZ2V0Qm9vbGVhbjogZnVuY3Rpb24gKCkge1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiAoIHRoaXMuZ2V0VWludDgoKSAmIDEgKSA9PT0gMTtcbiAgICBcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICBnZXRCb29sZWFuQXJyYXk6IGZ1bmN0aW9uICggc2l6ZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgYSA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IHNpemU7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGEucHVzaCggdGhpcy5nZXRCb29sZWFuKCkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgZ2V0VWludDg6IGZ1bmN0aW9uICgpIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmR2LmdldFVpbnQ4KCB0aGlzLm9mZnNldCApO1xuICAgICAgICAgICAgICAgIHRoaXMub2Zmc2V0ICs9IDE7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIGdldEludDE2OiBmdW5jdGlvbiAoKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5kdi5nZXRJbnQxNiggdGhpcy5vZmZzZXQsIHRoaXMubGl0dGxlRW5kaWFuICk7XG4gICAgICAgICAgICAgICAgdGhpcy5vZmZzZXQgKz0gMjtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgZ2V0SW50MzI6IGZ1bmN0aW9uICgpIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmR2LmdldEludDMyKCB0aGlzLm9mZnNldCwgdGhpcy5saXR0bGVFbmRpYW4gKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9mZnNldCArPSA0O1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICBcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICBnZXRJbnQzMkFycmF5OiBmdW5jdGlvbiAoIHNpemUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGEgPSBbXTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBzaXplOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBhLnB1c2goIHRoaXMuZ2V0SW50MzIoKSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gYTtcbiAgICBcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICBnZXRVaW50MzI6IGZ1bmN0aW9uICgpIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmR2LmdldFVpbnQzMiggdGhpcy5vZmZzZXQsIHRoaXMubGl0dGxlRW5kaWFuICk7XG4gICAgICAgICAgICAgICAgdGhpcy5vZmZzZXQgKz0gNDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgLy8gSmF2YVNjcmlwdCBkb2Vzbid0IHN1cHBvcnQgNjQtYml0IGludGVnZXIgc28gY2FsY3VsYXRlIHRoaXMgaGVyZVxuICAgICAgICAgICAgLy8gMSA8PCAzMiB3aWxsIHJldHVybiAxIHNvIHVzaW5nIG11bHRpcGx5IG9wZXJhdGlvbiBpbnN0ZWFkIGhlcmUuXG4gICAgICAgICAgICAvLyBUaGVyZSdzIGEgcG9zc2liaWxpdHkgdGhhdCB0aGlzIG1ldGhvZCByZXR1cm5zIHdyb25nIHZhbHVlIGlmIHRoZSB2YWx1ZVxuICAgICAgICAgICAgLy8gaXMgb3V0IG9mIHRoZSByYW5nZSBiZXR3ZWVuIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSIGFuZCBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUi5cbiAgICAgICAgICAgIC8vIFRPRE86IHNhZmVseSBoYW5kbGUgNjQtYml0IGludGVnZXJcbiAgICAgICAgICAgIGdldEludDY0OiBmdW5jdGlvbiAoKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGxvdywgaGlnaDtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMubGl0dGxlRW5kaWFuICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBsb3cgPSB0aGlzLmdldFVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBoaWdoID0gdGhpcy5nZXRVaW50MzIoKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBoaWdoID0gdGhpcy5nZXRVaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgbG93ID0gdGhpcy5nZXRVaW50MzIoKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlIG5lZ2F0aXZlIHZhbHVlXG4gICAgICAgICAgICAgICAgaWYgKCBoaWdoICYgMHg4MDAwMDAwMCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaGlnaCA9IH4gaGlnaCAmIDB4RkZGRkZGRkY7XG4gICAgICAgICAgICAgICAgICAgIGxvdyA9IH4gbG93ICYgMHhGRkZGRkZGRjtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBsb3cgPT09IDB4RkZGRkZGRkYgKSBoaWdoID0gKCBoaWdoICsgMSApICYgMHhGRkZGRkZGRjtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbG93ID0gKCBsb3cgKyAxICkgJiAweEZGRkZGRkZGO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLSAoIGhpZ2ggKiAweDEwMDAwMDAwMCArIGxvdyApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gaGlnaCAqIDB4MTAwMDAwMDAwICsgbG93O1xuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIGdldEludDY0QXJyYXk6IGZ1bmN0aW9uICggc2l6ZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgYSA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IHNpemU7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGEucHVzaCggdGhpcy5nZXRJbnQ2NCgpICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBhO1xuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIC8vIE5vdGU6IHNlZSBnZXRJbnQ2NCgpIGNvbW1lbnRcbiAgICAgICAgICAgIGdldFVpbnQ2NDogZnVuY3Rpb24gKCkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBsb3csIGhpZ2g7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCB0aGlzLmxpdHRsZUVuZGlhbiApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbG93ID0gdGhpcy5nZXRVaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgaGlnaCA9IHRoaXMuZ2V0VWludDMyKCk7XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaGlnaCA9IHRoaXMuZ2V0VWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGxvdyA9IHRoaXMuZ2V0VWludDMyKCk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBoaWdoICogMHgxMDAwMDAwMDAgKyBsb3c7XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgZ2V0RmxvYXQzMjogZnVuY3Rpb24gKCkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuZHYuZ2V0RmxvYXQzMiggdGhpcy5vZmZzZXQsIHRoaXMubGl0dGxlRW5kaWFuICk7XG4gICAgICAgICAgICAgICAgdGhpcy5vZmZzZXQgKz0gNDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgZ2V0RmxvYXQzMkFycmF5OiBmdW5jdGlvbiAoIHNpemUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGEgPSBbXTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBzaXplOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBhLnB1c2goIHRoaXMuZ2V0RmxvYXQzMigpICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBhO1xuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIGdldEZsb2F0NjQ6IGZ1bmN0aW9uICgpIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmR2LmdldEZsb2F0NjQoIHRoaXMub2Zmc2V0LCB0aGlzLmxpdHRsZUVuZGlhbiApO1xuICAgICAgICAgICAgICAgIHRoaXMub2Zmc2V0ICs9IDg7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIFxuICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgIGdldEZsb2F0NjRBcnJheTogZnVuY3Rpb24gKCBzaXplICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBhID0gW107XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgc2l6ZTsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgYS5wdXNoKCB0aGlzLmdldEZsb2F0NjQoKSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gYTtcbiAgICBcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICBnZXRBcnJheUJ1ZmZlcjogZnVuY3Rpb24gKCBzaXplICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuZHYuYnVmZmVyLnNsaWNlKCB0aGlzLm9mZnNldCwgdGhpcy5vZmZzZXQgKyBzaXplICk7XG4gICAgICAgICAgICAgICAgdGhpcy5vZmZzZXQgKz0gc2l6ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgZ2V0U3RyaW5nOiBmdW5jdGlvbiAoIHNpemUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGEgPSBuZXcgVWludDhBcnJheSggc2l6ZSApO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IHNpemU7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGFbIGkgXSA9IHRoaXMuZ2V0VWludDgoKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIG51bGxCeXRlID0gYS5pbmRleE9mKCAwICk7XG4gICAgICAgICAgICAgICAgaWYgKCBudWxsQnl0ZSA+PSAwICkgYSA9IGEuc2xpY2UoIDAsIG51bGxCeXRlICk7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRIUkVFLkxvYWRlclV0aWxzLmRlY29kZVRleHQoIGEgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgfSApO1xuICAgIFxuICAgICAgICAvLyBGQlhUcmVlIGhvbGRzIGEgcmVwcmVzZW50YXRpb24gb2YgdGhlIEZCWCBkYXRhLCByZXR1cm5lZCBieSB0aGUgVGV4dFBhcnNlciAoIEZCWCBBU0NJSSBmb3JtYXQpXG4gICAgICAgIC8vIGFuZCBCaW5hcnlQYXJzZXIoIEZCWCBCaW5hcnkgZm9ybWF0KVxuICAgICAgICBmdW5jdGlvbiBGQlhUcmVlKCkge31cbiAgICBcbiAgICAgICAgT2JqZWN0LmFzc2lnbiggRkJYVHJlZS5wcm90b3R5cGUsIHtcbiAgICBcbiAgICAgICAgICAgIGFkZDogZnVuY3Rpb24gKCBrZXksIHZhbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB0aGlzWyBrZXkgXSA9IHZhbDtcbiAgICBcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgZnVuY3Rpb24gaXNGYnhGb3JtYXRCaW5hcnkoIGJ1ZmZlciApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBDT1JSRUNUID0gJ0theWRhcmEgRkJYIEJpbmFyeSAgXFwwJztcbiAgICBcbiAgICAgICAgICAgIHJldHVybiBidWZmZXIuYnl0ZUxlbmd0aCA+PSBDT1JSRUNULmxlbmd0aCAmJiBDT1JSRUNUID09PSBjb252ZXJ0QXJyYXlCdWZmZXJUb1N0cmluZyggYnVmZmVyLCAwLCBDT1JSRUNULmxlbmd0aCApO1xuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGZ1bmN0aW9uIGlzRmJ4Rm9ybWF0QVNDSUkoIHRleHQgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgQ09SUkVDVCA9IFsgJ0snLCAnYScsICd5JywgJ2QnLCAnYScsICdyJywgJ2EnLCAnXFxcXCcsICdGJywgJ0InLCAnWCcsICdcXFxcJywgJ0InLCAnaScsICduJywgJ2EnLCAncicsICd5JywgJ1xcXFwnLCAnXFxcXCcgXTtcbiAgICBcbiAgICAgICAgICAgIHZhciBjdXJzb3IgPSAwO1xuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcmVhZCggb2Zmc2V0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB0ZXh0WyBvZmZzZXQgLSAxIF07XG4gICAgICAgICAgICAgICAgdGV4dCA9IHRleHQuc2xpY2UoIGN1cnNvciArIG9mZnNldCApO1xuICAgICAgICAgICAgICAgIGN1cnNvciArKztcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgQ09SUkVDVC5sZW5ndGg7ICsrIGkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIG51bSA9IHJlYWQoIDEgKTtcbiAgICAgICAgICAgICAgICBpZiAoIG51bSA9PT0gQ09SUkVDVFsgaSBdICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgZnVuY3Rpb24gZ2V0RmJ4VmVyc2lvbiggdGV4dCApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciB2ZXJzaW9uUmVnRXhwID0gL0ZCWFZlcnNpb246IChcXGQrKS87XG4gICAgICAgICAgICB2YXIgbWF0Y2ggPSB0ZXh0Lm1hdGNoKCB2ZXJzaW9uUmVnRXhwICk7XG4gICAgICAgICAgICBpZiAoIG1hdGNoICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciB2ZXJzaW9uID0gcGFyc2VJbnQoIG1hdGNoWyAxIF0gKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmVyc2lvbjtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvciggJ1RIUkVFLkZCWExvYWRlcjogQ2Fubm90IGZpbmQgdGhlIHZlcnNpb24gbnVtYmVyIGZvciB0aGUgZmlsZSBnaXZlbi4nICk7XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gQ29udmVydHMgRkJYIHRpY2tzIGludG8gcmVhbCB0aW1lIHNlY29uZHMuXG4gICAgICAgIGZ1bmN0aW9uIGNvbnZlcnRGQlhUaW1lVG9TZWNvbmRzKCB0aW1lICkge1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuIHRpbWUgLyA0NjE4NjE1ODAwMDtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgIFxuICAgICAgICAvLyBQYXJzZXMgY29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgbnVtYmVycyBhbmQgcmV0dXJucyB0aGVtIGFuIGFycmF5LlxuICAgICAgICAvLyBVc2VkIGludGVybmFsbHkgYnkgdGhlIFRleHRQYXJzZXJcbiAgICAgICAgZnVuY3Rpb24gcGFyc2VOdW1iZXJBcnJheSggdmFsdWUgKSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgYXJyYXkgPSB2YWx1ZS5zcGxpdCggJywnICkubWFwKCBmdW5jdGlvbiAoIHZhbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCggdmFsICk7XG4gICAgXG4gICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgZnVuY3Rpb24gY29udmVydEFycmF5QnVmZmVyVG9TdHJpbmcoIGJ1ZmZlciwgZnJvbSwgdG8gKSB7XG4gICAgXG4gICAgICAgICAgICBpZiAoIGZyb20gPT09IHVuZGVmaW5lZCApIGZyb20gPSAwO1xuICAgICAgICAgICAgaWYgKCB0byA9PT0gdW5kZWZpbmVkICkgdG8gPSBidWZmZXIuYnl0ZUxlbmd0aDtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiBUSFJFRS5Mb2FkZXJVdGlscy5kZWNvZGVUZXh0KCBuZXcgVWludDhBcnJheSggYnVmZmVyLCBmcm9tLCB0byApICk7XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgZnVuY3Rpb24gYXBwZW5kKCBhLCBiICkge1xuICAgIFxuICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBqID0gYS5sZW5ndGgsIGwgPSBiLmxlbmd0aDsgaSA8IGw7IGkgKyssIGogKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgYVsgaiBdID0gYlsgaSBdO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGZ1bmN0aW9uIHNsaWNlKCBhLCBiLCBmcm9tLCB0byApIHtcbiAgICBcbiAgICAgICAgICAgIGZvciAoIHZhciBpID0gZnJvbSwgaiA9IDA7IGkgPCB0bzsgaSArKywgaiArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBhWyBqIF0gPSBiWyBpIF07XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gYTtcbiAgICBcbiAgICAgICAgfVxuICAgIFxuICAgIH0gKSgpOyIsIi8qKlxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cbiAqIEBhdXRob3IgTXVnZW44NyAvIGh0dHBzOi8vZ2l0aHViLmNvbS9NdWdlbjg3XG4gKi9cblxuVEhSRUUuQ29sbGFkYUxvYWRlciA9IGZ1bmN0aW9uICggbWFuYWdlciApIHtcbiAgICBcbiAgICAgICAgdGhpcy5tYW5hZ2VyID0gKCBtYW5hZ2VyICE9PSB1bmRlZmluZWQgKSA/IG1hbmFnZXIgOiBUSFJFRS5EZWZhdWx0TG9hZGluZ01hbmFnZXI7XG4gICAgXG4gICAgfTtcbiAgICBcbiAgICBUSFJFRS5Db2xsYWRhTG9hZGVyLnByb3RvdHlwZSA9IHtcbiAgICBcbiAgICAgICAgY29uc3RydWN0b3I6IFRIUkVFLkNvbGxhZGFMb2FkZXIsXG4gICAgXG4gICAgICAgIGNyb3NzT3JpZ2luOiAnQW5vbnltb3VzJyxcbiAgICBcbiAgICAgICAgbG9hZDogZnVuY3Rpb24gKCB1cmwsIG9uTG9hZCwgb25Qcm9ncmVzcywgb25FcnJvciApIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBzY29wZSA9IHRoaXM7XG4gICAgXG4gICAgICAgICAgICB2YXIgcGF0aCA9IHNjb3BlLnBhdGggPT09IHVuZGVmaW5lZCA/IFRIUkVFLkxvYWRlclV0aWxzLmV4dHJhY3RVcmxCYXNlKCB1cmwgKSA6IHNjb3BlLnBhdGg7XG4gICAgXG4gICAgICAgICAgICB2YXIgbG9hZGVyID0gbmV3IFRIUkVFLkZpbGVMb2FkZXIoIHNjb3BlLm1hbmFnZXIgKTtcbiAgICAgICAgICAgIGxvYWRlci5sb2FkKCB1cmwsIGZ1bmN0aW9uICggdGV4dCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBvbkxvYWQoIHNjb3BlLnBhcnNlKCB0ZXh0LCBwYXRoICkgKTtcbiAgICBcbiAgICAgICAgICAgIH0sIG9uUHJvZ3Jlc3MsIG9uRXJyb3IgKTtcbiAgICBcbiAgICAgICAgfSxcbiAgICBcbiAgICAgICAgc2V0UGF0aDogZnVuY3Rpb24gKCB2YWx1ZSApIHtcbiAgICBcbiAgICAgICAgICAgIHRoaXMucGF0aCA9IHZhbHVlO1xuICAgIFxuICAgICAgICB9LFxuICAgIFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgXG4gICAgICAgICAgICBzZXQgY29udmVydFVwQXhpcyggdmFsdWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogb3B0aW9ucy5jb252ZXJ0VXBBeGlzKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXAgYXhpcyBpcyBjb252ZXJ0ZWQgYXV0b21hdGljYWxseS4nICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgIH0sXG4gICAgXG4gICAgICAgIHNldENyb3NzT3JpZ2luOiBmdW5jdGlvbiAoIHZhbHVlICkge1xuICAgIFxuICAgICAgICAgICAgdGhpcy5jcm9zc09yaWdpbiA9IHZhbHVlO1xuICAgIFxuICAgICAgICB9LFxuICAgIFxuICAgICAgICBwYXJzZTogZnVuY3Rpb24gKCB0ZXh0LCBwYXRoICkge1xuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHhtbCwgbmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBOb24gcmVjdXJzaXZlIHhtbC5nZXRFbGVtZW50c0J5VGFnTmFtZSgpIC4uLlxuICAgIFxuICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZE5vZGVzID0geG1sLmNoaWxkTm9kZXM7XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0gY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBjaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQubm9kZU5hbWUgPT09IG5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheS5wdXNoKCBjaGlsZCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBhcnJheTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlU3RyaW5ncyggdGV4dCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHRleHQubGVuZ3RoID09PSAwICkgcmV0dXJuIFtdO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9IHRleHQudHJpbSgpLnNwbGl0KCAvXFxzKy8gKTtcbiAgICAgICAgICAgICAgICB2YXIgYXJyYXkgPSBuZXcgQXJyYXkoIHBhcnRzLmxlbmd0aCApO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHBhcnRzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGFycmF5WyBpIF0gPSBwYXJ0c1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUZsb2F0cyggdGV4dCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHRleHQubGVuZ3RoID09PSAwICkgcmV0dXJuIFtdO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9IHRleHQudHJpbSgpLnNwbGl0KCAvXFxzKy8gKTtcbiAgICAgICAgICAgICAgICB2YXIgYXJyYXkgPSBuZXcgQXJyYXkoIHBhcnRzLmxlbmd0aCApO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHBhcnRzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGFycmF5WyBpIF0gPSBwYXJzZUZsb2F0KCBwYXJ0c1sgaSBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBhcnJheTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlSW50cyggdGV4dCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHRleHQubGVuZ3RoID09PSAwICkgcmV0dXJuIFtdO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9IHRleHQudHJpbSgpLnNwbGl0KCAvXFxzKy8gKTtcbiAgICAgICAgICAgICAgICB2YXIgYXJyYXkgPSBuZXcgQXJyYXkoIHBhcnRzLmxlbmd0aCApO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHBhcnRzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGFycmF5WyBpIF0gPSBwYXJzZUludCggcGFydHNbIGkgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUlkKCB0ZXh0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0LnN1YnN0cmluZyggMSApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVJZCgpIHtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3RocmVlX2RlZmF1bHRfJyArICggY291bnQgKysgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGlzRW1wdHkoIG9iamVjdCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoIG9iamVjdCApLmxlbmd0aCA9PT0gMDtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIC8vIGFzc2V0XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUFzc2V0KCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdW5pdDogcGFyc2VBc3NldFVuaXQoIGdldEVsZW1lbnRzQnlUYWdOYW1lKCB4bWwsICd1bml0JyApWyAwIF0gKSxcbiAgICAgICAgICAgICAgICAgICAgdXBBeGlzOiBwYXJzZUFzc2V0VXBBeGlzKCBnZXRFbGVtZW50c0J5VGFnTmFtZSggeG1sLCAndXBfYXhpcycgKVsgMCBdIClcbiAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VBc3NldFVuaXQoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4geG1sICE9PSB1bmRlZmluZWQgPyBwYXJzZUZsb2F0KCB4bWwuZ2V0QXR0cmlidXRlKCAnbWV0ZXInICkgKSA6IDE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUFzc2V0VXBBeGlzKCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHhtbCAhPT0gdW5kZWZpbmVkID8geG1sLnRleHRDb250ZW50IDogJ1lfVVAnO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgLy8gbGlicmFyeVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VMaWJyYXJ5KCB4bWwsIGxpYnJhcnlOYW1lLCBub2RlTmFtZSwgcGFyc2VyICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBsaWJyYXJ5ID0gZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHhtbCwgbGlicmFyeU5hbWUgKVsgMCBdO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggbGlicmFyeSAhPT0gdW5kZWZpbmVkICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBnZXRFbGVtZW50c0J5VGFnTmFtZSggbGlicmFyeSwgbm9kZU5hbWUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyKCBlbGVtZW50c1sgaSBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBidWlsZExpYnJhcnkoIGRhdGEsIGJ1aWxkZXIgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIG5hbWUgaW4gZGF0YSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IGRhdGFbIG5hbWUgXTtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmJ1aWxkID0gYnVpbGRlciggZGF0YVsgbmFtZSBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgLy8gZ2V0XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRCdWlsZCggZGF0YSwgYnVpbGRlciApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGRhdGEuYnVpbGQgIT09IHVuZGVmaW5lZCApIHJldHVybiBkYXRhLmJ1aWxkO1xuICAgIFxuICAgICAgICAgICAgICAgIGRhdGEuYnVpbGQgPSBidWlsZGVyKCBkYXRhICk7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuYnVpbGQ7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAvLyBhbmltYXRpb25cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlQW5pbWF0aW9uKCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZXM6IHt9LFxuICAgICAgICAgICAgICAgICAgICBzYW1wbGVyczoge30sXG4gICAgICAgICAgICAgICAgICAgIGNoYW5uZWxzOiB7fVxuICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgaWQ7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnc291cmNlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZCA9IGNoaWxkLmdldEF0dHJpYnV0ZSggJ2lkJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuc291cmNlc1sgaWQgXSA9IHBhcnNlU291cmNlKCBjaGlsZCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2FtcGxlcic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQgPSBjaGlsZC5nZXRBdHRyaWJ1dGUoICdpZCcgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnNhbXBsZXJzWyBpZCBdID0gcGFyc2VBbmltYXRpb25TYW1wbGVyKCBjaGlsZCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY2hhbm5lbCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQgPSBjaGlsZC5nZXRBdHRyaWJ1dGUoICd0YXJnZXQnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5jaGFubmVsc1sgaWQgXSA9IHBhcnNlQW5pbWF0aW9uQ2hhbm5lbCggY2hpbGQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIGNoaWxkICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgbGlicmFyeS5hbmltYXRpb25zWyB4bWwuZ2V0QXR0cmlidXRlKCAnaWQnICkgXSA9IGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUFuaW1hdGlvblNhbXBsZXIoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRzOiB7fSxcbiAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdpbnB1dCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gcGFyc2VJZCggY2hpbGQuZ2V0QXR0cmlidXRlKCAnc291cmNlJyApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbWFudGljID0gY2hpbGQuZ2V0QXR0cmlidXRlKCAnc2VtYW50aWMnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5pbnB1dHNbIHNlbWFudGljIF0gPSBpZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlQW5pbWF0aW9uQ2hhbm5lbCggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge307XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IHhtbC5nZXRBdHRyaWJ1dGUoICd0YXJnZXQnICk7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gcGFyc2luZyBTSUQgQWRkcmVzc2luZyBTeW50YXhcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgcGFydHMgPSB0YXJnZXQuc3BsaXQoICcvJyApO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBpZCA9IHBhcnRzLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgdmFyIHNpZCA9IHBhcnRzLnNoaWZ0KCk7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgc2VsZWN0aW9uIHN5bnRheFxuICAgIFxuICAgICAgICAgICAgICAgIHZhciBhcnJheVN5bnRheCA9ICggc2lkLmluZGV4T2YoICcoJyApICE9PSAtIDEgKTtcbiAgICAgICAgICAgICAgICB2YXIgbWVtYmVyU3ludGF4ID0gKCBzaWQuaW5kZXhPZiggJy4nICkgIT09IC0gMSApO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggbWVtYmVyU3ludGF4ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyAgbWVtYmVyIHNlbGVjdGlvbiBhY2Nlc3NcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcGFydHMgPSBzaWQuc3BsaXQoICcuJyApO1xuICAgICAgICAgICAgICAgICAgICBzaWQgPSBwYXJ0cy5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICBkYXRhLm1lbWJlciA9IHBhcnRzLnNoaWZ0KCk7XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggYXJyYXlTeW50YXggKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIGFycmF5LWFjY2VzcyBzeW50YXguIGNhbiBiZSB1c2VkIHRvIGV4cHJlc3MgZmllbGRzIGluIG9uZS1kaW1lbnNpb25hbCB2ZWN0b3JzIG9yIHR3by1kaW1lbnNpb25hbCBtYXRyaWNlcy5cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGljZXMgPSBzaWQuc3BsaXQoICcoJyApO1xuICAgICAgICAgICAgICAgICAgICBzaWQgPSBpbmRpY2VzLnNoaWZ0KCk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IGluZGljZXMubGVuZ3RoOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNlc1sgaSBdID0gcGFyc2VJbnQoIGluZGljZXNbIGkgXS5yZXBsYWNlKCAvXFwpLywgJycgKSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuaW5kaWNlcyA9IGluZGljZXM7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGRhdGEuaWQgPSBpZDtcbiAgICAgICAgICAgICAgICBkYXRhLnNpZCA9IHNpZDtcbiAgICBcbiAgICAgICAgICAgICAgICBkYXRhLmFycmF5U3ludGF4ID0gYXJyYXlTeW50YXg7XG4gICAgICAgICAgICAgICAgZGF0YS5tZW1iZXJTeW50YXggPSBtZW1iZXJTeW50YXg7XG4gICAgXG4gICAgICAgICAgICAgICAgZGF0YS5zYW1wbGVyID0gcGFyc2VJZCggeG1sLmdldEF0dHJpYnV0ZSggJ3NvdXJjZScgKSApO1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gYnVpbGRBbmltYXRpb24oIGRhdGEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHRyYWNrcyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBjaGFubmVscyA9IGRhdGEuY2hhbm5lbHM7XG4gICAgICAgICAgICAgICAgdmFyIHNhbXBsZXJzID0gZGF0YS5zYW1wbGVycztcbiAgICAgICAgICAgICAgICB2YXIgc291cmNlcyA9IGRhdGEuc291cmNlcztcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgdGFyZ2V0IGluIGNoYW5uZWxzICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoYW5uZWxzLmhhc093blByb3BlcnR5KCB0YXJnZXQgKSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGFubmVsID0gY2hhbm5lbHNbIHRhcmdldCBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNhbXBsZXIgPSBzYW1wbGVyc1sgY2hhbm5lbC5zYW1wbGVyIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXRJZCA9IHNhbXBsZXIuaW5wdXRzLklOUFVUO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG91dHB1dElkID0gc2FtcGxlci5pbnB1dHMuT1VUUFVUO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlucHV0U291cmNlID0gc291cmNlc1sgaW5wdXRJZCBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG91dHB1dFNvdXJjZSA9IHNvdXJjZXNbIG91dHB1dElkIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW5pbWF0aW9uID0gYnVpbGRBbmltYXRpb25DaGFubmVsKCBjaGFubmVsLCBpbnB1dFNvdXJjZSwgb3V0cHV0U291cmNlICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVLZXlmcmFtZVRyYWNrcyggYW5pbWF0aW9uLCB0cmFja3MgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhY2tzO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0QW5pbWF0aW9uKCBpZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0QnVpbGQoIGxpYnJhcnkuYW5pbWF0aW9uc1sgaWQgXSwgYnVpbGRBbmltYXRpb24gKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGJ1aWxkQW5pbWF0aW9uQ2hhbm5lbCggY2hhbm5lbCwgaW5wdXRTb3VyY2UsIG91dHB1dFNvdXJjZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IGxpYnJhcnkubm9kZXNbIGNoYW5uZWwuaWQgXTtcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0M0QgPSBnZXROb2RlKCBub2RlLmlkICk7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zZm9ybSA9IG5vZGUudHJhbnNmb3Jtc1sgY2hhbm5lbC5zaWQgXTtcbiAgICAgICAgICAgICAgICB2YXIgZGVmYXVsdE1hdHJpeCA9IG5vZGUubWF0cml4LmNsb25lKCkudHJhbnNwb3NlKCk7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHRpbWUsIHN0cmlkZTtcbiAgICAgICAgICAgICAgICB2YXIgaSwgaWwsIGosIGpsO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge307XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gdGhlIGNvbGxhZGEgc3BlYyBhbGxvd3MgdGhlIGFuaW1hdGlvbiBvZiBkYXRhIGluIHZhcmlvdXMgd2F5cy5cbiAgICAgICAgICAgICAgICAvLyBkZXBlbmRpbmcgb24gdGhlIHRyYW5zZm9ybSB0eXBlIChtYXRyaXgsIHRyYW5zbGF0ZSwgcm90YXRlLCBzY2FsZSksIHdlIGV4ZWN1dGUgZGlmZmVyZW50IGxvZ2ljXG4gICAgXG4gICAgICAgICAgICAgICAgc3dpdGNoICggdHJhbnNmb3JtICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjYXNlICdtYXRyaXgnOlxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggaSA9IDAsIGlsID0gaW5wdXRTb3VyY2UuYXJyYXkubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZSA9IGlucHV0U291cmNlLmFycmF5WyBpIF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaWRlID0gaSAqIG91dHB1dFNvdXJjZS5zdHJpZGU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBkYXRhWyB0aW1lIF0gPT09IHVuZGVmaW5lZCApIGRhdGFbIHRpbWUgXSA9IHt9O1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggY2hhbm5lbC5hcnJheVN5bnRheCA9PT0gdHJ1ZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gb3V0cHV0U291cmNlLmFycmF5WyBzdHJpZGUgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gY2hhbm5lbC5pbmRpY2VzWyAwIF0gKyA0ICogY2hhbm5lbC5pbmRpY2VzWyAxIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbIHRpbWUgXVsgaW5kZXggXSA9IHZhbHVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIGogPSAwLCBqbCA9IG91dHB1dFNvdXJjZS5zdHJpZGU7IGogPCBqbDsgaiArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbIHRpbWUgXVsgaiBdID0gb3V0cHV0U291cmNlLmFycmF5WyBzdHJpZGUgKyBqIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndHJhbnNsYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybiggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IEFuaW1hdGlvbiB0cmFuc2Zvcm0gdHlwZSBcIiVzXCIgbm90IHlldCBpbXBsZW1lbnRlZC4nLCB0cmFuc2Zvcm0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjYXNlICdyb3RhdGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogQW5pbWF0aW9uIHRyYW5zZm9ybSB0eXBlIFwiJXNcIiBub3QgeWV0IGltcGxlbWVudGVkLicsIHRyYW5zZm9ybSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NjYWxlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybiggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IEFuaW1hdGlvbiB0cmFuc2Zvcm0gdHlwZSBcIiVzXCIgbm90IHlldCBpbXBsZW1lbnRlZC4nLCB0cmFuc2Zvcm0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB2YXIga2V5ZnJhbWVzID0gcHJlcGFyZUFuaW1hdGlvbkRhdGEoIGRhdGEsIGRlZmF1bHRNYXRyaXggKTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgYW5pbWF0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBvYmplY3QzRC51dWlkLFxuICAgICAgICAgICAgICAgICAgICBrZXlmcmFtZXM6IGtleWZyYW1lc1xuICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFuaW1hdGlvbjtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHByZXBhcmVBbmltYXRpb25EYXRhKCBkYXRhLCBkZWZhdWx0TWF0cml4ICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBrZXlmcmFtZXMgPSBbXTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyB0cmFuc2ZlciBkYXRhIGludG8gYSBzb3J0YWJsZSBhcnJheVxuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciB0aW1lIGluIGRhdGEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGtleWZyYW1lcy5wdXNoKCB7IHRpbWU6IHBhcnNlRmxvYXQoIHRpbWUgKSwgdmFsdWU6IGRhdGFbIHRpbWUgXSB9ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIC8vIGVuc3VyZSBrZXlmcmFtZXMgYXJlIHNvcnRlZCBieSB0aW1lXG4gICAgXG4gICAgICAgICAgICAgICAga2V5ZnJhbWVzLnNvcnQoIGFzY2VuZGluZyApO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIG5vdyB3ZSBjbGVhbiB1cCBhbGwgYW5pbWF0aW9uIGRhdGEsIHNvIHdlIGNhbiB1c2UgdGhlbSBmb3Iga2V5ZnJhbWUgdHJhY2tzXG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgMTY7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybUFuaW1hdGlvbkRhdGEoIGtleWZyYW1lcywgaSwgZGVmYXVsdE1hdHJpeC5lbGVtZW50c1sgaSBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBrZXlmcmFtZXM7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gYXJyYXkgc29ydCBmdW5jdGlvblxuICAgIFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGFzY2VuZGluZyggYSwgYiApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEudGltZSAtIGIudGltZTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB2YXIgcG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgICAgICAgICAgdmFyIHNjYWxlID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICAgICAgICAgIHZhciBxdWF0ZXJuaW9uID0gbmV3IFRIUkVFLlF1YXRlcm5pb24oKTtcbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUtleWZyYW1lVHJhY2tzKCBhbmltYXRpb24sIHRyYWNrcyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIga2V5ZnJhbWVzID0gYW5pbWF0aW9uLmtleWZyYW1lcztcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGFuaW1hdGlvbi5uYW1lO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciB0aW1lcyA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvbkRhdGEgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgcXVhdGVybmlvbkRhdGEgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgc2NhbGVEYXRhID0gW107XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0ga2V5ZnJhbWVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlmcmFtZSA9IGtleWZyYW1lc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgdGltZSA9IGtleWZyYW1lLnRpbWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGtleWZyYW1lLnZhbHVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBtYXRyaXguZnJvbUFycmF5KCB2YWx1ZSApLnRyYW5zcG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICBtYXRyaXguZGVjb21wb3NlKCBwb3NpdGlvbiwgcXVhdGVybmlvbiwgc2NhbGUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdGltZXMucHVzaCggdGltZSApO1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbkRhdGEucHVzaCggcG9zaXRpb24ueCwgcG9zaXRpb24ueSwgcG9zaXRpb24ueiApO1xuICAgICAgICAgICAgICAgICAgICBxdWF0ZXJuaW9uRGF0YS5wdXNoKCBxdWF0ZXJuaW9uLngsIHF1YXRlcm5pb24ueSwgcXVhdGVybmlvbi56LCBxdWF0ZXJuaW9uLncgKTtcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVEYXRhLnB1c2goIHNjYWxlLngsIHNjYWxlLnksIHNjYWxlLnogKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBwb3NpdGlvbkRhdGEubGVuZ3RoID4gMCApIHRyYWNrcy5wdXNoKCBuZXcgVEhSRUUuVmVjdG9yS2V5ZnJhbWVUcmFjayggbmFtZSArICcucG9zaXRpb24nLCB0aW1lcywgcG9zaXRpb25EYXRhICkgKTtcbiAgICAgICAgICAgICAgICBpZiAoIHF1YXRlcm5pb25EYXRhLmxlbmd0aCA+IDAgKSB0cmFja3MucHVzaCggbmV3IFRIUkVFLlF1YXRlcm5pb25LZXlmcmFtZVRyYWNrKCBuYW1lICsgJy5xdWF0ZXJuaW9uJywgdGltZXMsIHF1YXRlcm5pb25EYXRhICkgKTtcbiAgICAgICAgICAgICAgICBpZiAoIHNjYWxlRGF0YS5sZW5ndGggPiAwICkgdHJhY2tzLnB1c2goIG5ldyBUSFJFRS5WZWN0b3JLZXlmcmFtZVRyYWNrKCBuYW1lICsgJy5zY2FsZScsIHRpbWVzLCBzY2FsZURhdGEgKSApO1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFja3M7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiB0cmFuc2Zvcm1BbmltYXRpb25EYXRhKCBrZXlmcmFtZXMsIHByb3BlcnR5LCBkZWZhdWx0VmFsdWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGtleWZyYW1lO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBlbXB0eSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdmFyIGksIGw7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gY2hlY2ssIGlmIHZhbHVlcyBvZiBhIHByb3BlcnR5IGFyZSBtaXNzaW5nIGluIG91ciBrZXlmcmFtZXNcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCBpID0gMCwgbCA9IGtleWZyYW1lcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBrZXlmcmFtZSA9IGtleWZyYW1lc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGtleWZyYW1lLnZhbHVlWyBwcm9wZXJ0eSBdID09PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlmcmFtZS52YWx1ZVsgcHJvcGVydHkgXSA9IG51bGw7IC8vIG1hcmsgYXMgbWlzc2luZ1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHkgPSBmYWxzZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGVtcHR5ID09PSB0cnVlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBubyB2YWx1ZXMgYXQgYWxsLCBzbyB3ZSBzZXQgYSBkZWZhdWx0IHZhbHVlXG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIGkgPSAwLCBsID0ga2V5ZnJhbWVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlmcmFtZSA9IGtleWZyYW1lc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5ZnJhbWUudmFsdWVbIHByb3BlcnR5IF0gPSBkZWZhdWx0VmFsdWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBmaWxsaW5nIGdhcHNcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlTWlzc2luZ0tleWZyYW1lcygga2V5ZnJhbWVzLCBwcm9wZXJ0eSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZU1pc3NpbmdLZXlmcmFtZXMoIGtleWZyYW1lcywgcHJvcGVydHkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHByZXYsIG5leHQ7XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0ga2V5ZnJhbWVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlmcmFtZSA9IGtleWZyYW1lc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGtleWZyYW1lLnZhbHVlWyBwcm9wZXJ0eSBdID09PSBudWxsICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldiA9IGdldFByZXYoIGtleWZyYW1lcywgaSwgcHJvcGVydHkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQgPSBnZXROZXh0KCBrZXlmcmFtZXMsIGksIHByb3BlcnR5ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHByZXYgPT09IG51bGwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5ZnJhbWUudmFsdWVbIHByb3BlcnR5IF0gPSBuZXh0LnZhbHVlWyBwcm9wZXJ0eSBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBuZXh0ID09PSBudWxsICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleWZyYW1lLnZhbHVlWyBwcm9wZXJ0eSBdID0gcHJldi52YWx1ZVsgcHJvcGVydHkgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVycG9sYXRlKCBrZXlmcmFtZSwgcHJldiwgbmV4dCwgcHJvcGVydHkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFByZXYoIGtleWZyYW1lcywgaSwgcHJvcGVydHkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgd2hpbGUgKCBpID49IDAgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlmcmFtZSA9IGtleWZyYW1lc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGtleWZyYW1lLnZhbHVlWyBwcm9wZXJ0eSBdICE9PSBudWxsICkgcmV0dXJuIGtleWZyYW1lO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpIC0tO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldE5leHQoIGtleWZyYW1lcywgaSwgcHJvcGVydHkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgd2hpbGUgKCBpIDwga2V5ZnJhbWVzLmxlbmd0aCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleWZyYW1lID0ga2V5ZnJhbWVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICgga2V5ZnJhbWUudmFsdWVbIHByb3BlcnR5IF0gIT09IG51bGwgKSByZXR1cm4ga2V5ZnJhbWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGkgKys7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gaW50ZXJwb2xhdGUoIGtleSwgcHJldiwgbmV4dCwgcHJvcGVydHkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCAoIG5leHQudGltZSAtIHByZXYudGltZSApID09PSAwICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBrZXkudmFsdWVbIHByb3BlcnR5IF0gPSBwcmV2LnZhbHVlWyBwcm9wZXJ0eSBdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGtleS52YWx1ZVsgcHJvcGVydHkgXSA9ICggKCBrZXkudGltZSAtIHByZXYudGltZSApICogKCBuZXh0LnZhbHVlWyBwcm9wZXJ0eSBdIC0gcHJldi52YWx1ZVsgcHJvcGVydHkgXSApIC8gKCBuZXh0LnRpbWUgLSBwcmV2LnRpbWUgKSApICsgcHJldi52YWx1ZVsgcHJvcGVydHkgXTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIC8vIGFuaW1hdGlvbiBjbGlwc1xuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VBbmltYXRpb25DbGlwKCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHhtbC5nZXRBdHRyaWJ1dGUoICdpZCcgKSB8fCAnZGVmYXVsdCcsXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBwYXJzZUZsb2F0KCB4bWwuZ2V0QXR0cmlidXRlKCAnc3RhcnQnICkgfHwgMCApLFxuICAgICAgICAgICAgICAgICAgICBlbmQ6IHBhcnNlRmxvYXQoIHhtbC5nZXRBdHRyaWJ1dGUoICdlbmQnICkgfHwgMCApLFxuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25zOiBbXVxuICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2luc3RhbmNlX2FuaW1hdGlvbic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5hbmltYXRpb25zLnB1c2goIHBhcnNlSWQoIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3VybCcgKSApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgbGlicmFyeS5jbGlwc1sgeG1sLmdldEF0dHJpYnV0ZSggJ2lkJyApIF0gPSBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gYnVpbGRBbmltYXRpb25DbGlwKCBkYXRhICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciB0cmFja3MgPSBbXTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGRhdGEubmFtZTtcbiAgICAgICAgICAgICAgICB2YXIgZHVyYXRpb24gPSAoIGRhdGEuZW5kIC0gZGF0YS5zdGFydCApIHx8IC0gMTtcbiAgICAgICAgICAgICAgICB2YXIgYW5pbWF0aW9ucyA9IGRhdGEuYW5pbWF0aW9ucztcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGlsID0gYW5pbWF0aW9ucy5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFuaW1hdGlvblRyYWNrcyA9IGdldEFuaW1hdGlvbiggYW5pbWF0aW9uc1sgaSBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBqID0gMCwgamwgPSBhbmltYXRpb25UcmFja3MubGVuZ3RoOyBqIDwgamw7IGogKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFja3MucHVzaCggYW5pbWF0aW9uVHJhY2tzWyBqIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRIUkVFLkFuaW1hdGlvbkNsaXAoIG5hbWUsIGR1cmF0aW9uLCB0cmFja3MgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldEFuaW1hdGlvbkNsaXAoIGlkICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBnZXRCdWlsZCggbGlicmFyeS5jbGlwc1sgaWQgXSwgYnVpbGRBbmltYXRpb25DbGlwICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAvLyBjb250cm9sbGVyXG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUNvbnRyb2xsZXIoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdza2luJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGVyZSBpcyBleGFjdGx5IG9uZSBza2luIHBlciBjb250cm9sbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5pZCA9IHBhcnNlSWQoIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NvdXJjZScgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuc2tpbiA9IHBhcnNlU2tpbiggY2hpbGQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ21vcnBoJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmlkID0gcGFyc2VJZCggY2hpbGQuZ2V0QXR0cmlidXRlKCAnc291cmNlJyApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogTW9ycGggdGFyZ2V0IGFuaW1hdGlvbiBub3Qgc3VwcG9ydGVkIHlldC4nICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgbGlicmFyeS5jb250cm9sbGVyc1sgeG1sLmdldEF0dHJpYnV0ZSggJ2lkJyApIF0gPSBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VTa2luKCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZXM6IHt9XG4gICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYmluZF9zaGFwZV9tYXRyaXgnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuYmluZFNoYXBlTWF0cml4ID0gcGFyc2VGbG9hdHMoIGNoaWxkLnRleHRDb250ZW50ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdzb3VyY2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IGNoaWxkLmdldEF0dHJpYnV0ZSggJ2lkJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuc291cmNlc1sgaWQgXSA9IHBhcnNlU291cmNlKCBjaGlsZCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnam9pbnRzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmpvaW50cyA9IHBhcnNlSm9pbnRzKCBjaGlsZCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndmVydGV4X3dlaWdodHMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEudmVydGV4V2VpZ2h0cyA9IHBhcnNlVmVydGV4V2VpZ2h0cyggY2hpbGQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlSm9pbnRzKCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0czoge31cbiAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdpbnB1dCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbWFudGljID0gY2hpbGQuZ2V0QXR0cmlidXRlKCAnc2VtYW50aWMnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gcGFyc2VJZCggY2hpbGQuZ2V0QXR0cmlidXRlKCAnc291cmNlJyApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5pbnB1dHNbIHNlbWFudGljIF0gPSBpZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlVmVydGV4V2VpZ2h0cyggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dHM6IHt9XG4gICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnaW5wdXQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZW1hbnRpYyA9IGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NlbWFudGljJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IHBhcnNlSWQoIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NvdXJjZScgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvZmZzZXQgPSBwYXJzZUludCggY2hpbGQuZ2V0QXR0cmlidXRlKCAnb2Zmc2V0JyApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5pbnB1dHNbIHNlbWFudGljIF0gPSB7IGlkOiBpZCwgb2Zmc2V0OiBvZmZzZXQgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Zjb3VudCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS52Y291bnQgPSBwYXJzZUludHMoIGNoaWxkLnRleHRDb250ZW50ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd2JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnYgPSBwYXJzZUludHMoIGNoaWxkLnRleHRDb250ZW50ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBidWlsZENvbnRyb2xsZXIoIGRhdGEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGJ1aWxkID0ge1xuICAgICAgICAgICAgICAgICAgICBpZDogZGF0YS5pZFxuICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGdlb21ldHJ5ID0gbGlicmFyeS5nZW9tZXRyaWVzWyBidWlsZC5pZCBdO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggZGF0YS5za2luICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkLnNraW4gPSBidWlsZFNraW4oIGRhdGEuc2tpbiApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSBlbmhhbmNlIHRoZSAnc291cmNlcycgcHJvcGVydHkgb2YgdGhlIGNvcnJlc3BvbmRpbmcgZ2VvbWV0cnkgd2l0aCBvdXIgc2tpbiBkYXRhXG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LnNvdXJjZXMuc2tpbkluZGljZXMgPSBidWlsZC5za2luLmluZGljZXM7XG4gICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LnNvdXJjZXMuc2tpbldlaWdodHMgPSBidWlsZC5za2luLndlaWdodHM7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBidWlsZDtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGJ1aWxkU2tpbiggZGF0YSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgQk9ORV9MSU1JVCA9IDQ7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGJ1aWxkID0ge1xuICAgICAgICAgICAgICAgICAgICBqb2ludHM6IFtdLCAvLyB0aGlzIG11c3QgYmUgYW4gYXJyYXkgdG8gcHJlc2VydmUgdGhlIGpvaW50IG9yZGVyXG4gICAgICAgICAgICAgICAgICAgIGluZGljZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5OiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmlkZTogQk9ORV9MSU1JVFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheTogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpZGU6IEJPTkVfTElNSVRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHNvdXJjZXMgPSBkYXRhLnNvdXJjZXM7XG4gICAgICAgICAgICAgICAgdmFyIHZlcnRleFdlaWdodHMgPSBkYXRhLnZlcnRleFdlaWdodHM7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHZjb3VudCA9IHZlcnRleFdlaWdodHMudmNvdW50O1xuICAgICAgICAgICAgICAgIHZhciB2ID0gdmVydGV4V2VpZ2h0cy52O1xuICAgICAgICAgICAgICAgIHZhciBqb2ludE9mZnNldCA9IHZlcnRleFdlaWdodHMuaW5wdXRzLkpPSU5ULm9mZnNldDtcbiAgICAgICAgICAgICAgICB2YXIgd2VpZ2h0T2Zmc2V0ID0gdmVydGV4V2VpZ2h0cy5pbnB1dHMuV0VJR0hULm9mZnNldDtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgam9pbnRTb3VyY2UgPSBkYXRhLnNvdXJjZXNbIGRhdGEuam9pbnRzLmlucHV0cy5KT0lOVCBdO1xuICAgICAgICAgICAgICAgIHZhciBpbnZlcnNlU291cmNlID0gZGF0YS5zb3VyY2VzWyBkYXRhLmpvaW50cy5pbnB1dHMuSU5WX0JJTkRfTUFUUklYIF07XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHdlaWdodHMgPSBzb3VyY2VzWyB2ZXJ0ZXhXZWlnaHRzLmlucHV0cy5XRUlHSFQuaWQgXS5hcnJheTtcbiAgICAgICAgICAgICAgICB2YXIgc3RyaWRlID0gMDtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgaSwgaiwgbDtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBwcm9jY2VzIHNraW4gZGF0YSBmb3IgZWFjaCB2ZXJ0ZXhcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCBpID0gMCwgbCA9IHZjb3VudC5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgam9pbnRDb3VudCA9IHZjb3VudFsgaSBdOyAvLyB0aGlzIGlzIHRoZSBhbW91bnQgb2Ygam9pbnRzIHRoYXQgYWZmZWN0IGEgc2luZ2xlIHZlcnRleFxuICAgICAgICAgICAgICAgICAgICB2YXIgdmVydGV4U2tpbkRhdGEgPSBbXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yICggaiA9IDA7IGogPCBqb2ludENvdW50OyBqICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNraW5JbmRleCA9IHZbIHN0cmlkZSArIGpvaW50T2Zmc2V0IF07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgd2VpZ2h0SWQgPSB2WyBzdHJpZGUgKyB3ZWlnaHRPZmZzZXQgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBza2luV2VpZ2h0ID0gd2VpZ2h0c1sgd2VpZ2h0SWQgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRleFNraW5EYXRhLnB1c2goIHsgaW5kZXg6IHNraW5JbmRleCwgd2VpZ2h0OiBza2luV2VpZ2h0IH0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmlkZSArPSAyO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIHNvcnQgdGhlIGpvaW50cyBpbiBkZXNjZW5kaW5nIG9yZGVyIGJhc2VkIG9uIHRoZSB3ZWlnaHRzLlxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGVuc3VyZXMsIHdlIG9ubHkgcHJvY2NlZCB0aGUgbW9zdCBpbXBvcnRhbnQgam9pbnRzIG9mIHRoZSB2ZXJ0ZXhcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmVydGV4U2tpbkRhdGEuc29ydCggZGVzY2VuZGluZyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBub3cgd2UgcHJvdmlkZSBmb3IgZWFjaCB2ZXJ0ZXggYSBzZXQgb2YgZm91ciBpbmRleCBhbmQgd2VpZ2h0IHZhbHVlcy5cbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIG9yZGVyIG9mIHRoZSBza2luIGRhdGEgbWF0Y2hlcyB0aGUgb3JkZXIgb2YgdmVydGljZXNcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yICggaiA9IDA7IGogPCBCT05FX0xJTUlUOyBqICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSB2ZXJ0ZXhTa2luRGF0YVsgaiBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBkICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGQuaW5kaWNlcy5hcnJheS5wdXNoKCBkLmluZGV4ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGQud2VpZ2h0cy5hcnJheS5wdXNoKCBkLndlaWdodCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZC5pbmRpY2VzLmFycmF5LnB1c2goIDAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZC53ZWlnaHRzLmFycmF5LnB1c2goIDAgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAvLyBzZXR1cCBiaW5kIG1hdHJpeFxuICAgIFxuICAgICAgICAgICAgICAgIGJ1aWxkLmJpbmRNYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4NCgpLmZyb21BcnJheSggZGF0YS5iaW5kU2hhcGVNYXRyaXggKS50cmFuc3Bvc2UoKTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBwcm9jZXNzIGJvbmVzIGFuZCBpbnZlcnNlIGJpbmQgbWF0cml4IGRhdGFcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCBpID0gMCwgbCA9IGpvaW50U291cmNlLmFycmF5Lmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gam9pbnRTb3VyY2UuYXJyYXlbIGkgXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVJbnZlcnNlID0gbmV3IFRIUkVFLk1hdHJpeDQoKS5mcm9tQXJyYXkoIGludmVyc2VTb3VyY2UuYXJyYXksIGkgKiBpbnZlcnNlU291cmNlLnN0cmlkZSApLnRyYW5zcG9zZSgpO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBidWlsZC5qb2ludHMucHVzaCggeyBuYW1lOiBuYW1lLCBib25lSW52ZXJzZTogYm9uZUludmVyc2UgfSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gYnVpbGQ7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gYXJyYXkgc29ydCBmdW5jdGlvblxuICAgIFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRlc2NlbmRpbmcoIGEsIGIgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBiLndlaWdodCAtIGEud2VpZ2h0O1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldENvbnRyb2xsZXIoIGlkICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBnZXRCdWlsZCggbGlicmFyeS5jb250cm9sbGVyc1sgaWQgXSwgYnVpbGRDb250cm9sbGVyICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAvLyBpbWFnZVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VJbWFnZSggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBpbml0X2Zyb206IGdldEVsZW1lbnRzQnlUYWdOYW1lKCB4bWwsICdpbml0X2Zyb20nIClbIDAgXS50ZXh0Q29udGVudFxuICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgbGlicmFyeS5pbWFnZXNbIHhtbC5nZXRBdHRyaWJ1dGUoICdpZCcgKSBdID0gZGF0YTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGJ1aWxkSW1hZ2UoIGRhdGEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBkYXRhLmJ1aWxkICE9PSB1bmRlZmluZWQgKSByZXR1cm4gZGF0YS5idWlsZDtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5pbml0X2Zyb207XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRJbWFnZSggaWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldEJ1aWxkKCBsaWJyYXJ5LmltYWdlc1sgaWQgXSwgYnVpbGRJbWFnZSApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgLy8gZWZmZWN0XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUVmZmVjdCggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge307XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Byb2ZpbGVfQ09NTU9OJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnByb2ZpbGUgPSBwYXJzZUVmZmVjdFByb2ZpbGVDT01NT04oIGNoaWxkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgbGlicmFyeS5lZmZlY3RzWyB4bWwuZ2V0QXR0cmlidXRlKCAnaWQnICkgXSA9IGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUVmZmVjdFByb2ZpbGVDT01NT04oIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgc3VyZmFjZXM6IHt9LFxuICAgICAgICAgICAgICAgICAgICBzYW1wbGVyczoge31cbiAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICduZXdwYXJhbSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VFZmZlY3ROZXdwYXJhbSggY2hpbGQsIGRhdGEgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RlY2huaXF1ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS50ZWNobmlxdWUgPSBwYXJzZUVmZmVjdFRlY2huaXF1ZSggY2hpbGQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2V4dHJhJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmV4dHJhID0gcGFyc2VFZmZlY3RFeHRyYSggY2hpbGQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlRWZmZWN0TmV3cGFyYW0oIHhtbCwgZGF0YSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgc2lkID0geG1sLmdldEF0dHJpYnV0ZSggJ3NpZCcgKTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnc3VyZmFjZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5zdXJmYWNlc1sgc2lkIF0gPSBwYXJzZUVmZmVjdFN1cmZhY2UoIGNoaWxkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdzYW1wbGVyMkQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuc2FtcGxlcnNbIHNpZCBdID0gcGFyc2VFZmZlY3RTYW1wbGVyKCBjaGlsZCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VFZmZlY3RTdXJmYWNlKCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnaW5pdF9mcm9tJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmluaXRfZnJvbSA9IGNoaWxkLnRleHRDb250ZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VFZmZlY3RTYW1wbGVyKCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnc291cmNlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnNvdXJjZSA9IGNoaWxkLnRleHRDb250ZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VFZmZlY3RUZWNobmlxdWUoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjb25zdGFudCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdsYW1iZXJ0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2JsaW5uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Bob25nJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnR5cGUgPSBjaGlsZC5ub2RlTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnBhcmFtZXRlcnMgPSBwYXJzZUVmZmVjdFBhcmFtZXRlcnMoIGNoaWxkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUVmZmVjdFBhcmFtZXRlcnMoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdlbWlzc2lvbic6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdkaWZmdXNlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NwZWN1bGFyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NoaW5pbmVzcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd0cmFuc3BhcmVuY3knOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbIGNoaWxkLm5vZGVOYW1lIF0gPSBwYXJzZUVmZmVjdFBhcmFtZXRlciggY2hpbGQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RyYW5zcGFyZW50JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhWyBjaGlsZC5ub2RlTmFtZSBdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFxdWU6IGNoaWxkLmdldEF0dHJpYnV0ZSggJ29wYXF1ZScgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogcGFyc2VFZmZlY3RQYXJhbWV0ZXIoIGNoaWxkIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VFZmZlY3RQYXJhbWV0ZXIoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjb2xvcic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVsgY2hpbGQubm9kZU5hbWUgXSA9IHBhcnNlRmxvYXRzKCBjaGlsZC50ZXh0Q29udGVudCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZmxvYXQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbIGNoaWxkLm5vZGVOYW1lIF0gPSBwYXJzZUZsb2F0KCBjaGlsZC50ZXh0Q29udGVudCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndGV4dHVyZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVsgY2hpbGQubm9kZU5hbWUgXSA9IHsgaWQ6IGNoaWxkLmdldEF0dHJpYnV0ZSggJ3RleHR1cmUnICksIGV4dHJhOiBwYXJzZUVmZmVjdFBhcmFtZXRlclRleHR1cmUoIGNoaWxkICkgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlRWZmZWN0UGFyYW1ldGVyVGV4dHVyZSggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICB0ZWNobmlxdWU6IHt9XG4gICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZXh0cmEnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlRWZmZWN0UGFyYW1ldGVyVGV4dHVyZUV4dHJhKCBjaGlsZCwgZGF0YSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VFZmZlY3RQYXJhbWV0ZXJUZXh0dXJlRXh0cmEoIHhtbCwgZGF0YSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndGVjaG5pcXVlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUVmZmVjdFBhcmFtZXRlclRleHR1cmVFeHRyYVRlY2huaXF1ZSggY2hpbGQsIGRhdGEgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlRWZmZWN0UGFyYW1ldGVyVGV4dHVyZUV4dHJhVGVjaG5pcXVlKCB4bWwsIGRhdGEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlcGVhdFUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncmVwZWF0Vic6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdvZmZzZXRVJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ29mZnNldFYnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEudGVjaG5pcXVlWyBjaGlsZC5ub2RlTmFtZSBdID0gcGFyc2VGbG9hdCggY2hpbGQudGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3dyYXBVJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3dyYXBWJzpcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzb21lIGZpbGVzIGhhdmUgdmFsdWVzIGZvciB3cmFwVS93cmFwViB3aGljaCBiZWNvbWUgTmFOIHZpYSBwYXJzZUludFxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQudGV4dENvbnRlbnQudG9VcHBlckNhc2UoKSA9PT0gJ1RSVUUnICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnRlY2huaXF1ZVsgY2hpbGQubm9kZU5hbWUgXSA9IDE7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggY2hpbGQudGV4dENvbnRlbnQudG9VcHBlckNhc2UoKSA9PT0gJ0ZBTFNFJyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS50ZWNobmlxdWVbIGNoaWxkLm5vZGVOYW1lIF0gPSAwO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEudGVjaG5pcXVlWyBjaGlsZC5ub2RlTmFtZSBdID0gcGFyc2VJbnQoIGNoaWxkLnRleHRDb250ZW50ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VFZmZlY3RFeHRyYSggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge307XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RlY2huaXF1ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS50ZWNobmlxdWUgPSBwYXJzZUVmZmVjdEV4dHJhVGVjaG5pcXVlKCBjaGlsZCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VFZmZlY3RFeHRyYVRlY2huaXF1ZSggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge307XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RvdWJsZV9zaWRlZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVsgY2hpbGQubm9kZU5hbWUgXSA9IHBhcnNlSW50KCBjaGlsZC50ZXh0Q29udGVudCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gYnVpbGRFZmZlY3QoIGRhdGEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRFZmZlY3QoIGlkICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBnZXRCdWlsZCggbGlicmFyeS5lZmZlY3RzWyBpZCBdLCBidWlsZEVmZmVjdCApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgLy8gbWF0ZXJpYWxcbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlTWF0ZXJpYWwoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogeG1sLmdldEF0dHJpYnV0ZSggJ25hbWUnIClcbiAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdpbnN0YW5jZV9lZmZlY3QnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEudXJsID0gcGFyc2VJZCggY2hpbGQuZ2V0QXR0cmlidXRlKCAndXJsJyApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgbGlicmFyeS5tYXRlcmlhbHNbIHhtbC5nZXRBdHRyaWJ1dGUoICdpZCcgKSBdID0gZGF0YTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGJ1aWxkTWF0ZXJpYWwoIGRhdGEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGVmZmVjdCA9IGdldEVmZmVjdCggZGF0YS51cmwgKTtcbiAgICAgICAgICAgICAgICB2YXIgdGVjaG5pcXVlID0gZWZmZWN0LnByb2ZpbGUudGVjaG5pcXVlO1xuICAgICAgICAgICAgICAgIHZhciBleHRyYSA9IGVmZmVjdC5wcm9maWxlLmV4dHJhO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBtYXRlcmlhbDtcbiAgICBcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKCB0ZWNobmlxdWUudHlwZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncGhvbmcnOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdibGlubic6XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2xhbWJlcnQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIG1hdGVyaWFsLm5hbWUgPSBkYXRhLm5hbWU7XG4gICAgXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0VGV4dHVyZSggdGV4dHVyZU9iamVjdCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNhbXBsZXIgPSBlZmZlY3QucHJvZmlsZS5zYW1wbGVyc1sgdGV4dHVyZU9iamVjdC5pZCBdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW1hZ2U7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIGdldCBpbWFnZVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIHNhbXBsZXIgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdXJmYWNlID0gZWZmZWN0LnByb2ZpbGUuc3VyZmFjZXNbIHNhbXBsZXIuc291cmNlIF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZSA9IGdldEltYWdlKCBzdXJmYWNlLmluaXRfZnJvbSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogVW5kZWZpbmVkIHNhbXBsZXIuIEFjY2VzcyBpbWFnZSBkaXJlY3RseSAoc2VlICMxMjUzMCkuJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UgPSBnZXRJbWFnZSggdGV4dHVyZU9iamVjdC5pZCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSB0ZXh0dXJlIGlmIGltYWdlIGlzIGF2YWlhYmxlXG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggaW1hZ2UgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZXh0dXJlID0gdGV4dHVyZUxvYWRlci5sb2FkKCBpbWFnZSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4dHJhID0gdGV4dHVyZU9iamVjdC5leHRyYTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZXh0cmEgIT09IHVuZGVmaW5lZCAmJiBleHRyYS50ZWNobmlxdWUgIT09IHVuZGVmaW5lZCAmJiBpc0VtcHR5KCBleHRyYS50ZWNobmlxdWUgKSA9PT0gZmFsc2UgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlY2huaXF1ZSA9IGV4dHJhLnRlY2huaXF1ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlLndyYXBTID0gdGVjaG5pcXVlLndyYXBVID8gVEhSRUUuUmVwZWF0V3JhcHBpbmcgOiBUSFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHR1cmUud3JhcFQgPSB0ZWNobmlxdWUud3JhcFYgPyBUSFJFRS5SZXBlYXRXcmFwcGluZyA6IFRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmc7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHVyZS5vZmZzZXQuc2V0KCB0ZWNobmlxdWUub2Zmc2V0VSB8fCAwLCB0ZWNobmlxdWUub2Zmc2V0ViB8fCAwICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHVyZS5yZXBlYXQuc2V0KCB0ZWNobmlxdWUucmVwZWF0VSB8fCAxLCB0ZWNobmlxdWUucmVwZWF0ViB8fCAxICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHR1cmUud3JhcFMgPSBUSFJFRS5SZXBlYXRXcmFwcGluZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlLndyYXBUID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGV4dHVyZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBVbmFibGUgdG8gbG9hZCB0ZXh0dXJlIHdpdGggSUQ6JywgdGV4dHVyZU9iamVjdC5pZCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtZXRlcnMgPSB0ZWNobmlxdWUucGFyYW1ldGVycztcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIga2V5IGluIHBhcmFtZXRlcnMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbWV0ZXIgPSBwYXJhbWV0ZXJzWyBrZXkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICgga2V5ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGlmZnVzZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBwYXJhbWV0ZXIuY29sb3IgKSBtYXRlcmlhbC5jb2xvci5mcm9tQXJyYXkoIHBhcmFtZXRlci5jb2xvciApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcGFyYW1ldGVyLnRleHR1cmUgKSBtYXRlcmlhbC5tYXAgPSBnZXRUZXh0dXJlKCBwYXJhbWV0ZXIudGV4dHVyZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnc3BlY3VsYXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcGFyYW1ldGVyLmNvbG9yICYmIG1hdGVyaWFsLnNwZWN1bGFyICkgbWF0ZXJpYWwuc3BlY3VsYXIuZnJvbUFycmF5KCBwYXJhbWV0ZXIuY29sb3IgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHBhcmFtZXRlci50ZXh0dXJlICkgbWF0ZXJpYWwuc3BlY3VsYXJNYXAgPSBnZXRUZXh0dXJlKCBwYXJhbWV0ZXIudGV4dHVyZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2hpbmluZXNzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHBhcmFtZXRlci5mbG9hdCAmJiBtYXRlcmlhbC5zaGluaW5lc3MgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5zaGluaW5lc3MgPSBwYXJhbWV0ZXIuZmxvYXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdlbWlzc2lvbic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBwYXJhbWV0ZXIuY29sb3IgJiYgbWF0ZXJpYWwuZW1pc3NpdmUgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5lbWlzc2l2ZS5mcm9tQXJyYXkoIHBhcmFtZXRlci5jb2xvciApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIC8vXG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zcGFyZW50ID0gcGFyYW1ldGVyc1sgJ3RyYW5zcGFyZW50JyBdO1xuICAgICAgICAgICAgICAgIHZhciB0cmFuc3BhcmVuY3kgPSBwYXJhbWV0ZXJzWyAndHJhbnNwYXJlbmN5JyBdO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIDx0cmFuc3BhcmVuY3k+IGRvZXMgbm90IGV4aXN0IGJ1dCA8dHJhbnNwYXJlbnQ+XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCB0cmFuc3BhcmVuY3kgPT09IHVuZGVmaW5lZCAmJiB0cmFuc3BhcmVudCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNwYXJlbmN5ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IDFcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gPHRyYW5zcGFyZW50PiBkb2VzIG5vdCBleGlzdCBidXQgPHRyYW5zcGFyZW5jeT5cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIHRyYW5zcGFyZW50ID09PSB1bmRlZmluZWQgJiYgdHJhbnNwYXJlbmN5ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB0cmFuc3BhcmVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYXF1ZTogJ0FfT05FJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogWyAxLCAxLCAxLCAxIF1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gfTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCB0cmFuc3BhcmVudCAmJiB0cmFuc3BhcmVuY3kgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZSBjYXNlIGlmIGEgdGV4dHVyZSBleGlzdHMgYnV0IG5vIGNvbG9yXG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggdHJhbnNwYXJlbnQuZGF0YS50ZXh0dXJlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuYWxwaGFNYXAgPSBnZXRUZXh0dXJlKCB0cmFuc3BhcmVudC5kYXRhLnRleHR1cmUgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnRyYW5zcGFyZW50ID0gdHJ1ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IHRyYW5zcGFyZW50LmRhdGEuY29sb3I7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCB0cmFuc3BhcmVudC5vcGFxdWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnQV9PTkUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5vcGFjaXR5ID0gY29sb3JbIDMgXSAqIHRyYW5zcGFyZW5jeS5mbG9hdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnUkdCX1pFUk8nOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5vcGFjaXR5ID0gMSAtICggY29sb3JbIDAgXSAqIHRyYW5zcGFyZW5jeS5mbG9hdCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdBX1pFUk8nOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5vcGFjaXR5ID0gMSAtICggY29sb3JbIDMgXSAqIHRyYW5zcGFyZW5jeS5mbG9hdCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdSR0JfT05FJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwub3BhY2l0eSA9IGNvbG9yWyAwIF0gKiB0cmFuc3BhcmVuY3kuZmxvYXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybiggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IEludmFsaWQgb3BhcXVlIHR5cGUgXCIlc1wiIG9mIHRyYW5zcGFyZW50IHRhZy4nLCB0cmFuc3BhcmVudC5vcGFxdWUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggbWF0ZXJpYWwub3BhY2l0eSA8IDEgKSBtYXRlcmlhbC50cmFuc3BhcmVudCA9IHRydWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgLy9cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGV4dHJhICE9PSB1bmRlZmluZWQgJiYgZXh0cmEudGVjaG5pcXVlICE9PSB1bmRlZmluZWQgJiYgZXh0cmEudGVjaG5pcXVlLmRvdWJsZV9zaWRlZCA9PT0gMSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2lkZSA9IFRIUkVFLkRvdWJsZVNpZGU7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBtYXRlcmlhbDtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldE1hdGVyaWFsKCBpZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0QnVpbGQoIGxpYnJhcnkubWF0ZXJpYWxzWyBpZCBdLCBidWlsZE1hdGVyaWFsICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAvLyBjYW1lcmFcbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlQ2FtZXJhKCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHhtbC5nZXRBdHRyaWJ1dGUoICduYW1lJyApXG4gICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnb3B0aWNzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLm9wdGljcyA9IHBhcnNlQ2FtZXJhT3B0aWNzKCBjaGlsZCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGxpYnJhcnkuY2FtZXJhc1sgeG1sLmdldEF0dHJpYnV0ZSggJ2lkJyApIF0gPSBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VDYW1lcmFPcHRpY3MoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndGVjaG5pcXVlX2NvbW1vbic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlQ2FtZXJhVGVjaG5pcXVlKCBjaGlsZCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlQ2FtZXJhVGVjaG5pcXVlKCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncGVyc3BlY3RpdmUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnb3J0aG9ncmFwaGljJzpcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnRlY2huaXF1ZSA9IGNoaWxkLm5vZGVOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEucGFyYW1ldGVycyA9IHBhcnNlQ2FtZXJhUGFyYW1ldGVycyggY2hpbGQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlQ2FtZXJhUGFyYW1ldGVycyggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge307XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3hmb3YnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAneWZvdic6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd4bWFnJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3ltYWcnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnem5lYXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnemZhcic6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdhc3BlY3RfcmF0aW8nOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbIGNoaWxkLm5vZGVOYW1lIF0gPSBwYXJzZUZsb2F0KCBjaGlsZC50ZXh0Q29udGVudCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gYnVpbGRDYW1lcmEoIGRhdGEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGNhbWVyYTtcbiAgICBcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKCBkYXRhLm9wdGljcy50ZWNobmlxdWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BlcnNwZWN0aXZlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLm9wdGljcy5wYXJhbWV0ZXJzLnlmb3YsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5vcHRpY3MucGFyYW1ldGVycy5hc3BlY3RfcmF0aW8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5vcHRpY3MucGFyYW1ldGVycy56bmVhcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLm9wdGljcy5wYXJhbWV0ZXJzLnpmYXJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnb3J0aG9ncmFwaGljJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB5bWFnID0gZGF0YS5vcHRpY3MucGFyYW1ldGVycy55bWFnO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHhtYWcgPSBkYXRhLm9wdGljcy5wYXJhbWV0ZXJzLnhtYWc7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXNwZWN0UmF0aW8gPSBkYXRhLm9wdGljcy5wYXJhbWV0ZXJzLmFzcGVjdF9yYXRpbztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHhtYWcgPSAoIHhtYWcgPT09IHVuZGVmaW5lZCApID8gKCB5bWFnICogYXNwZWN0UmF0aW8gKSA6IHhtYWc7XG4gICAgICAgICAgICAgICAgICAgICAgICB5bWFnID0gKCB5bWFnID09PSB1bmRlZmluZWQgKSA/ICggeG1hZyAvIGFzcGVjdFJhdGlvICkgOiB5bWFnO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgeG1hZyAqPSAwLjU7XG4gICAgICAgICAgICAgICAgICAgICAgICB5bWFnICo9IDAuNTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbWVyYSA9IG5ldyBUSFJFRS5PcnRob2dyYXBoaWNDYW1lcmEoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLSB4bWFnLCB4bWFnLCB5bWFnLCAtIHltYWcsIC8vIGxlZnQsIHJpZ2h0LCB0b3AsIGJvdHRvbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEub3B0aWNzLnBhcmFtZXRlcnMuem5lYXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5vcHRpY3MucGFyYW1ldGVycy56ZmFyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBjYW1lcmEubmFtZSA9IGRhdGEubmFtZTtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FtZXJhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0Q2FtZXJhKCBpZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGxpYnJhcnkuY2FtZXJhc1sgaWQgXTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGRhdGEgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldEJ1aWxkKCBkYXRhLCBidWlsZENhbWVyYSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBDb3VsZG5cXCd0IGZpbmQgY2FtZXJhIHdpdGggSUQ6JywgaWQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIC8vIGxpZ2h0XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUxpZ2h0KCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndGVjaG5pcXVlX2NvbW1vbic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHBhcnNlTGlnaHRUZWNobmlxdWUoIGNoaWxkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgbGlicmFyeS5saWdodHNbIHhtbC5nZXRBdHRyaWJ1dGUoICdpZCcgKSBdID0gZGF0YTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlTGlnaHRUZWNobmlxdWUoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdkaXJlY3Rpb25hbCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdwb2ludCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdzcG90JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FtYmllbnQnOlxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEudGVjaG5pcXVlID0gY2hpbGQubm9kZU5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5wYXJhbWV0ZXJzID0gcGFyc2VMaWdodFBhcmFtZXRlcnMoIGNoaWxkICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUxpZ2h0UGFyYW1ldGVycyggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge307XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvbG9yJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJyYXkgPSBwYXJzZUZsb2F0cyggY2hpbGQudGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmNvbG9yID0gbmV3IFRIUkVFLkNvbG9yKCkuZnJvbUFycmF5KCBhcnJheSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZmFsbG9mZl9hbmdsZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5mYWxsb2ZmQW5nbGUgPSBwYXJzZUZsb2F0KCBjaGlsZC50ZXh0Q29udGVudCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncXVhZHJhdGljX2F0dGVudWF0aW9uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IHBhcnNlRmxvYXQoIGNoaWxkLnRleHRDb250ZW50ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5kaXN0YW5jZSA9IGYgPyBNYXRoLnNxcnQoIDEgLyBmICkgOiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gYnVpbGRMaWdodCggZGF0YSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgbGlnaHQ7XG4gICAgXG4gICAgICAgICAgICAgICAgc3dpdGNoICggZGF0YS50ZWNobmlxdWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RpcmVjdGlvbmFsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0ID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjYXNlICdwb2ludCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBsaWdodCA9IG5ldyBUSFJFRS5Qb2ludExpZ2h0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc3BvdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBsaWdodCA9IG5ldyBUSFJFRS5TcG90TGlnaHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjYXNlICdhbWJpZW50JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0ID0gbmV3IFRIUkVFLkFtYmllbnRMaWdodCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGlmICggZGF0YS5wYXJhbWV0ZXJzLmNvbG9yICkgbGlnaHQuY29sb3IuY29weSggZGF0YS5wYXJhbWV0ZXJzLmNvbG9yICk7XG4gICAgICAgICAgICAgICAgaWYgKCBkYXRhLnBhcmFtZXRlcnMuZGlzdGFuY2UgKSBsaWdodC5kaXN0YW5jZSA9IGRhdGEucGFyYW1ldGVycy5kaXN0YW5jZTtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gbGlnaHQ7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRMaWdodCggaWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBsaWJyYXJ5LmxpZ2h0c1sgaWQgXTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGRhdGEgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldEJ1aWxkKCBkYXRhLCBidWlsZExpZ2h0ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybiggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IENvdWxkblxcJ3QgZmluZCBsaWdodCB3aXRoIElEOicsIGlkICk7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAvLyBnZW9tZXRyeVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VHZW9tZXRyeSggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiB4bWwuZ2V0QXR0cmlidXRlKCAnbmFtZScgKSxcbiAgICAgICAgICAgICAgICAgICAgc291cmNlczoge30sXG4gICAgICAgICAgICAgICAgICAgIHZlcnRpY2VzOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgcHJpbWl0aXZlczogW11cbiAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBtZXNoID0gZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHhtbCwgJ21lc2gnIClbIDAgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyB0aGUgZm9sbG93aW5nIHRhZ3MgaW5zaWRlIGdlb21ldHJ5IGFyZSBub3Qgc3VwcG9ydGVkIHlldCAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tcmRvb2IvdGhyZWUuanMvcHVsbC8xMjYwNik6IGNvbnZleF9tZXNoLCBzcGxpbmUsIGJyZXBcbiAgICAgICAgICAgICAgICBpZiAoIG1lc2ggPT09IHVuZGVmaW5lZCApIHJldHVybjtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBtZXNoLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBtZXNoLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSBjaGlsZC5nZXRBdHRyaWJ1dGUoICdpZCcgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdzb3VyY2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuc291cmNlc1sgaWQgXSA9IHBhcnNlU291cmNlKCBjaGlsZCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndmVydGljZXMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRhdGEuc291cmNlc1sgaWQgXSA9IGRhdGEuc291cmNlc1sgcGFyc2VJZCggZ2V0RWxlbWVudHNCeVRhZ05hbWUoIGNoaWxkLCAnaW5wdXQnIClbIDAgXS5nZXRBdHRyaWJ1dGUoICdzb3VyY2UnICkgKSBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEudmVydGljZXMgPSBwYXJzZUdlb21ldHJ5VmVydGljZXMoIGNoaWxkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdwb2x5Z29ucyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogVW5zdXBwb3J0ZWQgcHJpbWl0aXZlIHR5cGU6ICcsIGNoaWxkLm5vZGVOYW1lICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdsaW5lcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdsaW5lc3RyaXBzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BvbHlsaXN0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RyaWFuZ2xlcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5wcmltaXRpdmVzLnB1c2goIHBhcnNlR2VvbWV0cnlQcmltaXRpdmUoIGNoaWxkICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIGNoaWxkICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgbGlicmFyeS5nZW9tZXRyaWVzWyB4bWwuZ2V0QXR0cmlidXRlKCAnaWQnICkgXSA9IGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZVNvdXJjZSggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBhcnJheTogW10sXG4gICAgICAgICAgICAgICAgICAgIHN0cmlkZTogM1xuICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZmxvYXRfYXJyYXknOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuYXJyYXkgPSBwYXJzZUZsb2F0cyggY2hpbGQudGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ05hbWVfYXJyYXknOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuYXJyYXkgPSBwYXJzZVN0cmluZ3MoIGNoaWxkLnRleHRDb250ZW50ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd0ZWNobmlxdWVfY29tbW9uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWNjZXNzb3IgPSBnZXRFbGVtZW50c0J5VGFnTmFtZSggY2hpbGQsICdhY2Nlc3NvcicgKVsgMCBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggYWNjZXNzb3IgIT09IHVuZGVmaW5lZCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5zdHJpZGUgPSBwYXJzZUludCggYWNjZXNzb3IuZ2V0QXR0cmlidXRlKCAnc3RyaWRlJyApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VHZW9tZXRyeVZlcnRpY2VzKCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZGF0YVsgY2hpbGQuZ2V0QXR0cmlidXRlKCAnc2VtYW50aWMnICkgXSA9IHBhcnNlSWQoIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NvdXJjZScgKSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlR2VvbWV0cnlQcmltaXRpdmUoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgcHJpbWl0aXZlID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiB4bWwubm9kZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsOiB4bWwuZ2V0QXR0cmlidXRlKCAnbWF0ZXJpYWwnICksXG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiBwYXJzZUludCggeG1sLmdldEF0dHJpYnV0ZSggJ2NvdW50JyApICksXG4gICAgICAgICAgICAgICAgICAgIGlucHV0czoge30sXG4gICAgICAgICAgICAgICAgICAgIHN0cmlkZTogMFxuICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2lucHV0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSBwYXJzZUlkKCBjaGlsZC5nZXRBdHRyaWJ1dGUoICdzb3VyY2UnICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VtYW50aWMgPSBjaGlsZC5nZXRBdHRyaWJ1dGUoICdzZW1hbnRpYycgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0ID0gcGFyc2VJbnQoIGNoaWxkLmdldEF0dHJpYnV0ZSggJ29mZnNldCcgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW1pdGl2ZS5pbnB1dHNbIHNlbWFudGljIF0gPSB7IGlkOiBpZCwgb2Zmc2V0OiBvZmZzZXQgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmltaXRpdmUuc3RyaWRlID0gTWF0aC5tYXgoIHByaW1pdGl2ZS5zdHJpZGUsIG9mZnNldCArIDEgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Zjb3VudCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbWl0aXZlLnZjb3VudCA9IHBhcnNlSW50cyggY2hpbGQudGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3AnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW1pdGl2ZS5wID0gcGFyc2VJbnRzKCBjaGlsZC50ZXh0Q29udGVudCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBwcmltaXRpdmU7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBncm91cFByaW1pdGl2ZXMoIHByaW1pdGl2ZXMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGJ1aWxkID0ge307XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgcHJpbWl0aXZlcy5sZW5ndGg7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBwcmltaXRpdmUgPSBwcmltaXRpdmVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggYnVpbGRbIHByaW1pdGl2ZS50eXBlIF0gPT09IHVuZGVmaW5lZCApIGJ1aWxkWyBwcmltaXRpdmUudHlwZSBdID0gW107XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkWyBwcmltaXRpdmUudHlwZSBdLnB1c2goIHByaW1pdGl2ZSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gYnVpbGQ7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBidWlsZEdlb21ldHJ5KCBkYXRhICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBidWlsZCA9IHt9O1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBzb3VyY2VzID0gZGF0YS5zb3VyY2VzO1xuICAgICAgICAgICAgICAgIHZhciB2ZXJ0aWNlcyA9IGRhdGEudmVydGljZXM7XG4gICAgICAgICAgICAgICAgdmFyIHByaW1pdGl2ZXMgPSBkYXRhLnByaW1pdGl2ZXM7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBwcmltaXRpdmVzLmxlbmd0aCA9PT0gMCApIHJldHVybiB7fTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBvdXIgZ29hbCBpcyB0byBjcmVhdGUgb25lIGJ1ZmZlciBnZW9lbXRyeSBmb3IgYSBzaW5nbGUgdHlwZSBvZiBwcmltaXRpdmVzXG4gICAgICAgICAgICAgICAgLy8gZmlyc3QsIHdlIGdyb3VwIGFsbCBwcmltaXRpdmVzIGJ5IHRoZWlyIHR5cGVcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXBlZFByaW1pdGl2ZXMgPSBncm91cFByaW1pdGl2ZXMoIHByaW1pdGl2ZXMgKTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgdHlwZSBpbiBncm91cGVkUHJpbWl0aXZlcyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gc2Vjb25kLCB3ZSBjcmVhdGUgZm9yIGVhY2ggdHlwZSBvZiBwcmltaXRpdmVzIChwb2x5bGlzdCx0cmlhbmdsZXMgb3IgbGluZXMpIGEgYnVmZmVyIGdlb21ldHJ5XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkWyB0eXBlIF0gPSBidWlsZEdlb21ldHJ5VHlwZSggZ3JvdXBlZFByaW1pdGl2ZXNbIHR5cGUgXSwgc291cmNlcywgdmVydGljZXMgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJ1aWxkO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gYnVpbGRHZW9tZXRyeVR5cGUoIHByaW1pdGl2ZXMsIHNvdXJjZXMsIHZlcnRpY2VzICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBidWlsZCA9IHt9O1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHsgYXJyYXk6IFtdLCBzdHJpZGU6IDAgfTtcbiAgICAgICAgICAgICAgICB2YXIgbm9ybWFsID0geyBhcnJheTogW10sIHN0cmlkZTogMCB9O1xuICAgICAgICAgICAgICAgIHZhciB1diA9IHsgYXJyYXk6IFtdLCBzdHJpZGU6IDAgfTtcbiAgICAgICAgICAgICAgICB2YXIgY29sb3IgPSB7IGFycmF5OiBbXSwgc3RyaWRlOiAwIH07XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHNraW5JbmRleCA9IHsgYXJyYXk6IFtdLCBzdHJpZGU6IDQgfTtcbiAgICAgICAgICAgICAgICB2YXIgc2tpbldlaWdodCA9IHsgYXJyYXk6IFtdLCBzdHJpZGU6IDQgfTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgbWF0ZXJpYWxLZXlzID0gW107XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0ID0gMCwgY291bnQgPSAwO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBwID0gMDsgcCA8IHByaW1pdGl2ZXMubGVuZ3RoOyBwICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJpbWl0aXZlID0gcHJpbWl0aXZlc1sgcCBdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXRzID0gcHJpbWl0aXZlLmlucHV0cztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRyaWFuZ2xlQ291bnQgPSAxO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIHByaW1pdGl2ZS52Y291bnQgJiYgcHJpbWl0aXZlLnZjb3VudFsgMCBdID09PSA0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJpYW5nbGVDb3VudCA9IDI7IC8vIG9uZSBxdWFkIC0+IHR3byB0cmlhbmdsZXNcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBncm91cHNcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBwcmltaXRpdmUudHlwZSA9PT0gJ2xpbmVzJyB8fCBwcmltaXRpdmUudHlwZSA9PT0gJ2xpbmVzdHJpcHMnICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY291bnQgPSBwcmltaXRpdmUuY291bnQgKiAyO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY291bnQgPSBwcmltaXRpdmUuY291bnQgKiAzICogdHJpYW5nbGVDb3VudDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeS5hZGRHcm91cCggc3RhcnQsIGNvdW50LCBwICk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ICs9IGNvdW50O1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBtYXRlcmlhbFxuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIHByaW1pdGl2ZS5tYXRlcmlhbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsS2V5cy5wdXNoKCBwcmltaXRpdmUubWF0ZXJpYWwgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBnZW9tZXRyeSBkYXRhXG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBuYW1lIGluIGlucHV0cyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IGlucHV0c1sgbmFtZSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggbmFtZSApXHR7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnVkVSVEVYJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGtleSBpbiB2ZXJ0aWNlcyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IHZlcnRpY2VzWyBrZXkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGtleSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdQT1NJVElPTic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkR2VvbWV0cnlEYXRhKCBwcmltaXRpdmUsIHNvdXJjZXNbIGlkIF0sIGlucHV0Lm9mZnNldCwgcG9zaXRpb24uYXJyYXkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24uc3RyaWRlID0gc291cmNlc1sgaWQgXS5zdHJpZGU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggc291cmNlcy5za2luV2VpZ2h0cyAmJiBzb3VyY2VzLnNraW5JbmRpY2VzICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRHZW9tZXRyeURhdGEoIHByaW1pdGl2ZSwgc291cmNlcy5za2luSW5kaWNlcywgaW5wdXQub2Zmc2V0LCBza2luSW5kZXguYXJyYXkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkR2VvbWV0cnlEYXRhKCBwcmltaXRpdmUsIHNvdXJjZXMuc2tpbldlaWdodHMsIGlucHV0Lm9mZnNldCwgc2tpbldlaWdodC5hcnJheSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ05PUk1BTCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkR2VvbWV0cnlEYXRhKCBwcmltaXRpdmUsIHNvdXJjZXNbIGlkIF0sIGlucHV0Lm9mZnNldCwgbm9ybWFsLmFycmF5ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbC5zdHJpZGUgPSBzb3VyY2VzWyBpZCBdLnN0cmlkZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnQ09MT1InOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZEdlb21ldHJ5RGF0YSggcHJpbWl0aXZlLCBzb3VyY2VzWyBpZCBdLCBpbnB1dC5vZmZzZXQsIGNvbG9yLmFycmF5ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yLnN0cmlkZSA9IHNvdXJjZXNbIGlkIF0uc3RyaWRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdURVhDT09SRCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkR2VvbWV0cnlEYXRhKCBwcmltaXRpdmUsIHNvdXJjZXNbIGlkIF0sIGlucHV0Lm9mZnNldCwgdXYuYXJyYXkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXYuc3RyaWRlID0gc291cmNlc1sgaWQgXS5zdHJpZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybiggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IFNlbWFudGljIFwiJXNcIiBub3QgaGFuZGxlZCBpbiBnZW9tZXRyeSBidWlsZCBwcm9jZXNzLicsIGtleSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ05PUk1BTCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkR2VvbWV0cnlEYXRhKCBwcmltaXRpdmUsIHNvdXJjZXNbIGlucHV0LmlkIF0sIGlucHV0Lm9mZnNldCwgbm9ybWFsLmFycmF5ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbC5zdHJpZGUgPSBzb3VyY2VzWyBpbnB1dC5pZCBdLnN0cmlkZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnQ09MT1InOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZEdlb21ldHJ5RGF0YSggcHJpbWl0aXZlLCBzb3VyY2VzWyBpbnB1dC5pZCBdLCBpbnB1dC5vZmZzZXQsIGNvbG9yLmFycmF5ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yLnN0cmlkZSA9IHNvdXJjZXNbIGlucHV0LmlkIF0uc3RyaWRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdURVhDT09SRCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkR2VvbWV0cnlEYXRhKCBwcmltaXRpdmUsIHNvdXJjZXNbIGlucHV0LmlkIF0sIGlucHV0Lm9mZnNldCwgdXYuYXJyYXkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXYuc3RyaWRlID0gc291cmNlc1sgaW5wdXQuaWQgXS5zdHJpZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIC8vIGJ1aWxkIGdlb21ldHJ5XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBwb3NpdGlvbi5hcnJheS5sZW5ndGggPiAwICkgZ2VvbWV0cnkuYWRkQXR0cmlidXRlKCAncG9zaXRpb24nLCBuZXcgVEhSRUUuRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggcG9zaXRpb24uYXJyYXksIHBvc2l0aW9uLnN0cmlkZSApICk7XG4gICAgICAgICAgICAgICAgaWYgKCBub3JtYWwuYXJyYXkubGVuZ3RoID4gMCApIGdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ25vcm1hbCcsIG5ldyBUSFJFRS5GbG9hdDMyQnVmZmVyQXR0cmlidXRlKCBub3JtYWwuYXJyYXksIG5vcm1hbC5zdHJpZGUgKSApO1xuICAgICAgICAgICAgICAgIGlmICggY29sb3IuYXJyYXkubGVuZ3RoID4gMCApIGdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ2NvbG9yJywgbmV3IFRIUkVFLkZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoIGNvbG9yLmFycmF5LCBjb2xvci5zdHJpZGUgKSApO1xuICAgICAgICAgICAgICAgIGlmICggdXYuYXJyYXkubGVuZ3RoID4gMCApIGdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ3V2JywgbmV3IFRIUkVFLkZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoIHV2LmFycmF5LCB1di5zdHJpZGUgKSApO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggc2tpbkluZGV4LmFycmF5Lmxlbmd0aCA+IDAgKSBnZW9tZXRyeS5hZGRBdHRyaWJ1dGUoICdza2luSW5kZXgnLCBuZXcgVEhSRUUuRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggc2tpbkluZGV4LmFycmF5LCBza2luSW5kZXguc3RyaWRlICkgKTtcbiAgICAgICAgICAgICAgICBpZiAoIHNraW5XZWlnaHQuYXJyYXkubGVuZ3RoID4gMCApIGdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ3NraW5XZWlnaHQnLCBuZXcgVEhSRUUuRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggc2tpbldlaWdodC5hcnJheSwgc2tpbldlaWdodC5zdHJpZGUgKSApO1xuICAgIFxuICAgICAgICAgICAgICAgIGJ1aWxkLmRhdGEgPSBnZW9tZXRyeTtcbiAgICAgICAgICAgICAgICBidWlsZC50eXBlID0gcHJpbWl0aXZlc1sgMCBdLnR5cGU7XG4gICAgICAgICAgICAgICAgYnVpbGQubWF0ZXJpYWxLZXlzID0gbWF0ZXJpYWxLZXlzO1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBidWlsZDtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGJ1aWxkR2VvbWV0cnlEYXRhKCBwcmltaXRpdmUsIHNvdXJjZSwgb2Zmc2V0LCBhcnJheSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgaW5kaWNlcyA9IHByaW1pdGl2ZS5wO1xuICAgICAgICAgICAgICAgIHZhciBzdHJpZGUgPSBwcmltaXRpdmUuc3RyaWRlO1xuICAgICAgICAgICAgICAgIHZhciB2Y291bnQgPSBwcmltaXRpdmUudmNvdW50O1xuICAgIFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHB1c2hWZWN0b3IoIGkgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGluZGljZXNbIGkgKyBvZmZzZXQgXSAqIHNvdXJjZVN0cmlkZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxlbmd0aCA9IGluZGV4ICsgc291cmNlU3RyaWRlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5LnB1c2goIHNvdXJjZUFycmF5WyBpbmRleCBdICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIG1heGNvdW50ID0gMDtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgc291cmNlQXJyYXkgPSBzb3VyY2UuYXJyYXk7XG4gICAgICAgICAgICAgICAgdmFyIHNvdXJjZVN0cmlkZSA9IHNvdXJjZS5zdHJpZGU7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBwcmltaXRpdmUudmNvdW50ICE9PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHZjb3VudC5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gdmNvdW50WyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGNvdW50ID09PSA0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gaW5kZXggKyBzdHJpZGUgKiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiID0gaW5kZXggKyBzdHJpZGUgKiAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gaW5kZXggKyBzdHJpZGUgKiAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gaW5kZXggKyBzdHJpZGUgKiAzO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1c2hWZWN0b3IoIGEgKTsgcHVzaFZlY3RvciggYiApOyBwdXNoVmVjdG9yKCBkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVzaFZlY3RvciggYiApOyBwdXNoVmVjdG9yKCBjICk7IHB1c2hWZWN0b3IoIGQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGNvdW50ID09PSAzICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gaW5kZXggKyBzdHJpZGUgKiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiID0gaW5kZXggKyBzdHJpZGUgKiAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gaW5kZXggKyBzdHJpZGUgKiAyO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1c2hWZWN0b3IoIGEgKTsgcHVzaFZlY3RvciggYiApOyBwdXNoVmVjdG9yKCBjICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heGNvdW50ID0gTWF0aC5tYXgoIG1heGNvdW50LCBjb3VudCApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggKz0gc3RyaWRlICogY291bnQ7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBtYXhjb3VudCA+IDAgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IEdlb21ldHJ5IGhhcyBmYWNlcyB3aXRoIG1vcmUgdGhhbiA0IHZlcnRpY2VzLicgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IGluZGljZXMubGVuZ3RoOyBpIDwgbDsgaSArPSBzdHJpZGUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBwdXNoVmVjdG9yKCBpICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRHZW9tZXRyeSggaWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldEJ1aWxkKCBsaWJyYXJ5Lmdlb21ldHJpZXNbIGlkIF0sIGJ1aWxkR2VvbWV0cnkgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIC8vIGtpbmVtYXRpY3NcbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlS2luZW1hdGljc01vZGVsKCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHhtbC5nZXRBdHRyaWJ1dGUoICduYW1lJyApIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICBqb2ludHM6IHt9LFxuICAgICAgICAgICAgICAgICAgICBsaW5rczogW11cbiAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RlY2huaXF1ZV9jb21tb24nOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlS2luZW1hdGljc1RlY2huaXF1ZUNvbW1vbiggY2hpbGQsIGRhdGEgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBsaWJyYXJ5LmtpbmVtYXRpY3NNb2RlbHNbIHhtbC5nZXRBdHRyaWJ1dGUoICdpZCcgKSBdID0gZGF0YTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGJ1aWxkS2luZW1hdGljc01vZGVsKCBkYXRhICkge1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggZGF0YS5idWlsZCAhPT0gdW5kZWZpbmVkICkgcmV0dXJuIGRhdGEuYnVpbGQ7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRLaW5lbWF0aWNzTW9kZWwoIGlkICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBnZXRCdWlsZCggbGlicmFyeS5raW5lbWF0aWNzTW9kZWxzWyBpZCBdLCBidWlsZEtpbmVtYXRpY3NNb2RlbCApO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VLaW5lbWF0aWNzVGVjaG5pcXVlQ29tbW9uKCB4bWwsIGRhdGEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnam9pbnQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuam9pbnRzWyBjaGlsZC5nZXRBdHRyaWJ1dGUoICdzaWQnICkgXSA9IHBhcnNlS2luZW1hdGljc0pvaW50KCBjaGlsZCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbGluayc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5saW5rcy5wdXNoKCBwYXJzZUtpbmVtYXRpY3NMaW5rKCBjaGlsZCApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUtpbmVtYXRpY3NKb2ludCggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3ByaXNtYXRpYyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdyZXZvbHV0ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHBhcnNlS2luZW1hdGljc0pvaW50UGFyYW1ldGVyKCBjaGlsZCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VLaW5lbWF0aWNzSm9pbnRQYXJhbWV0ZXIoIHhtbCwgZGF0YSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgc2lkOiB4bWwuZ2V0QXR0cmlidXRlKCAnc2lkJyApLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiB4bWwuZ2V0QXR0cmlidXRlKCAnbmFtZScgKSB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgYXhpczogbmV3IFRIUkVFLlZlY3RvcjMoKSxcbiAgICAgICAgICAgICAgICAgICAgbGltaXRzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXg6IDBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogeG1sLm5vZGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICBzdGF0aWM6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB6ZXJvUG9zaXRpb246IDAsXG4gICAgICAgICAgICAgICAgICAgIG1pZGRsZVBvc2l0aW9uOiAwXG4gICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdheGlzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJyYXkgPSBwYXJzZUZsb2F0cyggY2hpbGQudGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmF4aXMuZnJvbUFycmF5KCBhcnJheSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbGltaXRzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF4ID0gY2hpbGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICdtYXgnIClbIDAgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWluID0gY2hpbGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICdtaW4nIClbIDAgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmxpbWl0cy5tYXggPSBwYXJzZUZsb2F0KCBtYXgudGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmxpbWl0cy5taW4gPSBwYXJzZUZsb2F0KCBtaW4udGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAvLyBpZiBtaW4gaXMgZXF1YWwgdG8gb3IgZ3JlYXRlciB0aGFuIG1heCwgY29uc2lkZXIgdGhlIGpvaW50IHN0YXRpY1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICggZGF0YS5saW1pdHMubWluID49IGRhdGEubGltaXRzLm1heCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5zdGF0aWMgPSB0cnVlO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgbWlkZGxlIHBvc2l0aW9uXG4gICAgXG4gICAgICAgICAgICAgICAgZGF0YS5taWRkbGVQb3NpdGlvbiA9ICggZGF0YS5saW1pdHMubWluICsgZGF0YS5saW1pdHMubWF4ICkgLyAyLjA7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUtpbmVtYXRpY3NMaW5rKCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIHNpZDogeG1sLmdldEF0dHJpYnV0ZSggJ3NpZCcgKSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogeG1sLmdldEF0dHJpYnV0ZSggJ25hbWUnICkgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgIGF0dGFjaG1lbnRzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtczogW11cbiAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2F0dGFjaG1lbnRfZnVsbCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5hdHRhY2htZW50cy5wdXNoKCBwYXJzZUtpbmVtYXRpY3NBdHRhY2htZW50KCBjaGlsZCApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdtYXRyaXgnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndHJhbnNsYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JvdGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS50cmFuc2Zvcm1zLnB1c2goIHBhcnNlS2luZW1hdGljc1RyYW5zZm9ybSggY2hpbGQgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VLaW5lbWF0aWNzQXR0YWNobWVudCggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBqb2ludDogeG1sLmdldEF0dHJpYnV0ZSggJ2pvaW50JyApLnNwbGl0KCAnLycgKS5wb3AoKSxcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtczogW10sXG4gICAgICAgICAgICAgICAgICAgIGxpbmtzOiBbXVxuICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbGluayc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5saW5rcy5wdXNoKCBwYXJzZUtpbmVtYXRpY3NMaW5rKCBjaGlsZCApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdtYXRyaXgnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndHJhbnNsYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JvdGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS50cmFuc2Zvcm1zLnB1c2goIHBhcnNlS2luZW1hdGljc1RyYW5zZm9ybSggY2hpbGQgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VLaW5lbWF0aWNzVHJhbnNmb3JtKCB4bWwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHhtbC5ub2RlTmFtZVxuICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGFycmF5ID0gcGFyc2VGbG9hdHMoIHhtbC50ZXh0Q29udGVudCApO1xuICAgIFxuICAgICAgICAgICAgICAgIHN3aXRjaCAoIGRhdGEudHlwZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbWF0cml4JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEub2JqID0gbmV3IFRIUkVFLk1hdHJpeDQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEub2JqLmZyb21BcnJheSggYXJyYXkgKS50cmFuc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjYXNlICd0cmFuc2xhdGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5vYmogPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5vYmouZnJvbUFycmF5KCBhcnJheSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JvdGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLm9iaiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLm9iai5mcm9tQXJyYXkoIGFycmF5ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmFuZ2xlID0gVEhSRUUuTWF0aC5kZWdUb1JhZCggYXJyYXlbIDMgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VLaW5lbWF0aWNzU2NlbmUoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgYmluZEpvaW50QXhpczogW11cbiAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2JpbmRfam9pbnRfYXhpcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5iaW5kSm9pbnRBeGlzLnB1c2goIHBhcnNlS2luZW1hdGljc0JpbmRKb2ludEF4aXMoIGNoaWxkICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBsaWJyYXJ5LmtpbmVtYXRpY3NTY2VuZXNbIHBhcnNlSWQoIHhtbC5nZXRBdHRyaWJ1dGUoICd1cmwnICkgKSBdID0gZGF0YTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlS2luZW1hdGljc0JpbmRKb2ludEF4aXMoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiB4bWwuZ2V0QXR0cmlidXRlKCAndGFyZ2V0JyApLnNwbGl0KCAnLycgKS5wb3AoKVxuICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYXhpcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtID0gY2hpbGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICdwYXJhbScgKVsgMCBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuYXhpcyA9IHBhcmFtLnRleHRDb250ZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXBKb2ludEluZGV4ID0gZGF0YS5heGlzLnNwbGl0KCAnaW5zdF8nICkucG9wKCkuc3BsaXQoICdheGlzJyApWyAwIF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5qb2ludEluZGV4ID0gdG1wSm9pbnRJbmRleC5zdWJzdHIoIDAsIHRtcEpvaW50SW5kZXgubGVuZ3RoIC0gMSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gYnVpbGRLaW5lbWF0aWNzU2NlbmUoIGRhdGEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKCBkYXRhLmJ1aWxkICE9PSB1bmRlZmluZWQgKSByZXR1cm4gZGF0YS5idWlsZDtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldEtpbmVtYXRpY3NTY2VuZSggaWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldEJ1aWxkKCBsaWJyYXJ5LmtpbmVtYXRpY3NTY2VuZXNbIGlkIF0sIGJ1aWxkS2luZW1hdGljc1NjZW5lICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBzZXR1cEtpbmVtYXRpY3MoKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGtpbmVtYXRpY3NNb2RlbElkID0gT2JqZWN0LmtleXMoIGxpYnJhcnkua2luZW1hdGljc01vZGVscyApWyAwIF07XG4gICAgICAgICAgICAgICAgdmFyIGtpbmVtYXRpY3NTY2VuZUlkID0gT2JqZWN0LmtleXMoIGxpYnJhcnkua2luZW1hdGljc1NjZW5lcyApWyAwIF07XG4gICAgICAgICAgICAgICAgdmFyIHZpc3VhbFNjZW5lSWQgPSBPYmplY3Qua2V5cyggbGlicmFyeS52aXN1YWxTY2VuZXMgKVsgMCBdO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICgga2luZW1hdGljc01vZGVsSWQgPT09IHVuZGVmaW5lZCB8fCBraW5lbWF0aWNzU2NlbmVJZCA9PT0gdW5kZWZpbmVkICkgcmV0dXJuO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBraW5lbWF0aWNzTW9kZWwgPSBnZXRLaW5lbWF0aWNzTW9kZWwoIGtpbmVtYXRpY3NNb2RlbElkICk7XG4gICAgICAgICAgICAgICAgdmFyIGtpbmVtYXRpY3NTY2VuZSA9IGdldEtpbmVtYXRpY3NTY2VuZSgga2luZW1hdGljc1NjZW5lSWQgKTtcbiAgICAgICAgICAgICAgICB2YXIgdmlzdWFsU2NlbmUgPSBnZXRWaXN1YWxTY2VuZSggdmlzdWFsU2NlbmVJZCApO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBiaW5kSm9pbnRBeGlzID0ga2luZW1hdGljc1NjZW5lLmJpbmRKb2ludEF4aXM7XG4gICAgICAgICAgICAgICAgdmFyIGpvaW50TWFwID0ge307XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0gYmluZEpvaW50QXhpcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgYXhpcyA9IGJpbmRKb2ludEF4aXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHJlc3VsdCBvZiB0aGUgZm9sbG93aW5nIHF1ZXJ5IGlzIGFuIGVsZW1lbnQgb2YgdHlwZSAndHJhbnNsYXRlJywgJ3JvdGF0ZScsJ3NjYWxlJyBvciAnbWF0cml4J1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0RWxlbWVudCA9IGNvbGxhZGEucXVlcnlTZWxlY3RvciggJ1tzaWQ9XCInICsgYXhpcy50YXJnZXQgKyAnXCJdJyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIHRhcmdldEVsZW1lbnQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBnZXQgdGhlIHBhcmVudCBvZiB0aGUgdHJhbnNmcm9tIGVsZW1lbnRcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnRWaXN1YWxFbGVtZW50ID0gdGFyZ2V0RWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29ubmVjdCB0aGUgam9pbnQgb2YgdGhlIGtpbmVtYXRpY3MgbW9kZWwgd2l0aCB0aGUgZWxlbWVudCBpbiB0aGUgdmlzdWFsIHNjZW5lXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0KCBheGlzLmpvaW50SW5kZXgsIHBhcmVudFZpc3VhbEVsZW1lbnQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjb25uZWN0KCBqb2ludEluZGV4LCB2aXN1YWxFbGVtZW50ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgdmlzdWFsRWxlbWVudE5hbWUgPSB2aXN1YWxFbGVtZW50LmdldEF0dHJpYnV0ZSggJ25hbWUnICk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBqb2ludCA9IGtpbmVtYXRpY3NNb2RlbC5qb2ludHNbIGpvaW50SW5kZXggXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmlzdWFsU2NlbmUudHJhdmVyc2UoIGZ1bmN0aW9uICggb2JqZWN0ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBvYmplY3QubmFtZSA9PT0gdmlzdWFsRWxlbWVudE5hbWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgam9pbnRNYXBbIGpvaW50SW5kZXggXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0OiBvYmplY3QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybXM6IGJ1aWxkVHJhbnNmb3JtTGlzdCggdmlzdWFsRWxlbWVudCApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqb2ludDogam9pbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBqb2ludC56ZXJvUG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHZhciBtMCA9IG5ldyBUSFJFRS5NYXRyaXg0KCk7XG4gICAgXG4gICAgICAgICAgICAgICAga2luZW1hdGljcyA9IHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgam9pbnRzOiBraW5lbWF0aWNzTW9kZWwgJiYga2luZW1hdGljc01vZGVsLmpvaW50cyxcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZ2V0Sm9pbnRWYWx1ZTogZnVuY3Rpb24gKCBqb2ludEluZGV4ICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGpvaW50RGF0YSA9IGpvaW50TWFwWyBqb2ludEluZGV4IF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGpvaW50RGF0YSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gam9pbnREYXRhLnBvc2l0aW9uO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBKb2ludCAnICsgam9pbnRJbmRleCArICcgZG9lc25cXCd0IGV4aXN0LicgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgc2V0Sm9pbnRWYWx1ZTogZnVuY3Rpb24gKCBqb2ludEluZGV4LCB2YWx1ZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqb2ludERhdGEgPSBqb2ludE1hcFsgam9pbnRJbmRleCBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBqb2ludERhdGEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGpvaW50ID0gam9pbnREYXRhLmpvaW50O1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdmFsdWUgPiBqb2ludC5saW1pdHMubWF4IHx8IHZhbHVlIDwgam9pbnQubGltaXRzLm1pbiApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogSm9pbnQgJyArIGpvaW50SW5kZXggKyAnIHZhbHVlICcgKyB2YWx1ZSArICcgb3V0c2lkZSBvZiBsaW1pdHMgKG1pbjogJyArIGpvaW50LmxpbWl0cy5taW4gKyAnLCBtYXg6ICcgKyBqb2ludC5saW1pdHMubWF4ICsgJykuJyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGpvaW50LnN0YXRpYyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogSm9pbnQgJyArIGpvaW50SW5kZXggKyAnIGlzIHN0YXRpYy4nICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IGpvaW50RGF0YS5vYmplY3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBheGlzID0gam9pbnQuYXhpcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zZm9ybXMgPSBqb2ludERhdGEudHJhbnNmb3JtcztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4LmlkZW50aXR5KCk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVhY2ggdXBkYXRlLCB3ZSBoYXZlIHRvIGFwcGx5IGFsbCB0cmFuc2Zvcm1zIGluIHRoZSBjb3JyZWN0IG9yZGVyXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IHRyYW5zZm9ybXMubGVuZ3RoOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zZm9ybSA9IHRyYW5zZm9ybXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgY29ubmVjdGlvbiBvZiB0aGUgdHJhbnNmb3JtIG5vZGUgd2l0aCBhIGpvaW50LCBhcHBseSB0aGUgam9pbnQgdmFsdWVcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdHJhbnNmb3JtLnNpZCAmJiB0cmFuc2Zvcm0uc2lkLmluZGV4T2YoIGpvaW50SW5kZXggKSAhPT0gLSAxICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGpvaW50LnR5cGUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Jldm9sdXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5tdWx0aXBseSggbTAubWFrZVJvdGF0aW9uQXhpcyggYXhpcywgVEhSRUUuTWF0aC5kZWdUb1JhZCggdmFsdWUgKSApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncHJpc21hdGljJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5tdWx0aXBseSggbTAubWFrZVRyYW5zbGF0aW9uKCBheGlzLnggKiB2YWx1ZSwgYXhpcy55ICogdmFsdWUsIGF4aXMueiAqIHZhbHVlICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogVW5rbm93biBqb2ludCB0eXBlOiAnICsgam9pbnQudHlwZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCB0cmFuc2Zvcm0udHlwZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbWF0cml4JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5tdWx0aXBseSggdHJhbnNmb3JtLm9iaiApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RyYW5zbGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRyaXgubXVsdGlwbHkoIG0wLm1ha2VUcmFuc2xhdGlvbiggdHJhbnNmb3JtLm9iai54LCB0cmFuc2Zvcm0ub2JqLnksIHRyYW5zZm9ybS5vYmoueiApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2NhbGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4LnNjYWxlKCB0cmFuc2Zvcm0ub2JqICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncm90YXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5tdWx0aXBseSggbTAubWFrZVJvdGF0aW9uQXhpcyggdHJhbnNmb3JtLm9iaiwgdHJhbnNmb3JtLmFuZ2xlICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QubWF0cml4LmNvcHkoIG1hdHJpeCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QubWF0cml4LmRlY29tcG9zZSggb2JqZWN0LnBvc2l0aW9uLCBvYmplY3QucXVhdGVybmlvbiwgb2JqZWN0LnNjYWxlICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpvaW50TWFwWyBqb2ludEluZGV4IF0ucG9zaXRpb24gPSB2YWx1ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogJyArIGpvaW50SW5kZXggKyAnIGRvZXMgbm90IGV4aXN0LicgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBidWlsZFRyYW5zZm9ybUxpc3QoIG5vZGUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zZm9ybXMgPSBbXTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgeG1sID0gY29sbGFkYS5xdWVyeVNlbGVjdG9yKCAnW2lkPVwiJyArIG5vZGUuaWQgKyAnXCJdJyApO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ21hdHJpeCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFycmF5ID0gcGFyc2VGbG9hdHMoIGNoaWxkLnRleHRDb250ZW50ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBUSFJFRS5NYXRyaXg0KCkuZnJvbUFycmF5KCBhcnJheSApLnRyYW5zcG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybXMucHVzaCgge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWQ6IGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NpZCcgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogY2hpbGQubm9kZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iajogbWF0cml4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndHJhbnNsYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NjYWxlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJyYXkgPSBwYXJzZUZsb2F0cyggY2hpbGQudGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmVjdG9yID0gbmV3IFRIUkVFLlZlY3RvcjMoKS5mcm9tQXJyYXkoIGFycmF5ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3Jtcy5wdXNoKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZDogY2hpbGQuZ2V0QXR0cmlidXRlKCAnc2lkJyApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBjaGlsZC5ub2RlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqOiB2ZWN0b3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdyb3RhdGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IHBhcnNlRmxvYXRzKCBjaGlsZC50ZXh0Q29udGVudCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ZWN0b3IgPSBuZXcgVEhSRUUuVmVjdG9yMygpLmZyb21BcnJheSggYXJyYXkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW5nbGUgPSBUSFJFRS5NYXRoLmRlZ1RvUmFkKCBhcnJheVsgMyBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3Jtcy5wdXNoKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZDogY2hpbGQuZ2V0QXR0cmlidXRlKCAnc2lkJyApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBjaGlsZC5ub2RlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqOiB2ZWN0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlOiBhbmdsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNmb3JtcztcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIC8vIG5vZGVzXG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwcmVwYXJlTm9kZXMoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudHMgPSB4bWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICdub2RlJyApO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIGVuc3VyZSBhbGwgbm9kZSBlbGVtZW50cyBoYXZlIGlkIGF0dHJpYnV0ZXNcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZWxlbWVudHNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBlbGVtZW50Lmhhc0F0dHJpYnV0ZSggJ2lkJyApID09PSBmYWxzZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCAnaWQnLCBnZW5lcmF0ZUlkKCkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4NCgpO1xuICAgICAgICAgICAgdmFyIHZlY3RvciA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZU5vZGUoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogeG1sLmdldEF0dHJpYnV0ZSggJ25hbWUnICkgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHhtbC5nZXRBdHRyaWJ1dGUoICd0eXBlJyApLFxuICAgICAgICAgICAgICAgICAgICBpZDogeG1sLmdldEF0dHJpYnV0ZSggJ2lkJyApLFxuICAgICAgICAgICAgICAgICAgICBzaWQ6IHhtbC5nZXRBdHRyaWJ1dGUoICdzaWQnICksXG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeDogbmV3IFRIUkVFLk1hdHJpeDQoKSxcbiAgICAgICAgICAgICAgICAgICAgbm9kZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUNhbWVyYXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUNvbnRyb2xsZXJzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VMaWdodHM6IFtdLFxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUdlb21ldHJpZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZU5vZGVzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3Jtczoge31cbiAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ25vZGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEubm9kZXMucHVzaCggY2hpbGQuZ2V0QXR0cmlidXRlKCAnaWQnICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZU5vZGUoIGNoaWxkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdpbnN0YW5jZV9jYW1lcmEnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuaW5zdGFuY2VDYW1lcmFzLnB1c2goIHBhcnNlSWQoIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3VybCcgKSApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdpbnN0YW5jZV9jb250cm9sbGVyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmluc3RhbmNlQ29udHJvbGxlcnMucHVzaCggcGFyc2VOb2RlSW5zdGFuY2UoIGNoaWxkICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2luc3RhbmNlX2xpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmluc3RhbmNlTGlnaHRzLnB1c2goIHBhcnNlSWQoIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3VybCcgKSApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdpbnN0YW5jZV9nZW9tZXRyeSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5pbnN0YW5jZUdlb21ldHJpZXMucHVzaCggcGFyc2VOb2RlSW5zdGFuY2UoIGNoaWxkICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2luc3RhbmNlX25vZGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuaW5zdGFuY2VOb2Rlcy5wdXNoKCBwYXJzZUlkKCBjaGlsZC5nZXRBdHRyaWJ1dGUoICd1cmwnICkgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbWF0cml4JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJyYXkgPSBwYXJzZUZsb2F0cyggY2hpbGQudGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLm1hdHJpeC5tdWx0aXBseSggbWF0cml4LmZyb21BcnJheSggYXJyYXkgKS50cmFuc3Bvc2UoKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEudHJhbnNmb3Jtc1sgY2hpbGQuZ2V0QXR0cmlidXRlKCAnc2lkJyApIF0gPSBjaGlsZC5ub2RlTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RyYW5zbGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFycmF5ID0gcGFyc2VGbG9hdHMoIGNoaWxkLnRleHRDb250ZW50ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjdG9yLmZyb21BcnJheSggYXJyYXkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLm1hdHJpeC5tdWx0aXBseSggbWF0cml4Lm1ha2VUcmFuc2xhdGlvbiggdmVjdG9yLngsIHZlY3Rvci55LCB2ZWN0b3IueiApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS50cmFuc2Zvcm1zWyBjaGlsZC5nZXRBdHRyaWJ1dGUoICdzaWQnICkgXSA9IGNoaWxkLm5vZGVOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncm90YXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJyYXkgPSBwYXJzZUZsb2F0cyggY2hpbGQudGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW5nbGUgPSBUSFJFRS5NYXRoLmRlZ1RvUmFkKCBhcnJheVsgMyBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5tYXRyaXgubXVsdGlwbHkoIG1hdHJpeC5tYWtlUm90YXRpb25BeGlzKCB2ZWN0b3IuZnJvbUFycmF5KCBhcnJheSApLCBhbmdsZSApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS50cmFuc2Zvcm1zWyBjaGlsZC5nZXRBdHRyaWJ1dGUoICdzaWQnICkgXSA9IGNoaWxkLm5vZGVOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2NhbGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IHBhcnNlRmxvYXRzKCBjaGlsZC50ZXh0Q29udGVudCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEubWF0cml4LnNjYWxlKCB2ZWN0b3IuZnJvbUFycmF5KCBhcnJheSApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS50cmFuc2Zvcm1zWyBjaGlsZC5nZXRBdHRyaWJ1dGUoICdzaWQnICkgXSA9IGNoaWxkLm5vZGVOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZXh0cmEnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggY2hpbGQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBsaWJyYXJ5Lm5vZGVzWyBkYXRhLmlkIF0gPSBkYXRhO1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VOb2RlSW5zdGFuY2UoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHBhcnNlSWQoIHhtbC5nZXRBdHRyaWJ1dGUoICd1cmwnICkgKSxcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxzOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgc2tlbGV0b25zOiBbXVxuICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2JpbmRfbWF0ZXJpYWwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnN0YW5jZXMgPSBjaGlsZC5nZXRFbGVtZW50c0J5VGFnTmFtZSggJ2luc3RhbmNlX21hdGVyaWFsJyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBqID0gMDsgaiA8IGluc3RhbmNlcy5sZW5ndGg7IGogKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IGluc3RhbmNlc1sgaiBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ltYm9sID0gaW5zdGFuY2UuZ2V0QXR0cmlidXRlKCAnc3ltYm9sJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gaW5zdGFuY2UuZ2V0QXR0cmlidXRlKCAndGFyZ2V0JyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLm1hdGVyaWFsc1sgc3ltYm9sIF0gPSBwYXJzZUlkKCB0YXJnZXQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdza2VsZXRvbic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5za2VsZXRvbnMucHVzaCggcGFyc2VJZCggY2hpbGQudGV4dENvbnRlbnQgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGJ1aWxkU2tlbGV0b24oIHNrZWxldG9ucywgam9pbnRzICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBib25lRGF0YSA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBzb3J0ZWRCb25lRGF0YSA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBpLCBqLCBkYXRhO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIGEgc2tlbGV0b24gY2FuIGhhdmUgbXVsdGlwbGUgcm9vdCBib25lcy4gY29sbGFkYSBleHByZXNzZXMgdGhpc1xuICAgICAgICAgICAgICAgIC8vIHNpdHV0YXRpb24gd2l0aCBtdWx0aXBsZSBcInNrZWxldG9uXCIgdGFncyBwZXIgY29udHJvbGxlciBpbnN0YW5jZVxuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIGkgPSAwOyBpIDwgc2tlbGV0b25zLmxlbmd0aDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNrZWxldG9uID0gc2tlbGV0b25zWyBpIF07XG4gICAgICAgICAgICAgICAgICAgIHZhciByb290ID0gZ2V0Tm9kZSggc2tlbGV0b24gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0dXAgYm9uZSBkYXRhIGZvciBhIHNpbmdsZSBib25lIGhpZXJhcmNoeVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBidWlsZEJvbmVIaWVyYXJjaHkoIHJvb3QsIGpvaW50cywgYm9uZURhdGEgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gc29ydCBib25lIGRhdGEgKHRoZSBvcmRlciBpcyBkZWZpbmVkIGluIHRoZSBjb3JyZXNwb25kaW5nIGNvbnRyb2xsZXIpXG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggaSA9IDA7IGkgPCBqb2ludHMubGVuZ3RoOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKCBqID0gMDsgaiA8IGJvbmVEYXRhLmxlbmd0aDsgaiArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBib25lRGF0YVsgaiBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBkYXRhLmJvbmUubmFtZSA9PT0gam9pbnRzWyBpIF0ubmFtZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0ZWRCb25lRGF0YVsgaSBdID0gZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnByb2Nlc3NlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gYWRkIHVucHJvY2Vzc2VkIGJvbmUgZGF0YSBhdCB0aGUgZW5kIG9mIHRoZSBsaXN0XG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggaSA9IDA7IGkgPCBib25lRGF0YS5sZW5ndGg7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBib25lRGF0YVsgaSBdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGRhdGEucHJvY2Vzc2VkID09PSBmYWxzZSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRlZEJvbmVEYXRhLnB1c2goIGRhdGEgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEucHJvY2Vzc2VkID0gdHJ1ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAvLyBzZXR1cCBhcnJheXMgZm9yIHNrZWxldG9uIGNyZWF0aW9uXG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGJvbmVzID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGJvbmVJbnZlcnNlcyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIGkgPSAwOyBpIDwgc29ydGVkQm9uZURhdGEubGVuZ3RoOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBkYXRhID0gc29ydGVkQm9uZURhdGFbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgYm9uZXMucHVzaCggZGF0YS5ib25lICk7XG4gICAgICAgICAgICAgICAgICAgIGJvbmVJbnZlcnNlcy5wdXNoKCBkYXRhLmJvbmVJbnZlcnNlICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVEhSRUUuU2tlbGV0b24oIGJvbmVzLCBib25lSW52ZXJzZXMgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGJ1aWxkQm9uZUhpZXJhcmNoeSggcm9vdCwgam9pbnRzLCBib25lRGF0YSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBzZXR1cCBib25lIGRhdGEgZnJvbSB2aXN1YWwgc2NlbmVcbiAgICBcbiAgICAgICAgICAgICAgICByb290LnRyYXZlcnNlKCBmdW5jdGlvbiAoIG9iamVjdCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBvYmplY3QuaXNCb25lID09PSB0cnVlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVJbnZlcnNlO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0cmlldmUgdGhlIGJvbmVJbnZlcnNlIGZyb20gdGhlIGNvbnRyb2xsZXIgZGF0YVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgam9pbnRzLmxlbmd0aDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgam9pbnQgPSBqb2ludHNbIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGpvaW50Lm5hbWUgPT09IG9iamVjdC5uYW1lICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW52ZXJzZSA9IGpvaW50LmJvbmVJbnZlcnNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGJvbmVJbnZlcnNlID09PSB1bmRlZmluZWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVW5mb3J0dW5hdGVseSwgdGhlcmUgY2FuIGJlIGpvaW50cyBpbiB0aGUgdmlzdWFsIHNjZW5lIHRoYXQgYXJlIG5vdCBwYXJ0IG9mIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvcnJlc3BvbmRpbmcgY29udHJvbGxlci4gSW4gdGhpcyBjYXNlLCB3ZSBoYXZlIHRvIGNyZWF0ZSBhIGR1bW15IGJvbmVJbnZlcnNlIG1hdHJpeFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvciB0aGUgcmVzcGVjdGl2ZSBib25lLiBUaGlzIGJvbmUgd29uJ3QgYWZmZWN0IGFueSB2ZXJ0aWNlcywgYmVjYXVzZSB0aGVyZSBhcmUgbm8gc2tpbiBpbmRpY2VzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHdlaWdodHMgZGVmaW5lZCBmb3IgaXQuIEJ1dCB3ZSBzdGlsbCBoYXZlIHRvIGFkZCB0aGUgYm9uZSB0byB0aGUgc29ydGVkIGJvbmUgbGlzdCBpbiBvcmRlciB0b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVuc3VyZSBhIGNvcnJlY3QgYW5pbWF0aW9uIG9mIHRoZSBtb2RlbC5cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUludmVyc2UgPSBuZXcgVEhSRUUuTWF0cml4NCgpO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgYm9uZURhdGEucHVzaCggeyBib25lOiBvYmplY3QsIGJvbmVJbnZlcnNlOiBib25lSW52ZXJzZSwgcHJvY2Vzc2VkOiBmYWxzZSB9ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBidWlsZE5vZGUoIGRhdGEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIG9iamVjdHMgPSBbXTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgbWF0cml4ID0gZGF0YS5tYXRyaXg7XG4gICAgICAgICAgICAgICAgdmFyIG5vZGVzID0gZGF0YS5ub2RlcztcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IGRhdGEudHlwZTtcbiAgICAgICAgICAgICAgICB2YXIgaW5zdGFuY2VDYW1lcmFzID0gZGF0YS5pbnN0YW5jZUNhbWVyYXM7XG4gICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlQ29udHJvbGxlcnMgPSBkYXRhLmluc3RhbmNlQ29udHJvbGxlcnM7XG4gICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlTGlnaHRzID0gZGF0YS5pbnN0YW5jZUxpZ2h0cztcbiAgICAgICAgICAgICAgICB2YXIgaW5zdGFuY2VHZW9tZXRyaWVzID0gZGF0YS5pbnN0YW5jZUdlb21ldHJpZXM7XG4gICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlTm9kZXMgPSBkYXRhLmluc3RhbmNlTm9kZXM7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gbm9kZXNcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSBub2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBvYmplY3RzLnB1c2goIGdldE5vZGUoIG5vZGVzWyBpIF0gKSApO1xuICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAvLyBpbnN0YW5jZSBjYW1lcmFzXG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0gaW5zdGFuY2VDYW1lcmFzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnN0YW5jZUNhbWVyYSA9IGdldENhbWVyYSggaW5zdGFuY2VDYW1lcmFzWyBpIF0gKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBpbnN0YW5jZUNhbWVyYSAhPT0gbnVsbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdHMucHVzaCggaW5zdGFuY2VDYW1lcmEuY2xvbmUoKSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIC8vIGluc3RhbmNlIGNvbnRyb2xsZXJzXG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0gaW5zdGFuY2VDb250cm9sbGVycy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBpbnN0YW5jZUNvbnRyb2xsZXJzWyBpIF07XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250cm9sbGVyID0gZ2V0Q29udHJvbGxlciggaW5zdGFuY2UuaWQgKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdlb21ldHJpZXMgPSBnZXRHZW9tZXRyeSggY29udHJvbGxlci5pZCApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3T2JqZWN0cyA9IGJ1aWxkT2JqZWN0cyggZ2VvbWV0cmllcywgaW5zdGFuY2UubWF0ZXJpYWxzICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBza2VsZXRvbnMgPSBpbnN0YW5jZS5za2VsZXRvbnM7XG4gICAgICAgICAgICAgICAgICAgIHZhciBqb2ludHMgPSBjb250cm9sbGVyLnNraW4uam9pbnRzO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgc2tlbGV0b24gPSBidWlsZFNrZWxldG9uKCBza2VsZXRvbnMsIGpvaW50cyApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaiA9IDAsIGpsID0gbmV3T2JqZWN0cy5sZW5ndGg7IGogPCBqbDsgaiArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSBuZXdPYmplY3RzWyBqIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIG9iamVjdC5pc1NraW5uZWRNZXNoICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5iaW5kKCBza2VsZXRvbiwgY29udHJvbGxlci5za2luLmJpbmRNYXRyaXggKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3Qubm9ybWFsaXplU2tpbldlaWdodHMoKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdHMucHVzaCggb2JqZWN0ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gaW5zdGFuY2UgbGlnaHRzXG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0gaW5zdGFuY2VMaWdodHMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlTGlnaHQgPSBnZXRMaWdodCggaW5zdGFuY2VMaWdodHNbIGkgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIGluc3RhbmNlTGlnaHQgIT09IG51bGwgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3RzLnB1c2goIGluc3RhbmNlTGlnaHQuY2xvbmUoKSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIC8vIGluc3RhbmNlIGdlb21ldHJpZXNcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSBpbnN0YW5jZUdlb21ldHJpZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gaW5zdGFuY2VHZW9tZXRyaWVzWyBpIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIGEgc2luZ2xlIGdlb21ldHJ5IGluc3RhbmNlIGluIGNvbGxhZGEgY2FuIGxlYWQgdG8gbXVsdGlwbGUgb2JqZWN0M0RzLlxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGlzIHRoZSBjYXNlIHdoZW4gcHJpbWl0aXZlcyBhcmUgY29tYmluZWQgbGlrZSB0cmlhbmdsZXMgYW5kIGxpbmVzXG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBnZW9tZXRyaWVzID0gZ2V0R2VvbWV0cnkoIGluc3RhbmNlLmlkICk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdPYmplY3RzID0gYnVpbGRPYmplY3RzKCBnZW9tZXRyaWVzLCBpbnN0YW5jZS5tYXRlcmlhbHMgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGogPSAwLCBqbCA9IG5ld09iamVjdHMubGVuZ3RoOyBqIDwgamw7IGogKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3RzLnB1c2goIG5ld09iamVjdHNbIGogXSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIC8vIGluc3RhbmNlIG5vZGVzXG4gICAgXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0gaW5zdGFuY2VOb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBvYmplY3RzLnB1c2goIGdldE5vZGUoIGluc3RhbmNlTm9kZXNbIGkgXSApLmNsb25lKCkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIG9iamVjdDtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIG5vZGVzLmxlbmd0aCA9PT0gMCAmJiBvYmplY3RzLmxlbmd0aCA9PT0gMSApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0ID0gb2JqZWN0c1sgMCBdO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdCA9ICggdHlwZSA9PT0gJ0pPSU5UJyApID8gbmV3IFRIUkVFLkJvbmUoKSA6IG5ldyBUSFJFRS5Hcm91cCgpO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBvYmplY3RzLmxlbmd0aDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5hZGQoIG9iamVjdHNbIGkgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIG9iamVjdC5uYW1lID0gKCB0eXBlID09PSAnSk9JTlQnICkgPyBkYXRhLnNpZCA6IGRhdGEubmFtZTtcbiAgICAgICAgICAgICAgICBvYmplY3QubWF0cml4LmNvcHkoIG1hdHJpeCApO1xuICAgICAgICAgICAgICAgIG9iamVjdC5tYXRyaXguZGVjb21wb3NlKCBvYmplY3QucG9zaXRpb24sIG9iamVjdC5xdWF0ZXJuaW9uLCBvYmplY3Quc2NhbGUgKTtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZU1hdGVyaWFsQmluZGluZygga2V5cywgaW5zdGFuY2VNYXRlcmlhbHMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIG1hdGVyaWFscyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gaW5zdGFuY2VNYXRlcmlhbHNbIGtleXNbIGkgXSBdO1xuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbHMucHVzaCggZ2V0TWF0ZXJpYWwoIGlkICkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGVyaWFscztcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGJ1aWxkT2JqZWN0cyggZ2VvbWV0cmllcywgaW5zdGFuY2VNYXRlcmlhbHMgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIG9iamVjdHMgPSBbXTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgdHlwZSBpbiBnZW9tZXRyaWVzICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBnZW9tZXRyaWVzWyB0eXBlIF07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXRlcmlhbHMgPSByZXNvbHZlTWF0ZXJpYWxCaW5kaW5nKCBnZW9tZXRyeS5tYXRlcmlhbEtleXMsIGluc3RhbmNlTWF0ZXJpYWxzICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZSBjYXNlIGlmIG5vIG1hdGVyaWFscyBhcmUgZGVmaW5lZFxuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIG1hdGVyaWFscy5sZW5ndGggPT09IDAgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHR5cGUgPT09ICdsaW5lcycgfHwgdHlwZSA9PT0gJ2xpbmVzdHJpcHMnICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFscy5wdXNoKCBuZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoKSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbHMucHVzaCggbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKCkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyByZWdhcmQgc2tpbm5pbmdcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNraW5uaW5nID0gKCBnZW9tZXRyeS5kYXRhLmF0dHJpYnV0ZXMuc2tpbkluZGV4ICE9PSB1bmRlZmluZWQgKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBza2lubmluZyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IG1hdGVyaWFscy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsc1sgaSBdLnNraW5uaW5nID0gdHJ1ZTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBjaG9vc2UgYmV0d2VlbiBhIHNpbmdsZSBvciBtdWx0aSBtYXRlcmlhbHMgKG1hdGVyaWFsIGFycmF5KVxuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgbWF0ZXJpYWwgPSAoIG1hdGVyaWFscy5sZW5ndGggPT09IDEgKSA/IG1hdGVyaWFsc1sgMCBdIDogbWF0ZXJpYWxzO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBub3cgY3JlYXRlIGEgc3BlY2lmaWMgM0Qgb2JqZWN0XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBvYmplY3Q7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIHR5cGUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdsaW5lcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0ID0gbmV3IFRIUkVFLkxpbmVTZWdtZW50cyggZ2VvbWV0cnkuZGF0YSwgbWF0ZXJpYWwgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2xpbmVzdHJpcHMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdCA9IG5ldyBUSFJFRS5MaW5lKCBnZW9tZXRyeS5kYXRhLCBtYXRlcmlhbCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndHJpYW5nbGVzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BvbHlsaXN0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHNraW5uaW5nICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QgPSBuZXcgVEhSRUUuU2tpbm5lZE1lc2goIGdlb21ldHJ5LmRhdGEsIG1hdGVyaWFsICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0ID0gbmV3IFRIUkVFLk1lc2goIGdlb21ldHJ5LmRhdGEsIG1hdGVyaWFsICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdHMucHVzaCggb2JqZWN0ICk7XG4gICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3RzO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0Tm9kZSggaWQgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldEJ1aWxkKCBsaWJyYXJ5Lm5vZGVzWyBpZCBdLCBidWlsZE5vZGUgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIC8vIHZpc3VhbCBzY2VuZXNcbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlVmlzdWFsU2NlbmUoIHhtbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogeG1sLmdldEF0dHJpYnV0ZSggJ25hbWUnICksXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXVxuICAgICAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAgICAgcHJlcGFyZU5vZGVzKCB4bWwgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBnZXRFbGVtZW50c0J5VGFnTmFtZSggeG1sLCAnbm9kZScgKTtcbiAgICBcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuY2hpbGRyZW4ucHVzaCggcGFyc2VOb2RlKCBlbGVtZW50c1sgaSBdICkgKTtcbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgbGlicmFyeS52aXN1YWxTY2VuZXNbIHhtbC5nZXRBdHRyaWJ1dGUoICdpZCcgKSBdID0gZGF0YTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGJ1aWxkVmlzdWFsU2NlbmUoIGRhdGEgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gbmV3IFRIUkVFLkdyb3VwKCk7XG4gICAgICAgICAgICAgICAgZ3JvdXAubmFtZSA9IGRhdGEubmFtZTtcbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGRyZW4gPSBkYXRhLmNoaWxkcmVuO1xuICAgIFxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSArKyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5bIGkgXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC5pZCA9PT0gbnVsbCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwLmFkZCggYnVpbGROb2RlKCBjaGlsZCApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBpcyBhbiBJRCwgbGV0J3MgdHJ5IHRvIGdldCB0aGUgZmluaXNoZWQgYnVpbGQgKGUuZy4gam9pbnRzIGFyZSBhbHJlYWR5IGJ1aWxkKVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXAuYWRkKCBnZXROb2RlKCBjaGlsZC5pZCApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdyb3VwO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0VmlzdWFsU2NlbmUoIGlkICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBnZXRCdWlsZCggbGlicmFyeS52aXN1YWxTY2VuZXNbIGlkIF0sIGJ1aWxkVmlzdWFsU2NlbmUgKTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIC8vIHNjZW5lc1xuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VTY2VuZSggeG1sICkge1xuICAgIFxuICAgICAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IGdldEVsZW1lbnRzQnlUYWdOYW1lKCB4bWwsICdpbnN0YW5jZV92aXN1YWxfc2NlbmUnIClbIDAgXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0VmlzdWFsU2NlbmUoIHBhcnNlSWQoIGluc3RhbmNlLmdldEF0dHJpYnV0ZSggJ3VybCcgKSApICk7XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBzZXR1cEFuaW1hdGlvbnMoKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgdmFyIGNsaXBzID0gbGlicmFyeS5jbGlwcztcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGlzRW1wdHkoIGNsaXBzICkgPT09IHRydWUgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICggaXNFbXB0eSggbGlicmFyeS5hbmltYXRpb25zICkgPT09IGZhbHNlICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgYXJlIGFuaW1hdGlvbnMgYnV0IG5vIGNsaXBzLCB3ZSBjcmVhdGUgYSBkZWZhdWx0IGNsaXAgZm9yIHBsYXliYWNrXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHJhY2tzID0gW107XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaWQgaW4gbGlicmFyeS5hbmltYXRpb25zICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbmltYXRpb25UcmFja3MgPSBnZXRBbmltYXRpb24oIGlkICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0gYW5pbWF0aW9uVHJhY2tzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrcy5wdXNoKCBhbmltYXRpb25UcmFja3NbIGkgXSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbnMucHVzaCggbmV3IFRIUkVFLkFuaW1hdGlvbkNsaXAoICdkZWZhdWx0JywgLSAxLCB0cmFja3MgKSApO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGlkIGluIGNsaXBzICkge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9ucy5wdXNoKCBnZXRBbmltYXRpb25DbGlwKCBpZCApICk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBjb25zb2xlLnRpbWUoICdUSFJFRS5Db2xsYWRhTG9hZGVyJyApO1xuICAgIFxuICAgICAgICAgICAgaWYgKCB0ZXh0Lmxlbmd0aCA9PT0gMCApIHtcbiAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzY2VuZTogbmV3IFRIUkVFLlNjZW5lKCkgfTtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGNvbnNvbGUudGltZSggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IERPTVBhcnNlcicgKTtcbiAgICBcbiAgICAgICAgICAgIHZhciB4bWwgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKCB0ZXh0LCAnYXBwbGljYXRpb24veG1sJyApO1xuICAgIFxuICAgICAgICAgICAgY29uc29sZS50aW1lRW5kKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogRE9NUGFyc2VyJyApO1xuICAgIFxuICAgICAgICAgICAgdmFyIGNvbGxhZGEgPSBnZXRFbGVtZW50c0J5VGFnTmFtZSggeG1sLCAnQ09MTEFEQScgKVsgMCBdO1xuICAgIFxuICAgICAgICAgICAgLy8gbWV0YWRhdGFcbiAgICBcbiAgICAgICAgICAgIHZhciB2ZXJzaW9uID0gY29sbGFkYS5nZXRBdHRyaWJ1dGUoICd2ZXJzaW9uJyApO1xuICAgICAgICAgICAgY29uc29sZS5sb2coICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBGaWxlIHZlcnNpb24nLCB2ZXJzaW9uICk7XG4gICAgXG4gICAgICAgICAgICB2YXIgYXNzZXQgPSBwYXJzZUFzc2V0KCBnZXRFbGVtZW50c0J5VGFnTmFtZSggY29sbGFkYSwgJ2Fzc2V0JyApWyAwIF0gKTtcbiAgICAgICAgICAgIHZhciB0ZXh0dXJlTG9hZGVyID0gbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoIHRoaXMubWFuYWdlciApO1xuICAgICAgICAgICAgdGV4dHVyZUxvYWRlci5zZXRQYXRoKCBwYXRoICkuc2V0Q3Jvc3NPcmlnaW4oIHRoaXMuY3Jvc3NPcmlnaW4gKTtcbiAgICBcbiAgICAgICAgICAgIC8vXG4gICAgXG4gICAgICAgICAgICB2YXIgYW5pbWF0aW9ucyA9IFtdO1xuICAgICAgICAgICAgdmFyIGtpbmVtYXRpY3MgPSB7fTtcbiAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XG4gICAgXG4gICAgICAgICAgICAvL1xuICAgIFxuICAgICAgICAgICAgdmFyIGxpYnJhcnkgPSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uczoge30sXG4gICAgICAgICAgICAgICAgY2xpcHM6IHt9LFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJzOiB7fSxcbiAgICAgICAgICAgICAgICBpbWFnZXM6IHt9LFxuICAgICAgICAgICAgICAgIGVmZmVjdHM6IHt9LFxuICAgICAgICAgICAgICAgIG1hdGVyaWFsczoge30sXG4gICAgICAgICAgICAgICAgY2FtZXJhczoge30sXG4gICAgICAgICAgICAgICAgbGlnaHRzOiB7fSxcbiAgICAgICAgICAgICAgICBnZW9tZXRyaWVzOiB7fSxcbiAgICAgICAgICAgICAgICBub2Rlczoge30sXG4gICAgICAgICAgICAgICAgdmlzdWFsU2NlbmVzOiB7fSxcbiAgICAgICAgICAgICAgICBraW5lbWF0aWNzTW9kZWxzOiB7fSxcbiAgICAgICAgICAgICAgICBraW5lbWF0aWNzU2NlbmVzOiB7fVxuICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgIGNvbnNvbGUudGltZSggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IFBhcnNlJyApO1xuICAgIFxuICAgICAgICAgICAgcGFyc2VMaWJyYXJ5KCBjb2xsYWRhLCAnbGlicmFyeV9hbmltYXRpb25zJywgJ2FuaW1hdGlvbicsIHBhcnNlQW5pbWF0aW9uICk7XG4gICAgICAgICAgICBwYXJzZUxpYnJhcnkoIGNvbGxhZGEsICdsaWJyYXJ5X2FuaW1hdGlvbl9jbGlwcycsICdhbmltYXRpb25fY2xpcCcsIHBhcnNlQW5pbWF0aW9uQ2xpcCApO1xuICAgICAgICAgICAgcGFyc2VMaWJyYXJ5KCBjb2xsYWRhLCAnbGlicmFyeV9jb250cm9sbGVycycsICdjb250cm9sbGVyJywgcGFyc2VDb250cm9sbGVyICk7XG4gICAgICAgICAgICBwYXJzZUxpYnJhcnkoIGNvbGxhZGEsICdsaWJyYXJ5X2ltYWdlcycsICdpbWFnZScsIHBhcnNlSW1hZ2UgKTtcbiAgICAgICAgICAgIHBhcnNlTGlicmFyeSggY29sbGFkYSwgJ2xpYnJhcnlfZWZmZWN0cycsICdlZmZlY3QnLCBwYXJzZUVmZmVjdCApO1xuICAgICAgICAgICAgcGFyc2VMaWJyYXJ5KCBjb2xsYWRhLCAnbGlicmFyeV9tYXRlcmlhbHMnLCAnbWF0ZXJpYWwnLCBwYXJzZU1hdGVyaWFsICk7XG4gICAgICAgICAgICBwYXJzZUxpYnJhcnkoIGNvbGxhZGEsICdsaWJyYXJ5X2NhbWVyYXMnLCAnY2FtZXJhJywgcGFyc2VDYW1lcmEgKTtcbiAgICAgICAgICAgIHBhcnNlTGlicmFyeSggY29sbGFkYSwgJ2xpYnJhcnlfbGlnaHRzJywgJ2xpZ2h0JywgcGFyc2VMaWdodCApO1xuICAgICAgICAgICAgcGFyc2VMaWJyYXJ5KCBjb2xsYWRhLCAnbGlicmFyeV9nZW9tZXRyaWVzJywgJ2dlb21ldHJ5JywgcGFyc2VHZW9tZXRyeSApO1xuICAgICAgICAgICAgcGFyc2VMaWJyYXJ5KCBjb2xsYWRhLCAnbGlicmFyeV9ub2RlcycsICdub2RlJywgcGFyc2VOb2RlICk7XG4gICAgICAgICAgICBwYXJzZUxpYnJhcnkoIGNvbGxhZGEsICdsaWJyYXJ5X3Zpc3VhbF9zY2VuZXMnLCAndmlzdWFsX3NjZW5lJywgcGFyc2VWaXN1YWxTY2VuZSApO1xuICAgICAgICAgICAgcGFyc2VMaWJyYXJ5KCBjb2xsYWRhLCAnbGlicmFyeV9raW5lbWF0aWNzX21vZGVscycsICdraW5lbWF0aWNzX21vZGVsJywgcGFyc2VLaW5lbWF0aWNzTW9kZWwgKTtcbiAgICAgICAgICAgIHBhcnNlTGlicmFyeSggY29sbGFkYSwgJ3NjZW5lJywgJ2luc3RhbmNlX2tpbmVtYXRpY3Nfc2NlbmUnLCBwYXJzZUtpbmVtYXRpY3NTY2VuZSApO1xuICAgIFxuICAgICAgICAgICAgY29uc29sZS50aW1lRW5kKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogUGFyc2UnICk7XG4gICAgXG4gICAgICAgICAgICBjb25zb2xlLnRpbWUoICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBCdWlsZCcgKTtcbiAgICBcbiAgICAgICAgICAgIGJ1aWxkTGlicmFyeSggbGlicmFyeS5hbmltYXRpb25zLCBidWlsZEFuaW1hdGlvbiApO1xuICAgICAgICAgICAgYnVpbGRMaWJyYXJ5KCBsaWJyYXJ5LmNsaXBzLCBidWlsZEFuaW1hdGlvbkNsaXAgKTtcbiAgICAgICAgICAgIGJ1aWxkTGlicmFyeSggbGlicmFyeS5jb250cm9sbGVycywgYnVpbGRDb250cm9sbGVyICk7XG4gICAgICAgICAgICBidWlsZExpYnJhcnkoIGxpYnJhcnkuaW1hZ2VzLCBidWlsZEltYWdlICk7XG4gICAgICAgICAgICBidWlsZExpYnJhcnkoIGxpYnJhcnkuZWZmZWN0cywgYnVpbGRFZmZlY3QgKTtcbiAgICAgICAgICAgIGJ1aWxkTGlicmFyeSggbGlicmFyeS5tYXRlcmlhbHMsIGJ1aWxkTWF0ZXJpYWwgKTtcbiAgICAgICAgICAgIGJ1aWxkTGlicmFyeSggbGlicmFyeS5jYW1lcmFzLCBidWlsZENhbWVyYSApO1xuICAgICAgICAgICAgYnVpbGRMaWJyYXJ5KCBsaWJyYXJ5LmxpZ2h0cywgYnVpbGRMaWdodCApO1xuICAgICAgICAgICAgYnVpbGRMaWJyYXJ5KCBsaWJyYXJ5Lmdlb21ldHJpZXMsIGJ1aWxkR2VvbWV0cnkgKTtcbiAgICAgICAgICAgIGJ1aWxkTGlicmFyeSggbGlicmFyeS52aXN1YWxTY2VuZXMsIGJ1aWxkVmlzdWFsU2NlbmUgKTtcbiAgICBcbiAgICAgICAgICAgIGNvbnNvbGUudGltZUVuZCggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IEJ1aWxkJyApO1xuICAgIFxuICAgICAgICAgICAgc2V0dXBBbmltYXRpb25zKCk7XG4gICAgICAgICAgICBzZXR1cEtpbmVtYXRpY3MoKTtcbiAgICBcbiAgICAgICAgICAgIHZhciBzY2VuZSA9IHBhcnNlU2NlbmUoIGdldEVsZW1lbnRzQnlUYWdOYW1lKCBjb2xsYWRhLCAnc2NlbmUnIClbIDAgXSApO1xuICAgIFxuICAgICAgICAgICAgaWYgKCBhc3NldC51cEF4aXMgPT09ICdaX1VQJyApIHtcbiAgICBcbiAgICAgICAgICAgICAgICBzY2VuZS5yb3RhdGlvbi54ID0gLSBNYXRoLlBJIC8gMjtcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHNjZW5lLnNjYWxlLm11bHRpcGx5U2NhbGFyKCBhc3NldC51bml0ICk7XG4gICAgXG4gICAgICAgICAgICBjb25zb2xlLnRpbWVFbmQoICdUSFJFRS5Db2xsYWRhTG9hZGVyJyApO1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb25zOiBhbmltYXRpb25zLFxuICAgICAgICAgICAgICAgIGtpbmVtYXRpY3M6IGtpbmVtYXRpY3MsXG4gICAgICAgICAgICAgICAgbGlicmFyeTogbGlicmFyeSxcbiAgICAgICAgICAgICAgICBzY2VuZTogc2NlbmVcbiAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgIH1cbiAgICBcbiAgICB9OyIsIntCYXNlQ2xhc3N9ID0gcmVxdWlyZSAnLi9fQmFzZUNsYXNzLmNvZmZlZSdcblxuYWNjZXB0ZWRNb2RlbFByb3BlcnRpZXMgPSBbXG4gICAgJ3gnXG4gICAgJ3knXG4gICAgJ3onXG4gICAgJ3JvdGF0aW9uWCdcbiAgICAncm90YXRpb25ZJ1xuICAgICdyb3RhdGlvblonXG4gICAgJ3NjYWxlJ1xuICAgICdzY2FsZVgnXG4gICAgJ3NjYWxlWSdcbiAgICAnc2NhbGVaJ1xuICAgICdvcHRpb25zJ1xuXVxuXG5yZXNlcnZlZFN0YXRlRXJyb3IgPSAobmFtZSkgLT5cblx0dGhyb3cgRXJyb3IoXCJUaGUgc3RhdGUgJyN7bmFtZX0nIGlzIGEgcmVzZXJ2ZWQgbmFtZS5cIilcblxuY2xhc3MgZXhwb3J0cy5TdGF0ZXMgZXh0ZW5kcyBCYXNlQ2xhc3NcblxuICAgIGNvbnN0cnVjdG9yOiAobW9kZWwpIC0+XG4gICAgICAgIHN1cGVyKClcblxuICAgICAgICBAbW9kZWwgPSBtb2RlbFxuXG4gICAgICAgIEBpbml0aWFsTW9kZWxQcm9wZXJ0aWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgT2JqZWN0LmdldFByb3RvdHlwZU9mIEBtb2RlbC5pbml0aWFsUHJvcGVydGllc1xuXG4gICAgICAgIEBzdGF0ZXMgPSBcbiAgICAgICAgICAgIGRlZmF1bHQ6IEBmaWx0ZXJQcm9wZXJ0aWVzIEBpbml0aWFsTW9kZWxQcm9wZXJ0aWVzXG4gICAgICAgICAgICBjdXJyZW50OiBAZmlsdGVyUHJvcGVydGllcyBAaW5pdGlhbE1vZGVsUHJvcGVydGllc1xuXG4gICAgZmlsdGVyUHJvcGVydGllczogKHByb3BldGllcykgLT5cbiAgICAgICAgbmV3UHJvcGVydHlPYmogPSB7fVxuICAgICAgICBwcm9wZXRpZXMubWFwIChrKSA9PlxuICAgICAgICAgICAgaWYgYWNjZXB0ZWRNb2RlbFByb3BlcnRpZXMuaW5jbHVkZXMga1xuICAgICAgICAgICAgICAgIG5ld1Byb3BlcnR5T2JqW2tdID0gQG1vZGVsW2tdXG4gICAgICAgIHJldHVybiBuZXdQcm9wZXJ0eU9ialxuICAgIFxuICAgIEBkZWZpbmUgJ2N1cnJlbnQnLFxuICAgICAgICBnZXQ6IC0+IEBzdGF0ZXMuY3VycmVudCxcbiAgICAgICAgc2V0OiAoc3RhdGUpIC0+XG4gICAgICAgICAgICBAc3RhdGVzLnByZXZpb3VzID0gQHN0YXRlcy5jdXJyZW50XG4gICAgICAgICAgICBAc3RhdGVzLmN1cnJlbnQgPSBzdGF0ZVxuICAgIFxuICAgIEBkZWZpbmUgJ3ByZXZpb3VzJyxcbiAgICAgICAgZ2V0OiAtPiBAc3RhdGVzLnByZXZpb3VzIiwiXyA9IEZyYW1lci5fXG5cbnJlcXVpcmUgJy4vbGliL09yYml0Q29udHJvbHMnXG57QmFzZUNsYXNzfSA9IHJlcXVpcmUgJy4vX0Jhc2VDbGFzcy5jb2ZmZWUnXG57QW5pbWF0aW9ufSA9IHJlcXVpcmUgJy4vX0FuaW1hdGlvbi5jb2ZmZWUnXG57U3RhdGVzfSA9IHJlcXVpcmUgJy4vX1N0YXRlcy5jb2ZmZWUnXG5cbmNsYXNzIGV4cG9ydHMuQ2FtZXJhIGV4dGVuZHMgQmFzZUNsYXNzXG4gICAgY29uc3RydWN0b3I6IChwcm9wZXJ0aWVzPXt9LCBzY2VuZURPTSkgLT5cbiAgICAgICAgc3VwZXIoKVxuXG4gICAgICAgIEBzY2VuZURPTSA9IHNjZW5lRE9NXG5cbiAgICAgICAgXy5kZWZhdWx0cyBwcm9wZXJ0aWVzLFxuICAgICAgICAgICAgeDogMFxuICAgICAgICAgICAgeTogMFxuICAgICAgICAgICAgejogNTAwXG4gICAgICAgICAgICByb3RhdGlvblg6IDBcbiAgICAgICAgICAgIHJvdGF0aW9uWTogMFxuICAgICAgICAgICAgcm90YXRpb25aOiAwXG4gICAgICAgICAgICBmb3Y6IDM1XG4gICAgICAgICAgICBuZWFyOiAwLjFcbiAgICAgICAgICAgIGZhcjogMTAwMDBcbiAgICAgICAgICAgIGVuYWJsZVBhbjogZmFsc2VcbiAgICAgICAgICAgIGVuYWJsZVpvb206IGZhbHNlXG4gICAgICAgICAgICBlbmFibGVSb3RhdGU6IGZhbHNlXG4gICAgICAgICAgICBhdXRvUm90YXRlOiBmYWxzZVxuICAgICAgICAgICAgYXV0b1JvdGF0ZVNwZWVkOiAxMFxuICAgICAgICAgICAgdGFyZ2V0OiBuZXcgVEhSRUUuVmVjdG9yMyAwLCAwLCAwXG5cbiAgICAgICAgQG5hdGl2ZUNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYShcbiAgICAgICAgICAgIHByb3BlcnRpZXMuZm92LCBcbiAgICAgICAgICAgIHByb3BlcnRpZXMuYXNwZWN0LCBcbiAgICAgICAgICAgIHByb3BlcnRpZXMubmVhciwgXG4gICAgICAgICAgICBwcm9wZXJ0aWVzLmZhclxuICAgICAgICApXG5cbiAgICAgICAgaWYgcHJvcGVydGllcy5vcmJpdENvbnRyb2xzXG4gICAgICAgICAgICBAc2V0dXBPcmJpdENvbnRyb2xzIHByb3BlcnRpZXNcblxuICAgICAgICBAc2V0UG9zaXRpb24gW3Byb3BlcnRpZXMueCwgcHJvcGVydGllcy55LCBwcm9wZXJ0aWVzLnpdXG4gICAgICAgIEBzZXRSb3RhdGlvbiBbcHJvcGVydGllcy5yb3RhdGlvblgsIHByb3BlcnRpZXMucm90YXRpb25ZLCBwcm9wZXJ0aWVzLnJvdGF0aW9uWl1cblxuICAgICAgICBAc2F2ZUluaXRpYWxQcm9wZXJ0aWVzKClcblxuICAgICAgICBAX3N0YXRlcyA9IG5ldyBTdGF0ZXMgQFxuICAgIFxuICAgIHNldHVwT3JiaXRDb250cm9sczogKHByb3BlcnRpZXMpIC0+XG4gICAgICAgIEBjb250cm9scyA9IG5ldyBUSFJFRS5PcmJpdENvbnRyb2xzIEBuYXRpdmVDYW1lcmEsIEBzY2VuZURPTVxuICAgICAgICBAZW5hYmxlUGFuID0gcHJvcGVydGllcy5lbmFibGVQYW5cbiAgICAgICAgQGVuYWJsZVpvb20gPSBwcm9wZXJ0aWVzLmVuYWJsZVpvb21cbiAgICAgICAgQGVuYWJsZVJvdGF0ZSA9IHByb3BlcnRpZXMuZW5hYmxlUm90YXRlXG4gICAgICAgIEBhdXRvUm90YXRlID0gcHJvcGVydGllcy5hdXRvUm90YXRlXG4gICAgICAgIEBhdXRvUm90YXRlU3BlZWQgPSBwcm9wZXJ0aWVzLmF1dG9Sb3RhdGVTcGVlZFxuICAgICAgICBAdGFyZ2V0ID0gcHJvcGVydGllcy50YXJnZXRcblxuICAgIHNhdmVJbml0aWFsUHJvcGVydGllczogKCkgLT5cbiAgICAgICAgQGluaXRpYWxQcm9wZXJ0aWVzID0gQFxuXG4gICAgb246IChldmVudE5hbWUsIGNiKSAtPlxuXG4gICAgICAgIGlmIGV2ZW50TmFtZS5pbmNsdWRlcyAnY2hhbmdlJ1xuICAgICAgICAgICAgY2FsbGJhY2sgPSAoZSkgLT4gY2IoZS52YWx1ZSlcbiAgICAgICAgICAgIEBuYXRpdmVDYW1lcmEuYWRkRXZlbnRMaXN0ZW5lciBldmVudE5hbWUsIGNhbGxiYWNrXG5cbiAgICAgICAgICAgIEZyYW1lci5DdXJyZW50Q29udGV4dC5vbiAncmVzZXQnLCA9PlxuICAgICAgICAgICAgICAgIEBuYXRpdmVDYW1lcmEucmVtb3ZlRXZlbnRMaXN0ZW5lciBldmVudE5hbWUsIGNhbGxiYWNrXG5cbiAgICBzZXRQb3NpdGlvbjogKHBvc2l0aW9ucykgLT5cbiAgICAgICAgQHggPSBwb3NpdGlvbnNbMF1cbiAgICAgICAgQHkgPSBwb3NpdGlvbnNbMV1cbiAgICAgICAgQHogPSBwb3NpdGlvbnNbMl1cbiAgICBcbiAgICBzZXRSb3RhdGlvbjogKHJvdGF0aW9ucykgLT5cbiAgICAgICAgQHJvdGF0aW9uWCA9IHJvdGF0aW9uc1swXVxuICAgICAgICBAcm90YXRpb25ZID0gcm90YXRpb25zWzFdXG4gICAgICAgIEByb3RhdGlvblogPSByb3RhdGlvbnNbMl1cbiAgICBcbiAgICBhbmltYXRlOiAocHJvcGVydGllcykgLT5cbiAgICAgICAgbmV3IEFuaW1hdGlvbiBALCBwcm9wZXJ0aWVzXG4gICAgXG4gICAgbG9va0F0OiAoYSwgYiwgYykgLT5cbiAgICAgICAgaWYgYXJndW1lbnRzLmxlbmd0aCA9PSAxXG4gICAgICAgICAgICBAbmF0aXZlQ2FtZXJhLmxvb2tBdCBhXG4gICAgICAgIGVsc2UgaWYgYXJndW1lbnRzLmxlbmd0aCA9PSAzXG4gICAgICAgICAgICBAbmF0aXZlQ2FtZXJhLmxvb2tBdCBhLCBiLCBjXG4gICAgXG4gICAgc3RhdGVTd2l0Y2g6IChzdGF0ZSkgLT5cbiAgICAgICAgIyBMb29wIHRocm91Z2ggc3RhdGVzIG9uIG1vZGVsIHRvIGZpbmQgdGhlIHNwZWNpZmllZCBvbmVcbiAgICAgICAgT2JqZWN0LmtleXMoQHN0YXRlcykubWFwIChrKSA9PiBcbiAgICAgICAgICAgIGlmIGsgPT0gc3RhdGVcbiAgICAgICAgICAgICAgICBAc3RhdGVzLmN1cnJlbnQgPSBAc3RhdGVzW2tdXG5cbiAgICAgICAgICAgICAgICAjIExvb3AgdGhyb3VnaCBwcm9wZXJ0eSBrZXlzIG9uIHRoZSBzdGF0ZSBhbmQgYXBwbHkgdGhlIHZhbHVlcyB0byBtb2RlbFxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKEBzdGF0ZXMuY3VycmVudCkubWFwIChwaykgID0+XG4gICAgICAgICAgICAgICAgICAgIEBbcGtdID0gQHN0YXRlcy5jdXJyZW50W3BrXVxuICAgIFxuICAgIHN0YXRlQ3ljbGU6IChzdGF0ZUEsIHN0YXRlQikgLT5cbiAgICAgICAgIyBDaGVjayBpZiBzdGF0ZUEgb3Igc3RhdGVCIGFscmVhZHkgaXMgdGhlIGN1cnJlbnQgc3RhdGUgb24gbW9kZWxcbiAgICAgICAgaWYgQHN0YXRlcy5jdXJyZW50ID09IEBzdGF0ZXNbc3RhdGVBXSB8fCBAc3RhdGVzLmN1cnJlbnQgPT0gQHN0YXRlc1tzdGF0ZUJdXG4gICAgICAgICAgICBpZiBAc3RhdGVzLmN1cnJlbnQgPT0gQHN0YXRlc1tzdGF0ZUFdIHRoZW4gQGFuaW1hdGUgc3RhdGVCXG4gICAgICAgICAgICBlbHNlIGlmIEBzdGF0ZXMuY3VycmVudCA9PSBAc3RhdGVzW3N0YXRlQl0gdGhlbiBAYW5pbWF0ZSBzdGF0ZUFcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgIyBJZiBuZWl0aGVyIGFyZSBjdXJyZW50LCBhbmltYXRlIHRvIHN0YXRlQVxuICAgICAgICAgICAgQGFuaW1hdGUgc3RhdGVBXG5cbiAgICBAZGVmaW5lICdwb3NpdGlvbicsXG4gICAgICAgIGdldDogLT4gQG5hdGl2ZUNhbWVyYS5wb3NpdGlvblxuICAgIFxuICAgIEBkZWZpbmUgJ3gnLFxuICAgICAgICBnZXQ6IC0+IEBuYXRpdmVDYW1lcmEucG9zaXRpb24ueFxuICAgICAgICBzZXQ6ICh4KSAtPiBcbiAgICAgICAgICAgIEBuYXRpdmVDYW1lcmEucG9zaXRpb24ueCA9IHhcbiAgICAgICAgICAgIEBjb250cm9scy51cGRhdGUoKSBpZiBAY29udHJvbHNcbiAgICAgICAgICAgIEBuYXRpdmVDYW1lcmEuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTp4JywgdmFsdWU6IEB4fVxuICAgIFxuICAgIEBkZWZpbmUgJ3knLFxuICAgICAgICBnZXQ6IC0+IEBuYXRpdmVDYW1lcmEucG9zaXRpb24ueVxuICAgICAgICBzZXQ6ICh5KSAtPiBcbiAgICAgICAgICAgIEBuYXRpdmVDYW1lcmEucG9zaXRpb24ueSA9IHlcbiAgICAgICAgICAgIEBjb250cm9scy51cGRhdGUoKSBpZiBAY29udHJvbHNcbiAgICAgICAgICAgIEBuYXRpdmVDYW1lcmEuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTp5JywgdmFsdWU6IEB5fVxuICAgIFxuICAgIEBkZWZpbmUgJ3onLFxuICAgICAgICBnZXQ6IC0+IEBuYXRpdmVDYW1lcmEucG9zaXRpb24uelxuICAgICAgICBzZXQ6ICh6KSAtPiBcbiAgICAgICAgICAgIEBuYXRpdmVDYW1lcmEucG9zaXRpb24ueiA9IHpcbiAgICAgICAgICAgIEBjb250cm9scy51cGRhdGUoKSBpZiBAY29udHJvbHNcbiAgICAgICAgICAgIEBuYXRpdmVDYW1lcmEuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTp6JywgdmFsdWU6IEB6fVxuXG4gICAgQGRlZmluZSAncm90YXRpb24nLFxuICAgICAgICBnZXQ6IC0+IEBuYXRpdmVDYW1lcmEucm90YXRpb25cbiAgICBcbiAgICBAZGVmaW5lICdyb3RhdGlvblgnLFxuICAgICAgICBnZXQ6IC0+IFRIUkVFLk1hdGgucmFkVG9EZWcgQG5hdGl2ZUNhbWVyYS5yb3RhdGlvbi54XG4gICAgICAgIHNldDogKHgpIC0+IFxuICAgICAgICAgICAgQG5hdGl2ZUNhbWVyYS5yb3RhdGlvbi54ID0gVEhSRUUuTWF0aC5kZWdUb1JhZCB4XG4gICAgICAgICAgICBAY29udHJvbHMudXBkYXRlKCkgaWYgQGNvbnRyb2xzXG4gICAgICAgICAgICBAbmF0aXZlQ2FtZXJhLmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6cm90YXRpb25YJywgdmFsdWU6IEByb3RhdGlvblh9XG4gICAgXG4gICAgQGRlZmluZSAncm90YXRpb25ZJyxcbiAgICAgICAgZ2V0OiAtPiBUSFJFRS5NYXRoLnJhZFRvRGVnIEBuYXRpdmVDYW1lcmEucm90YXRpb24ueVxuICAgICAgICBzZXQ6ICh5KSAtPiBcbiAgICAgICAgICAgIEBuYXRpdmVDYW1lcmEucm90YXRpb24ueSA9IFRIUkVFLk1hdGguZGVnVG9SYWQgeVxuICAgICAgICAgICAgQGNvbnRyb2xzLnVwZGF0ZSgpIGlmIEBjb250cm9sc1xuICAgICAgICAgICAgQG5hdGl2ZUNhbWVyYS5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOnJvdGF0aW9uWScsIHZhbHVlOiBAcm90YXRpb25ZfVxuICAgIFxuICAgIEBkZWZpbmUgJ3JvdGF0aW9uWicsXG4gICAgICAgIGdldDogLT4gVEhSRUUuTWF0aC5yYWRUb0RlZyBAbmF0aXZlQ2FtZXJhLnJvdGF0aW9uLnpcbiAgICAgICAgc2V0OiAoeikgLT4gXG4gICAgICAgICAgICBAbmF0aXZlQ2FtZXJhLnJvdGF0aW9uLnogPSBUSFJFRS5NYXRoLmRlZ1RvUmFkIHpcbiAgICAgICAgICAgIEBjb250cm9scy51cGRhdGUoKSBpZiBAY29udHJvbHNcbiAgICAgICAgICAgIEBuYXRpdmVDYW1lcmEuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTpyb3RhdGlvblonLCB2YWx1ZTogQHJvdGF0aW9uWn1cbiAgICBcbiAgICBAZGVmaW5lICdmb3YnLFxuICAgICAgICBnZXQ6IC0+IEBuYXRpdmVDYW1lcmEuZm92XG4gICAgICAgIHNldDogKGZvdikgLT4gXG4gICAgICAgICAgICBAbmF0aXZlQ2FtZXJhLmZvdiA9IGZvdlxuICAgICAgICAgICAgQG5hdGl2ZUNhbWVyYS5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOmZvdicsIHZhbHVlOiBAZm92fVxuICAgIFxuICAgIEBkZWZpbmUgJ3pvb20nLFxuICAgICAgICBnZXQ6IC0+IEBuYXRpdmVDYW1lcmEuem9vbVxuICAgICAgICBzZXQ6IChmYWN0b3IpIC0+IFxuICAgICAgICAgICAgQG5hdGl2ZUNhbWVyYS56b29tID0gZmFjdG9yXG4gICAgICAgICAgICBAbmF0aXZlQ2FtZXJhLmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6em9vbScsIHZhbHVlOiBAem9vbX1cbiAgICBcbiAgICBAZGVmaW5lICduZWFyJyxcbiAgICAgICAgZ2V0OiAtPiBAbmF0aXZlQ2FtZXJhLm5lYXJcbiAgICAgICAgc2V0OiAobmVhcikgLT4gXG4gICAgICAgICAgICBAbmF0aXZlQ2FtZXJhLm5lYXIgPSBuZWFyXG4gICAgICAgICAgICBAbmF0aXZlQ2FtZXJhLmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6bmVhcicsIHZhbHVlOiBAbmVhcn1cbiAgICBcbiAgICBAZGVmaW5lICdmYXInLFxuICAgICAgICBnZXQ6IC0+IEBuYXRpdmVDYW1lcmEuZmFyXG4gICAgICAgIHNldDogKGZhcikgLT4gXG4gICAgICAgICAgICBAbmF0aXZlQ2FtZXJhLmZhciA9IGZhclxuICAgICAgICAgICAgQG5hdGl2ZUNhbWVyYS5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOmZhcicsIHZhbHVlOiBAZmFyfVxuICAgIFxuICAgIEBkZWZpbmUgJ2FzcGVjdCcsXG4gICAgICAgIGdldDogLT4gQG5hdGl2ZUNhbWVyYS5hc3BlY3RcbiAgICAgICAgc2V0OiAoYXNwZWN0KSAtPiBcbiAgICAgICAgICAgIEBuYXRpdmVDYW1lcmEuYXNwZWN0ID0gYXNwZWN0XG4gICAgICAgICAgICBAbmF0aXZlQ2FtZXJhLmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6YXNwZWN0JywgdmFsdWU6IEBhc3BlY3R9XG4gICAgXG4gICAgQGRlZmluZSAnc3RhdGVzJyxcbiAgICAgICAgZ2V0OiAtPlxuICAgICAgICAgICAgQF9zdGF0ZXMuc3RhdGVzXG4gICAgICAgIHNldDogKHN0YXRlcykgLT5cbiAgICAgICAgICAgIF8uZXh0ZW5kIEBzdGF0ZXMsIHN0YXRlc1xuXG4gICAgQGRlZmluZSAnZW5hYmxlUGFuJyxcbiAgICAgICAgZ2V0OiAtPiBAY29udHJvbHMuZW5hYmxlUGFuXG4gICAgICAgIHNldDogKGJvb2wpIC0+XG4gICAgICAgICAgICBAY29udHJvbHMuZW5hYmxlUGFuID0gYm9vbFxuICAgICAgICAgICAgQG5hdGl2ZUNhbWVyYS5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOmVuYWJsZVBhbicsIHZhbHVlOiBAZW5hYmxlUGFufVxuICAgIFxuICAgIEBkZWZpbmUgJ2VuYWJsZVpvb20nLFxuICAgICAgICBnZXQ6IC0+IEBjb250cm9scy5lbmFibGVab29tXG4gICAgICAgIHNldDogKGJvb2wpIC0+IFxuICAgICAgICAgICAgQGNvbnRyb2xzLmVuYWJsZVpvb20gPSBib29sXG4gICAgICAgICAgICBAbmF0aXZlQ2FtZXJhLmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6ZW5hYmxlWm9vbScsIHZhbHVlOiBAZW5hYmxlWm9vbX1cbiAgICBcbiAgICBAZGVmaW5lICdlbmFibGVSb3RhdGUnLFxuICAgICAgICBnZXQ6IC0+IEBjb250cm9scy5lbmFibGVSb3RhdGVcbiAgICAgICAgc2V0OiAoYm9vbCkgLT4gXG4gICAgICAgICAgICBAY29udHJvbHMuZW5hYmxlUm90YXRlID0gYm9vbFxuICAgICAgICAgICAgQG5hdGl2ZUNhbWVyYS5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOmVuYWJsZVJvdGF0ZScsIHZhbHVlOiBAZW5hYmxlUm90YXRlfVxuICAgIFxuICAgIEBkZWZpbmUgJ2F1dG9Sb3RhdGUnLFxuICAgICAgICBnZXQ6IC0+IEBjb250cm9scy5hdXRvUm90YXRlXG4gICAgICAgIHNldDogKGJvb2wpIC0+IFxuICAgICAgICAgICAgQGNvbnRyb2xzLmF1dG9Sb3RhdGUgPSBib29sXG4gICAgICAgICAgICBAbmF0aXZlQ2FtZXJhLmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6YXV0b1JvdGF0ZScsIHZhbHVlOiBAYXV0b1JvdGF0ZX1cbiAgICBcbiAgICBAZGVmaW5lICdhdXRvUm90YXRlU3BlZWQnLFxuICAgICAgICBnZXQ6IC0+IEBjb250cm9scy5hdXRvUm90YXRlU3BlZWRcbiAgICAgICAgc2V0OiAoc3BlZWQpIC0+IFxuICAgICAgICAgICAgQGNvbnRyb2xzLmF1dG9Sb3RhdGVTcGVlZCA9IHNwZWVkXG4gICAgICAgICAgICBAbmF0aXZlQ2FtZXJhLmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6YXV0b1JvdGF0ZVNwZWVkJywgdmFsdWU6IEBhdXRvUm90YXRlU3BlZWR9XG4gICAgXG4gICAgQGRlZmluZSAndGFyZ2V0JyxcbiAgICAgICAgZ2V0OiAtPiBAY29udHJvbHMudGFyZ2V0XG4gICAgICAgIHNldDogKHZlY3RvcjMpIC0+IFxuICAgICAgICAgICAgQGNvbnRyb2xzLnRhcmdldCA9IHZlY3RvcjNcbiAgICAgICAgICAgIEBuYXRpdmVDYW1lcmEuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTp0YXJnZXQnLCB2YWx1ZTogQHRhcmdldH0iLCJjbGFzcyBleHBvcnRzLkJhc2VDbGFzc1xuXG4gICAgQGRlZmluZSA9IChwcm9wZXJ0eU5hbWUsIGRlc2NyaXB0b3IpIC0+XG4gICAgICAgIGlmIGRlc2NyaXB0b3IucmVhZG9ubHlcbiAgICAgICAgICAgIGRlc2NyaXB0b3Iuc2V0ID0gKHZhbHVlKSAtPlxuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKFwiI3tAY29uc3RydWN0b3IubmFtZX0uI3twcm9wZXJ0eU5hbWV9IGlzIHJlYWRvbmx5XCIpXG5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEBwcm90b3R5cGUsIHByb3BlcnR5TmFtZSwgZGVzY3JpcHRvcikiLCJfID0gRnJhbWVyLl9cblxue01vZGVsfSA9IHJlcXVpcmUgJy4vTW9kZWwuY29mZmVlJ1xuXG5jbGFzcyBleHBvcnRzLkFuaW1hdGlvbiBleHRlbmRzIEZyYW1lci5FdmVudEVtaXR0ZXJcbiAgICBjb25zdHJ1Y3RvcjogKG1vZGVsLCBwcm9wZXJ0aWVzPXt9KSAtPlxuICAgICAgICBzdXBlcigpXG4gICAgICAgIFxuICAgICAgICBpZiAhcHJvcGVydGllc1xuICAgICAgICAgICAgICAgIHRocm93IEVycm9yICdQbGVhc2Ugc3BlY2lmeSBwcm9wZXJ0aWVzIG9yIGEgc3RhdGUgdG8gYW5pbWF0ZSEnXG4gICAgICAgICAgICBcbiAgICAgICAgIyBJZiBwcm9wZXJ0aWVzIGlzIGEgc3RyaW5nLCB0aGVuIGl0IGlzIGEgU3RhdGUgTmFtZVxuICAgICAgICBpZiBfLmlzU3RyaW5nIHByb3BlcnRpZXNcbiAgICAgICAgICAgIHN0YXRlTmFtZSA9IHByb3BlcnRpZXNcblxuICAgICAgICAgICAgIyBMb29wIHRocm91Z2ggc3RhdGVzIG9uIG1vZGVsIHRvIGZpbmQgdGhlIHNwZWNpZmllZCBzdGF0ZVxuICAgICAgICAgICAgT2JqZWN0LmtleXMobW9kZWwuc3RhdGVzKS5tYXAgKGspID0+IFxuICAgICAgICAgICAgICAgIGlmIGsgPT0gc3RhdGVOYW1lXG4gICAgICAgICAgICAgICAgICAgICMgU2V0IGN1cnJlbnQgc3RhdGUgdG8gc3BlY2lmaWVkIHN0YXRlIGFuZCBhcHBseSBzdGF0ZSBwcm9wZXJ0aWVzIHRvIHByb3BlcnRpZXMgdmFyaWFibGVcbiAgICAgICAgICAgICAgICAgICAgbW9kZWwuc3RhdGVzLmN1cnJlbnQgPSBtb2RlbC5zdGF0ZXNba11cbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllcyA9IG1vZGVsLnN0YXRlc1tzdGF0ZU5hbWVdXG5cbiAgICAgICAgQHByb3BlcnRpZXMgPSBAZmlsdGVyUHJvcGVydGllcyBwcm9wZXJ0aWVzXG4gICAgICAgIEBvcHRpb25zID0gXy5kZWZhdWx0cyBwcm9wZXJ0aWVzLm9wdGlvbnMsIFxuICAgICAgICAgICAgdGltZTogMVxuICAgICAgICAgICAgZGVsYXk6IDBcbiAgICAgICAgICAgIGN1cnZlOiAnbGluZWFyJ1xuXG4gICAgICAgICMgRGVsYXkgdGhlIGxvb3AgaWYgc3BlY2lmaWVkLCBvdGhlcndpc2UgMHNcbiAgICAgICAgVXRpbHMuZGVsYXkgQG9wdGlvbnMuZGVsYXksID0+XG5cbiAgICAgICAgICAgIEBtb2RlbCA9IG1vZGVsXG4gICAgICAgICAgICBAbWVzaCA9IG1vZGVsLm1lc2ggfHwgbW9kZWwubGlnaHQgfHwgbW9kZWwubmF0aXZlQ2FtZXJhXG4gICAgICAgICAgICBAZnBzID0gNjBcbiAgICAgICAgICAgIEB0aW1lID0gQG9wdGlvbnMudGltZVxuICAgICAgICAgICAgQHJlbmRlcmVkRnJhbWVzID0gMFxuICAgICAgICAgICAgQHRvdGFsRnJhbWVzID0gQHRpbWUgKiBAZnBzXG4gICAgICAgICAgICBAbW9kZWxQcm9wZXJ0eUluaXRpYWxWYWx1ZXMgPSB7fVxuICAgICAgICAgICAgQGRlbHRhcyA9IEBjYWxjdWxhdGVEZWx0YXMoKVxuXG5cbiAgICAgICAgICAgICMgSWYgdGhlcmUgYXJlIGRpZmZlcmVuY2VzIGJldHdlZW4gYW5pbWF0aW9uIHByb3BlcnR5IHZhbHVlcyBhbmQgdGhlIG1vZGVsJ3MgY3VycmVudCBwcm9wZXJ0eSB2YWx1ZXMgKERlbHRhKVxuICAgICAgICAgICAgaWYgQGRlbHRhcy5sZW5ndGhcbiAgICAgICAgICAgICAgICAjIENyZWF0ZSBhbiBpbnRlcnZhbCB0aGF0IHJ1bnMgZXZlcnkgNjAgc2Vjb25kc1xuICAgICAgICAgICAgICAgIEBpbnRlcnZhbERpc3Bvc2VyID0gc2V0SW50ZXJ2YWwgKCkgPT4gXG4gICAgICAgICAgICAgICAgICAgICMgQ2hlY2sgaWYgdGhlIGFtb3VudCBvZiByZW5kZXJlZCBmcmFtZXMgZXhjZWVkcyBhbW91bnQgb2YgdG90YWwgZnJhbWVzIHRoYXQgdGhlIGFuaW10aW9uIGlzIHN1cHBvc2VkIHRvIHJ1biBmb3JcbiAgICAgICAgICAgICAgICAgICAgaWYgQHJlbmRlcmVkRnJhbWVzID49IEB0b3RhbEZyYW1lc1xuICAgICAgICAgICAgICAgICAgICAgICAgIyBJZiBpdCBleGNlZWRzLCBkaXNwb3NlL2VuZCB0aGUgYW5pbWF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQGRpc3Bvc2VJbnRlcnZhbFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgIyBFbHNlIGtlZXAgdGhlIGxvb3AgZ29pbmdcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIEBhbmltYXRpb25Mb29wXG4gICAgICAgICAgICAgICAgICAgIEByZW5kZXJlZEZyYW1lcysrXG4gICAgICAgICAgICAgICAgLCAxMDAwIC8gQGZwc1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAjIE1ha2Ugc3VyZSB0byBkaXNwb3NlIG91ciBhbmltYXRpb24gbG9vcCBpZiBGcmFtZXIncyBDdXJyZW50Q29udGV4dCByZXNldHNcbiAgICAgICAgICAgICMgT3RoZXJ3aXNlIHdlJ2xsIGxlYWsgbG9hZHMgb2YgbWVtb3J5XG4gICAgICAgICAgICBGcmFtZXIuQ3VycmVudENvbnRleHQub24gJ3Jlc2V0JywgPT5cbiAgICAgICAgICAgICAgICBpZiBAaW50ZXJ2YWxEaXNwb3NlclxuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsIEBpbnRlcnZhbERpc3Bvc2VyXG5cbiAgICBmaWx0ZXJQcm9wZXJ0aWVzOiAocHJvcGVydGllcykgLT5cbiAgICAgICAgcHJvcHMgPSBPYmplY3QuYXNzaWduIHt9LCBwcm9wZXJ0aWVzXG4gICAgICAgIGRlbGV0ZSBwcm9wcy5vcHRpb25zXG4gICAgICAgIHByb3BzXG5cbiAgICBjYWxjdWxhdGVEZWx0YXM6ICgpIC0+XG4gICAgICAgICMgTG9vcCB0aHJvdWdoIGFsbCBwcm9wZXJ0aWVzIGFuZCBjYWxjdWxhdGUgdGhlIGRlbHRhIGJldHdlZW4gY3VycmVudCBtb2RlbCBwcm9wZXJ0eSB2YWx1ZSBhbmRcbiAgICAgICAgIyB0aGUgdmFsdWUgc3BlY2lmaWVkIGluIHRoaXMgYW5pbWF0aW9uXG4gICAgICAgICMgVGhpcyBmdW5jdGlvbiByZXR1cm5zIGFuIGFycmF5IG9mIGtleS92YWx1ZSBwYWlycyB0aGF0IGNvbnRhaW5zIHRoZSB2YWx1ZSAoRGVsdGEpIHRvIGFuaW1hdGUgZm9yIGV2ZXJ5IHByb3BlcnR5XG5cbiAgICAgICAgZGVsdGFzID0gT2JqZWN0LmtleXMoQHByb3BlcnRpZXMpLm1hcCAoaykgPT5cblxuICAgICAgICAgICAgQG1vZGVsUHJvcGVydHlJbml0aWFsVmFsdWVzW2tdID0gQG1vZGVsW2tdXG5cbiAgICAgICAgICAgIG5ld09iaiA9IHt9XG4gICAgICAgICAgICBpZiBAbW9kZWxba10gPiBAcHJvcGVydGllc1trXVxuICAgICAgICAgICAgICAgIG5ld09ialtrXSA9IC1NYXRoLmFicyBAbW9kZWxba10gLSBAcHJvcGVydGllc1trXVxuICAgICAgICAgICAgZWxzZSBpZiBAbW9kZWxba10gPCBAcHJvcGVydGllc1trXVxuICAgICAgICAgICAgICAgIG5ld09ialtrXSA9IE1hdGguYWJzIEBtb2RlbFtrXSAtIEBwcm9wZXJ0aWVzW2tdXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbnVsbFxuICAgICAgICAgICAgbmV3T2JqXG5cbiAgICAgICAgZGVsdGFzLmZpbHRlciAoZCkgLT5cbiAgICAgICAgICAgIGRcblxuICAgIGFwcGx5RWFzaW5nOiAodCwgYiwgYywgZCkgLT5cblxuICAgICAgICBpZiBAb3B0aW9ucy5jdXJ2ZS5pbmNsdWRlcyAnZWFzZSdcbiAgICAgICAgICAgIEBbQG9wdGlvbnMuY3VydmVdIHQsIGIsIGMsIGRcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgQGxpbmVhciB0LCBiLCBjLCBkXG5cbiAgICBhbmltYXRpb25Mb29wOiAoKSA9PlxuXG4gICAgICAgIGZvciBkZWx0YSwgaSBpbiBAZGVsdGFzXG5cbiAgICAgICAgICAgIHByb3AgPSBPYmplY3Qua2V5cyhkZWx0YSlbMF1cbiAgICAgICAgICAgIGRlbHRhVmFsdWUgPSBPYmplY3QudmFsdWVzKGRlbHRhKVswXVxuXG4gICAgICAgICAgICBlYXNlZFZhbHVlID0gQGFwcGx5RWFzaW5nKEByZW5kZXJlZEZyYW1lcywgQG1vZGVsUHJvcGVydHlJbml0aWFsVmFsdWVzW3Byb3BdLCBkZWx0YVZhbHVlLCBAdG90YWxGcmFtZXMpXG5cbiAgICAgICAgICAgIEBtb2RlbFtwcm9wXSA9IGVhc2VkVmFsdWVcblxuICAgIGRpc3Bvc2VJbnRlcnZhbDogKCkgLT5cbiAgICAgICAgY2xlYXJJbnRlcnZhbCBAaW50ZXJ2YWxEaXNwb3NlclxuICAgIFxuXG5cblxuICAgIGxpbmVhcjogKHQsIGIsIGMsIGQpIC0+XG4gICAgICAgIGMgKiB0IC8gZCArIGJcblxuICAgIGVhc2VJblF1YWQ6ICh0LCBiLCBjLCBkKSAtPlxuICAgICAgICBjICogKHQgLz0gZCkgKiB0ICsgYlxuXG4gICAgZWFzZU91dFF1YWQ6ICh0LCBiLCBjLCBkKSAtPlxuICAgICAgICAtYyAqICh0IC89IGQpICogKHQgLSAyKSArIGJcblxuICAgIGVhc2VJbk91dFF1YWQ6ICh0LCBiLCBjLCBkKSAtPlxuICAgICAgICBpZiAodCAvPSBkIC8gMikgPCAxXG4gICAgICAgICAgICBjIC8gMiAqIHQgKiB0ICsgYlxuICAgICAgICBlbHNlXG4gICAgICAgICAgICAtYyAvIDIgKiAoKC0tdCkgKiAodCAtIDIpIC0gMSkgKyBiXG5cbiAgICBlYXNlSW5DdWJpYzogKHQsIGIsIGMsIGQpIC0+XG4gICAgICAgIGMgKiAodCAvPSBkKSAqIHQgKiB0ICsgYlxuXG4gICAgZWFzZU91dEN1YmljOiAodCwgYiwgYywgZCkgLT5cbiAgICAgICAgYyAqICgodCA9IHQgLyBkIC0gMSkgKiB0ICogdCArIDEpICsgYlxuXG4gICAgZWFzZUluT3V0Q3ViaWM6ICh0LCBiLCBjLCBkKSAtPlxuICAgICAgICBpZiAodCAvPSBkIC8gMikgPCAxIFxuICAgICAgICAgICAgYyAvIDIgKiB0ICogdCAqIHQgKyBiXG4gICAgICAgIGVsc2UgXG4gICAgICAgICAgICBjIC8gMiAqICgodCAtPSAyKSAqIHQgKiB0ICsgMikgKyBiXG5cbiAgICBlYXNlSW5RdWFydDogKHQsIGIsIGMsIGQpIC0+XG4gICAgICAgIGMgKiAodCAvPSBkKSAqIHQgKiB0ICogdCArIGJcblxuICAgIGVhc2VPdXRRdWFydDogKHQsIGIsIGMsIGQpIC0+XG4gICAgICAgIC1jICogKCh0ID0gdCAvIGQgLSAxKSAqIHQgKiB0ICogdCAtIDEpICsgYlxuXG4gICAgZWFzZUluT3V0UXVhcnQ6ICh0LCBiLCBjLCBkKSAtPlxuICAgICAgICBpZiAodCAvPSBkIC8gMikgPCAxXG4gICAgICAgICAgICBjIC8gMiAqIHQgKiB0ICogdCAqIHQgKyBiXG4gICAgICAgIGVsc2UgXG4gICAgICAgICAgICAtYyAvIDIgKiAoKHQgLT0gMikgKiB0ICogdCAqIHQgLSAyKSArIGJcblxuICAgIGVhc2VJblF1aW50OiAodCwgYiwgYywgZCkgLT5cbiAgICAgICAgYyAqICh0IC89IGQpICogdCAqIHQgKiB0ICogdCArIGJcblxuICAgIGVhc2VPdXRRdWludDogKHQsIGIsIGMsIGQpIC0+XG4gICAgICAgIGMgKiAoKHQgPSB0IC8gZCAtIDEpICogdCAqIHQgKiB0ICogdCArIDEpICsgYlxuXG4gICAgZWFzZUluT3V0UXVpbnQ6ICh0LCBiLCBjLCBkKSAtPlxuICAgICAgICBpZiAodCAvPSBkIC8gMikgPCAxXG4gICAgICAgICAgICBjIC8gMiAqIHQgKiB0ICogdCAqIHQgKiB0ICsgYlxuICAgICAgICBlbHNlIFxuICAgICAgICAgICAgYyAvIDIgKiAoKHQgLT0gMikgKiB0ICogdCAqIHQgKiB0ICsgMikgKyBiXG5cbiAgICBlYXNlSW5TaW5lOiAodCwgYiwgYywgZCkgLT5cbiAgICAgICAgLWMgKiBNYXRoLmNvcyh0IC8gZCAqIChNYXRoLlBJIC8gMikpICsgYyArIGJcblxuICAgIGVhc2VPdXRTaW5lOiAodCwgYiwgYywgZCkgLT5cbiAgICAgICAgYyAqIE1hdGguc2luKHQgLyBkICogKE1hdGguUEkgLyAyKSkgKyBiXG5cbiAgICBlYXNlSW5PdXRTaW5lOiAodCwgYiwgYywgZCkgLT5cbiAgICAgICAgLWMgLyAyICogKE1hdGguY29zKE1hdGguUEkgKiB0IC8gZCkgLSAxKSArIGJcblxuICAgIGVhc2VJbkV4cG86ICh0LCBiLCBjLCBkKSAtPlxuICAgICAgICAodCA9PSAwKSA/IGIgOiBjICogTWF0aC5wb3coMiwgMTAgKiAodCAvIGQgLSAxKSkgKyBiXG5cbiAgICBlYXNlT3V0RXhwbzogKHQsIGIsIGMsIGQpIC0+XG4gICAgICAgICh0ID09IGQpID8gYiArIGMgOiBjICogKC1NYXRoLnBvdygyLCAtMTAgKiB0IC8gZCkgKyAxKSArIGJcblxuICAgIGVhc2VJbk91dEV4cG86ICh0LCBiLCBjLCBkKSAtPlxuICAgICAgICBpZiB0ID09IDBcbiAgICAgICAgICAgIGJcbiAgICAgICAgaWYgdCA9PSBkXG4gICAgICAgICAgICBiICsgY1xuICAgICAgICBpZiAodCAvPSBkIC8gMikgPCAxIFxuICAgICAgICAgICAgYyAvIDIgKiBNYXRoLnBvdygyLCAxMCAqICh0IC0gMSkpICsgYlxuICAgICAgICBlbHNlIFxuICAgICAgICAgICAgYyAvIDIgKiAoLU1hdGgucG93KDIsIC0xMCAqIC0tdCkgKyAyKSArIGJcblxuICAgIGVhc2VJbkNpcmM6ICh0LCBiLCBjLCBkKSAtPlxuICAgICAgICAtYyAqIChNYXRoLnNxcnQoMSAtICh0IC89IGQpICogdCkgLSAxKSArIGJcblxuICAgIGVhc2VPdXRDaXJjOiAodCwgYiwgYywgZCkgLT5cbiAgICAgICAgYyAqIE1hdGguc3FydCgxIC0gKHQgPSB0IC8gZCAtIDEpICogdCkgKyBiXG5cbiAgICBlYXNlSW5PdXRDaXJjOiAodCwgYiwgYywgZCkgLT5cbiAgICAgICAgaWYgKHQgLz0gZCAvIDIpIDwgMVxuICAgICAgICAgICAgLWMgLyAyICogKE1hdGguc3FydCgxIC0gdCAqIHQpIC0gMSkgKyBiXG4gICAgICAgIGVsc2UgXG4gICAgICAgICAgICBjIC8gMiAqIChNYXRoLnNxcnQoMSAtICh0IC09IDIpICogdCkgKyAxKSArIGJcblxuICAgIGVhc2VJbkVsYXN0aWM6ICh0LCBiLCBjLCBkKSAtPlxuICAgICAgICBzID0gMS43MDE1OFxuICAgICAgICBwID0gMFxuICAgICAgICBhID0gY1xuXG4gICAgICAgIGlmIHQgPT0gMCBcbiAgICAgICAgICAgIGIgIFxuICAgICAgICBpZiAodCAvPSBkKSA9PSAxXG4gICAgICAgICAgICBiICsgY1xuXG4gICAgICAgIGlmICFwIFxuICAgICAgICAgICAgcCA9IGQgKiAuM1xuICAgICAgICBpZiBhIDwgTWF0aC5hYnMoYylcbiAgICAgICAgICAgIGEgPSBjXG4gICAgICAgICAgICBzID0gcCAvIDRcbiAgICAgICAgZWxzZSBcbiAgICAgICAgICAgIHMgPSBwIC8gKDIgKiBNYXRoLlBJKSAqIE1hdGguYXNpbiAoYyAvIGEpXG5cbiAgICAgICAgLShhICogTWF0aC5wb3coMiwgMTAgKiAodCAtPSAxKSkgKiBNYXRoLnNpbigodCAqIGQgLSBzKSAqICgyICogTWF0aC5QSSkgLyBwICkpICsgYlxuXG4gICAgZWFzZU91dEVsYXN0aWM6ICh0LCBiLCBjLCBkKSAtPlxuICAgICAgICBzID0gMS43MDE1OFxuICAgICAgICBwID0gMFxuICAgICAgICBhID0gY1xuXG4gICAgICAgIGlmIHQgPT0gMCBcbiAgICAgICAgICAgIGJcbiAgICAgICAgaWYgKHQgLz0gZCkgPT0gMSBcbiAgICAgICAgICAgIGIgKyBjIFxuXG4gICAgICAgIGlmICFwXG4gICAgICAgICAgICBwID0gZCAqIC4zXG4gICAgICAgIGlmIGEgPCBNYXRoLmFicyhjKVxuICAgICAgICAgICAgYSA9IGNcbiAgICAgICAgICAgIHMgPSBwIC8gNFxuICAgICAgICBlbHNlIFxuICAgICAgICAgICAgcyA9IHAgLyAoMiAqIE1hdGguUEkpICogTWF0aC5hc2luIChjIC8gYSlcblxuICAgICAgICBhICogTWF0aC5wb3coMiwgLTEwICogdCkgKiBNYXRoLnNpbigodCAqIGQgLSBzKSAqICgyICogTWF0aC5QSSkgLyBwKSArIGMgKyBiXG5cbiAgICBlYXNlSW5PdXRFbGFzdGljOiAodCwgYiwgYywgZCkgLT5cbiAgICAgICAgcyA9IDEuNzAxNThcbiAgICAgICAgcCA9IDBcbiAgICAgICAgYSA9IGNcblxuICAgICAgICBpZiB0ID09IDBcbiAgICAgICAgICAgIGJcbiAgICAgICAgaWYgKHQgLz0gZCAvIDIpID09IDJcbiAgICAgICAgICAgIGIgKyBjIFxuICAgICAgICBcbiAgICAgICAgaWYgIXAgXG4gICAgICAgICAgICBwID0gZCAqICguMyAqIDEuNSlcbiAgICAgICAgaWYgYSA8IE1hdGguYWJzKGMpXG4gICAgICAgICAgICBhID0gY1xuICAgICAgICAgICAgcyA9IHAgLyA0XG4gICAgICAgIGVsc2UgXG4gICAgICAgICAgICBzID0gcCAvICgyICogTWF0aC5QSSkgKiBNYXRoLmFzaW4gKGMgLyBhKVxuICAgICAgICBpZiAodCA8IDEpIFxuICAgICAgICAgICAgLS41ICogKGEgKiBNYXRoLnBvdygyLCAxMCAqICh0IC09IDEpKSAqIE1hdGguc2luKCh0ICogZCAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApKSArIGJcbiAgICAgICAgXG4gICAgICAgIGEgKiBNYXRoLnBvdygyLCAtMTAgKiAodCAtPSAxKSkgKiBNYXRoLnNpbigodCAqIGQgLSBzKSAqICgyICogTWF0aC5QSSkgLyBwKSAqIC41ICsgYyArIGIiLCJfID0gRnJhbWVyLl9cblxue1NjZW5lfSA9IHJlcXVpcmUgJy4vU2NlbmUuY29mZmVlJ1xuXG5jbGFzcyBleHBvcnRzLlN0dWRpbyBleHRlbmRzIFNjZW5lXG4gICAgY29uc3RydWN0b3I6IChwcm9wZXJ0aWVzPXt9KSAtPlxuXG4gICAgICAgIF8uZGVmYXVsdHMgcHJvcGVydGllcyxcbiAgICAgICAgICAgIGNhbWVyYTpcbiAgICAgICAgICAgICAgICB5OiAyMjBcbiAgICAgICAgICAgICAgICByb3RhdGlvblg6IC0xNVxuXG4gICAgICAgIHN1cGVyIHByb3BlcnRpZXNcblxuICAgICAgICBAc2NlbmUuYmFja2dyb3VuZCA9IG5ldyBUSFJFRS5Db2xvciAweDkxODFhMFxuICAgICAgICBAc2NlbmUuZm9nID0gbmV3IFRIUkVFLkZvZyAweDkxODFhMCwgNDAwLCAxMDAwXG4gICAgICAgIFxuICAgICAgICBAaGxpZ2h0ID0gbmV3IFRIUkVFLkhlbWlzcGhlcmVMaWdodCAweGZmZmZmZiwgMHg0NDQ0NDRcbiAgICAgICAgQGhsaWdodC5wb3NpdGlvbi55ID0gMjAwXG4gICAgICAgIEBzY2VuZS5hZGQgQGhsaWdodFxuXG4gICAgICAgIEBsaWdodCA9IG5ldyBUSFJFRS5Qb2ludExpZ2h0IDB4ZmZmZmZmLCAuMVxuICAgICAgICBAbGlnaHQucG9zaXRpb24uc2V0IDAsIDgwMCwgMFxuICAgICAgICBAbGlnaHQuY2FzdFNoYWRvdyA9IHRydWVcbiAgICAgICAgQGxpZ2h0LnNoYWRvdy5jYW1lcmEubmVhciA9IDEwMFxuICAgICAgICBAbGlnaHQuc2hhZG93LmNhbWVyYS5mYXIgPSAxMDAwXG4gICAgICAgIEBsaWdodC5zaGFkb3cuYmlhcyA9IC4wMDAxXG4gICAgICAgIEBsaWdodC5zaGFkb3cucmFkaXVzID0gNVxuICAgICAgICBAbGlnaHQuc2hhZG93Lm1hcFNpemUud2lkdGggPSAxMDI0XG4gICAgICAgIEBsaWdodC5zaGFkb3cubWFwU2l6ZS5oZWlnaHQgPSAxMDI0XG4gICAgICAgIEBzY2VuZS5hZGQgQGxpZ2h0XG5cbiAgICAgICAgQGxpZ2h0MiA9IG5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0IDB4ZmY5OTk5LCAuM1xuICAgICAgICBAbGlnaHQyLnBvc2l0aW9uLnNldCAtMTAwLCAyMDAsIC0zMDBcbiAgICAgICAgQHNjZW5lLmFkZCBAbGlnaHQyXG5cbiAgICAgICAgQGxpZ2h0MyA9IG5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0IDB4NjY2NmZmLCAuMlxuICAgICAgICBAbGlnaHQzLnBvc2l0aW9uLnNldCAxMDAsIDIwMCwgLTMwMFxuICAgICAgICBAc2NlbmUuYWRkIEBsaWdodDNcblxuICAgICAgICBAbGlnaHQ0ID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQgMHhmZjk5OTksIC4zXG4gICAgICAgIEBsaWdodDQucG9zaXRpb24uc2V0IC0xMDAsIDIwMCwgMzAwXG4gICAgICAgIEBzY2VuZS5hZGQgQGxpZ2h0NFxuXG4gICAgICAgIEBsaWdodDUgPSBuZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCAweDY2NjZmZiwgLjJcbiAgICAgICAgQGxpZ2h0NS5wb3NpdGlvbi5zZXQgMTAwLCAyMDAsIDMwMFxuICAgICAgICBAc2NlbmUuYWRkIEBsaWdodDVcblxuICAgICAgICBAZmxvb3JHZW8gPSBuZXcgVEhSRUUuQ2lyY2xlR2VvbWV0cnkgODAwLCAxMDBcbiAgICAgICAgQGZsb29yTWF0ID0gbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsXG4gICAgICAgICAgICByb3VnaG5lc3M6IC42XG4gICAgICAgICAgICBjb2xvcjogMHhhYWFhYWFcbiAgICAgICAgICAgIG1ldGFsbmVzczogMC4yXG4gICAgICAgICAgICBidW1wU2NhbGU6IDAuMDAwNVxuICAgICAgICBAZmxvb3IgPSBuZXcgVEhSRUUuTWVzaCBAZmxvb3JHZW8sIEBmbG9vck1hdFxuICAgICAgICBAZmxvb3Iucm90YXRpb24ueCA9IC1NYXRoLlBJIC8gMlxuICAgICAgICBAZmxvb3IucmVjZWl2ZVNoYWRvdyA9IHRydWVcbiAgICAgICAgQHNjZW5lLmFkZCBAZmxvb3JcblxuICAgICAgICAjIyNcbiAgICAgICAgQGdyaWQgPSBuZXcgVEhSRUUuR3JpZEhlbHBlciAyMDAwLCAyMCwgMHgwMDAwMDAsIDB4MDAwMDAwXG4gICAgICAgIEBncmlkLm1hdGVyaWFsLm9wYWNpdHkgPSAuMlxuICAgICAgICBAZ3JpZC5tYXRlcmlhbC50cmFuc3BhcmVudCA9IHRydWVcbiAgICAgICAgQHNjZW5lLmFkZCBAZ3JpZFxuICAgICAgICAjIyMiLCJfID0gRnJhbWVyLl9cblxue0NhbWVyYX0gPSByZXF1aXJlICcuL19DYW1lcmEuY29mZmVlJ1xuXG5jbGFzcyBleHBvcnRzLlNjZW5lIGV4dGVuZHMgTGF5ZXJcbiAgICBjb25zdHJ1Y3RvcjogKHByb3BlcnRpZXM9e30pIC0+XG4gICAgICAgIHN1cGVyIF8uZGVmYXVsdHMgcHJvcGVydGllcyxcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyMwMDAnXG5cbiAgICAgICAgIyBSRU5ERVJFUlxuICAgICAgICBcbiAgICAgICAgQHJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXJcbiAgICAgICAgICAgIGFudGlhbGlhczogdHJ1ZVxuICAgICAgICAgICAgYWxwaGE6IHRydWVcblxuICAgICAgICBAX2VsZW1lbnQuYXBwZW5kQ2hpbGQgQHJlbmRlcmVyLmRvbUVsZW1lbnRcbiAgICAgICAgQHJlbmRlcmVyLnNldFNpemUgQHdpZHRoLCBAaGVpZ2h0XG4gICAgICAgIEByZW5kZXJlci5zZXRQaXhlbFJhdGlvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvXG4gICAgICAgIEByZW5kZXJlci5kb21FbGVtZW50LnN0eWxlLndpZHRoID0gJzEwMCUnXG4gICAgICAgIEByZW5kZXJlci5kb21FbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJ1xuICAgICAgICBAcmVuZGVyZXIuc2hhZG93TWFwLmVuYWJsZWQgPSB0cnVlXG4gICAgICAgIEByZW5kZXJlci5zaGFkb3dNYXAudHlwZSA9IFRIUkVFLlBDRlNvZnRTaGFkb3dNYXBcblxuXG4gICAgICAgICMgU0NFTkVcblxuICAgICAgICBAc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmVcblxuXG4gICAgICAgICMgQ0FNRVJBXG5cbiAgICAgICAgY2FtZXJhUHJvcHMgPSBfLmRlZmF1bHRzIHByb3BlcnRpZXMuY2FtZXJhLFxuICAgICAgICAgICAgYXNwZWN0OiBAd2lkdGggLyBAaGVpZ2h0XG5cbiAgICAgICAgQGNhbWVyYSA9IG5ldyBDYW1lcmEgY2FtZXJhUHJvcHMsIEAuX2VsZW1lbnRcblxuXG4gICAgICAgICMgUkVTSVpJTkdcblxuICAgICAgICBDYW52YXMub25SZXNpemUgQG9uV2luZG93UmVzaXplXG5cblxuICAgICAgICAjIFJBWUNBU1RFUlxuXG4gICAgICAgIEByYXljYXN0ZXIgPSBuZXcgVEhSRUUuUmF5Y2FzdGVyXG4gICAgICAgIEBtb3VzZSA9IG5ldyBUSFJFRS5WZWN0b3IyXG4gICAgICAgIEBpbnRlcnNlY3RlZCA9IG51bGxcbiAgICAgICAgQGludGVyc2VjdGVkRXZlbnRFbWl0dGVkID0gZmFsc2VcbiAgICAgICAgQG1vdXNlZG93biA9IGZhbHNlXG4gICAgICAgIFxuICAgICAgICBAb24gJ21vdXNlbW92ZScsIChlKSA9PlxuICAgICAgICAgICAgQG1vdXNlLnggPSAoZS5jbGllbnRYIC8gQHdpZHRoKSAqIDIgLSAxXG4gICAgICAgICAgICBAbW91c2UueSA9IC0oZS5jbGllbnRZIC8gQGhlaWdodCkgKiAyICsgMVxuXG4gICAgICAgIEBvbiAnbW91c2Vkb3duJywgKGUpID0+XG4gICAgICAgICAgICBAbW91c2Vkb3duID0gdHJ1ZVxuICAgICAgICAgICAgaWYgQGludGVyc2VjdGVkXG4gICAgICAgICAgICAgICAgQGludGVyc2VjdGVkLm9iamVjdC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnbW91c2Vkb3duJ31cbiAgICAgICAgICAgICAgICBAaW50ZXJzZWN0ZWQub2JqZWN0LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdvbm1vdXNlZG93bid9XG4gICAgICAgICAgICAgICAgQGludGVyc2VjdGVkLm9iamVjdC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2xpY2snfVxuICAgICAgICAgICAgICAgIEBpbnRlcnNlY3RlZC5vYmplY3QuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ29uY2xpY2snfVxuICAgICAgICBcbiAgICAgICAgQG9uICdtb3VzZXVwJywgKGUpID0+XG4gICAgICAgICAgICBAbW91c2Vkb3duID0gZmFsc2VcbiAgICAgICAgICAgIGlmIEBpbnRlcnNlY3RlZFxuICAgICAgICAgICAgICAgIEBpbnRlcnNlY3RlZC5vYmplY3QuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ21vdXNldXAnfVxuICAgICAgICAgICAgICAgIEBpbnRlcnNlY3RlZC5vYmplY3QuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ29ubW91c2V1cCd9XG5cblxuICAgICAgICAjIEFOSU1BVElPTiBMT09QXG5cbiAgICAgICAgQGxvb3AoKVxuXG4gICAgICAgIEZyYW1lci5DdXJyZW50Q29udGV4dC5vbiAncmVzZXQnLCA9PlxuICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUgQGFuaW1hdGlvbkxvb3BSZXF1ZXN0SWRcblxuXG5cbiAgICBsb29wOiAoKSA9PlxuICAgICAgICBAYW5pbWF0aW9uTG9vcFJlcXVlc3RJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSBAbG9vcFxuXG4gICAgICAgIGlmIEBhbmltYXRpb25Mb29wXG4gICAgICAgICAgICBAYW5pbWF0aW9uTG9vcCgpXG5cbiAgICAgICAgaWYgQGNhbWVyYS5jb250cm9sc1xuICAgICAgICAgICAgQGNhbWVyYS5jb250cm9scy51cGRhdGUoKVxuXG4gICAgICAgIEBoYW5kbGVSYXljYXN0ZXIoKVxuXG4gICAgICAgIEByZW5kZXJlci5yZW5kZXIgQHNjZW5lLCBAY2FtZXJhLm5hdGl2ZUNhbWVyYVxuICAgIFxuXG4gICAgXG4gICAgaGFuZGxlUmF5Y2FzdGVyOiAoKSA9PlxuICAgICAgICBAcmF5Y2FzdGVyLnNldEZyb21DYW1lcmEgQG1vdXNlLCBAY2FtZXJhLm5hdGl2ZUNhbWVyYVxuICAgICAgICBpbnRlcnNlY3RzID0gQHJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzIEBzY2VuZS5jaGlsZHJlbiwgdHJ1ZVxuXG4gICAgICAgIGlmIGludGVyc2VjdHMubGVuZ3RoICYmIEBpbnRlcnNlY3RlZCAhPSBpbnRlcnNlY3RzWzBdXG4gICAgICAgICAgICBAaW50ZXJzZWN0ZWQgPSBpbnRlcnNlY3RzWzBdXG4gICAgICAgIFxuICAgICAgICBpZiBAaW50ZXJzZWN0ZWQgJiYgIWludGVyc2VjdHMubGVuZ3RoXG4gICAgICAgICAgICBAaW50ZXJzZWN0ZWQub2JqZWN0LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdtb3VzZW91dCd9XG4gICAgICAgICAgICBAaW50ZXJzZWN0ZWQub2JqZWN0LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdvbm1vdXNlb3V0J31cbiAgICAgICAgXG4gICAgICAgIGlmICFpbnRlcnNlY3RzLmxlbmd0aFxuICAgICAgICAgICAgQGludGVyc2VjdGVkID0gbnVsbFxuICAgICAgICAgICAgQGludGVyc2VjdGVkRXZlbnRFbWl0dGVkID0gZmFsc2VcbiAgICAgICAgXG4gICAgICAgIGlmICFAaW50ZXJzZWN0ZWRFdmVudEVtaXR0ZWQgJiYgQGludGVyc2VjdGVkXG4gICAgICAgICAgICBAaW50ZXJzZWN0ZWQub2JqZWN0LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdtb3VzZW92ZXInfVxuICAgICAgICAgICAgQGludGVyc2VjdGVkLm9iamVjdC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnb25tb3VzZW92ZXInfVxuICAgICAgICAgICAgQGludGVyc2VjdGVkRXZlbnRFbWl0dGVkID0gdHJ1ZVxuICAgIFxuICAgIG9uV2luZG93UmVzaXplOiAoZSkgPT5cbiAgICAgICAgQGNhbWVyYS5hc3BlY3QgPSBAd2lkdGggLyBAaGVpZ2h0XG4gICAgICAgIEBjYW1lcmEubmF0aXZlQ2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKVxuICAgICAgICBAcmVuZGVyZXIuc2V0U2l6ZSBAd2lkdGgsIEBoZWlnaHQiLCJfID0gRnJhbWVyLl9cblxuIyBDTEFTU0VTXG5cbntCYXNlQ2xhc3N9ID0gcmVxdWlyZSAnLi9fQmFzZUNsYXNzLmNvZmZlZSdcbntBbmltYXRpb259ID0gcmVxdWlyZSAnLi9fQW5pbWF0aW9uLmNvZmZlZSdcbntTdGF0ZXN9ID0gcmVxdWlyZSAnLi9fU3RhdGVzLmNvZmZlZSdcblxuIyBMT0FERVJTXG5cbntPQkp9ID0gcmVxdWlyZSAnLi9sb2FkZXJzL09CSi5jb2ZmZWUnXG57RkJYfSA9IHJlcXVpcmUgJy4vbG9hZGVycy9GQlguY29mZmVlJ1xue0dMVEZ9ID0gcmVxdWlyZSAnLi9sb2FkZXJzL0dMVEYuY29mZmVlJ1xue0NvbGxhZGF9ID0gcmVxdWlyZSAnLi9sb2FkZXJzL0NvbGxhZGEuY29mZmVlJ1xue0pTT05PYmplY3R9ID0gcmVxdWlyZSAnLi9sb2FkZXJzL0pTT05PYmplY3QuY29mZmVlJ1xuXG5jbGFzcyBleHBvcnRzLk1vZGVsIGV4dGVuZHMgQmFzZUNsYXNzXG4gICAgY29uc3RydWN0b3I6IChwcm9wZXJ0aWVzPXt9KSAtPlxuICAgICAgICBzdXBlcigpXG5cbiAgICAgICAgXy5kZWZhdWx0cyBwcm9wZXJ0aWVzLFxuICAgICAgICAgICAgYW5pbWF0ZTogdHJ1ZVxuICAgICAgICAgICAgY2FzdFNoYWRvdzogdHJ1ZVxuICAgICAgICAgICAgcmVjZWl2ZVNoYWRvdzogdHJ1ZVxuICAgICAgICAgICAgcmVwb3NpdGlvbjogdHJ1ZVxuXG4gICAgICAgIHN3aXRjaCBAZ2V0RXh0ZW5zaW9uIHByb3BlcnRpZXMucGF0aFxuICAgICAgICAgICAgd2hlbiAnb2JqJ1xuICAgICAgICAgICAgICAgIG5ldyBPQkogcHJvcGVydGllcywgKG1vZGVsKSA9PlxuICAgICAgICAgICAgICAgICAgICBAbWVzaCA9IG1vZGVsXG4gICAgICAgICAgICAgICAgICAgIEBzZXR1cE1vZGVsIHByb3BlcnRpZXNcbiAgICAgICAgICAgIHdoZW4gJ2ZieCdcbiAgICAgICAgICAgICAgICBuZXcgRkJYIHByb3BlcnRpZXMsIChtb2RlbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgQG1lc2ggPSBtb2RlbFxuICAgICAgICAgICAgICAgICAgICBAc2V0dXBNb2RlbCBwcm9wZXJ0aWVzXG4gICAgICAgICAgICB3aGVuICdnbHRmJyB8fCAnZ2xiJ1xuICAgICAgICAgICAgICAgIG5ldyBHTFRGIHByb3BlcnRpZXMsIChtb2RlbCkgPT5cbiAgICAgICAgICAgICAgICAgICAgQG1lc2ggPSBtb2RlbFxuICAgICAgICAgICAgICAgICAgICBAc2V0dXBNb2RlbCBwcm9wZXJ0aWVzXG4gICAgICAgICAgICB3aGVuICdkYWUnXG4gICAgICAgICAgICAgICAgbmV3IENvbGxhZGEgcHJvcGVydGllcywgKG1vZGVsKSA9PlxuICAgICAgICAgICAgICAgICAgICBAbWVzaCA9IG1vZGVsXG4gICAgICAgICAgICAgICAgICAgIEBzZXR1cE1vZGVsIHByb3BlcnRpZXNcbiAgICAgICAgICAgIHdoZW4gJ2pzb24nXG4gICAgICAgICAgICAgICAgbmV3IEpTT05PYmplY3QgcHJvcGVydGllcywgKG1vZGVsKSA9PlxuICAgICAgICAgICAgICAgICAgICBAbWVzaCA9IG1vZGVsXG4gICAgICAgICAgICAgICAgICAgIEBzZXR1cE1vZGVsIHByb3BlcnRpZXNcblxuXG4gICAgZ2V0RXh0ZW5zaW9uOiAocGF0aCkgLT5cbiAgICAgICAgcGF0aC5zcGxpdCgnLicpLnBvcCgpXG5cbiAgICBzZXR1cE1vZGVsOiAocHJvcGVydGllcykgLT5cbiAgICAgICAgaWYgcHJvcGVydGllcy5yZXBvc2l0aW9uXG4gICAgICAgICAgICBAcmVwb3NpdGlvbk1lc2goKVxuXG4gICAgICAgIEBwaXZvdCA9IG5ldyBUSFJFRS5Hcm91cFxuICAgICAgICBAcGl2b3QuYWRkIEBtZXNoXG5cbiAgICAgICAgQHNhdmVJbml0aWFsUHJvcGVydGllcygpXG5cbiAgICAgICAgaWYgcHJvcGVydGllcy5tYXRlcmlhbFxuICAgICAgICAgICAgQGFwcGx5TWF0ZXJpYWwgcHJvcGVydGllcy5tYXRlcmlhbFxuICAgICAgICBcbiAgICAgICAgQHNldHVwU2hhZG93U2V0dGluZ3MgcHJvcGVydGllc1xuICAgICAgICBcbiAgICAgICAgaWYgcHJvcGVydGllcy5zbW9vdGhTaGFkaW5nXG4gICAgICAgICAgICBAbWVzaC50cmF2ZXJzZSAoYykgLT5cbiAgICAgICAgICAgICAgICBpZiBjIGluc3RhbmNlb2YgVEhSRUUuTWVzaFxuICAgICAgICAgICAgICAgICAgICBjLm1hdGVyaWFsLnNoYWRpbmcgPSBUSFJFRS5TbW9vdGhTaGFkaW5nXG4gICAgICAgIFxuICAgICAgICBpZiBwcm9wZXJ0aWVzLmFuaW1hdGUgJiYgQG1lc2guYW5pbWF0aW9ucyAmJiBAbWVzaC5hbmltYXRpb25zWzBdXG4gICAgICAgICAgICBAaGFuZGxlQW5pbWF0aW9ucyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgaWYgcHJvcGVydGllcy5wYXJlbnRcbiAgICAgICAgICAgIEBhZGRUb1JlbmRlcmluZ0luc3RhbmNlIHByb3BlcnRpZXMucGFyZW50XG5cbiAgICAgICAgQHNldFNjYWxlIHByb3BlcnRpZXMuc2NhbGUsIHByb3BlcnRpZXMuc2NhbGVYLCBwcm9wZXJ0aWVzLnNjYWxlWSwgcHJvcGVydGllcy5zY2FsZVpcbiAgICAgICAgQHNldFBvc2l0aW9uIFtwcm9wZXJ0aWVzLngsIHByb3BlcnRpZXMueSwgcHJvcGVydGllcy56XVxuICAgICAgICBAc2V0Um90YXRpb24gW3Byb3BlcnRpZXMucm90YXRpb25YLCBwcm9wZXJ0aWVzLnJvdGF0aW9uWSwgcHJvcGVydGllcy5yb3RhdGlvblpdXG4gICAgICAgIEBzZXRNaWQoXG4gICAgICAgICAgICBtaWRYOiBwcm9wZXJ0aWVzLm1pZFhcbiAgICAgICAgICAgIG1pZFk6IHByb3BlcnRpZXMubWlkWVxuICAgICAgICAgICAgbWlkWjogcHJvcGVydGllcy5taWRaXG4gICAgICAgIClcblxuICAgICAgICBpZiBwcm9wZXJ0aWVzLnZpc2libGVcbiAgICAgICAgICAgIEB2aXNpYmxlID0gcHJvcGVydGllcy52aXNpYmxlXG4gICAgICAgIFxuICAgICAgICBAX3N0YXRlcyA9IG5ldyBTdGF0ZXMgQFxuXG4gICAgICAgIGlmIHByb3BlcnRpZXMub25Mb2FkXG4gICAgICAgICAgICBwcm9wZXJ0aWVzLm9uTG9hZCBAXG5cbiAgICByZXBvc2l0aW9uTWVzaDogKCkgLT5cbiAgICAgICAgQGJvdW5kaW5nQm94ID0gbmV3IFRIUkVFLkJveDMoKS5zZXRGcm9tT2JqZWN0IEBtZXNoXG4gICAgICAgIEBvZmZzZXQgPSBAYm91bmRpbmdCb3guZ2V0Q2VudGVyIEBtZXNoLnBvc2l0aW9uXG4gICAgICAgIEBtZXNoLnBvc2l0aW9uLm11bHRpcGx5U2NhbGFyIC0xXG5cbiAgICBzYXZlSW5pdGlhbFByb3BlcnRpZXM6ICgpIC0+XG4gICAgICAgIEBpbml0aWFsUHJvcGVydGllcyA9IEBcblxuICAgIGFwcGx5TWF0ZXJpYWw6IChtYXRlcmlhbCkgLT5cbiAgICAgICAgQG1lc2gudHJhdmVyc2UgKGMpIC0+XG4gICAgICAgICAgICBpZiBjIGluc3RhbmNlb2YgVEhSRUUuTWVzaFxuICAgICAgICAgICAgICAgIGMubWF0ZXJpYWwgPSBtYXRlcmlhbFxuXG4gICAgc2V0dXBTaGFkb3dTZXR0aW5nczogKHByb3BlcnRpZXMpIC0+XG4gICAgICAgIEBtZXNoLnRyYXZlcnNlIChjKSAtPlxuICAgICAgICAgICAgaWYgYyBpbnN0YW5jZW9mIFRIUkVFLk1lc2hcbiAgICAgICAgICAgICAgICBjLmNhc3RTaGFkb3cgPSBwcm9wZXJ0aWVzLmNhc3RTaGFkb3dcbiAgICAgICAgICAgICAgICBjLnJlY2VpdmVTaGFkb3cgPSBwcm9wZXJ0aWVzLnJlY2VpdmVTaGFkb3dcblxuICAgIGFkZFRvUmVuZGVyaW5nSW5zdGFuY2U6IChwYXJlbnQpIC0+XG4gICAgICAgIGlmIHBhcmVudC5zY2VuZSB0aGVuIHBhcmVudC5zY2VuZS5hZGQgQHBpdm90XG4gICAgICAgIGVsc2UgcGFyZW50LmFkZCBAcGl2b3RcbiAgICBcbiAgICBoYW5kbGVBbmltYXRpb25zOiAocHJvcGVydGllcykgLT5cbiAgICAgICAgaWYgXy5pc051bWJlciBwcm9wZXJ0aWVzLmFuaW1hdGlvbkNsaXBcbiAgICAgICAgICAgIEBhbmltYXRpb25JbmRleCA9IHByb3BlcnRpZXMuYW5pbWF0aW9uQ2xpcCAtIDFcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgQGFuaW1hdGlvbkluZGV4ID0gMFxuXG4gICAgICAgIEBjbG9jayA9IG5ldyBUSFJFRS5DbG9ja1xuICAgICAgICBAbWVzaC5taXhlciA9IG5ldyBUSFJFRS5BbmltYXRpb25NaXhlciBAbWVzaFxuXG4gICAgICAgIEBhY3Rpb24gPSBAbWVzaC5taXhlci5jbGlwQWN0aW9uIEBtZXNoLmFuaW1hdGlvbnNbQGFuaW1hdGlvbkluZGV4XVxuICAgICAgICBAYWN0aW9uLnBsYXkoKVxuICAgICAgICBcbiAgICAgICAgQHVwZGF0ZU1peGVyKClcblxuICAgICAgICBGcmFtZXIuQ3VycmVudENvbnRleHQub24gJ3Jlc2V0JywgPT5cbiAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lIEBtaXhlclJlcXVlc3RJZFxuICAgICAgICBcbiAgICB1cGRhdGVNaXhlcjogKCkgPT5cbiAgICAgICAgQG1peGVyUmVxdWVzdElkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lIEB1cGRhdGVNaXhlclxuICAgICAgICBAbWVzaC5taXhlci51cGRhdGUgQGNsb2NrLmdldERlbHRhKClcbiAgICBcbiAgICBvbjogKGV2ZW50TmFtZSwgY2IpIC0+XG5cbiAgICAgICAgaWYgZXZlbnROYW1lLmluY2x1ZGVzICdjaGFuZ2UnXG5cbiAgICAgICAgICAgIGNhbGxiYWNrID0gKGUpIC0+IGNiKGUudmFsdWUpXG5cbiAgICAgICAgICAgIEBwaXZvdC5hZGRFdmVudExpc3RlbmVyIGV2ZW50TmFtZSwgY2FsbGJhY2tcblxuICAgICAgICAgICAgRnJhbWVyLkN1cnJlbnRDb250ZXh0Lm9uICdyZXNldCcsID0+XG4gICAgICAgICAgICAgICAgQHBpdm90LnJlbW92ZUV2ZW50TGlzdGVuZXIgZXZlbnROYW1lLCBjYWxsYmFja1xuXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIEBtZXNoLnRyYXZlcnNlIChjKSAtPlxuICAgICAgICAgICAgICAgIGlmIGMgaW5zdGFuY2VvZiBUSFJFRS5NZXNoXG5cbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgPSAoKSAtPiBjYigpXG5cbiAgICAgICAgICAgICAgICAgICAgYy5hZGRFdmVudExpc3RlbmVyIGV2ZW50TmFtZSwgY2FsbGJhY2tcblxuICAgICAgICAgICAgICAgICAgICBGcmFtZXIuQ3VycmVudENvbnRleHQub24gJ3Jlc2V0JywgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgIGMucmVtb3ZlRXZlbnRMaXN0ZW5lciBldmVudE5hbWUsIGNhbGxiYWNrXG5cblxuICAgIHNldFNjYWxlOiAodW5pZm9ybVNjYWxlLCBzY2FsZVgsIHNjYWxlWSwgc2NhbGVaKSAtPlxuICAgICAgICBpZiB1bmlmb3JtU2NhbGVcbiAgICAgICAgICAgIEBzY2FsZSA9IHVuaWZvcm1TY2FsZSB8fCAxXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIEBzY2FsZVggPSBzY2FsZVggfHwgMVxuICAgICAgICAgICAgQHNjYWxlWSA9IHNjYWxlWSB8fCAxXG4gICAgICAgICAgICBAc2NhbGVaID0gc2NhbGVaIHx8IDFcbiAgICBcbiAgICBzZXRQb3NpdGlvbjogKHBvc2l0aW9uKSAtPlxuICAgICAgICBAeCA9IHBvc2l0aW9uWzBdIHx8IDBcbiAgICAgICAgQHkgPSBwb3NpdGlvblsxXSB8fCAwXG4gICAgICAgIEB6ID0gcG9zaXRpb25bMl0gfHwgMFxuXG4gICAgc2V0Um90YXRpb246IChyb3RhdGlvbikgLT5cbiAgICAgICAgQHJvdGF0aW9uWCA9IHJvdGF0aW9uWzBdIHx8IDBcbiAgICAgICAgQHJvdGF0aW9uWSA9IHJvdGF0aW9uWzFdIHx8IDBcbiAgICAgICAgQHJvdGF0aW9uWiA9IHJvdGF0aW9uWzJdIHx8IDBcblxuICAgIHNldE1pZDogKG1pZCkgLT5cbiAgICAgICAgT2JqZWN0LmtleXMobWlkKS5tYXAgKGspID0+XG4gICAgICAgICAgICBpZiBtaWRba11cbiAgICAgICAgICAgICAgICBAW2tdID0gbWlkW2tdXG4gICAgXG4gICAgYW5pbWF0ZTogKHByb3BlcnRpZXMpIC0+XG4gICAgICAgIG5ldyBBbmltYXRpb24gQCwgcHJvcGVydGllc1xuICAgIFxuICAgIGxvb2tBdDogKGEsIGIsIGMpIC0+XG4gICAgICAgIGlmIGFyZ3VtZW50cy5sZW5ndGggPT0gMVxuICAgICAgICAgICAgQHBpdm90Lmxvb2tBdCBhXG4gICAgICAgIGVsc2UgaWYgYXJndW1lbnRzLmxlbmd0aCA9PSAzXG4gICAgICAgICAgICBAcGl2b3QubG9va0F0IGEsIGIsIGNcbiAgICBcbiAgICBzdGF0ZVN3aXRjaDogKHN0YXRlKSAtPlxuICAgICAgICAjIExvb3AgdGhyb3VnaCBzdGF0ZXMgb24gbW9kZWwgdG8gZmluZCB0aGUgc3BlY2lmaWVkIG9uZVxuICAgICAgICBPYmplY3Qua2V5cyhAc3RhdGVzKS5tYXAgKGspID0+IFxuICAgICAgICAgICAgaWYgayA9PSBzdGF0ZVxuICAgICAgICAgICAgICAgIEBzdGF0ZXMuY3VycmVudCA9IEBzdGF0ZXNba11cblxuICAgICAgICAgICAgICAgICMgTG9vcCB0aHJvdWdoIHByb3BlcnR5IGtleXMgb24gdGhlIHN0YXRlIGFuZCBhcHBseSB0aGUgdmFsdWVzIHRvIG1vZGVsXG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoQHN0YXRlcy5jdXJyZW50KS5tYXAgKHBrKSAgPT5cbiAgICAgICAgICAgICAgICAgICAgQFtwa10gPSBAc3RhdGVzLmN1cnJlbnRbcGtdXG4gICAgXG4gICAgc3RhdGVDeWNsZTogKHN0YXRlQSwgc3RhdGVCKSAtPlxuICAgICAgICAjIENoZWNrIGlmIHN0YXRlQSBvciBzdGF0ZUIgYWxyZWFkeSBpcyB0aGUgY3VycmVudCBzdGF0ZSBvbiBtb2RlbFxuICAgICAgICBpZiBAc3RhdGVzLmN1cnJlbnQgPT0gQHN0YXRlc1tzdGF0ZUFdIHx8IEBzdGF0ZXMuY3VycmVudCA9PSBAc3RhdGVzW3N0YXRlQl1cbiAgICAgICAgICAgIGlmIEBzdGF0ZXMuY3VycmVudCA9PSBAc3RhdGVzW3N0YXRlQV0gdGhlbiBAYW5pbWF0ZSBzdGF0ZUJcbiAgICAgICAgICAgIGVsc2UgaWYgQHN0YXRlcy5jdXJyZW50ID09IEBzdGF0ZXNbc3RhdGVCXSB0aGVuIEBhbmltYXRlIHN0YXRlQVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICAjIElmIG5laXRoZXIgYXJlIGN1cnJlbnQsIGFuaW1hdGUgdG8gc3RhdGVBXG4gICAgICAgICAgICBAYW5pbWF0ZSBzdGF0ZUFcbiAgICAgICAgICAgIFxuXG5cblxuICAgIEBkZWZpbmUgJ3NjYWxlJyxcbiAgICAgICAgZ2V0OiAtPiBAcGl2b3Quc2NhbGUueCxcbiAgICAgICAgc2V0OiAoc2NhbGUpIC0+IFxuICAgICAgICAgICAgQHBpdm90LnNjYWxlLnNldChzY2FsZSwgc2NhbGUsIHNjYWxlKVxuICAgICAgICAgICAgQHBpdm90LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6c2NhbGUnLCB2YWx1ZTogQHNjYWxlfVxuICAgIFxuICAgIEBkZWZpbmUgJ3NjYWxlWCcsXG4gICAgICAgIGdldDogLT4gQHBpdm90LnNjYWxlLngsXG4gICAgICAgIHNldDogKHNjYWxlKSAtPiBcbiAgICAgICAgICAgIEBwaXZvdC5zY2FsZS5zZXQoc2NhbGUsIEBwaXZvdC5zY2FsZS55LCBAcGl2b3Quc2NhbGUueilcbiAgICAgICAgICAgIEBwaXZvdC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOnNjYWxlWCcsIHZhbHVlOiBAc2NhbGVYfVxuXG4gICAgQGRlZmluZSAnc2NhbGVZJyxcbiAgICAgICAgZ2V0OiAtPiBAcGl2b3Quc2NhbGUueSxcbiAgICAgICAgc2V0OiAoc2NhbGUpIC0+IFxuICAgICAgICAgICAgQHBpdm90LnNjYWxlLnNldChAcGl2b3Quc2NhbGUueCwgc2NhbGUsIEBwaXZvdC5zY2FsZS56KVxuICAgICAgICAgICAgQHBpdm90LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6c2NhbGVZJywgdmFsdWU6IEBzY2FsZVl9XG4gICAgXG4gICAgQGRlZmluZSAnc2NhbGVaJyxcbiAgICAgICAgZ2V0OiAtPiBAcGl2b3Quc2NhbGUueixcbiAgICAgICAgc2V0OiAoc2NhbGUpIC0+IFxuICAgICAgICAgICAgQHBpdm90LnNjYWxlLnNldChAcGl2b3Quc2NhbGUueCwgQHBpdm90LnNjYWxlLnksIHNjYWxlKVxuICAgICAgICAgICAgQHBpdm90LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6c2NhbGVaJywgdmFsdWU6IEBzY2FsZVp9XG5cbiAgICBAZGVmaW5lICdwb3NpdGlvbicsXG4gICAgICAgIGdldDogLT4gQHBpdm90LnBvc2l0aW9uXG5cbiAgICBAZGVmaW5lICd4JyxcbiAgICAgICAgZ2V0OiAtPiBAcGl2b3QucG9zaXRpb24ueCxcbiAgICAgICAgc2V0OiAoeCkgLT4gXG4gICAgICAgICAgICBAcGl2b3QucG9zaXRpb24ueCA9IHhcbiAgICAgICAgICAgIEBwaXZvdC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOngnLCB2YWx1ZTogQHh9XG4gICAgXG4gICAgQGRlZmluZSAneScsXG4gICAgICAgIGdldDogLT4gQHBpdm90LnBvc2l0aW9uLnksXG4gICAgICAgIHNldDogKHkpIC0+IFxuICAgICAgICAgICAgQHBpdm90LnBvc2l0aW9uLnkgPSB5XG4gICAgICAgICAgICBAcGl2b3QuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTp5JywgdmFsdWU6IEB5fVxuICAgIFxuICAgIEBkZWZpbmUgJ3onLFxuICAgICAgICBnZXQ6IC0+IEBwaXZvdC5wb3NpdGlvbi56LFxuICAgICAgICBzZXQ6ICh6KSAtPiBcbiAgICAgICAgICAgIEBwaXZvdC5wb3NpdGlvbi56ID0gelxuICAgICAgICAgICAgQHBpdm90LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6eicsIHZhbHVlOiBAen1cblxuICAgIEBkZWZpbmUgJ3JvdGF0aW9uJyxcbiAgICAgICAgZ2V0OiAtPiBAcGl2b3Qucm90YXRpb25cblxuICAgIEBkZWZpbmUgJ3JvdGF0aW9uWCcsXG4gICAgICAgIGdldDogLT4gVEhSRUUuTWF0aC5yYWRUb0RlZyhAcGl2b3Qucm90YXRpb24ueCksXG4gICAgICAgIHNldDogKHgpIC0+IFxuICAgICAgICAgICAgQHBpdm90LnJvdGF0aW9uLnggPSBUSFJFRS5NYXRoLmRlZ1RvUmFkKHgpXG4gICAgICAgICAgICBAcGl2b3QuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTpyb3RhdGlvblgnLCB2YWx1ZTogQHJvdGF0aW9uWH1cbiAgICBcbiAgICBAZGVmaW5lICdyb3RhdGlvblknLFxuICAgICAgICBnZXQ6IC0+IFRIUkVFLk1hdGgucmFkVG9EZWcoQHBpdm90LnJvdGF0aW9uLnkpLFxuICAgICAgICBzZXQ6ICh5KSAtPiBcbiAgICAgICAgICAgIEBwaXZvdC5yb3RhdGlvbi55ID0gVEhSRUUuTWF0aC5kZWdUb1JhZCh5KVxuICAgICAgICAgICAgQHBpdm90LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6cm90YXRpb25ZJywgdmFsdWU6IEByb3RhdGlvbll9XG4gICAgXG4gICAgQGRlZmluZSAncm90YXRpb25aJyxcbiAgICAgICAgZ2V0OiAtPiBUSFJFRS5NYXRoLnJhZFRvRGVnKEBwaXZvdC5yb3RhdGlvbi56KSxcbiAgICAgICAgc2V0OiAoeikgLT4gXG4gICAgICAgICAgICBAcGl2b3Qucm90YXRpb24ueiA9IFRIUkVFLk1hdGguZGVnVG9SYWQoeilcbiAgICAgICAgICAgIEBwaXZvdC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOnJvdGF0aW9uWicsIHZhbHVlOiBAcm90YXRpb25afVxuICAgIFxuICAgIEBkZWZpbmUgJ21pZFgnLFxuICAgICAgICBzZXQ6IChtaWRYKSAtPiBAbWVzaC5wb3NpdGlvbi54ID0gLW1pZFhcbiAgICBcbiAgICBAZGVmaW5lICdtaWRZJyxcbiAgICAgICAgc2V0OiAobWlkWSkgLT4gQG1lc2gucG9zaXRpb24ueSA9IC1taWRZXG4gICAgXG4gICAgQGRlZmluZSAnbWlkWicsXG4gICAgICAgIHNldDogKG1pZFopIC0+IEBtZXNoLnBvc2l0aW9uLnogPSAtbWlkWlxuXG4gICAgQGRlZmluZSAncGFyZW50JyxcbiAgICAgICAgZ2V0OiAtPiBAcGl2b3QucGFyZW50LFxuICAgICAgICBzZXQ6IChwYXJlbnQpIC0+IFxuICAgICAgICAgICAgQHBpdm90LnBhcmVudCA9IHBhcmVudFxuICAgICAgICAgICAgQHBpdm90LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6cGFyZW50JywgdmFsdWU6IEBwYXJlbnR9XG4gICAgXG4gICAgQGRlZmluZSAndmlzaWJsZScsXG4gICAgICAgIGdldDogLT4gQHBpdm90LnZpc2libGVcbiAgICAgICAgc2V0OiAoYm9vbCkgLT4gXG4gICAgICAgICAgICBAcGl2b3QudmlzaWJsZSA9IGJvb2xcbiAgICAgICAgICAgIEBwaXZvdC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOnZpc2libGUnLCB2YWx1ZTogQHZpc2libGV9XG4gICAgXG4gICAgQGRlZmluZSAnY2hpbGRyZW4nLFxuICAgICAgICBnZXQ6IC0+IEBwaXZvdC5jaGlsZHJlblxuICAgIFxuICAgIEBkZWZpbmUgJ3NpemUnLFxuICAgICAgICBnZXQ6IC0+IHtcbiAgICAgICAgICAgIGhlaWdodDogQGJvdW5kaW5nQm94Lm1heC55IC0gQGJvdW5kaW5nQm94Lm1pbi55XG4gICAgICAgICAgICB3aWR0aDogQGJvdW5kaW5nQm94Lm1heC54IC0gQGJvdW5kaW5nQm94Lm1pbi54XG4gICAgICAgICAgICBkZXB0aDogQGJvdW5kaW5nQm94Lm1heC56IC0gQGJvdW5kaW5nQm94Lm1pbi56XG4gICAgICAgIH1cbiAgICBcbiAgICBAZGVmaW5lICdzdGF0ZXMnLFxuICAgICAgICBnZXQ6IC0+XG4gICAgICAgICAgICBAX3N0YXRlcy5zdGF0ZXNcbiAgICAgICAgc2V0OiAoc3RhdGVzKSAtPlxuICAgICAgICAgICAgXy5leHRlbmQgQHN0YXRlcywgc3RhdGVzXG4gICAgXG4gICAgQGRlZmluZSAnYW5pbWF0aW9uQ2xpcCcsXG4gICAgICAgIGdldDogLT4gQGFuaW1hdGlvbkluZGV4ICsgMSxcbiAgICAgICAgc2V0OiAoYW5pbWF0aW9uKSAtPiBcbiAgICAgICAgICAgIGlmIEBtZXNoLmFuaW1hdGlvbnNbYW5pbWF0aW9uIC0gMV1cbiAgICAgICAgICAgICAgICBAYW5pbWF0aW9uSW5kZXggPSBhbmltYXRpb24gLSAxXG4gICAgICAgICAgICAgICAgQGFjdGlvbiA9IEBtZXNoLm1peGVyLmNsaXBBY3Rpb24gQG1lc2guYW5pbWF0aW9uc1tAYW5pbWF0aW9uSW5kZXhdXG4gICAgICAgICAgICAgICAgQGFjdGlvbi5wbGF5KCkiLCJfID0gRnJhbWVyLl9cblxuY2xhc3MgZXhwb3J0cy5NZXNoIGV4dGVuZHMgVEhSRUUuTWVzaFxuXG4gICAgQGRlZmluZSA9IChwcm9wZXJ0eU5hbWUsIGRlc2NyaXB0b3IpIC0+XG4gICAgICAgIGlmIGRlc2NyaXB0b3IucmVhZG9ubHlcbiAgICAgICAgICAgIGRlc2NyaXB0b3Iuc2V0ID0gKHZhbHVlKSAtPlxuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKFwiI3tAY29uc3RydWN0b3IubmFtZX0uI3twcm9wZXJ0eU5hbWV9IGlzIHJlYWRvbmx5XCIpXG5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEBwcm90b3R5cGUsIHByb3BlcnR5TmFtZSwgZGVzY3JpcHRvcilcblxuICAgIGNvbnN0cnVjdG9yOiAocHJvcGVydGllcz17fSkgLT5cbiAgICAgICAgc3VwZXIgcHJvcGVydGllcy5nZW9tZXRyeSwgcHJvcGVydGllcy5tYXRlcmlhbFxuXG4gICAgICAgIF8uZGVmYXVsdHMgcHJvcGVydGllcyxcbiAgICAgICAgICAgIGNhc3RTaGFkb3c6IHRydWVcbiAgICAgICAgICAgIHJlY2VpdmVTaGFkb3c6IHRydWVcblxuICAgICAgICBAc2V0dXBTaGFkb3dTZXR0aW5ncyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgaWYgcHJvcGVydGllcy5wYXJlbnRcbiAgICAgICAgICAgIEBhZGRUb1JlbmRlcmluZ0luc3RhbmNlIHByb3BlcnRpZXMucGFyZW50XG4gICAgICAgIFxuICAgICAgICBAc2V0U2NhbGUgcHJvcGVydGllcy5zY2FsZSwgcHJvcGVydGllcy5zY2FsZVgsIHByb3BlcnRpZXMuc2NhbGVZLCBwcm9wZXJ0aWVzLnNjYWxlWlxuICAgICAgICBAc2V0UG9zaXRpb24gW3Byb3BlcnRpZXMueCwgcHJvcGVydGllcy55LCBwcm9wZXJ0aWVzLnpdXG4gICAgICAgIEBzZXRSb3RhdGlvbiBbcHJvcGVydGllcy5yb3RhdGlvblgsIHByb3BlcnRpZXMucm90YXRpb25ZLCBwcm9wZXJ0aWVzLnJvdGF0aW9uWl1cblxuICAgIHNldHVwU2hhZG93U2V0dGluZ3M6IChwcm9wZXJ0aWVzKSAtPlxuICAgICAgICBAY2FzdFNoYWRvdyA9IHByb3BlcnRpZXMuY2FzdFNoYWRvd1xuICAgICAgICBAcmVjZWl2ZVNoYWRvdyA9IHByb3BlcnRpZXMucmVjZWl2ZVNoYWRvd1xuXG4gICAgYWRkVG9SZW5kZXJpbmdJbnN0YW5jZTogKHBhcmVudCkgLT5cbiAgICAgICAgaWYgcGFyZW50LnNjZW5lIHRoZW4gcGFyZW50LnNjZW5lLmFkZCBAXG4gICAgICAgIGVsc2UgcGFyZW50LmFkZCBAXG5cbiAgICBzZXRTY2FsZTogKHVuaWZvcm1TY2FsZSwgc2NhbGVYLCBzY2FsZVksIHNjYWxlWikgLT5cbiAgICAgICAgaWYgdW5pZm9ybVNjYWxlXG4gICAgICAgICAgICBAc2NhbGUgPSB1bmlmb3JtU2NhbGUgfHwgMVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBAc2NhbGVYID0gc2NhbGVYIHx8IDFcbiAgICAgICAgICAgIEBzY2FsZVkgPSBzY2FsZVkgfHwgMVxuICAgICAgICAgICAgQHNjYWxlWiA9IHNjYWxlWiB8fCAxXG4gICAgXG4gICAgc2V0UG9zaXRpb246IChwb3NpdGlvbikgLT5cbiAgICAgICAgQHggPSBwb3NpdGlvblswXSB8fCAwXG4gICAgICAgIEB5ID0gcG9zaXRpb25bMV0gfHwgMFxuICAgICAgICBAeiA9IHBvc2l0aW9uWzJdIHx8IDBcblxuICAgIHNldFJvdGF0aW9uOiAocm90YXRpb24pIC0+XG4gICAgICAgIEByb3RhdGlvblggPSByb3RhdGlvblswXSB8fCAwXG4gICAgICAgIEByb3RhdGlvblkgPSByb3RhdGlvblsxXSB8fCAwXG4gICAgICAgIEByb3RhdGlvblogPSByb3RhdGlvblsyXSB8fCAwXG5cbiAgICBAZGVmaW5lICdzY2FsZScsXG4gICAgICAgIGdldDogLT4gQHNjYWxlLngsXG4gICAgICAgIHNldDogKHNjYWxlKSAtPiBAc2NhbGUuc2V0KHNjYWxlLCBzY2FsZSwgc2NhbGUpXG4gICAgXG4gICAgQGRlZmluZSAnc2NhbGVYJyxcbiAgICAgICAgZ2V0OiAtPiBAc2NhbGUueCxcbiAgICAgICAgc2V0OiAoc2NhbGUpIC0+IEBzY2FsZS5zZXQoc2NhbGUsIEBzY2FsZS55LCBAc2NhbGUueilcblxuICAgIEBkZWZpbmUgJ3NjYWxlWScsXG4gICAgICAgIGdldDogLT4gQHNjYWxlLnksXG4gICAgICAgIHNldDogKHNjYWxlKSAtPiBAc2NhbGUuc2V0KEBzY2FsZS54LCBzY2FsZSwgQHNjYWxlLnopXG4gICAgXG4gICAgQGRlZmluZSAnc2NhbGVaJyxcbiAgICAgICAgZ2V0OiAtPiBAc2NhbGUueixcbiAgICAgICAgc2V0OiAoc2NhbGUpIC0+IEBzY2FsZS5zZXQoQHNjYWxlLngsIEBzY2FsZS55LCBzY2FsZSlcblxuICAgIEBkZWZpbmUgJ3gnLFxuICAgICAgICBnZXQ6IC0+IEBwb3NpdGlvbi54LFxuICAgICAgICBzZXQ6ICh4KSAtPiBAcG9zaXRpb24ueCA9IHhcbiAgICBcbiAgICBAZGVmaW5lICd5JyxcbiAgICAgICAgZ2V0OiAtPiBAcG9zaXRpb24ueSxcbiAgICAgICAgc2V0OiAoeSkgLT4gQHBvc2l0aW9uLnkgPSB5XG4gICAgXG4gICAgQGRlZmluZSAneicsXG4gICAgICAgIGdldDogLT4gQHBvc2l0aW9uLnosXG4gICAgICAgIHNldDogKHopIC0+IEBwb3NpdGlvbi56ID0gelxuXG4gICAgQGRlZmluZSAncm90YXRpb25YJyxcbiAgICAgICAgZ2V0OiAtPiBUSFJFRS5NYXRoLnJhZFRvRGVnKEByb3RhdGlvbi54KSxcbiAgICAgICAgc2V0OiAoeCkgLT4gQHJvdGF0aW9uLnggPSBUSFJFRS5NYXRoLmRlZ1RvUmFkKHgpXG4gICAgXG4gICAgQGRlZmluZSAncm90YXRpb25ZJyxcbiAgICAgICAgZ2V0OiAtPiBUSFJFRS5NYXRoLnJhZFRvRGVnKEByb3RhdGlvbi55KSxcbiAgICAgICAgc2V0OiAoeSkgLT4gQHJvdGF0aW9uLnkgPSBUSFJFRS5NYXRoLmRlZ1RvUmFkKHkpXG4gICAgXG4gICAgQGRlZmluZSAncm90YXRpb25aJyxcbiAgICAgICAgZ2V0OiAtPiBUSFJFRS5NYXRoLnJhZFRvRGVnKEByb3RhdGlvbi56KSxcbiAgICAgICAgc2V0OiAoeikgLT4gQHJvdGF0aW9uLnogPSBUSFJFRS5NYXRoLmRlZ1RvUmFkKHopIiwiXyA9IEZyYW1lci5fXG5cbntCYXNlQ2xhc3N9ID0gcmVxdWlyZSAnLi9fQmFzZUNsYXNzLmNvZmZlZSdcbntBbmltYXRpb259ID0gcmVxdWlyZSAnLi9fQW5pbWF0aW9uLmNvZmZlZSdcbntTdGF0ZXN9ID0gcmVxdWlyZSAnLi9fU3RhdGVzLmNvZmZlZSdcblxuY2xhc3MgZXhwb3J0cy5MaWdodCBleHRlbmRzIEJhc2VDbGFzc1xuICAgIGNvbnN0cnVjdG9yOiAocHJvcGVydGllcykgLT5cbiAgICAgICAgc3VwZXIoKVxuXG4gICAgICAgIGlmICFwcm9wZXJ0aWVzLnR5cGVcbiAgICAgICAgICAgIHRocm93IEVycm9yICdQbGVhc2Ugc3BlY2lmeSBhIGxpZ2h0IHR5cGUhJ1xuICAgICAgICBcbiAgICAgICAgQHByb3BlcnRpZXMgPSBfLmRlZmF1bHRzIHByb3BlcnRpZXMsXG4gICAgICAgICAgICBjYXN0U2hhZG93OiB0cnVlXG5cbiAgICAgICAgQHNldHVwTGlnaHQoKVxuXG4gICAgc2V0dXBMaWdodDogLT5cbiAgICAgICAgc3dpdGNoIEBwcm9wZXJ0aWVzLnR5cGVcbiAgICAgICAgICAgIHdoZW4gJ3BvaW50J1xuICAgICAgICAgICAgICAgIEBsaWdodCA9IG5ldyBUSFJFRS5Qb2ludExpZ2h0KFxuICAgICAgICAgICAgICAgICAgICBuZXcgVEhSRUUuQ29sb3IgQHByb3BlcnRpZXMuY29sb3IsIFxuICAgICAgICAgICAgICAgICAgICBAcHJvcGVydGllcy5pbnRlbnNpdHksIFxuICAgICAgICAgICAgICAgICAgICBAcHJvcGVydGllcy5kaXN0YW5jZSwgXG4gICAgICAgICAgICAgICAgICAgIEBwcm9wZXJ0aWVzLmRlY2F5XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgd2hlbiAnZGlyZWN0aW9uYWwnXG4gICAgICAgICAgICAgICAgQGxpZ2h0ID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoXG4gICAgICAgICAgICAgICAgICAgIG5ldyBUSFJFRS5Db2xvciBAcHJvcGVydGllcy5jb2xvciwgXG4gICAgICAgICAgICAgICAgICAgIEBwcm9wZXJ0aWVzLmludGVuc2l0eVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIHdoZW4gJ2FtYmllbnQnXG4gICAgICAgICAgICAgICAgQGxpZ2h0ID0gbmV3IFRIUkVFLkFtYmllbnRMaWdodChcbiAgICAgICAgICAgICAgICAgICAgbmV3IFRIUkVFLkNvbG9yIEBwcm9wZXJ0aWVzLmNvbG9yLCBcbiAgICAgICAgICAgICAgICAgICAgQHByb3BlcnRpZXMuaW50ZW5zaXR5XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgd2hlbiAnaGVtaXNwaGVyZSdcbiAgICAgICAgICAgICAgICBAbGlnaHQgPSBuZXcgVEhSRUUuSGVtaXNwaGVyZUxpZ2h0KFxuICAgICAgICAgICAgICAgICAgICBuZXcgVEhSRUUuQ29sb3IgQHByb3BlcnRpZXMuc2t5Q29sb3IsIFxuICAgICAgICAgICAgICAgICAgICBuZXcgVEhSRUUuQ29sb3IgQHByb3BlcnRpZXMuZ3JvdW5kQ29sb3IsIFxuICAgICAgICAgICAgICAgICAgICBAcHJvcGVydGllcy5pbnRlbnNpdHlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICB3aGVuICdyZWN0YXJlYSdcbiAgICAgICAgICAgICAgICBAbGlnaHQgPSBuZXcgVEhSRUUuUmVjdEFyZWFMaWdodChcbiAgICAgICAgICAgICAgICAgICAgbmV3IFRIUkVFLkNvbG9yIEBwcm9wZXJ0aWVzLmNvbG9yLCBcbiAgICAgICAgICAgICAgICAgICAgQHByb3BlcnRpZXMuaW50ZW5zaXR5LCBcbiAgICAgICAgICAgICAgICAgICAgQHByb3BlcnRpZXMud2lkdGgsIFxuICAgICAgICAgICAgICAgICAgICBAcHJvcGVydGllcy5oZWlnaHRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICB3aGVuICdzcG90J1xuICAgICAgICAgICAgICAgIEBsaWdodCA9IG5ldyBUSFJFRS5TcG90TGlnaHQoXG4gICAgICAgICAgICAgICAgICAgIG5ldyBUSFJFRS5Db2xvciBAcHJvcGVydGllcy5jb2xvciwgXG4gICAgICAgICAgICAgICAgICAgIEBwcm9wZXJ0aWVzLmludGVuc2l0eSwgXG4gICAgICAgICAgICAgICAgICAgIEBwcm9wZXJ0aWVzLmRpc3RhbmNlLCBcbiAgICAgICAgICAgICAgICAgICAgQHByb3BlcnRpZXMuYW5nbGUsIFxuICAgICAgICAgICAgICAgICAgICBAcHJvcGVydGllcy5wZW51bWJyYSwgXG4gICAgICAgICAgICAgICAgICAgIEBwcm9wZXJ0aWVzLmRlY2F5XG4gICAgICAgICAgICAgICAgKVxuXG4gICAgICAgIEBhZGRUb1JlbmRlcmluZ0luc3RhbmNlIEBwcm9wZXJ0aWVzLnBhcmVudFxuXG4gICAgICAgIEBhcHBseVByb3BlcnRpZXMoKVxuXG4gICAgICAgIEBzYXZlSW5pdGlhbFByb3BlcnRpZXMoKVxuICAgICAgICBcbiAgICAgICAgQF9zdGF0ZXMgPSBuZXcgU3RhdGVzIEBcblxuICAgIGFkZFRvUmVuZGVyaW5nSW5zdGFuY2U6IChwYXJlbnQpIC0+XG4gICAgICAgIGlmIHBhcmVudC5zY2VuZSB0aGVuIHBhcmVudC5zY2VuZS5hZGQgQGxpZ2h0XG4gICAgICAgIGVsc2UgcGFyZW50LmFkZCBAbGlnaHRcbiAgICBcbiAgICBhcHBseVByb3BlcnRpZXM6IChwcm9wZXJ0aWVzKSAtPlxuICAgICAgICBPYmplY3Qua2V5cyhAcHJvcGVydGllcykubWFwIChrKSA9PlxuICAgICAgICAgICAgQFtrXSA9IEBwcm9wZXJ0aWVzW2tdXG5cbiAgICBzYXZlSW5pdGlhbFByb3BlcnRpZXM6ICgpIC0+XG4gICAgICAgIEBpbml0aWFsUHJvcGVydGllcyA9IEBcblxuICAgIG9uOiAoZXZlbnROYW1lLCBjYikgLT5cblxuICAgICAgICBpZiBldmVudE5hbWUuaW5jbHVkZXMgJ2NoYW5nZSdcbiAgICAgICAgICAgIGNhbGxiYWNrID0gKGUpIC0+IGNiKGUudmFsdWUpXG4gICAgICAgICAgICBAbGlnaHQuYWRkRXZlbnRMaXN0ZW5lciBldmVudE5hbWUsIGNhbGxiYWNrXG5cbiAgICAgICAgICAgIEZyYW1lci5DdXJyZW50Q29udGV4dC5vbiAncmVzZXQnLCA9PlxuICAgICAgICAgICAgICAgIEBsaWdodC5yZW1vdmVFdmVudExpc3RlbmVyIGV2ZW50TmFtZSwgY2FsbGJhY2tcblxuICAgIGFuaW1hdGU6IChwcm9wZXJ0aWVzKSAtPlxuICAgICAgICBuZXcgQW5pbWF0aW9uIEAsIHByb3BlcnRpZXNcbiAgICBcbiAgICBsb29rQXQ6IChhLCBiLCBjKSAtPlxuICAgICAgICBpZiBhcmd1bWVudHMubGVuZ3RoID09IDFcbiAgICAgICAgICAgIEBsaWdodC5sb29rQXQgYVxuICAgICAgICBlbHNlIGlmIGFyZ3VtZW50cy5sZW5ndGggPT0gM1xuICAgICAgICAgICAgQGxpZ2h0Lmxvb2tBdCBhLCBiLCBjXG5cbiAgICBzdGF0ZVN3aXRjaDogKHN0YXRlKSAtPlxuICAgICAgICAjIExvb3AgdGhyb3VnaCBzdGF0ZXMgb24gbW9kZWwgdG8gZmluZCB0aGUgc3BlY2lmaWVkIG9uZVxuICAgICAgICBPYmplY3Qua2V5cyhAc3RhdGVzKS5tYXAgKGspID0+IFxuICAgICAgICAgICAgaWYgayA9PSBzdGF0ZVxuICAgICAgICAgICAgICAgIEBzdGF0ZXMuY3VycmVudCA9IEBzdGF0ZXNba11cblxuICAgICAgICAgICAgICAgICMgTG9vcCB0aHJvdWdoIHByb3BlcnR5IGtleXMgb24gdGhlIHN0YXRlIGFuZCBhcHBseSB0aGUgdmFsdWVzIHRvIG1vZGVsXG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoQHN0YXRlcy5jdXJyZW50KS5tYXAgKHBrKSAgPT5cbiAgICAgICAgICAgICAgICAgICAgQFtwa10gPSBAc3RhdGVzLmN1cnJlbnRbcGtdXG4gICAgXG4gICAgc3RhdGVDeWNsZTogKHN0YXRlQSwgc3RhdGVCKSAtPlxuICAgICAgICAjIENoZWNrIGlmIHN0YXRlQSBvciBzdGF0ZUIgYWxyZWFkeSBpcyB0aGUgY3VycmVudCBzdGF0ZSBvbiBtb2RlbFxuICAgICAgICBpZiBAc3RhdGVzLmN1cnJlbnQgPT0gQHN0YXRlc1tzdGF0ZUFdIHx8IEBzdGF0ZXMuY3VycmVudCA9PSBAc3RhdGVzW3N0YXRlQl1cbiAgICAgICAgICAgIGlmIEBzdGF0ZXMuY3VycmVudCA9PSBAc3RhdGVzW3N0YXRlQV0gdGhlbiBAYW5pbWF0ZSBzdGF0ZUJcbiAgICAgICAgICAgIGVsc2UgaWYgQHN0YXRlcy5jdXJyZW50ID09IEBzdGF0ZXNbc3RhdGVCXSB0aGVuIEBhbmltYXRlIHN0YXRlQVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICAjIElmIG5laXRoZXIgYXJlIGN1cnJlbnQsIGFuaW1hdGUgdG8gc3RhdGVBXG4gICAgICAgICAgICBAYW5pbWF0ZSBzdGF0ZUFcblxuXG4gICAgIyBHRU5FUklDIE9CSkVDVDNEIFBST1BFUlRJRVNcblxuICAgIEBkZWZpbmUgJ3Bvc2l0aW9uJyxcbiAgICAgICAgZ2V0OiAtPiBAbGlnaHQucG9zaXRpb25cblxuICAgIEBkZWZpbmUgJ3gnLFxuICAgICAgICBnZXQ6IC0+IEBsaWdodC5wb3NpdGlvbi54LFxuICAgICAgICBzZXQ6ICh4KSAtPiBcbiAgICAgICAgICAgIEBsaWdodC5wb3NpdGlvbi54ID0geFxuICAgICAgICAgICAgQGxpZ2h0LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6eCcsIHZhbHVlOiBAeH1cbiAgICBcbiAgICBAZGVmaW5lICd5JyxcbiAgICAgICAgZ2V0OiAtPiBAbGlnaHQucG9zaXRpb24ueSxcbiAgICAgICAgc2V0OiAoeSkgLT4gXG4gICAgICAgICAgICBAbGlnaHQucG9zaXRpb24ueSA9IHlcbiAgICAgICAgICAgIEBsaWdodC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOnknLCB2YWx1ZTogQHl9XG4gICAgXG4gICAgQGRlZmluZSAneicsXG4gICAgICAgIGdldDogLT4gQGxpZ2h0LnBvc2l0aW9uLnosXG4gICAgICAgIHNldDogKHopIC0+IFxuICAgICAgICAgICAgQGxpZ2h0LnBvc2l0aW9uLnogPSB6XG4gICAgICAgICAgICBAbGlnaHQuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTp6JywgdmFsdWU6IEB6fVxuXG4gICAgQGRlZmluZSAncm90YXRpb24nLFxuICAgICAgICBnZXQ6IC0+IEBsaWdodC5yb3RhdGlvblxuXG4gICAgQGRlZmluZSAncm90YXRpb25YJyxcbiAgICAgICAgZ2V0OiAtPiBUSFJFRS5NYXRoLnJhZFRvRGVnKEBsaWdodC5yb3RhdGlvbi54KSxcbiAgICAgICAgc2V0OiAoeCkgLT4gXG4gICAgICAgICAgICBAbGlnaHQucm90YXRpb24ueCA9IFRIUkVFLk1hdGguZGVnVG9SYWQoeClcbiAgICAgICAgICAgIEBsaWdodC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOnJvdGF0aW9uWCcsIHZhbHVlOiBAcm90YXRpb25YfVxuICAgIFxuICAgIEBkZWZpbmUgJ3JvdGF0aW9uWScsXG4gICAgICAgIGdldDogLT4gVEhSRUUuTWF0aC5yYWRUb0RlZyhAbGlnaHQucm90YXRpb24ueSksXG4gICAgICAgIHNldDogKHkpIC0+IFxuICAgICAgICAgICAgQGxpZ2h0LnJvdGF0aW9uLnkgPSBUSFJFRS5NYXRoLmRlZ1RvUmFkKHkpXG4gICAgICAgICAgICBAbGlnaHQuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTpyb3RhdGlvblknLCB2YWx1ZTogQHJvdGF0aW9uWX1cbiAgICBcbiAgICBAZGVmaW5lICdyb3RhdGlvblonLFxuICAgICAgICBnZXQ6IC0+IFRIUkVFLk1hdGgucmFkVG9EZWcoQGxpZ2h0LnJvdGF0aW9uLnopLFxuICAgICAgICBzZXQ6ICh6KSAtPiBcbiAgICAgICAgICAgIEBsaWdodC5yb3RhdGlvbi56ID0gVEhSRUUuTWF0aC5kZWdUb1JhZCh6KVxuICAgICAgICAgICAgQGxpZ2h0LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6cm90YXRpb25aJywgdmFsdWU6IEByb3RhdGlvblp9XG4gICAgXG4gICAgQGRlZmluZSAndmlzaWJsZScsXG4gICAgICAgIGdldDogLT4gQGxpZ2h0LnZpc2libGVcbiAgICAgICAgc2V0OiAoYm9vbCkgLT4gXG4gICAgICAgICAgICBAbGlnaHQudmlzaWJsZSA9IGJvb2xcbiAgICAgICAgICAgIEBsaWdodC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOnZpc2libGUnLCB2YWx1ZTogQHZpc2libGV9XG4gICAgXG4gICAgQGRlZmluZSAnc3RhdGVzJyxcbiAgICAgICAgZ2V0OiAtPlxuICAgICAgICAgICAgQF9zdGF0ZXMuc3RhdGVzXG4gICAgICAgIHNldDogKHN0YXRlcykgLT5cbiAgICAgICAgICAgIF8uZXh0ZW5kIEBzdGF0ZXMsIHN0YXRlc1xuXG4gICAgIyBMSUdIVCBQUk9QRVJUSUVTXG5cbiAgICBAZGVmaW5lICdjb2xvcicsXG4gICAgICAgIGdldDogLT4gQGxpZ2h0LmNvbG9yXG4gICAgICAgIHNldDogKGNvbG9yKSAtPlxuICAgICAgICAgICAgQGxpZ2h0LmNvbG9yID0gbmV3IFRIUkVFLkNvbG9yIGNvbG9yXG4gICAgICAgICAgICBAbGlnaHQuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTpjb2xvcicsIHZhbHVlOiBAY29sb3J9XG4gICAgXG4gICAgQGRlZmluZSAnaW50ZW5zaXR5JyxcbiAgICAgICAgZ2V0OiAtPiBAbGlnaHQuaW50ZW5zaXR5XG4gICAgICAgIHNldDogKGludGVuc2l0eSkgLT5cbiAgICAgICAgICAgIEBsaWdodC5pbnRlbnNpdHkgPSBpbnRlbnNpdHlcbiAgICAgICAgICAgIEBsaWdodC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOmludGVuc2l0eScsIHZhbHVlOiBAaW50ZW5zaXR5fVxuXG4gICAgQGRlZmluZSAnYW5nbGUnLFxuICAgICAgICBnZXQ6IC0+IEBsaWdodC5hbmdsZVxuICAgICAgICBzZXQ6IChhbmdsZSkgLT5cbiAgICAgICAgICAgIEBsaWdodC5hbmdsZSA9IGFuZ2xlXG4gICAgICAgICAgICBAbGlnaHQuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTphbmdsZScsIHZhbHVlOiBAYW5nbGV9XG4gICAgXG4gICAgQGRlZmluZSAnY2FzdFNoYWRvdycsXG4gICAgICAgIGdldDogLT4gQGxpZ2h0LmNhc3RTaGFkb3dcbiAgICAgICAgc2V0OiAoYm9vbCkgLT5cbiAgICAgICAgICAgIEBsaWdodC5jYXN0U2hhZG93ID0gYm9vbFxuICAgICAgICAgICAgQGxpZ2h0LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6Y2FzdFNoYWRvdycsIHZhbHVlOiBAY2FzdFNoYWRvd31cbiAgICBcbiAgICBAZGVmaW5lICdkZWNheScsXG4gICAgICAgIGdldDogLT4gQGxpZ2h0LmRlY2F5XG4gICAgICAgIHNldDogKGRlY2F5KSAtPlxuICAgICAgICAgICAgQGxpZ2h0LmRlY2F5ID0gZGVjYXlcbiAgICAgICAgICAgIEBsaWdodC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOmRlY2F5JywgdmFsdWU6IEBkZWNheX1cbiAgICBcbiAgICBAZGVmaW5lICdkaXN0YW5jZScsXG4gICAgICAgIGdldDogLT4gQGxpZ2h0LmRpc3RhbmNlXG4gICAgICAgIHNldDogKGRpc3RhbmNlKSAtPlxuICAgICAgICAgICAgQGxpZ2h0LmRpc3RhbmNlID0gZGlzdGFuY2VcbiAgICAgICAgICAgIEBsaWdodC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOmRpc3RhbmNlJywgdmFsdWU6IEBkaXN0YW5jZX1cbiAgICBcbiAgICBAZGVmaW5lICdwZW51bWJyYScsXG4gICAgICAgIGdldDogLT4gQGxpZ2h0LnBlbnVtYnJhXG4gICAgICAgIHNldDogKHBlbnVtYnJhKSAtPlxuICAgICAgICAgICAgQGxpZ2h0LnBlbnVtYnJhID0gcGVudW1icmFcbiAgICAgICAgICAgIEBsaWdodC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOnBlbnVtYnJhJywgdmFsdWU6IEBwZW51bWJyYX1cbiAgICBcbiAgICBAZGVmaW5lICdwb3dlcicsXG4gICAgICAgIGdldDogLT4gQGxpZ2h0LnBvd2VyXG4gICAgICAgIHNldDogKHBvd2VyKSAtPlxuICAgICAgICAgICAgQGxpZ2h0LnBvd2VyID0gcG93ZXJcbiAgICAgICAgICAgIEBsaWdodC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOnBvd2VyJywgdmFsdWU6IEBwb3dlcn1cbiAgICBcbiAgICBAZGVmaW5lICdzaGFkb3cnLFxuICAgICAgICBnZXQ6IC0+IEBsaWdodC5zaGFkb3dcbiAgICAgICAgc2V0OiAoc2hhZG93KSAtPlxuICAgICAgICAgICAgQGxpZ2h0LnNoYWRvdyA9IHNoYWRvd1xuICAgIFxuICAgIEBkZWZpbmUgJ3RhcmdldCcsXG4gICAgICAgIGdldDogLT4gQGxpZ2h0LnRhcmdldFxuICAgICAgICBzZXQ6ICh0YXJnZXQpIC0+XG4gICAgICAgICAgICBAbGlnaHQudGFyZ2V0ID0gdGFyZ2V0XG4gICAgICAgICAgICBAbGlnaHQuZGlzcGF0Y2hFdmVudCB7dHlwZTogJ2NoYW5nZTp0YXJnZXQnLCB2YWx1ZTogQHRhcmdldH1cbiAgICBcbiAgICBAZGVmaW5lICd3aWR0aCcsXG4gICAgICAgIGdldDogLT4gQGxpZ2h0LndpZHRoXG4gICAgICAgIHNldDogKHdpZHRoKSAtPlxuICAgICAgICAgICAgQGxpZ2h0LndpZHRoID0gd2lkdGhcbiAgICAgICAgICAgIEBsaWdodC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOndpZHRoJywgdmFsdWU6IEB3aWR0aH1cbiAgICBcbiAgICBAZGVmaW5lICdoZWlnaHQnLFxuICAgICAgICBnZXQ6IC0+IEBsaWdodC5oZWlnaHRcbiAgICAgICAgc2V0OiAoaGVpZ2h0KSAtPlxuICAgICAgICAgICAgQGxpZ2h0LmhlaWdodCA9IGhlaWdodFxuICAgICAgICAgICAgQGxpZ2h0LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6aGVpZ2h0JywgdmFsdWU6IEBoZWlnaHR9XG4gICAgXG4gICAgQGRlZmluZSAnZ3JvdW5kQ29sb3InLFxuICAgICAgICBnZXQ6IC0+IEBsaWdodC5ncm91bmRDb2xvclxuICAgICAgICBzZXQ6IChncm91bmRDb2xvcikgLT5cbiAgICAgICAgICAgIEBsaWdodC5ncm91bmRDb2xvciA9IG5ldyBUSFJFRS5Db2xvciBncm91bmRDb2xvclxuICAgICAgICAgICAgQGxpZ2h0LmRpc3BhdGNoRXZlbnQge3R5cGU6ICdjaGFuZ2U6Z3JvdW5kQ29sb3InLCB2YWx1ZTogQGdyb3VuZENvbG9yfVxuICAgIFxuICAgIEBkZWZpbmUgJ3NreUNvbG9yJyxcbiAgICAgICAgZ2V0OiAtPiBAbGlnaHQuc2t5Q29sb3JcbiAgICAgICAgc2V0OiAoc2t5Q29sb3IpIC0+XG4gICAgICAgICAgICBAbGlnaHQuc2t5Q29sb3IgPSBuZXcgVEhSRUUuQ29sb3Igc2t5Q29sb3JcbiAgICAgICAgICAgIEBsaWdodC5kaXNwYXRjaEV2ZW50IHt0eXBlOiAnY2hhbmdlOnNreUNvbG9yJywgdmFsdWU6IEBza3lDb2xvcn0iLCJzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCAnc2NyaXB0J1xucy5zZXRBdHRyaWJ1dGUgJ3NyYycsICdodHRwczovL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbS9ndGFnL2pzP2lkPVVBLTc1MDU2NTMzLTMnXG5zLnNldEF0dHJpYnV0ZSAnYXN5bmMnLCAnJ1xuZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCBzXG5cbndpbmRvdy5kYXRhTGF5ZXIgPSB3aW5kb3cuZGF0YUxheWVyIHx8IFtdXG5cbndpbmRvdy5ndGFnID0gKCkgLT4gXG4gICAgZGF0YUxheWVyLnB1c2ggYXJndW1lbnRzXG53aW5kb3cuZ3RhZyAnanMnLCBuZXcgRGF0ZSgpXG53aW5kb3cuZ3RhZyAnY29uZmlnJywgJ1VBLTc1MDU2NTMzLTMnXG5cbmlmIHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluY2x1ZGVzICdmcmFtZXIuY2xvdWQnXG4gICAgd2luZG93Lmd0YWcgJ2V2ZW50JywgJ0Nsb3VkJyxcbiAgICAgICAgJ2V2ZW50X2NhdGVnb3J5JzogJ1Zpc2l0b3JzJ1xuZWxzZVxuICAgIHdpbmRvdy5ndGFnICdldmVudCcsICdOb24tQ2xvdWQnLFxuICAgICAgICAnZXZlbnRfY2F0ZWdvcnknOiAnVmlzaXRvcnMnIiwiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkF3QkFBO0FEQUEsSUFBQTs7QUFBQSxDQUFBLEdBQUksUUFBUSxDQUFDLGFBQVQsQ0FBdUIsUUFBdkI7O0FBQ0osQ0FBQyxDQUFDLFlBQUYsQ0FBZSxLQUFmLEVBQXNCLDJEQUF0Qjs7QUFDQSxDQUFDLENBQUMsWUFBRixDQUFlLE9BQWYsRUFBd0IsRUFBeEI7O0FBQ0EsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFkLENBQTBCLENBQTFCOztBQUVBLE1BQU0sQ0FBQyxTQUFQLEdBQW1CLE1BQU0sQ0FBQyxTQUFQLElBQW9COztBQUV2QyxNQUFNLENBQUMsSUFBUCxHQUFjLFNBQUE7U0FDVixTQUFTLENBQUMsSUFBVixDQUFlLFNBQWY7QUFEVTs7QUFFZCxNQUFNLENBQUMsSUFBUCxDQUFZLElBQVosRUFBc0IsSUFBQSxJQUFBLENBQUEsQ0FBdEI7O0FBQ0EsTUFBTSxDQUFDLElBQVAsQ0FBWSxRQUFaLEVBQXNCLGVBQXRCOztBQUVBLElBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBckIsQ0FBOEIsY0FBOUIsQ0FBSDtFQUNJLE1BQU0sQ0FBQyxJQUFQLENBQVksT0FBWixFQUFxQixPQUFyQixFQUNJO0lBQUEsZ0JBQUEsRUFBa0IsVUFBbEI7R0FESixFQURKO0NBQUEsTUFBQTtFQUlJLE1BQU0sQ0FBQyxJQUFQLENBQVksT0FBWixFQUFxQixXQUFyQixFQUNJO0lBQUEsZ0JBQUEsRUFBa0IsVUFBbEI7R0FESixFQUpKOzs7OztBRFpBLElBQUEsK0JBQUE7RUFBQTs7O0FBQUEsQ0FBQSxHQUFJLE1BQU0sQ0FBQzs7QUFFVixZQUFhLE9BQUEsQ0FBUSxxQkFBUjs7QUFDYixZQUFhLE9BQUEsQ0FBUSxxQkFBUjs7QUFDYixTQUFVLE9BQUEsQ0FBUSxrQkFBUjs7QUFFTCxPQUFPLENBQUM7OztFQUNHLGVBQUMsVUFBRDtJQUNULHFDQUFBO0lBRUEsSUFBRyxDQUFDLFVBQVUsQ0FBQyxJQUFmO0FBQ0ksWUFBTSxLQUFBLENBQU0sOEJBQU4sRUFEVjs7SUFHQSxJQUFDLENBQUEsVUFBRCxHQUFjLENBQUMsQ0FBQyxRQUFGLENBQVcsVUFBWCxFQUNWO01BQUEsVUFBQSxFQUFZLElBQVo7S0FEVTtJQUdkLElBQUMsQ0FBQSxVQUFELENBQUE7RUFUUzs7a0JBV2IsVUFBQSxHQUFZLFNBQUE7QUFDUixZQUFPLElBQUMsQ0FBQSxVQUFVLENBQUMsSUFBbkI7QUFBQSxXQUNTLE9BRFQ7UUFFUSxJQUFDLENBQUEsS0FBRCxHQUFhLElBQUEsS0FBSyxDQUFDLFVBQU4sQ0FDTCxJQUFBLEtBQUssQ0FBQyxLQUFOLENBQVksSUFBQyxDQUFBLFVBQVUsQ0FBQyxLQUF4QixFQUNKLElBQUMsQ0FBQSxVQUFVLENBQUMsU0FEUixFQUVKLElBQUMsQ0FBQSxVQUFVLENBQUMsUUFGUixFQUdKLElBQUMsQ0FBQSxVQUFVLENBQUMsS0FIUixDQURLO0FBRFo7QUFEVCxXQVFTLGFBUlQ7UUFTUSxJQUFDLENBQUEsS0FBRCxHQUFhLElBQUEsS0FBSyxDQUFDLGdCQUFOLENBQ0wsSUFBQSxLQUFLLENBQUMsS0FBTixDQUFZLElBQUMsQ0FBQSxVQUFVLENBQUMsS0FBeEIsRUFDSixJQUFDLENBQUEsVUFBVSxDQUFDLFNBRFIsQ0FESztBQURaO0FBUlQsV0FhUyxTQWJUO1FBY1EsSUFBQyxDQUFBLEtBQUQsR0FBYSxJQUFBLEtBQUssQ0FBQyxZQUFOLENBQ0wsSUFBQSxLQUFLLENBQUMsS0FBTixDQUFZLElBQUMsQ0FBQSxVQUFVLENBQUMsS0FBeEIsRUFDSixJQUFDLENBQUEsVUFBVSxDQUFDLFNBRFIsQ0FESztBQURaO0FBYlQsV0FrQlMsWUFsQlQ7UUFtQlEsSUFBQyxDQUFBLEtBQUQsR0FBYSxJQUFBLEtBQUssQ0FBQyxlQUFOLENBQ0wsSUFBQSxLQUFLLENBQUMsS0FBTixDQUFZLElBQUMsQ0FBQSxVQUFVLENBQUMsUUFBeEIsRUFDQSxJQUFBLEtBQUssQ0FBQyxLQUFOLENBQVksSUFBQyxDQUFBLFVBQVUsQ0FBQyxXQUF4QixFQUNKLElBQUMsQ0FBQSxVQUFVLENBQUMsU0FEUixDQURBLENBREs7QUFEWjtBQWxCVCxXQXdCUyxVQXhCVDtRQXlCUSxJQUFDLENBQUEsS0FBRCxHQUFhLElBQUEsS0FBSyxDQUFDLGFBQU4sQ0FDTCxJQUFBLEtBQUssQ0FBQyxLQUFOLENBQVksSUFBQyxDQUFBLFVBQVUsQ0FBQyxLQUF4QixFQUNKLElBQUMsQ0FBQSxVQUFVLENBQUMsU0FEUixFQUVKLElBQUMsQ0FBQSxVQUFVLENBQUMsS0FGUixFQUdKLElBQUMsQ0FBQSxVQUFVLENBQUMsTUFIUixDQURLO0FBRFo7QUF4QlQsV0ErQlMsTUEvQlQ7UUFnQ1EsSUFBQyxDQUFBLEtBQUQsR0FBYSxJQUFBLEtBQUssQ0FBQyxTQUFOLENBQ0wsSUFBQSxLQUFLLENBQUMsS0FBTixDQUFZLElBQUMsQ0FBQSxVQUFVLENBQUMsS0FBeEIsRUFDSixJQUFDLENBQUEsVUFBVSxDQUFDLFNBRFIsRUFFSixJQUFDLENBQUEsVUFBVSxDQUFDLFFBRlIsRUFHSixJQUFDLENBQUEsVUFBVSxDQUFDLEtBSFIsRUFJSixJQUFDLENBQUEsVUFBVSxDQUFDLFFBSlIsRUFLSixJQUFDLENBQUEsVUFBVSxDQUFDLEtBTFIsQ0FESztBQWhDckI7SUF5Q0EsSUFBQyxDQUFBLHNCQUFELENBQXdCLElBQUMsQ0FBQSxVQUFVLENBQUMsTUFBcEM7SUFFQSxJQUFDLENBQUEsZUFBRCxDQUFBO0lBRUEsSUFBQyxDQUFBLHFCQUFELENBQUE7V0FFQSxJQUFDLENBQUEsT0FBRCxHQUFlLElBQUEsTUFBQSxDQUFPLElBQVA7RUFoRFA7O2tCQWtEWixzQkFBQSxHQUF3QixTQUFDLE1BQUQ7SUFDcEIsSUFBRyxNQUFNLENBQUMsS0FBVjthQUFxQixNQUFNLENBQUMsS0FBSyxDQUFDLEdBQWIsQ0FBaUIsSUFBQyxDQUFBLEtBQWxCLEVBQXJCO0tBQUEsTUFBQTthQUNLLE1BQU0sQ0FBQyxHQUFQLENBQVcsSUFBQyxDQUFBLEtBQVosRUFETDs7RUFEb0I7O2tCQUl4QixlQUFBLEdBQWlCLFNBQUMsVUFBRDtXQUNiLE1BQU0sQ0FBQyxJQUFQLENBQVksSUFBQyxDQUFBLFVBQWIsQ0FBd0IsQ0FBQyxHQUF6QixDQUE2QixDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsQ0FBRDtlQUN6QixLQUFFLENBQUEsQ0FBQSxDQUFGLEdBQU8sS0FBQyxDQUFBLFVBQVcsQ0FBQSxDQUFBO01BRE07SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQTdCO0VBRGE7O2tCQUlqQixxQkFBQSxHQUF1QixTQUFBO1dBQ25CLElBQUMsQ0FBQSxpQkFBRCxHQUFxQjtFQURGOztrQkFHdkIsRUFBQSxHQUFJLFNBQUMsU0FBRCxFQUFZLEVBQVo7QUFFQSxRQUFBO0lBQUEsSUFBRyxTQUFTLENBQUMsUUFBVixDQUFtQixRQUFuQixDQUFIO01BQ0ksUUFBQSxHQUFXLFNBQUMsQ0FBRDtlQUFPLEVBQUEsQ0FBRyxDQUFDLENBQUMsS0FBTDtNQUFQO01BQ1gsSUFBQyxDQUFBLEtBQUssQ0FBQyxnQkFBUCxDQUF3QixTQUF4QixFQUFtQyxRQUFuQzthQUVBLE1BQU0sQ0FBQyxjQUFjLENBQUMsRUFBdEIsQ0FBeUIsT0FBekIsRUFBa0MsQ0FBQSxTQUFBLEtBQUE7ZUFBQSxTQUFBO2lCQUM5QixLQUFDLENBQUEsS0FBSyxDQUFDLG1CQUFQLENBQTJCLFNBQTNCLEVBQXNDLFFBQXRDO1FBRDhCO01BQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFsQyxFQUpKOztFQUZBOztrQkFTSixPQUFBLEdBQVMsU0FBQyxVQUFEO1dBQ0QsSUFBQSxTQUFBLENBQVUsSUFBVixFQUFhLFVBQWI7RUFEQzs7a0JBR1QsTUFBQSxHQUFRLFNBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQO0lBQ0osSUFBRyxTQUFTLENBQUMsTUFBVixLQUFvQixDQUF2QjthQUNJLElBQUMsQ0FBQSxLQUFLLENBQUMsTUFBUCxDQUFjLENBQWQsRUFESjtLQUFBLE1BRUssSUFBRyxTQUFTLENBQUMsTUFBVixLQUFvQixDQUF2QjthQUNELElBQUMsQ0FBQSxLQUFLLENBQUMsTUFBUCxDQUFjLENBQWQsRUFBaUIsQ0FBakIsRUFBb0IsQ0FBcEIsRUFEQzs7RUFIRDs7a0JBTVIsV0FBQSxHQUFhLFNBQUMsS0FBRDtXQUVULE1BQU0sQ0FBQyxJQUFQLENBQVksSUFBQyxDQUFBLE1BQWIsQ0FBb0IsQ0FBQyxHQUFyQixDQUF5QixDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsQ0FBRDtRQUNyQixJQUFHLENBQUEsS0FBSyxLQUFSO1VBQ0ksS0FBQyxDQUFBLE1BQU0sQ0FBQyxPQUFSLEdBQWtCLEtBQUMsQ0FBQSxNQUFPLENBQUEsQ0FBQTtpQkFHMUIsTUFBTSxDQUFDLElBQVAsQ0FBWSxLQUFDLENBQUEsTUFBTSxDQUFDLE9BQXBCLENBQTRCLENBQUMsR0FBN0IsQ0FBaUMsU0FBQyxFQUFEO21CQUM3QixLQUFFLENBQUEsRUFBQSxDQUFGLEdBQVEsS0FBQyxDQUFBLE1BQU0sQ0FBQyxPQUFRLENBQUEsRUFBQTtVQURLLENBQWpDLEVBSko7O01BRHFCO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUF6QjtFQUZTOztrQkFVYixVQUFBLEdBQVksU0FBQyxNQUFELEVBQVMsTUFBVDtJQUVSLElBQUcsSUFBQyxDQUFBLE1BQU0sQ0FBQyxPQUFSLEtBQW1CLElBQUMsQ0FBQSxNQUFPLENBQUEsTUFBQSxDQUEzQixJQUFzQyxJQUFDLENBQUEsTUFBTSxDQUFDLE9BQVIsS0FBbUIsSUFBQyxDQUFBLE1BQU8sQ0FBQSxNQUFBLENBQXBFO01BQ0ksSUFBRyxJQUFDLENBQUEsTUFBTSxDQUFDLE9BQVIsS0FBbUIsSUFBQyxDQUFBLE1BQU8sQ0FBQSxNQUFBLENBQTlCO2VBQTJDLElBQUMsQ0FBQSxPQUFELENBQVMsTUFBVCxFQUEzQztPQUFBLE1BQ0ssSUFBRyxJQUFDLENBQUEsTUFBTSxDQUFDLE9BQVIsS0FBbUIsSUFBQyxDQUFBLE1BQU8sQ0FBQSxNQUFBLENBQTlCO2VBQTJDLElBQUMsQ0FBQSxPQUFELENBQVMsTUFBVCxFQUEzQztPQUZUO0tBQUEsTUFBQTthQUtJLElBQUMsQ0FBQSxPQUFELENBQVMsTUFBVCxFQUxKOztFQUZROztFQVlaLEtBQUMsQ0FBQSxNQUFELENBQVEsVUFBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsS0FBSyxDQUFDO0lBQVYsQ0FBTDtHQURKOztFQUdBLEtBQUMsQ0FBQSxNQUFELENBQVEsR0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsS0FBSyxDQUFDLFFBQVEsQ0FBQztJQUFuQixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsQ0FBRDtNQUNELElBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUSxDQUFDLENBQWhCLEdBQW9CO2FBQ3BCLElBQUMsQ0FBQSxLQUFLLENBQUMsYUFBUCxDQUFxQjtRQUFDLElBQUEsRUFBTSxVQUFQO1FBQW1CLEtBQUEsRUFBTyxJQUFDLENBQUEsQ0FBM0I7T0FBckI7SUFGQyxDQURMO0dBREo7O0VBTUEsS0FBQyxDQUFBLE1BQUQsQ0FBUSxHQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUSxDQUFDO0lBQW5CLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxDQUFEO01BQ0QsSUFBQyxDQUFBLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBaEIsR0FBb0I7YUFDcEIsSUFBQyxDQUFBLEtBQUssQ0FBQyxhQUFQLENBQXFCO1FBQUMsSUFBQSxFQUFNLFVBQVA7UUFBbUIsS0FBQSxFQUFPLElBQUMsQ0FBQSxDQUEzQjtPQUFyQjtJQUZDLENBREw7R0FESjs7RUFNQSxLQUFDLENBQUEsTUFBRCxDQUFRLEdBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLEtBQUssQ0FBQyxRQUFRLENBQUM7SUFBbkIsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLENBQUQ7TUFDRCxJQUFDLENBQUEsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFoQixHQUFvQjthQUNwQixJQUFDLENBQUEsS0FBSyxDQUFDLGFBQVAsQ0FBcUI7UUFBQyxJQUFBLEVBQU0sVUFBUDtRQUFtQixLQUFBLEVBQU8sSUFBQyxDQUFBLENBQTNCO09BQXJCO0lBRkMsQ0FETDtHQURKOztFQU1BLEtBQUMsQ0FBQSxNQUFELENBQVEsVUFBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsS0FBSyxDQUFDO0lBQVYsQ0FBTDtHQURKOztFQUdBLEtBQUMsQ0FBQSxNQUFELENBQVEsV0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVgsQ0FBb0IsSUFBQyxDQUFBLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBcEM7SUFBSCxDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsQ0FBRDtNQUNELElBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUSxDQUFDLENBQWhCLEdBQW9CLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBWCxDQUFvQixDQUFwQjthQUNwQixJQUFDLENBQUEsS0FBSyxDQUFDLGFBQVAsQ0FBcUI7UUFBQyxJQUFBLEVBQU0sa0JBQVA7UUFBMkIsS0FBQSxFQUFPLElBQUMsQ0FBQSxTQUFuQztPQUFyQjtJQUZDLENBREw7R0FESjs7RUFNQSxLQUFDLENBQUEsTUFBRCxDQUFRLFdBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFYLENBQW9CLElBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUSxDQUFDLENBQXBDO0lBQUgsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLENBQUQ7TUFDRCxJQUFDLENBQUEsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFoQixHQUFvQixLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVgsQ0FBb0IsQ0FBcEI7YUFDcEIsSUFBQyxDQUFBLEtBQUssQ0FBQyxhQUFQLENBQXFCO1FBQUMsSUFBQSxFQUFNLGtCQUFQO1FBQTJCLEtBQUEsRUFBTyxJQUFDLENBQUEsU0FBbkM7T0FBckI7SUFGQyxDQURMO0dBREo7O0VBTUEsS0FBQyxDQUFBLE1BQUQsQ0FBUSxXQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBWCxDQUFvQixJQUFDLENBQUEsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFwQztJQUFILENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxDQUFEO01BQ0QsSUFBQyxDQUFBLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBaEIsR0FBb0IsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFYLENBQW9CLENBQXBCO2FBQ3BCLElBQUMsQ0FBQSxLQUFLLENBQUMsYUFBUCxDQUFxQjtRQUFDLElBQUEsRUFBTSxrQkFBUDtRQUEyQixLQUFBLEVBQU8sSUFBQyxDQUFBLFNBQW5DO09BQXJCO0lBRkMsQ0FETDtHQURKOztFQU1BLEtBQUMsQ0FBQSxNQUFELENBQVEsU0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsS0FBSyxDQUFDO0lBQVYsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLElBQUQ7TUFDRCxJQUFDLENBQUEsS0FBSyxDQUFDLE9BQVAsR0FBaUI7YUFDakIsSUFBQyxDQUFBLEtBQUssQ0FBQyxhQUFQLENBQXFCO1FBQUMsSUFBQSxFQUFNLGdCQUFQO1FBQXlCLEtBQUEsRUFBTyxJQUFDLENBQUEsT0FBakM7T0FBckI7SUFGQyxDQURMO0dBREo7O0VBTUEsS0FBQyxDQUFBLE1BQUQsQ0FBUSxRQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUNELElBQUMsQ0FBQSxPQUFPLENBQUM7SUFEUixDQUFMO0lBRUEsR0FBQSxFQUFLLFNBQUMsTUFBRDthQUNELENBQUMsQ0FBQyxNQUFGLENBQVMsSUFBQyxDQUFBLE1BQVYsRUFBa0IsTUFBbEI7SUFEQyxDQUZMO0dBREo7O0VBUUEsS0FBQyxDQUFBLE1BQUQsQ0FBUSxPQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxLQUFLLENBQUM7SUFBVixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsS0FBRDtNQUNELElBQUMsQ0FBQSxLQUFLLENBQUMsS0FBUCxHQUFtQixJQUFBLEtBQUssQ0FBQyxLQUFOLENBQVksS0FBWjthQUNuQixJQUFDLENBQUEsS0FBSyxDQUFDLGFBQVAsQ0FBcUI7UUFBQyxJQUFBLEVBQU0sY0FBUDtRQUF1QixLQUFBLEVBQU8sSUFBQyxDQUFBLEtBQS9CO09BQXJCO0lBRkMsQ0FETDtHQURKOztFQU1BLEtBQUMsQ0FBQSxNQUFELENBQVEsV0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsS0FBSyxDQUFDO0lBQVYsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLFNBQUQ7TUFDRCxJQUFDLENBQUEsS0FBSyxDQUFDLFNBQVAsR0FBbUI7YUFDbkIsSUFBQyxDQUFBLEtBQUssQ0FBQyxhQUFQLENBQXFCO1FBQUMsSUFBQSxFQUFNLGtCQUFQO1FBQTJCLEtBQUEsRUFBTyxJQUFDLENBQUEsU0FBbkM7T0FBckI7SUFGQyxDQURMO0dBREo7O0VBTUEsS0FBQyxDQUFBLE1BQUQsQ0FBUSxPQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxLQUFLLENBQUM7SUFBVixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsS0FBRDtNQUNELElBQUMsQ0FBQSxLQUFLLENBQUMsS0FBUCxHQUFlO2FBQ2YsSUFBQyxDQUFBLEtBQUssQ0FBQyxhQUFQLENBQXFCO1FBQUMsSUFBQSxFQUFNLGNBQVA7UUFBdUIsS0FBQSxFQUFPLElBQUMsQ0FBQSxLQUEvQjtPQUFyQjtJQUZDLENBREw7R0FESjs7RUFNQSxLQUFDLENBQUEsTUFBRCxDQUFRLFlBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLEtBQUssQ0FBQztJQUFWLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxJQUFEO01BQ0QsSUFBQyxDQUFBLEtBQUssQ0FBQyxVQUFQLEdBQW9CO2FBQ3BCLElBQUMsQ0FBQSxLQUFLLENBQUMsYUFBUCxDQUFxQjtRQUFDLElBQUEsRUFBTSxtQkFBUDtRQUE0QixLQUFBLEVBQU8sSUFBQyxDQUFBLFVBQXBDO09BQXJCO0lBRkMsQ0FETDtHQURKOztFQU1BLEtBQUMsQ0FBQSxNQUFELENBQVEsT0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsS0FBSyxDQUFDO0lBQVYsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLEtBQUQ7TUFDRCxJQUFDLENBQUEsS0FBSyxDQUFDLEtBQVAsR0FBZTthQUNmLElBQUMsQ0FBQSxLQUFLLENBQUMsYUFBUCxDQUFxQjtRQUFDLElBQUEsRUFBTSxjQUFQO1FBQXVCLEtBQUEsRUFBTyxJQUFDLENBQUEsS0FBL0I7T0FBckI7SUFGQyxDQURMO0dBREo7O0VBTUEsS0FBQyxDQUFBLE1BQUQsQ0FBUSxVQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxLQUFLLENBQUM7SUFBVixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsUUFBRDtNQUNELElBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUCxHQUFrQjthQUNsQixJQUFDLENBQUEsS0FBSyxDQUFDLGFBQVAsQ0FBcUI7UUFBQyxJQUFBLEVBQU0saUJBQVA7UUFBMEIsS0FBQSxFQUFPLElBQUMsQ0FBQSxRQUFsQztPQUFyQjtJQUZDLENBREw7R0FESjs7RUFNQSxLQUFDLENBQUEsTUFBRCxDQUFRLFVBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLEtBQUssQ0FBQztJQUFWLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxRQUFEO01BQ0QsSUFBQyxDQUFBLEtBQUssQ0FBQyxRQUFQLEdBQWtCO2FBQ2xCLElBQUMsQ0FBQSxLQUFLLENBQUMsYUFBUCxDQUFxQjtRQUFDLElBQUEsRUFBTSxpQkFBUDtRQUEwQixLQUFBLEVBQU8sSUFBQyxDQUFBLFFBQWxDO09BQXJCO0lBRkMsQ0FETDtHQURKOztFQU1BLEtBQUMsQ0FBQSxNQUFELENBQVEsT0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsS0FBSyxDQUFDO0lBQVYsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLEtBQUQ7TUFDRCxJQUFDLENBQUEsS0FBSyxDQUFDLEtBQVAsR0FBZTthQUNmLElBQUMsQ0FBQSxLQUFLLENBQUMsYUFBUCxDQUFxQjtRQUFDLElBQUEsRUFBTSxjQUFQO1FBQXVCLEtBQUEsRUFBTyxJQUFDLENBQUEsS0FBL0I7T0FBckI7SUFGQyxDQURMO0dBREo7O0VBTUEsS0FBQyxDQUFBLE1BQUQsQ0FBUSxRQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxLQUFLLENBQUM7SUFBVixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsTUFBRDthQUNELElBQUMsQ0FBQSxLQUFLLENBQUMsTUFBUCxHQUFnQjtJQURmLENBREw7R0FESjs7RUFLQSxLQUFDLENBQUEsTUFBRCxDQUFRLFFBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLEtBQUssQ0FBQztJQUFWLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxNQUFEO01BQ0QsSUFBQyxDQUFBLEtBQUssQ0FBQyxNQUFQLEdBQWdCO2FBQ2hCLElBQUMsQ0FBQSxLQUFLLENBQUMsYUFBUCxDQUFxQjtRQUFDLElBQUEsRUFBTSxlQUFQO1FBQXdCLEtBQUEsRUFBTyxJQUFDLENBQUEsTUFBaEM7T0FBckI7SUFGQyxDQURMO0dBREo7O0VBTUEsS0FBQyxDQUFBLE1BQUQsQ0FBUSxPQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxLQUFLLENBQUM7SUFBVixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsS0FBRDtNQUNELElBQUMsQ0FBQSxLQUFLLENBQUMsS0FBUCxHQUFlO2FBQ2YsSUFBQyxDQUFBLEtBQUssQ0FBQyxhQUFQLENBQXFCO1FBQUMsSUFBQSxFQUFNLGNBQVA7UUFBdUIsS0FBQSxFQUFPLElBQUMsQ0FBQSxLQUEvQjtPQUFyQjtJQUZDLENBREw7R0FESjs7RUFNQSxLQUFDLENBQUEsTUFBRCxDQUFRLFFBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLEtBQUssQ0FBQztJQUFWLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxNQUFEO01BQ0QsSUFBQyxDQUFBLEtBQUssQ0FBQyxNQUFQLEdBQWdCO2FBQ2hCLElBQUMsQ0FBQSxLQUFLLENBQUMsYUFBUCxDQUFxQjtRQUFDLElBQUEsRUFBTSxlQUFQO1FBQXdCLEtBQUEsRUFBTyxJQUFDLENBQUEsTUFBaEM7T0FBckI7SUFGQyxDQURMO0dBREo7O0VBTUEsS0FBQyxDQUFBLE1BQUQsQ0FBUSxhQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxLQUFLLENBQUM7SUFBVixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsV0FBRDtNQUNELElBQUMsQ0FBQSxLQUFLLENBQUMsV0FBUCxHQUF5QixJQUFBLEtBQUssQ0FBQyxLQUFOLENBQVksV0FBWjthQUN6QixJQUFDLENBQUEsS0FBSyxDQUFDLGFBQVAsQ0FBcUI7UUFBQyxJQUFBLEVBQU0sb0JBQVA7UUFBNkIsS0FBQSxFQUFPLElBQUMsQ0FBQSxXQUFyQztPQUFyQjtJQUZDLENBREw7R0FESjs7RUFNQSxLQUFDLENBQUEsTUFBRCxDQUFRLFVBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLEtBQUssQ0FBQztJQUFWLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxRQUFEO01BQ0QsSUFBQyxDQUFBLEtBQUssQ0FBQyxRQUFQLEdBQXNCLElBQUEsS0FBSyxDQUFDLEtBQU4sQ0FBWSxRQUFaO2FBQ3RCLElBQUMsQ0FBQSxLQUFLLENBQUMsYUFBUCxDQUFxQjtRQUFDLElBQUEsRUFBTSxpQkFBUDtRQUEwQixLQUFBLEVBQU8sSUFBQyxDQUFBLFFBQWxDO09BQXJCO0lBRkMsQ0FETDtHQURKOzs7O0dBdFB3Qjs7OztBRE41QixJQUFBLENBQUE7RUFBQTs7O0FBQUEsQ0FBQSxHQUFJLE1BQU0sQ0FBQzs7QUFFTCxPQUFPLENBQUM7OztFQUVWLElBQUMsQ0FBQSxNQUFELEdBQVUsU0FBQyxZQUFELEVBQWUsVUFBZjtJQUNOLElBQUcsVUFBVSxDQUFDLFFBQWQ7TUFDSSxVQUFVLENBQUMsR0FBWCxHQUFpQixTQUFDLEtBQUQ7QUFDYixjQUFNLEtBQUEsQ0FBUyxJQUFDLENBQUEsV0FBVyxDQUFDLElBQWQsR0FBbUIsR0FBbkIsR0FBc0IsWUFBdEIsR0FBbUMsY0FBM0M7TUFETyxFQURyQjs7V0FJQSxNQUFNLENBQUMsY0FBUCxDQUFzQixJQUFDLENBQUEsU0FBdkIsRUFBa0MsWUFBbEMsRUFBZ0QsVUFBaEQ7RUFMTTs7RUFPRyxjQUFDLFVBQUQ7O01BQUMsYUFBVzs7SUFDckIsc0NBQU0sVUFBVSxDQUFDLFFBQWpCLEVBQTJCLFVBQVUsQ0FBQyxRQUF0QztJQUVBLENBQUMsQ0FBQyxRQUFGLENBQVcsVUFBWCxFQUNJO01BQUEsVUFBQSxFQUFZLElBQVo7TUFDQSxhQUFBLEVBQWUsSUFEZjtLQURKO0lBSUEsSUFBQyxDQUFBLG1CQUFELENBQXFCLFVBQXJCO0lBRUEsSUFBRyxVQUFVLENBQUMsTUFBZDtNQUNJLElBQUMsQ0FBQSxzQkFBRCxDQUF3QixVQUFVLENBQUMsTUFBbkMsRUFESjs7SUFHQSxJQUFDLENBQUEsUUFBRCxDQUFVLFVBQVUsQ0FBQyxLQUFyQixFQUE0QixVQUFVLENBQUMsTUFBdkMsRUFBK0MsVUFBVSxDQUFDLE1BQTFELEVBQWtFLFVBQVUsQ0FBQyxNQUE3RTtJQUNBLElBQUMsQ0FBQSxXQUFELENBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBWixFQUFlLFVBQVUsQ0FBQyxDQUExQixFQUE2QixVQUFVLENBQUMsQ0FBeEMsQ0FBYjtJQUNBLElBQUMsQ0FBQSxXQUFELENBQWEsQ0FBQyxVQUFVLENBQUMsU0FBWixFQUF1QixVQUFVLENBQUMsU0FBbEMsRUFBNkMsVUFBVSxDQUFDLFNBQXhELENBQWI7RUFkUzs7aUJBZ0JiLG1CQUFBLEdBQXFCLFNBQUMsVUFBRDtJQUNqQixJQUFDLENBQUEsVUFBRCxHQUFjLFVBQVUsQ0FBQztXQUN6QixJQUFDLENBQUEsYUFBRCxHQUFpQixVQUFVLENBQUM7RUFGWDs7aUJBSXJCLHNCQUFBLEdBQXdCLFNBQUMsTUFBRDtJQUNwQixJQUFHLE1BQU0sQ0FBQyxLQUFWO2FBQXFCLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBYixDQUFpQixJQUFqQixFQUFyQjtLQUFBLE1BQUE7YUFDSyxNQUFNLENBQUMsR0FBUCxDQUFXLElBQVgsRUFETDs7RUFEb0I7O2lCQUl4QixRQUFBLEdBQVUsU0FBQyxZQUFELEVBQWUsTUFBZixFQUF1QixNQUF2QixFQUErQixNQUEvQjtJQUNOLElBQUcsWUFBSDthQUNJLElBQUMsQ0FBQSxLQUFELEdBQVMsWUFBQSxJQUFnQixFQUQ3QjtLQUFBLE1BQUE7TUFHSSxJQUFDLENBQUEsTUFBRCxHQUFVLE1BQUEsSUFBVTtNQUNwQixJQUFDLENBQUEsTUFBRCxHQUFVLE1BQUEsSUFBVTthQUNwQixJQUFDLENBQUEsTUFBRCxHQUFVLE1BQUEsSUFBVSxFQUx4Qjs7RUFETTs7aUJBUVYsV0FBQSxHQUFhLFNBQUMsUUFBRDtJQUNULElBQUMsQ0FBQSxDQUFELEdBQUssUUFBUyxDQUFBLENBQUEsQ0FBVCxJQUFlO0lBQ3BCLElBQUMsQ0FBQSxDQUFELEdBQUssUUFBUyxDQUFBLENBQUEsQ0FBVCxJQUFlO1dBQ3BCLElBQUMsQ0FBQSxDQUFELEdBQUssUUFBUyxDQUFBLENBQUEsQ0FBVCxJQUFlO0VBSFg7O2lCQUtiLFdBQUEsR0FBYSxTQUFDLFFBQUQ7SUFDVCxJQUFDLENBQUEsU0FBRCxHQUFhLFFBQVMsQ0FBQSxDQUFBLENBQVQsSUFBZTtJQUM1QixJQUFDLENBQUEsU0FBRCxHQUFhLFFBQVMsQ0FBQSxDQUFBLENBQVQsSUFBZTtXQUM1QixJQUFDLENBQUEsU0FBRCxHQUFhLFFBQVMsQ0FBQSxDQUFBLENBQVQsSUFBZTtFQUhuQjs7RUFLYixJQUFDLENBQUEsTUFBRCxDQUFRLE9BQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLEtBQUssQ0FBQztJQUFWLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxLQUFEO2FBQVcsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsS0FBWCxFQUFrQixLQUFsQixFQUF5QixLQUF6QjtJQUFYLENBREw7R0FESjs7RUFJQSxJQUFDLENBQUEsTUFBRCxDQUFRLFFBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLEtBQUssQ0FBQztJQUFWLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxLQUFEO2FBQVcsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsS0FBWCxFQUFrQixJQUFDLENBQUEsS0FBSyxDQUFDLENBQXpCLEVBQTRCLElBQUMsQ0FBQSxLQUFLLENBQUMsQ0FBbkM7SUFBWCxDQURMO0dBREo7O0VBSUEsSUFBQyxDQUFBLE1BQUQsQ0FBUSxRQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxLQUFLLENBQUM7SUFBVixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsS0FBRDthQUFXLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLElBQUMsQ0FBQSxLQUFLLENBQUMsQ0FBbEIsRUFBcUIsS0FBckIsRUFBNEIsSUFBQyxDQUFBLEtBQUssQ0FBQyxDQUFuQztJQUFYLENBREw7R0FESjs7RUFJQSxJQUFDLENBQUEsTUFBRCxDQUFRLFFBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLEtBQUssQ0FBQztJQUFWLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxLQUFEO2FBQVcsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsSUFBQyxDQUFBLEtBQUssQ0FBQyxDQUFsQixFQUFxQixJQUFDLENBQUEsS0FBSyxDQUFDLENBQTVCLEVBQStCLEtBQS9CO0lBQVgsQ0FETDtHQURKOztFQUlBLElBQUMsQ0FBQSxNQUFELENBQVEsR0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsUUFBUSxDQUFDO0lBQWIsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLENBQUQ7YUFBTyxJQUFDLENBQUEsUUFBUSxDQUFDLENBQVYsR0FBYztJQUFyQixDQURMO0dBREo7O0VBSUEsSUFBQyxDQUFBLE1BQUQsQ0FBUSxHQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxRQUFRLENBQUM7SUFBYixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsQ0FBRDthQUFPLElBQUMsQ0FBQSxRQUFRLENBQUMsQ0FBVixHQUFjO0lBQXJCLENBREw7R0FESjs7RUFJQSxJQUFDLENBQUEsTUFBRCxDQUFRLEdBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLFFBQVEsQ0FBQztJQUFiLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxDQUFEO2FBQU8sSUFBQyxDQUFBLFFBQVEsQ0FBQyxDQUFWLEdBQWM7SUFBckIsQ0FETDtHQURKOztFQUlBLElBQUMsQ0FBQSxNQUFELENBQVEsV0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVgsQ0FBb0IsSUFBQyxDQUFBLFFBQVEsQ0FBQyxDQUE5QjtJQUFILENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxDQUFEO2FBQU8sSUFBQyxDQUFBLFFBQVEsQ0FBQyxDQUFWLEdBQWMsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFYLENBQW9CLENBQXBCO0lBQXJCLENBREw7R0FESjs7RUFJQSxJQUFDLENBQUEsTUFBRCxDQUFRLFdBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFYLENBQW9CLElBQUMsQ0FBQSxRQUFRLENBQUMsQ0FBOUI7SUFBSCxDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsQ0FBRDthQUFPLElBQUMsQ0FBQSxRQUFRLENBQUMsQ0FBVixHQUFjLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBWCxDQUFvQixDQUFwQjtJQUFyQixDQURMO0dBREo7O0VBSUEsSUFBQyxDQUFBLE1BQUQsQ0FBUSxXQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBWCxDQUFvQixJQUFDLENBQUEsUUFBUSxDQUFDLENBQTlCO0lBQUgsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLENBQUQ7YUFBTyxJQUFDLENBQUEsUUFBUSxDQUFDLENBQVYsR0FBYyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVgsQ0FBb0IsQ0FBcEI7SUFBckIsQ0FETDtHQURKOzs7O0dBdkZ1QixLQUFLLENBQUM7Ozs7QURGakMsSUFBQSxvRUFBQTtFQUFBOzs7O0FBQUEsQ0FBQSxHQUFJLE1BQU0sQ0FBQzs7QUFJVixZQUFhLE9BQUEsQ0FBUSxxQkFBUjs7QUFDYixZQUFhLE9BQUEsQ0FBUSxxQkFBUjs7QUFDYixTQUFVLE9BQUEsQ0FBUSxrQkFBUjs7QUFJVixNQUFPLE9BQUEsQ0FBUSxzQkFBUjs7QUFDUCxNQUFPLE9BQUEsQ0FBUSxzQkFBUjs7QUFDUCxPQUFRLE9BQUEsQ0FBUSx1QkFBUjs7QUFDUixVQUFXLE9BQUEsQ0FBUSwwQkFBUjs7QUFDWCxhQUFjLE9BQUEsQ0FBUSw2QkFBUjs7QUFFVCxPQUFPLENBQUM7OztFQUNHLGVBQUMsVUFBRDs7TUFBQyxhQUFXOzs7SUFDckIscUNBQUE7SUFFQSxDQUFDLENBQUMsUUFBRixDQUFXLFVBQVgsRUFDSTtNQUFBLE9BQUEsRUFBUyxJQUFUO01BQ0EsVUFBQSxFQUFZLElBRFo7TUFFQSxhQUFBLEVBQWUsSUFGZjtNQUdBLFVBQUEsRUFBWSxJQUhaO0tBREo7QUFNQSxZQUFPLElBQUMsQ0FBQSxZQUFELENBQWMsVUFBVSxDQUFDLElBQXpCLENBQVA7QUFBQSxXQUNTLEtBRFQ7UUFFWSxJQUFBLEdBQUEsQ0FBSSxVQUFKLEVBQWdCLENBQUEsU0FBQSxLQUFBO2lCQUFBLFNBQUMsS0FBRDtZQUNoQixLQUFDLENBQUEsSUFBRCxHQUFRO21CQUNSLEtBQUMsQ0FBQSxVQUFELENBQVksVUFBWjtVQUZnQjtRQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBaEI7QUFESDtBQURULFdBS1MsS0FMVDtRQU1ZLElBQUEsR0FBQSxDQUFJLFVBQUosRUFBZ0IsQ0FBQSxTQUFBLEtBQUE7aUJBQUEsU0FBQyxLQUFEO1lBQ2hCLEtBQUMsQ0FBQSxJQUFELEdBQVE7bUJBQ1IsS0FBQyxDQUFBLFVBQUQsQ0FBWSxVQUFaO1VBRmdCO1FBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFoQjtBQURIO0FBTFQsV0FTUyxNQUFBLElBQVUsS0FUbkI7UUFVWSxJQUFBLElBQUEsQ0FBSyxVQUFMLEVBQWlCLENBQUEsU0FBQSxLQUFBO2lCQUFBLFNBQUMsS0FBRDtZQUNqQixLQUFDLENBQUEsSUFBRCxHQUFRO21CQUNSLEtBQUMsQ0FBQSxVQUFELENBQVksVUFBWjtVQUZpQjtRQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBakI7QUFESDtBQVRULFdBYVMsS0FiVDtRQWNZLElBQUEsT0FBQSxDQUFRLFVBQVIsRUFBb0IsQ0FBQSxTQUFBLEtBQUE7aUJBQUEsU0FBQyxLQUFEO1lBQ3BCLEtBQUMsQ0FBQSxJQUFELEdBQVE7bUJBQ1IsS0FBQyxDQUFBLFVBQUQsQ0FBWSxVQUFaO1VBRm9CO1FBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFwQjtBQURIO0FBYlQsV0FpQlMsTUFqQlQ7UUFrQlksSUFBQSxVQUFBLENBQVcsVUFBWCxFQUF1QixDQUFBLFNBQUEsS0FBQTtpQkFBQSxTQUFDLEtBQUQ7WUFDdkIsS0FBQyxDQUFBLElBQUQsR0FBUTttQkFDUixLQUFDLENBQUEsVUFBRCxDQUFZLFVBQVo7VUFGdUI7UUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQXZCO0FBbEJaO0VBVFM7O2tCQWdDYixZQUFBLEdBQWMsU0FBQyxJQUFEO1dBQ1YsSUFBSSxDQUFDLEtBQUwsQ0FBVyxHQUFYLENBQWUsQ0FBQyxHQUFoQixDQUFBO0VBRFU7O2tCQUdkLFVBQUEsR0FBWSxTQUFDLFVBQUQ7SUFDUixJQUFHLFVBQVUsQ0FBQyxVQUFkO01BQ0ksSUFBQyxDQUFBLGNBQUQsQ0FBQSxFQURKOztJQUdBLElBQUMsQ0FBQSxLQUFELEdBQVMsSUFBSSxLQUFLLENBQUM7SUFDbkIsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsSUFBQyxDQUFBLElBQVo7SUFFQSxJQUFDLENBQUEscUJBQUQsQ0FBQTtJQUVBLElBQUcsVUFBVSxDQUFDLFFBQWQ7TUFDSSxJQUFDLENBQUEsYUFBRCxDQUFlLFVBQVUsQ0FBQyxRQUExQixFQURKOztJQUdBLElBQUMsQ0FBQSxtQkFBRCxDQUFxQixVQUFyQjtJQUVBLElBQUcsVUFBVSxDQUFDLGFBQWQ7TUFDSSxJQUFDLENBQUEsSUFBSSxDQUFDLFFBQU4sQ0FBZSxTQUFDLENBQUQ7UUFDWCxJQUFHLENBQUEsWUFBYSxLQUFLLENBQUMsSUFBdEI7aUJBQ0ksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxPQUFYLEdBQXFCLEtBQUssQ0FBQyxjQUQvQjs7TUFEVyxDQUFmLEVBREo7O0lBS0EsSUFBRyxVQUFVLENBQUMsT0FBWCxJQUFzQixJQUFDLENBQUEsSUFBSSxDQUFDLFVBQTVCLElBQTBDLElBQUMsQ0FBQSxJQUFJLENBQUMsVUFBVyxDQUFBLENBQUEsQ0FBOUQ7TUFDSSxJQUFDLENBQUEsZ0JBQUQsQ0FBa0IsVUFBbEIsRUFESjs7SUFHQSxJQUFHLFVBQVUsQ0FBQyxNQUFkO01BQ0ksSUFBQyxDQUFBLHNCQUFELENBQXdCLFVBQVUsQ0FBQyxNQUFuQyxFQURKOztJQUdBLElBQUMsQ0FBQSxRQUFELENBQVUsVUFBVSxDQUFDLEtBQXJCLEVBQTRCLFVBQVUsQ0FBQyxNQUF2QyxFQUErQyxVQUFVLENBQUMsTUFBMUQsRUFBa0UsVUFBVSxDQUFDLE1BQTdFO0lBQ0EsSUFBQyxDQUFBLFdBQUQsQ0FBYSxDQUFDLFVBQVUsQ0FBQyxDQUFaLEVBQWUsVUFBVSxDQUFDLENBQTFCLEVBQTZCLFVBQVUsQ0FBQyxDQUF4QyxDQUFiO0lBQ0EsSUFBQyxDQUFBLFdBQUQsQ0FBYSxDQUFDLFVBQVUsQ0FBQyxTQUFaLEVBQXVCLFVBQVUsQ0FBQyxTQUFsQyxFQUE2QyxVQUFVLENBQUMsU0FBeEQsQ0FBYjtJQUNBLElBQUMsQ0FBQSxNQUFELENBQ0k7TUFBQSxJQUFBLEVBQU0sVUFBVSxDQUFDLElBQWpCO01BQ0EsSUFBQSxFQUFNLFVBQVUsQ0FBQyxJQURqQjtNQUVBLElBQUEsRUFBTSxVQUFVLENBQUMsSUFGakI7S0FESjtJQU1BLElBQUcsVUFBVSxDQUFDLE9BQWQ7TUFDSSxJQUFDLENBQUEsT0FBRCxHQUFXLFVBQVUsQ0FBQyxRQUQxQjs7SUFHQSxJQUFDLENBQUEsT0FBRCxHQUFlLElBQUEsTUFBQSxDQUFPLElBQVA7SUFFZixJQUFHLFVBQVUsQ0FBQyxNQUFkO2FBQ0ksVUFBVSxDQUFDLE1BQVgsQ0FBa0IsSUFBbEIsRUFESjs7RUF2Q1E7O2tCQTBDWixjQUFBLEdBQWdCLFNBQUE7SUFDWixJQUFDLENBQUEsV0FBRCxHQUFtQixJQUFBLEtBQUssQ0FBQyxJQUFOLENBQUEsQ0FBWSxDQUFDLGFBQWIsQ0FBMkIsSUFBQyxDQUFBLElBQTVCO0lBQ25CLElBQUMsQ0FBQSxNQUFELEdBQVUsSUFBQyxDQUFBLFdBQVcsQ0FBQyxTQUFiLENBQXVCLElBQUMsQ0FBQSxJQUFJLENBQUMsUUFBN0I7V0FDVixJQUFDLENBQUEsSUFBSSxDQUFDLFFBQVEsQ0FBQyxjQUFmLENBQThCLENBQUMsQ0FBL0I7RUFIWTs7a0JBS2hCLHFCQUFBLEdBQXVCLFNBQUE7V0FDbkIsSUFBQyxDQUFBLGlCQUFELEdBQXFCO0VBREY7O2tCQUd2QixhQUFBLEdBQWUsU0FBQyxRQUFEO1dBQ1gsSUFBQyxDQUFBLElBQUksQ0FBQyxRQUFOLENBQWUsU0FBQyxDQUFEO01BQ1gsSUFBRyxDQUFBLFlBQWEsS0FBSyxDQUFDLElBQXRCO2VBQ0ksQ0FBQyxDQUFDLFFBQUYsR0FBYSxTQURqQjs7SUFEVyxDQUFmO0VBRFc7O2tCQUtmLG1CQUFBLEdBQXFCLFNBQUMsVUFBRDtXQUNqQixJQUFDLENBQUEsSUFBSSxDQUFDLFFBQU4sQ0FBZSxTQUFDLENBQUQ7TUFDWCxJQUFHLENBQUEsWUFBYSxLQUFLLENBQUMsSUFBdEI7UUFDSSxDQUFDLENBQUMsVUFBRixHQUFlLFVBQVUsQ0FBQztlQUMxQixDQUFDLENBQUMsYUFBRixHQUFrQixVQUFVLENBQUMsY0FGakM7O0lBRFcsQ0FBZjtFQURpQjs7a0JBTXJCLHNCQUFBLEdBQXdCLFNBQUMsTUFBRDtJQUNwQixJQUFHLE1BQU0sQ0FBQyxLQUFWO2FBQXFCLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBYixDQUFpQixJQUFDLENBQUEsS0FBbEIsRUFBckI7S0FBQSxNQUFBO2FBQ0ssTUFBTSxDQUFDLEdBQVAsQ0FBVyxJQUFDLENBQUEsS0FBWixFQURMOztFQURvQjs7a0JBSXhCLGdCQUFBLEdBQWtCLFNBQUMsVUFBRDtJQUNkLElBQUcsQ0FBQyxDQUFDLFFBQUYsQ0FBVyxVQUFVLENBQUMsYUFBdEIsQ0FBSDtNQUNJLElBQUMsQ0FBQSxjQUFELEdBQWtCLFVBQVUsQ0FBQyxhQUFYLEdBQTJCLEVBRGpEO0tBQUEsTUFBQTtNQUdJLElBQUMsQ0FBQSxjQUFELEdBQWtCLEVBSHRCOztJQUtBLElBQUMsQ0FBQSxLQUFELEdBQVMsSUFBSSxLQUFLLENBQUM7SUFDbkIsSUFBQyxDQUFBLElBQUksQ0FBQyxLQUFOLEdBQWtCLElBQUEsS0FBSyxDQUFDLGNBQU4sQ0FBcUIsSUFBQyxDQUFBLElBQXRCO0lBRWxCLElBQUMsQ0FBQSxNQUFELEdBQVUsSUFBQyxDQUFBLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBWixDQUF1QixJQUFDLENBQUEsSUFBSSxDQUFDLFVBQVcsQ0FBQSxJQUFDLENBQUEsY0FBRCxDQUF4QztJQUNWLElBQUMsQ0FBQSxNQUFNLENBQUMsSUFBUixDQUFBO0lBRUEsSUFBQyxDQUFBLFdBQUQsQ0FBQTtXQUVBLE1BQU0sQ0FBQyxjQUFjLENBQUMsRUFBdEIsQ0FBeUIsT0FBekIsRUFBa0MsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFBO2VBQzlCLG9CQUFBLENBQXFCLEtBQUMsQ0FBQSxjQUF0QjtNQUQ4QjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBbEM7RUFkYzs7a0JBaUJsQixXQUFBLEdBQWEsU0FBQTtJQUNULElBQUMsQ0FBQSxjQUFELEdBQWtCLHFCQUFBLENBQXNCLElBQUMsQ0FBQSxXQUF2QjtXQUNsQixJQUFDLENBQUEsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFaLENBQW1CLElBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUCxDQUFBLENBQW5CO0VBRlM7O2tCQUliLEVBQUEsR0FBSSxTQUFDLFNBQUQsRUFBWSxFQUFaO0FBRUEsUUFBQTtJQUFBLElBQUcsU0FBUyxDQUFDLFFBQVYsQ0FBbUIsUUFBbkIsQ0FBSDtNQUVJLFFBQUEsR0FBVyxTQUFDLENBQUQ7ZUFBTyxFQUFBLENBQUcsQ0FBQyxDQUFDLEtBQUw7TUFBUDtNQUVYLElBQUMsQ0FBQSxLQUFLLENBQUMsZ0JBQVAsQ0FBd0IsU0FBeEIsRUFBbUMsUUFBbkM7YUFFQSxNQUFNLENBQUMsY0FBYyxDQUFDLEVBQXRCLENBQXlCLE9BQXpCLEVBQWtDLENBQUEsU0FBQSxLQUFBO2VBQUEsU0FBQTtpQkFDOUIsS0FBQyxDQUFBLEtBQUssQ0FBQyxtQkFBUCxDQUEyQixTQUEzQixFQUFzQyxRQUF0QztRQUQ4QjtNQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBbEMsRUFOSjtLQUFBLE1BQUE7YUFVSSxJQUFDLENBQUEsSUFBSSxDQUFDLFFBQU4sQ0FBZSxTQUFDLENBQUQ7UUFDWCxJQUFHLENBQUEsWUFBYSxLQUFLLENBQUMsSUFBdEI7VUFFSSxRQUFBLEdBQVcsU0FBQTttQkFBTSxFQUFBLENBQUE7VUFBTjtVQUVYLENBQUMsQ0FBQyxnQkFBRixDQUFtQixTQUFuQixFQUE4QixRQUE5QjtpQkFFQSxNQUFNLENBQUMsY0FBYyxDQUFDLEVBQXRCLENBQXlCLE9BQXpCLEVBQWtDLENBQUEsU0FBQSxLQUFBO21CQUFBLFNBQUE7cUJBQzlCLENBQUMsQ0FBQyxtQkFBRixDQUFzQixTQUF0QixFQUFpQyxRQUFqQztZQUQ4QjtVQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBbEMsRUFOSjs7TUFEVyxDQUFmLEVBVko7O0VBRkE7O2tCQXVCSixRQUFBLEdBQVUsU0FBQyxZQUFELEVBQWUsTUFBZixFQUF1QixNQUF2QixFQUErQixNQUEvQjtJQUNOLElBQUcsWUFBSDthQUNJLElBQUMsQ0FBQSxLQUFELEdBQVMsWUFBQSxJQUFnQixFQUQ3QjtLQUFBLE1BQUE7TUFHSSxJQUFDLENBQUEsTUFBRCxHQUFVLE1BQUEsSUFBVTtNQUNwQixJQUFDLENBQUEsTUFBRCxHQUFVLE1BQUEsSUFBVTthQUNwQixJQUFDLENBQUEsTUFBRCxHQUFVLE1BQUEsSUFBVSxFQUx4Qjs7RUFETTs7a0JBUVYsV0FBQSxHQUFhLFNBQUMsUUFBRDtJQUNULElBQUMsQ0FBQSxDQUFELEdBQUssUUFBUyxDQUFBLENBQUEsQ0FBVCxJQUFlO0lBQ3BCLElBQUMsQ0FBQSxDQUFELEdBQUssUUFBUyxDQUFBLENBQUEsQ0FBVCxJQUFlO1dBQ3BCLElBQUMsQ0FBQSxDQUFELEdBQUssUUFBUyxDQUFBLENBQUEsQ0FBVCxJQUFlO0VBSFg7O2tCQUtiLFdBQUEsR0FBYSxTQUFDLFFBQUQ7SUFDVCxJQUFDLENBQUEsU0FBRCxHQUFhLFFBQVMsQ0FBQSxDQUFBLENBQVQsSUFBZTtJQUM1QixJQUFDLENBQUEsU0FBRCxHQUFhLFFBQVMsQ0FBQSxDQUFBLENBQVQsSUFBZTtXQUM1QixJQUFDLENBQUEsU0FBRCxHQUFhLFFBQVMsQ0FBQSxDQUFBLENBQVQsSUFBZTtFQUhuQjs7a0JBS2IsTUFBQSxHQUFRLFNBQUMsR0FBRDtXQUNKLE1BQU0sQ0FBQyxJQUFQLENBQVksR0FBWixDQUFnQixDQUFDLEdBQWpCLENBQXFCLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxDQUFEO1FBQ2pCLElBQUcsR0FBSSxDQUFBLENBQUEsQ0FBUDtpQkFDSSxLQUFFLENBQUEsQ0FBQSxDQUFGLEdBQU8sR0FBSSxDQUFBLENBQUEsRUFEZjs7TUFEaUI7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQXJCO0VBREk7O2tCQUtSLE9BQUEsR0FBUyxTQUFDLFVBQUQ7V0FDRCxJQUFBLFNBQUEsQ0FBVSxJQUFWLEVBQWEsVUFBYjtFQURDOztrQkFHVCxNQUFBLEdBQVEsU0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVA7SUFDSixJQUFHLFNBQVMsQ0FBQyxNQUFWLEtBQW9CLENBQXZCO2FBQ0ksSUFBQyxDQUFBLEtBQUssQ0FBQyxNQUFQLENBQWMsQ0FBZCxFQURKO0tBQUEsTUFFSyxJQUFHLFNBQVMsQ0FBQyxNQUFWLEtBQW9CLENBQXZCO2FBQ0QsSUFBQyxDQUFBLEtBQUssQ0FBQyxNQUFQLENBQWMsQ0FBZCxFQUFpQixDQUFqQixFQUFvQixDQUFwQixFQURDOztFQUhEOztrQkFNUixXQUFBLEdBQWEsU0FBQyxLQUFEO1dBRVQsTUFBTSxDQUFDLElBQVAsQ0FBWSxJQUFDLENBQUEsTUFBYixDQUFvQixDQUFDLEdBQXJCLENBQXlCLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxDQUFEO1FBQ3JCLElBQUcsQ0FBQSxLQUFLLEtBQVI7VUFDSSxLQUFDLENBQUEsTUFBTSxDQUFDLE9BQVIsR0FBa0IsS0FBQyxDQUFBLE1BQU8sQ0FBQSxDQUFBO2lCQUcxQixNQUFNLENBQUMsSUFBUCxDQUFZLEtBQUMsQ0FBQSxNQUFNLENBQUMsT0FBcEIsQ0FBNEIsQ0FBQyxHQUE3QixDQUFpQyxTQUFDLEVBQUQ7bUJBQzdCLEtBQUUsQ0FBQSxFQUFBLENBQUYsR0FBUSxLQUFDLENBQUEsTUFBTSxDQUFDLE9BQVEsQ0FBQSxFQUFBO1VBREssQ0FBakMsRUFKSjs7TUFEcUI7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQXpCO0VBRlM7O2tCQVViLFVBQUEsR0FBWSxTQUFDLE1BQUQsRUFBUyxNQUFUO0lBRVIsSUFBRyxJQUFDLENBQUEsTUFBTSxDQUFDLE9BQVIsS0FBbUIsSUFBQyxDQUFBLE1BQU8sQ0FBQSxNQUFBLENBQTNCLElBQXNDLElBQUMsQ0FBQSxNQUFNLENBQUMsT0FBUixLQUFtQixJQUFDLENBQUEsTUFBTyxDQUFBLE1BQUEsQ0FBcEU7TUFDSSxJQUFHLElBQUMsQ0FBQSxNQUFNLENBQUMsT0FBUixLQUFtQixJQUFDLENBQUEsTUFBTyxDQUFBLE1BQUEsQ0FBOUI7ZUFBMkMsSUFBQyxDQUFBLE9BQUQsQ0FBUyxNQUFULEVBQTNDO09BQUEsTUFDSyxJQUFHLElBQUMsQ0FBQSxNQUFNLENBQUMsT0FBUixLQUFtQixJQUFDLENBQUEsTUFBTyxDQUFBLE1BQUEsQ0FBOUI7ZUFBMkMsSUFBQyxDQUFBLE9BQUQsQ0FBUyxNQUFULEVBQTNDO09BRlQ7S0FBQSxNQUFBO2FBS0ksSUFBQyxDQUFBLE9BQUQsQ0FBUyxNQUFULEVBTEo7O0VBRlE7O0VBWVosS0FBQyxDQUFBLE1BQUQsQ0FBUSxPQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxLQUFLLENBQUMsS0FBSyxDQUFDO0lBQWhCLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxLQUFEO01BQ0QsSUFBQyxDQUFBLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBYixDQUFpQixLQUFqQixFQUF3QixLQUF4QixFQUErQixLQUEvQjthQUNBLElBQUMsQ0FBQSxLQUFLLENBQUMsYUFBUCxDQUFxQjtRQUFDLElBQUEsRUFBTSxjQUFQO1FBQXVCLEtBQUEsRUFBTyxJQUFDLENBQUEsS0FBL0I7T0FBckI7SUFGQyxDQURMO0dBREo7O0VBTUEsS0FBQyxDQUFBLE1BQUQsQ0FBUSxRQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxLQUFLLENBQUMsS0FBSyxDQUFDO0lBQWhCLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxLQUFEO01BQ0QsSUFBQyxDQUFBLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBYixDQUFpQixLQUFqQixFQUF3QixJQUFDLENBQUEsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFyQyxFQUF3QyxJQUFDLENBQUEsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFyRDthQUNBLElBQUMsQ0FBQSxLQUFLLENBQUMsYUFBUCxDQUFxQjtRQUFDLElBQUEsRUFBTSxlQUFQO1FBQXdCLEtBQUEsRUFBTyxJQUFDLENBQUEsTUFBaEM7T0FBckI7SUFGQyxDQURMO0dBREo7O0VBTUEsS0FBQyxDQUFBLE1BQUQsQ0FBUSxRQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxLQUFLLENBQUMsS0FBSyxDQUFDO0lBQWhCLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxLQUFEO01BQ0QsSUFBQyxDQUFBLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBYixDQUFpQixJQUFDLENBQUEsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUE5QixFQUFpQyxLQUFqQyxFQUF3QyxJQUFDLENBQUEsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFyRDthQUNBLElBQUMsQ0FBQSxLQUFLLENBQUMsYUFBUCxDQUFxQjtRQUFDLElBQUEsRUFBTSxlQUFQO1FBQXdCLEtBQUEsRUFBTyxJQUFDLENBQUEsTUFBaEM7T0FBckI7SUFGQyxDQURMO0dBREo7O0VBTUEsS0FBQyxDQUFBLE1BQUQsQ0FBUSxRQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxLQUFLLENBQUMsS0FBSyxDQUFDO0lBQWhCLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxLQUFEO01BQ0QsSUFBQyxDQUFBLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBYixDQUFpQixJQUFDLENBQUEsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUE5QixFQUFpQyxJQUFDLENBQUEsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUE5QyxFQUFpRCxLQUFqRDthQUNBLElBQUMsQ0FBQSxLQUFLLENBQUMsYUFBUCxDQUFxQjtRQUFDLElBQUEsRUFBTSxlQUFQO1FBQXdCLEtBQUEsRUFBTyxJQUFDLENBQUEsTUFBaEM7T0FBckI7SUFGQyxDQURMO0dBREo7O0VBTUEsS0FBQyxDQUFBLE1BQUQsQ0FBUSxVQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxLQUFLLENBQUM7SUFBVixDQUFMO0dBREo7O0VBR0EsS0FBQyxDQUFBLE1BQUQsQ0FBUSxHQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUSxDQUFDO0lBQW5CLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxDQUFEO01BQ0QsSUFBQyxDQUFBLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBaEIsR0FBb0I7YUFDcEIsSUFBQyxDQUFBLEtBQUssQ0FBQyxhQUFQLENBQXFCO1FBQUMsSUFBQSxFQUFNLFVBQVA7UUFBbUIsS0FBQSxFQUFPLElBQUMsQ0FBQSxDQUEzQjtPQUFyQjtJQUZDLENBREw7R0FESjs7RUFNQSxLQUFDLENBQUEsTUFBRCxDQUFRLEdBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLEtBQUssQ0FBQyxRQUFRLENBQUM7SUFBbkIsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLENBQUQ7TUFDRCxJQUFDLENBQUEsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFoQixHQUFvQjthQUNwQixJQUFDLENBQUEsS0FBSyxDQUFDLGFBQVAsQ0FBcUI7UUFBQyxJQUFBLEVBQU0sVUFBUDtRQUFtQixLQUFBLEVBQU8sSUFBQyxDQUFBLENBQTNCO09BQXJCO0lBRkMsQ0FETDtHQURKOztFQU1BLEtBQUMsQ0FBQSxNQUFELENBQVEsR0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsS0FBSyxDQUFDLFFBQVEsQ0FBQztJQUFuQixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsQ0FBRDtNQUNELElBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUSxDQUFDLENBQWhCLEdBQW9CO2FBQ3BCLElBQUMsQ0FBQSxLQUFLLENBQUMsYUFBUCxDQUFxQjtRQUFDLElBQUEsRUFBTSxVQUFQO1FBQW1CLEtBQUEsRUFBTyxJQUFDLENBQUEsQ0FBM0I7T0FBckI7SUFGQyxDQURMO0dBREo7O0VBTUEsS0FBQyxDQUFBLE1BQUQsQ0FBUSxVQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxLQUFLLENBQUM7SUFBVixDQUFMO0dBREo7O0VBR0EsS0FBQyxDQUFBLE1BQUQsQ0FBUSxXQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBWCxDQUFvQixJQUFDLENBQUEsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFwQztJQUFILENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxDQUFEO01BQ0QsSUFBQyxDQUFBLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBaEIsR0FBb0IsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFYLENBQW9CLENBQXBCO2FBQ3BCLElBQUMsQ0FBQSxLQUFLLENBQUMsYUFBUCxDQUFxQjtRQUFDLElBQUEsRUFBTSxrQkFBUDtRQUEyQixLQUFBLEVBQU8sSUFBQyxDQUFBLFNBQW5DO09BQXJCO0lBRkMsQ0FETDtHQURKOztFQU1BLEtBQUMsQ0FBQSxNQUFELENBQVEsV0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVgsQ0FBb0IsSUFBQyxDQUFBLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBcEM7SUFBSCxDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsQ0FBRDtNQUNELElBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUSxDQUFDLENBQWhCLEdBQW9CLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBWCxDQUFvQixDQUFwQjthQUNwQixJQUFDLENBQUEsS0FBSyxDQUFDLGFBQVAsQ0FBcUI7UUFBQyxJQUFBLEVBQU0sa0JBQVA7UUFBMkIsS0FBQSxFQUFPLElBQUMsQ0FBQSxTQUFuQztPQUFyQjtJQUZDLENBREw7R0FESjs7RUFNQSxLQUFDLENBQUEsTUFBRCxDQUFRLFdBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFYLENBQW9CLElBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUSxDQUFDLENBQXBDO0lBQUgsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLENBQUQ7TUFDRCxJQUFDLENBQUEsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFoQixHQUFvQixLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVgsQ0FBb0IsQ0FBcEI7YUFDcEIsSUFBQyxDQUFBLEtBQUssQ0FBQyxhQUFQLENBQXFCO1FBQUMsSUFBQSxFQUFNLGtCQUFQO1FBQTJCLEtBQUEsRUFBTyxJQUFDLENBQUEsU0FBbkM7T0FBckI7SUFGQyxDQURMO0dBREo7O0VBTUEsS0FBQyxDQUFBLE1BQUQsQ0FBUSxNQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQyxJQUFEO2FBQVUsSUFBQyxDQUFBLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBZixHQUFtQixDQUFDO0lBQTlCLENBQUw7R0FESjs7RUFHQSxLQUFDLENBQUEsTUFBRCxDQUFRLE1BQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFDLElBQUQ7YUFBVSxJQUFDLENBQUEsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFmLEdBQW1CLENBQUM7SUFBOUIsQ0FBTDtHQURKOztFQUdBLEtBQUMsQ0FBQSxNQUFELENBQVEsTUFBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUMsSUFBRDthQUFVLElBQUMsQ0FBQSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQWYsR0FBbUIsQ0FBQztJQUE5QixDQUFMO0dBREo7O0VBR0EsS0FBQyxDQUFBLE1BQUQsQ0FBUSxRQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxLQUFLLENBQUM7SUFBVixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsTUFBRDtNQUNELElBQUMsQ0FBQSxLQUFLLENBQUMsTUFBUCxHQUFnQjthQUNoQixJQUFDLENBQUEsS0FBSyxDQUFDLGFBQVAsQ0FBcUI7UUFBQyxJQUFBLEVBQU0sZUFBUDtRQUF3QixLQUFBLEVBQU8sSUFBQyxDQUFBLE1BQWhDO09BQXJCO0lBRkMsQ0FETDtHQURKOztFQU1BLEtBQUMsQ0FBQSxNQUFELENBQVEsU0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsS0FBSyxDQUFDO0lBQVYsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLElBQUQ7TUFDRCxJQUFDLENBQUEsS0FBSyxDQUFDLE9BQVAsR0FBaUI7YUFDakIsSUFBQyxDQUFBLEtBQUssQ0FBQyxhQUFQLENBQXFCO1FBQUMsSUFBQSxFQUFNLGdCQUFQO1FBQXlCLEtBQUEsRUFBTyxJQUFDLENBQUEsT0FBakM7T0FBckI7SUFGQyxDQURMO0dBREo7O0VBTUEsS0FBQyxDQUFBLE1BQUQsQ0FBUSxVQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxLQUFLLENBQUM7SUFBVixDQUFMO0dBREo7O0VBR0EsS0FBQyxDQUFBLE1BQUQsQ0FBUSxNQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHO1FBQ0osTUFBQSxFQUFRLElBQUMsQ0FBQSxXQUFXLENBQUMsR0FBRyxDQUFDLENBQWpCLEdBQXFCLElBQUMsQ0FBQSxXQUFXLENBQUMsR0FBRyxDQUFDLENBRDFDO1FBRUosS0FBQSxFQUFPLElBQUMsQ0FBQSxXQUFXLENBQUMsR0FBRyxDQUFDLENBQWpCLEdBQXFCLElBQUMsQ0FBQSxXQUFXLENBQUMsR0FBRyxDQUFDLENBRnpDO1FBR0osS0FBQSxFQUFPLElBQUMsQ0FBQSxXQUFXLENBQUMsR0FBRyxDQUFDLENBQWpCLEdBQXFCLElBQUMsQ0FBQSxXQUFXLENBQUMsR0FBRyxDQUFDLENBSHpDOztJQUFILENBQUw7R0FESjs7RUFPQSxLQUFDLENBQUEsTUFBRCxDQUFRLFFBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQ0QsSUFBQyxDQUFBLE9BQU8sQ0FBQztJQURSLENBQUw7SUFFQSxHQUFBLEVBQUssU0FBQyxNQUFEO2FBQ0QsQ0FBQyxDQUFDLE1BQUYsQ0FBUyxJQUFDLENBQUEsTUFBVixFQUFrQixNQUFsQjtJQURDLENBRkw7R0FESjs7RUFNQSxLQUFDLENBQUEsTUFBRCxDQUFRLGVBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLGNBQUQsR0FBa0I7SUFBckIsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLFNBQUQ7TUFDRCxJQUFHLElBQUMsQ0FBQSxJQUFJLENBQUMsVUFBVyxDQUFBLFNBQUEsR0FBWSxDQUFaLENBQXBCO1FBQ0ksSUFBQyxDQUFBLGNBQUQsR0FBa0IsU0FBQSxHQUFZO1FBQzlCLElBQUMsQ0FBQSxNQUFELEdBQVUsSUFBQyxDQUFBLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBWixDQUF1QixJQUFDLENBQUEsSUFBSSxDQUFDLFVBQVcsQ0FBQSxJQUFDLENBQUEsY0FBRCxDQUF4QztlQUNWLElBQUMsQ0FBQSxNQUFNLENBQUMsSUFBUixDQUFBLEVBSEo7O0lBREMsQ0FETDtHQURKOzs7O0dBOVN3Qjs7OztBRGhCNUIsSUFBQSxTQUFBO0VBQUE7Ozs7QUFBQSxDQUFBLEdBQUksTUFBTSxDQUFDOztBQUVWLFNBQVUsT0FBQSxDQUFRLGtCQUFSOztBQUVMLE9BQU8sQ0FBQzs7O0VBQ0csZUFBQyxVQUFEO0FBQ1QsUUFBQTs7TUFEVSxhQUFXOzs7OztJQUNyQix1Q0FBTSxDQUFDLENBQUMsUUFBRixDQUFXLFVBQVgsRUFDRjtNQUFBLGVBQUEsRUFBaUIsTUFBakI7S0FERSxDQUFOO0lBS0EsSUFBQyxDQUFBLFFBQUQsR0FBZ0IsSUFBQSxLQUFLLENBQUMsYUFBTixDQUNaO01BQUEsU0FBQSxFQUFXLElBQVg7TUFDQSxLQUFBLEVBQU8sSUFEUDtLQURZO0lBSWhCLElBQUMsQ0FBQSxRQUFRLENBQUMsV0FBVixDQUFzQixJQUFDLENBQUEsUUFBUSxDQUFDLFVBQWhDO0lBQ0EsSUFBQyxDQUFBLFFBQVEsQ0FBQyxPQUFWLENBQWtCLElBQUMsQ0FBQSxLQUFuQixFQUEwQixJQUFDLENBQUEsTUFBM0I7SUFDQSxJQUFDLENBQUEsUUFBUSxDQUFDLGFBQVYsQ0FBd0IsTUFBTSxDQUFDLGdCQUEvQjtJQUNBLElBQUMsQ0FBQSxRQUFRLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxLQUEzQixHQUFtQztJQUNuQyxJQUFDLENBQUEsUUFBUSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsTUFBM0IsR0FBb0M7SUFDcEMsSUFBQyxDQUFBLFFBQVEsQ0FBQyxTQUFTLENBQUMsT0FBcEIsR0FBOEI7SUFDOUIsSUFBQyxDQUFBLFFBQVEsQ0FBQyxTQUFTLENBQUMsSUFBcEIsR0FBMkIsS0FBSyxDQUFDO0lBS2pDLElBQUMsQ0FBQSxLQUFELEdBQVMsSUFBSSxLQUFLLENBQUM7SUFLbkIsV0FBQSxHQUFjLENBQUMsQ0FBQyxRQUFGLENBQVcsVUFBVSxDQUFDLE1BQXRCLEVBQ1Y7TUFBQSxNQUFBLEVBQVEsSUFBQyxDQUFBLEtBQUQsR0FBUyxJQUFDLENBQUEsTUFBbEI7S0FEVTtJQUdkLElBQUMsQ0FBQSxNQUFELEdBQWMsSUFBQSxNQUFBLENBQU8sV0FBUCxFQUFvQixJQUFDLENBQUMsUUFBdEI7SUFLZCxNQUFNLENBQUMsUUFBUCxDQUFnQixJQUFDLENBQUEsY0FBakI7SUFLQSxJQUFDLENBQUEsU0FBRCxHQUFhLElBQUksS0FBSyxDQUFDO0lBQ3ZCLElBQUMsQ0FBQSxLQUFELEdBQVMsSUFBSSxLQUFLLENBQUM7SUFDbkIsSUFBQyxDQUFBLFdBQUQsR0FBZTtJQUNmLElBQUMsQ0FBQSx1QkFBRCxHQUEyQjtJQUMzQixJQUFDLENBQUEsU0FBRCxHQUFhO0lBRWIsSUFBQyxDQUFBLEVBQUQsQ0FBSSxXQUFKLEVBQWlCLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxDQUFEO1FBQ2IsS0FBQyxDQUFBLEtBQUssQ0FBQyxDQUFQLEdBQVcsQ0FBQyxDQUFDLENBQUMsT0FBRixHQUFZLEtBQUMsQ0FBQSxLQUFkLENBQUEsR0FBdUIsQ0FBdkIsR0FBMkI7ZUFDdEMsS0FBQyxDQUFBLEtBQUssQ0FBQyxDQUFQLEdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFGLEdBQVksS0FBQyxDQUFBLE1BQWQsQ0FBRCxHQUF5QixDQUF6QixHQUE2QjtNQUYzQjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBakI7SUFJQSxJQUFDLENBQUEsRUFBRCxDQUFJLFdBQUosRUFBaUIsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLENBQUQ7UUFDYixLQUFDLENBQUEsU0FBRCxHQUFhO1FBQ2IsSUFBRyxLQUFDLENBQUEsV0FBSjtVQUNJLEtBQUMsQ0FBQSxXQUFXLENBQUMsTUFBTSxDQUFDLGFBQXBCLENBQWtDO1lBQUMsSUFBQSxFQUFNLFdBQVA7V0FBbEM7VUFDQSxLQUFDLENBQUEsV0FBVyxDQUFDLE1BQU0sQ0FBQyxhQUFwQixDQUFrQztZQUFDLElBQUEsRUFBTSxhQUFQO1dBQWxDO1VBQ0EsS0FBQyxDQUFBLFdBQVcsQ0FBQyxNQUFNLENBQUMsYUFBcEIsQ0FBa0M7WUFBQyxJQUFBLEVBQU0sT0FBUDtXQUFsQztpQkFDQSxLQUFDLENBQUEsV0FBVyxDQUFDLE1BQU0sQ0FBQyxhQUFwQixDQUFrQztZQUFDLElBQUEsRUFBTSxTQUFQO1dBQWxDLEVBSko7O01BRmE7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQWpCO0lBUUEsSUFBQyxDQUFBLEVBQUQsQ0FBSSxTQUFKLEVBQWUsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLENBQUQ7UUFDWCxLQUFDLENBQUEsU0FBRCxHQUFhO1FBQ2IsSUFBRyxLQUFDLENBQUEsV0FBSjtVQUNJLEtBQUMsQ0FBQSxXQUFXLENBQUMsTUFBTSxDQUFDLGFBQXBCLENBQWtDO1lBQUMsSUFBQSxFQUFNLFNBQVA7V0FBbEM7aUJBQ0EsS0FBQyxDQUFBLFdBQVcsQ0FBQyxNQUFNLENBQUMsYUFBcEIsQ0FBa0M7WUFBQyxJQUFBLEVBQU0sV0FBUDtXQUFsQyxFQUZKOztNQUZXO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFmO0lBU0EsSUFBQyxDQUFBLElBQUQsQ0FBQTtJQUVBLE1BQU0sQ0FBQyxjQUFjLENBQUMsRUFBdEIsQ0FBeUIsT0FBekIsRUFBa0MsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFBO2VBQzlCLG9CQUFBLENBQXFCLEtBQUMsQ0FBQSxzQkFBdEI7TUFEOEI7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQWxDO0VBcEVTOztrQkF5RWIsSUFBQSxHQUFNLFNBQUE7SUFDRixJQUFDLENBQUEsc0JBQUQsR0FBMEIscUJBQUEsQ0FBc0IsSUFBQyxDQUFBLElBQXZCO0lBRTFCLElBQUcsSUFBQyxDQUFBLGFBQUo7TUFDSSxJQUFDLENBQUEsYUFBRCxDQUFBLEVBREo7O0lBR0EsSUFBRyxJQUFDLENBQUEsTUFBTSxDQUFDLFFBQVg7TUFDSSxJQUFDLENBQUEsTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFqQixDQUFBLEVBREo7O0lBR0EsSUFBQyxDQUFBLGVBQUQsQ0FBQTtXQUVBLElBQUMsQ0FBQSxRQUFRLENBQUMsTUFBVixDQUFpQixJQUFDLENBQUEsS0FBbEIsRUFBeUIsSUFBQyxDQUFBLE1BQU0sQ0FBQyxZQUFqQztFQVhFOztrQkFlTixlQUFBLEdBQWlCLFNBQUE7QUFDYixRQUFBO0lBQUEsSUFBQyxDQUFBLFNBQVMsQ0FBQyxhQUFYLENBQXlCLElBQUMsQ0FBQSxLQUExQixFQUFpQyxJQUFDLENBQUEsTUFBTSxDQUFDLFlBQXpDO0lBQ0EsVUFBQSxHQUFhLElBQUMsQ0FBQSxTQUFTLENBQUMsZ0JBQVgsQ0FBNEIsSUFBQyxDQUFBLEtBQUssQ0FBQyxRQUFuQyxFQUE2QyxJQUE3QztJQUViLElBQUcsVUFBVSxDQUFDLE1BQVgsSUFBcUIsSUFBQyxDQUFBLFdBQUQsS0FBZ0IsVUFBVyxDQUFBLENBQUEsQ0FBbkQ7TUFDSSxJQUFDLENBQUEsV0FBRCxHQUFlLFVBQVcsQ0FBQSxDQUFBLEVBRDlCOztJQUdBLElBQUcsSUFBQyxDQUFBLFdBQUQsSUFBZ0IsQ0FBQyxVQUFVLENBQUMsTUFBL0I7TUFDSSxJQUFDLENBQUEsV0FBVyxDQUFDLE1BQU0sQ0FBQyxhQUFwQixDQUFrQztRQUFDLElBQUEsRUFBTSxVQUFQO09BQWxDO01BQ0EsSUFBQyxDQUFBLFdBQVcsQ0FBQyxNQUFNLENBQUMsYUFBcEIsQ0FBa0M7UUFBQyxJQUFBLEVBQU0sWUFBUDtPQUFsQyxFQUZKOztJQUlBLElBQUcsQ0FBQyxVQUFVLENBQUMsTUFBZjtNQUNJLElBQUMsQ0FBQSxXQUFELEdBQWU7TUFDZixJQUFDLENBQUEsdUJBQUQsR0FBMkIsTUFGL0I7O0lBSUEsSUFBRyxDQUFDLElBQUMsQ0FBQSx1QkFBRixJQUE2QixJQUFDLENBQUEsV0FBakM7TUFDSSxJQUFDLENBQUEsV0FBVyxDQUFDLE1BQU0sQ0FBQyxhQUFwQixDQUFrQztRQUFDLElBQUEsRUFBTSxXQUFQO09BQWxDO01BQ0EsSUFBQyxDQUFBLFdBQVcsQ0FBQyxNQUFNLENBQUMsYUFBcEIsQ0FBa0M7UUFBQyxJQUFBLEVBQU0sYUFBUDtPQUFsQzthQUNBLElBQUMsQ0FBQSx1QkFBRCxHQUEyQixLQUgvQjs7RUFmYTs7a0JBb0JqQixjQUFBLEdBQWdCLFNBQUMsQ0FBRDtJQUNaLElBQUMsQ0FBQSxNQUFNLENBQUMsTUFBUixHQUFpQixJQUFDLENBQUEsS0FBRCxHQUFTLElBQUMsQ0FBQTtJQUMzQixJQUFDLENBQUEsTUFBTSxDQUFDLFlBQVksQ0FBQyxzQkFBckIsQ0FBQTtXQUNBLElBQUMsQ0FBQSxRQUFRLENBQUMsT0FBVixDQUFrQixJQUFDLENBQUEsS0FBbkIsRUFBMEIsSUFBQyxDQUFBLE1BQTNCO0VBSFk7Ozs7R0E3R1E7Ozs7QURKNUIsSUFBQSxRQUFBO0VBQUE7OztBQUFBLENBQUEsR0FBSSxNQUFNLENBQUM7O0FBRVYsUUFBUyxPQUFBLENBQVEsZ0JBQVI7O0FBRUosT0FBTyxDQUFDOzs7RUFDRyxnQkFBQyxVQUFEOztNQUFDLGFBQVc7O0lBRXJCLENBQUMsQ0FBQyxRQUFGLENBQVcsVUFBWCxFQUNJO01BQUEsTUFBQSxFQUNJO1FBQUEsQ0FBQSxFQUFHLEdBQUg7UUFDQSxTQUFBLEVBQVcsQ0FBQyxFQURaO09BREo7S0FESjtJQUtBLHdDQUFNLFVBQU47SUFFQSxJQUFDLENBQUEsS0FBSyxDQUFDLFVBQVAsR0FBd0IsSUFBQSxLQUFLLENBQUMsS0FBTixDQUFZLFFBQVo7SUFDeEIsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLEdBQWlCLElBQUEsS0FBSyxDQUFDLEdBQU4sQ0FBVSxRQUFWLEVBQW9CLEdBQXBCLEVBQXlCLElBQXpCO0lBRWpCLElBQUMsQ0FBQSxNQUFELEdBQWMsSUFBQSxLQUFLLENBQUMsZUFBTixDQUFzQixRQUF0QixFQUFnQyxRQUFoQztJQUNkLElBQUMsQ0FBQSxNQUFNLENBQUMsUUFBUSxDQUFDLENBQWpCLEdBQXFCO0lBQ3JCLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLElBQUMsQ0FBQSxNQUFaO0lBRUEsSUFBQyxDQUFBLEtBQUQsR0FBYSxJQUFBLEtBQUssQ0FBQyxVQUFOLENBQWlCLFFBQWpCLEVBQTJCLEVBQTNCO0lBQ2IsSUFBQyxDQUFBLEtBQUssQ0FBQyxRQUFRLENBQUMsR0FBaEIsQ0FBb0IsQ0FBcEIsRUFBdUIsR0FBdkIsRUFBNEIsQ0FBNUI7SUFDQSxJQUFDLENBQUEsS0FBSyxDQUFDLFVBQVAsR0FBb0I7SUFDcEIsSUFBQyxDQUFBLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQXJCLEdBQTRCO0lBQzVCLElBQUMsQ0FBQSxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFyQixHQUEyQjtJQUMzQixJQUFDLENBQUEsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFkLEdBQXFCO0lBQ3JCLElBQUMsQ0FBQSxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQWQsR0FBdUI7SUFDdkIsSUFBQyxDQUFBLEtBQUssQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLEtBQXRCLEdBQThCO0lBQzlCLElBQUMsQ0FBQSxLQUFLLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUF0QixHQUErQjtJQUMvQixJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBVyxJQUFDLENBQUEsS0FBWjtJQUVBLElBQUMsQ0FBQSxNQUFELEdBQWMsSUFBQSxLQUFLLENBQUMsZ0JBQU4sQ0FBdUIsUUFBdkIsRUFBaUMsRUFBakM7SUFDZCxJQUFDLENBQUEsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFqQixDQUFxQixDQUFDLEdBQXRCLEVBQTJCLEdBQTNCLEVBQWdDLENBQUMsR0FBakM7SUFDQSxJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBVyxJQUFDLENBQUEsTUFBWjtJQUVBLElBQUMsQ0FBQSxNQUFELEdBQWMsSUFBQSxLQUFLLENBQUMsZ0JBQU4sQ0FBdUIsUUFBdkIsRUFBaUMsRUFBakM7SUFDZCxJQUFDLENBQUEsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFqQixDQUFxQixHQUFyQixFQUEwQixHQUExQixFQUErQixDQUFDLEdBQWhDO0lBQ0EsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsSUFBQyxDQUFBLE1BQVo7SUFFQSxJQUFDLENBQUEsTUFBRCxHQUFjLElBQUEsS0FBSyxDQUFDLGdCQUFOLENBQXVCLFFBQXZCLEVBQWlDLEVBQWpDO0lBQ2QsSUFBQyxDQUFBLE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBakIsQ0FBcUIsQ0FBQyxHQUF0QixFQUEyQixHQUEzQixFQUFnQyxHQUFoQztJQUNBLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLElBQUMsQ0FBQSxNQUFaO0lBRUEsSUFBQyxDQUFBLE1BQUQsR0FBYyxJQUFBLEtBQUssQ0FBQyxnQkFBTixDQUF1QixRQUF2QixFQUFpQyxFQUFqQztJQUNkLElBQUMsQ0FBQSxNQUFNLENBQUMsUUFBUSxDQUFDLEdBQWpCLENBQXFCLEdBQXJCLEVBQTBCLEdBQTFCLEVBQStCLEdBQS9CO0lBQ0EsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsSUFBQyxDQUFBLE1BQVo7SUFFQSxJQUFDLENBQUEsUUFBRCxHQUFnQixJQUFBLEtBQUssQ0FBQyxjQUFOLENBQXFCLEdBQXJCLEVBQTBCLEdBQTFCO0lBQ2hCLElBQUMsQ0FBQSxRQUFELEdBQWdCLElBQUEsS0FBSyxDQUFDLG9CQUFOLENBQ1o7TUFBQSxTQUFBLEVBQVcsRUFBWDtNQUNBLEtBQUEsRUFBTyxRQURQO01BRUEsU0FBQSxFQUFXLEdBRlg7TUFHQSxTQUFBLEVBQVcsTUFIWDtLQURZO0lBS2hCLElBQUMsQ0FBQSxLQUFELEdBQWEsSUFBQSxLQUFLLENBQUMsSUFBTixDQUFXLElBQUMsQ0FBQSxRQUFaLEVBQXNCLElBQUMsQ0FBQSxRQUF2QjtJQUNiLElBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUSxDQUFDLENBQWhCLEdBQW9CLENBQUMsSUFBSSxDQUFDLEVBQU4sR0FBVztJQUMvQixJQUFDLENBQUEsS0FBSyxDQUFDLGFBQVAsR0FBdUI7SUFDdkIsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsSUFBQyxDQUFBLEtBQVo7O0FBRUE7Ozs7OztFQXREUzs7OztHQURZOzs7O0FESjdCLElBQUEsUUFBQTtFQUFBOzs7O0FBQUEsQ0FBQSxHQUFJLE1BQU0sQ0FBQzs7QUFFVixRQUFTLE9BQUEsQ0FBUSxnQkFBUjs7QUFFSixPQUFPLENBQUM7OztFQUNHLG1CQUFDLEtBQUQsRUFBUSxVQUFSO0FBQ1QsUUFBQTs7TUFEaUIsYUFBVzs7O0lBQzVCLHlDQUFBO0lBRUEsSUFBRyxDQUFDLFVBQUo7QUFDUSxZQUFNLEtBQUEsQ0FBTSxrREFBTixFQURkOztJQUlBLElBQUcsQ0FBQyxDQUFDLFFBQUYsQ0FBVyxVQUFYLENBQUg7TUFDSSxTQUFBLEdBQVk7TUFHWixNQUFNLENBQUMsSUFBUCxDQUFZLEtBQUssQ0FBQyxNQUFsQixDQUF5QixDQUFDLEdBQTFCLENBQThCLENBQUEsU0FBQSxLQUFBO2VBQUEsU0FBQyxDQUFEO1VBQzFCLElBQUcsQ0FBQSxLQUFLLFNBQVI7WUFFSSxLQUFLLENBQUMsTUFBTSxDQUFDLE9BQWIsR0FBdUIsS0FBSyxDQUFDLE1BQU8sQ0FBQSxDQUFBO21CQUNwQyxVQUFBLEdBQWEsS0FBSyxDQUFDLE1BQU8sQ0FBQSxTQUFBLEVBSDlCOztRQUQwQjtNQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBOUIsRUFKSjs7SUFVQSxJQUFDLENBQUEsVUFBRCxHQUFjLElBQUMsQ0FBQSxnQkFBRCxDQUFrQixVQUFsQjtJQUNkLElBQUMsQ0FBQSxPQUFELEdBQVcsQ0FBQyxDQUFDLFFBQUYsQ0FBVyxVQUFVLENBQUMsT0FBdEIsRUFDUDtNQUFBLElBQUEsRUFBTSxDQUFOO01BQ0EsS0FBQSxFQUFPLENBRFA7TUFFQSxLQUFBLEVBQU8sUUFGUDtLQURPO0lBTVgsS0FBSyxDQUFDLEtBQU4sQ0FBWSxJQUFDLENBQUEsT0FBTyxDQUFDLEtBQXJCLEVBQTRCLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQTtRQUV4QixLQUFDLENBQUEsS0FBRCxHQUFTO1FBQ1QsS0FBQyxDQUFBLElBQUQsR0FBUSxLQUFLLENBQUMsSUFBTixJQUFjLEtBQUssQ0FBQyxLQUFwQixJQUE2QixLQUFLLENBQUM7UUFDM0MsS0FBQyxDQUFBLEdBQUQsR0FBTztRQUNQLEtBQUMsQ0FBQSxJQUFELEdBQVEsS0FBQyxDQUFBLE9BQU8sQ0FBQztRQUNqQixLQUFDLENBQUEsY0FBRCxHQUFrQjtRQUNsQixLQUFDLENBQUEsV0FBRCxHQUFlLEtBQUMsQ0FBQSxJQUFELEdBQVEsS0FBQyxDQUFBO1FBQ3hCLEtBQUMsQ0FBQSwwQkFBRCxHQUE4QjtRQUM5QixLQUFDLENBQUEsTUFBRCxHQUFVLEtBQUMsQ0FBQSxlQUFELENBQUE7UUFJVixJQUFHLEtBQUMsQ0FBQSxNQUFNLENBQUMsTUFBWDtVQUVJLEtBQUMsQ0FBQSxnQkFBRCxHQUFvQixXQUFBLENBQVksU0FBQTtZQUU1QixJQUFHLEtBQUMsQ0FBQSxjQUFELElBQW1CLEtBQUMsQ0FBQSxXQUF2QjtBQUVJLHFCQUFPLEtBQUMsQ0FBQSxnQkFGWjs7WUFLQSxxQkFBQSxDQUFzQixLQUFDLENBQUEsYUFBdkI7bUJBQ0EsS0FBQyxDQUFBLGNBQUQ7VUFSNEIsQ0FBWixFQVNsQixJQUFBLEdBQU8sS0FBQyxDQUFBLEdBVFUsRUFGeEI7O2VBZUEsTUFBTSxDQUFDLGNBQWMsQ0FBQyxFQUF0QixDQUF5QixPQUF6QixFQUFrQyxTQUFBO1VBQzlCLElBQUcsS0FBQyxDQUFBLGdCQUFKO21CQUNJLGFBQUEsQ0FBYyxLQUFDLENBQUEsZ0JBQWYsRUFESjs7UUFEOEIsQ0FBbEM7TUE1QndCO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUE1QjtFQXhCUzs7c0JBd0RiLGdCQUFBLEdBQWtCLFNBQUMsVUFBRDtBQUNkLFFBQUE7SUFBQSxLQUFBLEdBQVEsTUFBTSxDQUFDLE1BQVAsQ0FBYyxFQUFkLEVBQWtCLFVBQWxCO0lBQ1IsT0FBTyxLQUFLLENBQUM7V0FDYjtFQUhjOztzQkFLbEIsZUFBQSxHQUFpQixTQUFBO0FBS2IsUUFBQTtJQUFBLE1BQUEsR0FBUyxNQUFNLENBQUMsSUFBUCxDQUFZLElBQUMsQ0FBQSxVQUFiLENBQXdCLENBQUMsR0FBekIsQ0FBNkIsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLENBQUQ7QUFFbEMsWUFBQTtRQUFBLEtBQUMsQ0FBQSwwQkFBMkIsQ0FBQSxDQUFBLENBQTVCLEdBQWlDLEtBQUMsQ0FBQSxLQUFNLENBQUEsQ0FBQTtRQUV4QyxNQUFBLEdBQVM7UUFDVCxJQUFHLEtBQUMsQ0FBQSxLQUFNLENBQUEsQ0FBQSxDQUFQLEdBQVksS0FBQyxDQUFBLFVBQVcsQ0FBQSxDQUFBLENBQTNCO1VBQ0ksTUFBTyxDQUFBLENBQUEsQ0FBUCxHQUFZLENBQUMsSUFBSSxDQUFDLEdBQUwsQ0FBUyxLQUFDLENBQUEsS0FBTSxDQUFBLENBQUEsQ0FBUCxHQUFZLEtBQUMsQ0FBQSxVQUFXLENBQUEsQ0FBQSxDQUFqQyxFQURqQjtTQUFBLE1BRUssSUFBRyxLQUFDLENBQUEsS0FBTSxDQUFBLENBQUEsQ0FBUCxHQUFZLEtBQUMsQ0FBQSxVQUFXLENBQUEsQ0FBQSxDQUEzQjtVQUNELE1BQU8sQ0FBQSxDQUFBLENBQVAsR0FBWSxJQUFJLENBQUMsR0FBTCxDQUFTLEtBQUMsQ0FBQSxLQUFNLENBQUEsQ0FBQSxDQUFQLEdBQVksS0FBQyxDQUFBLFVBQVcsQ0FBQSxDQUFBLENBQWpDLEVBRFg7U0FBQSxNQUFBO1VBR0QsS0FIQzs7ZUFJTDtNQVhrQztJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBN0I7V0FhVCxNQUFNLENBQUMsTUFBUCxDQUFjLFNBQUMsQ0FBRDthQUNWO0lBRFUsQ0FBZDtFQWxCYTs7c0JBcUJqQixXQUFBLEdBQWEsU0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxDQUFWO0lBRVQsSUFBRyxJQUFDLENBQUEsT0FBTyxDQUFDLEtBQUssQ0FBQyxRQUFmLENBQXdCLE1BQXhCLENBQUg7YUFDSSxJQUFFLENBQUEsSUFBQyxDQUFBLE9BQU8sQ0FBQyxLQUFULENBQUYsQ0FBa0IsQ0FBbEIsRUFBcUIsQ0FBckIsRUFBd0IsQ0FBeEIsRUFBMkIsQ0FBM0IsRUFESjtLQUFBLE1BQUE7YUFHSSxJQUFDLENBQUEsTUFBRCxDQUFRLENBQVIsRUFBVyxDQUFYLEVBQWMsQ0FBZCxFQUFpQixDQUFqQixFQUhKOztFQUZTOztzQkFPYixhQUFBLEdBQWUsU0FBQTtBQUVYLFFBQUE7QUFBQTtBQUFBO1NBQUEsNkNBQUE7O01BRUksSUFBQSxHQUFPLE1BQU0sQ0FBQyxJQUFQLENBQVksS0FBWixDQUFtQixDQUFBLENBQUE7TUFDMUIsVUFBQSxHQUFhLE1BQU0sQ0FBQyxNQUFQLENBQWMsS0FBZCxDQUFxQixDQUFBLENBQUE7TUFFbEMsVUFBQSxHQUFhLElBQUMsQ0FBQSxXQUFELENBQWEsSUFBQyxDQUFBLGNBQWQsRUFBOEIsSUFBQyxDQUFBLDBCQUEyQixDQUFBLElBQUEsQ0FBMUQsRUFBaUUsVUFBakUsRUFBNkUsSUFBQyxDQUFBLFdBQTlFO21CQUViLElBQUMsQ0FBQSxLQUFNLENBQUEsSUFBQSxDQUFQLEdBQWU7QUFQbkI7O0VBRlc7O3NCQVdmLGVBQUEsR0FBaUIsU0FBQTtXQUNiLGFBQUEsQ0FBYyxJQUFDLENBQUEsZ0JBQWY7RUFEYTs7c0JBTWpCLE1BQUEsR0FBUSxTQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxFQUFVLENBQVY7V0FDSixDQUFBLEdBQUksQ0FBSixHQUFRLENBQVIsR0FBWTtFQURSOztzQkFHUixVQUFBLEdBQVksU0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxDQUFWO1dBQ1IsQ0FBQSxHQUFJLENBQUMsQ0FBQSxJQUFLLENBQU4sQ0FBSixHQUFlLENBQWYsR0FBbUI7RUFEWDs7c0JBR1osV0FBQSxHQUFhLFNBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVjtXQUNULENBQUMsQ0FBRCxHQUFLLENBQUMsQ0FBQSxJQUFLLENBQU4sQ0FBTCxHQUFnQixDQUFDLENBQUEsR0FBSSxDQUFMLENBQWhCLEdBQTBCO0VBRGpCOztzQkFHYixhQUFBLEdBQWUsU0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxDQUFWO0lBQ1gsSUFBRyxDQUFDLENBQUEsSUFBSyxDQUFBLEdBQUksQ0FBVixDQUFBLEdBQWUsQ0FBbEI7YUFDSSxDQUFBLEdBQUksQ0FBSixHQUFRLENBQVIsR0FBWSxDQUFaLEdBQWdCLEVBRHBCO0tBQUEsTUFBQTthQUdJLENBQUMsQ0FBRCxHQUFLLENBQUwsR0FBUyxDQUFDLENBQUMsRUFBRSxDQUFILENBQUEsR0FBUSxDQUFDLENBQUEsR0FBSSxDQUFMLENBQVIsR0FBa0IsQ0FBbkIsQ0FBVCxHQUFpQyxFQUhyQzs7RUFEVzs7c0JBTWYsV0FBQSxHQUFhLFNBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVjtXQUNULENBQUEsR0FBSSxDQUFDLENBQUEsSUFBSyxDQUFOLENBQUosR0FBZSxDQUFmLEdBQW1CLENBQW5CLEdBQXVCO0VBRGQ7O3NCQUdiLFlBQUEsR0FBYyxTQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxFQUFVLENBQVY7V0FDVixDQUFBLEdBQUksQ0FBQyxDQUFDLENBQUEsR0FBSSxDQUFBLEdBQUksQ0FBSixHQUFRLENBQWIsQ0FBQSxHQUFrQixDQUFsQixHQUFzQixDQUF0QixHQUEwQixDQUEzQixDQUFKLEdBQW9DO0VBRDFCOztzQkFHZCxjQUFBLEdBQWdCLFNBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVjtJQUNaLElBQUcsQ0FBQyxDQUFBLElBQUssQ0FBQSxHQUFJLENBQVYsQ0FBQSxHQUFlLENBQWxCO2FBQ0ksQ0FBQSxHQUFJLENBQUosR0FBUSxDQUFSLEdBQVksQ0FBWixHQUFnQixDQUFoQixHQUFvQixFQUR4QjtLQUFBLE1BQUE7YUFHSSxDQUFBLEdBQUksQ0FBSixHQUFRLENBQUMsQ0FBQyxDQUFBLElBQUssQ0FBTixDQUFBLEdBQVcsQ0FBWCxHQUFlLENBQWYsR0FBbUIsQ0FBcEIsQ0FBUixHQUFpQyxFQUhyQzs7RUFEWTs7c0JBTWhCLFdBQUEsR0FBYSxTQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxFQUFVLENBQVY7V0FDVCxDQUFBLEdBQUksQ0FBQyxDQUFBLElBQUssQ0FBTixDQUFKLEdBQWUsQ0FBZixHQUFtQixDQUFuQixHQUF1QixDQUF2QixHQUEyQjtFQURsQjs7c0JBR2IsWUFBQSxHQUFjLFNBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVjtXQUNWLENBQUMsQ0FBRCxHQUFLLENBQUMsQ0FBQyxDQUFBLEdBQUksQ0FBQSxHQUFJLENBQUosR0FBUSxDQUFiLENBQUEsR0FBa0IsQ0FBbEIsR0FBc0IsQ0FBdEIsR0FBMEIsQ0FBMUIsR0FBOEIsQ0FBL0IsQ0FBTCxHQUF5QztFQUQvQjs7c0JBR2QsY0FBQSxHQUFnQixTQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxFQUFVLENBQVY7SUFDWixJQUFHLENBQUMsQ0FBQSxJQUFLLENBQUEsR0FBSSxDQUFWLENBQUEsR0FBZSxDQUFsQjthQUNJLENBQUEsR0FBSSxDQUFKLEdBQVEsQ0FBUixHQUFZLENBQVosR0FBZ0IsQ0FBaEIsR0FBb0IsQ0FBcEIsR0FBd0IsRUFENUI7S0FBQSxNQUFBO2FBR0ksQ0FBQyxDQUFELEdBQUssQ0FBTCxHQUFTLENBQUMsQ0FBQyxDQUFBLElBQUssQ0FBTixDQUFBLEdBQVcsQ0FBWCxHQUFlLENBQWYsR0FBbUIsQ0FBbkIsR0FBdUIsQ0FBeEIsQ0FBVCxHQUFzQyxFQUgxQzs7RUFEWTs7c0JBTWhCLFdBQUEsR0FBYSxTQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxFQUFVLENBQVY7V0FDVCxDQUFBLEdBQUksQ0FBQyxDQUFBLElBQUssQ0FBTixDQUFKLEdBQWUsQ0FBZixHQUFtQixDQUFuQixHQUF1QixDQUF2QixHQUEyQixDQUEzQixHQUErQjtFQUR0Qjs7c0JBR2IsWUFBQSxHQUFjLFNBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVjtXQUNWLENBQUEsR0FBSSxDQUFDLENBQUMsQ0FBQSxHQUFJLENBQUEsR0FBSSxDQUFKLEdBQVEsQ0FBYixDQUFBLEdBQWtCLENBQWxCLEdBQXNCLENBQXRCLEdBQTBCLENBQTFCLEdBQThCLENBQTlCLEdBQWtDLENBQW5DLENBQUosR0FBNEM7RUFEbEM7O3NCQUdkLGNBQUEsR0FBZ0IsU0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxDQUFWO0lBQ1osSUFBRyxDQUFDLENBQUEsSUFBSyxDQUFBLEdBQUksQ0FBVixDQUFBLEdBQWUsQ0FBbEI7YUFDSSxDQUFBLEdBQUksQ0FBSixHQUFRLENBQVIsR0FBWSxDQUFaLEdBQWdCLENBQWhCLEdBQW9CLENBQXBCLEdBQXdCLENBQXhCLEdBQTRCLEVBRGhDO0tBQUEsTUFBQTthQUdJLENBQUEsR0FBSSxDQUFKLEdBQVEsQ0FBQyxDQUFDLENBQUEsSUFBSyxDQUFOLENBQUEsR0FBVyxDQUFYLEdBQWUsQ0FBZixHQUFtQixDQUFuQixHQUF1QixDQUF2QixHQUEyQixDQUE1QixDQUFSLEdBQXlDLEVBSDdDOztFQURZOztzQkFNaEIsVUFBQSxHQUFZLFNBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVjtXQUNSLENBQUMsQ0FBRCxHQUFLLElBQUksQ0FBQyxHQUFMLENBQVMsQ0FBQSxHQUFJLENBQUosR0FBUSxDQUFDLElBQUksQ0FBQyxFQUFMLEdBQVUsQ0FBWCxDQUFqQixDQUFMLEdBQXVDLENBQXZDLEdBQTJDO0VBRG5DOztzQkFHWixXQUFBLEdBQWEsU0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxDQUFWO1dBQ1QsQ0FBQSxHQUFJLElBQUksQ0FBQyxHQUFMLENBQVMsQ0FBQSxHQUFJLENBQUosR0FBUSxDQUFDLElBQUksQ0FBQyxFQUFMLEdBQVUsQ0FBWCxDQUFqQixDQUFKLEdBQXNDO0VBRDdCOztzQkFHYixhQUFBLEdBQWUsU0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxDQUFWO1dBQ1gsQ0FBQyxDQUFELEdBQUssQ0FBTCxHQUFTLENBQUMsSUFBSSxDQUFDLEdBQUwsQ0FBUyxJQUFJLENBQUMsRUFBTCxHQUFVLENBQVYsR0FBYyxDQUF2QixDQUFBLEdBQTRCLENBQTdCLENBQVQsR0FBMkM7RUFEaEM7O3NCQUdmLFVBQUEsR0FBWSxTQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxFQUFVLENBQVY7QUFDUixRQUFBOzJDQUFXO01BQUEsQ0FBQSxFQUFJLENBQUEsR0FBSSxJQUFJLENBQUMsR0FBTCxDQUFTLENBQVQsRUFBWSxFQUFBLEdBQUssQ0FBQyxDQUFBLEdBQUksQ0FBSixHQUFRLENBQVQsQ0FBakIsQ0FBSixHQUFvQyxDQUF4Qzs7RUFESDs7c0JBR1osV0FBQSxHQUFhLFNBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVjtBQUNULFFBQUE7MkNBQVcsQ0FBQSxHQUFJO01BQUEsQ0FBQSxFQUFJLENBQUEsR0FBSSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUwsQ0FBUyxDQUFULEVBQVksQ0FBQyxFQUFELEdBQU0sQ0FBTixHQUFVLENBQXRCLENBQUQsR0FBNEIsQ0FBN0IsQ0FBSixHQUFzQyxDQUExQzs7RUFETjs7c0JBR2IsYUFBQSxHQUFlLFNBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVjtJQUNYLElBQUcsQ0FBQSxLQUFLLENBQVI7TUFDSSxFQURKOztJQUVBLElBQUcsQ0FBQSxLQUFLLENBQVI7TUFDSSxDQUFBLEdBQUksRUFEUjs7SUFFQSxJQUFHLENBQUMsQ0FBQSxJQUFLLENBQUEsR0FBSSxDQUFWLENBQUEsR0FBZSxDQUFsQjthQUNJLENBQUEsR0FBSSxDQUFKLEdBQVEsSUFBSSxDQUFDLEdBQUwsQ0FBUyxDQUFULEVBQVksRUFBQSxHQUFLLENBQUMsQ0FBQSxHQUFJLENBQUwsQ0FBakIsQ0FBUixHQUFvQyxFQUR4QztLQUFBLE1BQUE7YUFHSSxDQUFBLEdBQUksQ0FBSixHQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBTCxDQUFTLENBQVQsRUFBWSxDQUFDLEVBQUQsR0FBTSxFQUFFLENBQXBCLENBQUQsR0FBMEIsQ0FBM0IsQ0FBUixHQUF3QyxFQUg1Qzs7RUFMVzs7c0JBVWYsVUFBQSxHQUFZLFNBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVjtXQUNSLENBQUMsQ0FBRCxHQUFLLENBQUMsSUFBSSxDQUFDLElBQUwsQ0FBVSxDQUFBLEdBQUksQ0FBQyxDQUFBLElBQUssQ0FBTixDQUFBLEdBQVcsQ0FBekIsQ0FBQSxHQUE4QixDQUEvQixDQUFMLEdBQXlDO0VBRGpDOztzQkFHWixXQUFBLEdBQWEsU0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxDQUFWO1dBQ1QsQ0FBQSxHQUFJLElBQUksQ0FBQyxJQUFMLENBQVUsQ0FBQSxHQUFJLENBQUMsQ0FBQSxHQUFJLENBQUEsR0FBSSxDQUFKLEdBQVEsQ0FBYixDQUFBLEdBQWtCLENBQWhDLENBQUosR0FBeUM7RUFEaEM7O3NCQUdiLGFBQUEsR0FBZSxTQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxFQUFVLENBQVY7SUFDWCxJQUFHLENBQUMsQ0FBQSxJQUFLLENBQUEsR0FBSSxDQUFWLENBQUEsR0FBZSxDQUFsQjthQUNJLENBQUMsQ0FBRCxHQUFLLENBQUwsR0FBUyxDQUFDLElBQUksQ0FBQyxJQUFMLENBQVUsQ0FBQSxHQUFJLENBQUEsR0FBSSxDQUFsQixDQUFBLEdBQXVCLENBQXhCLENBQVQsR0FBc0MsRUFEMUM7S0FBQSxNQUFBO2FBR0ksQ0FBQSxHQUFJLENBQUosR0FBUSxDQUFDLElBQUksQ0FBQyxJQUFMLENBQVUsQ0FBQSxHQUFJLENBQUMsQ0FBQSxJQUFLLENBQU4sQ0FBQSxHQUFXLENBQXpCLENBQUEsR0FBOEIsQ0FBL0IsQ0FBUixHQUE0QyxFQUhoRDs7RUFEVzs7c0JBTWYsYUFBQSxHQUFlLFNBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVjtBQUNYLFFBQUE7SUFBQSxDQUFBLEdBQUk7SUFDSixDQUFBLEdBQUk7SUFDSixDQUFBLEdBQUk7SUFFSixJQUFHLENBQUEsS0FBSyxDQUFSO01BQ0ksRUFESjs7SUFFQSxJQUFHLENBQUMsQ0FBQSxJQUFLLENBQU4sQ0FBQSxLQUFZLENBQWY7TUFDSSxDQUFBLEdBQUksRUFEUjs7SUFHQSxJQUFHLENBQUMsQ0FBSjtNQUNJLENBQUEsR0FBSSxDQUFBLEdBQUksR0FEWjs7SUFFQSxJQUFHLENBQUEsR0FBSSxJQUFJLENBQUMsR0FBTCxDQUFTLENBQVQsQ0FBUDtNQUNJLENBQUEsR0FBSTtNQUNKLENBQUEsR0FBSSxDQUFBLEdBQUksRUFGWjtLQUFBLE1BQUE7TUFJSSxDQUFBLEdBQUksQ0FBQSxHQUFJLENBQUMsQ0FBQSxHQUFJLElBQUksQ0FBQyxFQUFWLENBQUosR0FBb0IsSUFBSSxDQUFDLElBQUwsQ0FBVyxDQUFBLEdBQUksQ0FBZixFQUo1Qjs7V0FNQSxDQUFDLENBQUMsQ0FBQSxHQUFJLElBQUksQ0FBQyxHQUFMLENBQVMsQ0FBVCxFQUFZLEVBQUEsR0FBSyxDQUFDLENBQUEsSUFBSyxDQUFOLENBQWpCLENBQUosR0FBaUMsSUFBSSxDQUFDLEdBQUwsQ0FBUyxDQUFDLENBQUEsR0FBSSxDQUFKLEdBQVEsQ0FBVCxDQUFBLEdBQWMsQ0FBQyxDQUFBLEdBQUksSUFBSSxDQUFDLEVBQVYsQ0FBZCxHQUE4QixDQUF2QyxDQUFsQyxDQUFELEdBQWlGO0VBbEJ0RTs7c0JBb0JmLGNBQUEsR0FBZ0IsU0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxDQUFWO0FBQ1osUUFBQTtJQUFBLENBQUEsR0FBSTtJQUNKLENBQUEsR0FBSTtJQUNKLENBQUEsR0FBSTtJQUVKLElBQUcsQ0FBQSxLQUFLLENBQVI7TUFDSSxFQURKOztJQUVBLElBQUcsQ0FBQyxDQUFBLElBQUssQ0FBTixDQUFBLEtBQVksQ0FBZjtNQUNJLENBQUEsR0FBSSxFQURSOztJQUdBLElBQUcsQ0FBQyxDQUFKO01BQ0ksQ0FBQSxHQUFJLENBQUEsR0FBSSxHQURaOztJQUVBLElBQUcsQ0FBQSxHQUFJLElBQUksQ0FBQyxHQUFMLENBQVMsQ0FBVCxDQUFQO01BQ0ksQ0FBQSxHQUFJO01BQ0osQ0FBQSxHQUFJLENBQUEsR0FBSSxFQUZaO0tBQUEsTUFBQTtNQUlJLENBQUEsR0FBSSxDQUFBLEdBQUksQ0FBQyxDQUFBLEdBQUksSUFBSSxDQUFDLEVBQVYsQ0FBSixHQUFvQixJQUFJLENBQUMsSUFBTCxDQUFXLENBQUEsR0FBSSxDQUFmLEVBSjVCOztXQU1BLENBQUEsR0FBSSxJQUFJLENBQUMsR0FBTCxDQUFTLENBQVQsRUFBWSxDQUFDLEVBQUQsR0FBTSxDQUFsQixDQUFKLEdBQTJCLElBQUksQ0FBQyxHQUFMLENBQVMsQ0FBQyxDQUFBLEdBQUksQ0FBSixHQUFRLENBQVQsQ0FBQSxHQUFjLENBQUMsQ0FBQSxHQUFJLElBQUksQ0FBQyxFQUFWLENBQWQsR0FBOEIsQ0FBdkMsQ0FBM0IsR0FBdUUsQ0FBdkUsR0FBMkU7RUFsQi9EOztzQkFvQmhCLGdCQUFBLEdBQWtCLFNBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVjtBQUNkLFFBQUE7SUFBQSxDQUFBLEdBQUk7SUFDSixDQUFBLEdBQUk7SUFDSixDQUFBLEdBQUk7SUFFSixJQUFHLENBQUEsS0FBSyxDQUFSO01BQ0ksRUFESjs7SUFFQSxJQUFHLENBQUMsQ0FBQSxJQUFLLENBQUEsR0FBSSxDQUFWLENBQUEsS0FBZ0IsQ0FBbkI7TUFDSSxDQUFBLEdBQUksRUFEUjs7SUFHQSxJQUFHLENBQUMsQ0FBSjtNQUNJLENBQUEsR0FBSSxDQUFBLEdBQUksQ0FBQyxFQUFBLEdBQUssR0FBTixFQURaOztJQUVBLElBQUcsQ0FBQSxHQUFJLElBQUksQ0FBQyxHQUFMLENBQVMsQ0FBVCxDQUFQO01BQ0ksQ0FBQSxHQUFJO01BQ0osQ0FBQSxHQUFJLENBQUEsR0FBSSxFQUZaO0tBQUEsTUFBQTtNQUlJLENBQUEsR0FBSSxDQUFBLEdBQUksQ0FBQyxDQUFBLEdBQUksSUFBSSxDQUFDLEVBQVYsQ0FBSixHQUFvQixJQUFJLENBQUMsSUFBTCxDQUFXLENBQUEsR0FBSSxDQUFmLEVBSjVCOztJQUtBLElBQUksQ0FBQSxHQUFJLENBQVI7TUFDSSxDQUFDLEVBQUQsR0FBTSxDQUFDLENBQUEsR0FBSSxJQUFJLENBQUMsR0FBTCxDQUFTLENBQVQsRUFBWSxFQUFBLEdBQUssQ0FBQyxDQUFBLElBQUssQ0FBTixDQUFqQixDQUFKLEdBQWlDLElBQUksQ0FBQyxHQUFMLENBQVMsQ0FBQyxDQUFBLEdBQUksQ0FBSixHQUFRLENBQVQsQ0FBQSxHQUFjLENBQUMsQ0FBQSxHQUFJLElBQUksQ0FBQyxFQUFWLENBQWQsR0FBOEIsQ0FBdkMsQ0FBbEMsQ0FBTixHQUFxRixFQUR6Rjs7V0FHQSxDQUFBLEdBQUksSUFBSSxDQUFDLEdBQUwsQ0FBUyxDQUFULEVBQVksQ0FBQyxFQUFELEdBQU0sQ0FBQyxDQUFBLElBQUssQ0FBTixDQUFsQixDQUFKLEdBQWtDLElBQUksQ0FBQyxHQUFMLENBQVMsQ0FBQyxDQUFBLEdBQUksQ0FBSixHQUFRLENBQVQsQ0FBQSxHQUFjLENBQUMsQ0FBQSxHQUFJLElBQUksQ0FBQyxFQUFWLENBQWQsR0FBOEIsQ0FBdkMsQ0FBbEMsR0FBOEUsRUFBOUUsR0FBbUYsQ0FBbkYsR0FBdUY7RUFwQnpFOzs7O0dBM09VLE1BQU0sQ0FBQzs7OztBREpqQyxPQUFPLENBQUM7OztFQUVWLFNBQUMsQ0FBQSxNQUFELEdBQVUsU0FBQyxZQUFELEVBQWUsVUFBZjtJQUNOLElBQUcsVUFBVSxDQUFDLFFBQWQ7TUFDSSxVQUFVLENBQUMsR0FBWCxHQUFpQixTQUFDLEtBQUQ7QUFDYixjQUFNLEtBQUEsQ0FBUyxJQUFDLENBQUEsV0FBVyxDQUFDLElBQWQsR0FBbUIsR0FBbkIsR0FBc0IsWUFBdEIsR0FBbUMsY0FBM0M7TUFETyxFQURyQjs7V0FJQSxNQUFNLENBQUMsY0FBUCxDQUFzQixJQUFDLENBQUEsU0FBdkIsRUFBa0MsWUFBbEMsRUFBZ0QsVUFBaEQ7RUFMTTs7Ozs7Ozs7QURGZCxJQUFBLCtCQUFBO0VBQUE7OztBQUFBLENBQUEsR0FBSSxNQUFNLENBQUM7O0FBRVgsT0FBQSxDQUFRLHFCQUFSOztBQUNDLFlBQWEsT0FBQSxDQUFRLHFCQUFSOztBQUNiLFlBQWEsT0FBQSxDQUFRLHFCQUFSOztBQUNiLFNBQVUsT0FBQSxDQUFRLGtCQUFSOztBQUVMLE9BQU8sQ0FBQzs7O0VBQ0csZ0JBQUMsVUFBRCxFQUFnQixRQUFoQjs7TUFBQyxhQUFXOztJQUNyQixzQ0FBQTtJQUVBLElBQUMsQ0FBQSxRQUFELEdBQVk7SUFFWixDQUFDLENBQUMsUUFBRixDQUFXLFVBQVgsRUFDSTtNQUFBLENBQUEsRUFBRyxDQUFIO01BQ0EsQ0FBQSxFQUFHLENBREg7TUFFQSxDQUFBLEVBQUcsR0FGSDtNQUdBLFNBQUEsRUFBVyxDQUhYO01BSUEsU0FBQSxFQUFXLENBSlg7TUFLQSxTQUFBLEVBQVcsQ0FMWDtNQU1BLEdBQUEsRUFBSyxFQU5MO01BT0EsSUFBQSxFQUFNLEdBUE47TUFRQSxHQUFBLEVBQUssS0FSTDtNQVNBLFNBQUEsRUFBVyxLQVRYO01BVUEsVUFBQSxFQUFZLEtBVlo7TUFXQSxZQUFBLEVBQWMsS0FYZDtNQVlBLFVBQUEsRUFBWSxLQVpaO01BYUEsZUFBQSxFQUFpQixFQWJqQjtNQWNBLE1BQUEsRUFBWSxJQUFBLEtBQUssQ0FBQyxPQUFOLENBQWMsQ0FBZCxFQUFpQixDQUFqQixFQUFvQixDQUFwQixDQWRaO0tBREo7SUFpQkEsSUFBQyxDQUFBLFlBQUQsR0FBb0IsSUFBQSxLQUFLLENBQUMsaUJBQU4sQ0FDaEIsVUFBVSxDQUFDLEdBREssRUFFaEIsVUFBVSxDQUFDLE1BRkssRUFHaEIsVUFBVSxDQUFDLElBSEssRUFJaEIsVUFBVSxDQUFDLEdBSks7SUFPcEIsSUFBRyxVQUFVLENBQUMsYUFBZDtNQUNJLElBQUMsQ0FBQSxrQkFBRCxDQUFvQixVQUFwQixFQURKOztJQUdBLElBQUMsQ0FBQSxXQUFELENBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBWixFQUFlLFVBQVUsQ0FBQyxDQUExQixFQUE2QixVQUFVLENBQUMsQ0FBeEMsQ0FBYjtJQUNBLElBQUMsQ0FBQSxXQUFELENBQWEsQ0FBQyxVQUFVLENBQUMsU0FBWixFQUF1QixVQUFVLENBQUMsU0FBbEMsRUFBNkMsVUFBVSxDQUFDLFNBQXhELENBQWI7SUFFQSxJQUFDLENBQUEscUJBQUQsQ0FBQTtJQUVBLElBQUMsQ0FBQSxPQUFELEdBQWUsSUFBQSxNQUFBLENBQU8sSUFBUDtFQXJDTjs7bUJBdUNiLGtCQUFBLEdBQW9CLFNBQUMsVUFBRDtJQUNoQixJQUFDLENBQUEsUUFBRCxHQUFnQixJQUFBLEtBQUssQ0FBQyxhQUFOLENBQW9CLElBQUMsQ0FBQSxZQUFyQixFQUFtQyxJQUFDLENBQUEsUUFBcEM7SUFDaEIsSUFBQyxDQUFBLFNBQUQsR0FBYSxVQUFVLENBQUM7SUFDeEIsSUFBQyxDQUFBLFVBQUQsR0FBYyxVQUFVLENBQUM7SUFDekIsSUFBQyxDQUFBLFlBQUQsR0FBZ0IsVUFBVSxDQUFDO0lBQzNCLElBQUMsQ0FBQSxVQUFELEdBQWMsVUFBVSxDQUFDO0lBQ3pCLElBQUMsQ0FBQSxlQUFELEdBQW1CLFVBQVUsQ0FBQztXQUM5QixJQUFDLENBQUEsTUFBRCxHQUFVLFVBQVUsQ0FBQztFQVBMOzttQkFTcEIscUJBQUEsR0FBdUIsU0FBQTtXQUNuQixJQUFDLENBQUEsaUJBQUQsR0FBcUI7RUFERjs7bUJBR3ZCLEVBQUEsR0FBSSxTQUFDLFNBQUQsRUFBWSxFQUFaO0FBRUEsUUFBQTtJQUFBLElBQUcsU0FBUyxDQUFDLFFBQVYsQ0FBbUIsUUFBbkIsQ0FBSDtNQUNJLFFBQUEsR0FBVyxTQUFDLENBQUQ7ZUFBTyxFQUFBLENBQUcsQ0FBQyxDQUFDLEtBQUw7TUFBUDtNQUNYLElBQUMsQ0FBQSxZQUFZLENBQUMsZ0JBQWQsQ0FBK0IsU0FBL0IsRUFBMEMsUUFBMUM7YUFFQSxNQUFNLENBQUMsY0FBYyxDQUFDLEVBQXRCLENBQXlCLE9BQXpCLEVBQWtDLENBQUEsU0FBQSxLQUFBO2VBQUEsU0FBQTtpQkFDOUIsS0FBQyxDQUFBLFlBQVksQ0FBQyxtQkFBZCxDQUFrQyxTQUFsQyxFQUE2QyxRQUE3QztRQUQ4QjtNQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBbEMsRUFKSjs7RUFGQTs7bUJBU0osV0FBQSxHQUFhLFNBQUMsU0FBRDtJQUNULElBQUMsQ0FBQSxDQUFELEdBQUssU0FBVSxDQUFBLENBQUE7SUFDZixJQUFDLENBQUEsQ0FBRCxHQUFLLFNBQVUsQ0FBQSxDQUFBO1dBQ2YsSUFBQyxDQUFBLENBQUQsR0FBSyxTQUFVLENBQUEsQ0FBQTtFQUhOOzttQkFLYixXQUFBLEdBQWEsU0FBQyxTQUFEO0lBQ1QsSUFBQyxDQUFBLFNBQUQsR0FBYSxTQUFVLENBQUEsQ0FBQTtJQUN2QixJQUFDLENBQUEsU0FBRCxHQUFhLFNBQVUsQ0FBQSxDQUFBO1dBQ3ZCLElBQUMsQ0FBQSxTQUFELEdBQWEsU0FBVSxDQUFBLENBQUE7RUFIZDs7bUJBS2IsT0FBQSxHQUFTLFNBQUMsVUFBRDtXQUNELElBQUEsU0FBQSxDQUFVLElBQVYsRUFBYSxVQUFiO0VBREM7O21CQUdULE1BQUEsR0FBUSxTQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUDtJQUNKLElBQUcsU0FBUyxDQUFDLE1BQVYsS0FBb0IsQ0FBdkI7YUFDSSxJQUFDLENBQUEsWUFBWSxDQUFDLE1BQWQsQ0FBcUIsQ0FBckIsRUFESjtLQUFBLE1BRUssSUFBRyxTQUFTLENBQUMsTUFBVixLQUFvQixDQUF2QjthQUNELElBQUMsQ0FBQSxZQUFZLENBQUMsTUFBZCxDQUFxQixDQUFyQixFQUF3QixDQUF4QixFQUEyQixDQUEzQixFQURDOztFQUhEOzttQkFNUixXQUFBLEdBQWEsU0FBQyxLQUFEO1dBRVQsTUFBTSxDQUFDLElBQVAsQ0FBWSxJQUFDLENBQUEsTUFBYixDQUFvQixDQUFDLEdBQXJCLENBQXlCLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxDQUFEO1FBQ3JCLElBQUcsQ0FBQSxLQUFLLEtBQVI7VUFDSSxLQUFDLENBQUEsTUFBTSxDQUFDLE9BQVIsR0FBa0IsS0FBQyxDQUFBLE1BQU8sQ0FBQSxDQUFBO2lCQUcxQixNQUFNLENBQUMsSUFBUCxDQUFZLEtBQUMsQ0FBQSxNQUFNLENBQUMsT0FBcEIsQ0FBNEIsQ0FBQyxHQUE3QixDQUFpQyxTQUFDLEVBQUQ7bUJBQzdCLEtBQUUsQ0FBQSxFQUFBLENBQUYsR0FBUSxLQUFDLENBQUEsTUFBTSxDQUFDLE9BQVEsQ0FBQSxFQUFBO1VBREssQ0FBakMsRUFKSjs7TUFEcUI7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQXpCO0VBRlM7O21CQVViLFVBQUEsR0FBWSxTQUFDLE1BQUQsRUFBUyxNQUFUO0lBRVIsSUFBRyxJQUFDLENBQUEsTUFBTSxDQUFDLE9BQVIsS0FBbUIsSUFBQyxDQUFBLE1BQU8sQ0FBQSxNQUFBLENBQTNCLElBQXNDLElBQUMsQ0FBQSxNQUFNLENBQUMsT0FBUixLQUFtQixJQUFDLENBQUEsTUFBTyxDQUFBLE1BQUEsQ0FBcEU7TUFDSSxJQUFHLElBQUMsQ0FBQSxNQUFNLENBQUMsT0FBUixLQUFtQixJQUFDLENBQUEsTUFBTyxDQUFBLE1BQUEsQ0FBOUI7ZUFBMkMsSUFBQyxDQUFBLE9BQUQsQ0FBUyxNQUFULEVBQTNDO09BQUEsTUFDSyxJQUFHLElBQUMsQ0FBQSxNQUFNLENBQUMsT0FBUixLQUFtQixJQUFDLENBQUEsTUFBTyxDQUFBLE1BQUEsQ0FBOUI7ZUFBMkMsSUFBQyxDQUFBLE9BQUQsQ0FBUyxNQUFULEVBQTNDO09BRlQ7S0FBQSxNQUFBO2FBS0ksSUFBQyxDQUFBLE9BQUQsQ0FBUyxNQUFULEVBTEo7O0VBRlE7O0VBU1osTUFBQyxDQUFBLE1BQUQsQ0FBUSxVQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxZQUFZLENBQUM7SUFBakIsQ0FBTDtHQURKOztFQUdBLE1BQUMsQ0FBQSxNQUFELENBQVEsR0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsWUFBWSxDQUFDLFFBQVEsQ0FBQztJQUExQixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsQ0FBRDtNQUNELElBQUMsQ0FBQSxZQUFZLENBQUMsUUFBUSxDQUFDLENBQXZCLEdBQTJCO01BQzNCLElBQXNCLElBQUMsQ0FBQSxRQUF2QjtRQUFBLElBQUMsQ0FBQSxRQUFRLENBQUMsTUFBVixDQUFBLEVBQUE7O2FBQ0EsSUFBQyxDQUFBLFlBQVksQ0FBQyxhQUFkLENBQTRCO1FBQUMsSUFBQSxFQUFNLFVBQVA7UUFBbUIsS0FBQSxFQUFPLElBQUMsQ0FBQSxDQUEzQjtPQUE1QjtJQUhDLENBREw7R0FESjs7RUFPQSxNQUFDLENBQUEsTUFBRCxDQUFRLEdBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLFlBQVksQ0FBQyxRQUFRLENBQUM7SUFBMUIsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLENBQUQ7TUFDRCxJQUFDLENBQUEsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUF2QixHQUEyQjtNQUMzQixJQUFzQixJQUFDLENBQUEsUUFBdkI7UUFBQSxJQUFDLENBQUEsUUFBUSxDQUFDLE1BQVYsQ0FBQSxFQUFBOzthQUNBLElBQUMsQ0FBQSxZQUFZLENBQUMsYUFBZCxDQUE0QjtRQUFDLElBQUEsRUFBTSxVQUFQO1FBQW1CLEtBQUEsRUFBTyxJQUFDLENBQUEsQ0FBM0I7T0FBNUI7SUFIQyxDQURMO0dBREo7O0VBT0EsTUFBQyxDQUFBLE1BQUQsQ0FBUSxHQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxZQUFZLENBQUMsUUFBUSxDQUFDO0lBQTFCLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxDQUFEO01BQ0QsSUFBQyxDQUFBLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBdkIsR0FBMkI7TUFDM0IsSUFBc0IsSUFBQyxDQUFBLFFBQXZCO1FBQUEsSUFBQyxDQUFBLFFBQVEsQ0FBQyxNQUFWLENBQUEsRUFBQTs7YUFDQSxJQUFDLENBQUEsWUFBWSxDQUFDLGFBQWQsQ0FBNEI7UUFBQyxJQUFBLEVBQU0sVUFBUDtRQUFtQixLQUFBLEVBQU8sSUFBQyxDQUFBLENBQTNCO09BQTVCO0lBSEMsQ0FETDtHQURKOztFQU9BLE1BQUMsQ0FBQSxNQUFELENBQVEsVUFBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsWUFBWSxDQUFDO0lBQWpCLENBQUw7R0FESjs7RUFHQSxNQUFDLENBQUEsTUFBRCxDQUFRLFdBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFYLENBQW9CLElBQUMsQ0FBQSxZQUFZLENBQUMsUUFBUSxDQUFDLENBQTNDO0lBQUgsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLENBQUQ7TUFDRCxJQUFDLENBQUEsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUF2QixHQUEyQixLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVgsQ0FBb0IsQ0FBcEI7TUFDM0IsSUFBc0IsSUFBQyxDQUFBLFFBQXZCO1FBQUEsSUFBQyxDQUFBLFFBQVEsQ0FBQyxNQUFWLENBQUEsRUFBQTs7YUFDQSxJQUFDLENBQUEsWUFBWSxDQUFDLGFBQWQsQ0FBNEI7UUFBQyxJQUFBLEVBQU0sa0JBQVA7UUFBMkIsS0FBQSxFQUFPLElBQUMsQ0FBQSxTQUFuQztPQUE1QjtJQUhDLENBREw7R0FESjs7RUFPQSxNQUFDLENBQUEsTUFBRCxDQUFRLFdBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFYLENBQW9CLElBQUMsQ0FBQSxZQUFZLENBQUMsUUFBUSxDQUFDLENBQTNDO0lBQUgsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLENBQUQ7TUFDRCxJQUFDLENBQUEsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUF2QixHQUEyQixLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVgsQ0FBb0IsQ0FBcEI7TUFDM0IsSUFBc0IsSUFBQyxDQUFBLFFBQXZCO1FBQUEsSUFBQyxDQUFBLFFBQVEsQ0FBQyxNQUFWLENBQUEsRUFBQTs7YUFDQSxJQUFDLENBQUEsWUFBWSxDQUFDLGFBQWQsQ0FBNEI7UUFBQyxJQUFBLEVBQU0sa0JBQVA7UUFBMkIsS0FBQSxFQUFPLElBQUMsQ0FBQSxTQUFuQztPQUE1QjtJQUhDLENBREw7R0FESjs7RUFPQSxNQUFDLENBQUEsTUFBRCxDQUFRLFdBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFYLENBQW9CLElBQUMsQ0FBQSxZQUFZLENBQUMsUUFBUSxDQUFDLENBQTNDO0lBQUgsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLENBQUQ7TUFDRCxJQUFDLENBQUEsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUF2QixHQUEyQixLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVgsQ0FBb0IsQ0FBcEI7TUFDM0IsSUFBc0IsSUFBQyxDQUFBLFFBQXZCO1FBQUEsSUFBQyxDQUFBLFFBQVEsQ0FBQyxNQUFWLENBQUEsRUFBQTs7YUFDQSxJQUFDLENBQUEsWUFBWSxDQUFDLGFBQWQsQ0FBNEI7UUFBQyxJQUFBLEVBQU0sa0JBQVA7UUFBMkIsS0FBQSxFQUFPLElBQUMsQ0FBQSxTQUFuQztPQUE1QjtJQUhDLENBREw7R0FESjs7RUFPQSxNQUFDLENBQUEsTUFBRCxDQUFRLEtBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLFlBQVksQ0FBQztJQUFqQixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsR0FBRDtNQUNELElBQUMsQ0FBQSxZQUFZLENBQUMsR0FBZCxHQUFvQjthQUNwQixJQUFDLENBQUEsWUFBWSxDQUFDLGFBQWQsQ0FBNEI7UUFBQyxJQUFBLEVBQU0sWUFBUDtRQUFxQixLQUFBLEVBQU8sSUFBQyxDQUFBLEdBQTdCO09BQTVCO0lBRkMsQ0FETDtHQURKOztFQU1BLE1BQUMsQ0FBQSxNQUFELENBQVEsTUFBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsWUFBWSxDQUFDO0lBQWpCLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxNQUFEO01BQ0QsSUFBQyxDQUFBLFlBQVksQ0FBQyxJQUFkLEdBQXFCO2FBQ3JCLElBQUMsQ0FBQSxZQUFZLENBQUMsYUFBZCxDQUE0QjtRQUFDLElBQUEsRUFBTSxhQUFQO1FBQXNCLEtBQUEsRUFBTyxJQUFDLENBQUEsSUFBOUI7T0FBNUI7SUFGQyxDQURMO0dBREo7O0VBTUEsTUFBQyxDQUFBLE1BQUQsQ0FBUSxNQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxZQUFZLENBQUM7SUFBakIsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLElBQUQ7TUFDRCxJQUFDLENBQUEsWUFBWSxDQUFDLElBQWQsR0FBcUI7YUFDckIsSUFBQyxDQUFBLFlBQVksQ0FBQyxhQUFkLENBQTRCO1FBQUMsSUFBQSxFQUFNLGFBQVA7UUFBc0IsS0FBQSxFQUFPLElBQUMsQ0FBQSxJQUE5QjtPQUE1QjtJQUZDLENBREw7R0FESjs7RUFNQSxNQUFDLENBQUEsTUFBRCxDQUFRLEtBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLFlBQVksQ0FBQztJQUFqQixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsR0FBRDtNQUNELElBQUMsQ0FBQSxZQUFZLENBQUMsR0FBZCxHQUFvQjthQUNwQixJQUFDLENBQUEsWUFBWSxDQUFDLGFBQWQsQ0FBNEI7UUFBQyxJQUFBLEVBQU0sWUFBUDtRQUFxQixLQUFBLEVBQU8sSUFBQyxDQUFBLEdBQTdCO09BQTVCO0lBRkMsQ0FETDtHQURKOztFQU1BLE1BQUMsQ0FBQSxNQUFELENBQVEsUUFBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsWUFBWSxDQUFDO0lBQWpCLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxNQUFEO01BQ0QsSUFBQyxDQUFBLFlBQVksQ0FBQyxNQUFkLEdBQXVCO2FBQ3ZCLElBQUMsQ0FBQSxZQUFZLENBQUMsYUFBZCxDQUE0QjtRQUFDLElBQUEsRUFBTSxlQUFQO1FBQXdCLEtBQUEsRUFBTyxJQUFDLENBQUEsTUFBaEM7T0FBNUI7SUFGQyxDQURMO0dBREo7O0VBTUEsTUFBQyxDQUFBLE1BQUQsQ0FBUSxRQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUNELElBQUMsQ0FBQSxPQUFPLENBQUM7SUFEUixDQUFMO0lBRUEsR0FBQSxFQUFLLFNBQUMsTUFBRDthQUNELENBQUMsQ0FBQyxNQUFGLENBQVMsSUFBQyxDQUFBLE1BQVYsRUFBa0IsTUFBbEI7SUFEQyxDQUZMO0dBREo7O0VBTUEsTUFBQyxDQUFBLE1BQUQsQ0FBUSxXQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxRQUFRLENBQUM7SUFBYixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsSUFBRDtNQUNELElBQUMsQ0FBQSxRQUFRLENBQUMsU0FBVixHQUFzQjthQUN0QixJQUFDLENBQUEsWUFBWSxDQUFDLGFBQWQsQ0FBNEI7UUFBQyxJQUFBLEVBQU0sa0JBQVA7UUFBMkIsS0FBQSxFQUFPLElBQUMsQ0FBQSxTQUFuQztPQUE1QjtJQUZDLENBREw7R0FESjs7RUFNQSxNQUFDLENBQUEsTUFBRCxDQUFRLFlBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLFFBQVEsQ0FBQztJQUFiLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxJQUFEO01BQ0QsSUFBQyxDQUFBLFFBQVEsQ0FBQyxVQUFWLEdBQXVCO2FBQ3ZCLElBQUMsQ0FBQSxZQUFZLENBQUMsYUFBZCxDQUE0QjtRQUFDLElBQUEsRUFBTSxtQkFBUDtRQUE0QixLQUFBLEVBQU8sSUFBQyxDQUFBLFVBQXBDO09BQTVCO0lBRkMsQ0FETDtHQURKOztFQU1BLE1BQUMsQ0FBQSxNQUFELENBQVEsY0FBUixFQUNJO0lBQUEsR0FBQSxFQUFLLFNBQUE7YUFBRyxJQUFDLENBQUEsUUFBUSxDQUFDO0lBQWIsQ0FBTDtJQUNBLEdBQUEsRUFBSyxTQUFDLElBQUQ7TUFDRCxJQUFDLENBQUEsUUFBUSxDQUFDLFlBQVYsR0FBeUI7YUFDekIsSUFBQyxDQUFBLFlBQVksQ0FBQyxhQUFkLENBQTRCO1FBQUMsSUFBQSxFQUFNLHFCQUFQO1FBQThCLEtBQUEsRUFBTyxJQUFDLENBQUEsWUFBdEM7T0FBNUI7SUFGQyxDQURMO0dBREo7O0VBTUEsTUFBQyxDQUFBLE1BQUQsQ0FBUSxZQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxRQUFRLENBQUM7SUFBYixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsSUFBRDtNQUNELElBQUMsQ0FBQSxRQUFRLENBQUMsVUFBVixHQUF1QjthQUN2QixJQUFDLENBQUEsWUFBWSxDQUFDLGFBQWQsQ0FBNEI7UUFBQyxJQUFBLEVBQU0sbUJBQVA7UUFBNEIsS0FBQSxFQUFPLElBQUMsQ0FBQSxVQUFwQztPQUE1QjtJQUZDLENBREw7R0FESjs7RUFNQSxNQUFDLENBQUEsTUFBRCxDQUFRLGlCQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxRQUFRLENBQUM7SUFBYixDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsS0FBRDtNQUNELElBQUMsQ0FBQSxRQUFRLENBQUMsZUFBVixHQUE0QjthQUM1QixJQUFDLENBQUEsWUFBWSxDQUFDLGFBQWQsQ0FBNEI7UUFBQyxJQUFBLEVBQU0sd0JBQVA7UUFBaUMsS0FBQSxFQUFPLElBQUMsQ0FBQSxlQUF6QztPQUE1QjtJQUZDLENBREw7R0FESjs7RUFNQSxNQUFDLENBQUEsTUFBRCxDQUFRLFFBQVIsRUFDSTtJQUFBLEdBQUEsRUFBSyxTQUFBO2FBQUcsSUFBQyxDQUFBLFFBQVEsQ0FBQztJQUFiLENBQUw7SUFDQSxHQUFBLEVBQUssU0FBQyxPQUFEO01BQ0QsSUFBQyxDQUFBLFFBQVEsQ0FBQyxNQUFWLEdBQW1CO2FBQ25CLElBQUMsQ0FBQSxZQUFZLENBQUMsYUFBZCxDQUE0QjtRQUFDLElBQUEsRUFBTSxlQUFQO1FBQXdCLEtBQUEsRUFBTyxJQUFDLENBQUEsTUFBaEM7T0FBNUI7SUFGQyxDQURMO0dBREo7Ozs7R0FyTnlCOzs7O0FEUDdCLElBQUEsc0RBQUE7RUFBQTs7O0FBQUMsWUFBYSxPQUFBLENBQVEscUJBQVI7O0FBRWQsdUJBQUEsR0FBMEIsQ0FDdEIsR0FEc0IsRUFFdEIsR0FGc0IsRUFHdEIsR0FIc0IsRUFJdEIsV0FKc0IsRUFLdEIsV0FMc0IsRUFNdEIsV0FOc0IsRUFPdEIsT0FQc0IsRUFRdEIsUUFSc0IsRUFTdEIsUUFUc0IsRUFVdEIsUUFWc0IsRUFXdEIsU0FYc0I7O0FBYzFCLGtCQUFBLEdBQXFCLFNBQUMsSUFBRDtBQUNwQixRQUFNLEtBQUEsQ0FBTSxhQUFBLEdBQWMsSUFBZCxHQUFtQix1QkFBekI7QUFEYzs7QUFHZixPQUFPLENBQUM7OztFQUVHLGdCQUFDLEtBQUQ7SUFDVCxzQ0FBQTtJQUVBLElBQUMsQ0FBQSxLQUFELEdBQVM7SUFFVCxJQUFDLENBQUEsc0JBQUQsR0FBMEIsTUFBTSxDQUFDLG1CQUFQLENBQTJCLE1BQU0sQ0FBQyxjQUFQLENBQXNCLElBQUMsQ0FBQSxLQUFLLENBQUMsaUJBQTdCLENBQTNCO0lBRTFCLElBQUMsQ0FBQSxNQUFELEdBQ0k7TUFBQSxDQUFBLE9BQUEsQ0FBQSxFQUFTLElBQUMsQ0FBQSxnQkFBRCxDQUFrQixJQUFDLENBQUEsc0JBQW5CLENBQVQ7TUFDQSxPQUFBLEVBQVMsSUFBQyxDQUFBLGdCQUFELENBQWtCLElBQUMsQ0FBQSxzQkFBbkIsQ0FEVDs7RUFSSzs7bUJBV2IsZ0JBQUEsR0FBa0IsU0FBQyxTQUFEO0FBQ2QsUUFBQTtJQUFBLGNBQUEsR0FBaUI7SUFDakIsU0FBUyxDQUFDLEdBQVYsQ0FBYyxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsQ0FBRDtRQUNWLElBQUcsdUJBQXVCLENBQUMsUUFBeEIsQ0FBaUMsQ0FBakMsQ0FBSDtpQkFDSSxjQUFlLENBQUEsQ0FBQSxDQUFmLEdBQW9CLEtBQUMsQ0FBQSxLQUFNLENBQUEsQ0FBQSxFQUQvQjs7TUFEVTtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBZDtBQUdBLFdBQU87RUFMTzs7RUFPbEIsTUFBQyxDQUFBLE1BQUQsQ0FBUSxTQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxNQUFNLENBQUM7SUFBWCxDQUFMO0lBQ0EsR0FBQSxFQUFLLFNBQUMsS0FBRDtNQUNELElBQUMsQ0FBQSxNQUFNLENBQUMsUUFBUixHQUFtQixJQUFDLENBQUEsTUFBTSxDQUFDO2FBQzNCLElBQUMsQ0FBQSxNQUFNLENBQUMsT0FBUixHQUFrQjtJQUZqQixDQURMO0dBREo7O0VBTUEsTUFBQyxDQUFBLE1BQUQsQ0FBUSxVQUFSLEVBQ0k7SUFBQSxHQUFBLEVBQUssU0FBQTthQUFHLElBQUMsQ0FBQSxNQUFNLENBQUM7SUFBWCxDQUFMO0dBREo7Ozs7R0ExQnlCOzs7O0FEbkI3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FEdmlIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QURqOUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUQzbEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FEemlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QURydUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBRGpoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBRGRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QURsNUJBLE9BQUEsQ0FBUSx5QkFBUjs7QUFFTSxPQUFPLENBQUM7RUFDRyxpQkFBQyxVQUFELEVBQWEsRUFBYjtJQUNULElBQUMsQ0FBQSxXQUFELEdBQWUsSUFBSSxLQUFLLENBQUM7SUFDekIsSUFBQyxDQUFBLFdBQVcsQ0FBQyxJQUFiLENBQWtCLFVBQVUsQ0FBQyxJQUE3QixFQUFtQyxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsT0FBRDtRQUMvQixPQUFPLENBQUMsS0FBSyxDQUFDLFVBQWQsR0FBMkIsT0FBTyxDQUFDO2VBQ25DLEVBQUEsQ0FBRyxPQUFPLENBQUMsS0FBWDtNQUYrQjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBbkMsRUFHRSxJQUhGLEVBR1EsU0FBQyxDQUFEO2FBQU8sT0FBTyxDQUFDLEdBQVIsQ0FBWSxDQUFaO0lBQVAsQ0FIUjtFQUZTOzs7Ozs7OztBREhqQixPQUFBLENBQVEscUJBQVI7O0FBQ0EsTUFBTSxDQUFDLElBQVAsR0FBYyxPQUFBLENBQVEsdUJBQVIsQ0FBZ0MsQ0FBQzs7QUFFekMsT0FBTyxDQUFDO0VBQ0csYUFBQyxVQUFELEVBQWEsRUFBYjtJQUNULElBQUMsQ0FBQSxXQUFELEdBQWUsSUFBSSxLQUFLLENBQUM7SUFDekIsSUFBQyxDQUFBLFdBQVcsQ0FBQyxJQUFiLENBQWtCLFVBQVUsQ0FBQyxJQUE3QixFQUFtQyxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsS0FBRDtlQUMvQixFQUFBLENBQUcsS0FBSDtNQUQrQjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBbkMsRUFFRSxJQUZGLEVBRVEsU0FBQyxDQUFEO2FBQU8sT0FBTyxDQUFDLEdBQVIsQ0FBWSxDQUFaO0lBQVAsQ0FGUjtFQUZTOzs7Ozs7OztBREpqQixPQUFBLENBQVEsc0JBQVI7O0FBRU0sT0FBTyxDQUFDO0VBQ0csY0FBQyxVQUFELEVBQWEsRUFBYjtJQUNULElBQUMsQ0FBQSxXQUFELEdBQWUsSUFBSSxLQUFLLENBQUM7SUFDekIsSUFBQyxDQUFBLFdBQVcsQ0FBQyxJQUFiLENBQWtCLFVBQVUsQ0FBQyxJQUE3QixFQUFtQyxTQUFDLEtBQUQ7TUFDL0IsS0FBSyxDQUFDLEtBQUssQ0FBQyxVQUFaLEdBQXlCLEtBQUssQ0FBQzthQUMvQixFQUFBLENBQUcsS0FBSyxDQUFDLEtBQVQ7SUFGK0IsQ0FBbkMsRUFHRSxJQUhGLEVBR1EsU0FBQyxDQUFEO2FBQU8sT0FBTyxDQUFDLEdBQVIsQ0FBWSxDQUFaO0lBQVAsQ0FIUjtFQUZTOzs7Ozs7OztBREhYLE9BQU8sQ0FBQztFQUNHLG9CQUFDLFVBQUQsRUFBYSxFQUFiO0lBRVQsSUFBQyxDQUFBLFFBQUQsQ0FBVSxVQUFVLENBQUMsSUFBckIsRUFBMkIsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLElBQUQ7QUFDdkIsWUFBQTtRQUFBLFFBQUEsR0FBVyxJQUFJLENBQUMsS0FBTCxDQUFXLElBQVgsQ0FBZ0IsQ0FBQztRQUU1QixJQUFHLFFBQVEsQ0FBQyxJQUFULEtBQWlCLFFBQXBCO2lCQUFrQyxLQUFDLENBQUEsVUFBRCxDQUFZLFVBQVosRUFBd0IsRUFBeEIsRUFBbEM7U0FBQSxNQUFBO2lCQUNLLEtBQUMsQ0FBQSxZQUFELENBQWMsVUFBZCxFQUEwQixFQUExQixFQURMOztNQUh1QjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBM0I7RUFGUzs7dUJBU2IsVUFBQSxHQUFZLFNBQUMsVUFBRCxFQUFhLEVBQWI7SUFDUixJQUFDLENBQUEsV0FBRCxHQUFlLElBQUksS0FBSyxDQUFDO1dBQ3pCLElBQUMsQ0FBQSxXQUFXLENBQUMsSUFBYixDQUFrQixVQUFVLENBQUMsSUFBN0IsRUFBbUMsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLEtBQUQ7ZUFDL0IsRUFBQSxDQUFHLEtBQUg7TUFEK0I7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQW5DLEVBRUUsSUFGRixFQUVRLFNBQUMsQ0FBRDthQUFPLE9BQU8sQ0FBQyxHQUFSLENBQVksQ0FBWjtJQUFQLENBRlI7RUFGUTs7dUJBTVosWUFBQSxHQUFjLFNBQUMsVUFBRCxFQUFhLEVBQWI7SUFDVixJQUFDLENBQUEsV0FBRCxHQUFlLElBQUksS0FBSyxDQUFDO1dBQ3pCLElBQUMsQ0FBQSxXQUFXLENBQUMsSUFBYixDQUFrQixVQUFVLENBQUMsSUFBN0IsRUFBbUMsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLFFBQUQsRUFBVyxTQUFYO0FBQy9CLFlBQUE7UUFBQSxRQUFBLEdBQVcsU0FBVSxDQUFBLENBQUE7UUFDckIsS0FBQSxHQUFZLElBQUEsS0FBSyxDQUFDLElBQU4sQ0FBVyxRQUFYLEVBQXFCLFFBQXJCO1FBQ1osS0FBSyxDQUFDLFVBQU4sR0FBbUIsUUFBUSxDQUFDO2VBRTVCLEVBQUEsQ0FBRyxLQUFIO01BTCtCO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFuQyxFQU1FLElBTkYsRUFNUSxTQUFDLENBQUQ7YUFBTyxPQUFPLENBQUMsR0FBUixDQUFZLENBQVo7SUFBUCxDQU5SO0VBRlU7O3VCQVVkLFFBQUEsR0FBVSxTQUFDLElBQUQsRUFBTyxFQUFQO0FBQ04sUUFBQTtJQUFBLE9BQUEsR0FBVSxJQUFJO0lBQ2QsT0FBTyxDQUFDLGdCQUFSLENBQXlCLGtCQUF6QjtJQUNBLE9BQU8sQ0FBQyxJQUFSLENBQWEsS0FBYixFQUFvQixJQUFwQixFQUEwQixJQUExQjtJQUNBLE9BQU8sQ0FBQyxrQkFBUixHQUE2QixTQUFBO01BQ3pCLElBQUcsT0FBTyxDQUFDLFVBQVIsS0FBc0IsQ0FBdEIsSUFBMkIsT0FBTyxDQUFDLE1BQVIsS0FBa0IsR0FBaEQ7ZUFDSSxFQUFBLENBQUcsT0FBTyxDQUFDLFlBQVgsRUFESjs7SUFEeUI7V0FHN0IsT0FBTyxDQUFDLElBQVIsQ0FBYSxJQUFiO0VBUE07Ozs7Ozs7O0FEMUJkLE9BQUEsQ0FBUSxxQkFBUjs7QUFDQSxPQUFBLENBQVEscUJBQVI7O0FBRU0sT0FBTyxDQUFDO0VBQ0csYUFBQyxVQUFELEVBQWEsRUFBYjtBQUNULFFBQUE7SUFBQSxJQUFBLEdBQU8sVUFBVSxDQUFDO0lBQ2xCLElBQUMsQ0FBQSxPQUFELEdBQVcsSUFBSSxDQUFDLFNBQUwsQ0FBZSxDQUFmLEVBQWtCLElBQUksQ0FBQyxPQUFMLENBQWEsSUFBSSxDQUFDLEtBQUwsQ0FBVyxHQUFYLENBQWUsQ0FBQyxHQUFoQixDQUFBLENBQWIsQ0FBbEI7SUFDWCxJQUFDLENBQUEsU0FBRCxHQUFhLElBQUksQ0FBQyxLQUFMLENBQVcsR0FBWCxDQUFlLENBQUMsR0FBaEIsQ0FBQTtJQUNiLElBQUMsQ0FBQSxZQUFELEdBQWdCLElBQUMsQ0FBQSxTQUFTLENBQUMsT0FBWCxDQUFtQixNQUFuQixFQUEyQixNQUEzQjtJQUVoQixJQUFDLENBQUEsY0FBRCxHQUFrQixJQUFJLEtBQUssQ0FBQztJQUM1QixJQUFDLENBQUEsV0FBRCxHQUFlLElBQUksS0FBSyxDQUFDO0lBRXpCLElBQUMsQ0FBQSxjQUFjLENBQUMsT0FBaEIsQ0FBd0IsSUFBQyxDQUFBLE9BQXpCO0lBQ0EsSUFBQyxDQUFBLGNBQWMsQ0FBQyxJQUFoQixDQUFxQixJQUFDLENBQUEsWUFBdEIsRUFBb0MsQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLFNBQUQ7UUFDaEMsU0FBUyxDQUFDLE9BQVYsQ0FBQTtRQUVBLEtBQUMsQ0FBQSxXQUFXLENBQUMsWUFBYixDQUEwQixTQUExQjtRQUNBLEtBQUMsQ0FBQSxXQUFXLENBQUMsT0FBYixDQUFxQixLQUFDLENBQUEsT0FBdEI7ZUFDQSxLQUFDLENBQUEsV0FBVyxDQUFDLElBQWIsQ0FBa0IsS0FBQyxDQUFBLFNBQW5CLEVBQThCLFNBQUMsS0FBRDtpQkFDMUIsRUFBQSxDQUFHLEtBQUg7UUFEMEIsQ0FBOUI7TUFMZ0M7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQXBDO0VBVlM7Ozs7Ozs7O0FESmpCLElBQUE7O0FBQUEsTUFBTSxDQUFDLEtBQVAsR0FBZSxPQUFBLENBQVEseUJBQVI7O0FBQ2YsT0FBQSxDQUFRLGtCQUFSOztBQUVDLFFBQVMsT0FBQSxDQUFRLHFCQUFSOztBQUNULFNBQVUsT0FBQSxDQUFRLHNCQUFSOztBQUNWLFFBQVMsT0FBQSxDQUFRLHFCQUFSOztBQUNULE9BQVEsT0FBQSxDQUFRLG9CQUFSOztBQUNSLFFBQVMsT0FBQSxDQUFRLHFCQUFSOztBQUVWLE1BQU0sQ0FBQyxPQUFQLEdBQ0k7RUFBQSxLQUFBLEVBQU8sS0FBUDtFQUNBLE1BQUEsRUFBUSxNQURSO0VBRUEsS0FBQSxFQUFPLEtBRlA7RUFHQSxJQUFBLEVBQU0sSUFITjtFQUlBLEtBQUEsRUFBTyxLQUpQO0VBUUEsaUJBQUEsRUFBbUIsS0FBSyxDQUFDLGlCQVJ6QjtFQVNBLGtCQUFBLEVBQW9CLEtBQUssQ0FBQyxrQkFUMUI7RUFVQSxvQkFBQSxFQUFzQixLQUFLLENBQUMsb0JBVjVCO0VBV0EsaUJBQUEsRUFBbUIsS0FBSyxDQUFDLGlCQVh6QjtFQVlBLGtCQUFBLEVBQW9CLEtBQUssQ0FBQyxrQkFaMUI7RUFhQSxpQkFBQSxFQUFtQixLQUFLLENBQUMsaUJBYnpCO0VBY0EsaUJBQUEsRUFBbUIsS0FBSyxDQUFDLGlCQWR6QjtFQWVBLG1CQUFBLEVBQXFCLEtBQUssQ0FBQyxtQkFmM0I7RUFnQkEsb0JBQUEsRUFBc0IsS0FBSyxDQUFDLG9CQWhCNUI7RUFpQkEsZ0JBQUEsRUFBa0IsS0FBSyxDQUFDLGdCQWpCeEI7RUFrQkEsY0FBQSxFQUFnQixLQUFLLENBQUMsY0FsQnRCO0VBbUJBLGlCQUFBLEVBQW1CLEtBQUssQ0FBQyxpQkFuQnpCO0VBb0JBLGNBQUEsRUFBZ0IsS0FBSyxDQUFDLGNBcEJ0QjtFQXFCQSxjQUFBLEVBQWdCLEtBQUssQ0FBQyxjQXJCdEI7RUFzQkEsY0FBQSxFQUFnQixLQUFLLENBQUMsY0F0QnRCIn0=
